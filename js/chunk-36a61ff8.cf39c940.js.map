{"version":3,"sources":["webpack:///./src/components/interaction-designer/block-types/MobilePrimitives_SelectManyResponseBlock.vue?dd3d","webpack:///./src/store/flow/block-types/MobilePrimitives_SelectManyResponseBlockStore.ts","webpack:///./src/components/interaction-designer/block-types/MobilePrimitives_SelectManyResponseBlock.vue?2b86","webpack:///./src/components/interaction-designer/block-types/MobilePrimitives_SelectManyResponseBlock.vue?f5d1","webpack:///./src/components/interaction-designer/block-types/MobilePrimitives_SelectManyResponseBlock.vue","webpack:///./src/components/interaction-designer/block-types/MobilePrimitives_SelectOneResponseBlock.vue?f3fe","webpack:///./src/components/interaction-designer/block-types/MobilePrimitives_SelectOneResponseBlock.vue?1385","webpack:///./src/components/interaction-designer/block-types/MobilePrimitives_SelectOneResponseBlock.vue?4674","webpack:///./src/components/interaction-designer/block-types/MobilePrimitives_SelectOneResponseBlock.vue","webpack:///./src/store/flow/block-types/MobilePrimitives_SelectOneResponseBlockStore.ts"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","_f","block_type","trans","block","attrs","promptResource","flow","_e","questionPromptResource","choicesPromptResource","_l","Object","keys","inflatedChoices","choiceKey","uuid","staticRenderFns","BLOCK_TYPE","getters","mutations","actions","createWith","state","commit","dispatch","props","root","blankResource","blankPromptResource","blankQuestionPromptResource","blankChoicesPromptResource","defaultExitProps","IdGeneratorUuidV4","generate","tag","label","errorExitProps","prompt","questionPrompt","choicesPrompt","choices","1","type","name","semanticLabel","exits","config","namespaced","blockVuexNamespace","Getter","Action","components","BlockNameEditor","BlockLabelEditor","BlockSemanticLabelEditor","FirstBlockEditorButton","ResourceEditor","BlockId","mixins","lang","install","component","flowVuexNamespace","newChoices","editSelectOneResponseBlockChoice","resourcesByUuid","deep","rootState","rootGetters","currentBlock","reduce","memo","allChoicesHaveContent","every","key","values","twoChoicesBlank","blankNumber","some","deleteChoiceByKey","choiceKeyToRemove","blockId","sort","index","pushNewChoice","choiceId","newIndex","popFirstEmptyChoice","choiceToRemove","activeBlock","parseInt","test","exit","newExit","exitLabel"],"mappings":"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","file":"js/chunk-36a61ff8.cf39c940.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h3',{staticClass:\"no-room-above\"},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.edit-block-type',{block_type: _vm.trans((\"flow-builder.\" + (_vm.block.type)))}))+\" \")]),_c('block-name-editor',{attrs:{\"block\":_vm.block}}),_c('block-label-editor',{attrs:{\"block\":_vm.block}}),_c('block-semantic-label-editor',{attrs:{\"block\":_vm.block}}),_c('div',{staticClass:\"prompt-resource\"},[(_vm.promptResource)?_c('resource-editor',{attrs:{\"label\":_vm._f(\"trans\")('flow-builder.prompt'),\"resource\":_vm.promptResource,\"block\":_vm.block,\"flow\":_vm.flow}}):_vm._e()],1),_c('div',{staticClass:\"question-prompt-resource\"},[(_vm.questionPromptResource)?_c('resource-editor',{attrs:{\"label\":_vm._f(\"trans\")('flow-builder.question-prompt'),\"resource\":_vm.questionPromptResource,\"block\":_vm.block,\"flow\":_vm.flow}}):_vm._e()],1),_c('div',{staticClass:\"choices-prompt-resource\"},[(_vm.choicesPromptResource)?_c('resource-editor',{attrs:{\"label\":_vm._f(\"trans\")('flow-builder.choices-prompt'),\"resource\":_vm.choicesPromptResource,\"block\":_vm.block,\"flow\":_vm.flow}}):_vm._e()],1),_vm._l((Object.keys(_vm.inflatedChoices)),function(choiceKey){return _c('div',{staticClass:\"form-group form-inline\"},[_c('resource-editor',{attrs:{\"label\":(\"Choice \" + choiceKey),\"resource\":_vm.inflatedChoices[choiceKey],\"block\":_vm.block,\"flow\":_vm.flow}})],1)}),_c('first-block-editor-button',{attrs:{\"flow\":_vm.flow,\"block-id\":_vm.block.uuid}}),_c('block-id',{attrs:{\"block\":_vm.block}})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { ISelectOneResponseBlock } from \"@floip/flow-runner/dist/model/block/ISelectOneResponseBlock\"\nimport { IBlockExit } from \"@floip/flow-runner\"\nimport { IdGeneratorUuidV4 } from \"@floip/flow-runner/dist/domain/IdGeneratorUuidV4\"\nimport { defaults } from 'lodash'\nimport { ActionTree, GetterTree, MutationTree } from 'vuex'\nimport { IFlowsState } from '@/store/flow'\nimport { IRootState } from '@/store'\nimport { getters as selectOneGetters, mutations as selectOneMutations, actions as selectOneActions } from './MobilePrimitives_SelectOneResponseBlockStore'\n\nexport const BLOCK_TYPE = 'MobilePrimitives\\\\SelectManyResponse'\n\nexport const getters: GetterTree<IFlowsState, IRootState> = {\n  ...selectOneGetters,\n}\n\nexport const mutations: MutationTree<IFlowsState> = {\n  ...selectOneMutations,\n}\n\nexport const actions: ActionTree<IFlowsState, IRootState> = {\n  ...selectOneActions,\n\n  async createWith({ state, commit, dispatch }, { props }: {props: {uuid: string} & Partial<ISelectOneResponseBlock>}) {\n    const blankResource = await dispatch('flow/flow_addBlankResourceForEnabledModesAndLangs', null, { root: true })\n    const blankPromptResource = await dispatch('flow/flow_addBlankResourceForEnabledModesAndLangs', null, { root: true })\n    const blankQuestionPromptResource = await dispatch('flow/flow_addBlankResourceForEnabledModesAndLangs', null, { root: true })\n    const blankChoicesPromptResource = await dispatch('flow/flow_addBlankResourceForEnabledModesAndLangs', null, { root: true })\n\n    const defaultExitProps: Partial<IBlockExit> = {\n      uuid: (new IdGeneratorUuidV4()).generate(),\n      tag: 'Default',\n      label: 'Default',\n    }\n\n    const errorExitProps: Partial<IBlockExit> = {\n      uuid: (new IdGeneratorUuidV4()).generate(),\n      tag: 'Error',\n      label: 'Error',\n    }\n\n    return defaults(props, {\n      type: BLOCK_TYPE,\n      name: '',\n      label: '',\n      semanticLabel: '',\n      exits: [\n        await dispatch('flow/block_createBlockDefaultExitWith', { props: defaultExitProps }, { root: true }),\n        await dispatch('flow/block_createBlockExitWith', { props: errorExitProps }, { root: true }),\n      ],\n      config: {\n        prompt: blankPromptResource.uuid,\n        questionPrompt: blankQuestionPromptResource.uuid,\n        choicesPrompt: blankChoicesPromptResource.uuid,\n        choices: { 1: blankResource.uuid },\n      },\n    })\n  },\n}\n\nexport default {\n  namespaced: true,\n  getters,\n  mutations,\n  actions,\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component } from 'vue-property-decorator'\nimport {\n  IResourceDefinition,\n} from '@floip/flow-runner/src/domain/IResourceResolver'\nimport SelectManyResponseStore, { BLOCK_TYPE } from '@/store/flow/block-types/MobilePrimitives_SelectManyResponseBlockStore'\nimport { namespace } from 'vuex-class'\nimport lang from '@/lib/filters/lang'\nimport { createDefaultBlockTypeInstallerFor } from '@/store/builder'\nimport BlockNameEditor from '../block-editors/NameEditor.vue'\nimport BlockLabelEditor from '../block-editors/LabelEditor.vue'\nimport BlockSemanticLabelEditor from '../block-editors/SemanticLabelEditor.vue'\n\nimport FirstBlockEditorButton from '../flow-editors/FirstBlockEditorButton.vue'\nimport ResourceEditor from '../resource-editors/ResourceEditor.vue'\nimport BlockId from '../block-editors/BlockId.vue'\n\nimport SelectOneResponseBlock from './MobilePrimitives_SelectOneResponseBlock.vue'\n\nconst blockVuexNamespace = namespace(`flow/${BLOCK_TYPE}`)\n\n  @Component<any>({\n    components: {\n      BlockNameEditor,\n      BlockLabelEditor,\n      BlockSemanticLabelEditor,\n      FirstBlockEditorButton,\n      ResourceEditor,\n      BlockId,\n    },\n    mixins: [lang],\n  })\nexport class MobilePrimitives_SelectManyResponseBlock extends SelectOneResponseBlock {\n    @blockVuexNamespace.Getter inflatedChoices!: {[key: string]: IResourceDefinition}\n\n    @blockVuexNamespace.Action editSelectOneResponseBlockChoice!: () => Promise<object>\n}\n\nexport default MobilePrimitives_SelectManyResponseBlock\nexport const install = createDefaultBlockTypeInstallerFor(BLOCK_TYPE, SelectManyResponseStore)\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MobilePrimitives_SelectManyResponseBlock.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MobilePrimitives_SelectManyResponseBlock.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./MobilePrimitives_SelectManyResponseBlock.vue?vue&type=template&id=368cde46&\"\nimport script from \"./MobilePrimitives_SelectManyResponseBlock.vue?vue&type=script&lang=ts&\"\nexport * from \"./MobilePrimitives_SelectManyResponseBlock.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h3',{staticClass:\"no-room-above\"},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.edit-block-type',{block_type: _vm.trans((\"flow-builder.\" + (_vm.block.type)))}))+\" \")]),_c('block-name-editor',{attrs:{\"block\":_vm.block}}),_c('block-label-editor',{attrs:{\"block\":_vm.block}}),_c('block-semantic-label-editor',{attrs:{\"block\":_vm.block}}),_c('div',{staticClass:\"prompt-resource\"},[(_vm.promptResource)?_c('resource-editor',{attrs:{\"label\":_vm._f(\"trans\")('flow-builder.prompt'),\"resource\":_vm.promptResource,\"block\":_vm.block,\"flow\":_vm.flow}}):_vm._e()],1),_c('div',{staticClass:\"question-prompt-resource\"},[(_vm.questionPromptResource)?_c('resource-editor',{attrs:{\"label\":_vm._f(\"trans\")('flow-builder.question-prompt'),\"resource\":_vm.questionPromptResource,\"block\":_vm.block,\"flow\":_vm.flow}}):_vm._e()],1),_c('div',{staticClass:\"choices-prompt-resource\"},[(_vm.choicesPromptResource)?_c('resource-editor',{attrs:{\"label\":_vm._f(\"trans\")('flow-builder.choices-prompt'),\"resource\":_vm.choicesPromptResource,\"block\":_vm.block,\"flow\":_vm.flow}}):_vm._e()],1),_vm._l((Object.keys(_vm.inflatedChoices)),function(choiceKey){return _c('div',{staticClass:\"form-group form-inline\"},[_c('resource-editor',{attrs:{\"label\":(\"Choice \" + choiceKey),\"resource\":_vm.inflatedChoices[choiceKey],\"block\":_vm.block,\"flow\":_vm.flow}})],1)}),_c('first-block-editor-button',{attrs:{\"flow\":_vm.flow,\"block-id\":_vm.block.uuid}}),_c('block-id',{attrs:{\"block\":_vm.block}})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { IFlow } from '@floip/flow-runner'\nimport { ISelectOneResponseBlock } from '@floip/flow-runner/src/model/block/ISelectOneResponseBlock'\nimport {\n  IResourceDefinition,\n} from '@floip/flow-runner/src/domain/IResourceResolver'\nimport Vue from 'vue'\nimport { namespace } from 'vuex-class'\nimport { Component, Prop, Watch } from 'vue-property-decorator'\n\nimport SelectOneStore, { BLOCK_TYPE } from '@/store/flow/block-types/MobilePrimitives_SelectOneResponseBlockStore'\nimport lang from '@/lib/filters/lang'\nimport { createDefaultBlockTypeInstallerFor } from '@/store/builder'\nimport BlockNameEditor from '../block-editors/NameEditor.vue'\nimport BlockLabelEditor from '../block-editors/LabelEditor.vue'\nimport BlockSemanticLabelEditor from '../block-editors/SemanticLabelEditor.vue'\n\nimport FirstBlockEditorButton from '../flow-editors/FirstBlockEditorButton.vue'\nimport ResourceEditor from '../resource-editors/ResourceEditor.vue'\nimport BlockId from '../block-editors/BlockId.vue'\n\nconst flowVuexNamespace = namespace('flow')\nconst blockVuexNamespace = namespace(`flow/${BLOCK_TYPE}`)\n\n  @Component<any>({\n    components: {\n      BlockNameEditor,\n      BlockLabelEditor,\n      BlockSemanticLabelEditor,\n      FirstBlockEditorButton,\n      ResourceEditor,\n      BlockId,\n    },\n    mixins: [lang],\n  })\nexport class MobilePrimitives_SelectOneResponseBlock extends Vue {\n    @Prop()readonly block!: ISelectOneResponseBlock\n\n    @Prop()readonly flow!: IFlow\n\n    get promptResource(): IResourceDefinition {\n      return this.resourcesByUuid[this.block.config.prompt]\n    }\n\n    get questionPromptResource(): IResourceDefinition {\n      return this.resourcesByUuid[this.block.config.questionPrompt || '']\n    }\n\n    get choicesPromptResource(): IResourceDefinition {\n      return this.resourcesByUuid[this.block.config.choicesPrompt || '']\n    }\n\n    @Watch('inflatedChoices', { deep: true })\n    onChoicesChanged(newChoices: object) {\n      this.editSelectOneResponseBlockChoice()\n    }\n\n    @flowVuexNamespace.Getter resourcesByUuid!: {[key: string]: IResourceDefinition}\n\n    @blockVuexNamespace.Getter inflatedChoices!: {[key: string]: IResourceDefinition}\n\n    @blockVuexNamespace.Action editSelectOneResponseBlockChoice!: () => Promise<object>\n}\n\nexport default MobilePrimitives_SelectOneResponseBlock\nexport const install = createDefaultBlockTypeInstallerFor(BLOCK_TYPE, SelectOneStore)\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MobilePrimitives_SelectOneResponseBlock.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MobilePrimitives_SelectOneResponseBlock.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./MobilePrimitives_SelectOneResponseBlock.vue?vue&type=template&id=a480af60&\"\nimport script from \"./MobilePrimitives_SelectOneResponseBlock.vue?vue&type=script&lang=ts&\"\nexport * from \"./MobilePrimitives_SelectOneResponseBlock.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { ActionTree, GetterTree, MutationTree } from 'vuex'\nimport { IRootState } from '@/store'\nimport {\n  IBlockExitTestRequired,\n  IBlockExit,\n  IFlow,\n  IContext,\n  SupportedContentType,\n  findBlockOnActiveFlowWith,\n  IResourceDefinitionContentTypeSpecific,\n} from '@floip/flow-runner'\nimport { IdGeneratorUuidV4 } from '@floip/flow-runner/dist/domain/IdGeneratorUuidV4'\nimport { ISelectOneResponseBlock } from '@floip/flow-runner/dist/model/block/ISelectOneResponseBlock'\nimport {\n  IResourceDefinition,\n} from '@floip/flow-runner/src/domain/IResourceResolver'\nimport Vue from 'vue'\nimport { defaults, find, max } from 'lodash'\nimport { IResourceDefinitionVariantOverModesFilter } from '../resource'\nimport { IFlowsState } from '../index'\n\nimport { someItemsHaveValue, allItemsHaveValue, twoItemsBlank } from '../utils/listBuilder'\n\nexport const BLOCK_TYPE = 'MobilePrimitives\\\\SelectOneResponse'\n\nexport const getters: GetterTree<IFlowsState, IRootState> = {\n  inflatedChoices: (state, getters, rootState, rootGetters): object => {\n    const currentBlock = rootGetters['builder/activeBlock']\n    const choices: {[key: string]: IResourceDefinition} = {}\n    return Object.keys(currentBlock.config.choices).reduce((memo, choiceKey): {[key: string]: IResourceDefinition} => {\n      memo[choiceKey] = rootGetters['flow/resourcesByUuid'][currentBlock.config.choices[choiceKey]]\n      return memo\n    }, choices)\n  },\n  allChoicesHaveContent: (state, getters): boolean => Object.keys(getters.inflatedChoices).every((key: string) => someItemsHaveValue(getters.inflatedChoices[key].values, 'value')),\n  twoChoicesBlank: (state, getters, rootState, rootGetters): boolean => {\n    let blankNumber = 0\n    return Object.keys(getters.inflatedChoices).some((key: string) => {\n      if (!someItemsHaveValue(getters.inflatedChoices[key].values, 'value')) {\n        blankNumber += 1\n      }\n\n      if (blankNumber > 1) {\n        return true\n      }\n\n      return false\n    })\n  },\n\n}\n\nexport const mutations: MutationTree<IFlowsState> = {\n  deleteChoiceByKey(state, { choiceKeyToRemove, blockId }) {\n    // TODO - this shouldn't be necessary\n    // @ts-ignore - TS2339: Property 'flow' does not exist on type\n    const block: ISelectOneResponseBlock = findBlockOnActiveFlowWith(blockId, this.state.flow as unknown as IContext) as ISelectOneResponseBlock\n    delete block.config.choices[choiceKeyToRemove]\n    const choices: {[key: string]: string} = {}\n    // rekey\n    block.config.choices = Object.keys(block.config.choices).sort().reduce((choices, choiceKey: string, index: number) => {\n      choices[index + 1] = block.config.choices[choiceKey]\n      return choices\n    }, choices)\n  },\n  pushNewChoice(state, { choiceId, blockId, newIndex }) {\n    // TODO - this shouldn't be necessary\n    // @ts-ignore - TS2339: Property 'flow' does not exist on type\n    const block: ISelectOneResponseBlock = findBlockOnActiveFlowWith(blockId, this.state.flow as unknown as IContext) as ISelectOneResponseBlock\n    block.config.choices[newIndex] = choiceId\n  },\n}\n\nexport const actions: ActionTree<IFlowsState, IRootState> = {\n  async popFirstEmptyChoice({ commit, rootGetters, getters }) {\n    const choiceToRemove = find(Object.keys(getters.inflatedChoices), (key: string) => !someItemsHaveValue(getters.inflatedChoices[key].values, 'value'))\n    if (choiceToRemove) {\n      commit('deleteChoiceByKey', { choiceKeyToRemove: choiceToRemove, blockId: rootGetters['builder/activeBlock'].uuid })\n      return rootGetters['builder/activeBlock'].config.choices[choiceToRemove]\n    }\n    return null\n  },\n  async editSelectOneResponseBlockChoice({\n    commit, dispatch, getters, rootGetters,\n  }) {\n    const activeBlock = rootGetters['builder/activeBlock']\n    if (getters.allChoicesHaveContent) {\n      const newIndex = parseInt(max(Object.keys(activeBlock.config.choices)) || '0') + 1\n      const blankResource = await dispatch('flow/flow_addBlankResourceForEnabledModesAndLangs', null, { root: true })\n      // due to a race condition we may have already pushed something\n      if (!activeBlock.config.choices[newIndex]) {\n        commit('pushNewChoice', { choiceId: blankResource.uuid, blockId: activeBlock.uuid, newIndex })\n        const exit: IBlockExitTestRequired = await dispatch('flow/block_createBlockExitWith', {\n          props: ({\n            uuid: (new IdGeneratorUuidV4()).generate(),\n            test: `block.value = ${newIndex - 1}`,\n            label: blankResource.uuid,\n          }) as IBlockExitTestRequired,\n        }, { root: true })\n        commit('flow/block_pushNewExit', { blockId: activeBlock.uuid, newExit: exit }, { root: true })\n      }\n    } else if (getters.twoChoicesBlank) {\n      const exitLabel = await dispatch('popFirstEmptyChoice', { blockId: activeBlock.uuid })\n      if (exitLabel) {\n        commit('flow/block_popExitsByLabel', { blockId: activeBlock.uuid, exitLabel }, { root: true })\n      }\n    }\n    return activeBlock.config.choices\n  },\n\n  // todo: in the flow-spec, there's mention that we can configure to swap between exit-per-choice and a default exit\n  //       but, it doesn't seem to mention how this is configured\n  async createWith({ state, commit, dispatch }, { props }: {props: {uuid: string} & Partial<ISelectOneResponseBlock>}) {\n    const blankResource = await dispatch('flow/flow_addBlankResourceForEnabledModesAndLangs', null, { root: true })\n    const blankPromptResource = await dispatch('flow/flow_addBlankResourceForEnabledModesAndLangs', null, { root: true })\n    const blankQuestionPromptResource = await dispatch('flow/flow_addBlankResourceForEnabledModesAndLangs', null, { root: true })\n    const blankChoicesPromptResource = await dispatch('flow/flow_addBlankResourceForEnabledModesAndLangs', null, { root: true })\n\n    const defaultExitProps: Partial<IBlockExit> = {\n      uuid: (new IdGeneratorUuidV4()).generate(),\n      tag: 'Default',\n      label: 'Default',\n    }\n\n    const errorExitProps: Partial<IBlockExit> = {\n      uuid: (new IdGeneratorUuidV4()).generate(),\n      tag: 'Error',\n      label: 'Error',\n    }\n\n    return defaults(props, {\n      type: BLOCK_TYPE,\n      name: '',\n      label: '',\n      semanticLabel: '',\n      exits: [\n        await dispatch('flow/block_createBlockDefaultExitWith', { props: defaultExitProps }, { root: true }),\n        await dispatch('flow/block_createBlockExitWith', { props: errorExitProps }, { root: true }),\n      ],\n      config: {\n        prompt: blankPromptResource.uuid,\n        questionPrompt: blankQuestionPromptResource.uuid,\n        choicesPrompt: blankChoicesPromptResource.uuid,\n        choices: { 1: blankResource.uuid },\n      },\n    })\n  }\n  ,\n\n}\n\nexport default {\n  namespaced: true,\n  getters,\n  mutations,\n  actions,\n}\n"],"sourceRoot":""}