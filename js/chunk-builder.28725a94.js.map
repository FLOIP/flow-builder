{"version":3,"sources":["webpack:///./node_modules/get-intrinsic/index.js","webpack:///./src/store/clipboard/index.ts","webpack:///./src/store/flow/resource.ts","webpack:///./src/store/flow/index.ts","webpack:///./src/store/index.ts","webpack:///./src/components/interaction-designer/clipboard/ClipboardRoot.vue","webpack:///./src/components/interaction-designer/clipboard/prompt-kinds/Message.vue","webpack:///./src/components/interaction-designer/clipboard/shared/PromptKindMixin.ts","webpack:///./src/components/interaction-designer/clipboard/shared/BlockActionButtons.vue","webpack:///./src/components/interaction-designer/clipboard/shared/BlockActionButtons.vue?8571","webpack:///./src/components/interaction-designer/clipboard/shared/BlockActionButtons.vue?5dbb","webpack:///./src/components/interaction-designer/clipboard/shared/BlockActionButtons.vue?5c13","webpack:///./src/components/interaction-designer/clipboard/prompt-kinds/Message.vue?3929","webpack:///./src/components/interaction-designer/clipboard/prompt-kinds/Message.vue?77fc","webpack:///./src/components/interaction-designer/clipboard/prompt-kinds/Message.vue?5e45","webpack:///./src/components/interaction-designer/clipboard/prompt-kinds/Numeric.vue","webpack:///./src/components/interaction-designer/clipboard/prompt-kinds/Numeric.vue?2359","webpack:///./src/components/interaction-designer/clipboard/prompt-kinds/Numeric.vue?4329","webpack:///./src/components/interaction-designer/clipboard/prompt-kinds/Numeric.vue?4d1d","webpack:///./src/components/interaction-designer/clipboard/prompt-kinds/Open.vue","webpack:///./src/components/interaction-designer/clipboard/prompt-kinds/Open.vue?9297","webpack:///./src/components/interaction-designer/clipboard/prompt-kinds/Open.vue?3aff","webpack:///./src/components/interaction-designer/clipboard/prompt-kinds/Open.vue?4fd7","webpack:///./src/components/interaction-designer/clipboard/prompt-kinds/SelectOne.vue","webpack:///./src/components/interaction-designer/clipboard/prompt-kinds/SelectOne.vue?ea2e","webpack:///./src/components/interaction-designer/clipboard/prompt-kinds/SelectOne.vue?8c21","webpack:///./src/components/interaction-designer/clipboard/prompt-kinds/SelectOne.vue?930b","webpack:///./src/components/interaction-designer/clipboard/prompt-kinds/SelectMany.vue","webpack:///./src/components/interaction-designer/clipboard/prompt-kinds/SelectMany.vue?892d","webpack:///./src/components/interaction-designer/clipboard/prompt-kinds/SelectMany.vue?00d2","webpack:///./src/components/interaction-designer/clipboard/prompt-kinds/SelectMany.vue?e371","webpack:///./src/components/interaction-designer/clipboard/shared/UnsupportedBlock.vue","webpack:///./src/components/interaction-designer/clipboard/shared/UnsupportedBlock.vue?00e1","webpack:///./src/components/interaction-designer/clipboard/shared/UnsupportedBlock.vue?5880","webpack:///./src/components/interaction-designer/clipboard/shared/UnsupportedBlock.vue?4874","webpack:///./src/components/interaction-designer/clipboard/ClipboardRoot.vue?fcd1","webpack:///./src/components/interaction-designer/clipboard/ClipboardRoot.vue?cdae","webpack:///./src/components/interaction-designer/clipboard/ClipboardRoot.vue?59cb","webpack:///./src/components/interaction-designer/block-types lazy ^\\.\\/.*Block\\.vue$ namespace object","webpack:///./node_modules/function-bind/index.js","webpack:///./node_modules/has-symbols/shams.js","webpack:///./node_modules/lodash/_baseEvery.js","webpack:///./src/views/InteractionDesigner.vue?e57a","webpack:///./node_modules/lodash/_baseForOwn.js","webpack:///./node_modules/lodash/every.js","webpack:///./node_modules/object-inspect/index.js","webpack:///./src/store/trees/10-trees-model.js","webpack:///./node_modules/call-bind/index.js","webpack:///./node_modules/qs/lib/stringify.js","webpack:///./node_modules/qs/lib/index.js","webpack:///./node_modules/lodash/_baseEach.js","webpack:///./node_modules/lang.js/src/lang.js","webpack:///./node_modules/has-symbols/index.js","webpack:///./node_modules/side-channel/index.js","webpack:///./node_modules/call-bind/callBound.js","webpack:///./node_modules/lodash/fp/every.js","webpack:///./src/components/interaction-designer/clipboard/ClipboardRoot.vue?f82c","webpack:///./node_modules/lodash/_arrayEvery.js","webpack:///./node_modules/function-bind/implementation.js","webpack:///./node_modules/lodash/_baseFor.js","webpack:///./src/store/trees/audio.js","webpack:///./src/views/ImportFlow.vue","webpack:///./src/store/flow/views/import.ts","webpack:///./src/views/ImportFlow.vue?bfb9","webpack:///./src/views/ImportFlow.vue?c6e0","webpack:///./src/views/ImportFlow.vue?328e","webpack:///./src/store/common/flight-monitor.js","webpack:///./src/store/trees/trees.js","webpack:///./src/views/FetchFlow.vue","webpack:///./src/views/FetchFlow.vue?df6d","webpack:///./src/views/FetchFlow.vue?6539","webpack:///./src/views/FetchFlow.vue?f8c3","webpack:///./node_modules/lodash/_createBaseEach.js","webpack:///./node_modules/lodash/_createBaseFor.js","webpack:///./src/views/InteractionDesigner.vue?4b72","webpack:///./node_modules/lodash/_isIterateeCall.js","webpack:///./node_modules/qs/lib/parse.js","webpack:///./node_modules/has/src/index.js","webpack:///./src/views/ImportFlow.vue?113b","webpack:///./src/store/trees/bootstrap-legacy-global-dependencies.js","webpack:///./node_modules/qs/lib/formats.js","webpack:///./src/views/Home.vue","webpack:///./src/views/Home.vue?4cbc","webpack:///./src/views/Home.vue?3475","webpack:///./src/views/Home.vue?db79","webpack:///./src/store/trees/12-trees-helpers.js","webpack:///./node_modules/qs/lib/utils.js","webpack:///./src/views/Home.vue?c663","webpack:///./node_modules/bootstrap-datetimepicker/src/js/bootstrap-datetimepicker.js","webpack:///./src/views/NewFlow.vue","webpack:///./src/views/NewFlow.vue?d794","webpack:///./src/views/NewFlow.vue?760a","webpack:///./src/views/NewFlow.vue?23bc","webpack:///./src/components/interaction-designer/clipboard/shared/BlockActionButtons.vue?2cda","webpack:///./src/views/InteractionDesigner.vue","webpack:///./src/views/InteractionDesigner.vue?2cfb","webpack:///./src/views/InteractionDesigner.vue?3d8b"],"names":["undefined","$SyntaxError","SyntaxError","$Function","Function","$TypeError","TypeError","getEvalledConstructor","expressionSyntax","e","$gOPD","Object","getOwnPropertyDescriptor","throwTypeError","ThrowTypeError","calleeThrows","arguments","get","gOPDthrows","hasSymbols","getProto","getPrototypeOf","x","__proto__","needsEval","TypedArray","Uint8Array","INTRINSICS","AggregateError","Array","ArrayBuffer","Symbol","iterator","Atomics","BigInt","Boolean","DataView","Date","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","Error","eval","EvalError","Float32Array","Float64Array","FinalizationRegistry","Int8Array","Int16Array","Int32Array","isFinite","isNaN","JSON","Map","Math","Number","parseFloat","parseInt","Promise","Proxy","RangeError","ReferenceError","Reflect","RegExp","Set","SharedArrayBuffer","String","Uint8ClampedArray","Uint16Array","Uint32Array","URIError","WeakMap","WeakRef","WeakSet","doEval","name","value","fn","prototype","gen","LEGACY_ALIASES","bind","hasOwn","$concat","call","concat","$spliceApply","apply","splice","$replace","replace","$strSlice","slice","rePropName","reEscapeChar","stringToPath","string","first","last","result","match","number","quote","subString","length","getBaseIntrinsic","allowMissing","alias","intrinsicName","module","exports","parts","intrinsicBaseName","intrinsic","intrinsicRealName","skipFurtherCaching","i","isOwn","part","desc","stateFactory","isSimulatorActive","blocksData","getters","state","getBlockPrompt","index","prompt","isBlockFocused","isFocused","mutations","setSimulatorActive","setIsFocused","actions","commit","resetBlocksData","data","setLastBlockUnEditable","lastIndex","setLastBlockEditable","addToBlocksData","push","removeFromBlocksData","store","namespaced","resourcesByUuidOnActiveFlow","_state","activeFlow","resources","resourceUuidsOnActiveFlow","map","res","uuid","nonOrphanResourceUuidsOnActiveFlow","results","blocks","forEach","block","union","findBlockRelatedResourcesUuids","orphanResourceUuidsOnActiveFlow","difference","resource_addOnFlow","flowId","resource","findFlowWith","resource_createVariantOnFlow","resourceId","variant","flow","findResourceWith","values","cloneDeep","resource_removeVariantsOnFlow","variants","filter","includes","resource_setValueOnFlow","findResourceVariantOverModesWith","resource_setModesOnFlow","modes","isEmpty","ValidationException","resource_add","resource_createVariant","resource_removeVariants","resource_setValue","resource_setModes","_context","props","defaults","resource_setOrCreateValueModeSpecific","dispatch","assign","resource_setValueModeSpecific","mode","without","flowGetters","blockGetters","resourceGetters","flowMutations","blockMutations","resourceMutations","flowActions","blockActions","resourceActions","modules","builder","validation","trees","audio","clipboard","undoRedo","render","_vm","this","_c","_self","_setupProxy","staticClass","_v","_s","_f","on","closeSimulator","_l","blockData","key","class","config","kind","tag","attrs","context","goNext","isComplete","onEditComplete","scopedSlots","_u","cursorChangeInProgress","_e","label","proxy","content","unsupportedBlockName","staticRenderFns","_t","editBlockCommon","submitAnswer","isBlockInteraction","onCancelCommon","clipboardVuexNamespace","namespace","PromptKindMixin","Vue","constructor","errorMsg","checkIsValid","validate","message","__decorate","Prop","Getter","Action","Component","$event","stopPropagation","clickCancel","isDisabled","onNextClicked","primaryButtonText","BlockActionButtons","mixins","Lang","onCancelClicked","type","required","component","Message","submitAnswerCommon","components","editBlock","directives","rawName","enteredValue","expression","min","max","domProps","target","composing","onCancel","Numeric","backUpValue","Open","options","option","selectedItem","_q","SelectOne","mounted","setOptions","choices","choice","Context","getResource","getText","console","warn","selectedChoices","isArray","_i","$$a","$$el","$$c","checked","$$v","$$i","SelectMany","blockName","UnsupportedBlock","flowVuexNamespace","ClipboardRoot","created","initializeFlowRunner","promptId","hasText","flowState","currentFlowsState","contact","id","groups","userId","orgId","flows","languageId","SupportedMode","OFFLINE","createContextDataObjectFor","runner","FlowRunner","cursor","run","split","backtracking","behaviours","basicBacktracking","seekSteps","seek","destroyed","webpackAsyncContext","req","resolve","then","__webpack_require__","o","code","keys","implementation","getOwnPropertySymbols","obj","sym","symObj","toString","symVal","getOwnPropertyNames","syms","propertyIsEnumerable","descriptor","enumerable","baseEach","baseEvery","collection","predicate","registerHooks","flowNamespace","builderNamespace","clipboardNamespace","validationVuexNamespace","DEBOUNCE_VALIDATION_TIMER_MS","InteractionDesigner","Routes","debounceFlowValidation","debounce","async","newFlow","debug","mainComponent","validate_flow","validate_resourcesOnSupportedValues","supportedModes","supported_modes","supportedLanguages","languages","debounceBlockValidation","validate_allBlocksWithinFlow","toolbarHeight","pureVuejsBlocks","simulateClipboard","newBlocks","oldBlocks","newResources","oldResources","selectedBlock","isPureVueBlock","$store","v","k","hasModule","registerModule","onModeChanged","newMode","updateIsEditableFromParams","onMainComponentChanged","newMainComponent","setActiveMainComponent","activated","deselectBlocks","appConfig","builderConfig","isConfigured","configure","global","subscribe","handleFlowChanges","initializeTreeModel","beforeMount","window","addEventListener","event","isEditable","hasFlowChanges","preventDefault","returnValue","onScroll","registerBlockTypes","flow_setActiveFlowId","$router","path","route","query","nextUrl","$route","fullPath","isBuilderCanvasEnabled","discoverTallestBlockForDesignerWorkspaceHeight","aboveTallest","setTimeout","blockId","field","params","activateBlock","scrollBlockIntoView","scrollBehavior","meta","isBlockEditorShown","setIsBlockEditorOpen","beforeDestroy","removeEventListener","$refs","setInteractionDesignerHeaderBoundingClientRect","getBoundingClientRect","handleRouteUpdate","to","blockClasses","blockInstallers","blockClass","normalizedType","typeWithoutSeparators","uiComponent","install","exported","default","invoke","all","handleCanvasSelected","classList","contains","replaceRouteInHistory","isFlowEditorShown","isEditableLocked","app","ui","discoverIsEditableFrom","hash","setIsEditable","endsWith","showOrHideSidebar","history","payload","startsWith","setHasFlowChanges","Watch","deep","immediate","State","tree","designerWorkspaceHeight","details","hasVoice","hasSms","hasUssd","hasSocial","hasClipboard","Mutation","baseFor","baseForOwn","object","iteratee","arrayEvery","baseIteratee","isIterateeCall","every","guard","func","hasMap","mapSizeDescriptor","mapSize","mapForEach","hasSet","setSizeDescriptor","setSize","setForEach","hasWeakMap","weakMapHas","has","hasWeakSet","weakSetHas","hasWeakRef","weakRefDeref","deref","booleanValueOf","valueOf","objectToString","functionToString","bigIntValueOf","gOPS","symToString","hasShammedSymbols","isEnumerable","gPO","O","inspectCustom","custom","inspectSymbol","isSymbol","toStringTag","wrapQuotes","s","defaultStyle","opts","quoteChar","quoteStyle","toStr","isDate","isRegExp","isError","isString","isNumber","isBoolean","isBigInt","inspect_","depth","seen","maxStringLength","Infinity","customInspect","indent","inspectString","maxDepth","getIndent","indexOf","inspect","from","noIndent","newOpts","nameOf","arrObjKeys","join","symString","markBoxed","isElement","nodeName","toLowerCase","attributes","childNodes","xs","singleLineValues","indentedJoin","isMap","mapParts","collectionOf","isSet","setParts","isWeakMap","weakCollectionOf","isWeakSet","isWeakRef","ys","isPlainObject","protoTag","stringTag","constructorTag","hasOwnProperty","f","m","l","HTMLElement","getAttribute","str","remaining","trailer","lowbyte","c","n","charCodeAt","8","9","10","12","13","toUpperCase","size","entries","joinedEntries","baseIndent","base","prev","lineJoiner","isArr","symMap","test","j","Tree","attr","toJSON","_","clone","floipSyncedAt","title","description","enabledLanguages","syncedLanguage","startingBlockKey","exitBlockKey","floipPushUrl","floipPushApiKey","connections","_defaultReviewedState","upgrade","time","fixArrayBlocks","defaultEnabledLanguages","defaultSyncedLanguage","inflateDefaultReviewedStateOnAll","inflateDefaultTagsOnAll","inflateDefaultLabelOnAll","upgradeLanguageSelectorBlocks","inflateDefaultSocialContentOnAll","inflateDefaultClipboardContentOnAll","upgradeSubscriberPropertyFieldSelections","upgradeMsmcqBranchingToFalse","upgradeSubscriberPropertyBlocks","upgradeSubscriberBranchBlocks","timeEnd","cacheDefaultReviewedState","getEnabledLanguages","zipObject","fill","inflateDefaultReviewedStateOnto","customData","reviewed","approved","tags","languageSelectorBlock","addExitForNoResponse","socialContent","clipboardContent","propertyFieldId","property","findSubscriberPropertyField","display_label","customDataCategory","branching","uiData","numChoices","numConnections","outputNames","action","propertyDateMethod","startDateMethod","propertyDateAbsoluteDate","startDateAbsoluteDate","propertyDateRelativeNumber","startDateRelativeNumber","propertyDateTimespanType","startDateTimespanType","propertyDateNumericBlockKey","startDateNumericBlockKey","propertyField","upgradedFromStartDate","$set","startDateReference","neededFixing","fixedCount","each","arrayKeys","log","change","doesBlockLabelExist","comparatorKey","chain","find","jsKey","addBlock","makeUniqueId","setStartingBlock","getBlockByNumericIndex","blockKey","editBlockByNumericIndex","blockNumericIndex","arrayKey","extend","set","getBlock","findWhere","thisBlock","setBlockPosition","positionData","xPosition","yPosition","getBlockPosition","getBlockNumConnections","filterBlockConnectionsAboveMax","maxConnections","where","startBlockKey","nodeNumber","outputKey","removeConnection","setBlockAudioFile","audioData","audioFiles","removeBlockAudioFile","getBlockKeys","getNextBlockKey","lastKey","deleteBlock","clearStartingBlockIfIs","clearExitBlockIfIs","handleDeleteNumericQuestionBlockAssociations","selectedBlockKey","newBlock","_getAmendmentsForNumericBranchBlock","_getAmendmentsForIdValidationBlock","outputs","reduce","newOutputs","output","newConditions","conditions","condition","newCondition","numericQuestionBlockJsKey","prefix","now","random","getMcqChoiceName","choiceId","getBlockTitle","generateBlockTitle","limit","treeTitles","destinationTreeId","trans","treeSetTitles","destinationTreeSetId","groupNames","groupId","displayLabel","comparator","comparatorString","languageNames","languageValue","S","truncate","addConnection","endBlockKey","connection","addEnabledLanguage","languageKey","newEnabledLanguages","intersection","pluck","removeEnabledLanguage","enableVoice","disableVoice","enableSms","disableSms","enableUssd","disableUssd","enableSocial","disableSocial","enableClipboard","disableClipboard","validateLanguageAndContentTypes","missingLanguageIdsAudioFiles","missingLanguageIdsSmsContent","missingLanguageIdsUssdContent","missingLanguageIdsSocialContent","missingLanguageIdsClipboardContent","hasContent","smsContent","ussdContent","sms","voice","ussd","social","validateContent","updateFloipAlert","jQ","html","val","getEndBlockPosition","topOrBottom","returnBlockKey","offset","tallestYPosition","tallestBlockKey","thisYPosition","getTallestBlockPosition","getShortestBlockPosition","getTallestBlockKey","getShortestBlockKey","_blockIdPrefixMatcher","_validateNonExistentBlockReferences","keysToVerifiedMap","keysToExistsMap","validateKey","conn","extractedKey","exec","_mergeAndSanitizeImportedInto","treeJson","importJson","smsAutogenLangs","ussdAutogenLangs","socialAutogenLangs","clipboardAutogenLangs","importedEnabledLanguages","validLanguages","invalidLanguages","blockContentsToReview","contentPath","sanitizedContent","omit","orgContentBlockTypeKeys","SubscriberBranchBlock","GroupBranchBlock","GroupSizeBranchBlock","SubscriberPropertyBlock","GroupPropertyBlock","BillSubscriberBlock","TriggerOutgoingCallBlock","LanguageSelectorBlock","CallHistoryBranchBlock","DirectorySelectionBlock","OpenQuestionBlock","RandomOrderMultipleChoiceQuestionBlock","MultipleChoiceQuestionBlock","NumericQuestionBlock","CollaborativeFilteringRatingBlock","CollaborativeFilteringRatioBranchBlock","validateTreeData","json","schema","Ajv","ValidationError","coerceTypes","compile","errors","keyword","dataPath","createJsonSchemaFor","blockTypes","properties","items","enum","repeatKey","repeatMax","repeatDelay","repeat","GetIntrinsic","$apply","$call","$reflectApply","$defineProperty","$max","originalFunction","configurable","applyBind","getSideChannel","utils","formats","arrayPrefixGenerators","brackets","comma","indices","pushToArray","arr","valueOrArray","toISO","toISOString","defaultFormat","addQueryPrefix","allowDots","charset","charsetSentinel","delimiter","encode","encoder","encodeValuesOnly","format","formatter","formatters","serializeDate","date","skipNulls","strictNullHandling","isNonNullishPrimitive","stringify","generateArrayPrefix","sort","sideChannel","maybeMap","isBuffer","keyValue","objKeys","keyPrefix","valueSideChannel","normalizeStringifyOptions","arrayFormat","joined","parse","createBaseEach","root","factory","inferLocale","document","documentElement","lang","convertNumber","intervalRegexp","anyIntervalRegexp","locale","fallback","messages","setMessages","getLocale","setLocale","getFallback","setFallback","_getMessage","replacements","_applyReplacements","count","messageParts","explicitRules","trim","messageSpaceSplit","shift","_testInterval","_getLocale","pluralForm","_getPluralForm","transChoice","_parseKey","segments","source","sourceFallback","subKey","_getValueInKey","currentKey","restOfTheKey","_findMessageInTree","pathSegments","dottedKey","_sortReplacementKeys","a","b","allCaps","firstCap","letter","charAt","interval","matches","leftDelimiter","leftNumber","rightNumber","rightDelimiter","origSymbol","hasSymbolSham","callBound","$WeakMap","$Map","$weakMapGet","$weakMapSet","$weakMapHas","$mapGet","$mapSet","$mapHas","listGetNode","list","curr","next","listGet","objects","node","listSet","listHas","$wm","$m","$o","channel","assert","callBind","$indexOf","convert","placeholder","array","ERROR_MESSAGE","funcType","that","bound","args","binder","boundLength","boundArgs","Empty","createBaseFor","defaultsDeep","library","recording","isCalling","isRecorderSelectorVisible","recorders","availableAudioFiles","availableAudiosByUri","keyBy","addRecorder","recorder","uniqBy","pushAudioIntoLibrary","setRecordingStatusFor","status","setAudioRecordingConfigVisibilityForSelectedBlock","langId","isVisible","setAudioRecordingConfigVisibilityFor","startAudioRecordingFor","rootState","recorder_name","phone","recorder_phonenumber","isNew","is_new_recorder","axios","post","routeFrom","routes","headers","queue_id","queueId","status_description","recorder_id","catch","error","response","request","fetchAudioRecordingStatusFor","audio_file_id","created_at","duration_seconds","extractLangIdFromRecordingKey","extension","uploadedAudio","filename","language_id","original_extension","content_type","SupportedContentType","AUDIO","IVR","fetchStatusDelayMap","in_progress","queued","listen_to_recording","sending_audio_to_cn","processing","discard_and_record","hasImportFlowTitle","uploadOrPaste","chooseFile","flowJsonText","ref","handleFileUpload","fileName","flowJson","setUpdatingAndHandleFlowJsonTextChange","disableContinue","flowUUID","handleImportFlow","TRUE_AJV_ERROR_KEY_WORDS","TRUE_AJV_ERROR_DATA_PATH_PART","flowSpecVersion","hasSomethingToImport","languagesMissing","missingLanguages","propertiesMissing","missingProperties","groupsMissing","missingGroups","isSafeToImport","containerImportValidationTrueErrors","hasWarnings","containerImportValidationWarningErrors","containerImportValidationErrors","ajvError","some","pathPart","validationStatuses","container_import","ajvErrors","setUpdating","updatingStatus","updating","baseReset","flowContainer","propertyBlocks","groupBlocks","resetLanguageMatching","matchingLanguages","existingLanguagesWithoutMatch","resetPropertyMatching","blocksMissingProperties","existingPropertiesWithoutMatch","resetGroupMatching","matchingGroups","blocksMissingGroups","existingGroupsWithoutMatch","addMissingLanguage","language","setMissingLanguages","setMatchingLanguages","setExistingLanguagesWithoutMatch","setImportedFlowLanguages","setImportedFlowResources","addFlowLanguage","setFlowJsonText","text","setFlowContainer","setFlowContainerBlocks","setFlowSpecVersion","version","setGroupBlocks","setPropertyBlocks","setBlocksMissingProperties","setMissingProperties","setMatchingProperties","matchingProperties","setExistingPropertiesWithoutMatch","setBlocksMissingGroups","setMissingGroups","setMatchingGroups","setExistingGroupsWithoutMatch","hasProgrammaticError","specification_version","oldFlowContainer","newFlowContainer","detectedLanguageChanges","newPropertyBlocks","getPropertyBlocks","detectedPropertyChanges","oldPropertyBlocks","newGroupBlocks","getGroupBlocks","detectedGroupChanges","oldGroupBlocks","rootGetters","isValid","supportedSpecVersions","supportedFlowSpecVersionsForImport","uploadedBlockTypes","uniq","unsupportedBlockClasses","unsupportedBlockClassesList","uploadLanguages","matchingLanguage","orgLanguage","isEqual","differenceWith","propertyBlock","propertyIdentifier","matchingProperty","subscriberPropertyFields","orgProperty","blockIds","groupBlock","groupIdentifier","groupName","matchingGroup","orgGroup","group_name","matchLanguage","oldLanguage","matchingNewLanguage","updateResourcesForLanguageMatch","reject","matchProperty","oldProperty","matchingNewProperty","blockIndex","findIndex","newBlocksMissingProperties","matchGroup","oldGroup","matchingNewGroup","newBlocksMissingGroups","importVuexNamespace","ImportFlow","uploadOrPasteSetting","debounceHandleFlowJsonTextChange","handleFlowJsonTextChange","ImportStore","flow_resetStates","reset","setFlowJson","createContainerFlowStackAndReturnLastItem","fileInput","file","click","selectedFile","files","reader","FileReader","onload","readEvent","readAsText","flow_persistImport","persistRoute","numberOfFlows","notificationMessage","$toast","success","timeout","hideProgressBar","resetValidationStatuses","ErrorHandlerV2","Statuses","PENDING","UNINITIALIZED","SUCCESS","FAILURE","flights","create","promise","cancellation","progress","cancel","lodash","previousFlight","flight","uniqueId","createCancellableXhr","token","CancelToken","paramsSerializer","p","qs","cancelToken","onUploadProgress","onDownloadProgress","resetStatus","cancelAll","hasPendingFlight","_every","cap","validationResults","super","callCenterQueues","previousTreeJson","originalTreeJsonValidationResults","currentZoom","treeUpdateConflict","enabledFeatures","isSaveCurrentlyInProgress","blockTags","isFeatureCallCenterQueuesEnabled","feature","isFeatureCallToRecordEnabled","isFeatureMultimediaUploadEnabled","isFeatureAddSubscriberPropertyFieldEnabled","isFeatureFloipPushEnabled","isFeatureTreeSaveEnabled","isFeatureAddLanguageOnImportEnabled","isFeatureTreeSendEnabled","isFeatureTreeDuplicateEnabled","isFeatureTreeViewVersionsEnabled","isFeatureTreeDuplicateOfEnabled","isResourceViewerEnabled","isFeatureUpdateInteractionTotalsEnabled","isFeatureAudioUploadEnabled","isFeatureSimulatorEnabled","isFeatureViewResultsEnabled","hasCreateFlowTitle","hasToolbarFlowTitle","hasToolbarHomeButton","hasToolbarNewFlowButton","hasToolbarExportButton","builderWidthAdjustment","subscriberPropertyFieldDataTypesMapping","interactiveBlockClasses","pickBy","is_interactive","interactiveBlocksInTree","hasChanges","hasIssues","originalValidationResults","validationResultsFromPageLoad","hasSavedSinceLoad","isTreeSaving","isSelectedBlockSupportedForSummary","canSelectedBlockSetSubscriberProperty","isBlockAvailableByBlockClass","mapValues","contentTypesToEnabledStatus","isEnabled","contentType","startCase","isTreeValid","jsonValidationResults","treeTitle","treeCreatedAt","createdAt","treeEditedAt","editedAt","treeUpdatedAt","updatedAt","defaultModes","addOrgLanguage","newLanguage","setTreeSaving","isSaving","__AUDIO__","__TREES_UI__","uiOverrides","__APP__","appContext","bootstrapLegacyGlobalDependencies","merge","originalTreeJson","setWorkingTree","treeData","setDesignerWorkspaceHeight","height","setSelectedBlock","updateTreeDetailsWith","updateBlockCustomDataFor","updateBlockCustomDataWithNestedKeyFor","nestedKey","updateBlockUiDataFor","updateMaxNumericDigits","updateBlockContentFor","updateBlockFileContentFor","fileUrl","fileId","fileType","mimeType","updateBlockFileContentForAllLanguages","initBlockAutoGenStateFor","updateBlockAutoGenStateFor","enable","absent","updateReviewedStateFor","updateIsEditable","addEnabledFeature","removeEnabledFeature","item","setContentTypeEnabled","upperFirst","addSubscriberPropertyField","addContactGroup","group","setTreeUpdateConflictStatus","setInteractionTotals","interactionTotals","validationErrors","info","isTreeImport","require","initializeTreeModelFromOriginalTreeJson","initializeTreeModelFromImport","importTreeJson","hasImportValidationErrors","upgradeTreeModel","buffer","initialHeight","minHeight","uiChanged","msg","dataControl","_setValidationResultsForUI","send","__TREE_FEATURES__","setDefaultBlockRepeatValues","updateTextContent","disableAutoGen","setContentFromQuestionText","isFirst","maxDigits","generatedText","grammar","EN","starter","connector","separator","conclusion","numericStart","numericEndPlural","numericEndSingular","validationCode","setBlockNumConnections","newNumConnections","lockConnections","range","setMcqOutputNames","isOutputBranchingEnabled","langJs","isNoResponseExitEnabled","setMcqSidebarFieldLabels","isMCQBlock","isVoiceEnabled","isTextChannelEnabled","hasChoiceKeypresses","choiceKeypresses","fieldLabels","getChoiceKeyPressesFor","times","constant","dataType","startDate","endDate","url","treeId","keypresses","showNewButton","flowLink","FetchFlow","URL","location","origin","urlParams","searchParams","baseFetchRoute","fetchRoute","flow_fetch","validate_allBlocksFromBackend","isArrayLike","eachFunc","fromRight","iterable","keysFunc","eq","isIndex","isObject","allowPrototypes","allowSparse","arrayLimit","decoder","decode","ignoreQueryPrefix","interpretNumericEntities","parameterLimit","parseArrays","plainObjects","$0","numberStr","fromCharCode","parseArrayValue","isoSentinel","parseValues","cleanStr","skipIndex","bracketEqualsPos","pos","encodedVal","combine","parseObject","valuesParsed","leaf","cleanRoot","0","parseKeys","givenKey","child","segment","parent","normalizeParseOptions","tempObj","newObj","compact","__CONTEXT__","i18n","ImportedLang","defaultLocale","moment","ImportedMoment","jQuery","ImportedJquery","datetimepicker","percentTwenties","Format","RFC1738","RFC3986","scope","showAddLanguageModal","isExtraContentHidden","showExtraContent","_m","hideExtraContent","Home","changes","saveTimer","removeClassPrefix","blockClassName","substr","textNotification","noChange","changeLock","search","outputData","treeUpdatedConflict","audioChoice","setTopUpdatesBar","requestData","done","modal","show","backdrop","validation_results","fail","tree_id","responseJSON","always","finally","exportOptionsModal","initialize","exportOptionsTemplate","template","JST","append","handleInput","focus","select","pickTime","currentTarget","trigger","open","hide","buildUrl","isApiUrl","protocol","host","serialize","apiKey","shareableLinkModal","shareableLinkTemplate","sendRequest","switchView","publicId","setUrl","view","requestType","errorMessage","shareableLinkSetsModal","defaultLocales","orgEnabledLanguages","is","prop","initializeLinksList","shareableLinkListTemplate","switchToDeleteView","shareableLinkHash","switchAwayFromDeleteView","shareableLinkId","listElement","hasClass","addClass","children","removeClass","setLabelValues","startDateLabel","endDateLabel","channelLabel","labels","blocksLabel","versionFiltersEnabled","noValidDateRange","versionsSelected","versionsTotal","public_hash","channelFilter","includedBlocks","excludedBlocks","blockKeys","hiddenDirectorySelectionFields","lockDateRange","resultsLocale","showKeyMetrics","showBlockType","shouldShowResultsFromIncompleteEngagements","shouldOnlyShowLatestResultPerSession","shouldUseSimpleDatePicker","shouldUseCustomBlockOrdering","enabledTabs","el","tagFilter","directorySelectionFieldFilter","blockChoiceFilter","filterDisplayThreshold","customBlockOrder","toArray","memo","versions","tree_version_set_id","shareableLinks","unshift","csvExportsModal","csvExportTemplate","sendCreateRequest","setToDefault","recipeHumanReadable","recipeMachineReadable","recipeUserCustomised","getUserOptionsRecipe","fhd","fcc","vcq","vms","queueInProgress","sendStatusRequest","ajax","csvExports","order","formatHeadings","cellContents","messageBlockPercent","formatMCQResponses","treeVersionIds","mergeOption","useLocalTimezone","useExcelFormat","treeVersionSetId","thenAfter5s","add","delay","duration","diff","delayInMilliseconds","asMilliseconds","firstExportInProgress","upload_status","isFunction","sendStatusRequestDebounced","blockResultsLoader","load","nextBlockKeyToLoad","loadBlock","assignButtons","parentElement","targetType","continueLoading","shareableLink","pathname","htmlOutput","chartJsHelper","createCharts","blockResultsLoaderV2","loadKeyMetrics","filterSet","viamo","keymetrics","loadDonutChart","finishedDeliveryLogCount","deliveryLogCount","completedDeliveryLogCount","uniqueSubscriberCount","firstTimeSubscriberCount","completedQuestionCount","loadAvgCallDurations","responseText","keymetricName","chartNumerator","chartTotal","chartDenominator","chartDataSets","datasets","backgroundColor","hoverBackgroundColor","borderColor","updateTreeDoughnutChart","formatLargeNumber","durations","durationAvg","toPrecision","completedDurationAvg","css","loadBlocksInteractionsChart","barchartLabelsTruncated","barchartLabels","totalInteractionsBarchartData","completedInteractionsBarchartData","orderedCompletedInteractionsBarchartData","totalInteractionsOrderedBarchartData","colorIndexes","orderedColorIndexes","orderedBarchartLabelsTruncated","orderedBarchartLabels","resultsData","blockResult","truncatedBlockTitle","resultIndex","colorIndex","totalInteractions","completedInteractions","colorValue","blockTitle","substring","getChartChoiceColorsArray","outputKeys","acc","outputKeyTotals","sortedIndex","updateTreeBlocksInteractionsChart","fullLabels","borderWidth","hidden","$buttonClicked","barchartTarget","siblings","barchartDatasetTarget","listingChart","chartObjects","popularityChart","listingDatasets","popularityDatasets","isEnteredSelected","isCompletedSelected","update","tabTarget","tabLabel","closest","chartTarget","targetElement","doNormalize","combinedVersions","rightPosition","width","right","toggle","remove","input","submit","hexTable","compactQueue","queue","pop","compacted","arrayToObject","mergeTarget","targetItem","strWithoutPlus","unescape","defaultEncoder","escape","out","refs","mapped","$","orientation","DateTimePicker","element","dpgId","init","icon","pickDate","$element","dates","isInput","_compileFormat","timeIcon","dateIcon","widget","getTemplate","pick12HourFormat","appendTo","minViewMode","viewMode","startViewMode","weekStart","weekEnd","fillDow","fillMonths","fillHours","fillMinutes","fillSeconds","showMode","_attachDatePickerEvents","outerHeight","place","_date","_attachDatePickerGlobalEvents","collapse","collapseData","transitioning","_detachDatePickerGlobalEvents","formatted","_unset","formatDate","_resetMaskPos","setValue","newDate","parseDate","viewDate","UTCDate","getUTCFullYear","getUTCMonth","fillDate","fillTime","getDate","setDate","getLocalDate","d","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","setLocalDate","localDate","UTC","getFullYear","getMonth","getHours","getMinutes","getSeconds","getMilliseconds","top","left","notifyChange","dateStr","tmp","dowCnt","daysMin","monthsShort","year","month","currentDate","months","prevMonth","day","DPGlobal","getDaysInMonth","setUTCDate","getUTCDay","nextMonth","clsName","empty","currentYear","end","yearCont","table","current","padLeft","timeComponents","is12HourFormat","hour","period","minute","second","className","vd","navFnc","step","navStep","setUTCMonth","setUTCFullYear","incrementHours","setUTCHours","incrementMinutes","setUTCMinutes","incrementSeconds","setUTCSeconds","decrementHours","decrementMinutes","decrementSeconds","togglePeriod","showPicker","showHours","showMinutes","showSeconds","selectHour","tgt","selectMinute","selectSecond","doAction","rv","stopEvent","keydown","self","which","keypress","mask","_mask","_maskPos","pattern","start","character","_formatPattern","getTime","dir","destroy","_detachDatePickerEvents","removeData","formatReplacer","methodName","len","dateFormatComponents","parsed","_propertiesByIndex","_finishParsingDate","hours","minutes","seconds","milliseconds","UTCFullYear","UTCYear","UTCMonth","UTCHours","UTCMinutes","UTCSeconds","UTCMilliseconds","Hours12","Period12","propertiesByIndex","formatComponent","getPattern","escapeRegExp","$this","$parent","expanded","closed","toggleClass","maskInput","off","Constructor","en","days","daysShort","dd","MM","yy","yyyy","hh","mm","ss","ms","HH","PP","is12Hours","TPGlobal","isLeapYear","headTemplate","contTemplate","hourTemplate","minuteTemplate","secondTemplate","flowError","createFlowTitle","didUserSubmit","handlePersistFlow","NewFlow","flow_addBlankFlow","isActiveFlowConsideredValidOnCreationForm","flow_persist","activeFlowContainer","isSidebarShown","nativeOn"],"mappings":"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","file":"js/chunk-builder.28725a94.js","sourcesContent":["'use strict';\n\nvar undefined;\n\nvar $SyntaxError = SyntaxError;\nvar $Function = Function;\nvar $TypeError = TypeError;\n\n// eslint-disable-next-line consistent-return\nvar getEvalledConstructor = function (expressionSyntax) {\n\ttry {\n\t\treturn $Function('\"use strict\"; return (' + expressionSyntax + ').constructor;')();\n\t} catch (e) {}\n};\n\nvar $gOPD = Object.getOwnPropertyDescriptor;\nif ($gOPD) {\n\ttry {\n\t\t$gOPD({}, '');\n\t} catch (e) {\n\t\t$gOPD = null; // this is IE 8, which has a broken gOPD\n\t}\n}\n\nvar throwTypeError = function () {\n\tthrow new $TypeError();\n};\nvar ThrowTypeError = $gOPD\n\t? (function () {\n\t\ttry {\n\t\t\t// eslint-disable-next-line no-unused-expressions, no-caller, no-restricted-properties\n\t\t\targuments.callee; // IE 8 does not throw here\n\t\t\treturn throwTypeError;\n\t\t} catch (calleeThrows) {\n\t\t\ttry {\n\t\t\t\t// IE 8 throws on Object.getOwnPropertyDescriptor(arguments, '')\n\t\t\t\treturn $gOPD(arguments, 'callee').get;\n\t\t\t} catch (gOPDthrows) {\n\t\t\t\treturn throwTypeError;\n\t\t\t}\n\t\t}\n\t}())\n\t: throwTypeError;\n\nvar hasSymbols = require('has-symbols')();\n\nvar getProto = Object.getPrototypeOf || function (x) { return x.__proto__; }; // eslint-disable-line no-proto\n\nvar needsEval = {};\n\nvar TypedArray = typeof Uint8Array === 'undefined' ? undefined : getProto(Uint8Array);\n\nvar INTRINSICS = {\n\t'%AggregateError%': typeof AggregateError === 'undefined' ? undefined : AggregateError,\n\t'%Array%': Array,\n\t'%ArrayBuffer%': typeof ArrayBuffer === 'undefined' ? undefined : ArrayBuffer,\n\t'%ArrayIteratorPrototype%': hasSymbols ? getProto([][Symbol.iterator]()) : undefined,\n\t'%AsyncFromSyncIteratorPrototype%': undefined,\n\t'%AsyncFunction%': needsEval,\n\t'%AsyncGenerator%': needsEval,\n\t'%AsyncGeneratorFunction%': needsEval,\n\t'%AsyncIteratorPrototype%': needsEval,\n\t'%Atomics%': typeof Atomics === 'undefined' ? undefined : Atomics,\n\t'%BigInt%': typeof BigInt === 'undefined' ? undefined : BigInt,\n\t'%Boolean%': Boolean,\n\t'%DataView%': typeof DataView === 'undefined' ? undefined : DataView,\n\t'%Date%': Date,\n\t'%decodeURI%': decodeURI,\n\t'%decodeURIComponent%': decodeURIComponent,\n\t'%encodeURI%': encodeURI,\n\t'%encodeURIComponent%': encodeURIComponent,\n\t'%Error%': Error,\n\t'%eval%': eval, // eslint-disable-line no-eval\n\t'%EvalError%': EvalError,\n\t'%Float32Array%': typeof Float32Array === 'undefined' ? undefined : Float32Array,\n\t'%Float64Array%': typeof Float64Array === 'undefined' ? undefined : Float64Array,\n\t'%FinalizationRegistry%': typeof FinalizationRegistry === 'undefined' ? undefined : FinalizationRegistry,\n\t'%Function%': $Function,\n\t'%GeneratorFunction%': needsEval,\n\t'%Int8Array%': typeof Int8Array === 'undefined' ? undefined : Int8Array,\n\t'%Int16Array%': typeof Int16Array === 'undefined' ? undefined : Int16Array,\n\t'%Int32Array%': typeof Int32Array === 'undefined' ? undefined : Int32Array,\n\t'%isFinite%': isFinite,\n\t'%isNaN%': isNaN,\n\t'%IteratorPrototype%': hasSymbols ? getProto(getProto([][Symbol.iterator]())) : undefined,\n\t'%JSON%': typeof JSON === 'object' ? JSON : undefined,\n\t'%Map%': typeof Map === 'undefined' ? undefined : Map,\n\t'%MapIteratorPrototype%': typeof Map === 'undefined' || !hasSymbols ? undefined : getProto(new Map()[Symbol.iterator]()),\n\t'%Math%': Math,\n\t'%Number%': Number,\n\t'%Object%': Object,\n\t'%parseFloat%': parseFloat,\n\t'%parseInt%': parseInt,\n\t'%Promise%': typeof Promise === 'undefined' ? undefined : Promise,\n\t'%Proxy%': typeof Proxy === 'undefined' ? undefined : Proxy,\n\t'%RangeError%': RangeError,\n\t'%ReferenceError%': ReferenceError,\n\t'%Reflect%': typeof Reflect === 'undefined' ? undefined : Reflect,\n\t'%RegExp%': RegExp,\n\t'%Set%': typeof Set === 'undefined' ? undefined : Set,\n\t'%SetIteratorPrototype%': typeof Set === 'undefined' || !hasSymbols ? undefined : getProto(new Set()[Symbol.iterator]()),\n\t'%SharedArrayBuffer%': typeof SharedArrayBuffer === 'undefined' ? undefined : SharedArrayBuffer,\n\t'%String%': String,\n\t'%StringIteratorPrototype%': hasSymbols ? getProto(''[Symbol.iterator]()) : undefined,\n\t'%Symbol%': hasSymbols ? Symbol : undefined,\n\t'%SyntaxError%': $SyntaxError,\n\t'%ThrowTypeError%': ThrowTypeError,\n\t'%TypedArray%': TypedArray,\n\t'%TypeError%': $TypeError,\n\t'%Uint8Array%': typeof Uint8Array === 'undefined' ? undefined : Uint8Array,\n\t'%Uint8ClampedArray%': typeof Uint8ClampedArray === 'undefined' ? undefined : Uint8ClampedArray,\n\t'%Uint16Array%': typeof Uint16Array === 'undefined' ? undefined : Uint16Array,\n\t'%Uint32Array%': typeof Uint32Array === 'undefined' ? undefined : Uint32Array,\n\t'%URIError%': URIError,\n\t'%WeakMap%': typeof WeakMap === 'undefined' ? undefined : WeakMap,\n\t'%WeakRef%': typeof WeakRef === 'undefined' ? undefined : WeakRef,\n\t'%WeakSet%': typeof WeakSet === 'undefined' ? undefined : WeakSet\n};\n\nvar doEval = function doEval(name) {\n\tvar value;\n\tif (name === '%AsyncFunction%') {\n\t\tvalue = getEvalledConstructor('async function () {}');\n\t} else if (name === '%GeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('function* () {}');\n\t} else if (name === '%AsyncGeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('async function* () {}');\n\t} else if (name === '%AsyncGenerator%') {\n\t\tvar fn = doEval('%AsyncGeneratorFunction%');\n\t\tif (fn) {\n\t\t\tvalue = fn.prototype;\n\t\t}\n\t} else if (name === '%AsyncIteratorPrototype%') {\n\t\tvar gen = doEval('%AsyncGenerator%');\n\t\tif (gen) {\n\t\t\tvalue = getProto(gen.prototype);\n\t\t}\n\t}\n\n\tINTRINSICS[name] = value;\n\n\treturn value;\n};\n\nvar LEGACY_ALIASES = {\n\t'%ArrayBufferPrototype%': ['ArrayBuffer', 'prototype'],\n\t'%ArrayPrototype%': ['Array', 'prototype'],\n\t'%ArrayProto_entries%': ['Array', 'prototype', 'entries'],\n\t'%ArrayProto_forEach%': ['Array', 'prototype', 'forEach'],\n\t'%ArrayProto_keys%': ['Array', 'prototype', 'keys'],\n\t'%ArrayProto_values%': ['Array', 'prototype', 'values'],\n\t'%AsyncFunctionPrototype%': ['AsyncFunction', 'prototype'],\n\t'%AsyncGenerator%': ['AsyncGeneratorFunction', 'prototype'],\n\t'%AsyncGeneratorPrototype%': ['AsyncGeneratorFunction', 'prototype', 'prototype'],\n\t'%BooleanPrototype%': ['Boolean', 'prototype'],\n\t'%DataViewPrototype%': ['DataView', 'prototype'],\n\t'%DatePrototype%': ['Date', 'prototype'],\n\t'%ErrorPrototype%': ['Error', 'prototype'],\n\t'%EvalErrorPrototype%': ['EvalError', 'prototype'],\n\t'%Float32ArrayPrototype%': ['Float32Array', 'prototype'],\n\t'%Float64ArrayPrototype%': ['Float64Array', 'prototype'],\n\t'%FunctionPrototype%': ['Function', 'prototype'],\n\t'%Generator%': ['GeneratorFunction', 'prototype'],\n\t'%GeneratorPrototype%': ['GeneratorFunction', 'prototype', 'prototype'],\n\t'%Int8ArrayPrototype%': ['Int8Array', 'prototype'],\n\t'%Int16ArrayPrototype%': ['Int16Array', 'prototype'],\n\t'%Int32ArrayPrototype%': ['Int32Array', 'prototype'],\n\t'%JSONParse%': ['JSON', 'parse'],\n\t'%JSONStringify%': ['JSON', 'stringify'],\n\t'%MapPrototype%': ['Map', 'prototype'],\n\t'%NumberPrototype%': ['Number', 'prototype'],\n\t'%ObjectPrototype%': ['Object', 'prototype'],\n\t'%ObjProto_toString%': ['Object', 'prototype', 'toString'],\n\t'%ObjProto_valueOf%': ['Object', 'prototype', 'valueOf'],\n\t'%PromisePrototype%': ['Promise', 'prototype'],\n\t'%PromiseProto_then%': ['Promise', 'prototype', 'then'],\n\t'%Promise_all%': ['Promise', 'all'],\n\t'%Promise_reject%': ['Promise', 'reject'],\n\t'%Promise_resolve%': ['Promise', 'resolve'],\n\t'%RangeErrorPrototype%': ['RangeError', 'prototype'],\n\t'%ReferenceErrorPrototype%': ['ReferenceError', 'prototype'],\n\t'%RegExpPrototype%': ['RegExp', 'prototype'],\n\t'%SetPrototype%': ['Set', 'prototype'],\n\t'%SharedArrayBufferPrototype%': ['SharedArrayBuffer', 'prototype'],\n\t'%StringPrototype%': ['String', 'prototype'],\n\t'%SymbolPrototype%': ['Symbol', 'prototype'],\n\t'%SyntaxErrorPrototype%': ['SyntaxError', 'prototype'],\n\t'%TypedArrayPrototype%': ['TypedArray', 'prototype'],\n\t'%TypeErrorPrototype%': ['TypeError', 'prototype'],\n\t'%Uint8ArrayPrototype%': ['Uint8Array', 'prototype'],\n\t'%Uint8ClampedArrayPrototype%': ['Uint8ClampedArray', 'prototype'],\n\t'%Uint16ArrayPrototype%': ['Uint16Array', 'prototype'],\n\t'%Uint32ArrayPrototype%': ['Uint32Array', 'prototype'],\n\t'%URIErrorPrototype%': ['URIError', 'prototype'],\n\t'%WeakMapPrototype%': ['WeakMap', 'prototype'],\n\t'%WeakSetPrototype%': ['WeakSet', 'prototype']\n};\n\nvar bind = require('function-bind');\nvar hasOwn = require('has');\nvar $concat = bind.call(Function.call, Array.prototype.concat);\nvar $spliceApply = bind.call(Function.apply, Array.prototype.splice);\nvar $replace = bind.call(Function.call, String.prototype.replace);\nvar $strSlice = bind.call(Function.call, String.prototype.slice);\n\n/* adapted from https://github.com/lodash/lodash/blob/4.17.15/dist/lodash.js#L6735-L6744 */\nvar rePropName = /[^%.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|%$))/g;\nvar reEscapeChar = /\\\\(\\\\)?/g; /** Used to match backslashes in property paths. */\nvar stringToPath = function stringToPath(string) {\n\tvar first = $strSlice(string, 0, 1);\n\tvar last = $strSlice(string, -1);\n\tif (first === '%' && last !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected closing `%`');\n\t} else if (last === '%' && first !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected opening `%`');\n\t}\n\tvar result = [];\n\t$replace(string, rePropName, function (match, number, quote, subString) {\n\t\tresult[result.length] = quote ? $replace(subString, reEscapeChar, '$1') : number || match;\n\t});\n\treturn result;\n};\n/* end adaptation */\n\nvar getBaseIntrinsic = function getBaseIntrinsic(name, allowMissing) {\n\tvar intrinsicName = name;\n\tvar alias;\n\tif (hasOwn(LEGACY_ALIASES, intrinsicName)) {\n\t\talias = LEGACY_ALIASES[intrinsicName];\n\t\tintrinsicName = '%' + alias[0] + '%';\n\t}\n\n\tif (hasOwn(INTRINSICS, intrinsicName)) {\n\t\tvar value = INTRINSICS[intrinsicName];\n\t\tif (value === needsEval) {\n\t\t\tvalue = doEval(intrinsicName);\n\t\t}\n\t\tif (typeof value === 'undefined' && !allowMissing) {\n\t\t\tthrow new $TypeError('intrinsic ' + name + ' exists, but is not available. Please file an issue!');\n\t\t}\n\n\t\treturn {\n\t\t\talias: alias,\n\t\t\tname: intrinsicName,\n\t\t\tvalue: value\n\t\t};\n\t}\n\n\tthrow new $SyntaxError('intrinsic ' + name + ' does not exist!');\n};\n\nmodule.exports = function GetIntrinsic(name, allowMissing) {\n\tif (typeof name !== 'string' || name.length === 0) {\n\t\tthrow new $TypeError('intrinsic name must be a non-empty string');\n\t}\n\tif (arguments.length > 1 && typeof allowMissing !== 'boolean') {\n\t\tthrow new $TypeError('\"allowMissing\" argument must be a boolean');\n\t}\n\n\tvar parts = stringToPath(name);\n\tvar intrinsicBaseName = parts.length > 0 ? parts[0] : '';\n\n\tvar intrinsic = getBaseIntrinsic('%' + intrinsicBaseName + '%', allowMissing);\n\tvar intrinsicRealName = intrinsic.name;\n\tvar value = intrinsic.value;\n\tvar skipFurtherCaching = false;\n\n\tvar alias = intrinsic.alias;\n\tif (alias) {\n\t\tintrinsicBaseName = alias[0];\n\t\t$spliceApply(parts, $concat([0, 1], alias));\n\t}\n\n\tfor (var i = 1, isOwn = true; i < parts.length; i += 1) {\n\t\tvar part = parts[i];\n\t\tvar first = $strSlice(part, 0, 1);\n\t\tvar last = $strSlice(part, -1);\n\t\tif (\n\t\t\t(\n\t\t\t\t(first === '\"' || first === \"'\" || first === '`')\n\t\t\t\t|| (last === '\"' || last === \"'\" || last === '`')\n\t\t\t)\n\t\t\t&& first !== last\n\t\t) {\n\t\t\tthrow new $SyntaxError('property names with quotes must have matching quotes');\n\t\t}\n\t\tif (part === 'constructor' || !isOwn) {\n\t\t\tskipFurtherCaching = true;\n\t\t}\n\n\t\tintrinsicBaseName += '.' + part;\n\t\tintrinsicRealName = '%' + intrinsicBaseName + '%';\n\n\t\tif (hasOwn(INTRINSICS, intrinsicRealName)) {\n\t\t\tvalue = INTRINSICS[intrinsicRealName];\n\t\t} else if (value != null) {\n\t\t\tif (!(part in value)) {\n\t\t\t\tif (!allowMissing) {\n\t\t\t\t\tthrow new $TypeError('base intrinsic for ' + name + ' exists, but the property is not available.');\n\t\t\t\t}\n\t\t\t\treturn void undefined;\n\t\t\t}\n\t\t\tif ($gOPD && (i + 1) >= parts.length) {\n\t\t\t\tvar desc = $gOPD(value, part);\n\t\t\t\tisOwn = !!desc;\n\n\t\t\t\t// By convention, when a data property is converted to an accessor\n\t\t\t\t// property to emulate a data property that does not suffer from\n\t\t\t\t// the override mistake, that accessor's getter is marked with\n\t\t\t\t// an `originalValue` property. Here, when we detect this, we\n\t\t\t\t// uphold the illusion by pretending to see that original data\n\t\t\t\t// property, i.e., returning the value rather than the getter\n\t\t\t\t// itself.\n\t\t\t\tif (isOwn && 'get' in desc && !('originalValue' in desc.get)) {\n\t\t\t\t\tvalue = desc.get;\n\t\t\t\t} else {\n\t\t\t\t\tvalue = value[part];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tisOwn = hasOwn(value, part);\n\t\t\t\tvalue = value[part];\n\t\t\t}\n\n\t\t\tif (isOwn && !skipFurtherCaching) {\n\t\t\t\tINTRINSICS[intrinsicRealName] = value;\n\t\t\t}\n\t\t}\n\t}\n\treturn value;\n};\n","import {ActionTree, GetterTree, Module, MutationTree} from 'vuex'\nimport {IRootState} from '@/store'\nimport {IPrompt} from '@floip/flow-runner'\n\nexport interface BlocksData {\n  isFocused: boolean,\n  prompt: IPrompt,\n}\n\nexport interface IClipboardState {\n  isSimulatorActive: boolean,\n  blocksData: BlocksData[],\n}\n\nexport const stateFactory = (): IClipboardState => ({\n  isSimulatorActive: false,\n  blocksData: [],\n})\n\nexport const getters: GetterTree<IClipboardState, IRootState> = {\n  isSimulatorActive: (state) => state.isSimulatorActive,\n  blocksData: (state) => state.blocksData,\n  getBlockPrompt: (state) => (index: number) => state.blocksData[index].prompt,\n  isBlockFocused: (state) => (index: number) => state.blocksData[index].isFocused,\n}\n\nexport const mutations: MutationTree<IClipboardState> = {\n  setSimulatorActive(state, value) {\n    state.isSimulatorActive = value\n  },\n  setIsFocused(state, {index, value}) {\n    state.blocksData[index].isFocused = value\n  },\n}\n\nexport const actions: ActionTree<IClipboardState, IRootState> = {\n  setSimulatorActive({commit}, value) {\n    commit('setSimulatorActive', value)\n  },\n  resetBlocksData({state}) {\n    state.blocksData = []\n  },\n  setIsFocused({commit}, data) {\n    commit('setIsFocused', data)\n  },\n  setLastBlockUnEditable({commit, state}) {\n    const lastIndex = state.blocksData.length - 1\n    commit('setIsFocused', {index: lastIndex, value: false})\n  },\n  setLastBlockEditable({commit, state}) {\n    const lastIndex = state.blocksData.length - 1\n    commit('setIsFocused', {index: lastIndex, value: true})\n  },\n  addToBlocksData({state}, data: BlocksData) {\n    state.blocksData.push(data)\n  },\n  removeFromBlocksData({state}, index: number) {\n    state.blocksData.splice(index)\n  },\n}\n\nexport const store: Module<IClipboardState, IRootState> = {\n  namespaced: true,\n  state: stateFactory,\n  getters,\n  mutations,\n  actions,\n}\n\nexport default store\n","import {\n  findFlowWith,\n  IBlock,\n  IContext,\n  IFlow,\n  IResource,\n  IResourceValue as IResourceDefinitionVariantOverModes,\n  SupportedMode,\n} from '@floip/flow-runner'\nimport {ValidationException} from '@floip/flow-runner/src/domain/exceptions/ValidationException'\nimport {cloneDeep, compact, defaults, difference, first, isEmpty, keyBy, map, union, without} from 'lodash'\nimport {ActionTree, GetterTree, MutationTree} from 'vuex'\nimport {IFlowsState} from '@/store/flow/index'\nimport {IRootState} from '@/store'\nimport {\n  findBlockRelatedResourcesUuids,\n  findResourceVariantOverModesWith,\n  findResourceWith,\n  IResourceDefinitionVariantOverModesFilter,\n} from '@/store/flow/utils/resourceHelpers'\n\nexport const getters: GetterTree<IFlowsState, IRootState> = {\n  resourcesByUuidOnActiveFlow: (_state, getters) => keyBy(getters.activeFlow?.resources, 'uuid'),\n\n  resourceUuidsOnActiveFlow: (_state, getters): IBlock['uuid'][] => compact(map(getters.activeFlow?.resources, (res) => res.uuid)) as IBlock['uuid'][],\n\n  nonOrphanResourceUuidsOnActiveFlow: (_state, getters): IBlock['uuid'][] => {\n    let results: IBlock['uuid'][] = []\n    getters.activeFlow?.blocks?.forEach((block: IBlock) => {\n      results = union(results, findBlockRelatedResourcesUuids({block}))\n    })\n\n    return results\n  },\n\n  orphanResourceUuidsOnActiveFlow: (_state, getters) => difference(\n    getters.resourceUuidsOnActiveFlow as IBlock['uuid'][],\n    getters.nonOrphanResourceUuidsOnActiveFlow as IBlock['uuid'][],\n  ),\n}\n\nexport const mutations: MutationTree<IFlowsState> = {\n  resource_addOnFlow(state, {flowId, resource}: {flowId: IFlow['uuid'], resource: IResource}) {\n    findFlowWith(flowId, state as unknown as IContext).resources.push(resource)\n  },\n\n  resource_createVariantOnFlow(\n    state,\n    {flowId, resourceId, variant}: {flowId: IFlow['uuid'], resourceId: string, variant: IResourceDefinitionVariantOverModes},\n  ) {\n    const flow = findFlowWith(flowId, state as unknown as IContext)\n    // append to given flow's resource\n    findResourceWith(resourceId, flow)\n      .values\n      .push(cloneDeep(variant))\n  },\n\n  resource_removeVariantsOnFlow(\n    state,\n    {flowId, resourceId, variants}: {flowId: IFlow['uuid'], resourceId: string, variants: IResourceDefinitionVariantOverModes[]},\n  ): void {\n    const flow = findFlowWith(flowId, state as unknown as IContext)\n    const resource = findResourceWith(resourceId, flow)\n    resource.values = resource.values.filter(value => !variants.includes(value))\n  },\n\n  resource_setValueOnFlow(\n    state,\n    {flowId, resourceId, filter, value}: {\n      flowId: IFlow['uuid'],\n      resourceId: string,\n      filter: IResourceDefinitionVariantOverModesFilter,\n      value: string,\n    },\n  ) {\n    const flow = findFlowWith(flowId, state as unknown as IContext)\n    findResourceVariantOverModesWith(resourceId, filter, flow)\n      .value = value || ''\n  },\n  // @note -- modes in this case does not tighten filter, but rather exists solely for update operation\n  resource_setModesOnFlow(\n    state,\n    {flowId, resourceId, filter, modes}:\n      {\n        flowId: IFlow['uuid'],\n        resourceId: string,\n        filter: IResourceDefinitionVariantOverModesFilter,\n      } & { modes: SupportedMode[] },\n  ) {\n    if (isEmpty(modes)) {\n      // todo: create type that requires both resourceId & modes with (N>1) entries\n      throw new ValidationException('`mode` is required to assign mode on `IResourceDefinitionVariantOverModes`.')\n    }\n\n    // todo: this should likely validate whether or not we're intersecting with other variants with this operation\n    //       eg. variants: [{modes: [a, b]}, {modes: [c]}] => variants[0].modes = [c]\n    const flow = findFlowWith(flowId, state as unknown as IContext)\n    findResourceVariantOverModesWith(resourceId, filter, flow)\n      .modes = modes\n  },\n}\n\nexport const actions: ActionTree<IFlowsState, IRootState> = {\n  resource_add({commit, getters}, {resource}: {resource: IResource}) {\n    commit('resource_addOnFlow', {flowId: getters.activeFlow.uuid, resource})\n  },\n\n  resource_createVariant(\n    {commit, getters},\n    {resourceId, variant}: {resourceId: IResource['uuid'], variant: IResourceDefinitionVariantOverModes},\n  ) {\n    commit('resource_createVariantOnFlow', {flowId: getters.activeFlow.uuid, resourceId, variant})\n  },\n\n  resource_removeVariants(\n    {commit, getters},\n    {resourceId, variants}: {resourceId: IResource['uuid'], variants: IResourceDefinitionVariantOverModes},\n  ) {\n    commit('resource_removeVariantsOnFlow', {flowId: getters.activeFlow.uuid, resourceId, variants})\n  },\n\n  resource_setValue(\n    {commit, getters},\n    {resourceId, filter, value}: {\n      resourceId: IResource['uuid'],\n      filter: IResourceDefinitionVariantOverModesFilter,\n      value: string,\n    },\n  ) {\n    commit('resource_setValueOnFlow', {flowId: getters.activeFlow.uuid, resourceId, filter, value})\n  },\n\n  resource_setModes(\n    {commit, getters},\n    {resourceId, filter, modes}:\n      {resourceId: IResource['uuid'], filter: IResourceDefinitionVariantOverModesFilter} & { modes: SupportedMode[]},\n  ) {\n    commit('resource_setModesOnFlow', {flowId: getters.activeFlow.uuid, resourceId, filter, modes})\n  },\n\n  async resource_createWith(_context, {props}: { props: { uuid: string } & Partial<IResource> }): Promise<IResource> {\n    return {\n      ...defaults(\n        props,\n        {values: []},\n      ),\n    }\n  },\n\n  resource_setOrCreateValueModeSpecific(\n    {commit, dispatch, state, getters},\n    {resourceId, filter, value}: {resourceId: IResource['uuid'], filter: IResourceDefinitionVariantOverModes, value: string },\n  ) {\n    try {\n      // @note - `find()` raises when absent; this verifies its presence\n      findResourceVariantOverModesWith(resourceId, filter, getters.activeFlow)\n      dispatch('resource_setValueModeSpecific', {resourceId, filter, value})\n    } catch (e) {\n      if (!(e instanceof ValidationException)) {\n        throw e\n      }\n\n      dispatch('resource_createVariant', {resourceId, variant: Object.assign(cloneDeep(filter), {value})})\n    }\n  },\n\n  resource_setValueModeSpecific(\n    {commit, state, dispatch, getters},\n    {resourceId, filter, value}: {resourceId: IResource['uuid'], filter: IResourceDefinitionVariantOverModes, value: string },\n  ) {\n    // find resource variant over modes\n    const mode = first(filter.modes)\n    const variant = findResourceVariantOverModesWith(resourceId, filter, getters.activeFlow)\n\n    // need to disambiguate b/c value is spread over multiple modes\n    if (variant.modes.length > 1) {\n      // remove mode from existing variant\n      dispatch('resource_setModes', {\n        resourceId,\n        filter: variant,\n        modes: without(variant.modes, mode),\n      })\n\n      // generate new variant-over-modes with single targeted mode\n      dispatch('resource_createVariant', {\n        resourceId,\n        variant: Object.assign(\n          cloneDeep(variant),\n          {modes: [mode], value},\n        ),\n      })\n\n      // specialized case, we're done here\n      return\n    }\n\n    dispatch('resource_setValue', {resourceId, filter: variant, value})\n  },\n}\n","import {IBlock, IFlow, IResource} from '@floip/flow-runner'\nimport {ActionTree, GetterTree, Module, MutationTree} from 'vuex'\n// todo: create factory with generics so that IRootState is DI'd\nimport {IRootState} from '..'\nimport {actions as blockActions, getters as blockGetters, mutations as blockMutations} from './block'\nimport {actions as flowActions, getters as flowGetters, mutations as flowMutations, stateFactory} from './flow'\nimport {actions as resourceActions, getters as resourceGetters, mutations as resourceMutations} from './resource'\n\nexport interface IFlowsState {\n  //Created is *not* the same as persisted. It does not guarantee the current state is saved to the server. Only that the currently active flow in the container was persisted - the persistFlow route was called with the container and the active flow uuid and the route response did not have an error status code\n  isCreated: boolean,\n\n  // to differentiate between the current flow and the last saved flow\n  // useful for the undo/redo feature for eg.\n  savedAt?: string | null,\n  specification_version: string,\n  container_uuid: string,\n  flows: IFlow[],\n\n  first_flow_id: string | null,\n  // @note - for exciting future\n  nested_flow_block_interaction_id_stack: string[],\n  selectedBlocks: IBlock['uuid'][],\n}\n\nexport const getters: GetterTree<IFlowsState, IRootState> = {\n  ...flowGetters,\n  ...blockGetters,\n  ...resourceGetters,\n}\n\nexport const mutations: MutationTree<IFlowsState> = {\n  ...flowMutations,\n  ...blockMutations,\n  ...resourceMutations,\n}\n\nexport const actions: ActionTree<IFlowsState, IRootState> = {\n  ...flowActions,\n  ...blockActions,\n  ...resourceActions,\n}\n\nexport const store: Module<IFlowsState, IRootState> = {\n  namespaced: true,\n  state: stateFactory,\n  getters,\n  mutations,\n  actions,\n}\n\nexport default store\n","import {StoreOptions} from 'vuex'\nimport trees from '@/store/trees/trees.js'\nimport audio from '@/store/trees/audio.js'\nimport {IClipboardState, store as clipboard} from '@/store/clipboard'\nimport {IUndoRedoState, store as undoRedo} from './undoRedo'\nimport {IFlowsState, store as flow} from './flow'\nimport {IBuilderState, store as builder} from './builder'\nimport {IValidationState, validationStore as validation} from './validation'\n\nexport * from './flow/utils'\n\nexport interface IRootState {\n  builder: IBuilderState,\n  flow: IFlowsState,\n  validation: IValidationState,\n  trees: any,\n  audio: any,\n  clipboard: IClipboardState,\n  undoRedo: IUndoRedoState,\n}\n\nexport const store: StoreOptions<IRootState> = {\n  modules: {\n    builder,\n    flow,\n    validation,\n    // trees was originally implemented globally, expecting it's state at root\n    trees,\n    audio,\n    clipboard,\n    undoRedo,\n  },\n}\n\nexport default store\n","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"clipboard-root\"},[_c('header',{staticClass:\"d-flex justify-content-between\"},[_c('h3',[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.clipboard-simulator'))+\" \")]),_c('i',{staticClass:\"glyphicon glyphicon-remove cursor-pointer align-self-center h4\",on:{\"click\":_vm.closeSimulator}})]),_c('main',[_vm._l((_vm.blocksData),function(blockData,i){return _c('div',{key:i,staticClass:\"mt-2\"},[_c('div',{staticClass:\"card\",class:{'gray-background': !_vm.isBlockFocused(i)}},[_c('div',{staticClass:\"card-body sm-padding-below font-roboto\"},[_c(blockData.prompt.config.kind,{tag:\"component\",attrs:{\"context\":_vm.context,\"go-next\":_vm.goNext,\"index\":i,\"is-complete\":_vm.isComplete,\"on-edit-complete\":_vm.onEditComplete},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [(!_vm.cursorChangeInProgress)?_c('h4',{staticClass:\"card-title font-weight-regular pl-0 text-color-title\"},[_vm._v(\" \"+_vm._s(blockData.prompt.block.label)+\" \")]):_vm._e()]},proxy:true},{key:\"content\",fn:function(){return [_c('p',{staticClass:\"card-text\"},[_vm._v(\" \"+_vm._s(_vm.content(blockData.prompt.config.prompt))+\" \")])]},proxy:true}],null,true)})],1)])])}),(_vm.unsupportedBlockName)?_c('div',{staticClass:\"mt-2\"},[_c('unsupported-block',{attrs:{\"block-name\":_vm.unsupportedBlockName}})],1):_vm._e()],2),(_vm.isComplete)?_c('footer',{staticClass:\"mt-2\"},[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-body\"},[_c('h5',{staticClass:\"card-title\"},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.completed'))+\"! \")])])])]):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"message\"},[_c('div',{staticClass:\"d-flex justify-content-between\"},[_vm._t(\"title\"),(!_vm.isFocused && !_vm.isComplete)?_c('i',{staticClass:\"glyphicon glyphicon-pencil cursor-pointer\",on:{\"click\":_vm.editBlockCommon}}):_vm._e()],2),_vm._t(\"content\"),_c('block-action-buttons',{staticClass:\"sm-room-above\",attrs:{\"is-disabled\":false,\"is-focused\":_vm.isFocused,\"on-next-clicked\":_vm.submitAnswer,\"is-block-interaction\":_vm.isBlockInteraction,\"on-cancel-clicked\":_vm.onCancelCommon}})],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Vue from 'vue'\nimport Component from 'vue-class-component'\nimport {Prop} from 'vue-property-decorator'\nimport {namespace} from 'vuex-class'\nimport {IContext, IPrompt} from '@floip/flow-runner'\n\nconst clipboardVuexNamespace = namespace('clipboard')\n\n@Component\nexport class PromptKindMixin extends Vue {\n  @Prop() index!: number\n  @Prop() isComplete!: boolean\n  @Prop() goNext!: Function\n  @Prop() onEditComplete!: Function\n  @Prop() context!: IContext\n\n  errorMsg: string | null = null\n  isBlockInteraction = false\n\n  get isFocused() {\n    return this.isBlockFocused(this.index)\n  }\n\n  get prompt() {\n    return this.getBlockPrompt(this.index)\n  }\n\n  checkIsValid(value: unknown) {\n    try {\n      this.prompt.validate(value)\n      this.errorMsg = ''\n    } catch (e) {\n      this.errorMsg = e.message\n    }\n  }\n\n  async submitAnswerCommon(value: unknown) {\n    if (!this.errorMsg) {\n      if (this.isBlockInteraction) {\n        await this.onEditComplete(this.index)\n        this.isBlockInteraction = false\n      }\n      this.prompt.value = value\n      this.setIsFocused({index: this.index, value: false})\n      this.goNext()\n    }\n  }\n\n  editBlockCommon() {\n    this.setLastBlockUnEditable()\n    this.setIsFocused({index: this.index, value: true})\n    this.isBlockInteraction = true\n  }\n\n  onCancelCommon() {\n    this.setLastBlockEditable()\n    this.setIsFocused({index: this.index, value: false})\n    this.isBlockInteraction = false\n    this.errorMsg = ''\n  }\n\n  @clipboardVuexNamespace.Getter isBlockFocused!: (index: number) => boolean\n  @clipboardVuexNamespace.Getter getBlockPrompt!: (index: number) => IPrompt<any>\n  @clipboardVuexNamespace.Action setIsFocused!: (data: { index: number, value: boolean }) => void\n  @clipboardVuexNamespace.Action setLastBlockUnEditable!: () => void\n  @clipboardVuexNamespace.Action setLastBlockEditable!: () => void\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return (_vm.isFocused)?_c('div',{staticClass:\"block-action-buttons row\"},[(_vm.isBlockInteraction && _vm.isFocused)?_c('div',{staticClass:\"col-md-6\"},[_c('button',{staticClass:\"btn btn-secondary btn-block sm-room-below\",on:{\"click\":function($event){$event.stopPropagation();return _vm.clickCancel.apply(null, arguments)}}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.cancel'))+\" \")])]):_vm._e(),(_vm.isFocused)?_c('div',{class:{'col-md-6': _vm.isBlockInteraction, 'col-md-12': !_vm.isBlockInteraction}},[_c('button',{staticClass:\"btn btn-primary btn-block sm-room-below\",attrs:{\"disabled\":_vm.isDisabled},on:{\"click\":function($event){$event.stopPropagation();return _vm.onNextClicked.apply(null, arguments)}}},[_vm._v(\" \"+_vm._s(_vm.primaryButtonText)+\" \")])]):_vm._e()]):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport {mixins} from 'vue-class-component'\nimport {Component, Prop} from 'vue-property-decorator'\nimport Lang from '@/lib/filters/lang'\n\n@Component({})\nexport class BlockActionButtons extends mixins(Lang) {\n  @Prop({type: Boolean, required: true}) readonly isFocused!: boolean\n  @Prop({type: Boolean, required: true}) readonly isDisabled!: boolean\n  @Prop({type: Function, required: true}) readonly onNextClicked!: () => void\n  @Prop({type: Boolean, required: true}) readonly isBlockInteraction!: boolean\n  @Prop({type: Function, required: true}) readonly onCancelClicked!: () => void\n\n  get primaryButtonText(): string {\n    if (this.isBlockInteraction) {\n      return 'Revise'\n    }\n    return 'Next'\n  }\n\n  clickCancel(): void {\n    if (typeof this.onCancelClicked === 'function') {\n      this.onCancelClicked()\n    }\n  }\n}\n\nexport default BlockActionButtons\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./BlockActionButtons.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./BlockActionButtons.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./BlockActionButtons.vue?vue&type=template&id=0f4e7d5a&scoped=true&\"\nimport script from \"./BlockActionButtons.vue?vue&type=script&lang=ts&\"\nexport * from \"./BlockActionButtons.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./BlockActionButtons.vue?vue&type=style&index=0&id=0f4e7d5a&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0f4e7d5a\",\n  null\n  \n)\n\nexport default component.exports","\nimport Component, {mixins} from 'vue-class-component'\nimport Lang from '@/lib/filters/lang'\nimport {PromptKindMixin} from '@/components/interaction-designer/clipboard/shared/PromptKindMixin'\nimport BlockActionButtons from '../shared/BlockActionButtons.vue'\n\n@Component({\n  components: {\n    BlockActionButtons,\n  },\n})\nexport default class Message extends mixins(Lang, PromptKindMixin) {\n  async submitAnswer(): Promise<void> {\n    await this.submitAnswerCommon(null)\n  }\n}\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Message.vue?vue&type=template&id=44f6d31b&\"\nimport script from \"./Message.vue?vue&type=script&lang=ts&\"\nexport * from \"./Message.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"numeric\"},[_c('div',{staticClass:\"d-flex justify-content-between\"},[_vm._t(\"title\"),(!_vm.isFocused && !_vm.isComplete)?_c('i',{staticClass:\"glyphicon glyphicon-pencil cursor-pointer\",on:{\"click\":_vm.editBlock}}):_vm._e()],2),_vm._t(\"content\"),_c('div',{staticClass:\"input-group has-validation\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.enteredValue),expression:\"enteredValue\"}],staticClass:\"form-control\",class:{'is-invalid': _vm.errorMsg},attrs:{\"type\":\"number\",\"required\":\"\",\"disabled\":!_vm.isFocused,\"min\":_vm.prompt.config.min,\"max\":_vm.prompt.config.max},domProps:{\"value\":(_vm.enteredValue)},on:{\"keyup\":function($event){return _vm.checkIsValid(+_vm.enteredValue)},\"input\":function($event){if($event.target.composing)return;_vm.enteredValue=$event.target.value}}}),(_vm.errorMsg)?_c('div',{staticClass:\"invalid-feedback\"},[_c('small',[_vm._v(_vm._s(_vm.errorMsg))])]):_vm._e()]),_c('block-action-buttons',{staticClass:\"mt-3\",attrs:{\"is-disabled\":!!_vm.errorMsg,\"is-focused\":_vm.isFocused,\"on-next-clicked\":_vm.submitAnswer,\"is-block-interaction\":_vm.isBlockInteraction,\"on-cancel-clicked\":_vm.onCancel}})],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport Component, {mixins} from 'vue-class-component'\nimport Lang from '@/lib/filters/lang'\nimport {PromptKindMixin} from '@/components/interaction-designer/clipboard/shared/PromptKindMixin'\nimport BlockActionButtons from '../shared/BlockActionButtons.vue'\n\n@Component({\n  components: {\n    BlockActionButtons,\n  },\n})\nexport default class Numeric extends mixins(Lang, PromptKindMixin) {\n  enteredValue = ''\n  backUpValue = ''\n\n  async submitAnswer(): Promise<void> {\n    const value = +this.enteredValue\n    this.checkIsValid(value)\n    await this.submitAnswerCommon(value)\n  }\n\n  editBlock(): void {\n    this.editBlockCommon()\n    this.backUpValue = this.prompt.value\n  }\n\n  onCancel(): void {\n    this.onCancelCommon()\n    this.enteredValue = this.backUpValue\n  }\n}\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Numeric.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Numeric.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Numeric.vue?vue&type=template&id=f36a20c0&\"\nimport script from \"./Numeric.vue?vue&type=script&lang=ts&\"\nexport * from \"./Numeric.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"open\"},[_c('div',{staticClass:\"d-flex justify-content-between\"},[_vm._t(\"title\"),(!_vm.isFocused && !_vm.isComplete)?_c('i',{staticClass:\"glyphicon glyphicon-pencil cursor-pointer\",on:{\"click\":_vm.editBlock}}):_vm._e()],2),_vm._t(\"content\"),_c('div',[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.enteredValue),expression:\"enteredValue\"}],staticClass:\"form-control\",class:{'is-invalid': _vm.errorMsg},attrs:{\"rows\":\"4\",\"cols\":\"50\",\"disabled\":!_vm.isFocused},domProps:{\"value\":(_vm.enteredValue)},on:{\"keyup\":function($event){return _vm.checkIsValid(_vm.enteredValue)},\"input\":function($event){if($event.target.composing)return;_vm.enteredValue=$event.target.value}}}),_vm._v(\" \"),(_vm.errorMsg)?_c('div',{staticClass:\"invalid-feedback\"},[_c('small',[_vm._v(_vm._s(_vm.errorMsg))])]):_vm._e()]),_c('block-action-buttons',{staticClass:\"mt-3\",attrs:{\"is-disabled\":!!_vm.errorMsg,\"is-focused\":_vm.isFocused,\"on-next-clicked\":_vm.submitAnswer,\"is-block-interaction\":_vm.isBlockInteraction,\"on-cancel-clicked\":_vm.onCancel}})],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport Component, {mixins} from 'vue-class-component'\nimport Lang from '@/lib/filters/lang'\nimport {PromptKindMixin} from '@/components/interaction-designer/clipboard/shared/PromptKindMixin'\nimport BlockActionButtons from '../shared/BlockActionButtons.vue'\n\n@Component({\n  components: {\n    BlockActionButtons,\n  },\n})\nexport default class Open extends mixins(Lang, PromptKindMixin) {\n  enteredValue = ''\n  backUpValue = ''\n\n  async submitAnswer(): Promise<void> {\n    this.checkIsValid(this.enteredValue)\n    await this.submitAnswerCommon(this.enteredValue)\n  }\n\n  editBlock(): void {\n    this.editBlockCommon()\n    this.backUpValue = this.prompt.value\n  }\n\n  onCancel(): void {\n    this.onCancelCommon()\n    this.enteredValue = this.backUpValue\n  }\n}\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Open.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Open.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Open.vue?vue&type=template&id=4874fb3c&\"\nimport script from \"./Open.vue?vue&type=script&lang=ts&\"\nexport * from \"./Open.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"select-one\"},[_c('div',{staticClass:\"d-flex justify-content-between\"},[_vm._t(\"title\"),(!_vm.isFocused && !_vm.isComplete)?_c('i',{staticClass:\"glyphicon glyphicon-pencil cursor-pointer\",on:{\"click\":_vm.editBlock}}):_vm._e()],2),_vm._t(\"content\"),_c('div',{staticClass:\"form-group\"},[_vm._l((_vm.options),function(option,index){return _c('div',{key:index,staticClass:\"form-check\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedItem),expression:\"selectedItem\"}],staticClass:\"form-check-input\",class:{'is-invalid': _vm.errorMsg},attrs:{\"id\":index,\"type\":\"radio\",\"name\":\"select-one\",\"disabled\":!_vm.isFocused},domProps:{\"value\":option.key,\"checked\":_vm._q(_vm.selectedItem,option.key)},on:{\"change\":[function($event){_vm.selectedItem=option.key},function($event){return _vm.checkIsValid(_vm.selectedItem)}]}}),_c('label',{staticClass:\"form-check-label\",attrs:{\"for\":index}},[_vm._v(_vm._s(option.value))])])}),(_vm.errorMsg)?_c('div',{staticClass:\"text-danger\"},[_c('small',[_vm._v(_vm._s(_vm.errorMsg))])]):_vm._e()],2),_c('block-action-buttons',{attrs:{\"is-disabled\":false,\"is-focused\":_vm.isFocused,\"on-next-clicked\":_vm.submitAnswer,\"is-block-interaction\":_vm.isBlockInteraction,\"on-cancel-clicked\":_vm.onCancel}})],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport Component, {mixins} from 'vue-class-component'\nimport Lang from '@/lib/filters/lang'\nimport {Context} from '@floip/flow-runner'\nimport {PromptKindMixin} from '@/components/interaction-designer/clipboard/shared/PromptKindMixin'\nimport BlockActionButtons from '../shared/BlockActionButtons.vue'\n\n@Component({\n  components: {\n    BlockActionButtons,\n  },\n})\nexport default class SelectOne extends mixins(Lang, PromptKindMixin) {\n  selectedItem: string | null = null\n  options: {key: string, value: string}[] = []\n  backUpValue = ''\n\n  mounted() {\n    this.setOptions()\n  }\n\n  setOptions() {\n    const {choices} = this.prompt.config\n    choices.forEach((choice: {key: string, value: string}) => {\n      try {\n        const option: string = Context.prototype.getResource.call(this.context, choice.value).getText()\n        this.options.push({\n          key: choice.key,\n          value: option,\n        })\n      } catch (e) {\n        console.warn('error fetching resource ')\n      }\n    })\n  }\n\n  async submitAnswer() {\n    this.checkIsValid(this.selectedItem)\n    await this.submitAnswerCommon(this.selectedItem)\n  }\n\n  editBlock() {\n    this.editBlockCommon()\n    this.backUpValue = this.prompt.value\n  }\n\n  onCancel() {\n    this.onCancelCommon()\n    this.selectedItem = this.backUpValue\n  }\n}\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./SelectOne.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./SelectOne.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./SelectOne.vue?vue&type=template&id=41c0cdf6&\"\nimport script from \"./SelectOne.vue?vue&type=script&lang=ts&\"\nexport * from \"./SelectOne.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"select-many\"},[_c('div',{staticClass:\"d-flex justify-content-between\"},[_vm._t(\"title\"),(!_vm.isFocused && !_vm.isComplete)?_c('i',{staticClass:\"glyphicon glyphicon-pencil cursor-pointer\",on:{\"click\":_vm.editBlock}}):_vm._e()],2),_vm._t(\"content\"),_c('div',{staticClass:\"form-group\"},[_vm._l((_vm.options),function(option,index){return _c('div',{key:index,staticClass:\"form-check\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedChoices),expression:\"selectedChoices\"}],staticClass:\"form-check-input\",class:{'is-invalid': _vm.errorMsg},attrs:{\"id\":index,\"type\":\"checkbox\",\"name\":\"select-many\",\"disabled\":!_vm.isFocused},domProps:{\"value\":option.key,\"checked\":Array.isArray(_vm.selectedChoices)?_vm._i(_vm.selectedChoices,option.key)>-1:(_vm.selectedChoices)},on:{\"change\":[function($event){var $$a=_vm.selectedChoices,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=option.key,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.selectedChoices=$$a.concat([$$v]))}else{$$i>-1&&(_vm.selectedChoices=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.selectedChoices=$$c}},function($event){return _vm.checkIsValid(_vm.selectedChoices)}]}}),_c('label',{staticClass:\"form-check-label\",attrs:{\"for\":index}},[_vm._v(_vm._s(option.value))])])}),(_vm.errorMsg)?_c('div',{staticClass:\"text-danger\"},[_c('small',[_vm._v(_vm._s(_vm.errorMsg))])]):_vm._e()],2),_c('block-action-buttons',{staticClass:\"sm-room-above\",attrs:{\"is-disabled\":false,\"is-focused\":_vm.isFocused,\"on-next-clicked\":_vm.submitAnswer,\"is-block-interaction\":_vm.isBlockInteraction,\"on-cancel-clicked\":_vm.onCancel}})],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport Component, {mixins} from 'vue-class-component'\nimport Lang from '@/lib/filters/lang'\nimport {Context} from '@floip/flow-runner'\nimport {PromptKindMixin} from '@/components/interaction-designer/clipboard/shared/PromptKindMixin'\nimport BlockActionButtons from '../shared/BlockActionButtons.vue'\n\n@Component({\n  components: {\n    BlockActionButtons,\n  },\n})\nexport default class SelectMany extends mixins(Lang, PromptKindMixin) {\n  selectedChoices: string[] = []\n  options: {key: string, value: string}[] = []\n  backUpValue = []\n\n  mounted(): void {\n    this.setOptions()\n  }\n\n  setOptions(): void {\n    const {choices} = this.prompt.config\n    choices.forEach((choice: {key: string, value: string}) => {\n      try {\n        const option = Context.prototype.getResource.call(this.context, choice.value).getText()\n        this.options.push({\n          key: choice.key,\n          value: option,\n        })\n      } catch (e) {\n        console.warn('error fetching resource ')\n      }\n    })\n  }\n\n  async submitAnswer(): Promise<void> {\n    this.checkIsValid(this.selectedChoices)\n    await this.submitAnswerCommon(this.selectedChoices)\n  }\n\n  editBlock(): void {\n    this.editBlockCommon()\n    this.backUpValue = this.prompt.value\n  }\n\n  onCancel(): void {\n    this.onCancelCommon()\n    this.selectedChoices = this.backUpValue\n  }\n}\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./SelectMany.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./SelectMany.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./SelectMany.vue?vue&type=template&id=0a92e9fc&\"\nimport script from \"./SelectMany.vue?vue&type=script&lang=ts&\"\nexport * from \"./SelectMany.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"unsupported-block card\"},[_c('div',{staticClass:\"card-body sm-padding-below font-roboto\"},[_vm._v(\" \"+_vm._s(_vm.blockName)+\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.simulator-unsupported-block'))+\" \")])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport Lang from '@/lib/filters/lang'\nimport {mixins} from 'vue-class-component'\nimport {Component, Prop} from 'vue-property-decorator'\n\n@Component({})\nexport class UnsupportedBlock extends mixins(Lang) {\n  @Prop(String) readonly blockName?: string\n}\n\nexport default UnsupportedBlock\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./UnsupportedBlock.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/babel-loader/lib/index.js!../../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./UnsupportedBlock.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./UnsupportedBlock.vue?vue&type=template&id=a8a52b94&\"\nimport script from \"./UnsupportedBlock.vue?vue&type=script&lang=ts&\"\nexport * from \"./UnsupportedBlock.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\nimport {\n  Context, IContext,\n  createContextDataObjectFor,\n  FlowRunner,\n  IRichCursorInputRequired,\n  SupportedMode,\n  IContact,\n  IGroup,\n  BasicBacktrackingBehaviour,\n} from '@floip/flow-runner'\nimport {IFlowsState} from '@/store/flow'\nimport Component, {mixins} from 'vue-class-component'\nimport Lang from '@/lib/filters/lang'\nimport {namespace} from 'vuex-class'\nimport {BlocksData} from '@/store/clipboard'\nimport Message from './prompt-kinds/Message.vue'\nimport Numeric from './prompt-kinds/Numeric.vue'\nimport Open from './prompt-kinds/Open.vue'\nimport SelectOne from './prompt-kinds/SelectOne.vue'\nimport SelectMany from './prompt-kinds/SelectMany.vue'\nimport UnsupportedBlock from './shared/UnsupportedBlock.vue'\n\nconst flowVuexNamespace = namespace('flow')\nconst clipboardVuexNamespace = namespace('clipboard')\n\n@Component({\n  components: {\n    Message,\n    Numeric,\n    Open,\n    SelectOne,\n    SelectMany,\n    UnsupportedBlock,\n  },\n})\nexport default class ClipboardRoot extends mixins(Lang) {\n  runner!: FlowRunner\n  context!: IContext\n  isComplete = false\n  unsupportedBlockName = ''\n  cursorChangeInProgress = false\n\n  created(): void {\n    this.initializeFlowRunner()\n  }\n\n  content(promptId: string): string | undefined {\n    if (!this.cursorChangeInProgress) {\n      const result = Context.prototype.getResource.call(this.context, promptId)\n      return result.hasText() ? result.getText() : ''\n    }\n    return undefined\n  }\n\n  async initializeFlowRunner(): Promise<void> {\n    const flowState = this.currentFlowsState\n    const contact = {id: '1'} as IContact\n    const groups: IGroup[] = []\n    // TODO: fix this value when user details are available\n    const userId = 'user-1234'\n    const orgId = 'org-1234'\n    const {flows} = flowState\n    const languageId = '22'\n    const mode = SupportedMode.OFFLINE\n    const context: IContext = await createContextDataObjectFor(\n      contact,\n      groups,\n      userId,\n      orgId,\n      flows,\n      languageId,\n      mode,\n    )\n\n    this.context = context\n    this.runner = new FlowRunner(context)\n    await this.goNext()\n  }\n\n  async goNext(): Promise<void> {\n    this.isComplete = false\n    try {\n      const cursor: IRichCursorInputRequired | undefined = await this.runner.run()\n      if (!cursor) {\n        this.isComplete = true\n        return\n      }\n      const {prompt}: IRichCursorInputRequired = cursor\n      this.addToBlocksData({prompt, isFocused: true})\n    } catch (e) {\n      if ((e as Error).message.includes('Unable to find factory for block type')) {\n        [, this.unsupportedBlockName] = e.message.split(': ')\n      }\n      console.warn(e.message)\n    }\n  }\n\n  async onEditComplete(index: number): Promise<void> {\n    this.setIsFocused({index: this.blocksData.length - 1, value: true})\n    const backtracking: BasicBacktrackingBehaviour = this.runner.behaviours.basicBacktracking as BasicBacktrackingBehaviour\n    const seekSteps = (this.blocksData.length - 1) - index\n    this.cursorChangeInProgress = true\n    const cursor = await backtracking.seek(seekSteps, this.context)\n    this.cursorChangeInProgress = false\n    this.removeFromBlocksData(index)\n    this.addToBlocksData({prompt: cursor.prompt, isFocused: true})\n  }\n\n  closeSimulator(): void {\n    this.setSimulatorActive(false)\n  }\n\n  destroyed(): void {\n    this.resetBlocksData()\n  }\n\n  @flowVuexNamespace.Getter currentFlowsState!: IFlowsState\n\n  @clipboardVuexNamespace.Getter blocksData!: BlocksData[]\n  @clipboardVuexNamespace.Getter isBlockFocused!: boolean\n  @clipboardVuexNamespace.Action setSimulatorActive!: (value: boolean) => void\n  @clipboardVuexNamespace.Action resetBlocksData!: () => void\n  @clipboardVuexNamespace.Action setIsFocused!: (data: {index: number, value: boolean}) => void\n  @clipboardVuexNamespace.Action addToBlocksData!: (data: BlocksData) => void\n  @clipboardVuexNamespace.Action removeFromBlocksData!: (index: number) => void\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/@vue/cli-plugin-typescript/node_modules/babel-loader/lib/index.js!../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ClipboardRoot.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/@vue/cli-plugin-typescript/node_modules/babel-loader/lib/index.js!../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ClipboardRoot.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ClipboardRoot.vue?vue&type=template&id=0a9a2f9a&\"\nimport script from \"./ClipboardRoot.vue?vue&type=script&lang=ts&\"\nexport * from \"./ClipboardRoot.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ClipboardRoot.vue?vue&type=style&index=0&id=0a9a2f9a&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var map = {\n\t\"./BaseBlock.vue\": \"3ef7\",\n\t\"./Core_CaseBlock.vue\": \"cf2c\",\n\t\"./Core_LogBlock.vue\": \"41bd\",\n\t\"./Core_OutputBlock.vue\": \"5dcb\",\n\t\"./Core_RunFlowBlock.vue\": \"cab8\",\n\t\"./Core_SetContactPropertyBlock.vue\": \"84d1\",\n\t\"./Core_SetGroupMembershipBlock.vue\": \"02b5\",\n\t\"./MobilePrimitives_MessageBlock.vue\": \"c600\",\n\t\"./MobilePrimitives_NumericResponseBlock.vue\": \"2d61\",\n\t\"./MobilePrimitives_OpenResponseBlock.vue\": \"64bb\",\n\t\"./MobilePrimitives_SelectManyResponseBlock.vue\": \"03d5\",\n\t\"./MobilePrimitives_SelectOneResponseBlock.vue\": \"5c47\",\n\t\"./SmartDevices_LocationResponseBlock.vue\": \"59c3\",\n\t\"./SmartDevices_PhotoResponseBlock.vue\": \"2b44\"\n};\n\nfunction webpackAsyncContext(req) {\n\treturn Promise.resolve().then(function() {\n\t\tif(!__webpack_require__.o(map, req)) {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t}\n\n\t\tvar id = map[req];\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = \"0e11\";\nmodule.exports = webpackAsyncContext;","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = Function.prototype.bind || implementation;\n","'use strict';\n\n/* eslint complexity: [2, 18], max-statements: [2, 33] */\nmodule.exports = function hasSymbols() {\n\tif (typeof Symbol !== 'function' || typeof Object.getOwnPropertySymbols !== 'function') { return false; }\n\tif (typeof Symbol.iterator === 'symbol') { return true; }\n\n\tvar obj = {};\n\tvar sym = Symbol('test');\n\tvar symObj = Object(sym);\n\tif (typeof sym === 'string') { return false; }\n\n\tif (Object.prototype.toString.call(sym) !== '[object Symbol]') { return false; }\n\tif (Object.prototype.toString.call(symObj) !== '[object Symbol]') { return false; }\n\n\t// temp disabled per https://github.com/ljharb/object.assign/issues/17\n\t// if (sym instanceof Symbol) { return false; }\n\t// temp disabled per https://github.com/WebReflection/get-own-property-symbols/issues/4\n\t// if (!(symObj instanceof Symbol)) { return false; }\n\n\t// if (typeof Symbol.prototype.toString !== 'function') { return false; }\n\t// if (String(sym) !== Symbol.prototype.toString.call(sym)) { return false; }\n\n\tvar symVal = 42;\n\tobj[sym] = symVal;\n\tfor (sym in obj) { return false; } // eslint-disable-line no-restricted-syntax\n\tif (typeof Object.keys === 'function' && Object.keys(obj).length !== 0) { return false; }\n\n\tif (typeof Object.getOwnPropertyNames === 'function' && Object.getOwnPropertyNames(obj).length !== 0) { return false; }\n\n\tvar syms = Object.getOwnPropertySymbols(obj);\n\tif (syms.length !== 1 || syms[0] !== sym) { return false; }\n\n\tif (!Object.prototype.propertyIsEnumerable.call(obj, sym)) { return false; }\n\n\tif (typeof Object.getOwnPropertyDescriptor === 'function') {\n\t\tvar descriptor = Object.getOwnPropertyDescriptor(obj, sym);\n\t\tif (descriptor.value !== symVal || descriptor.enumerable !== true) { return false; }\n\t}\n\n\treturn true;\n};\n","var baseEach = require('./_baseEach');\n\n/**\n * The base implementation of `_.every` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if all elements pass the predicate check,\n *  else `false`\n */\nfunction baseEvery(collection, predicate) {\n  var result = true;\n  baseEach(collection, function(value, index, collection) {\n    result = !!predicate(value, index, collection);\n    return result;\n  });\n  return result;\n}\n\nmodule.exports = baseEvery;\n","\nimport {cloneDeep, debounce, endsWith, forEach, get, includes, invoke, isEmpty, values} from 'lodash'\nimport {mixins} from 'vue-class-component'\nimport {Component, Prop, Vue, Watch} from 'vue-property-decorator'\nimport {Action, Getter, Mutation, namespace, State} from 'vuex-class'\nimport Lang from '@/lib/filters/lang'\nimport Routes from '@/lib/mixins/Routes'\nimport {scrollBehavior, scrollBlockIntoView} from '@/router/helpers'\nimport {store} from '@/store'\nimport ClipboardRoot from '@/components/interaction-designer/clipboard/ClipboardRoot.vue'\nimport {Route} from 'vue-router'\nimport {IBlock, IFlow, ILanguage, IResource, IResources, SupportedMode} from '@floip/flow-runner'\nimport {ErrorObject} from 'ajv'\nimport {MutationPayload} from 'vuex'\nimport {IValidationStatus} from '@/store/validation'\n\nComponent.registerHooks(['beforeRouteUpdate'])\n\nconst flowNamespace = namespace('flow')\nconst builderNamespace = namespace('builder')\nconst clipboardNamespace = namespace('clipboard')\nconst validationVuexNamespace = namespace('validation')\n\nconst DEBOUNCE_VALIDATION_TIMER_MS = 300\n\n@Component({\n  components: {\n    ClipboardRoot,\n  },\n})\nexport class InteractionDesigner extends mixins(Lang, Routes) {\n  @Prop(String) readonly id!: string\n  @Prop(String) readonly mode!: string\n  @Prop(String) readonly mainComponent!: string\n\n  @Prop({\n    type: Object,\n    default() {\n      return {}\n    },\n  }) readonly appConfig!: object\n  @Prop({\n    type: Object,\n    default() {\n      return {}\n    },\n  }) readonly builderConfig!: object\n\n  get blocksOnActiveFlowForWatcher(): IBlock[] {\n    // needed to make comparison between new & old values on watcher\n    return cloneDeep(this.activeFlow?.blocks)\n  }\n\n  // ###### Validation API Watchers [\n  @Watch('activeFlow', {deep: true, immediate: true})\n  async onActiveFlowChanged(newFlow: IFlow): Promise<void> {\n    this.debounceFlowValidation({newFlow})\n  }\n\n  @Watch('blocksOnActiveFlowForWatcher', {deep: true, immediate: true})\n  async onBlocksInActiveFlowChanged(newBlocks: IBlock[], oldBlocks: IBlock[]): Promise<void> {\n    this.debounceBlockValidation()\n  }\n\n  @validationVuexNamespace.Action validate_flow!: ({flow}: { flow: IFlow }) => Promise<IValidationStatus>\n  debounceFlowValidation = debounce(async function (this: any, {newFlow}: {newFlow: IFlow}) {\n    if (newFlow !== undefined) {\n      console.debug(\n        'watch/activeFlow:', 'active flow has changed', `from ${this.mainComponent}.`,\n        'Validating flow & supported resources ...',\n      )\n      await this.validate_flow({flow: newFlow})\n      await this.validate_resourcesOnSupportedValues({\n        resources: newFlow.resources,\n        supportedModes: this.activeFlow.supported_modes,\n        supportedLanguages: this.activeFlow.languages,\n      })\n    } else {\n      console.warn('watch/activeFlow:', 'newFlow is undefined')\n    }\n  }, DEBOUNCE_VALIDATION_TIMER_MS)\n  @validationVuexNamespace.Action validate_allBlocksWithinFlow!: () => Promise<void>\n  debounceBlockValidation = debounce(function (this: any) {\n    if (this.activeFlow !== undefined) {\n      console.debug('watch/activeFlow.blocks:', 'blocks inside active flow have changed', `from ${this.mainComponent}.`, 'Validating ...')\n      this.validate_allBlocksWithinFlow()\n    } else {\n      console.warn('watch/activeFlow.blocks:', 'activeFlow is undefined')\n    }\n  }, DEBOUNCE_VALIDATION_TIMER_MS)\n  @validationVuexNamespace.Action validate_resourcesOnSupportedValues!: (\n    {resources, supportedModes, supportedLanguages}: {resources: IResource[], supportedModes: SupportedMode[], supportedLanguages: ILanguage[]}\n  ) => Promise<void>\n\n  @Watch('activeFlow.resources', {deep: true, immediate: true})\n  async onResourcesOnActiveFlowChanged(newResources: IResources, oldResources: IResources): Promise<void> {\n    console.debug('watch/activeFlow.resources:', 'resources inside active flow have changed', `from ${this.mainComponent}.`, 'Validating ...')\n    if (this.activeFlow !== undefined) {\n      await this.validate_resourcesOnSupportedValues({\n        resources: newResources,\n        supportedModes: this.activeFlow.supported_modes,\n        supportedLanguages: this.activeFlow.languages,\n      })\n    } else {\n      console.warn('watch/activeFlow.resources:', 'activeFlow is undefined')\n    }\n  }\n  // ] ######### end Validation API Watchers\n\n  toolbarHeight = 102\n  // TODO: Move this to BlockClassDetails spec // an inversion can be \"legacy types\"\n  pureVuejsBlocks = [\n    'CallBackWithCallCenterBlock',\n    'CollaborativeFilteringQuestionBlock',\n    'CollaborativeFilteringRatingBlock',\n    'CollaborativeFilteringRatioBranchBlock',\n    'CreateSubscriberBlock',\n    'CurrentTimeBranchBlock',\n    'DirectorySelectionBlock',\n    'EntitySelectionBlock',\n    'GenerateCodeBlock',\n    'GroupPropertyBlock',\n    'SubscriberPropertiesSnapshotBlock',\n    'SubscriberPropertyBlock',\n    'SummaryBlock',\n    'ValidateCodeBlock',\n    'WebhookBlock',\n    'WebhookContentBlock',\n    'RecordGroupMessageBlock',\n    'PlayGroupMessageBlock',\n  ]\n  simulateClipboard = true\n\n  @Getter isConfigured!: boolean\n  @Getter selectedBlock?: IBlock\n  @Getter hasChanges!: boolean\n  @Getter hasIssues!: boolean\n  @Getter isTreeSaving!: boolean\n  @Getter isTreeValid!: boolean\n  @Getter jsonValidationResults?: ErrorObject\n  @Getter validationResults?: ErrorObject\n  @Getter builderWidthAdjustment!: number\n\n  // TODO: We'll need to do width as well and use margin-right:365 to allow for sidebar\n  @State(({trees: {tree, ui}}) => ui.designerWorkspaceHeight) designerWorkspaceHeight!: number\n  @State(({trees: {tree, ui}}) => tree) tree: unknown\n  @State(({trees: {tree, ui}}) => !(tree.blocks.length as number)) validationResultsEmptyTree!: boolean\n  @State(({trees: {tree}}) => tree.details.hasVoice) hasVoice?: boolean\n  @State(({trees: {tree}}) => tree.details.hasSms) hasSms?: boolean\n  @State(({trees: {tree}}) => tree.details.hasUssd) hasUssd?: boolean\n  @State(({trees: {tree}}) => tree.details.hasSocial) hasSocial?: boolean\n  @State(({trees: {tree}}) => tree.details.hasClipboard) hasClipboard?: boolean\n  @State(({trees: {ui}}) => ui.blockClasses) blockClasses!: Record<string, any>\n\n  @flowNamespace.Getter activeFlow?: IFlow\n  @builderNamespace.State activeMainComponent?: string\n  @builderNamespace.Getter activeBlock?: IBlock\n  @builderNamespace.Getter isEditable!: boolean\n  @builderNamespace.Getter hasFlowChanges!: boolean\n  @builderNamespace.Getter isBuilderCanvasEnabled!: boolean\n  @builderNamespace.Getter isResourceViewerCanvasEnabled!: boolean\n  @clipboardNamespace.Getter isSimulatorActive!: boolean\n\n  get jsKey(): string {\n    return get(this.selectedBlock, 'jsKey')\n  }\n\n  // Pure VueJS block types handle readonly mode on their own\n  isPureVueBlock(): boolean {\n    return includes(this.pureVuejsBlocks, get(this.selectedBlock, 'type'))\n  }\n\n  async beforeCreate(): Promise<void> {\n    const {$store} = this\n\n    forEach(store.modules, (v, k) => !$store.hasModule(k) && $store.registerModule(k, v))\n  }\n\n  // `this.mode` comes from captured param in js-routes\n  @Watch('mode')\n  onModeChanged(newMode: string): void {\n    this.updateIsEditableFromParams(newMode)\n  }\n  @Watch('mainComponent')\n  onMainComponentChanged(newMainComponent: string): void {\n    this.setActiveMainComponent({mainComponent: newMainComponent})\n  }\n  @builderNamespace.Mutation setActiveMainComponent!: ({mainComponent}: {mainComponent: string | undefined}) => void\n\n  activated(): void {\n    // todo: remove once we have jsKey in our js-route\n    this.deselectBlocks()\n  }\n\n  created(): void {\n    if ((!isEmpty(this.appConfig) && !isEmpty(this.builderConfig)) || !this.isConfigured) {\n      this.configure({appConfig: this.appConfig, builderConfig: this.builderConfig})\n    }\n\n    // Initialize global reference for legacy + debugging\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (global as any).builder = this\n\n    // Listen to Flow updates to maintain \"hasFlowChanges\" state\n    this.$store.subscribe(this.handleFlowChanges.bind(this))\n\n    this.initializeTreeModel()\n\n    // `this.mode` comes from captured param in js-routes\n    this.updateIsEditableFromParams(this.mode)\n    this.setActiveMainComponent({mainComponent: this.mainComponent})\n  }\n\n  beforeMount(): void {\n    window.addEventListener('beforeunload', event => {\n      if (this.isEditable && this.hasFlowChanges) {\n        event.preventDefault()\n        event.returnValue = ''\n      }\n    })\n  }\n\n  /** @note - mixin's mount() is called _before_ local mount() (eg. InteractionDesigner.legacy::mount() is 1st) */\n  async mounted(): Promise<void> {\n    window.addEventListener('scroll', this.onScroll, true)\n\n    //Ensure that the blocks are installed before activating the flow\n    //Block stores are needed to ensure validations can run immediately\n    await this.registerBlockTypes()\n    this.flow_setActiveFlowId({flowId: this.id})\n\n    // if nothing was found for the flow Id\n    if (!this.activeFlow) {\n      this.flow_setActiveFlowId({flowId: null})\n      await this.$router.replace(\n        {\n          path: this.route('flows.fetchFlow', {flowId: this.id}),\n          query: {nextUrl: this.$route.fullPath},\n        },\n      )\n    }\n\n    if (this.isBuilderCanvasEnabled) {\n      this.deselectBlocks()\n      this.discoverTallestBlockForDesignerWorkspaceHeight({aboveTallest: true})\n\n      setTimeout(() => {\n        const {blockId, field} = this.$route.params\n        if (blockId) {\n          this.activateBlock({blockId})\n          scrollBlockIntoView(blockId)\n        }\n        if (field) {\n          scrollBehavior(this.$route)\n        }\n        if (this.$route.meta?.isBlockEditorShown as boolean) {\n          this.setIsBlockEditorOpen(true)\n        }\n      }, 500)\n    }\n    console.debug('Vuej tree interaction designer mounted!')\n  }\n\n  beforeDestroy(): void {\n    window.removeEventListener('scroll', this.onScroll, true)\n  }\n\n  onScroll(e): void {\n    if (this.isBuilderCanvasEnabled) {\n      // will be used to set other elements' position in the canvas (eg: for block editor)\n      if (this.$refs['interaction-designer-header'] !== undefined) {\n        this.setInteractionDesignerHeaderBoundingClientRect((this.$refs['interaction-designer-header'] as Element).getBoundingClientRect())\n      }\n    }\n  }\n\n  @Watch('$route', {deep: true})\n  handleRouteUpdate(to: Route): void {\n    this.activateBlock({blockId: to.params.blockId || null})\n    if (to.meta?.isBlockEditorShown as boolean) {\n      scrollBlockIntoView(to.params.blockId)\n      this.setIsBlockEditorOpen(true)\n    }\n  }\n\n  @Mutation configure!: ({appConfig, builderConfig}: {appConfig: object, builderConfig: object}) => void\n  @Mutation deselectBlocks!: () => void\n  @builderNamespace.Mutation activateBlock!: ({blockId}: {blockId: IBlock['uuid'] | null}) => void\n  @builderNamespace.Mutation setIsBlockEditorOpen!: (value: boolean) => void\n  @builderNamespace.Mutation setInteractionDesignerHeaderBoundingClientRect!: (value: DOMRect) => void\n  @builderNamespace.Action setIsEditable!: (arg0: boolean) => void\n  @builderNamespace.Action setHasFlowChanges!: (arg0: boolean) => void\n  @flowNamespace.Mutation flow_setActiveFlowId!: ({flowId}: {flowId: string | null}) => void\n  @Action attemptSaveTree!: () => void\n  @Action discoverTallestBlockForDesignerWorkspaceHeight!: ({buffer, aboveTallest}: {buffer?: number, aboveTallest: boolean}) => void\n  @Action initializeTreeModel!: () => void\n\n  async registerBlockTypes(): Promise<void[]> {\n    const {blockClasses} = this\n\n    const blockInstallers = values(blockClasses).map(async (blockClass) => {\n      const type = blockClass.type\n      const normalizedType = type.replace('.', '_')\n      const typeWithoutSeparators = type.replace('.', '')\n      let {uiComponent} = blockClass\n      if (blockClass.install === undefined) {\n        // noinspection TypeScriptCheckImport\n        const exported = await import(`../components/interaction-designer/block-types/${normalizedType}Block.vue`)\n        blockClass.install = exported.install\n        uiComponent = exported.default\n      }\n      invoke(blockClass, 'install', this)\n      Vue.component(`Flow${typeWithoutSeparators}`, uiComponent)\n    })\n    return Promise.all(blockInstallers)\n  }\n\n  handleCanvasSelected({target}: {target: Element}): void {\n    if (!target.classList.contains('builder-canvas')) {\n      console.debug('InteractionDesigner', 'Non-canvas selection mitigated')\n      return\n    }\n    this.setIsBlockEditorOpen(false)\n    this.replaceRouteInHistory(this.$route.meta?.isFlowEditorShown as boolean ? 'flow-details' : 'flow-canvas')\n  }\n\n  updateIsEditableFromParams(mode: string): void {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const isEditableLocked = Boolean((global as any).app.ui.isEditableLocked)\n    const isEditable = Boolean(+this.discoverIsEditableFrom(mode, this.$route.hash, isEditableLocked))\n    this.setIsEditable(isEditable)\n  }\n\n  /** --------------------------------| has-editable-locked | not-editable-locked |\n   | mode-is-absent+view-url-suffix   |        0            |     0               |\n   | mode-is-absent+edit-url-suffix   |        0 (r=>view)  |     1               |\n   | mode-is-absent+absent-url-suffix |        0 (r=>view)  |     0 (r=>view)     | <- Equivalent to /view\n   | mode-is-view                     |        0            |     0               |\n   | mode-is-view+edit-url-suffix     |        0            |     0               |\n   | mode-is-edit                     |        0 (r=>view)  |     1               |\n   | mode-is-edit+view-url-suffix     |        0 (r=>view)  |     1               |\n   ------------------------------------------------------------------------------ */\n  discoverIsEditableFrom(mode: string, hash: string, isEditableLocked: boolean): boolean {\n    return !isEditableLocked && (\n      mode === 'edit' || (!mode && endsWith(hash, '/edit'))\n    )\n  }\n\n  showOrHideSidebar(): void {\n    //TODO with simulator work\n    // this.replaceRoute(this.$route.meta.isSidebarShown ? 'flow-canvas' : '???')\n  }\n\n  replaceRouteInHistory(name: string): void {\n    // VueRouter doesn't have typed .history but actually has it\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (this.$router as any).history.replace({\n      name,\n    })\n  }\n\n  handleFlowChanges({type, payload}: MutationPayload): void {\n    // We overwrite flow container after saving, reset change state\n    if (type === 'flow/flow_setFlowContainer') {\n      this.setHasFlowChanges(false)\n      return\n    }\n\n    // Consider changing block positoin a flow change\n    if (type === 'builder/setBlockPositionTo') {\n      this.setHasFlowChanges(true)\n      return\n    }\n\n    // Only consider flow mutations\n    if (type.startsWith('flow/') === false) {\n      return\n    }\n\n    // Mutations that does not change flow data\n    if (![\n      'flow/flow_updateCreatedState',\n      'flow/flow_setActiveFlowId',\n    ].includes(type)) {\n      this.setHasFlowChanges(true)\n    }\n  }\n}\n\nexport default InteractionDesigner\n","var baseFor = require('./_baseFor'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\nmodule.exports = baseForOwn;\n","var arrayEvery = require('./_arrayEvery'),\n    baseEvery = require('./_baseEvery'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray'),\n    isIterateeCall = require('./_isIterateeCall');\n\n/**\n * Checks if `predicate` returns truthy for **all** elements of `collection`.\n * Iteration is stopped once `predicate` returns falsey. The predicate is\n * invoked with three arguments: (value, index|key, collection).\n *\n * **Note:** This method returns `true` for\n * [empty collections](https://en.wikipedia.org/wiki/Empty_set) because\n * [everything is true](https://en.wikipedia.org/wiki/Vacuous_truth) of\n * elements of empty collections.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {boolean} Returns `true` if all elements pass the predicate check,\n *  else `false`.\n * @example\n *\n * _.every([true, 1, null, 'yes'], Boolean);\n * // => false\n *\n * var users = [\n *   { 'user': 'barney', 'age': 36, 'active': false },\n *   { 'user': 'fred',   'age': 40, 'active': false }\n * ];\n *\n * // The `_.matches` iteratee shorthand.\n * _.every(users, { 'user': 'barney', 'active': false });\n * // => false\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.every(users, ['active', false]);\n * // => true\n *\n * // The `_.property` iteratee shorthand.\n * _.every(users, 'active');\n * // => false\n */\nfunction every(collection, predicate, guard) {\n  var func = isArray(collection) ? arrayEvery : baseEvery;\n  if (guard && isIterateeCall(collection, predicate, guard)) {\n    predicate = undefined;\n  }\n  return func(collection, baseIteratee(predicate, 3));\n}\n\nmodule.exports = every;\n","var hasMap = typeof Map === 'function' && Map.prototype;\nvar mapSizeDescriptor = Object.getOwnPropertyDescriptor && hasMap ? Object.getOwnPropertyDescriptor(Map.prototype, 'size') : null;\nvar mapSize = hasMap && mapSizeDescriptor && typeof mapSizeDescriptor.get === 'function' ? mapSizeDescriptor.get : null;\nvar mapForEach = hasMap && Map.prototype.forEach;\nvar hasSet = typeof Set === 'function' && Set.prototype;\nvar setSizeDescriptor = Object.getOwnPropertyDescriptor && hasSet ? Object.getOwnPropertyDescriptor(Set.prototype, 'size') : null;\nvar setSize = hasSet && setSizeDescriptor && typeof setSizeDescriptor.get === 'function' ? setSizeDescriptor.get : null;\nvar setForEach = hasSet && Set.prototype.forEach;\nvar hasWeakMap = typeof WeakMap === 'function' && WeakMap.prototype;\nvar weakMapHas = hasWeakMap ? WeakMap.prototype.has : null;\nvar hasWeakSet = typeof WeakSet === 'function' && WeakSet.prototype;\nvar weakSetHas = hasWeakSet ? WeakSet.prototype.has : null;\nvar hasWeakRef = typeof WeakRef === 'function' && WeakRef.prototype;\nvar weakRefDeref = hasWeakRef ? WeakRef.prototype.deref : null;\nvar booleanValueOf = Boolean.prototype.valueOf;\nvar objectToString = Object.prototype.toString;\nvar functionToString = Function.prototype.toString;\nvar match = String.prototype.match;\nvar bigIntValueOf = typeof BigInt === 'function' ? BigInt.prototype.valueOf : null;\nvar gOPS = Object.getOwnPropertySymbols;\nvar symToString = typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol' ? Symbol.prototype.toString : null;\nvar hasShammedSymbols = typeof Symbol === 'function' && typeof Symbol.iterator === 'object';\nvar isEnumerable = Object.prototype.propertyIsEnumerable;\n\nvar gPO = (typeof Reflect === 'function' ? Reflect.getPrototypeOf : Object.getPrototypeOf) || (\n    [].__proto__ === Array.prototype // eslint-disable-line no-proto\n        ? function (O) {\n            return O.__proto__; // eslint-disable-line no-proto\n        }\n        : null\n);\n\nvar inspectCustom = require('./util.inspect').custom;\nvar inspectSymbol = inspectCustom && isSymbol(inspectCustom) ? inspectCustom : null;\nvar toStringTag = typeof Symbol === 'function' && typeof Symbol.toStringTag !== 'undefined' ? Symbol.toStringTag : null;\n\nmodule.exports = function inspect_(obj, options, depth, seen) {\n    var opts = options || {};\n\n    if (has(opts, 'quoteStyle') && (opts.quoteStyle !== 'single' && opts.quoteStyle !== 'double')) {\n        throw new TypeError('option \"quoteStyle\" must be \"single\" or \"double\"');\n    }\n    if (\n        has(opts, 'maxStringLength') && (typeof opts.maxStringLength === 'number'\n            ? opts.maxStringLength < 0 && opts.maxStringLength !== Infinity\n            : opts.maxStringLength !== null\n        )\n    ) {\n        throw new TypeError('option \"maxStringLength\", if provided, must be a positive integer, Infinity, or `null`');\n    }\n    var customInspect = has(opts, 'customInspect') ? opts.customInspect : true;\n    if (typeof customInspect !== 'boolean') {\n        throw new TypeError('option \"customInspect\", if provided, must be `true` or `false`');\n    }\n\n    if (\n        has(opts, 'indent')\n        && opts.indent !== null\n        && opts.indent !== '\\t'\n        && !(parseInt(opts.indent, 10) === opts.indent && opts.indent > 0)\n    ) {\n        throw new TypeError('options \"indent\" must be \"\\\\t\", an integer > 0, or `null`');\n    }\n\n    if (typeof obj === 'undefined') {\n        return 'undefined';\n    }\n    if (obj === null) {\n        return 'null';\n    }\n    if (typeof obj === 'boolean') {\n        return obj ? 'true' : 'false';\n    }\n\n    if (typeof obj === 'string') {\n        return inspectString(obj, opts);\n    }\n    if (typeof obj === 'number') {\n        if (obj === 0) {\n            return Infinity / obj > 0 ? '0' : '-0';\n        }\n        return String(obj);\n    }\n    if (typeof obj === 'bigint') {\n        return String(obj) + 'n';\n    }\n\n    var maxDepth = typeof opts.depth === 'undefined' ? 5 : opts.depth;\n    if (typeof depth === 'undefined') { depth = 0; }\n    if (depth >= maxDepth && maxDepth > 0 && typeof obj === 'object') {\n        return isArray(obj) ? '[Array]' : '[Object]';\n    }\n\n    var indent = getIndent(opts, depth);\n\n    if (typeof seen === 'undefined') {\n        seen = [];\n    } else if (indexOf(seen, obj) >= 0) {\n        return '[Circular]';\n    }\n\n    function inspect(value, from, noIndent) {\n        if (from) {\n            seen = seen.slice();\n            seen.push(from);\n        }\n        if (noIndent) {\n            var newOpts = {\n                depth: opts.depth\n            };\n            if (has(opts, 'quoteStyle')) {\n                newOpts.quoteStyle = opts.quoteStyle;\n            }\n            return inspect_(value, newOpts, depth + 1, seen);\n        }\n        return inspect_(value, opts, depth + 1, seen);\n    }\n\n    if (typeof obj === 'function') {\n        var name = nameOf(obj);\n        var keys = arrObjKeys(obj, inspect);\n        return '[Function' + (name ? ': ' + name : ' (anonymous)') + ']' + (keys.length > 0 ? ' { ' + keys.join(', ') + ' }' : '');\n    }\n    if (isSymbol(obj)) {\n        var symString = hasShammedSymbols ? String(obj).replace(/^(Symbol\\(.*\\))_[^)]*$/, '$1') : symToString.call(obj);\n        return typeof obj === 'object' && !hasShammedSymbols ? markBoxed(symString) : symString;\n    }\n    if (isElement(obj)) {\n        var s = '<' + String(obj.nodeName).toLowerCase();\n        var attrs = obj.attributes || [];\n        for (var i = 0; i < attrs.length; i++) {\n            s += ' ' + attrs[i].name + '=' + wrapQuotes(quote(attrs[i].value), 'double', opts);\n        }\n        s += '>';\n        if (obj.childNodes && obj.childNodes.length) { s += '...'; }\n        s += '</' + String(obj.nodeName).toLowerCase() + '>';\n        return s;\n    }\n    if (isArray(obj)) {\n        if (obj.length === 0) { return '[]'; }\n        var xs = arrObjKeys(obj, inspect);\n        if (indent && !singleLineValues(xs)) {\n            return '[' + indentedJoin(xs, indent) + ']';\n        }\n        return '[ ' + xs.join(', ') + ' ]';\n    }\n    if (isError(obj)) {\n        var parts = arrObjKeys(obj, inspect);\n        if (parts.length === 0) { return '[' + String(obj) + ']'; }\n        return '{ [' + String(obj) + '] ' + parts.join(', ') + ' }';\n    }\n    if (typeof obj === 'object' && customInspect) {\n        if (inspectSymbol && typeof obj[inspectSymbol] === 'function') {\n            return obj[inspectSymbol]();\n        } else if (typeof obj.inspect === 'function') {\n            return obj.inspect();\n        }\n    }\n    if (isMap(obj)) {\n        var mapParts = [];\n        mapForEach.call(obj, function (value, key) {\n            mapParts.push(inspect(key, obj, true) + ' => ' + inspect(value, obj));\n        });\n        return collectionOf('Map', mapSize.call(obj), mapParts, indent);\n    }\n    if (isSet(obj)) {\n        var setParts = [];\n        setForEach.call(obj, function (value) {\n            setParts.push(inspect(value, obj));\n        });\n        return collectionOf('Set', setSize.call(obj), setParts, indent);\n    }\n    if (isWeakMap(obj)) {\n        return weakCollectionOf('WeakMap');\n    }\n    if (isWeakSet(obj)) {\n        return weakCollectionOf('WeakSet');\n    }\n    if (isWeakRef(obj)) {\n        return weakCollectionOf('WeakRef');\n    }\n    if (isNumber(obj)) {\n        return markBoxed(inspect(Number(obj)));\n    }\n    if (isBigInt(obj)) {\n        return markBoxed(inspect(bigIntValueOf.call(obj)));\n    }\n    if (isBoolean(obj)) {\n        return markBoxed(booleanValueOf.call(obj));\n    }\n    if (isString(obj)) {\n        return markBoxed(inspect(String(obj)));\n    }\n    if (!isDate(obj) && !isRegExp(obj)) {\n        var ys = arrObjKeys(obj, inspect);\n        var isPlainObject = gPO ? gPO(obj) === Object.prototype : obj instanceof Object || obj.constructor === Object;\n        var protoTag = obj instanceof Object ? '' : 'null prototype';\n        var stringTag = !isPlainObject && toStringTag && Object(obj) === obj && toStringTag in obj ? toStr(obj).slice(8, -1) : protoTag ? 'Object' : '';\n        var constructorTag = isPlainObject || typeof obj.constructor !== 'function' ? '' : obj.constructor.name ? obj.constructor.name + ' ' : '';\n        var tag = constructorTag + (stringTag || protoTag ? '[' + [].concat(stringTag || [], protoTag || []).join(': ') + '] ' : '');\n        if (ys.length === 0) { return tag + '{}'; }\n        if (indent) {\n            return tag + '{' + indentedJoin(ys, indent) + '}';\n        }\n        return tag + '{ ' + ys.join(', ') + ' }';\n    }\n    return String(obj);\n};\n\nfunction wrapQuotes(s, defaultStyle, opts) {\n    var quoteChar = (opts.quoteStyle || defaultStyle) === 'double' ? '\"' : \"'\";\n    return quoteChar + s + quoteChar;\n}\n\nfunction quote(s) {\n    return String(s).replace(/\"/g, '&quot;');\n}\n\nfunction isArray(obj) { return toStr(obj) === '[object Array]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isDate(obj) { return toStr(obj) === '[object Date]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isRegExp(obj) { return toStr(obj) === '[object RegExp]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isError(obj) { return toStr(obj) === '[object Error]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isString(obj) { return toStr(obj) === '[object String]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isNumber(obj) { return toStr(obj) === '[object Number]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isBoolean(obj) { return toStr(obj) === '[object Boolean]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\n\n// Symbol and BigInt do have Symbol.toStringTag by spec, so that can't be used to eliminate false positives\nfunction isSymbol(obj) {\n    if (hasShammedSymbols) {\n        return obj && typeof obj === 'object' && obj instanceof Symbol;\n    }\n    if (typeof obj === 'symbol') {\n        return true;\n    }\n    if (!obj || typeof obj !== 'object' || !symToString) {\n        return false;\n    }\n    try {\n        symToString.call(obj);\n        return true;\n    } catch (e) {}\n    return false;\n}\n\nfunction isBigInt(obj) {\n    if (!obj || typeof obj !== 'object' || !bigIntValueOf) {\n        return false;\n    }\n    try {\n        bigIntValueOf.call(obj);\n        return true;\n    } catch (e) {}\n    return false;\n}\n\nvar hasOwn = Object.prototype.hasOwnProperty || function (key) { return key in this; };\nfunction has(obj, key) {\n    return hasOwn.call(obj, key);\n}\n\nfunction toStr(obj) {\n    return objectToString.call(obj);\n}\n\nfunction nameOf(f) {\n    if (f.name) { return f.name; }\n    var m = match.call(functionToString.call(f), /^function\\s*([\\w$]+)/);\n    if (m) { return m[1]; }\n    return null;\n}\n\nfunction indexOf(xs, x) {\n    if (xs.indexOf) { return xs.indexOf(x); }\n    for (var i = 0, l = xs.length; i < l; i++) {\n        if (xs[i] === x) { return i; }\n    }\n    return -1;\n}\n\nfunction isMap(x) {\n    if (!mapSize || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        mapSize.call(x);\n        try {\n            setSize.call(x);\n        } catch (s) {\n            return true;\n        }\n        return x instanceof Map; // core-js workaround, pre-v2.5.0\n    } catch (e) {}\n    return false;\n}\n\nfunction isWeakMap(x) {\n    if (!weakMapHas || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        weakMapHas.call(x, weakMapHas);\n        try {\n            weakSetHas.call(x, weakSetHas);\n        } catch (s) {\n            return true;\n        }\n        return x instanceof WeakMap; // core-js workaround, pre-v2.5.0\n    } catch (e) {}\n    return false;\n}\n\nfunction isWeakRef(x) {\n    if (!weakRefDeref || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        weakRefDeref.call(x);\n        return true;\n    } catch (e) {}\n    return false;\n}\n\nfunction isSet(x) {\n    if (!setSize || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        setSize.call(x);\n        try {\n            mapSize.call(x);\n        } catch (m) {\n            return true;\n        }\n        return x instanceof Set; // core-js workaround, pre-v2.5.0\n    } catch (e) {}\n    return false;\n}\n\nfunction isWeakSet(x) {\n    if (!weakSetHas || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        weakSetHas.call(x, weakSetHas);\n        try {\n            weakMapHas.call(x, weakMapHas);\n        } catch (s) {\n            return true;\n        }\n        return x instanceof WeakSet; // core-js workaround, pre-v2.5.0\n    } catch (e) {}\n    return false;\n}\n\nfunction isElement(x) {\n    if (!x || typeof x !== 'object') { return false; }\n    if (typeof HTMLElement !== 'undefined' && x instanceof HTMLElement) {\n        return true;\n    }\n    return typeof x.nodeName === 'string' && typeof x.getAttribute === 'function';\n}\n\nfunction inspectString(str, opts) {\n    if (str.length > opts.maxStringLength) {\n        var remaining = str.length - opts.maxStringLength;\n        var trailer = '... ' + remaining + ' more character' + (remaining > 1 ? 's' : '');\n        return inspectString(str.slice(0, opts.maxStringLength), opts) + trailer;\n    }\n    // eslint-disable-next-line no-control-regex\n    var s = str.replace(/(['\\\\])/g, '\\\\$1').replace(/[\\x00-\\x1f]/g, lowbyte);\n    return wrapQuotes(s, 'single', opts);\n}\n\nfunction lowbyte(c) {\n    var n = c.charCodeAt(0);\n    var x = {\n        8: 'b',\n        9: 't',\n        10: 'n',\n        12: 'f',\n        13: 'r'\n    }[n];\n    if (x) { return '\\\\' + x; }\n    return '\\\\x' + (n < 0x10 ? '0' : '') + n.toString(16).toUpperCase();\n}\n\nfunction markBoxed(str) {\n    return 'Object(' + str + ')';\n}\n\nfunction weakCollectionOf(type) {\n    return type + ' { ? }';\n}\n\nfunction collectionOf(type, size, entries, indent) {\n    var joinedEntries = indent ? indentedJoin(entries, indent) : entries.join(', ');\n    return type + ' (' + size + ') {' + joinedEntries + '}';\n}\n\nfunction singleLineValues(xs) {\n    for (var i = 0; i < xs.length; i++) {\n        if (indexOf(xs[i], '\\n') >= 0) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction getIndent(opts, depth) {\n    var baseIndent;\n    if (opts.indent === '\\t') {\n        baseIndent = '\\t';\n    } else if (typeof opts.indent === 'number' && opts.indent > 0) {\n        baseIndent = Array(opts.indent + 1).join(' ');\n    } else {\n        return null;\n    }\n    return {\n        base: baseIndent,\n        prev: Array(depth + 1).join(baseIndent)\n    };\n}\n\nfunction indentedJoin(xs, indent) {\n    if (xs.length === 0) { return ''; }\n    var lineJoiner = '\\n' + indent.prev + indent.base;\n    return lineJoiner + xs.join(',' + lineJoiner) + '\\n' + indent.prev;\n}\n\nfunction arrObjKeys(obj, inspect) {\n    var isArr = isArray(obj);\n    var xs = [];\n    if (isArr) {\n        xs.length = obj.length;\n        for (var i = 0; i < obj.length; i++) {\n            xs[i] = has(obj, i) ? inspect(obj[i], obj) : '';\n        }\n    }\n    var syms = typeof gOPS === 'function' ? gOPS(obj) : [];\n    var symMap;\n    if (hasShammedSymbols) {\n        symMap = {};\n        for (var k = 0; k < syms.length; k++) {\n            symMap['$' + syms[k]] = syms[k];\n        }\n    }\n\n    for (var key in obj) { // eslint-disable-line no-restricted-syntax\n        if (!has(obj, key)) { continue; } // eslint-disable-line no-restricted-syntax, no-continue\n        if (isArr && String(Number(key)) === key && key < obj.length) { continue; } // eslint-disable-line no-restricted-syntax, no-continue\n        if (hasShammedSymbols && symMap['$' + key] instanceof Symbol) {\n            // this is to prevent shammed Symbols, which are stored as strings, from being included in the string key section\n            continue; // eslint-disable-line no-restricted-syntax, no-continue\n        } else if ((/[^\\w$]/).test(key)) {\n            xs.push(inspect(key, obj) + ': ' + inspect(obj[key], obj));\n        } else {\n            xs.push(key + ': ' + inspect(obj[key], obj));\n        }\n    }\n    if (typeof gOPS === 'function') {\n        for (var j = 0; j < syms.length; j++) {\n            if (isEnumerable.call(obj, syms[j])) {\n                xs.push('[' + inspect(syms[j]) + ']: ' + inspect(obj[syms[j]], obj));\n            }\n        }\n    }\n    return xs;\n}\n","// Backbone Model for Trees\n\n// Much thanks to\n// http://todomvc.com/architecture-examples/backbone/\n\n// Also helpful\n// http://adrianmejia.com/blog/2012/09/11/backbone-dot-js-for-absolute-beginners-getting-started/\n\n// For commentary!\n// http://www.reddit.com/r/javascript/comments/1npiet/backbonejs_is_opinionated_or_why_is_using_nested/\n\n// For relational links\n// http://backbonerelational.org/\n// (not used)\n\n// And for nested Backbone models! (in use!)\n// https://github.com/afeld/backbone-nested\n\n/* global Backbone */\nimport _ from 'lodash'\n\nwindow.app = window.app || {};\n\n(function () {\n  // Tree Model\n  // ----------\n\n  app.Tree = function (attrs) {\n    this.attributes = attrs\n  }\n\n  app.Tree.prototype = {\n    get(attr) {\n      return this.attributes[attr]\n    },\n\n    toJSON(options) {\n      return _.clone(this.attributes)\n    },\n\n    // Default attributes for the todo\n    // and ensure that each todo created has `title` and `completed` keys.\n    defaults: {\n      id: 0,\n      floipSyncedAt: '',\n      details: {\n        title: '',\n        description: '',\n        enabledLanguages: [],\n        syncedLanguage: '',\n        startingBlockKey: '',\n        exitBlockKey: '',\n        hasVoice: 0,\n        hasSms: 0,\n        hasUssd: 0,\n        hasSocial: 0,\n        hasClipboard: 0,\n        floipPushUrl: '',\n        floipPushApiKey: '',\n      },\n      blocks: [],\n      connections: [],\n    },\n\n    _defaultReviewedState: {},\n\n    upgrade() {\n      // todo: port this to use something like `lodash.defaultsDeep()`\n      console.debug('Tree upgrade: started')\n      console.time('Tree upgrade')\n\n      // Temporary fix for blocks that have [] arrays instead of {} objects\n      // Likely caused by browser quirks (possibly old versions of IE)\n      // Added 2016-08-08 (Sean)\n      this.fixArrayBlocks()\n\n      this.defaultEnabledLanguages()\n      this.defaultSyncedLanguage()\n      // auto-inflate reviewed dictionaries based upon enabled languages\n      this.inflateDefaultReviewedStateOnAll()\n      this.inflateDefaultTagsOnAll()\n      this.inflateDefaultLabelOnAll()\n      this.upgradeLanguageSelectorBlocks()\n      this.inflateDefaultSocialContentOnAll()\n      this.inflateDefaultClipboardContentOnAll()\n      this.upgradeSubscriberPropertyFieldSelections()\n      this.upgradeMsmcqBranchingToFalse()\n      this.upgradeSubscriberPropertyBlocks()\n      this.upgradeSubscriberBranchBlocks()\n\n      console.timeEnd('Tree upgrade')\n    },\n\n    cacheDefaultReviewedState() {\n      const enabledLanguages = this.getEnabledLanguages()\n      this._defaultReviewedState = _.zipObject(\n        enabledLanguages,\n        _.fill(new Array(enabledLanguages.length), false),\n      )\n    },\n\n    defaultEnabledLanguages() {\n      const details = this.get('details')\n      details.enabledLanguages = details.enabledLanguages || []\n    },\n\n    defaultSyncedLanguage() {\n      const details = this.get('details')\n      details.syncedLanguage = details.syncedLanguage || ''\n    },\n\n    inflateDefaultReviewedStateOnAll() {\n      this.cacheDefaultReviewedState()\n      this.get('blocks')\n        .forEach(this.inflateDefaultReviewedStateOnto.bind(this))\n    },\n\n    inflateDefaultReviewedStateOnto(block) {\n      block.customData.reviewed = block.customData.reviewed || block.customData.approved || {}\n      // todo: remove these two references to `approved` once deployed\n      delete block.customData.approved\n      _.defaults(block.customData.reviewed, this._defaultReviewedState)\n    },\n\n    inflateDefaultTagsOnAll() {\n      this.get('blocks')\n        .forEach((block) => {\n          !block.customData.tags && (block.customData.tags = [])\n        })\n    },\n\n    inflateDefaultLabelOnAll() {\n      this.get('blocks')\n        .forEach((block) => {\n          !block.customData.label && (block.customData.label = '')\n        })\n    },\n\n    upgradeLanguageSelectorBlocks() {\n      this.get('blocks')\n        .filter((block) => block.type === 'LanguageSelectorBlock')\n        .forEach((languageSelectorBlock) => {\n          if (!languageSelectorBlock.customData.addExitForNoResponse) {\n            languageSelectorBlock.customData.addExitForNoResponse = 0\n          }\n        })\n    },\n\n    inflateDefaultSocialContentOnAll() {\n      this.get('blocks')\n        .forEach((block) => {\n          !block.socialContent && (block.socialContent = {})\n        })\n    },\n\n    inflateDefaultClipboardContentOnAll() {\n      this.get('blocks')\n        .forEach((block) => {\n          !block.clipboardContent && (block.clipboardContent = {})\n        })\n    },\n\n    upgradeSubscriberPropertyFieldSelections() {\n      this.get('blocks')\n        .forEach((block) => {\n          if (!block.customData.propertyFieldId) {\n            const property = app.ui.findSubscriberPropertyField({display_label: block.customData.customDataCategory})\n            block.customData.propertyFieldId = _.get(property, 'id', null)\n          }\n        })\n    },\n\n    upgradeMsmcqBranchingToFalse() {\n      this.get('blocks')\n        .filter((block) => block.type === 'MultipleSelectMultipleChoiceQuestionBlock')\n        .filter((block) => block.customData.branching === 1)\n        .forEach((block) => {\n          const {customData} = block\n          const {uiData} = block\n\n          customData.branching = false\n          customData.numChoices = 1\n          uiData.numChoices = 1\n          uiData.numConnections = 1\n          uiData.outputNames = [1]\n          if (customData.addExitForNoResponse) {\n            uiData.outputNames.push('trees.output-exit')\n          }\n        })\n    },\n\n    /**\n     * For existing blocks that have their action set to startDate, set the action to customData instead,\n     * preserving all settings that calculate the date, and attempting to pre-select the \"start_date\" property for the\n     * user.\n     *\n     * This is because we are removing the startDate action and rather switching to using subscriber properties\n     */\n    upgradeSubscriberPropertyBlocks() {\n      this.get('blocks')\n        .filter((block) => block.type === 'SubscriberPropertyBlock')\n        .filter((block) => block.customData.action === 'startDate')\n        .forEach((block) => {\n          const {customData} = block\n          customData.action = 'customData'\n          customData.propertyDateMethod = customData.startDateMethod\n          customData.propertyDateAbsoluteDate = customData.startDateAbsoluteDate\n          customData.propertyDateRelativeNumber = customData.startDateRelativeNumber\n          customData.propertyDateTimespanType = customData.startDateTimespanType\n          customData.propertyDateNumericBlockKey = customData.startDateNumericBlockKey\n          const propertyField = app.ui.findSubscriberPropertyField({name: 'start_date'})\n          if (propertyField) {\n            customData.propertyFieldId = propertyField.id\n          } else {\n            customData.propertyFieldId = null\n          }\n          customData.upgradedFromStartDate = true\n        })\n    },\n\n    /**\n     * For existing blocks that have their criteria set to startDate, set the criteria to customData instead,\n     * preserving all settings, and attempting to pre-select the \"start_date\" property for the\n     * user.\n     *\n     * This is because we are removing the startDate action and rather switching to using subscriber properties\n     */\n    upgradeSubscriberBranchBlocks() {\n      this.get('blocks')\n        .filter((block) => block.type === 'SubscriberBranchBlock')\n        .filter((block) => block.customData.action === 'startDate')\n        .forEach((block) => {\n          builder.$set(block.customData, 'action', 'customData')\n          builder.$set(block.customData, 'customDataMethod', block.customData.startDateMethod)\n          builder.$set(block.customData, 'customDataValue', block.customData.startDateReference)\n\n          const propertyField = app.ui.findSubscriberPropertyField({name: 'start_date'})\n\n          // $set won't work on something that is already a property\n          // make sure it does not exist on the object before $set-ing it\n          delete block.customData.propertyFieldId\n\n          if (propertyField) {\n            builder.$set(block.customData, 'propertyFieldId', propertyField.id)\n          } else {\n            builder.$set(block.customData, 'propertyFieldId', null)\n          }\n\n          builder.$set(block.customData, 'upgradedFromStartDate', true)\n        })\n    },\n\n    // This function loops through all of the blocks in a tree, and checks for blocks that have empty subkeys (eg. customData) that are in [] array format rather than {} object format.\n    // The array issue causes other crashes later, when trying to retrieve or update data. So far, the issue comes up sporadically which seems to indicate that it's a browser quirk (possibly with older versions of IE).\n    // This issue fixes the empty arrays (by replacing them with empty objects) when the function is called, and we've added it to trees-views' initializeAll() function to call it on initial page load.\n    // For trees without the issue, it marginally increases the load on the browser when the tree is first loaded, but otherwise causes no other changes.\n    /** @moved from 12-trees-helpers.js */\n    fixArrayBlocks() {\n      let neededFixing = 0\n      let fixedCount = 0\n\n      _.each(this.get('blocks'), (block, index) => {\n        const arrayKeys = [\n          'customData',\n          'uiData',\n          'audioFiles',\n          'smsContent',\n          'ussdContent',\n          'socialContent',\n          'clipboardContent',\n        ]\n\n        _.each(arrayKeys, (key) => {\n          if (_.isArray(block[key])) {\n            neededFixing = 1\n            fixedCount++\n\n            // Repair the array by changing it to object syntax:\n            block[key] = {}\n\n            console.log(`Fixing ${block.type}[${index}] ${key}`)\n          }\n        })\n      })\n\n      if (neededFixing == 1) {\n        console.log(`Fixed ${fixedCount} blocks.`)\n        app.ui.change('Array issue blocks fixed.')\n      }\n      // else {\n      // console.log('All blocks loaded without array issues.');\n      // }\n    },\n\n    // Block-related functions\n    doesBlockLabelExist(label, comparatorKey) {\n      if (!label) {\n        return\n      }\n\n      return !!_(this.get('blocks'))\n        .chain()\n        .find((block) => block.jsKey !== comparatorKey && block.customData.label === label)\n    },\n\n    addBlock(blockData) {\n      // This doesn't seem to persist across deletes\n      // Will make new, non-unique IDs.\n      // blockData.jsKey = _.uniqueId('block_');\n      blockData.jsKey = this.makeUniqueId('block_')\n\n      this.inflateDefaultReviewedStateOnto(blockData)\n\n      this.get('blocks')\n        .push(blockData)\n\n      if (this.get('blocks').length == 1) {\n        // Only one block, eg. the first one,\n        // so set the tree's Starting Block ID to this\n        this.setStartingBlock(blockData.jsKey)\n      }\n\n      // Return the new key\n      return this.get('blocks').length - 1\n    },\n\n    getBlockByNumericIndex(blockKey) {\n      const blocks = this.get('blocks')\n      if (blocks[blockKey]) {\n        return blocks[blockKey]\n      }\n\n      return false\n    },\n\n    // app.tree.editBlock(0, {type:'newType'})\n    editBlockByNumericIndex(blockNumericIndex, blockData, arrayKey) {\n      const blocks = this.get('blocks')\n      let blockArrayKey\n      // Update that particular block in the array with new data.\n      if (blocks[blockNumericIndex]) {\n        // Can provide an array key value (eg. smsContent) to just update that array\n        if (typeof arrayKey !== 'undefined') {\n          blocks[blockNumericIndex][arrayKey] = blockData\n        } else {\n          // Persist existing data (eg. jsKey and other unchanged arrays)\n          blockData = _.extend(blocks[blockNumericIndex], blockData)\n          blocks[blockNumericIndex] = blockData\n        }\n\n        this.set('blocks', blocks)\n\n        // Return that block data just for fun\n        return blocks[blockNumericIndex]\n      }\n\n      return false\n    },\n\n    getBlock(blockKey) {\n      // Passes back the block *by reference* which allows for direct editing.\n      return _.findWhere(this.get('blocks'), {jsKey: blockKey})\n    },\n\n    editBlock(blockKey, blockData, arrayKey) {\n      let thisBlock = this.getBlock(blockKey)\n      // thisBlock is returned by reference, so can be edited directly (i think)\n\n      if (thisBlock) {\n        // Can provide an array key value (eg. smsContent) to just update that array\n        if (typeof arrayKey !== 'undefined') {\n          thisBlock[arrayKey] = blockData\n        } else {\n          // Persist existing data (eg. jsKey and other unchanged arrays)\n          thisBlock = _.extend(thisBlock, blockData)\n          // blocks[blockNumericIndex] = blockData;\n        }\n\n        return true\n      }\n\n      return false\n    },\n\n    setBlockPosition(blockKey, positionData) {\n      const thisBlock = this.getBlock(blockKey)\n\n      if (thisBlock) {\n        thisBlock.uiData.xPosition = positionData[0]\n        thisBlock.uiData.yPosition = positionData[1]\n\n        return true\n      }\n\n      return false\n    },\n\n    getBlockPosition(blockKey) {\n      const thisBlock = this.getBlock(blockKey)\n\n      const positionData = []\n\n      if (thisBlock) {\n        positionData[0] = thisBlock.uiData.xPosition\n        positionData[1] = thisBlock.uiData.yPosition\n\n        return positionData\n      }\n\n      return false\n    },\n\n    getBlockNumConnections(blockKey) {\n      const thisBlock = this.getBlock(blockKey)\n\n      return thisBlock.uiData.numConnections\n    },\n\n    filterBlockConnectionsAboveMax(blockKey) {\n      const thisBlock = this.getBlock(blockKey)\n      const connections = this.get('connections')\n\n      const maxConnections = thisBlock.uiData.numConnections\n\n      _.each(_.where(connections, {startBlockKey: blockKey}), (e) => {\n        const nodeNumber = e.outputKey.slice(-1)\n\n        if (nodeNumber > maxConnections) {\n          app.tree.removeConnection(blockKey, e.outputKey)\n        }\n      })\n    },\n\n    setBlockAudioFile(blockKey, languageId, audioData) {\n      const thisBlock = this.getBlock(blockKey)\n\n      // audioData = {\n      //   id: 75,\n      //   filename: '536105d15bbd94.30453403',\n      //   description: 'Uploaded file: survey-c.wav',\n      //   duration_seconds: 2.12,\n      //   created_at: '2013-04-12 16:32'\n      // };\n\n      // console.log('blockKey', blockKey);\n      // console.log('languageId', languageId);\n      // console.log('audioData', audioData);\n\n      if (thisBlock) {\n        // Special handling for any mystery cases\n        // where the audioFiles object becomes an array\n        // which could lead to really giant amounts of null values\n        if (_.isPlainObject(thisBlock.audioFiles) === false) {\n          console.log('Alert - special handling for audioFiles as array taking place')\n          thisBlock.audioFiles = {}\n        }\n\n        thisBlock.audioFiles[languageId] = audioData\n\n        return true\n      }\n\n      return false\n    },\n\n    removeBlockAudioFile(blockKey, languageId) {\n      const thisBlock = this.getBlock(blockKey)\n\n      // Works by reference.\n      delete thisBlock.audioFiles[languageId]\n    },\n\n    // Existing block keys\n    getBlockKeys() {\n      return _.keys(app.tree.get('blocks'))\n    },\n\n    // Get next index\n    // This isn't really useful since we aren't tracking by array key anymore.\n    getNextBlockKey() {\n      const lastKey = parseInt(_.last(app.tree.getBlockKeys()), 10)\n      return lastKey + 1\n    },\n\n    deleteBlock(blockKey) {\n      let blocks\n      blocks = this.get('blocks')\n      blocks = _.without(blocks, _.findWhere(blocks, {jsKey: blockKey}))\n\n      this.set('blocks', blocks)\n\n      // If the indicated block was also the tree's starting block,\n      // Set it to blank.\n      this.clearStartingBlockIfIs(blockKey)\n      this.clearExitBlockIfIs(blockKey)\n\n      return true\n    },\n\n    handleDeleteNumericQuestionBlockAssociations(selectedBlockKey) {\n      this.set({\n        blocks: this.get('blocks')\n          .map((block) => {\n            let newBlock = block\n            if (block.type == 'NumericBranchBlock') {\n              newBlock = {...block, customData: this._getAmendmentsForNumericBranchBlock(block.customData, selectedBlockKey)}\n            } else if (block.type == 'IdValidationBlock') {\n              newBlock = {...block, customData: this._getAmendmentsForIdValidationBlock(block.customData, selectedBlockKey)}\n            }\n            return newBlock\n          }),\n      })\n    },\n    // works but must save twice to trigger validation and disable send\n    _getAmendmentsForNumericBranchBlock(customData, selectedBlockKey) {\n      return {\n        ...customData,\n        outputs: _.reduce(customData.outputs, (newOutputs, output) => {\n            const newConditions = _.reduce(output.conditions, (newConditions, condition) => {\n              const newCondition = {...condition}\n              if (condition.jsKey == selectedBlockKey) {\n                newCondition.jsKey = ''\n              }\n              newConditions.push(newCondition)\n              return newConditions\n            }, [])\n\n            // I think this will never be the case but just to be sure\n            if (newConditions) {\n              newOutputs.push({...output, conditions: newConditions})\n            }\n\n            return newOutputs\n          },\n          []),\n      }\n    },\n    _getAmendmentsForIdValidationBlock(customData, selectedBlockKey) {\n      if (customData.numericQuestionBlockJsKey == selectedBlockKey) {\n        customData = {...customData, numericQuestionBlockJsKey: ''}\n      }\n      return customData\n    },\n\n    makeUniqueId(prefix) {\n      return `${prefix + _.now()}_${_.random(10, 99)}`\n    },\n\n    getMcqChoiceName(blockKey, choiceId) {\n      const block = this.getBlock(blockKey)\n      if (block && block.customData && block.customData.choices) {\n        return block.customData.choices[choiceId - 1]\n      }\n    },\n\n    getBlockTitle(blockKey) {\n      const block = this.getBlock(blockKey)\n      if (block && block.customData && block.customData.title) {\n        return block.customData.title\n      }\n    },\n\n    generateBlockTitle(customData, type, limit) {\n      let output = ''\n      if (_.isNumber(limit) == false) {\n        limit = 0\n      }\n\n      if (type === 'RunTreeBlock') {\n        if (_.get(customData, 'destinationTreeId')) {\n          output = _.get(app.ui.treeTitles, customData.destinationTreeId)\n        } else if (_.get(customData, 'destinationTreeSetId')) {\n          output = `${Lang.trans('trees.most-recent-version-of')} ${_.get(app.ui.treeSetTitles, customData.destinationTreeSetId)}`\n        }\n      } else if (type === 'GroupBranchBlock') {\n        if (_.get(customData, 'groupId')) {\n          if (_.parseInt(_.get(customData, 'in')) == 0) {\n            output = `${Lang.trans('trees.if-not-in')} \"`\n          } else {\n            output = `${Lang.trans('trees.if-in')} \"`\n          }\n          output += `${_.get(app.ui.groupNames, customData.groupId)}\"`\n        }\n      } else if (type === 'GroupSizeBranchBlock') {\n        if (_.get(customData, 'groupId')) {\n          output = `${Lang.trans('trees.if')} \"${_.get(app.ui.groupNames, customData.groupId)}\" ${Lang.trans('trees.exceeds')} ${_.get(\n            customData,\n            'quotaThreshold',\n            100,\n          )}`\n        }\n      } else if (type === 'SubscriberBranchBlock') {\n        if (_.get(customData, 'action') == 'customData') {\n          const property = app.ui.findSubscriberPropertyField({id: _.get(customData, 'propertyFieldId')})\n          const displayLabel = _.get(property, 'display_label', '')\n          const comparator = _.get(customData, 'customDataMethod', 'Equal')\n\n          let comparatorString = ''\n          if (comparator === 'NotEqual') {\n            comparatorString = Lang.trans('trees.not')\n          } else if (comparator === 'LessThan') {\n            comparatorString = '<'\n          } else if (comparator === 'GreaterThan') {\n            comparatorString = '>'\n          }\n\n          output = `${Lang.trans('trees.if-subscriber-custom-data')} \"${displayLabel}\" ${Lang.trans('trees.is')} ${comparatorString} \"${_.get(\n            customData,\n            'customDataValue',\n            '',\n          )}\"`\n        } else if (_.get(customData, 'action') == 'language') {\n          if (_.get(customData, 'languageValue') == '') {\n            output = Lang.trans('trees.if-subscriber-language-is-unknown')\n          } else {\n            output = `${Lang.trans('trees.if-subscriber-language-is')} \"${_.get(app.ui.languageNames, customData.languageValue)}\"`\n          }\n        }\n      } else {\n        output = _.get(customData, 'title')\n      }\n\n      if (output && output.length > 0 && limit > 0) {\n        output = S(output)\n          .truncate(limit).s\n      }\n      return output\n    },\n\n    // Connection-related functions\n\n    addConnection(startBlockKey, outputKey, endBlockKey) {\n      let connections\n\n      // Need to remove any existing connections with the same startBlockKey and outputKey - since one output key on a block can only go to one other endBlock.\n      this.removeConnection(startBlockKey, outputKey)\n\n      // Need to load this *after* the appropriate entries are removed first.\n      connections = this.get('connections')\n\n      // If this works, it'll be so weird.\n      const connection = {\n        startBlockKey,\n        outputKey,\n        endBlockKey,\n      }\n\n      connections.push(connection)\n\n      this.set('connections', connections)\n\n      return true\n    },\n\n    removeConnection(startBlockKey, outputKey) {\n      // outputKey is optional\n      let connections = this.get('connections')\n\n      if (startBlockKey && typeof outputKey !== 'undefined') {\n        // Massive thanks to\n        // http://stackoverflow.com/a/16994286\n        connections = _.without(connections, _.findWhere(connections, {startBlockKey, outputKey}))\n      } else if (startBlockKey) {\n        // Filter literally everything with that starting block key\n        connections = _.difference(connections, _.where(connections, {startBlockKey}))\n      }\n\n      this.set('connections', connections)\n\n      return true\n    },\n\n    addEnabledLanguage(languageKey) {\n      const {enabledLanguages} = app.tree.get('details')\n\n      let newEnabledLanguages = []\n\n      enabledLanguages.push(languageKey.toString())\n\n      // Order according to the original app.ui.languages order\n      newEnabledLanguages = _.intersection(_.pluck(app.ui.languages, 'id'), app.tree.get('details').enabledLanguages)\n\n      app.tree.get('details').enabledLanguages = newEnabledLanguages\n\n      this.inflateDefaultReviewedStateOnAll()\n    },\n\n    removeEnabledLanguage(languageKey) {\n      let {enabledLanguages} = app.tree.get('details')\n\n      languageKey = languageKey.toString()\n\n      // This loses the pass-by-reference, so need to save it back to the model after.\n      enabledLanguages = _.without(enabledLanguages, languageKey)\n\n      app.tree.get('details').enabledLanguages = enabledLanguages\n\n      this.cacheDefaultReviewedState()\n    },\n\n    getEnabledLanguages() {\n      return app.tree.get('details').enabledLanguages\n    },\n\n    setStartingBlock(startingBlockKey) {\n      app.tree.get('details').startingBlockKey = startingBlockKey\n    },\n\n    clearStartingBlockIfIs(blockKey) {\n      if (app.tree.get('details').startingBlockKey == blockKey) {\n        app.tree.get('details').startingBlockKey = ''\n      }\n    },\n\n    clearExitBlockIfIs(blockKey) {\n      if (app.tree.get('details').exitBlockKey == blockKey) {\n        app.tree.get('details').exitBlockKey = ''\n      }\n    },\n\n    enableVoice() {\n      app.tree.get('details').hasVoice = 1\n    },\n    disableVoice() {\n      app.tree.get('details').hasVoice = 0\n    },\n    enableSms() {\n      app.tree.get('details').hasSms = 1\n    },\n    disableSms() {\n      app.tree.get('details').hasSms = 0\n    },\n    enableUssd() {\n      app.tree.get('details').hasUssd = 1\n    },\n    disableUssd() {\n      app.tree.get('details').hasUssd = 0\n    },\n    enableSocial() {\n      app.tree.get('details').hasSocial = 1\n    },\n    disableSocial() {\n      app.tree.get('details').hasSocial = 0\n    },\n    enableClipboard() {\n      app.tree.get('details').hasClipboard = 1\n    },\n    disableClipboard() {\n      app.tree.get('details').hasClipboard = 0\n    },\n\n    validateLanguageAndContentTypes(tree, blocks) {\n      let missingLanguageIdsAudioFiles = []\n      let missingLanguageIdsSmsContent = []\n      let missingLanguageIdsUssdContent = []\n      let missingLanguageIdsSocialContent = []\n      let missingLanguageIdsClipboardContent = []\n      const jsKey = {}\n\n      _.forEach(blocks, (block) => {\n        missingLanguageIdsAudioFiles = []\n        missingLanguageIdsSmsContent = []\n        missingLanguageIdsUssdContent = []\n        missingLanguageIdsSocialContent = []\n        missingLanguageIdsClipboardContent = []\n\n        if (app.ui.blockClasses[block.type].hasContent == 1) {\n          if (app.tree.get('details').hasVoice && _.keys(block.audioFiles).length < tree.enabledLanguages.length) {\n            missingLanguageIdsAudioFiles = _.difference(tree.enabledLanguages, _.keys(block.audioFiles))\n          }\n\n          if (app.tree.get('details').hasSms && _.keys(block.smsContent).length < tree.enabledLanguages.length) {\n            if (block.type !== 'RandomOrderMultipleChoiceQuestionBlock') {\n              missingLanguageIdsSmsContent = _.difference(\n                tree.enabledLanguages,\n                _.keys(block.smsContent),\n              )\n            }\n          }\n\n          if (app.tree.get('details').hasUssd && _.keys(block.ussdContent).length < tree.enabledLanguages.length) {\n            if (block.type !== 'RandomOrderMultipleChoiceQuestionBlock') {\n              missingLanguageIdsUssdContent = _.difference(\n                tree.enabledLanguages,\n                _.keys(block.ussdContent),\n              )\n            }\n          }\n\n          if (app.tree.get('details').hasSocial && _.keys(block.socialContent).length < tree.enabledLanguages.length) {\n            if (block.type !== 'RandomOrderMultipleChoiceQuestionBlock') {\n              missingLanguageIdsSocialContent = _.difference(\n                tree.enabledLanguages,\n                _.keys(block.socialContent),\n              )\n            }\n          }\n\n          if (app.tree.get('details').hasClipboard && _.keys(block.clipboardContent).length < tree.enabledLanguages.length) {\n            if (block.type !== 'RandomOrderMultipleChoiceQuestionBlock') {\n              missingLanguageIdsClipboardContent = _.difference(\n                tree.enabledLanguages,\n                _.keys(block.clipboardContent),\n              )\n            }\n          }\n\n          if (missingLanguageIdsAudioFiles.length || missingLanguageIdsSmsContent.length || missingLanguageIdsUssdContent.length || missingLanguageIdsSocialContent.length || missingLanguageIdsClipboardContent.length) {\n            jsKey[block.jsKey] = {\n              sms: missingLanguageIdsSmsContent,\n              voice: missingLanguageIdsAudioFiles,\n              ussd: missingLanguageIdsUssdContent,\n              social: missingLanguageIdsSocialContent,\n              clipboard: missingLanguageIdsClipboardContent,\n            }\n          }\n        }\n\n        /*\n        //if block is a multiple choice question, check if user has set multiple digit options\n        if (block.type === \"MultipleChoiceQuestionBlock\"){\n          var choiceKeyPresses = block.customData.choiceKeypresses;\n          //check if there are any duplicate in the choices\n\n          if ((new Set(_.values(choiceKeyPresses))).size !== (_.values(choiceKeyPresses).length)){\n            var uniqN = [];\n            var duplicates = [];\n            jQ.each(choiceKeyPresses, function(i, el){\n              if (uniqN.lastIndexOf(el) === -1) {\n                uniqN.push(el);\n              }else{\n                duplicates.push(el);\n              }\n            });\n\n            jsKey[block.jsKey]['duplicateChoicePresses'] = duplicates;\n          }else{\n            jsKey[block.jsKey]['duplicateChoicePresses'] = [];\n          }\n\n        }\n\n        if (block.type === \"GroupBranchBlock\"){\n          //check if this block has a group set\n          if (!block.customData.hasOwnProperty('groupId') || (block.customData.groupId === \"\")) {\n            jsKey[block.jsKey] = {'noGroup' : \"NoGroupSelected\"};\n          }\n        }\n\n        if (block.type === \"RunTreeBlock\"){\n\n          if (!block.customData.hasOwnProperty('destinationTreeSetId') || (block.customData.destinationTreeSetId === \"\")) {\n            jsKey[block.jsKey] = {'noRunTree':'NoTreeSelected'};\n          }\n        }\n\n        if (block.type === \"GroupSizeBranchBlock\") {\n\n          if (!block.customData.hasOwnProperty('groupId') || (block.customData.groupId === \"\")){\n            jsKey[block.jsKey] = {\n                        'noGroup':\"NoGroupSelected\"\n                       };\n          }\n\n        }\n\n        if (block.type === \"LanguageSelectorBlock\"){\n          if (!block.customData.hasOwnProperty('languageSelectorId') || (block.customData.languageSelectorId === \"\")){\n            jsKey[block.jsKey] = {\n                      'noLanguageSelector' : 'NoLanguageSelectorSelected'\n                    };\n          }\n\n        }\n\n        */\n      })\n\n      return jsKey\n    },\n\n    validateContent() {\n      const tree = this.get('details')\n      const\n        blocks = this.get('blocks')\n\n      return this.validateLanguageAndContentTypes(tree, blocks)\n    },\n\n    updateFloipAlert() {\n      if (app.tree.floipSyncedAt) {\n        jQ('.push-flow-package-alert-message')\n          .html(`<div class=\"alert alert-success\">${Lang.trans('trees.floip-sync-success')}</div>`)\n      } else if (jQ('.floip-push-url-input')\n        .val()) {\n        jQ('.push-flow-package-alert-message')\n          .html(`<div class=\"alert alert-warning\">${Lang.trans('trees.floip-sync-warning')}</div>`)\n      }\n    },\n\n    getEndBlockPosition(topOrBottom, returnBlockKey, offset) {\n      let tallestYPosition = 0\n      let tallestBlockKey = ''\n\n      if (topOrBottom != 'bottom') {\n        // TODO:\n        if (app.tree.get('blocks')[0]) {\n          tallestYPosition = app.tree.get('blocks')[0].uiData.yPosition\n          tallestBlockKey = app.tree.get('blocks')[0].jsKey\n          // Seed this initially, otherwise the \"0\" value will stay shortest.\n        }\n      }\n\n      _.each(app.tree.get('blocks'), (block) => {\n        const thisYPosition = block.uiData.yPosition\n\n        if (topOrBottom == 'bottom') {\n          if (thisYPosition > tallestYPosition) {\n            tallestYPosition = thisYPosition\n            tallestBlockKey = block.jsKey\n          }\n        } else if (thisYPosition < tallestYPosition) {\n          tallestYPosition = thisYPosition\n          tallestBlockKey = block.jsKey\n        }\n      }, this)\n\n      if (typeof offset !== 'undefined') {\n        if (topOrBottom == 'bottom') {\n          tallestYPosition += offset\n        } else {\n          tallestYPosition -= offset\n        }\n      }\n\n      if (returnBlockKey == 1) {\n        return tallestBlockKey\n      }\n\n      return tallestYPosition\n    },\n\n    getTallestBlockPosition(offset) {\n      return this.getEndBlockPosition('bottom', 0, offset)\n    },\n    getShortestBlockPosition(offset) {\n      return this.getEndBlockPosition('top', 0, offset)\n    },\n    getTallestBlockKey() {\n      return this.getEndBlockPosition('bottom', 1)\n    },\n    getShortestBlockKey() {\n      return this.getEndBlockPosition('top', 1)\n    },\n\n  }\n\n  // eg. \"block_1492643090294_28_node_3\"\n\n  app.Tree._blockIdPrefixMatcher = /^(block_\\d+_\\d+).*/\n  app.Tree._validateNonExistentBlockReferences = function (blocks, connections) {\n    // todo: also validate .blocks.items.properties.customData.outputs.conditions.jsKey === \"block_1450273012962_38\"\n    // todo: also validate .details.startingBlockKey === \"block_1450273012962_38\"\n\n    const keysToVerifiedMap = {}\n    const keysToExistsMap = {}\n    const keys = _.pluck(blocks, 'jsKey')\n    const validateKey = function (key) {\n      keysToVerifiedMap[key] = true\n      keysToExistsMap[key] = _.contains(keys, key)\n    }\n\n    _.forEach(connections, function (conn, i) {\n      validateKey(conn.endBlockKey)\n      validateKey(conn.startBlockKey)\n\n      const extractedKey = _.get(this._blockIdPrefixMatcher.exec(conn.outputKey), 1)\n      extractedKey && validateKey(extractedKey)\n    }, this)\n\n    return _.contains(_.values(keysToExistsMap), 0)\n  }\n\n  app.Tree._mergeAndSanitizeImportedInto = function (treeJson, importJson) {\n    if (!importJson) {\n      // validator handles `null`ed json in a particular way\n      return\n    }\n\n    // 1- Remove contents - based on selected channels\n    _.forEach(_.get(importJson, 'blocks'), (block, i) => {\n      if (!_.get(treeJson, 'details.hasVoice', false)) {\n        block.audioFiles = {}\n      }\n      if (!_.get(treeJson, 'details.hasSms', false)) {\n        block.smsContent = {}\n        block.smsAutogenLangs = []\n      }\n      if (!_.get(treeJson, 'details.hasUssd', false)) {\n        block.ussdContent = {}\n        block.ussdAutogenLangs = []\n      }\n      if (!_.get(treeJson, 'details.hasSocial', false)) {\n        block.socialContent = {}\n        block.socialAutogenLangs = []\n      }\n      if (!_.get(treeJson, 'details.hasClipboard', false)) {\n        block.clipboardContent = {}\n        block.clipboardAutogenLangs = []\n      }\n    })\n\n    // 2- Remove contents - based on selected languages\n    const importedEnabledLanguages = _.get(importJson, 'details.enabledLanguages', [])\n    const validLanguages = _.get(treeJson, 'details.enabledLanguages', [])\n    const invalidLanguages = _.difference(importedEnabledLanguages, validLanguages)\n\n    if (invalidLanguages.length > 0) {\n      const blockContentsToReview = [\n        'customData.reviewed',\n        'audioFiles',\n        'smsContent',\n        'ussdContent',\n        'socialContent',\n        'clipboardContent',\n        'smsAutogenLangs',\n        'ussdAutogenLangs',\n        'socialAutogenLangs',\n        'clipboardAutogenLangs',\n      ]\n\n      _.forEach(_.get(importJson, 'blocks'), (block, i) => {\n        _.forEach(blockContentsToReview, (contentPath, i) => {\n          const content = _.get(block, contentPath, {})\n          let sanitizedContent = []\n          // AutogenLangs\n          if (_.isArray(content)) {\n            // remove by value\n            sanitizedContent = _.difference(content, invalidLanguages)\n            // Contents & others\n          } else {\n            // remove by prop\n            sanitizedContent = _.omit(content, invalidLanguages)\n          }\n          _.set(block, contentPath, sanitizedContent)\n        })\n      })\n    }\n\n    // 3- Fix non object contents & Strip out customData from some block types\n    // Block Type KeyValues to strip out\n    const orgContentBlockTypeKeys = {\n      SubscriberBranchBlock: ['customDataCategory', 'customDataValue', 'propertyFieldId'],\n      GroupBranchBlock: ['groupId'],\n      GroupSizeBranchBlock: ['groupId'],\n      SubscriberPropertyBlock: ['customDataCategory', 'customDataValue', 'newLanguage', 'propertyFieldId'],\n      GroupPropertyBlock: ['groupId'],\n      BillSubscriberBlock: [\n        'apiUrlDestination',\n        'apiUsername',\n        'apiPassword',\n        'apiProductCode',\n        'apiStockCode',\n        'apiDeductionAmount',\n        'apiOperationId',\n        'apiOperationType',\n      ],\n      TriggerOutgoingCallBlock: [\n        'recipientType',\n        'scheduleType',\n        'messageVersionSetId',\n        'messageId',\n        'surveyVersionSetId',\n        'surveyId',\n        'treeVersionSetId',\n        'treeId',\n        'languageSelectorId',\n        'subscribers',\n      ],\n      LanguageSelectorBlock: ['languageSelectorId'],\n      CallHistoryBranchBlock: ['mode', 'rangeDays', 'rangeStartDate', 'rangeEndDate'],\n      DirectorySelectionBlock: ['setSubscriberPropertyConfiguration'],\n      OpenQuestionBlock: ['setSubscriberPropertyConfiguration'],\n      RandomOrderMultipleChoiceQuestionBlock: ['setSubscriberPropertyConfiguration'],\n      MultipleChoiceQuestionBlock: ['setSubscriberPropertyConfiguration'],\n      NumericQuestionBlock: ['setSubscriberPropertyConfiguration'],\n      CollaborativeFilteringRatingBlock: ['candidateBlocks'],\n      CollaborativeFilteringRatioBranchBlock: ['candidateBlock'],\n    }\n\n    _.forEach(_.get(importJson, 'blocks'), (block, i) => {\n      block.audioFiles = Array.isArray(block.audioFiles) ? {} : block.audioFiles\n      block.smsContent = Array.isArray(block.smsContent) ? {} : block.smsContent\n      block.ussdContent = Array.isArray(block.ussdContent) ? {} : block.ussdContent\n      block.socialContent = Array.isArray(block.socialContent) ? {} : block.socialContent\n      block.clipboardContent = Array.isArray(block.clipboardContent) ? {} : block.clipboardContent\n      block.customData = Array.isArray(block.customData) ? {} : block.customData\n\n      if (_.has(orgContentBlockTypeKeys, block.type)) {\n        // For each key within the Block Type\n        _.forEach(orgContentBlockTypeKeys[block.type], (key, i) => {\n          delete block.customData[key]\n        })\n      }\n    })\n\n    return _.extend({}, treeJson, {\n      details: _.assign({}, _.get(importJson, 'details'), treeJson.details),\n      blocks: _.get(importJson, 'blocks', []),\n      connections: _.get(importJson, 'connections', []),\n    })\n  }\n\n  app.Tree.validateTreeData = function (json, schema) {\n    // Usage:\n    // schema = app.Tree.createJsonSchemaFor(\n    //    _.pluck(app.ui.languages, 'id'),\n    //    _.keys(app.ui.blockClasses))\n    // app.tree = app.Tree.validateAndCreateFrom(json, schema)\n\n    // json was invalid at some point along the way\n\n    if (!json) {\n      throw _.extend(new Ajv.ValidationError([]), {message: 'Tree validation failed!'})\n    }\n\n    const validate = new Ajv({coerceTypes: true}).compile(schema)\n\n    if (!validate(json)) {\n      // validate.errors are a list like:\n      // [{\"keyword\":\"type\",\"dataPath\":\".details.title\",\"schemaPath\":\"#/properties/details/properties/title/type\",\"params\":{\"type\":\"string\"},\"message\":\"should be string\"}]\n      throw _.extend(\n        new Ajv.ValidationError(validate.errors),\n        {message: 'Tree validation failed!'},\n      )\n    }\n\n    if (this._validateNonExistentBlockReferences(json.blocks, json.connections)) {\n      throw _.extend(new Ajv.ValidationError([\n        {\n          keyword: 'reference',\n          dataPath: '.connections.items.properties',\n          message: 'should reference existing jsKey properties',\n        },\n      ]), {message: 'Tree validation failed!'})\n    }\n  }\n\n  app.Tree.createJsonSchemaFor = function (languages, blockTypes) {\n    // todo: fix enum for language\n    // todo: fix enum for block classes\n    // todo: add enum for `connection.startBlockKey` and `connection.endBlockKey`\n    // todo: add enum for `connection.endBlockKey`\n    // todo: add enum for `details.startingBlockKey`\n\n    // Reference: http://epoberezkin.github.io/ajv/keywords.html\n    return {\n      properties: {\n        id: {type: 'integer'},\n        details: {\n          type: 'object',\n          properties: {\n            title: {type: 'string'},\n            description: {type: 'string'},\n            hasVoice: {type: 'boolean'},\n            enabledLanguages: {\n              type: 'array',\n              items: {\n                type: 'string',\n                enum: languages,\n              },\n            },\n            hasSms: {type: 'boolean'},\n            hasUssd: {type: 'boolean'},\n            hasSocial: {type: 'boolean'},\n            startingBlockKey: {type: 'string'},\n          },\n        },\n        blocks: {\n          type: 'array',\n          items: {\n            type: 'object',\n            properties: {\n              type: {\n                type: 'string',\n                enum: blockTypes,\n              },\n              customData: {\n                type: 'object',\n                properties: {\n                  title: {type: 'string'},\n                  repeatKey: {type: 'integer'},\n                  repeatMax: {type: 'integer'},\n                  repeatDelay: {type: 'integer'},\n                  repeat: {type: 'boolean'},\n                },\n              },\n              uiData: {\n                type: 'object',\n                properties: {\n                  xPosition: {type: 'integer'},\n                  yPosition: {type: 'integer'},\n                  numConnections: {type: 'integer'},\n                },\n              },\n              audioFiles: {type: 'object'},\n              smsContent: {type: 'object'},\n              ussdContent: {type: 'object'},\n              socialContent: {type: 'object'},\n              clipboardContent: {type: 'object'},\n              smsAutogenLangs: {type: 'array'},\n              ussdAutogenLangs: {type: 'array'},\n              socialAutogenLangs: {type: 'array'},\n              clipboardAutogenLangs: {type: 'array'},\n              jsKey: {type: 'string'},\n            },\n          },\n        },\n        connections: {\n          type: 'array',\n          items: {\n            type: 'object',\n            properties: {\n              startBlockKey: {type: 'string'},\n              outputKey: {type: 'string'},\n              endBlockKey: {type: 'string'},\n            },\n          },\n        },\n      },\n    }\n  }\n}())\n","'use strict';\n\nvar bind = require('function-bind');\nvar GetIntrinsic = require('get-intrinsic');\n\nvar $apply = GetIntrinsic('%Function.prototype.apply%');\nvar $call = GetIntrinsic('%Function.prototype.call%');\nvar $reflectApply = GetIntrinsic('%Reflect.apply%', true) || bind.call($call, $apply);\n\nvar $gOPD = GetIntrinsic('%Object.getOwnPropertyDescriptor%', true);\nvar $defineProperty = GetIntrinsic('%Object.defineProperty%', true);\nvar $max = GetIntrinsic('%Math.max%');\n\nif ($defineProperty) {\n\ttry {\n\t\t$defineProperty({}, 'a', { value: 1 });\n\t} catch (e) {\n\t\t// IE 8 has a broken defineProperty\n\t\t$defineProperty = null;\n\t}\n}\n\nmodule.exports = function callBind(originalFunction) {\n\tvar func = $reflectApply(bind, $call, arguments);\n\tif ($gOPD && $defineProperty) {\n\t\tvar desc = $gOPD(func, 'length');\n\t\tif (desc.configurable) {\n\t\t\t// original length, plus the receiver, minus any additional arguments (after the receiver)\n\t\t\t$defineProperty(\n\t\t\t\tfunc,\n\t\t\t\t'length',\n\t\t\t\t{ value: 1 + $max(0, originalFunction.length - (arguments.length - 1)) }\n\t\t\t);\n\t\t}\n\t}\n\treturn func;\n};\n\nvar applyBind = function applyBind() {\n\treturn $reflectApply(bind, $apply, arguments);\n};\n\nif ($defineProperty) {\n\t$defineProperty(module.exports, 'apply', { value: applyBind });\n} else {\n\tmodule.exports.apply = applyBind;\n}\n","'use strict';\n\nvar getSideChannel = require('side-channel');\nvar utils = require('./utils');\nvar formats = require('./formats');\nvar has = Object.prototype.hasOwnProperty;\n\nvar arrayPrefixGenerators = {\n    brackets: function brackets(prefix) {\n        return prefix + '[]';\n    },\n    comma: 'comma',\n    indices: function indices(prefix, key) {\n        return prefix + '[' + key + ']';\n    },\n    repeat: function repeat(prefix) {\n        return prefix;\n    }\n};\n\nvar isArray = Array.isArray;\nvar push = Array.prototype.push;\nvar pushToArray = function (arr, valueOrArray) {\n    push.apply(arr, isArray(valueOrArray) ? valueOrArray : [valueOrArray]);\n};\n\nvar toISO = Date.prototype.toISOString;\n\nvar defaultFormat = formats['default'];\nvar defaults = {\n    addQueryPrefix: false,\n    allowDots: false,\n    charset: 'utf-8',\n    charsetSentinel: false,\n    delimiter: '&',\n    encode: true,\n    encoder: utils.encode,\n    encodeValuesOnly: false,\n    format: defaultFormat,\n    formatter: formats.formatters[defaultFormat],\n    // deprecated\n    indices: false,\n    serializeDate: function serializeDate(date) {\n        return toISO.call(date);\n    },\n    skipNulls: false,\n    strictNullHandling: false\n};\n\nvar isNonNullishPrimitive = function isNonNullishPrimitive(v) {\n    return typeof v === 'string'\n        || typeof v === 'number'\n        || typeof v === 'boolean'\n        || typeof v === 'symbol'\n        || typeof v === 'bigint';\n};\n\nvar stringify = function stringify(\n    object,\n    prefix,\n    generateArrayPrefix,\n    strictNullHandling,\n    skipNulls,\n    encoder,\n    filter,\n    sort,\n    allowDots,\n    serializeDate,\n    format,\n    formatter,\n    encodeValuesOnly,\n    charset,\n    sideChannel\n) {\n    var obj = object;\n\n    if (sideChannel.has(object)) {\n        throw new RangeError('Cyclic object value');\n    }\n\n    if (typeof filter === 'function') {\n        obj = filter(prefix, obj);\n    } else if (obj instanceof Date) {\n        obj = serializeDate(obj);\n    } else if (generateArrayPrefix === 'comma' && isArray(obj)) {\n        obj = utils.maybeMap(obj, function (value) {\n            if (value instanceof Date) {\n                return serializeDate(value);\n            }\n            return value;\n        });\n    }\n\n    if (obj === null) {\n        if (strictNullHandling) {\n            return encoder && !encodeValuesOnly ? encoder(prefix, defaults.encoder, charset, 'key', format) : prefix;\n        }\n\n        obj = '';\n    }\n\n    if (isNonNullishPrimitive(obj) || utils.isBuffer(obj)) {\n        if (encoder) {\n            var keyValue = encodeValuesOnly ? prefix : encoder(prefix, defaults.encoder, charset, 'key', format);\n            return [formatter(keyValue) + '=' + formatter(encoder(obj, defaults.encoder, charset, 'value', format))];\n        }\n        return [formatter(prefix) + '=' + formatter(String(obj))];\n    }\n\n    var values = [];\n\n    if (typeof obj === 'undefined') {\n        return values;\n    }\n\n    var objKeys;\n    if (generateArrayPrefix === 'comma' && isArray(obj)) {\n        // we need to join elements in\n        objKeys = [{ value: obj.length > 0 ? obj.join(',') || null : undefined }];\n    } else if (isArray(filter)) {\n        objKeys = filter;\n    } else {\n        var keys = Object.keys(obj);\n        objKeys = sort ? keys.sort(sort) : keys;\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n        var value = typeof key === 'object' && key.value !== undefined ? key.value : obj[key];\n\n        if (skipNulls && value === null) {\n            continue;\n        }\n\n        var keyPrefix = isArray(obj)\n            ? typeof generateArrayPrefix === 'function' ? generateArrayPrefix(prefix, key) : prefix\n            : prefix + (allowDots ? '.' + key : '[' + key + ']');\n\n        sideChannel.set(object, true);\n        var valueSideChannel = getSideChannel();\n        pushToArray(values, stringify(\n            value,\n            keyPrefix,\n            generateArrayPrefix,\n            strictNullHandling,\n            skipNulls,\n            encoder,\n            filter,\n            sort,\n            allowDots,\n            serializeDate,\n            format,\n            formatter,\n            encodeValuesOnly,\n            charset,\n            valueSideChannel\n        ));\n    }\n\n    return values;\n};\n\nvar normalizeStringifyOptions = function normalizeStringifyOptions(opts) {\n    if (!opts) {\n        return defaults;\n    }\n\n    if (opts.encoder !== null && opts.encoder !== undefined && typeof opts.encoder !== 'function') {\n        throw new TypeError('Encoder has to be a function.');\n    }\n\n    var charset = opts.charset || defaults.charset;\n    if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {\n        throw new TypeError('The charset option must be either utf-8, iso-8859-1, or undefined');\n    }\n\n    var format = formats['default'];\n    if (typeof opts.format !== 'undefined') {\n        if (!has.call(formats.formatters, opts.format)) {\n            throw new TypeError('Unknown format option provided.');\n        }\n        format = opts.format;\n    }\n    var formatter = formats.formatters[format];\n\n    var filter = defaults.filter;\n    if (typeof opts.filter === 'function' || isArray(opts.filter)) {\n        filter = opts.filter;\n    }\n\n    return {\n        addQueryPrefix: typeof opts.addQueryPrefix === 'boolean' ? opts.addQueryPrefix : defaults.addQueryPrefix,\n        allowDots: typeof opts.allowDots === 'undefined' ? defaults.allowDots : !!opts.allowDots,\n        charset: charset,\n        charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,\n        delimiter: typeof opts.delimiter === 'undefined' ? defaults.delimiter : opts.delimiter,\n        encode: typeof opts.encode === 'boolean' ? opts.encode : defaults.encode,\n        encoder: typeof opts.encoder === 'function' ? opts.encoder : defaults.encoder,\n        encodeValuesOnly: typeof opts.encodeValuesOnly === 'boolean' ? opts.encodeValuesOnly : defaults.encodeValuesOnly,\n        filter: filter,\n        format: format,\n        formatter: formatter,\n        serializeDate: typeof opts.serializeDate === 'function' ? opts.serializeDate : defaults.serializeDate,\n        skipNulls: typeof opts.skipNulls === 'boolean' ? opts.skipNulls : defaults.skipNulls,\n        sort: typeof opts.sort === 'function' ? opts.sort : null,\n        strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling\n    };\n};\n\nmodule.exports = function (object, opts) {\n    var obj = object;\n    var options = normalizeStringifyOptions(opts);\n\n    var objKeys;\n    var filter;\n\n    if (typeof options.filter === 'function') {\n        filter = options.filter;\n        obj = filter('', obj);\n    } else if (isArray(options.filter)) {\n        filter = options.filter;\n        objKeys = filter;\n    }\n\n    var keys = [];\n\n    if (typeof obj !== 'object' || obj === null) {\n        return '';\n    }\n\n    var arrayFormat;\n    if (opts && opts.arrayFormat in arrayPrefixGenerators) {\n        arrayFormat = opts.arrayFormat;\n    } else if (opts && 'indices' in opts) {\n        arrayFormat = opts.indices ? 'indices' : 'repeat';\n    } else {\n        arrayFormat = 'indices';\n    }\n\n    var generateArrayPrefix = arrayPrefixGenerators[arrayFormat];\n\n    if (!objKeys) {\n        objKeys = Object.keys(obj);\n    }\n\n    if (options.sort) {\n        objKeys.sort(options.sort);\n    }\n\n    var sideChannel = getSideChannel();\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (options.skipNulls && obj[key] === null) {\n            continue;\n        }\n        pushToArray(keys, stringify(\n            obj[key],\n            key,\n            generateArrayPrefix,\n            options.strictNullHandling,\n            options.skipNulls,\n            options.encode ? options.encoder : null,\n            options.filter,\n            options.sort,\n            options.allowDots,\n            options.serializeDate,\n            options.format,\n            options.formatter,\n            options.encodeValuesOnly,\n            options.charset,\n            sideChannel\n        ));\n    }\n\n    var joined = keys.join(options.delimiter);\n    var prefix = options.addQueryPrefix === true ? '?' : '';\n\n    if (options.charsetSentinel) {\n        if (options.charset === 'iso-8859-1') {\n            // encodeURIComponent('&#10003;'), the \"numeric entity\" representation of a checkmark\n            prefix += 'utf8=%26%2310003%3B&';\n        } else {\n            // encodeURIComponent('✓')\n            prefix += 'utf8=%E2%9C%93&';\n        }\n    }\n\n    return joined.length > 0 ? prefix + joined : '';\n};\n","'use strict';\n\nvar stringify = require('./stringify');\nvar parse = require('./parse');\nvar formats = require('./formats');\n\nmodule.exports = {\n    formats: formats,\n    parse: parse,\n    stringify: stringify\n};\n","var baseForOwn = require('./_baseForOwn'),\n    createBaseEach = require('./_createBaseEach');\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nmodule.exports = baseEach;\n","/*!\n *  Lang.js for Laravel localization in JavaScript.\n *\n *  @version 1.1.12\n *  @license MIT https://github.com/rmariuzzo/Lang.js/blob/master/LICENSE\n *  @site    https://github.com/rmariuzzo/Lang.js\n *  @author  Rubens Mariuzzo <rubens@mariuzzo.com>\n */\n\n(function(root, factory) {\n    'use strict';\n\n    if (typeof define === 'function' && define.amd) {\n        // AMD support.\n        define([], factory);\n    } else if (typeof exports === 'object') {\n        // NodeJS support.\n        module.exports = factory();\n    } else {\n        // Browser global support.\n        root.Lang = factory();\n    }\n\n}(this, function() {\n    'use strict';\n\n    function inferLocale() {\n        if (typeof document !== 'undefined' && document.documentElement) {\n            return document.documentElement.lang;\n        }\n    };\n\n    function convertNumber(str) {\n        if (str === '-Inf') {\n            return -Infinity;\n        } else if (str === '+Inf' || str === 'Inf' || str === '*') {\n            return Infinity;\n        }\n        return parseInt(str, 10);\n    }\n\n    // Derived from: https://github.com/symfony/translation/blob/460390765eb7bb9338a4a323b8a4e815a47541ba/Interval.php\n    var intervalRegexp = /^({\\s*(\\-?\\d+(\\.\\d+)?[\\s*,\\s*\\-?\\d+(\\.\\d+)?]*)\\s*})|([\\[\\]])\\s*(-Inf|\\*|\\-?\\d+(\\.\\d+)?)\\s*,\\s*(\\+?Inf|\\*|\\-?\\d+(\\.\\d+)?)\\s*([\\[\\]])$/;\n    var anyIntervalRegexp = /({\\s*(\\-?\\d+(\\.\\d+)?[\\s*,\\s*\\-?\\d+(\\.\\d+)?]*)\\s*})|([\\[\\]])\\s*(-Inf|\\*|\\-?\\d+(\\.\\d+)?)\\s*,\\s*(\\+?Inf|\\*|\\-?\\d+(\\.\\d+)?)\\s*([\\[\\]])/;\n\n    // Default options //\n\n    var defaults = {\n        locale: 'en'/** The default locale if not set. */\n    };\n\n    // Constructor //\n\n    var Lang = function(options) {\n        options = options || {};\n        this.locale = options.locale || inferLocale() || defaults.locale;\n        this.fallback = options.fallback;\n        this.messages = options.messages;\n    };\n\n    // Methods //\n\n    /**\n     * Set messages source.\n     *\n     * @param messages {object} The messages source.\n     *\n     * @return void\n     */\n    Lang.prototype.setMessages = function(messages) {\n        this.messages = messages;\n    };\n\n    /**\n     * Get the current locale.\n     *\n     * @return {string} The current locale.\n     */\n    Lang.prototype.getLocale = function() {\n        return this.locale || this.fallback;\n    };\n\n    /**\n     * Set the current locale.\n     *\n     * @param locale {string} The locale to set.\n     *\n     * @return void\n     */\n    Lang.prototype.setLocale = function(locale) {\n        this.locale = locale;\n    };\n\n    /**\n     * Get the fallback locale being used.\n     *\n     * @return void\n     */\n    Lang.prototype.getFallback = function() {\n        return this.fallback;\n    };\n\n    /**\n     * Set the fallback locale being used.\n     *\n     * @param fallback {string} The fallback locale.\n     *\n     * @return void\n     */\n    Lang.prototype.setFallback = function(fallback) {\n        this.fallback = fallback;\n    };\n\n    /**\n     * This method act as an alias to get() method.\n     *\n     * @param key {string} The key of the message.\n     * @param locale {string} The locale of the message\n     *\n     * @return {boolean} true if the given key is defined on the messages source, otherwise false.\n     */\n    Lang.prototype.has = function(key, locale) {\n        if (typeof key !== 'string' || !this.messages) {\n            return false;\n        }\n\n        return this._getMessage(key, locale) !== null;\n    };\n\n    /**\n     * Get a translation message.\n     *\n     * @param key {string} The key of the message.\n     * @param replacements {object} The replacements to be done in the message.\n     * @param locale {string} The locale to use, if not passed use the default locale.\n     *\n     * @return {string} The translation message, if not found the given key.\n     */\n    Lang.prototype.get = function(key, replacements, locale) {\n        if (!this.has(key, locale)) {\n            return key;\n        }\n\n        var message = this._getMessage(key, locale);\n        if (message === null) {\n            return key;\n        }\n\n        if (replacements) {\n            message = this._applyReplacements(message, replacements);\n        }\n\n        return message;\n    };\n\n    /**\n     * This method act as an alias to get() method.\n     *\n     * @param key {string} The key of the message.\n     * @param replacements {object} The replacements to be done in the message.\n     *\n     * @return {string} The translation message, if not found the given key.\n     */\n    Lang.prototype.trans = function(key, replacements) {\n        return this.get(key, replacements);\n    };\n\n    /**\n     * Gets the plural or singular form of the message specified based on an integer value.\n     *\n     * @param key {string} The key of the message.\n     * @param count {number} The number of elements.\n     * @param replacements {object} The replacements to be done in the message.\n     * @param locale {string} The locale to use, if not passed use the default locale.\n     *\n     * @return {string} The translation message according to an integer value.\n     */\n    Lang.prototype.choice = function(key, number, replacements, locale) {\n        // Set default values for parameters replace and locale\n        replacements = typeof replacements !== 'undefined'\n            ? replacements\n            : {};\n\n        // The count must be replaced if found in the message\n        replacements.count = number;\n\n        // Message to get the plural or singular\n        var message = this.get(key, replacements, locale);\n\n        // Check if message is not null or undefined\n        if (message === null || message === undefined) {\n            return message;\n        }\n\n        // Separate the plural from the singular, if any\n        var messageParts = message.split('|');\n\n        // Get the explicit rules, If any\n        var explicitRules = [];\n\n        for (var i = 0; i < messageParts.length; i++) {\n            messageParts[i] = messageParts[i].trim();\n\n            if (anyIntervalRegexp.test(messageParts[i])) {\n                var messageSpaceSplit = messageParts[i].split(/\\s/);\n                explicitRules.push(messageSpaceSplit.shift());\n                messageParts[i] = messageSpaceSplit.join(' ');\n            }\n        }\n\n        // Check if there's only one message\n        if (messageParts.length === 1) {\n            // Nothing to do here\n            return message;\n        }\n\n        // Check the explicit rules\n        for (var j = 0; j < explicitRules.length; j++) {\n            if (this._testInterval(number, explicitRules[j])) {\n                return messageParts[j];\n            }\n        }\n\n        locale = locale || this._getLocale(key);\n        var pluralForm = this._getPluralForm(number, locale);\n\n        return messageParts[pluralForm];\n    };\n\n    /**\n     * This method act as an alias to choice() method.\n     *\n     * @param key {string} The key of the message.\n     * @param count {number} The number of elements.\n     * @param replacements {object} The replacements to be done in the message.\n     *\n     * @return {string} The translation message according to an integer value.\n     */\n    Lang.prototype.transChoice = function(key, count, replacements) {\n        return this.choice(key, count, replacements);\n    };\n\n    /**\n     * Parse a message key into components.\n     *\n     * @param key {string} The message key to parse.\n     * @param key {string} The message locale to parse\n     * @return {object} A key object with source and entries properties.\n     */\n    Lang.prototype._parseKey = function(key, locale) {\n        if (typeof key !== 'string' || typeof locale !== 'string') {\n            return null;\n        }\n\n        var segments = key.split('.');\n        var source = segments[0].replace(/\\//g, '.');\n\n        return {\n            source: locale + '.' + source,\n            sourceFallback: this.getFallback() + '.' + source,\n            entries: segments.slice(1)\n        };\n    };\n\n    /**\n     * Returns a translation message. Use `Lang.get()` method instead, this methods assumes the key exists.\n     *\n     * @param key {string} The key of the message.\n     * @param locale {string} The locale of the message\n     *\n     * @return {string} The translation message for the given key.\n     */\n    Lang.prototype._getMessage = function(key, locale) {\n        locale = locale || this.getLocale();\n        \n        key = this._parseKey(key, locale);\n\n        // Ensure message source exists.\n        if (this.messages[key.source] === undefined && this.messages[key.sourceFallback] === undefined) {\n            return null;\n        }\n\n        // Get message from default locale.\n        var message = this.messages[key.source];\n        var entries = key.entries.slice();\n        var subKey = entries.join('.');\n        message = message !== undefined ? this._getValueInKey(message, subKey) : undefined;\n\n\n        // Get message from fallback locale.\n        if (typeof message !== 'string' && this.messages[key.sourceFallback]) {\n            message = this.messages[key.sourceFallback];\n            entries = key.entries.slice();\n            subKey = '';\n            while (entries.length && message !== undefined) {\n                var subKey = !subKey ? entries.shift() : subKey.concat('.', entries.shift());\n                if (message[subKey]) {\n                    message = message[subKey]\n                    subKey = '';\n                }\n            }\n        }\n\n        if (typeof message !== 'string') {\n            return null;\n        }\n\n        return message;\n    };\n\n    Lang.prototype._getValueInKey = function(obj, str) {\n        // If the full key exists just return the value\n        if (typeof obj[str] === 'string') {\n            return obj[str]\n        }\n\n        str = str.replace(/\\[(\\w+)\\]/g, '.$1'); // convert indexes to properties\n        str = str.replace(/^\\./, '');           // strip a leading dot\n\n        var parts = str.split('.');\n\n        for (var i = 0, n = parts.length; i < n; ++i) {\n            var currentKey = parts.slice(0, i + 1).join('.');\n            var restOfTheKey = parts.slice(i + 1, parts.length).join('.')\n            \n            if (obj[currentKey]) {\n                return this._getValueInKey(obj[currentKey], restOfTheKey)\n            }\n        }\n\n        return obj;\n    };\n\n    /**\n     * Return the locale to be used between default and fallback.\n     * @param {String} key\n     * @return {String}\n     */\n    Lang.prototype._getLocale = function(key) {\n        key = this._parseKey(key, this.locale)\n        if (this.messages[key.source]) {\n            return this.locale;\n        }\n        if (this.messages[key.sourceFallback]) {\n            return this.fallback;\n        }\n        return null;\n    };\n\n    /**\n     * Find a message in a translation tree using both dotted keys and regular ones\n     *\n     * @param pathSegments {array} An array of path segments such as ['family', 'father']\n     * @param tree {object} The translation tree\n     */\n    Lang.prototype._findMessageInTree = function(pathSegments, tree) {\n        while (pathSegments.length && tree !== undefined) {\n            var dottedKey = pathSegments.join('.');\n            if (tree[dottedKey]) {\n                tree = tree[dottedKey];\n                break;\n            }\n\n            tree = tree[pathSegments.shift()]\n        }\n\n        return tree;\n    };\n\n    /**\n     * Sort replacement keys by length in descending order.\n     *\n     * @param a {string} Replacement key\n     * @param b {string} Sibling replacement key\n     * @return {number}\n     * @private\n     */\n    Lang.prototype._sortReplacementKeys = function(a, b) {\n        return b.length - a.length;\n    };\n\n    /**\n     * Apply replacements to a string message containing placeholders.\n     *\n     * @param message {string} The text message.\n     * @param replacements {object} The replacements to be done in the message.\n     *\n     * @return {string} The string message with replacements applied.\n     */\n    Lang.prototype._applyReplacements = function(message, replacements) {\n        var keys = Object.keys(replacements).sort(this._sortReplacementKeys);\n\n        keys.forEach(function(replace) {\n            message = message.replace(new RegExp(':' + replace, 'gi'), function (match) {\n                var value = replacements[replace];\n\n                // Capitalize all characters.\n                var allCaps = match === match.toUpperCase();\n                if (allCaps) {\n                    return value.toUpperCase();\n                }\n\n                // Capitalize first letter.\n                var firstCap = match === match.replace(/\\w/i, function(letter) {\n                    return letter.toUpperCase();\n                });\n                if (firstCap) {\n                    return value.charAt(0).toUpperCase() + value.slice(1);\n                }\n\n                return value;\n            })\n        });\n        return message;\n    };\n\n    /**\n     * Checks if the given `count` is within the interval defined by the {string} `interval`\n     *\n     * @param  count     {int}    The amount of items.\n     * @param  interval  {string} The interval to be compared with the count.\n     * @return {boolean}          Returns true if count is within interval; false otherwise.\n     */\n    Lang.prototype._testInterval = function(count, interval) {\n        /**\n         * From the Symfony\\Component\\Translation\\Interval Docs\n         *\n         * Tests if a given number belongs to a given math interval.\n         *\n         * An interval can represent a finite set of numbers:\n         *\n         *  {1,2,3,4}\n         *\n         * An interval can represent numbers between two numbers:\n         *\n         *  [1, +Inf]\n         *  ]-1,2[\n         *\n         * The left delimiter can be [ (inclusive) or ] (exclusive).\n         * The right delimiter can be [ (exclusive) or ] (inclusive).\n         * Beside numbers, you can use -Inf and +Inf for the infinite.\n         */\n\n        if (typeof interval !== 'string') {\n            throw 'Invalid interval: should be a string.';\n        }\n\n        interval = interval.trim();\n\n        var matches = interval.match(intervalRegexp);\n        if (!matches) {\n            throw 'Invalid interval: ' + interval;\n        }\n\n        if (matches[2]) {\n            var items = matches[2].split(',');\n            for (var i = 0; i < items.length; i++) {\n                if (parseInt(items[i], 10) === count) {\n                    return true;\n                }\n            }\n        } else {\n            // Remove falsy values.\n            matches = matches.filter(function(match) {\n                return !!match;\n            });\n\n            var leftDelimiter = matches[1];\n            var leftNumber = convertNumber(matches[2]);\n            if (leftNumber === Infinity) {\n                leftNumber = -Infinity;\n            }\n            var rightNumber = convertNumber(matches[3]);\n            var rightDelimiter = matches[4];\n\n            return (leftDelimiter === '[' ? count >= leftNumber : count > leftNumber)\n                && (rightDelimiter === ']' ? count <= rightNumber : count < rightNumber);\n        }\n\n        return false;\n    };\n\n    /**\n     * Returns the plural position to use for the given locale and number.\n     *\n     * The plural rules are derived from code of the Zend Framework (2010-09-25),\n     * which is subject to the new BSD license (http://framework.zend.com/license/new-bsd).\n     * Copyright (c) 2005-2010 Zend Technologies USA Inc. (http://www.zend.com)\n     *\n     * @param {Number} count\n     * @param {String} locale\n     * @return {Number}\n     */\n    Lang.prototype._getPluralForm = function(count, locale) {\n        switch (locale) {\n            case 'az':\n            case 'bo':\n            case 'dz':\n            case 'id':\n            case 'ja':\n            case 'jv':\n            case 'ka':\n            case 'km':\n            case 'kn':\n            case 'ko':\n            case 'ms':\n            case 'th':\n            case 'tr':\n            case 'vi':\n            case 'zh':\n                return 0;\n\n            case 'af':\n            case 'bn':\n            case 'bg':\n            case 'ca':\n            case 'da':\n            case 'de':\n            case 'el':\n            case 'en':\n            case 'eo':\n            case 'es':\n            case 'et':\n            case 'eu':\n            case 'fa':\n            case 'fi':\n            case 'fo':\n            case 'fur':\n            case 'fy':\n            case 'gl':\n            case 'gu':\n            case 'ha':\n            case 'he':\n            case 'hu':\n            case 'is':\n            case 'it':\n            case 'ku':\n            case 'lb':\n            case 'ml':\n            case 'mn':\n            case 'mr':\n            case 'nah':\n            case 'nb':\n            case 'ne':\n            case 'nl':\n            case 'nn':\n            case 'no':\n            case 'om':\n            case 'or':\n            case 'pa':\n            case 'pap':\n            case 'ps':\n            case 'pt':\n            case 'so':\n            case 'sq':\n            case 'sv':\n            case 'sw':\n            case 'ta':\n            case 'te':\n            case 'tk':\n            case 'ur':\n            case 'zu':\n                return (count == 1)\n                    ? 0\n                    : 1;\n\n            case 'am':\n            case 'bh':\n            case 'fil':\n            case 'fr':\n            case 'gun':\n            case 'hi':\n            case 'hy':\n            case 'ln':\n            case 'mg':\n            case 'nso':\n            case 'xbr':\n            case 'ti':\n            case 'wa':\n                return ((count === 0) || (count === 1))\n                    ? 0\n                    : 1;\n\n            case 'be':\n            case 'bs':\n            case 'hr':\n            case 'ru':\n            case 'sr':\n            case 'uk':\n                return ((count % 10 == 1) && (count % 100 != 11))\n                    ? 0\n                    : (((count % 10 >= 2) && (count % 10 <= 4) && ((count % 100 < 10) || (count % 100 >= 20)))\n                        ? 1\n                        : 2);\n\n            case 'cs':\n            case 'sk':\n                return (count == 1)\n                    ? 0\n                    : (((count >= 2) && (count <= 4))\n                        ? 1\n                        : 2);\n\n            case 'ga':\n                return (count == 1)\n                    ? 0\n                    : ((count == 2)\n                        ? 1\n                        : 2);\n\n            case 'lt':\n                return ((count % 10 == 1) && (count % 100 != 11))\n                    ? 0\n                    : (((count % 10 >= 2) && ((count % 100 < 10) || (count % 100 >= 20)))\n                        ? 1\n                        : 2);\n\n            case 'sl':\n                return (count % 100 == 1)\n                    ? 0\n                    : ((count % 100 == 2)\n                        ? 1\n                        : (((count % 100 == 3) || (count % 100 == 4))\n                            ? 2\n                            : 3));\n\n            case 'mk':\n                return (count % 10 == 1)\n                    ? 0\n                    : 1;\n\n            case 'mt':\n                return (count == 1)\n                    ? 0\n                    : (((count === 0) || ((count % 100 > 1) && (count % 100 < 11)))\n                        ? 1\n                        : (((count % 100 > 10) && (count % 100 < 20))\n                            ? 2\n                            : 3));\n\n            case 'lv':\n                return (count === 0)\n                    ? 0\n                    : (((count % 10 == 1) && (count % 100 != 11))\n                        ? 1\n                        : 2);\n\n            case 'pl':\n                return (count == 1)\n                    ? 0\n                    : (((count % 10 >= 2) && (count % 10 <= 4) && ((count % 100 < 12) || (count % 100 > 14)))\n                        ? 1\n                        : 2);\n\n            case 'cy':\n                return (count == 1)\n                    ? 0\n                    : ((count == 2)\n                        ? 1\n                        : (((count == 8) || (count == 11))\n                            ? 2\n                            : 3));\n\n            case 'ro':\n                return (count == 1)\n                    ? 0\n                    : (((count === 0) || ((count % 100 > 0) && (count % 100 < 20)))\n                        ? 1\n                        : 2);\n\n            case 'ar':\n                return (count === 0)\n                    ? 0\n                    : ((count == 1)\n                        ? 1\n                        : ((count == 2)\n                            ? 2\n                            : (((count % 100 >= 3) && (count % 100 <= 10))\n                                ? 3\n                                : (((count % 100 >= 11) && (count % 100 <= 99))\n                                    ? 4\n                                    : 5))));\n\n            default:\n                return 0;\n        }\n    };\n\n    return Lang;\n\n}));\n","'use strict';\n\nvar origSymbol = global.Symbol;\nvar hasSymbolSham = require('./shams');\n\nmodule.exports = function hasNativeSymbols() {\n\tif (typeof origSymbol !== 'function') { return false; }\n\tif (typeof Symbol !== 'function') { return false; }\n\tif (typeof origSymbol('foo') !== 'symbol') { return false; }\n\tif (typeof Symbol('bar') !== 'symbol') { return false; }\n\n\treturn hasSymbolSham();\n};\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\nvar callBound = require('call-bind/callBound');\nvar inspect = require('object-inspect');\n\nvar $TypeError = GetIntrinsic('%TypeError%');\nvar $WeakMap = GetIntrinsic('%WeakMap%', true);\nvar $Map = GetIntrinsic('%Map%', true);\n\nvar $weakMapGet = callBound('WeakMap.prototype.get', true);\nvar $weakMapSet = callBound('WeakMap.prototype.set', true);\nvar $weakMapHas = callBound('WeakMap.prototype.has', true);\nvar $mapGet = callBound('Map.prototype.get', true);\nvar $mapSet = callBound('Map.prototype.set', true);\nvar $mapHas = callBound('Map.prototype.has', true);\n\n/*\n * This function traverses the list returning the node corresponding to the\n * given key.\n *\n * That node is also moved to the head of the list, so that if it's accessed\n * again we don't need to traverse the whole list. By doing so, all the recently\n * used nodes can be accessed relatively quickly.\n */\nvar listGetNode = function (list, key) { // eslint-disable-line consistent-return\n\tfor (var prev = list, curr; (curr = prev.next) !== null; prev = curr) {\n\t\tif (curr.key === key) {\n\t\t\tprev.next = curr.next;\n\t\t\tcurr.next = list.next;\n\t\t\tlist.next = curr; // eslint-disable-line no-param-reassign\n\t\t\treturn curr;\n\t\t}\n\t}\n};\n\nvar listGet = function (objects, key) {\n\tvar node = listGetNode(objects, key);\n\treturn node && node.value;\n};\nvar listSet = function (objects, key, value) {\n\tvar node = listGetNode(objects, key);\n\tif (node) {\n\t\tnode.value = value;\n\t} else {\n\t\t// Prepend the new node to the beginning of the list\n\t\tobjects.next = { // eslint-disable-line no-param-reassign\n\t\t\tkey: key,\n\t\t\tnext: objects.next,\n\t\t\tvalue: value\n\t\t};\n\t}\n};\nvar listHas = function (objects, key) {\n\treturn !!listGetNode(objects, key);\n};\n\nmodule.exports = function getSideChannel() {\n\tvar $wm;\n\tvar $m;\n\tvar $o;\n\tvar channel = {\n\t\tassert: function (key) {\n\t\t\tif (!channel.has(key)) {\n\t\t\t\tthrow new $TypeError('Side channel does not contain ' + inspect(key));\n\t\t\t}\n\t\t},\n\t\tget: function (key) { // eslint-disable-line consistent-return\n\t\t\tif ($WeakMap && key && (typeof key === 'object' || typeof key === 'function')) {\n\t\t\t\tif ($wm) {\n\t\t\t\t\treturn $weakMapGet($wm, key);\n\t\t\t\t}\n\t\t\t} else if ($Map) {\n\t\t\t\tif ($m) {\n\t\t\t\t\treturn $mapGet($m, key);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ($o) { // eslint-disable-line no-lonely-if\n\t\t\t\t\treturn listGet($o, key);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\thas: function (key) {\n\t\t\tif ($WeakMap && key && (typeof key === 'object' || typeof key === 'function')) {\n\t\t\t\tif ($wm) {\n\t\t\t\t\treturn $weakMapHas($wm, key);\n\t\t\t\t}\n\t\t\t} else if ($Map) {\n\t\t\t\tif ($m) {\n\t\t\t\t\treturn $mapHas($m, key);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ($o) { // eslint-disable-line no-lonely-if\n\t\t\t\t\treturn listHas($o, key);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\tset: function (key, value) {\n\t\t\tif ($WeakMap && key && (typeof key === 'object' || typeof key === 'function')) {\n\t\t\t\tif (!$wm) {\n\t\t\t\t\t$wm = new $WeakMap();\n\t\t\t\t}\n\t\t\t\t$weakMapSet($wm, key, value);\n\t\t\t} else if ($Map) {\n\t\t\t\tif (!$m) {\n\t\t\t\t\t$m = new $Map();\n\t\t\t\t}\n\t\t\t\t$mapSet($m, key, value);\n\t\t\t} else {\n\t\t\t\tif (!$o) {\n\t\t\t\t\t/*\n\t\t\t\t\t * Initialize the linked list as an empty node, so that we don't have\n\t\t\t\t\t * to special-case handling of the first node: we can always refer to\n\t\t\t\t\t * it as (previous node).next, instead of something like (list).head\n\t\t\t\t\t */\n\t\t\t\t\t$o = { key: {}, next: null };\n\t\t\t\t}\n\t\t\t\tlistSet($o, key, value);\n\t\t\t}\n\t\t}\n\t};\n\treturn channel;\n};\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\n\nvar callBind = require('./');\n\nvar $indexOf = callBind(GetIntrinsic('String.prototype.indexOf'));\n\nmodule.exports = function callBoundIntrinsic(name, allowMissing) {\n\tvar intrinsic = GetIntrinsic(name, !!allowMissing);\n\tif (typeof intrinsic === 'function' && $indexOf(name, '.prototype.') > -1) {\n\t\treturn callBind(intrinsic);\n\t}\n\treturn intrinsic;\n};\n","var convert = require('./convert'),\n    func = convert('every', require('../every'));\n\nfunc.placeholder = require('./placeholder');\nmodule.exports = func;\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ClipboardRoot.vue?vue&type=style&index=0&id=0a9a2f9a&prod&lang=scss&\"","/**\n * A specialized version of `_.every` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if all elements pass the predicate check,\n *  else `false`.\n */\nfunction arrayEvery(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (!predicate(array[index], index, array)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nmodule.exports = arrayEvery;\n","'use strict';\n\n/* eslint no-invalid-this: 1 */\n\nvar ERROR_MESSAGE = 'Function.prototype.bind called on incompatible ';\nvar slice = Array.prototype.slice;\nvar toStr = Object.prototype.toString;\nvar funcType = '[object Function]';\n\nmodule.exports = function bind(that) {\n    var target = this;\n    if (typeof target !== 'function' || toStr.call(target) !== funcType) {\n        throw new TypeError(ERROR_MESSAGE + target);\n    }\n    var args = slice.call(arguments, 1);\n\n    var bound;\n    var binder = function () {\n        if (this instanceof bound) {\n            var result = target.apply(\n                this,\n                args.concat(slice.call(arguments))\n            );\n            if (Object(result) === result) {\n                return result;\n            }\n            return this;\n        } else {\n            return target.apply(\n                that,\n                args.concat(slice.call(arguments))\n            );\n        }\n    };\n\n    var boundLength = Math.max(0, target.length - args.length);\n    var boundArgs = [];\n    for (var i = 0; i < boundLength; i++) {\n        boundArgs.push('$' + i);\n    }\n\n    bound = Function('binder', 'return function (' + boundArgs.join(',') + '){ return binder.apply(this,arguments); }')(binder);\n\n    if (target.prototype) {\n        var Empty = function Empty() {};\n        Empty.prototype = target.prototype;\n        bound.prototype = new Empty();\n        Empty.prototype = null;\n    }\n\n    return bound;\n};\n","var createBaseFor = require('./_createBaseFor');\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nmodule.exports = baseFor;\n","import {chain, keyBy, uniqBy, union} from 'lodash'\nimport axios from 'axios'\nimport Vue from 'vue'\nimport {SupportedContentType, SupportedMode} from '@floip/flow-runner'\nimport {routeFrom} from '@/lib/mixins/Routes'\n\nexport default {\n  state: chain(global)\n    .get('__AUDIO__', {})\n    .defaultsDeep({\n      library: [],\n      recording: {\n        // keyed by `{jsKey}:{langId}`\n        isCalling: {},\n        isRecorderSelectorVisible: false,\n        recorders: [],\n      },\n    })\n    .value(),\n\n  getters: {\n    availableAudioFiles: (state) => state.library || [],\n    availableAudiosByUri: (state) => keyBy(state.library, 'uri'),\n  },\n\n  mutations: {\n    addRecorder({recording}, recorder) {\n      recording.recorders = uniqBy(union(recording.recorders, [recorder]), 'id')\n    },\n\n    pushAudioIntoLibrary({library, recording}, audio) {\n      library.push(audio)\n    },\n\n    setRecordingStatusFor({recording: {isCalling}}, {key, value: status}) {\n      Vue.set(isCalling, key, status)\n    },\n\n    setAudioRecordingConfigVisibilityForSelectedBlock({recording}, {langId, isVisible}) {\n      recording.isRecorderSelectorVisible = isVisible\n    },\n\n    setAudioRecordingConfigVisibilityFor({recording}, {key, isVisible}) {\n      recording.isRecorderSelectorVisible = isVisible\n    },\n  },\n\n  actions: {\n    startAudioRecordingFor({\n                             commit, dispatch, state, rootState,\n                           }, {\n                             key,\n                             description,\n                             name: recorder_name,\n                             phone: recorder_phonenumber,\n                             isNew: is_new_recorder,\n                           }) {\n      commit('setAudioRecordingConfigVisibilityFor', {key, isVisible: false})\n      // TODO: enable showAppMessageFor once available\n      // dispatch('showAppMessageFor', {message: 'Atempting to call...'})\n\n      return axios.post(\n        routeFrom('trees.calltorecordStart', null, rootState.trees.ui.routes),\n        {\n          recorder_phonenumber, recorder_name, is_new_recorder, description,\n        },\n        {headers: {'Content-Type': 'application/json'}},\n      )\n        .then(({\n                 data: {\n                   uuid, queue_id: queueId, status, status_description, description, recorder_id,\n                 },\n               }) => {\n          commit('addRecorder', {\n            id: recorder_id,\n            name: recorder_name,\n            phone: recorder_phonenumber,\n          })\n\n          // TODO: enable showAppMessageFor once available\n          // if (status_description === 'error') {\n          //   const message = status === 'no_credit_error' ? description : 'Error dialing number'\n          // dispatch('showAppMessageFor', {message, isComplete: true})\n          // return\n          // }\n\n          // status_description is 'sending_to_dn'\n          // TODO: enable showAppMessageFor once available\n          // dispatch('showAppMessageFor', {message: 'Sending out call...'})\n          commit('setRecordingStatusFor', {\n            key, uuid, queueId, value: 'initiating_call',\n          })\n          setTimeout(() => dispatch('fetchAudioRecordingStatusFor', {key, uuid, queueId}), 3000)\n        })\n        .catch((error) => {\n          if (error.response) {\n            // Request made and server responded\n            console.error('Audio', error.response.data)\n          } else if (error.request) {\n            console.log('Audio', 'The request was made but no response was received', error)\n          } else {\n            console.log('Audio', 'Something happened in setting up the request that triggered an Error', error)\n          }\n        })\n    },\n\n    /**\n     * fetch Audio Recording Status\n     *\n     * @param commit\n     * @param dispatch\n     * @param state\n     * @param rootState\n     * @param key\n     * @param uuid\n     * @param queueId\n     * @returns {Promise<AxiosResponse<any>>}\n     */\n    fetchAudioRecordingStatusFor({\n                                   commit, dispatch, state, rootState,\n                                 }, {key, uuid, queueId}) {\n      return axios.post(\n        routeFrom('trees.calltorecordStatus', null, rootState.trees.ui.routes),\n        {uuid, queue_id: queueId},\n        {headers: {'Content-Type': 'application/json'}},\n      )\n        .then(({data}) => {\n          console.debug('Call recording status', data.status)\n          dispatch('checkAudioRecordingStatusFor', {\n            ...data, key, uuid, queueId,\n          })\n        })\n        .catch((error) => {\n          if (error.response) {\n            // Request made and server responded\n            console.error('Audio', error.response.data)\n          } else if (error.request) {\n            console.log('Audio', 'The request was made but no response was received', error)\n          } else {\n            console.log('Audio', 'Something happened in setting up the request that triggered an Error', error)\n          }\n        })\n    },\n\n    async checkAudioRecordingStatusFor({commit, dispatch, state}, data) {\n      const {\n        key, uuid, audio_file_id, queueId, status, description, created_at, duration_seconds,\n      } = data\n\n      commit('setRecordingStatusFor', {\n        key, uuid, queueId, value: status,\n      })\n\n      if (status === 'new') {\n        const langId = extractLangIdFromRecordingKey(key)\n        const extension = description.split('.')[description.split('.').length - 1]\n        const uploadedAudio = {\n          id: audio_file_id,\n          filename: uuid,\n          description,\n          language_id: langId,\n          duration_seconds,\n          original_extension: extension,\n          created_at,\n        }\n\n        const resource = await dispatch('flow/resource_createWith', {\n          props: {\n            uuid,\n            values: {\n              language_id: langId,\n              content_type: SupportedContentType.AUDIO,\n              modes: [SupportedMode.IVR],\n              value: description,\n            },\n          },\n        })\n\n        dispatch('flow/resource_add', {resource})\n        commit('pushAudioIntoLibrary', uploadedAudio)\n\n        // TODO: what should be the equivalence of this in flow-builder\n\n        // commit('updateReviewedStateFor', {jsKey, langId, value: false})\n        // dispatch('attemptSaveTree')\n\n        // todo: refactor @jory's audio file stuff so that we can reuse everywhere\n      }\n\n      const isComplete = status === 'error' || status === 'new'\n      // TODO: enable showAppMessageFor once available\n      // const fetchStatusMessageMap = {\n      // + hide\n      //   error: 'Error dialing number',\n      // + hide\n      //   new: 'Call recorded successfully',\n      // sending_to_dn\n      //   in_progress: 'Dialing...',\n      //   queued: 'Dialing...',\n      //   recording: 'Recording...',\n      //   listen_to_recording: 'Listening to recording...',\n      //   sending_audio_to_cn: 'Retrieving audio...',\n      //   processing: 'Processing audio file...',\n      //   discard_and_record: 'Audio discarded, Recording again...'\n      // }\n      //\n      if (isComplete) {\n        // dispatch('showAppMessageFor', {message: fetchStatusMessageMap[status], isComplete: true})\n        return\n      }\n      // dispatch('showAppMessageFor', {message: fetchStatusMessageMap[status]})\n\n      const fetchStatusDelayMap = {\n        in_progress: 3000,\n        queued: 2000,\n        recording: 100,\n        listen_to_recording: 1000,\n        sending_audio_to_cn: 500,\n        processing: 300,\n        discard_and_record: 3000,\n      }\n\n      setTimeout((_) => dispatch('fetchAudioRecordingStatusFor', {key, uuid, queueId}), fetchStatusDelayMap[status])\n    },\n  },\n}\n\nconst extractLangIdFromRecordingKey = (key) => key.split(':')[1]\n","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"import-flow\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-sm-12 m-2\"},[_c('div',{staticClass:\"card d-flex bg-light\"},[_c('div',{staticClass:\"card-body\"},[_c('div',[(_vm.hasImportFlowTitle)?_c('h2',[_vm._v(\" \"+_vm._s(_vm.trans('flow-builder.import-flow'))+\" \")]):_vm._e(),_c('p',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.create-flow-from-json')))]),(_vm.trans('flow-builder.import-note'))?_c('div',{staticClass:\"alert alert-info\",attrs:{\"role\":\"alert\"}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.import-note'))+\" \")]):_vm._e()]),_c('div',[_c('label',{staticClass:\"mt-2 no-weight\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.uploadOrPaste),expression:\"uploadOrPaste\"}],attrs:{\"type\":\"radio\",\"value\":\"upload\"},domProps:{\"checked\":_vm._q(_vm.uploadOrPaste,\"upload\")},on:{\"change\":function($event){_vm.uploadOrPaste=\"upload\"}}}),_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.import-json-file'))+\" \")]),(_vm.uploadOrPaste === 'upload')?_c('div',{staticClass:\"ml-3 mr-3\"},[_c('div',{staticClass:\"form-inline mb-2\"},[_c('span',{staticClass:\"one-line\"},[_c('a',{staticClass:\"btn btn-outline-secondary\",on:{\"click\":_vm.chooseFile}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")((!_vm.flowJsonText ? 'flow-builder.import-file' : 'flow-builder.replace-file')))+\" \")]),_c('input',{ref:\"file\",attrs:{\"id\":\"flowUpload\",\"type\":\"file\",\"hidden\":\"\"},on:{\"change\":_vm.handleFileUpload}}),(_vm.fileName)?_c('strong',{staticClass:\"ml-1\"},[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.uploaded-file')))]):_vm._e(),_vm._v(\" \"+_vm._s(_vm.fileName)+\" \")])]),(_vm.flowJsonText)?_c('text-editor',{staticClass:\"tall-text\",attrs:{\"value\":_vm.flowJson,\"label\":\"\",\"placeholder\":_vm._f(\"trans\")('flow-builder.edit-flow-json')},on:{\"input\":_vm.setUpdatingAndHandleFlowJsonTextChange}}):_vm._e()],1):_vm._e()]),_c('div',{staticClass:\"mt-2\"},[_c('label',{staticClass:\"mt-2 no-weight\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.uploadOrPaste),expression:\"uploadOrPaste\"}],attrs:{\"type\":\"radio\",\"value\":\"paste\"},domProps:{\"checked\":_vm._q(_vm.uploadOrPaste,\"paste\")},on:{\"change\":function($event){_vm.uploadOrPaste=\"paste\"}}}),_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.paste-json-directly'))+\" \")]),(_vm.uploadOrPaste === 'paste')?_c('div',{staticClass:\"ml-3 mr-3\"},[_c('text-editor',{staticClass:\"tall-text\",attrs:{\"value\":_vm.flowJson,\"label\":\"\",\"placeholder\":_vm._f(\"trans\")('flow-builder.paste-flow-json')},on:{\"input\":_vm.setUpdatingAndHandleFlowJsonTextChange}})],1):_vm._e()]),_c('error-handler-v2'),_c('div',{staticClass:\"float-right mt-3\"},[_c('router-link',{staticClass:\"btn btn-outline-secondary mr-2\",attrs:{\"to\":_vm.route('flows.cancelImport')}},[_vm._v(\" \"+_vm._s(_vm.trans('flow-builder.cancel'))+\" \")]),_c('a',{staticClass:\"btn btn-primary\",class:{'disabled': _vm.disableContinue},attrs:{\"href\":_vm.route('flows.editFlow', {flowId: _vm.flowUUID, component: 'builder', mode: 'edit'})},on:{\"click\":function($event){$event.preventDefault();_vm.handleImportFlow(_vm.route('flows.editFlow', {flowId: _vm.flowUUID, component: 'builder', mode: 'edit'}))}}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.create-flow'))+\" \")])],1)],1)])])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import {ILanguage} from '@floip/flow-runner/dist/flow-spec/ILanguage'\nimport {ActionTree, GetterTree, MutationTree} from 'vuex'\nimport {IRootState} from '@/store'\nimport {IBlock, IContainer, IContext} from '@floip/flow-runner'\nimport {cloneDeep, difference, differenceWith, find, findIndex, get, isEmpty, isEqual, join, keys, reject, set, uniq} from 'lodash'\nimport {ErrorObject} from 'ajv'\nimport Lang from '@/lib/filters/lang'\nimport {IContactPropertyMultipleChoice} from '../block-types/Core_SetContactPropertyStore.model'\nimport {IGroupOption} from '../block-types/Core_SetGroupMembershipStore'\nimport {\n  checkSingleFlowOnly,\n  detectedGroupChanges,\n  detectedLanguageChanges,\n  detectedPropertyChanges,\n  getGroupBlocks,\n  getPropertyBlocks,\n  updateResourcesForLanguageMatch,\n} from '../utils/importHelpers'\n\n// AJV keywords considered as important errors which should block an import\nconst TRUE_AJV_ERROR_KEY_WORDS = ['required', 'additionalProperties', 'minItems', 'error', 'backend_error']\n// AJV dataPath part considered as important errors which should block an import\nconst TRUE_AJV_ERROR_DATA_PATH_PART = [\n  // scenario eg.: `keyword = 'pattern', dataPath = 'flow/0/uuid'`\n  'uuid',\n]\n\nexport const getters: GetterTree<IImportState, IRootState> = {\n  flowSpecVersion: (state) => state.flowSpecVersion,\n  hasSomethingToImport: (state) => !isEmpty(state.flowJsonText),\n  languagesMissing: (state) => !isEmpty(state.missingLanguages),\n  propertiesMissing: (state) => !isEmpty(state.missingProperties),\n  groupsMissing: (state) => !isEmpty(state.missingGroups),\n  isSafeToImport: (state, getters) => Array.isArray(getters.containerImportValidationTrueErrors)\n    && getters.containerImportValidationTrueErrors.length === 0\n    && getters.languagesMissing === false\n    && getters.propertiesMissing === false\n    && getters.groupsMissing === false,\n  hasWarnings: (state, getters) => getters.containerImportValidationWarningErrors !== undefined\n    && getters.containerImportValidationWarningErrors.length > 0,\n  containerImportValidationTrueErrors: (state, getters) => getters.containerImportValidationErrors?.filter(\n    (ajvError: ErrorObject) => TRUE_AJV_ERROR_KEY_WORDS.includes(ajvError.keyword)\n      || TRUE_AJV_ERROR_DATA_PATH_PART.some((pathPart) => ajvError.dataPath.includes(pathPart)),\n  ),\n  containerImportValidationWarningErrors: (state, getters) => getters.containerImportValidationErrors?.filter(\n    (ajvError: ErrorObject) => !TRUE_AJV_ERROR_KEY_WORDS.includes(ajvError.keyword)\n      && !TRUE_AJV_ERROR_DATA_PATH_PART.some((pathPart) => ajvError.dataPath.includes(pathPart)),\n    ),\n  containerImportValidationErrors: (state, getters, rootState) => rootState['validation'].validationStatuses?.container_import?.ajvErrors ?? [],\n}\n\nexport const mutations: MutationTree<IImportState> = {\n  setUpdating(state, updatingStatus) {\n    state.updating = updatingStatus\n  },\n  baseReset(state) {\n    state.flowContainer = null\n    state.flowJsonText = ''\n    state.flowSpecVersion = undefined\n    state.propertyBlocks = []\n    state.groupBlocks = []\n  },\n  resetLanguageMatching(state) {\n    state.matchingLanguages = []\n    state.missingLanguages = []\n    state.existingLanguagesWithoutMatch = []\n  },\n  resetPropertyMatching(state) {\n    state.matchingLanguages = []\n    state.blocksMissingProperties = {}\n    state.missingProperties = []\n    state.existingPropertiesWithoutMatch = []\n  },\n  resetGroupMatching(state) {\n    state.matchingGroups = []\n    state.blocksMissingGroups = {}\n    state.missingGroups = []\n    state.existingGroupsWithoutMatch = []\n  },\n  addMissingLanguage(state, language) {\n    state.missingLanguages.push(language)\n  },\n  setMissingLanguages(state, languages) {\n    state.missingLanguages = languages\n  },\n  setMatchingLanguages(state, languages) {\n    state.matchingLanguages = languages\n  },\n  setExistingLanguagesWithoutMatch(state, languages) {\n    state.existingLanguagesWithoutMatch = languages\n  },\n  /**\n   * Set languages for the 1st flow\n   * Imports can only contain 01 flow.\n   * @param state\n   * @param languages\n   */\n  setImportedFlowLanguages(state, languages) {\n    if (state.flowContainer) {\n      state.flowContainer.flows[0].languages = languages\n    } else {\n      throw new Error('flowContainer is not set')\n    }\n  },\n  /**\n   * Set resources for the 1st flow\n   * Imports can only contain 01 flow.\n   * @param state\n   * @param resources\n   */\n  setImportedFlowResources(state, resources) {\n    if (state.flowContainer) {\n      state.flowContainer.flows[0].resources = resources\n    } else {\n      throw new Error('flowContainer is not set')\n    }\n  },\n  addFlowLanguage(state, language) {\n    if (state.flowContainer) {\n      state.flowContainer.flows[0].languages.push(language)\n    } else {\n      throw new Error('flowContainer is not set')\n    }\n  },\n  setFlowJsonText(state, text) {\n    state.flowJsonText = text\n  },\n  setFlowContainer(state, flowContainer) {\n    state.flowContainer = flowContainer\n  },\n  setFlowContainerBlocks(state, blocks) {\n    if (state.flowContainer) {\n      set(state.flowContainer, 'flows[0].blocks', blocks)\n    }\n  },\n  setFlowSpecVersion(state, version) {\n    state.flowSpecVersion = version\n  },\n  setGroupBlocks(state, groupBlocks) {\n    state.groupBlocks = groupBlocks\n  },\n  setPropertyBlocks(state, propertyBlocks) {\n    state.propertyBlocks = propertyBlocks\n  },\n  setBlocksMissingProperties(state, blocksMissingProperties) {\n    state.blocksMissingProperties = blocksMissingProperties\n  },\n  setMissingProperties(state, missingProperties) {\n    state.missingProperties = missingProperties\n  },\n  setMatchingProperties(state, matchingProperties) {\n    state.matchingProperties = matchingProperties\n  },\n  setExistingPropertiesWithoutMatch(state, existingPropertiesWithoutMatch) {\n    state.existingPropertiesWithoutMatch = existingPropertiesWithoutMatch\n  },\n  setBlocksMissingGroups(state, blocksMissingGroups) {\n    state.blocksMissingGroups = blocksMissingGroups\n  },\n  setMissingGroups(state, missingGroups) {\n    state.missingGroups = missingGroups\n  },\n  setMatchingGroups(state, matchingGroups) {\n    state.matchingGroups = matchingGroups\n  },\n  setExistingGroupsWithoutMatch(state, existingGroupsWithoutMatch) {\n    state.existingGroupsWithoutMatch = existingGroupsWithoutMatch\n  },\n}\n\nexport const actions: ActionTree<IImportState, IRootState> = {\n  async setFlowJson({commit, state, getters, dispatch}, value: string) {\n    commit('validation/resetValidationStatuses', {key: 'container_import'}, {root: true})\n    commit('setFlowJsonText', value)\n    let flowContainer\n    try {\n      // check valid json\n      flowContainer = JSON.parse(state.flowJsonText)\n    } catch (e) {\n      commit('resetLanguageMatching')\n      commit('resetPropertyMatching')\n      commit('resetGroupMatching')\n    }\n\n    const hasProgrammaticError = await dispatch('validate_containerImportWithProgrammaticLogic', {\n      key: 'container_import',\n      flowContainer,\n    })\n    if (hasProgrammaticError === false) {\n      return\n    } else {\n      const validationErrors = await dispatch('validation/validate_containerImport', {flowContainer}, {root: true})\n\n      if (flowContainer !== undefined) {\n        commit('setFlowSpecVersion', flowContainer?.specification_version)\n      }\n    }\n\n    if (getters.isSafeToImport === false) {\n      return\n    }\n\n    //We know it's valid JSON at least. Let's display it correctly formatted\n    commit('setFlowJsonText', JSON.stringify(flowContainer, null, 2))\n\n    // Try to fix the imported container\n    const oldFlowContainer = cloneDeep(state.flowContainer)\n    const newFlowContainer = cloneDeep(flowContainer)\n    commit('setFlowContainer', flowContainer)\n\n    if (detectedLanguageChanges({flowContainer: newFlowContainer, oldFlowContainer})) {\n      await dispatch('tryToFixLanguages', state.flowContainer)\n    }\n    // matching on \"property_key\" == \"name\" in builder.config.json\n    const newPropertyBlocks = getPropertyBlocks(flowContainer)\n    if (detectedPropertyChanges({newPropertyBlocks, oldPropertyBlocks: state.propertyBlocks})) {\n      commit('setPropertyBlocks', newPropertyBlocks)\n      await dispatch('tryToFixProperties', state.propertyBlocks)\n    }\n    // matching on \"group_key\" == \"id\" in builder.config.json\n    const newGroupBlocks = getGroupBlocks(flowContainer)\n    if (detectedGroupChanges({newGroupBlocks, oldGroupBlocks: state.groupBlocks})) {\n      commit('setGroupBlocks', newGroupBlocks)\n      await dispatch('tryToFixGroups', state.groupBlocks)\n    }\n    commit('setFlowJsonText', JSON.stringify(state.flowContainer, null, 2))\n  },\n  async validate_containerImportWithProgrammaticLogic(\n    {state, commit, getters, rootState, rootGetters},\n    {key, flowContainer}: { key: string, flowContainer: IContainer },\n  ): Promise<Boolean> {\n    const dataPath = '/container'\n    // we provide a keyword 'error' in ajvError to tell our error handler this should not be ignored (not like `pattern` keyword)\n    const keyword = 'error'\n    if (flowContainer === undefined) {\n      commit('validation/pushAjvErrorToValidationStatuses', {\n        key,\n        ajvError: {dataPath, keyword, message: Lang.trans('flow-builder-validation.invalid-json-provided')} as ErrorObject,\n      }, {root: true})\n      return false\n    } else {\n      let isValid = true\n      // We have a valid json file\n      if (flowContainer.flows === undefined || flowContainer.flows?.length === 0) {\n        commit('validation/pushAjvErrorToValidationStatuses', {\n          key,\n          ajvError: {dataPath, keyword, message: Lang.trans('flow-builder-validation.container-flow-is-empty')} as ErrorObject,\n        }, {root: true})\n        isValid = false\n      }\n\n      const supportedSpecVersions = rootGetters?.supportedFlowSpecVersionsForImport\n      if (supportedSpecVersions === undefined\n        || !Array.isArray(supportedSpecVersions)\n        || (Array.isArray(supportedSpecVersions) && supportedSpecVersions === [])) {\n        throw new Error('Please set the supportedFlowSpecVersionsForImport in flow config')\n      }\n\n      if (supportedSpecVersions.includes(flowContainer.specification_version) === false) {\n        commit('validation/pushAjvErrorToValidationStatuses', {\n          key,\n          ajvError: {\n            dataPath,\n            keyword,\n            message: `${Lang.trans('flow-builder-validation.non-supported-spec-version')}: ${flowContainer.specification_version}`,\n          } as ErrorObject,\n        }, {root: true})\n        isValid = false\n      }\n\n      const uploadedBlockTypes = uniq(get(flowContainer, 'flows[0].blocks', []).map((block: IBlock) => block.type))\n      const unsupportedBlockClasses = difference(uploadedBlockTypes, rootGetters.blockClasses)\n      if (!isEmpty(unsupportedBlockClasses) === true) {\n        const unsupportedBlockClassesList = join(unsupportedBlockClasses, ', ')\n        commit('validation/pushAjvErrorToValidationStatuses', {\n          key,\n          ajvError: {\n            dataPath,\n            keyword,\n            message: `${Lang.trans('flow-builder-validation.unsupported-blocks-detected')}: ${unsupportedBlockClassesList}`,\n          } as ErrorObject,\n        }, {root: true})\n        isValid = false\n      }\n      return isValid\n    }\n    return true\n  },\n  async tryToFixLanguages({state, commit, rootGetters}, flowContainer: IContext) {\n    const uploadLanguages: ILanguage[] = get(flowContainer, 'flows[0].languages', [])\n    const matchingLanguages: ILanguage[] = []\n    if (uploadLanguages) {\n      uploadLanguages.forEach((language) => {\n        const matchingLanguage = find(rootGetters.languages, (orgLanguage) => isEqual(orgLanguage, language))\n        if (!matchingLanguage) {\n          // Unlike the others we don't reset this.\n          // A previously unmatched language can only be fixed by updating or adding a language\n          commit('addMissingLanguage', language)\n        } else {\n          matchingLanguages.push(language)\n        }\n      })\n      commit('setMatchingLanguages', matchingLanguages)\n      // Update the languages so we use the org settings for things like id and orgId\n      commit('setImportedFlowLanguages', state.matchingLanguages)\n      commit('setExistingLanguagesWithoutMatch', differenceWith(rootGetters.languages, state.matchingLanguages, isEqual))\n    }\n  },\n  async tryToFixProperties({rootGetters, state, commit}, newPropertyBlocks: IBlock[]) {\n    const matchingProperties: IContactPropertyMultipleChoice[] = []\n    const blocksMissingProperties = cloneDeep(state.blocksMissingProperties)\n    newPropertyBlocks.forEach((propertyBlock) => {\n      const propertyIdentifier = get(propertyBlock, 'config.set_contact_property.property_key')\n      if (propertyIdentifier) {\n        const matchingProperty = find(rootGetters.subscriberPropertyFields, (orgProperty) => isEqual(orgProperty.name, propertyIdentifier))\n        if (!matchingProperty) {\n          // Unlike the others we don't reset this.\n          // A previously unmatched property can only be fixed by updating or adding a language\n          //\n          // Name is all we can get when there isn't a match\n          // ...as the block sidebar gets the actual displayLabel by matching\n          if (!get(blocksMissingProperties, propertyIdentifier)) {\n            blocksMissingProperties[propertyIdentifier] = []\n          }\n          blocksMissingProperties[propertyIdentifier].push(propertyBlock.uuid)\n        } else {\n          matchingProperties.push(matchingProperty)\n        }\n      }\n    })\n    commit('setBlocksMissingProperties', blocksMissingProperties)\n\n    commit(\n      'setMissingProperties',\n      keys(state.blocksMissingProperties).map((propertyIdentifier) => ({\n        name: propertyIdentifier,\n        blockIds: state.blocksMissingProperties[propertyIdentifier],\n      })),\n    )\n    commit('setMatchingProperties', matchingProperties)\n    // Update the languages so we use the org settings for things like id and orgId\n    commit('setExistingPropertiesWithoutMatch', differenceWith(rootGetters.subscriberPropertyFields, state.matchingProperties, isEqual))\n  },\n\n  async tryToFixGroups({rootGetters, state, commit}, newGroupBlocks: IBlock[]) {\n    const matchingGroups: IGroupOption[] = []\n    const blocksMissingGroups = cloneDeep(state.blocksMissingGroups)\n    newGroupBlocks.forEach((groupBlock) => {\n      const groupIdentifier = get(groupBlock, 'config.group_key')\n      const groupName = get(groupBlock, 'config.group_name')\n      if (groupIdentifier) {\n        const matchingGroup = find(rootGetters.groups, (orgGroup) => (isEqual(orgGroup.id, groupIdentifier)\n          && isEqual(orgGroup.name, groupName)))\n        if (!matchingGroup) {\n          // Unlike the others we don't reset this.\n          // A previously unmatched group can only be fixed by updating or adding a language\n          if (!get(blocksMissingGroups, groupIdentifier)) {\n            blocksMissingGroups[groupIdentifier] = {group_name: groupName, blockIds: []}\n          }\n          blocksMissingGroups[groupIdentifier].blockIds.push(groupBlock.uuid)\n        } else {\n          matchingGroups.push(matchingGroup)\n        }\n      }\n    })\n    commit('setBlocksMissingGroups', blocksMissingGroups)\n\n    commit(\n      'setMissingGroups',\n      keys(state.blocksMissingGroups).map((groupIdentifier) => ({id: groupIdentifier, ...state.blocksMissingGroups[groupIdentifier]})),\n    )\n    commit('setMatchingGroups', matchingGroups)\n    // Update the languages so we use the org settings for things like id and orgId\n    commit('setExistingGroupsWithoutMatch', differenceWith(rootGetters.groups, state.matchingGroups, isEqual))\n  },\n  matchLanguage({commit, state, dispatch}, {oldLanguage, matchingNewLanguage}) {\n    commit('addFlowLanguage', matchingNewLanguage)\n    commit(\n      'setImportedFlowResources',\n      updateResourcesForLanguageMatch(get(state.flowContainer, 'flows.0.resources', []), oldLanguage.id, matchingNewLanguage.id),\n    )\n    commit('setFlowJsonText', JSON.stringify(state.flowContainer, null, 2))\n    commit('setMissingLanguages', reject(state.missingLanguages, (language) => isEqual(language, oldLanguage)))\n    dispatch('tryToFixLanguages', state.flowContainer)\n  },\n  matchProperty({commit, state, dispatch}, {oldProperty, matchingNewProperty}) {\n    const blocks = cloneDeep(get(state.flowContainer, 'flows[0].blocks'))\n    if (!blocks) {\n      return\n    }\n    oldProperty.blockIds.forEach((blockId: string) => {\n      const blockIndex = findIndex(blocks, (block: IBlock) => block.uuid === blockId)\n      if (blockIndex < 0) {\n        return\n      }\n      set(blocks, `${blockIndex}.config.set_contact_property.property_key`, matchingNewProperty.name)\n    })\n    commit('setFlowContainerBlocks', blocks)\n    commit('setFlowJsonText', JSON.stringify(state.flowContainer, null, 2))\n    // missingProperties gets updated again when we validate below\n    const newBlocksMissingProperties: { [key: string]: string[] } = {}\n    commit('setBlocksMissingProperties', keys(state.blocksMissingProperties).reduce((newBlocksMissingProperties, propertyIdentifier) => {\n      if (oldProperty.name !== propertyIdentifier) {\n        newBlocksMissingProperties[propertyIdentifier] = state.blocksMissingProperties[propertyIdentifier]\n      }\n      return newBlocksMissingProperties\n    }, newBlocksMissingProperties))\n    commit('setPropertyBlocks', getPropertyBlocks(state.flowContainer as IContext))\n    dispatch('tryToFixProperties', state.propertyBlocks)\n  },\n  matchGroup({commit, state, dispatch}, {oldGroup, matchingNewGroup}) {\n    const blocks = cloneDeep(get(state.flowContainer, 'flows[0].blocks'))\n    if (!blocks) {\n      return\n    }\n    oldGroup.blockIds.forEach((blockId: string) => {\n      const blockIndex = findIndex(blocks, (block: IBlock) => block.uuid === blockId)\n      if (blockIndex < 0) {\n        return\n      }\n      set(blocks, `${blockIndex}.config.group_key`, matchingNewGroup.id)\n      set(blocks, `${blockIndex}.config.group_name`, matchingNewGroup.name)\n    })\n    commit('setFlowContainerBlocks', blocks)\n    commit('setFlowJsonText', JSON.stringify(state.flowContainer, null, 2))\n    // missingGroups gets updated again when we validate below\n    const newBlocksMissingGroups: { [key: string]: { group_name: string, blockIds: string[] } } = {}\n    commit('setBlocksMissingGroups', keys(state.blocksMissingGroups).reduce((newBlocksMissingGroups, groupIdentifier) => {\n      if (oldGroup.id !== groupIdentifier) {\n        newBlocksMissingGroups[groupIdentifier] = state.blocksMissingGroups[groupIdentifier]\n      }\n      return newBlocksMissingGroups\n    }, newBlocksMissingGroups))\n    commit('setGroupBlocks', getGroupBlocks(state.flowContainer as IContext))\n    dispatch('tryToFixGroups', state.groupBlocks)\n  },\n}\n\nexport interface IImportState {\n  matchingLanguages: ILanguage[],\n  missingLanguages: ILanguage[],\n  existingLanguagesWithoutMatch: ILanguage[],\n  blocksMissingProperties: { [key: string]: string[] },\n  missingProperties: { name: string, blockIds: string[] }[],\n  matchingProperties: IContactPropertyMultipleChoice[],\n  existingPropertiesWithoutMatch: IContactPropertyMultipleChoice[],\n  blocksMissingGroups: { [key: string]: { group_name: string, blockIds: string[] } },\n  missingGroups: { id: string, group_name: string, blockIds: string[] }[],\n  matchingGroups: IGroupOption[],\n  existingGroupsWithoutMatch: IGroupOption[],\n  flowContainer: IContext | null,\n  flowJsonText: string,\n  flowSpecVersion: string | undefined,\n  propertyBlocks: IBlock[],\n  groupBlocks: IBlock[],\n  updating: boolean,\n}\n\nexport const stateFactory = (): IImportState => ({\n  matchingLanguages: [],\n  missingLanguages: [],\n  existingLanguagesWithoutMatch: [],\n  blocksMissingProperties: {},\n  missingProperties: [],\n  matchingProperties: [],\n  existingPropertiesWithoutMatch: [],\n  blocksMissingGroups: {},\n  missingGroups: [],\n  matchingGroups: [],\n  existingGroupsWithoutMatch: [],\n  flowContainer: null,\n  flowJsonText: '',\n  flowSpecVersion: undefined,\n  propertyBlocks: [],\n  groupBlocks: [],\n  updating: false,\n})\n\nexport default {\n  namespaced: true,\n  state: stateFactory,\n  getters,\n  mutations,\n  actions,\n}\n","\n\nimport Lang from '@/lib/filters/lang'\nimport Routes from '@/lib/mixins/Routes'\nimport {Component, Prop} from 'vue-property-decorator'\nimport {Getter, Mutation, namespace, State} from 'vuex-class'\nimport {debounce, forEach, get, isEmpty} from 'lodash'\nimport {mixins} from 'vue-class-component'\nimport {store} from '@/store'\nimport {IContext} from '@floip/flow-runner'\nimport ErrorHandlerV2 from '@/components/interaction-designer/flow-editors/import/ErrorHandlerV2.vue'\nimport {createContainerFlowStackAndReturnLastItem} from '@/store/flow/utils/importHelpers'\n\nimport ImportStore from '@/store/flow/views/import'\nimport {ErrorObject} from 'ajv'\n\nconst flowVuexNamespace = namespace('flow')\nconst importVuexNamespace = namespace('flow/import')\nconst validationVuexNamespace = namespace('validation')\n\n@Component({\n  components: {\n    ErrorHandlerV2,\n  },\n})\nclass ImportFlow extends mixins(Lang, Routes) {\n  @Prop({default: () => ({})}) readonly appConfig!: object\n\n  @Prop({default: () => ({})}) readonly builderConfig!: object\n\n  uploadOrPasteSetting = 'upload'\n\n  fileName = ''\n\n  async beforeCreate(): Promise<void> {\n    const {$store} = this\n\n    forEach(store.modules, (v, k) => !$store.hasModule(k) && $store.registerModule(k, v))\n\n    $store.hasModule(['flow', 'import'])\n    || $store.registerModule(['flow', 'import'], ImportStore)\n  }\n\n  async created(): Promise<void> {\n    if ((!isEmpty(this.appConfig) && !isEmpty(this.builderConfig)) || !this.isConfigured) {\n      this.configure({appConfig: this.appConfig, builderConfig: this.builderConfig})\n    }\n  }\n\n  async mounted(): Promise<void> {\n    // reset states to make sure existing states don't interfere with the import logic\n    this.flow_resetStates()\n  }\n\n  @validationVuexNamespace.Action resetValidationStatuses!: ({key}: {key: string}) => void\n\n  get uploadOrPaste() {\n    return this.uploadOrPasteSetting\n  }\n\n  set uploadOrPaste(value) {\n    if (value !== this.uploadOrPasteSetting) {\n      this.reset()\n    }\n    this.uploadOrPasteSetting = value\n  }\n\n  get flowJson() {\n    return this.flowJsonText\n  }\n\n  set flowJson(value) {\n    this.setFlowJson(value)\n  }\n\n  setUpdatingAndHandleFlowJsonTextChange(value: string) {\n    this.setUpdating(true)\n    this.debounceHandleFlowJsonTextChange(value)\n  }\n\n  // In case someone is editing a language, let's give them a second to finish before we tell them it doesn't match\n  debounceHandleFlowJsonTextChange = debounce(this.handleFlowJsonTextChange, 2000)\n\n  async handleFlowJsonTextChange(value: string) {\n    this.flowJson = value\n    this.setUpdating(false)\n  }\n\n  @importVuexNamespace.Getter isSafeToImport!: boolean\n\n  get flowUUID() {\n    return createContainerFlowStackAndReturnLastItem(this.flowContainer)\n  }\n\n  chooseFile() {\n    const fileInput: any = this.$refs.file\n    fileInput.click()\n  }\n\n  async handleFileUpload(event: any) {\n    this.reset()\n\n    const selectedFile = event.target.files[0]\n    this.fileName = selectedFile.name\n    event.target.value = ''\n\n    const reader = new FileReader()\n\n    reader.onload = (readEvent: any) => {\n      this.flowJson = readEvent.target.result.toString()\n    }\n\n    reader.readAsText(selectedFile, 'UTF-8')\n  }\n\n  @validationVuexNamespace.Mutation pushAjvErrorToValidationStatuses!: ({key, ajvError}: {key: string, ajvError: ErrorObject}) => void\n\n  @State(({trees: {ui}}) => ui) ui!: any\n\n  @flowVuexNamespace.Action flow_persistImport!: ({\n    persistRoute,\n    flowContainer,\n  }: { persistRoute: string, flowContainer: IContext }) => Promise<IContext>\n  @flowVuexNamespace.Mutation flow_resetStates!: () => void\n\n  async handleImportFlow(route: string) {\n    const flowContainer = await this.flow_persistImport({\n      // Would need to switch mixins to class components to fix this - https://class-component.vuejs.org/guide/extend-and-mixins.html#mixins\n      persistRoute: this.route('flows.persistFlowImport', {}),\n      flowContainer: this.flowContainer,\n    })\n    const numberOfFlows = flowContainer.flows.length ?? 0\n\n    try {\n      this.reset()\n      let notificationMessage = ''\n      if (numberOfFlows > 1) {\n        notificationMessage = Lang.trans('flow-builder.n-flows-saved', {\n          number: numberOfFlows,\n        })\n      } else {\n        notificationMessage = Lang.trans('flow-builder.flow-saved')\n      }\n      this.$toast.success(notificationMessage, {\n            timeout: 3000,\n            hideProgressBar: true,\n      })\n      this.$router.push(route)\n    } catch (e) {\n      console.warn('There was something wrong when trying to import flow', 'Check console log for more details', e)\n    }\n  }\n\n  @Mutation configure!: ({appConfig, builderConfig}: { appConfig: object, builderConfig: object }) => void\n\n  @Getter isConfigured!: boolean\n\n  @Getter hasImportFlowTitle!: boolean\n\n  get disableContinue() {\n    return this.flowUUID === undefined\n      || !this.isSafeToImport\n  }\n\n  @importVuexNamespace.Action setFlowJson!: (value: string) => Promise<void>\n\n  @importVuexNamespace.Mutation baseReset!: () => void\n\n  @importVuexNamespace.Mutation resetLanguageMatching!: () => void\n\n  @importVuexNamespace.Mutation resetGroupMatching!: () => void\n\n  @importVuexNamespace.Mutation resetPropertyMatching!: () => void\n\n  @importVuexNamespace.Mutation setFlowError!: (text: string) => void\n\n  @importVuexNamespace.Mutation setUpdating!: (updatingStatus: boolean) => void\n\n  @importVuexNamespace.State flowError!: string\n\n  @importVuexNamespace.State flowJsonText!: string\n\n  @importVuexNamespace.State flowContainer!: IContext\n\n  reset() {\n    this.fileName = ''\n    this.baseReset()\n    this.resetLanguageMatching()\n    this.resetPropertyMatching()\n    this.resetGroupMatching()\n    this.resetValidationStatuses({key: 'container_import'})\n  }\n}\n\nexport default ImportFlow\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/@vue/cli-plugin-typescript/node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ImportFlow.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/@vue/cli-plugin-typescript/node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ImportFlow.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ImportFlow.vue?vue&type=template&id=593a2fd0&\"\nimport script from \"./ImportFlow.vue?vue&type=script&lang=ts&\"\nexport * from \"./ImportFlow.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ImportFlow.vue?vue&type=style&index=0&id=593a2fd0&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import axios, {CancelToken} from 'axios'\nimport lodash from 'lodash'\nimport qs from 'qs'\nimport Vue from 'vue'\n\n// todo: are these values odd?\n\nexport const Statuses = {\n  PENDING: -1,\n  UNINITIALIZED: 0,\n  SUCCESS: 1,\n  FAILURE: 2,\n}\n\nexport const FlightStatusToNameMap = {\n  [Statuses.PENDING]: 'pending',\n  [Statuses.UNINITIALIZED]: 'uninitialized',\n  [Statuses.SUCCESS]: 'success',\n  [Statuses.FAILURE]: 'failure',\n}\n\nexport default {\n  namespaced: true,\n\n  state() {\n    return {flights: {}}\n  },\n\n  mutations: {\n    create({flights}, {key, promise, cancellation}) {\n      Vue.set(flights, key, {\n        status: Statuses.PENDING,\n        progress: 0,\n        error: null,\n        promise,\n        cancel: cancellation,\n      })\n    },\n\n    cancel({flights}, {key}) {\n      lodash.invoke(flights, `${key}.cancel`)\n    },\n  },\n\n  actions: {\n    async create({commit, dispatch, state: {flights}}, {key, promise, cancellation}) {\n      // todo: figure out queuing + streaming\n      // todo: convert to .push() + flights.invoke('cancel')\n\n      const previousFlight = flights[key]\n      if (previousFlight && cancellation) {\n        previousFlight.cancel()\n      }\n\n      commit('create', {key, promise, cancellation})\n      const flight = flights[key]\n      flight.id = `flight-${lodash.uniqueId()}`\n\n      try {\n        const response = await promise\n        Object.assign(flight, {status: Statuses.SUCCESS, progress: 100})\n\n        // surface response to next promises\n\n        return response\n        // failed request\n      } catch (e) {\n        flight.error = e\n        flight.status = Statuses.FAILURE\n        return null\n      }\n    },\n\n    createCancellableXhr({commit, dispatch, state}, config) {\n      const\n        {key} = config\n      const {token, cancel: cancellation} = CancelToken.source()\n      const promise = axios.request({\n        paramsSerializer: (p) => qs.stringify(p, {arrayFormat: 'bracket'}),\n        cancelToken: token,\n        // todo: migrate file upload to use this flights api\n        onUploadProgress: null,\n        onDownloadProgress: null,\n        headers: {'X-Requested-With': 'XMLHttpRequest'},\n        ...config,\n      })\n\n      return dispatch('create', {key, promise, cancellation})\n    },\n\n    resetStatus({commit, dispatch, state: {flights}}, {key}) {\n      if (!flights[key]) {\n        return\n      }\n      flights[key].status = Statuses.UNINITIALIZED\n      commit('cancel', {key})\n\n      // should rather be a m reset mutation to reset other values as well as cancel()\n      // eg. (value, error, progress, status, cancel-token), the whole shebang!\n    },\n\n    cancelAll({commit, dispatch, state: {flights}}) {\n      for (const key of Object.keys(flights)) {\n        commit('cancel', {key})\n      }\n    },\n  },\n  getters: {\n    hasPendingFlight(state) {\n      return Object.values(state.flights)\n        .find((f) => f.status === Statuses.PENDING)\n    },\n  },\n}\n","import axios from 'axios'\nimport lodash, {get, set} from 'lodash'\n\nimport Vue from 'vue'\n\nimport {routeFrom} from '@/lib/mixins/Routes'\nimport flights from '@/store/common/flight-monitor.js'\n\nimport flow from 'lodash/fp/flow'\nimport pickBy from 'lodash/fp/pickBy'\nimport _every from 'lodash/fp/every'\nimport {bootstrapLegacyGlobalDependencies} from './bootstrap-legacy-global-dependencies'\n\nconst every = _every.convert({cap: false})\n\nclass ValidationError extends Error {\n  constructor(validationResults) {\n    super()\n    this.validationResults = validationResults\n  }\n}\n\nexport default {\n  modules: {flights},\n\n  state() {\n    return {\n      tree: null,\n      ui: {\n        isConfigured: false,\n        audioFiles: null,\n        callCenterQueues: null,\n        previousTreeJson: null,\n        /** @note - `validationResults` has two states:\n         *            (1) `null` - indicating we have yet to save the tree since loading the page\n         *            (2) non-null or `[]` - indicating the tree has been saved and has gone through server-side validation */\n        // todo: this is an empty list on page load, and shouldn't be?\n        validationResults: null,\n        originalTreeJsonValidationResults: null,\n        selectedBlock: null,\n        designerWorkspaceHeight: 1400,\n        currentZoom: 1,\n        treeUpdateConflict: null,\n        enabledFeatures: [\n          /** @see \\Voto5\\Http\\Controllers\\V3TreesController::get_editTree */\n        ],\n        isSaveCurrentlyInProgress: false,\n        isEditable: true,\n        subscriberPropertyFields: [],\n        blockTags: [],\n        supportedFlowSpecVersionsForImport: undefined,\n      },\n    }\n  },\n\n  getters: {\n    isConfigured: ({ui}) => ui.isConfigured,\n    isFeatureCallCenterQueuesEnabled: ({ui}) => lodash.find(ui.enabledFeatures, (feature) => feature === 'callCenterQueues'),\n    isFeatureCallToRecordEnabled: ({ui}) => lodash.find(ui.enabledFeatures, (feature) => feature === 'callToRecord'),\n    isFeatureMultimediaUploadEnabled: ({ui}) => lodash.find(ui.enabledFeatures, (feature) => feature === 'multimediaUpload'),\n    isFeatureAddSubscriberPropertyFieldEnabled: ({ui}) => lodash.find(\n      ui.enabledFeatures,\n      (feature) => feature === 'addSubscriberPropertyField',\n    ),\n    isFeatureFloipPushEnabled: ({ui}) => lodash.find(ui.enabledFeatures, (feature) => feature === 'floipPush'),\n    isFeatureTreeSaveEnabled: ({ui}) => lodash.find(ui.enabledFeatures, (feature) => feature === 'treeSave'),\n    isFeatureAddLanguageOnImportEnabled: ({ui}) => lodash.find(ui.enabledFeatures, (feature) => feature === 'addLanguageOnImport'),\n    isFeatureTreeSendEnabled: ({ui}) => lodash.find(ui.enabledFeatures, (feature) => feature === 'treeSend'),\n    isFeatureTreeDuplicateEnabled: ({ui}) => lodash.find(ui.enabledFeatures, (feature) => feature === 'treeDuplicate'),\n    isFeatureTreeViewVersionsEnabled: ({ui}) => lodash.find(ui.enabledFeatures, (feature) => feature === 'treeViewVersions'),\n    isFeatureTreeDuplicateOfEnabled: ({ui}) => lodash.find(ui.enabledFeatures, (feature) => feature === 'treeDuplicateOf'),\n    isResourceViewerEnabled: ({ui}) => lodash.find(ui.enabledFeatures, (feature) => feature === 'resourceViewer'),\n    isFeatureUpdateInteractionTotalsEnabled: ({ui}) => lodash.find(ui.enabledFeatures, (feature) => feature === 'updateInteractionTotals'),\n    isFeatureAudioUploadEnabled: ({ui}) => lodash.find(ui.enabledFeatures, (feature) => feature === 'audioUpload'),\n    isFeatureSimulatorEnabled: ({ui}) => lodash.find(ui.enabledFeatures, (feature) => feature === 'simulator'),\n    isFeatureViewResultsEnabled: ({ui}) => lodash.find(ui.enabledFeatures, (feature) => feature === 'viewResults'),\n\n    hasCreateFlowTitle: ({ui}) => lodash.get(ui, 'pages.createFlow.hasPageTitle', true),\n    hasImportFlowTitle: ({ui}) => lodash.get(ui, 'pages.importFlow.hasPageTitle', true),\n\n    hasToolbarFlowTitle: ({ui}) => lodash.get(ui, 'toolbar.hasFlowTitle', true),\n    hasToolbarHomeButton: ({ui}) => lodash.get(ui, 'toolbar.hasHomeButton', true),\n    hasToolbarNewFlowButton: ({ui}) => lodash.get(ui, 'toolbar.hasNewFlowButton', true),\n    hasToolbarExportButton: ({ui}) => lodash.get(ui, 'toolbar.hasExportButton', true),\n\n    builderWidthAdjustment: ({ui}) => lodash.get(ui, 'pages.interactionDesigner.builderWidthAdjustment', 0),\n\n    selectedBlock: ({tree, ui}) => lodash.find(get(tree, 'blocks', []), {jsKey: ui.selectedBlock}),\n\n    subscriberPropertyFields: ({ui}) => lodash.get(ui, 'subscriberPropertyFields', []),\n\n    subscriberPropertyFieldDataTypesMapping: ({ui}) => lodash.get(ui, 'subscriberPropertyFieldDataTypesMapping', {}),\n\n    groups: ({ui}) => lodash.get(ui, 'groups', []),\n\n    interactiveBlockClasses: ({ui}) => lodash.pickBy(ui.blockClasses, (value) => value.is_interactive),\n\n    blockClasses: ({ui}) => lodash.keys(ui.blockClasses),\n\n    supportedFlowSpecVersionsForImport: ({ui}) => ui.supportedFlowSpecVersionsForImport,\n\n    interactiveBlocksInTree: ({tree}, {interactiveBlockClasses}) => lodash.filter(\n      tree.blocks,\n      (b) => lodash.includes(Object.keys(interactiveBlockClasses), b.type),\n    ),\n\n    isEditable: ({ui}) => !!ui.isEditable,\n\n    // todo: trip a debounced version of this (for larger trees)\n    // todo: which is faster lodash deep isEqual or JSON.stringify() ?\n    hasChanges: ({tree, ui}) => ui.previousTreeJson !== JSON.stringify(tree),\n\n    hasIssues({tree, ui}) {\n      const {\n        validationResults,\n        originalValidationResults: validationResultsFromPageLoad,\n        validationResults: hasSavedSinceLoad,\n      } = ui\n\n      return (hasSavedSinceLoad && !_.isEmpty(validationResults))\n        || (!hasSavedSinceLoad && !_.isEmpty(validationResultsFromPageLoad))\n        || !tree.blocks.length\n    },\n\n    isTreeSaving(state) {\n      return state.ui.isSaveCurrentlyInProgress\n    },\n\n    hasClipboard: ({tree}) => tree.details.hasClipboard,\n\n    isSelectedBlockSupportedForSummary({ui}, getters) {\n      if (!getters.selectedBlock) {\n        return false\n      }\n      return lodash.get(ui.blockClasses[getters.selectedBlock.type], 'isSummarizable', false)\n    },\n\n    canSelectedBlockSetSubscriberProperty({ui}, getters) {\n      if (!getters.selectedBlock) {\n        return false\n      }\n      return lodash.get(ui.blockClasses[getters.selectedBlock.type], 'canSetSubscriberProperty', false)\n    },\n\n    isBlockAvailableByBlockClass(state) {\n      return lodash.mapValues(state.ui.blockClasses, (blockClass) => {\n        const contentTypesToEnabledStatus = lodash.get(blockClass, 'isEnabledForContentType', [])\n\n        return flow(\n          pickBy((isEnabled, contentType) => state.tree.details[`has${lodash.startCase(contentType)}`]),\n          every((isEnabled, contentType) => contentTypesToEnabledStatus[contentType]),\n        )(contentTypesToEnabledStatus)\n      })\n    },\n\n    // todo: is this an accurate inverse of trees::hasIssues from ResourceViewer ?\n    isTreeValid(state) {\n      return state.tree.blocks.length\n        && !state.ui.originalTreeJsonValidationResults\n        && lodash.isEmpty(state.ui.validationResults)\n    },\n\n    jsonValidationResults(state) {\n      return state.ui.originalTreeJsonValidationResults\n    },\n\n    // Duplicating \\Voto\\Core\\Trees\\Tree::getTitle\n    treeTitle: ({tree}) => tree.title || 'Untitled Tree',\n\n    languages: ({ui}) => ui.languages || [],\n\n    validationResults: ({ui}) => ui.validationResults,\n\n    treeCreatedAt: ({tree}) => tree.createdAt.date,\n    treeEditedAt: ({tree}) => tree.editedAt.date,\n    treeUpdatedAt: ({tree}) => tree.updatedAt.date,\n\n    supportedModes: ({ui}) => ui.supportedModes || [],\n    defaultModes: ({ui}) => ui.defaultModes || [],\n  },\n\n  mutations: {\n    addOrgLanguage({ui}, language) {\n      const newLanguage = {...language}\n      ui.languages.push(newLanguage)\n    },\n\n    setTreeSaving(state, isSaving) {\n      state.ui.isSaveCurrentlyInProgress = isSaving\n    },\n\n    // TODO: find a better place to put the configure, putting it inside trees store doesn't make sense\n    configure({ui}, {appConfig, builderConfig}) {\n      const {\n        app,\n        __AUDIO__: audio,\n        __TREES_UI__: uiOverrides,\n        __APP__: appContext,\n      } = bootstrapLegacyGlobalDependencies(appConfig, builderConfig)\n      ui.isConfigured = true\n\n      // update this.state to expose permissions, etc\n      lodash.merge(this.state, appContext)\n      lodash.merge(this.state.audio, audio)\n\n      // todo: audio recording feature is likely to be unavailable for standalone app - How do we want to isolate these?\n      set(app, 'audioChoice.audioLibrary', audio.library)\n      set(app, 'audioChoice.recorderList', audio.recording.recorders)\n\n      lodash.merge(ui, lodash.merge(uiOverrides, {\n        previousTreeJson: JSON.stringify(uiOverrides.originalTreeJson),\n        validationResults: uiOverrides.originalValidationResults,\n      }))\n    },\n    setWorkingTree(state, {tree: treeData}) {\n      const tree = new app.Tree(treeData)\n      /** @property app.tree\n       *  @deprecated We'll only need this until we've eradicated references in legacy. */\n      app.tree = tree\n      state.tree = tree.attributes\n    },\n\n    setDesignerWorkspaceHeight({tree, ui}, {height}) {\n      ui.designerWorkspaceHeight = height\n    },\n\n    setSelectedBlock({tree, ui}, {jsKey}) {\n      ui.selectedBlock = jsKey || ''\n    },\n\n    deselectBlocks({ui}) {\n      ui.selectedBlock = ''\n    },\n\n    updateTreeDetailsWith({tree, ui}, {key, value}) {\n      tree.details[key] = value\n    },\n\n    updateBlockCustomDataFor({tree, ui}, {jsKey, key, value}) {\n      const block = lodash.find(tree.blocks, {jsKey})\n      Vue.set(block.customData, key, value)\n    },\n\n    updateBlockCustomDataWithNestedKeyFor({tree, ui}, {jsKey, nestedKey, value}) {\n      const block = lodash.find(tree.blocks, {jsKey})\n      const customData = lodash.cloneDeep(block.customData)\n      lodash.set(customData, nestedKey, value)\n      block.customData = customData\n    },\n\n    updateBlockUiDataFor({tree, ui}, {jsKey, key, value}) {\n      const block = lodash.find(tree.blocks, {jsKey})\n      Vue.set(block.uiData, key, value)\n    },\n\n    updateMaxNumericDigits({tree, ui}, {value}) {\n      const selectedBlock = lodash.find(tree.blocks, {jsKey: ui.selectedBlock})\n      Vue.set(selectedBlock, 'customData.maxNumericDigits', value)\n    },\n\n    updateBlockContentFor({tree, ui}, {\n      type, langId, jsKey, value,\n    }) {\n      const block = lodash.find(tree.blocks, {jsKey})\n      // social has nested text content\n      if (type === 'social') {\n        if (!block.socialContent[langId]) {\n          Vue.set(block.socialContent, langId, {})\n        }\n        Vue.set(block.socialContent[langId], 'text', value)\n      } else {\n        block[`${type}Content`] = {\n          ...block[`${type}Content`],\n          ...{[langId]: value},\n        }\n      }\n    },\n\n    updateBlockFileContentFor({tree, ui}, {\n      langId, jsKey, fileUrl, fileId, fileType, mimeType, contentType,\n    }) {\n      const block = lodash.find(tree.blocks, {jsKey})\n\n      const content = lodash.get(block, `${contentType}Content`)\n      if (content[langId] === undefined) {\n        Vue.set(content, langId, {})\n      }\n      Vue.set(content[langId], 'fileUrl', fileUrl)\n      Vue.set(content[langId], 'fileId', fileId)\n      Vue.set(content[langId], 'fileType', fileType)\n      Vue.set(content[langId], 'mimeType', mimeType)\n    },\n\n    updateBlockFileContentForAllLanguages({tree, ui}, {\n      jsKey, fileUrl, fileId, fileType, mimeType, contentType,\n    }) {\n      const block = lodash.find(tree.blocks, {jsKey})\n\n      const content = lodash.get(block, `${contentType}Content`)\n\n      Vue.set(content, 'allLanguagesFileUrl', fileUrl)\n      Vue.set(content, 'allLanguagesFileId', fileId)\n      Vue.set(content, 'allLanguagesFileType', fileType)\n      Vue.set(content, 'allLanguagesMimeType', mimeType)\n    },\n\n    initBlockAutoGenStateFor({tree, ui}, {type, jsKey}) {\n      const block = lodash.find(tree.blocks, {jsKey})\n      Vue.set(block, `${type}AutogenLangs`, [])\n    },\n\n    updateBlockAutoGenStateFor({tree, ui}, {\n      type, langId, jsKey, value: enable,\n    }) {\n      const block = lodash.find(tree.blocks, {jsKey})\n      const i = block[`${type}AutogenLangs`].indexOf(+langId)\n      const absent = i === -1\n\n      if (enable) {\n        absent && block[`${type}AutogenLangs`].push(+langId)\n      } else {\n        !absent && block[`${type}AutogenLangs`].splice(i, 1)\n      }\n    },\n\n    updateReviewedStateFor({tree, ui}, {langId, jsKey, value}) {\n      const {customData: data} = lodash.find(tree.blocks, {jsKey})\n      data.reviewed[langId] = value\n    },\n\n    updateIsEditable({ui}, {value}) {\n      ui.isEditable = value\n    },\n\n    addEnabledFeature({ui}, {value}) {\n      if (ui.enabledFeatures.indexOf(value) < 0) {\n        ui.enabledFeatures.push(value)\n      }\n    },\n\n    removeEnabledFeature({ui}, {value}) {\n      if (ui.enabledFeatures.indexOf(value) > -1) {\n        ui.enabledFeatures = ui.enabledFeatures.filter((item) => item !== value)\n      }\n    },\n\n    setContentTypeEnabled({tree}, {contentType, isEnabled}) {\n      tree[`has${lodash.upperFirst(contentType)}`] = +isEnabled\n    },\n\n    addSubscriberPropertyField({ui}, {property}) {\n      ui.subscriberPropertyFields.push(property)\n    },\n\n    addContactGroup({ui}, {group}) {\n      ui.groups.push(group)\n    },\n\n    setTreeUpdateConflictStatus(state, {treeUpdateConflict}) {\n      state.ui.treeUpdateConflict = treeUpdateConflict\n    },\n\n    setInteractionTotals(state, {interactionTotals}) {\n      Vue.set(state.ui, 'interactionTotals', interactionTotals)\n    },\n  },\n\n  actions: {\n    async validateAndAddOrgLanguage({dispatch, commit}, {persistRoute, language}) {\n      const validationErrors = await dispatch('validation/validate_new_language', {language}, {root: true})\n      if (!validationErrors.isValid) {\n        return false\n      }\n\n      if (!persistRoute) {\n        console.info('Language persistence route not configured correctly in builder.config.json. Falling back to vuex store')\n        commit('addOrgLanguage', language)\n        return language\n      }\n      try {\n        const {data} = await axios.post(persistRoute, language)\n        commit('addOrgLanguage', data)\n        return language\n      } catch (error) {\n        console.info(`Server error persisting flow: \"${get(error, 'response.data')}\". Status: ${error.response.status}`)\n        commit('flow/import/setFlowError', 'flow-builder.error-persisting-language', {root: true})\n        return false\n      }\n    },\n    initializeTreeModel({dispatch, state: {ui: {isTreeImport}}}) {\n      require('./10-trees-model')\n      // todo: this is also included via `../public/dist/js/legacy/trees` on tree-builder\n      //       but we don't include that beast in storybook b/c of global dependency hierarchy\n      //       global lodash is the only dependency, and they magically attach themselves onto\n      //       root self regardless of whether or not it's being managed by module loader.\n      //       Odd behaviour, but works out in this case.\n      require('./12-trees-helpers')\n\n      isTreeImport\n        ? dispatch('initializeTreeModelFromImport')\n        : dispatch('initializeTreeModelFromOriginalTreeJson')\n    },\n\n    // @note - these are the only actions that are outside the realm of an existing tree.\n    initializeTreeModelFromOriginalTreeJson({commit, dispatch, state: {ui}}) {\n      commit('setWorkingTree', {tree: ui.originalTreeJson})\n      // => this kinda sucks, because now we're dispatching vuex notifications for all these upgrades\n      dispatch('upgradeTreeModel')\n    },\n\n    initializeTreeModelFromImport({commit, dispatch, state: {ui}}) {\n      const schema = app.Tree.createJsonSchemaFor(\n        _.pluck(ui.languages, 'id'),\n        _.keys(ui.blockClasses),\n      )\n      const tree = app.Tree._mergeAndSanitizeImportedInto(ui.originalTreeJson, ui.importTreeJson)\n\n      try {\n        app.Tree.validateTreeData(tree, schema)\n        console.debug('Tree validation succeeded!')\n\n        commit('setWorkingTree', {tree})\n        // todo: this kinda sucks, because now we're dispatching vuex notifications for all these upgrades\n        dispatch('upgradeTreeModel')\n        dispatch('attemptImportPersistence')\n      } catch (validation) {\n        console.error('Tree validation failed!', validation)\n        ui.originalTreeJsonValidationResults = validation\n        // default initialization solely because a tree is prerequisite to continuation\n        dispatch('initializeTreeModelFromOriginalTreeJson')\n      }\n    },\n\n    async attemptImportPersistence({\n                                     dispatch, state: {\n        ui, ui: {\n          isTreeImport,\n          originalTreeJsonValidationResults,\n        },\n      },\n                                   }) {\n      const hasImportValidationErrors = !!originalTreeJsonValidationResults\n      if (!isTreeImport || hasImportValidationErrors) {\n        return\n      }\n\n      // persist imported tree with valid json\n      const validationResults = await dispatch('attemptSaveTree')\n      console.debug('Tree import save validation results', validationResults)\n      // hook into validation rendering that happens once view is initialized\n      ui.originalValidationResults = validationResults\n    },\n\n    // Hoist data to adhere to latest expectations\n    upgradeTreeModel() {\n      app.tree.upgrade()\n    },\n\n    discoverTallestBlockForDesignerWorkspaceHeight({commit, dispatch, state}, {buffer = 350, aboveTallest}) {\n      const\n        initialHeight = aboveTallest ? app.tree.getTallestBlockPosition() : 0\n      const minHeight = 1000\n      const height = Math.max(buffer + initialHeight, minHeight)\n\n      commit('setDesignerWorkspaceHeight', {height})\n    },\n\n    uiChanged(context, {msg}) {\n      console.log('app.ui.change [via vuex.trees.uiChanged]', msg)\n    },\n\n    async attemptSaveTree({dispatch, getters: {hasChanges, isFeatureTreeSaveEnabled}, state: {ui}}) {\n      if (!ui.isEditable || !hasChanges) {\n        console.info('trees', 'Decided against unnecessary tree save!')\n        // non-promise response implies no in-flight request -- aka no-op.\n        return\n      }\n\n      if (!isFeatureTreeSaveEnabled) {\n        console.info('Feature `treeSave` is disabled')\n        return\n      }\n\n      /*\n       * todo: we can't double-chain our jQuery adapter, unless we put more time into it -- then-ing off jQuery adapted\n       *    results in another raw jQuery promise :P\n       * todo: debounce this?\n       */\n      const {app} = global\n\n      try {\n        await dispatch('validateTree')\n        dispatch('saveTree')\n      } catch (error) {\n        if (error instanceof ValidationError) {\n          app.dataControl._setValidationResultsForUI(error.validationResults)\n        } else {\n          throw error\n        }\n      }\n    },\n\n    async saveTree() {\n      // todo: we still need a timer for this on data change -- can this be done on a watcher rather than polling?\n      const {app} = global\n      await app.dataControl.send()\n    },\n\n    /**\n     * Calls the supplied/injected validation function from __TREE_FEATURES__.validation.validate(), and returns the\n     * array of validation results. This function is a pure function, and does not make changes to external data.\n     *\n     * @param dispatch\n     * @param tree\n     * @throws ValidationError If the validation fails, ValidationError will be thrown, which contains the\n     *            ValidationResults\n     * @returns {Promise<array>} a Promise that will return an array of the validation results.\n     */\n    async validateTree({dispatch, state: {tree}}) {\n      const validate = lodash.get(global.__TREE_FEATURES__, 'validation.validate')\n      if (validate) {\n        await validate(tree)\n      } else {\n        await dispatch('validateFloipFlow')\n      }\n    },\n\n    /**\n     * Default Floip validation. If you want Floip Core validation to be run, your\n     * __TREE_FEATURES__.validation.validate() function should call this one and add it's results to the value\n     * returned from __TREE_FEATURES__.validation.validate(). This function is a pure function, and does not make\n     * changes to external data.\n     *\n     * @throws ValidationError If the validation fails, ValidationError will be thrown, which contains the\n     *            ValidationResults\n     * @returns {Promise<array>} a Promise that will return an array of the validation results.\n     */\n    async validateFloipFlow() {\n      /* TODO: (https://viamoinc.atlassian.net/browse/VMO-685) Create default FLOIP CORE Flow validation here and\n       *   uncomment the below line after adding an implementation */\n      // throw new ValidationError([])\n    },\n\n    setDefaultBlockRepeatValues({commit, dispatch, state: {tree}}, {jsKey, values: defaults}) {\n      const block = lodash.find(tree.blocks, {jsKey})\n\n      for (const key in defaults) {\n        !(key in block.customData) && commit('updateBlockCustomDataFor', {jsKey, key, value: defaults[key]})\n      }\n    },\n\n    updateTextContent({commit}, {\n      type, jsKey, langId, value, disableAutoGen,\n    }) {\n      commit('updateBlockContentFor', {\n        type, jsKey, langId, value,\n      })\n      commit('updateBlockAutoGenStateFor', {\n        type, jsKey, langId, value: !disableAutoGen,\n      })\n      commit('updateReviewedStateFor', {jsKey, langId, value: false})\n    },\n\n    setContentFromQuestionText({commit, dispatch, state: {tree}}, {jsKey}) {\n      const block = lodash.find(tree.blocks, {jsKey})\n\n      let generatedText = block.customData.title\n      let isFirst\n      let maxDigits\n\n      // todo: Let's not hand-roll pluralization — https://laravel.com/docs/5.4/localization#pluralization\n      const grammar = {\n        EN: {\n          starter: 'Reply ',\n          connector: ' for ',\n          separator: ', ',\n          conclusion: '.',\n          numericStart: 'Reply with up to ',\n          numericEndPlural: ' digits.',\n          numericEndSingular: ' digit.',\n          validationCode: 'Please reply with your unique code',\n        },\n      }\n\n      if (tree.details.hasSms || tree.details.hasUssd || tree.details.hasSocial || tree.details.hasClipboard) {\n        // todo: push these customizations into custom handlers on particular block types\n        if (block.type == 'MultipleChoiceQuestionBlock' || block.type == 'CollaborativeFilteringRatingBlock') {\n          generatedText += ` ${grammar.EN.starter}`\n          isFirst = 1\n\n          // choices values\n\n          block.customData.choices.forEach((choice, index) => {\n            if (isFirst != 1) {\n              generatedText += grammar.EN.separator\n            }\n            generatedText += _.parseInt(index + 1) + grammar.EN.connector + choice\n            isFirst = 0\n          })\n\n          generatedText += grammar.EN.conclusion\n        } else if (block.type == 'LocationBlock') {\n          generatedText += ` ${grammar.EN.starter}`\n          isFirst = 1\n\n          // this is likely choice's name prop\n\n          block.customData.choices.forEach((choice, index) => {\n            // choiceResponse = $('#' + $(e).attr('id') + '_primaryoption').val()\n            if (isFirst != 1) {\n              generatedText += grammar.EN.separator\n            }\n\n            generatedText += _.parseInt(index + 1) + grammar.EN.connector + choice.name\n            isFirst = 0\n          })\n\n          generatedText += grammar.EN.conclusion\n        } else if (block.type == 'NumericQuestionBlock') {\n          maxDigits = lodash.get(block, 'customData.maxNumericDigits')\n          if (!maxDigits) {\n            maxDigits = 3\n          }\n\n          if (maxDigits == '1') {\n            generatedText += ` ${grammar.EN.numericStart}${maxDigits}${grammar.EN.numericEndSingular}`\n          } else {\n            generatedText += ` ${grammar.EN.numericStart}${maxDigits}${grammar.EN.numericEndPlural}`\n          }\n        } else if (block.type == 'IdValidationBlock') {\n          generatedText = grammar.EN.validationCode\n        }\n\n        lodash.forEach(['sms', 'ussd', 'social', 'clipboard'], (contentType) => {\n          if (tree.details[`has${lodash.upperFirst(contentType)}`] && block[`${contentType}AutogenLangs`].length) {\n            _.each(block[`${contentType}AutogenLangs`], (languageId) => {\n              dispatch('updateTextContent', {\n                type: contentType,\n                jsKey: block.jsKey,\n                langId: languageId,\n                value: generatedText,\n              })\n\n              dispatch('uiChanged', `Updated ${contentType} Content with auto-gen text: ${generatedText}`)\n            })\n          }\n        })\n      }\n    },\n\n    setBlockNumConnections({commit, dispatch, state}, {value: newNumConnections, jsKey}) {\n      console.debug('vuex.trees', 'setBlockNumConnections', newNumConnections, jsKey)\n\n      // Remove any connection elements connected to the block\n      // Remove the block from the UI\n      // Change the data number of connections\n      // Re-add the block to the UI\n      // Re-display the connections going to it\n\n      newNumConnections = _.parseInt(newNumConnections)\n\n      // Make sure the new number of connections is a number\n      if (!_.isFinite(newNumConnections)) {\n        newNumConnections = 1\n      }\n      // Enforce appropriate limits on the number of connections:\n      if (newNumConnections < 1) {\n        newNumConnections = 1\n      }\n\n      const selectedBlockKey = jsKey || app.ui.selectedBlock\n      const selectedBlock = app.tree.getBlock(selectedBlockKey)\n\n      const {numConnections} = selectedBlock.uiData\n\n      if (newNumConnections == numConnections) {\n        // If there's no change, skip the intensive process of rebuilding all those connections\n        console.log('No change in the number of connections.')\n        return true\n      }\n\n      // Otherwise: change the connections!\n\n      app.ui.lockConnections = 1\n\n      // Remove the connections from each of the nodes at the bottom of the block\n      _.each(_.range(1, numConnections + 1), (index) => {\n        console.debug('Removing connections at', index, 'for', selectedBlockKey)\n        // app.jsPlumb.detachAllConnections(selectedBlockKey + '_node_' + index);\n      })\n\n      // Remove any connections connected to the \"target\" / top of the block\n      // Fortunately these call the jsPlumb binding for removing a connection\n      // which in turn is set to remove the entry from the app.tree.get('connections') array. Yay!\n      // app.jsPlumb.detachAllConnections(selectedBlockKey + '_target');\n\n      // Update the actual block data to use the new number:\n      selectedBlock.uiData.numConnections = newNumConnections\n\n      // Remove any connections that are higher in outputKey (node) number than the new maximum numConnections:\n      app.tree.filterBlockConnectionsAboveMax(selectedBlockKey)\n\n      // Re-add disappeared connections?\n\n      app.ui.lockConnections = 0\n\n      // once in vuejs, can we'll be able to just do a [dis]connect via connections diff\n      dispatch.bind(null, 'discoverTallestBlockForDesignerWorkspaceHeight', {aboveTallest: true})\n      // app.jsPlumb.resetBindings(app.tree.get('connections'), true, selectedBlockKey, handleDragStop)\n\n      app.ui.change('Changed number of block connections.')\n    },\n\n    setMcqOutputNames({commit, dispatch, state: {tree}}, {jsKey}) {\n      console.debug('vuex.trees', 'setMcqOutputNames', jsKey)\n\n      const block = lodash.find(tree.blocks, {jsKey})\n      if (!block) {\n        console.log('AppView::generateMcqOutputNamesFor()', 'Unable to find specified block.')\n        return\n      }\n\n      const isOutputBranchingEnabled = !!block.customData.branching\n      let outputNames\n\n      if (isOutputBranchingEnabled) {\n        if (block.type === 'SummaryBlock') {\n          outputNames = [langJs.trans('trees.confirm'), langJs.trans('trees.reject')]\n        } else {\n          outputNames = lodash.clone(lodash.get(block, 'customData.choices', lodash.range(1, block.customData.numChoices + 1)))\n        }\n      } else {\n        outputNames = [1]\n      }\n\n      commit('updateBlockCustomDataFor', {jsKey, key: 'numChoices', value: outputNames.length})\n\n      const isNoResponseExitEnabled = block.customData.addExitForNoResponse\n      isNoResponseExitEnabled && outputNames.push('trees.output-exit')\n\n      commit('updateBlockUiDataFor', {jsKey, key: 'outputNames', value: outputNames})\n      dispatch('setBlockNumConnections', {jsKey, value: outputNames.length})\n    },\n\n    setMcqSidebarFieldLabels({commit, dispatch, state: {tree}}, {jsKey}) {\n      const block = lodash.find(tree.blocks, {jsKey})\n\n      if (!block || !isMCQBlock(block)) {\n        console.log('AppView::generateMcqOutputNamesFor()', 'Wrong block type')\n        return\n      }\n\n      const isVoiceEnabled = tree.details.hasVoice\n      const isTextChannelEnabled = tree.details.hasSms || tree.details.hasUssd || tree.details.hasSocial || tree.details.hasClipboard\n      const hasChoiceKeypresses = !lodash.isEmpty(block.customData.choiceKeypresses)\n      let fieldLabels\n\n      if (isVoiceEnabled && !isTextChannelEnabled && hasChoiceKeypresses) {\n        fieldLabels = getChoiceKeyPressesFor(block)\n      } else if (isVoiceEnabled && isTextChannelEnabled && hasChoiceKeypresses) {\n        fieldLabels = lodash.times(block.customData.numChoices, lodash.constant('•'))\n      } else {\n        fieldLabels = lodash.range(1, block.customData.numChoices + 1)\n      }\n\n      commit('updateBlockUiDataFor', {jsKey, key: 'fieldLabels', value: fieldLabels})\n    },\n\n    addSubscriberPropertyField({commit, dispatch, state}, {displayLabel, dataType, choices}) {\n      return axios.post(routeFrom('trees.addSubscriberPropertyField', null, state.ui.routes), {displayLabel, dataType, choices})\n        .then((response) => {\n          lodash.filter(choices, (c) => !!c.value)\n          commit('addSubscriberPropertyField', {property: response.data.data})\n          return response\n        })\n    },\n\n    setTreeUpdateConflictStatus({commit}, payload) {\n      commit('setTreeUpdateConflictStatus', payload)\n    },\n\n    async fetchInteractionTotals({\n                                   state, commit, dispatch, getters,\n                                 }, {startDate, endDate}) {\n      if (!getters.isFeatureUpdateInteractionTotalsEnabled) {\n        console.info('Feature `updateInteractionTotals` is disabled')\n        return\n      }\n      const key = 'interaction-totals'\n      const url = routeFrom('trees.ajaxTotalInteractions', {treeId: state.tree.id}, state.ui.routes)\n      const params = {startDate, endDate}\n\n      const response = await dispatch('flights/createCancellableXhr', {key, url, params})\n      if (response) {\n        commit('setInteractionTotals', {interactionTotals: response.data})\n      }\n    },\n  },\n}\n\nconst getChoiceKeyPressesFor = (block) => {\n  const keypresses = block.customData.choiceKeypresses\n  return lodash.range(1, block.customData.numChoices + 1)\n    .map((i) => keypresses[i] || i)\n}\n\nconst isMCQBlock = (block) => block.type === 'MultipleChoiceQuestionBlock'\n  || block.type === 'CollaborativeFilteringRatingBlock'\n  || block.type === 'RandomOrderMultipleChoiceQuestionBlock'\n","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"fetch-flow\"},[_c('div',{staticClass:\"d-flex h-100 text-center\"},[_c('div',{staticClass:\"cover-container d-flex w-100 h-100 p-3 mx-auto flex-column\"},[_c('main',{staticClass:\"px-3\"},[_c('h2',[_vm._v(_vm._s(_vm._f(\"trans\")(_vm.message)))]),(_vm.showNewButton)?_c('router-link',{staticClass:\"mt-3 btn btn-outline-secondary mr-2 active\",attrs:{\"to\":_vm.route('flows.newFlow'),\"title\":_vm.trans('flow-builder.create-a-new-flow')}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.new-flow'))+\" \")]):_vm._e(),(_vm.flowLink)?_c('router-link',{staticClass:\"mt-3 btn btn-outline-secondary mr-2 active\",attrs:{\"to\":_vm.flowLink,\"title\":_vm.trans('flow-builder.flow-details')}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.go-to-flow'))+\" \")]):_vm._e()],1)])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\nimport {forEach, isEmpty} from 'lodash'\nimport Lang from '@/lib/filters/lang'\nimport Routes from '@/lib/mixins/Routes'\nimport {Component, Prop} from 'vue-property-decorator'\nimport {Getter, Mutation, namespace} from 'vuex-class'\nimport {store} from '@/store'\nimport {IFlow} from '@floip/flow-runner'\nimport {mixins} from 'vue-class-component'\nimport {RawLocation} from 'vue-router'\n\nconst flowVuexNamespace = namespace('flow')\nconst validationVuexNamespace = namespace('validation')\n\n@Component({})\nclass FetchFlow extends mixins(Routes, Lang) {\n  @Prop({required: true}) readonly uuid!: string\n  @Prop({default: () => ({})}) readonly appConfig!: object\n  @Prop({default: () => ({})}) readonly builderConfig!: object\n\n  message = 'flow-builder.fetching-flow'\n  showNewButton = false\n  flowLink = null\n\n  @flowVuexNamespace.Getter activeFlow!: IFlow\n  @flowVuexNamespace.Action flow_fetch!: ({fetchRoute}: { fetchRoute: string }) => Promise<IFlow>\n  @flowVuexNamespace.Mutation flow_setActiveFlowId!: ({flowId}: { flowId: string }) => void\n\n  @validationVuexNamespace.Action validate_allBlocksFromBackend!: () => Promise<void>\n\n  @Mutation configure!: ({appConfig, builderConfig}: { appConfig: object, builderConfig: object }) => void\n  @Getter isConfigured!: boolean\n\n  async mounted(): Promise<void> {\n    const nextUrl: RawLocation = this.$route.query.nextUrl as RawLocation\n    const url = new URL(nextUrl as string, window.location.origin)\n    const urlParams = url.searchParams.toString()\n    const baseFetchRoute = this.route('flows.fetchFlowServer', {flowId: this.uuid})\n    const fetchRoute = `${baseFetchRoute}?${urlParams}`\n    const flowContainer = await this.flow_fetch({fetchRoute})\n    if (flowContainer) {\n      this.flow_setActiveFlowId({flowId: this.uuid})\n      if (nextUrl) {\n        await this.$router.replace(nextUrl)\n      } else {\n        this.message = 'flow-builder.flow-found'\n        this.flowLink = this.route('flows.editFlow', {flowId: this.activeFlow.uuid, component: 'builder', mode: 'edit'})\n      }\n\n      await this.validate_allBlocksFromBackend()\n    } else {\n      this.message = 'flow-builder.flow-not-found'\n      this.showNewButton = true\n    }\n  }\n\n  async beforeCreate(): Promise<void> {\n    const {$store} = this\n\n    forEach(store.modules, (v, k) => !$store.hasModule(k) && $store.registerModule(k, v))\n  }\n\n  async created(): Promise<void> {\n    if ((!isEmpty(this.appConfig) && !isEmpty(this.builderConfig)) || !this.isConfigured) {\n      this.configure({appConfig: this.appConfig, builderConfig: this.builderConfig})\n    }\n  }\n}\n\nexport default FetchFlow\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/@vue/cli-plugin-typescript/node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./FetchFlow.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/@vue/cli-plugin-typescript/node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./FetchFlow.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./FetchFlow.vue?vue&type=template&id=26ce5194&\"\nimport script from \"./FetchFlow.vue?vue&type=script&lang=ts&\"\nexport * from \"./FetchFlow.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var isArrayLike = require('./isArrayLike');\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nmodule.exports = createBaseEach;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nmodule.exports = createBaseFor;\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./InteractionDesigner.vue?vue&type=style&index=0&id=30d954b6&prod&lang=scss&\"","var eq = require('./eq'),\n    isArrayLike = require('./isArrayLike'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject');\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nmodule.exports = isIterateeCall;\n","'use strict';\n\nvar utils = require('./utils');\n\nvar has = Object.prototype.hasOwnProperty;\nvar isArray = Array.isArray;\n\nvar defaults = {\n    allowDots: false,\n    allowPrototypes: false,\n    allowSparse: false,\n    arrayLimit: 20,\n    charset: 'utf-8',\n    charsetSentinel: false,\n    comma: false,\n    decoder: utils.decode,\n    delimiter: '&',\n    depth: 5,\n    ignoreQueryPrefix: false,\n    interpretNumericEntities: false,\n    parameterLimit: 1000,\n    parseArrays: true,\n    plainObjects: false,\n    strictNullHandling: false\n};\n\nvar interpretNumericEntities = function (str) {\n    return str.replace(/&#(\\d+);/g, function ($0, numberStr) {\n        return String.fromCharCode(parseInt(numberStr, 10));\n    });\n};\n\nvar parseArrayValue = function (val, options) {\n    if (val && typeof val === 'string' && options.comma && val.indexOf(',') > -1) {\n        return val.split(',');\n    }\n\n    return val;\n};\n\n// This is what browsers will submit when the ✓ character occurs in an\n// application/x-www-form-urlencoded body and the encoding of the page containing\n// the form is iso-8859-1, or when the submitted form has an accept-charset\n// attribute of iso-8859-1. Presumably also with other charsets that do not contain\n// the ✓ character, such as us-ascii.\nvar isoSentinel = 'utf8=%26%2310003%3B'; // encodeURIComponent('&#10003;')\n\n// These are the percent-encoded utf-8 octets representing a checkmark, indicating that the request actually is utf-8 encoded.\nvar charsetSentinel = 'utf8=%E2%9C%93'; // encodeURIComponent('✓')\n\nvar parseValues = function parseQueryStringValues(str, options) {\n    var obj = {};\n    var cleanStr = options.ignoreQueryPrefix ? str.replace(/^\\?/, '') : str;\n    var limit = options.parameterLimit === Infinity ? undefined : options.parameterLimit;\n    var parts = cleanStr.split(options.delimiter, limit);\n    var skipIndex = -1; // Keep track of where the utf8 sentinel was found\n    var i;\n\n    var charset = options.charset;\n    if (options.charsetSentinel) {\n        for (i = 0; i < parts.length; ++i) {\n            if (parts[i].indexOf('utf8=') === 0) {\n                if (parts[i] === charsetSentinel) {\n                    charset = 'utf-8';\n                } else if (parts[i] === isoSentinel) {\n                    charset = 'iso-8859-1';\n                }\n                skipIndex = i;\n                i = parts.length; // The eslint settings do not allow break;\n            }\n        }\n    }\n\n    for (i = 0; i < parts.length; ++i) {\n        if (i === skipIndex) {\n            continue;\n        }\n        var part = parts[i];\n\n        var bracketEqualsPos = part.indexOf(']=');\n        var pos = bracketEqualsPos === -1 ? part.indexOf('=') : bracketEqualsPos + 1;\n\n        var key, val;\n        if (pos === -1) {\n            key = options.decoder(part, defaults.decoder, charset, 'key');\n            val = options.strictNullHandling ? null : '';\n        } else {\n            key = options.decoder(part.slice(0, pos), defaults.decoder, charset, 'key');\n            val = utils.maybeMap(\n                parseArrayValue(part.slice(pos + 1), options),\n                function (encodedVal) {\n                    return options.decoder(encodedVal, defaults.decoder, charset, 'value');\n                }\n            );\n        }\n\n        if (val && options.interpretNumericEntities && charset === 'iso-8859-1') {\n            val = interpretNumericEntities(val);\n        }\n\n        if (part.indexOf('[]=') > -1) {\n            val = isArray(val) ? [val] : val;\n        }\n\n        if (has.call(obj, key)) {\n            obj[key] = utils.combine(obj[key], val);\n        } else {\n            obj[key] = val;\n        }\n    }\n\n    return obj;\n};\n\nvar parseObject = function (chain, val, options, valuesParsed) {\n    var leaf = valuesParsed ? val : parseArrayValue(val, options);\n\n    for (var i = chain.length - 1; i >= 0; --i) {\n        var obj;\n        var root = chain[i];\n\n        if (root === '[]' && options.parseArrays) {\n            obj = [].concat(leaf);\n        } else {\n            obj = options.plainObjects ? Object.create(null) : {};\n            var cleanRoot = root.charAt(0) === '[' && root.charAt(root.length - 1) === ']' ? root.slice(1, -1) : root;\n            var index = parseInt(cleanRoot, 10);\n            if (!options.parseArrays && cleanRoot === '') {\n                obj = { 0: leaf };\n            } else if (\n                !isNaN(index)\n                && root !== cleanRoot\n                && String(index) === cleanRoot\n                && index >= 0\n                && (options.parseArrays && index <= options.arrayLimit)\n            ) {\n                obj = [];\n                obj[index] = leaf;\n            } else {\n                obj[cleanRoot] = leaf;\n            }\n        }\n\n        leaf = obj;\n    }\n\n    return leaf;\n};\n\nvar parseKeys = function parseQueryStringKeys(givenKey, val, options, valuesParsed) {\n    if (!givenKey) {\n        return;\n    }\n\n    // Transform dot notation to bracket notation\n    var key = options.allowDots ? givenKey.replace(/\\.([^.[]+)/g, '[$1]') : givenKey;\n\n    // The regex chunks\n\n    var brackets = /(\\[[^[\\]]*])/;\n    var child = /(\\[[^[\\]]*])/g;\n\n    // Get the parent\n\n    var segment = options.depth > 0 && brackets.exec(key);\n    var parent = segment ? key.slice(0, segment.index) : key;\n\n    // Stash the parent if it exists\n\n    var keys = [];\n    if (parent) {\n        // If we aren't using plain objects, optionally prefix keys that would overwrite object prototype properties\n        if (!options.plainObjects && has.call(Object.prototype, parent)) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n\n        keys.push(parent);\n    }\n\n    // Loop through children appending to the array until we hit depth\n\n    var i = 0;\n    while (options.depth > 0 && (segment = child.exec(key)) !== null && i < options.depth) {\n        i += 1;\n        if (!options.plainObjects && has.call(Object.prototype, segment[1].slice(1, -1))) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n        keys.push(segment[1]);\n    }\n\n    // If there's a remainder, just add whatever is left\n\n    if (segment) {\n        keys.push('[' + key.slice(segment.index) + ']');\n    }\n\n    return parseObject(keys, val, options, valuesParsed);\n};\n\nvar normalizeParseOptions = function normalizeParseOptions(opts) {\n    if (!opts) {\n        return defaults;\n    }\n\n    if (opts.decoder !== null && opts.decoder !== undefined && typeof opts.decoder !== 'function') {\n        throw new TypeError('Decoder has to be a function.');\n    }\n\n    if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {\n        throw new TypeError('The charset option must be either utf-8, iso-8859-1, or undefined');\n    }\n    var charset = typeof opts.charset === 'undefined' ? defaults.charset : opts.charset;\n\n    return {\n        allowDots: typeof opts.allowDots === 'undefined' ? defaults.allowDots : !!opts.allowDots,\n        allowPrototypes: typeof opts.allowPrototypes === 'boolean' ? opts.allowPrototypes : defaults.allowPrototypes,\n        allowSparse: typeof opts.allowSparse === 'boolean' ? opts.allowSparse : defaults.allowSparse,\n        arrayLimit: typeof opts.arrayLimit === 'number' ? opts.arrayLimit : defaults.arrayLimit,\n        charset: charset,\n        charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,\n        comma: typeof opts.comma === 'boolean' ? opts.comma : defaults.comma,\n        decoder: typeof opts.decoder === 'function' ? opts.decoder : defaults.decoder,\n        delimiter: typeof opts.delimiter === 'string' || utils.isRegExp(opts.delimiter) ? opts.delimiter : defaults.delimiter,\n        // eslint-disable-next-line no-implicit-coercion, no-extra-parens\n        depth: (typeof opts.depth === 'number' || opts.depth === false) ? +opts.depth : defaults.depth,\n        ignoreQueryPrefix: opts.ignoreQueryPrefix === true,\n        interpretNumericEntities: typeof opts.interpretNumericEntities === 'boolean' ? opts.interpretNumericEntities : defaults.interpretNumericEntities,\n        parameterLimit: typeof opts.parameterLimit === 'number' ? opts.parameterLimit : defaults.parameterLimit,\n        parseArrays: opts.parseArrays !== false,\n        plainObjects: typeof opts.plainObjects === 'boolean' ? opts.plainObjects : defaults.plainObjects,\n        strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling\n    };\n};\n\nmodule.exports = function (str, opts) {\n    var options = normalizeParseOptions(opts);\n\n    if (str === '' || str === null || typeof str === 'undefined') {\n        return options.plainObjects ? Object.create(null) : {};\n    }\n\n    var tempObj = typeof str === 'string' ? parseValues(str, options) : str;\n    var obj = options.plainObjects ? Object.create(null) : {};\n\n    // Iterate over the keys and setup the new object\n\n    var keys = Object.keys(tempObj);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var newObj = parseKeys(key, tempObj[key], options, typeof str === 'string');\n        obj = utils.merge(obj, newObj, options);\n    }\n\n    if (options.allowSparse === true) {\n        return obj;\n    }\n\n    return utils.compact(obj);\n};\n","'use strict';\n\nvar bind = require('function-bind');\n\nmodule.exports = bind.call(Function.call, Object.prototype.hasOwnProperty);\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ImportFlow.vue?vue&type=style&index=0&id=593a2fd0&prod&lang=scss&\"","import ImportedLang from 'lang.js'\nimport ImportedMoment from 'moment'\nimport ImportedJquery from 'jquery'\nimport {isEmpty, merge} from 'lodash'\n\nexport function bootstrapLegacyGlobalDependencies(appConfig = {}, builderConfig = {}) {\n  // initialize configuration sources\n  const __APP__ = !isEmpty(appConfig) ? appConfig : require('../../app.config.json')\n  const __CONTEXT__ = !isEmpty(builderConfig) ? builderConfig : require('../../builder.config.json')\n  const source = appConfig.i18n ? appConfig.i18n : require('../../assets/messages.json')\n\n  // todo: the remaining legacy code still expects the ability to mutate data directly on `app.ui.*` rather than using trees store\n  //      for now, we'll need to ensure app.ui === __TREES_UI__ */\n  const app = merge(global.app || {}, __CONTEXT__)\n  const __TREES_UI__ = app.ui\n  const __AUDIO__ = app.audio\n\n  // configure libraries\n  const Lang = new ImportedLang()\n  Lang.setMessages(source)\n  Lang.setLocale(__APP__.locale)\n  Lang.defaultLocale = 'en'\n\n  const moment = ImportedMoment\n  moment.locale(Lang.getLocale())\n\n  const jQuery = ImportedJquery\n  const jQ = ImportedJquery\n\n  // export as globals (overwrites pre-existing)\n  const exported = {\n    Lang,\n    moment,\n    // aliasing $ to jQ to avoid jQuery conflict in consumer side\n    jQ,\n    jQuery,\n\n    __APP__,\n    __CONTEXT__,\n    __TREES_UI__,\n    __AUDIO__,\n\n    app,\n  }\n  Object.assign(global, exported)\n\n  require('bootstrap-datetimepicker/src/js/bootstrap-datetimepicker')\n  jQ.fn.datetimepicker.defaults.locale = Lang.getLocale()\n\n  return exported\n}\n\nexport default bootstrapLegacyGlobalDependencies\n","'use strict';\n\nvar replace = String.prototype.replace;\nvar percentTwenties = /%20/g;\n\nvar Format = {\n    RFC1738: 'RFC1738',\n    RFC3986: 'RFC3986'\n};\n\nmodule.exports = {\n    'default': Format.RFC3986,\n    formatters: {\n        RFC1738: function (value) {\n            return replace.call(value, percentTwenties, '+');\n        },\n        RFC3986: function (value) {\n            return String(value);\n        }\n    },\n    RFC1738: Format.RFC1738,\n    RFC3986: Format.RFC3986\n};\n","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"bg-light home\"},[_c('div',{staticClass:\"container pt-5 bg-light\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"offset-1 col-10\"},[_c('div',{staticClass:\"card-deck mb-3\"},[_c('div',{staticClass:\"card mb-4 box-shadow\"},[_c('div',{staticClass:\"card-body\"},[_c('h3',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.flow-builder')))]),_c('div',{staticClass:\"row mt-5 mb-5\"},[_c('div',{staticClass:\"col-sm-5 border-right\"},[_c('div',{staticClass:\"d-flex h-100 text-center\"},[_c('div',{staticClass:\"cover-container d-flex w-100 h-100 mx-auto flex-column\"},[_c('main',{staticClass:\"px-3\"},[_c('router-link',{staticClass:\"btn btn-primary mr-2\",attrs:{\"to\":_vm.route('flows.newFlow'),\"title\":_vm.trans('flow-builder.create-flow'),\"data-cy\":\"create-flow--btn\"}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.create-flow'))+\" \")]),_c('div',{staticClass:\"mt-4\"},[_c('router-link',{staticClass:\"mt-3 mr-2 active\",attrs:{\"to\":_vm.route('flows.importFlow'),\"title\":_vm.trans('flow-builder.import-flow')}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.import-flow'))+\" \")])],1),_c('div',{staticClass:\"mt-4\"},[_c('language-adder',{scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('button',{staticClass:\"btn btn-outline-primary\",on:{\"click\":scope.showAddLanguageModal}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.add-language'))+\" \")])]}}])})],1),_c('div',{staticClass:\"mt-4\"},[(!!_vm.flows.length)?_c('h4',[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.existing-flows'))+\": \")]):_vm._e(),_vm._l((_vm.flows),function(flow){return _c('div',{key:flow.uuid},[_c('router-link',{staticClass:\"mt-3 btn btn-outline-secondary mr-2 active\",attrs:{\"to\":_vm.route('flows.editFlow', {flowId: flow.uuid, component: 'builder', mode: 'edit'}),\"title\":_vm.trans('flow-builder.flow-details')}},[_vm._v(\" \"+_vm._s(flow.label || flow.uuid)+\" \")])],1)})],2)],1)])])]),_c('div',{staticClass:\"col-sm-7\"},[_c('p',[_c('span',[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.flow-builder-info-1'))+\" \")]),_c('span',[_c('a',{staticClass:\"blue-link\",class:{'d-none': !_vm.isExtraContentHidden},attrs:{\"href\":\"#\"},on:{\"click\":_vm.showExtraContent}},[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.learn-more')))])]),_c('span',{ref:\"extra-content-1\",class:{'d-none': _vm.isExtraContentHidden}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.flow-builder-info-2'))+\" \")])]),_c('p',{ref:\"extra-content-2\",class:{'d-none': _vm.isExtraContentHidden}},[_c('span',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.flow-builder-info-3-pt-1')))]),_vm._m(0),_c('span',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.flow-builder-info-3-pt-2')))]),_c('a',{staticClass:\"blue-link\",attrs:{\"href\":\"#\"},on:{\"click\":_vm.hideExtraContent}},[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.less')))])]),_c('p',[_c('b',[_c('a',{staticClass:\"mt-3 mr-2 active\",attrs:{\"href\":\"https://github.com/FLOIP/flow-builder\",\"title\":_vm.trans('flow-builder.flow-builder-documentation')}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.flow-builder-documentation'))+\" \")])])]),_c('p',[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.flow-builder-info-4'))+\" \"),_vm._m(1)])])])])])])])])])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('b',[_c('a',{attrs:{\"href\":\"https://flowinterop.org/\"}},[_vm._v(\"https://flowinterop.org/\")])])\n},function (){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('b',[_c('a',{attrs:{\"href\":\"https://flowinteroperability.slack.com\"}},[_vm._v(\"flowinteroperability.slack.com\")])])\n}]\n\nexport { render, staticRenderFns }","\nimport Lang from '@/lib/filters/lang'\nimport Routes from '@/lib/mixins/Routes'\nimport {Component, Prop} from 'vue-property-decorator'\nimport {forEach, isEmpty} from 'lodash'\nimport {mixins} from 'vue-class-component'\nimport {store} from '@/store'\nimport {Getter, Mutation, namespace} from 'vuex-class'\nimport {IFlow} from '@floip/flow-runner'\n\nconst flowVuexNamespace = namespace('flow')\n\n@Component({})\nclass Home extends mixins(Lang, Routes) {\n  @Prop({default: () => ({})}) readonly appConfig!: object\n  @Prop({default: () => ({})}) readonly builderConfig!: object\n\n  isExtraContentHidden = true\n\n  showExtraContent(e: KeyboardEvent): void {\n    e.preventDefault()\n    this.isExtraContentHidden = false\n  }\n\n  hideExtraContent(e: KeyboardEvent): void {\n    e.preventDefault()\n    this.isExtraContentHidden = true\n  }\n\n  @flowVuexNamespace.State flows!: IFlow[]\n  @Mutation configure!: ({appConfig, builderConfig}: { appConfig: object, builderConfig: object }) => void\n  @Getter isConfigured!: boolean\n\n  async beforeCreate(): Promise<void> {\n    const {$store} = this\n\n    forEach(store.modules, (v, k) => !$store.hasModule(k) && $store.registerModule(k, v))\n  }\n\n  async created(): Promise<void> {\n    if ((!isEmpty(this.appConfig) && !isEmpty(this.builderConfig)) || !this.isConfigured) {\n      this.configure({appConfig: this.appConfig, builderConfig: this.builderConfig})\n    }\n  }\n}\n\nexport default Home\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/@vue/cli-plugin-typescript/node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/@vue/cli-plugin-typescript/node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=7be6489a&\"\nimport script from \"./Home.vue?vue&type=script&lang=ts&\"\nexport * from \"./Home.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&id=7be6489a&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/* global Backbone */\nimport _ from 'lodash'\n\nwindow.app = window.app || {};\n\n(function (jQ) {\n  app.ui = app.ui || {}\n  app.ui.changes = 0\n\n  app.ui.saveTimer = app.ui.saveTimer || 60\n  app.ui.isSaveCurrentlyInProgress = false\n\n  app.ui.removeClassPrefix = function (blockClassName) {\n    return blockClassName.substr(11)\n  }\n\n  app.ui.change = function (textNotification) {\n    console.log('app.ui.change', textNotification)\n\n    const {selectedBlock} = builder.$store.getters\n\n    if (!selectedBlock) {\n      return\n    }\n\n    // Temporary legacy fix for when some customData properties are not reactive by default\n    // because they don't yet exist in `15-trees-block-defaults.js`\n    selectedBlock.customData = _.extend({}, selectedBlock.customData)\n  }\n\n  app.ui.noChange = function () {\n    console.log('app.ui.nochange')\n  }\n\n  app.ui.changeLock = function () {\n    app.ui.changes = -1\n  }\n\n  app.ui.findSubscriberPropertyField = function (search) {\n    return _.find(app.ui.subscriberPropertyFields, search) || null\n  }\n\n  app.dataControl = {}\n  app.dataControl.send = function () {\n    if (!builder.$store.getters.isFeatureTreeSaveEnabled) {\n      console.info('Feature `treeSave` is disabled')\n      return\n    }\n\n    const outputData = JSON.stringify(app.tree)\n\n    const treeId = app.tree.get('id')\n    if (app.ui.isSaveCurrentlyInProgress === true) {\n      console.log('Save currently in progress')\n      return\n    }\n\n    const treeUpdatedConflict = builder.$store.state.trees.ui.treeUpdateConflict\n    app.ui.isSaveCurrentlyInProgress = true\n\n    app.audioChoice.setTopUpdatesBar(Lang.trans('trees.saving-tree'))\n    app.dataControl._setValidationResultsForUI([])\n\n    const requestData = {\n      data: outputData,\n    }\n    if (treeUpdatedConflict !== null) {\n      console.log('Update not currently possible')\n      return false\n    }\n\n    const promise = jQ.post(`/ajax/trees/save/${treeId}`, requestData)\n      .done((response) => {\n        app.audioChoice.setTopUpdatesBar(Lang.trans('trees.tree-saved'), 1)\n        // the person has been logged out\n        if (typeof (response) !== 'object') {\n          // spawn the modal\n          jQ('#myModal')\n            .modal({show: true, backdrop: 'static'})\n        }\n\n        app.ui.isSaveCurrentlyInProgress = false\n        app.dataControl._setValidationResultsForUI(response.validation_results)\n\n        // used to detect changes in vuejs\n\n        app.ui.previousTreeJson = outputData\n        app.ui.noChange()\n\n        app.tree.updateFloipAlert()\n      })\n      .fail((response) => {\n        if (response.status === 409) {\n          // Dispatch an action to prevent further tree update until page is refreshed\n          const payload = {\n            treeUpdateConflict: {\n              tree_id: treeId,\n              message: response.responseJSON.message,\n            },\n          }\n          builder.$store.dispatch('setTreeUpdateConflictStatus', payload)\n        } else {\n          console.error(response)\n          app.audioChoice.setTopUpdatesBar(Lang.trans('trees.error-while-saving-tree'), 1)\n        }\n      })\n      .always(() => {\n        app.ui.isSaveCurrentlyInProgress = false\n      })\n\n    // Create Adapter from jQuery-promise-api to ES6-promise-api\n    // so that it can be chained into vuex actions\n    return _.defaults(promise, {\n      then: promise.done,\n      catch: promise.fail,\n      finally: promise.always,\n    })\n  }\n\n  app.dataControl._setValidationResultsForUI = function (validationResults) {\n    app.ui.validationResults = validationResults || []\n  }\n\n  app.exportOptionsModal = {}\n  app.exportOptionsModal.initialize = function () {\n    const exportOptionsTemplate = _.template(JST['legacy/templates/export-options-template.html'])\n\n    jQ('body')\n      .append(exportOptionsTemplate())\n\n    jQ('.tree-export-options-input')\n      .change((e) => {\n        app.exportOptionsModal.handleInput(e)\n      })\n\n    // Select the URL box text if clicked\n    jQ('.tree-export-options-download-api-url')\n      .focus(function () {\n        this.select()\n      })\n\n    // Add datepickers for the time boxes\n    jQ('.tree-export-options-input-datepicker')\n      .datetimepicker({\n        pickTime: false,\n      })\n    jQ('.tree-export-options-input-datepicker')\n      .on('dp.change', (e) => {\n        jQ(e.currentTarget)\n          .trigger('change')\n      })\n\n    // Kickoff the process to build the link URL!\n    jQ('.tree-export-options-input')\n      .first()\n      .trigger('change')\n  }\n\n  app.exportOptionsModal.open = function () {\n    if (jQ('#export-options-modal').length == 0) {\n      app.exportOptionsModal.initialize()\n    }\n\n    // Show the modal.\n    jQ('#export-options-modal')\n      .modal()\n  }\n\n  app.exportOptionsModal.handleInput = function (e) {\n    const value = jQ(e.currentTarget)\n      .val()\n    const key = jQ(e.currentTarget)\n      .attr('data-export-options-key')\n\n    if (key == 'dateFilter') {\n      if (value == '1') {\n        jQ('.export-options-date-filter-container')\n          .show()\n      } else {\n        jQ('.export-options-date-filter-container')\n          .hide()\n\n        // Reset the values so they don't get serialized if hidden\n        jQ('.tree-export-options-input[data-export-options-key=callsAfter]')\n          .val('')\n        jQ('.tree-export-options-input[data-export-options-key=callsBefore]')\n          .val('')\n      }\n    }\n\n    jQ('.tree-export-options-download-link')\n      .attr('href', app.exportOptionsModal.buildUrl())\n    jQ('.tree-export-options-download-api-url')\n      .val(app.exportOptionsModal.buildUrl(1))\n  }\n\n  app.exportOptionsModal.buildUrl = function (isApiUrl) {\n    let url = `/trees/${app.ui.treeId}/exportcsv?`\n\n    if (isApiUrl) {\n      url = `${window.location.protocol}//${window.location.host}/api/v1/trees/${app.ui.treeId}/csvexport/direct?`\n    }\n\n    url += jQ('.tree-export-options-input')\n      .serialize()\n\n    if (isApiUrl) {\n      url += `&api_key=${app.ui.apiKey}`\n    }\n\n    return url\n  }\n\n  // Initial version of the shareable link modal,\n  // for a specific single tree:\n  app.shareableLinkModal = {}\n  app.shareableLinkModal.initialize = function () {\n    const shareableLinkTemplate = _.template(JST['legacy/templates/shareable-link-template.html'])\n\n    jQ('body')\n      .append(shareableLinkTemplate())\n\n    // Select the URL box text if clicked\n    jQ('.tree-shareable-link-url')\n      .focus(function () {\n        this.select()\n      })\n\n    // Assign button clicks\n    jQ('.tree-shareable-link-generate-button')\n      .on('click', (e) => {\n        app.shareableLinkModal.sendRequest('create')\n      })\n    jQ('.tree-shareable-link-delete-button')\n      .on('click', (e) => {\n        app.shareableLinkModal.switchView('delete')\n      })\n    jQ('.tree-shareable-link-delete-confirm-button')\n      .on('click', (e) => {\n        app.shareableLinkModal.sendRequest('delete')\n      })\n    jQ('.tree-shareable-link-delete-cancel-button')\n      .on('click', (e) => {\n        app.shareableLinkModal.switchView('edit')\n      })\n\n    if (app.ui.publicId) {\n      // If there's already a public ID, then show the \"edit\" view\n      app.shareableLinkModal.setUrl()\n      app.shareableLinkModal.switchView('edit')\n    } else {\n      app.shareableLinkModal.switchView('new')\n    }\n  }\n\n  app.shareableLinkModal.switchView = function (view) {\n    jQ('.shareable-link-delete')\n      .hide()\n    jQ('.shareable-link-edit')\n      .hide()\n    jQ('.shareable-link-new')\n      .hide()\n    jQ(`.shareable-link-${view}`)\n      .show()\n  }\n\n  app.shareableLinkModal.open = function (e) {\n    if (jQ('#shareable-link-modal').length == 0) {\n      app.shareableLinkModal.initialize()\n    }\n\n    // Show the modal.\n    jQ('#shareable-link-modal')\n      .modal()\n  }\n\n  app.shareableLinkModal.buildUrl = function () {\n    let url = ''\n    if (app.ui.publicId) {\n      url = `${window.location.protocol}//${window.location.host}/share/a/trees/${app.ui.publicId}`\n    }\n    return url\n  }\n\n  app.shareableLinkModal.setUrl = function () {\n    const url = app.shareableLinkModal.buildUrl()\n    jQ('.tree-shareable-link-url')\n      .val(url)\n    jQ('.tree-shareable-link-url-link')\n      .attr('href', url)\n  }\n\n  app.shareableLinkModal.sendRequest = function (requestType) {\n    jQ.post(`/ajax/trees/updateshareablelink/${app.ui.treeId}`, {type: requestType})\n      .done((response) => {\n        if (response) {\n          // New one!\n          app.ui.publicId = response\n\n          app.shareableLinkModal.setUrl()\n          app.shareableLinkModal.switchView('edit')\n        } else {\n          app.ui.publicId = ''\n          app.shareableLinkModal.switchView('new')\n        }\n\n        return true\n      })\n      .fail((response) => {\n        const errorMessage = response.responseJSON || 'Error while updating shareable link...'\n        app.audioChoice.setTopUpdatesBar(errorMessage, 1)\n      })\n  }\n\n  // Updated version of the shareable link modal,\n  // for tree sets rather than specific trees!\n\n  app.shareableLinkSetsModal = {}\n  app.shareableLinkSetsModal.initialize = function () {\n    const shareableLinkTemplate = _.template(JST['legacy/templates/shareable-link-sets-template.html'])\n\n    jQ('body')\n      .append(shareableLinkTemplate({\n        defaultLocales: builder.$store.state.defaultLocales,\n        orgEnabledLanguages: builder.$store.state.orgEnabledLanguages,\n      }))\n\n    // Assign button clicks\n    jQ('.tree-shareable-link-sets-generate-button')\n      .on('click', (e) => {\n        app.shareableLinkSetsModal.sendRequest('create')\n      })\n\n    jQ('input[name=shouldUseCustomBlockOrdering]')\n      .on('click', function () {\n        if (jQ(this)\n          .is(':checked')) {\n          jQ('.block-ordinal')\n            .prop('disabled', false)\n        } else {\n          jQ('.block-ordinal')\n            .prop('disabled', true)\n        }\n      })\n\n    jQ('select[name=\\'lockDateRange\\']')\n      .on('change', function () {\n        if (this.value === '1') {\n          jQ('.hide-on-lockDateRange')\n            .hide()\n        } else {\n          jQ('.hide-on-lockDateRange')\n            .show()\n        }\n      })\n\n    // Initialize the second half with the list of existing links:\n    app.shareableLinkSetsModal.initializeLinksList()\n  }\n\n  app.shareableLinkSetsModal.initializeLinksList = function () {\n    const shareableLinkListTemplate = _.template(JST['legacy/templates/shareable-link-sets-list-template.html'])\n    jQ('.shareable-link-sets-list-container')\n      .html(shareableLinkListTemplate)\n\n    jQ('.tree-shareable-link-sets-delete-button')\n      .on('click', (e) => {\n        app.shareableLinkSetsModal.switchToDeleteView(e)\n      })\n    jQ('.tree-shareable-link-sets-delete-confirm-button')\n      .on('click', (e) => {\n        const shareableLinkHash = jQ(e.currentTarget)\n          .attr('data-link-hash')\n        app.shareableLinkSetsModal.sendRequest('delete', shareableLinkHash)\n      })\n    jQ('.tree-shareable-link-sets-delete-cancel-button')\n      .on('click', (e) => {\n        app.shareableLinkSetsModal.switchAwayFromDeleteView(e)\n      })\n  }\n\n  app.shareableLinkSetsModal.switchToDeleteView = function (e) {\n    const shareableLinkId = jQ(e.currentTarget)\n      .attr('data-link-id')\n    const listElement = jQ(`.shareable-link-item-div[data-link-id=${shareableLinkId}]`)\n\n    if (jQ(listElement)\n      .hasClass('list-group-item-danger')) {\n      app.shareableLinkSetsModal.switchAwayFromDeleteView(e)\n    } else {\n      jQ(listElement)\n        .addClass('list-group-item-danger')\n      jQ(listElement)\n        .children('.shareable-link-item-div-delete')\n        .show()\n    }\n  }\n\n  app.shareableLinkSetsModal.switchAwayFromDeleteView = function (e) {\n    const shareableLinkId = jQ(e.currentTarget)\n      .attr('data-link-id')\n    const listElement = jQ(`.shareable-link-item-div[data-link-id=${shareableLinkId}]`)\n\n    jQ(listElement)\n      .removeClass('list-group-item-danger')\n    jQ(listElement)\n      .children('.shareable-link-item-div-delete')\n      .hide()\n  }\n\n  app.shareableLinkSetsModal.open = function (e) {\n    if (jQ('#shareable-link-sets-modal').length == 0) {\n      app.shareableLinkSetsModal.initialize()\n    }\n\n    // Re-set the labels\n    app.shareableLinkSetsModal.setLabelValues()\n\n    // Show the modal.\n    jQ('#shareable-link-sets-modal')\n      .modal()\n  }\n\n  app.shareableLinkSetsModal.setLabelValues = function () {\n    // TODO - use another mini-template for these guys rather than updating text values with jQuery.\n    const startDateLabel = app.startDate.format('MMMM D, YYYY')\n    const endDateLabel = app.endDate.format('MMMM D, YYYY')\n    const channelLabel = app.labels.channel\n    const blocksLabel = app.labels.blocks\n\n    if (app.params.versionFiltersEnabled) {\n      jQ('.shareable-link-sets-versions-label')\n        .show()\n    } else {\n      jQ('.shareable-link-sets-versions-label')\n        .hide()\n    }\n\n    if (app.params.noValidDateRange) {\n      jQ('.shareable-link-sets-date-range-labels')\n        .hide()\n      jQ('.shareable-link-sets-date-range-all-time-label')\n        .show()\n    } else {\n      jQ('span.sl-label-start-date')\n        .text(startDateLabel)\n      jQ('span.sl-label-end-date')\n        .text(endDateLabel)\n    }\n\n    jQ('span.sl-label-channel')\n      .text(channelLabel)\n    jQ('span.sl-label-blocks')\n      .text(blocksLabel)\n\n    jQ('span.sl-label-versions')\n      .text(`${app.labels.versionsSelected} of ${app.labels.versionsTotal}`)\n  }\n\n  app.shareableLinkSetsModal.buildUrl = function (public_hash) {\n    let url = ''\n    if (public_hash) {\n      url = `${window.location.protocol}//${window.location.host}/share/a/trees/${public_hash}`\n    }\n    return url\n  }\n\n  app.shareableLinkSetsModal.sendRequest = function (requestType, shareableLinkHash) {\n    if (requestType == 'delete') {\n      var sendRequest = {\n        requestType,\n        shareableLinkHash,\n      }\n    } else {\n      var sendRequest = {\n        requestType,\n        channelFilter: app.params.channelFilter,\n        includedBlocks: app.params.includedBlocks,\n        excludedBlocks: app.params.excludedBlocks,\n        blockKeys: app.blockKeys,\n        hiddenDirectorySelectionFields: app.params.hiddenDirectorySelectionFields,\n        lockDateRange: _.parseInt(jQ('.shareable-link-sets-input[name=lockDateRange]')\n          .val()),\n        resultsLocale: jQ('.shareable-link-sets-input[name=resultsLocale]')\n          .val(),\n        showKeyMetrics: jQ('.shareable-link-sets-input[name=showKeyMetrics]')\n          .is(':checked') ? '1' : '0',\n        showBlockType: jQ('.shareable-link-sets-input[name=showBlockType]')\n          .is(':checked') ? '1' : '0',\n        shouldShowResultsFromIncompleteEngagements: jQ('.shareable-link-sets-input[name=shouldShowResultsFromIncompleteEngagements]')\n          .is(':checked') ? '1' : '0',\n        shouldOnlyShowLatestResultPerSession: jQ('.shareable-link-sets-input[name=shouldOnlyShowLatestResultPerSession]')\n          .is(':checked') ? '1' : '0',\n        shouldUseSimpleDatePicker: jQ('.shareable-link-sets-input[name=shouldUseSimpleDatePicker]')\n          .is(':checked') ? '1' : '0',\n        shouldUseCustomBlockOrdering: jQ('.shareable-link-sets-input[name=shouldUseCustomBlockOrdering]')\n          .is(':checked') ? '1' : '0',\n        enabledTabs: jQ('input[name=enabledTabs]:checked')\n          .map((i, el) => jQ(el)\n            .val())\n          .get(),\n        tagFilter: jQ('input[name=tagFilter]:checked')\n          .map((i, el) => jQ(el)\n            .val())\n          .get(),\n        directorySelectionFieldFilter: jQ('input[name=directorySelectionFieldFilter]:checked')\n          .map((i, el) => jQ(el)\n            .val())\n          .get(),\n        blockChoiceFilter: jQ('input[name=blockChoiceFilter]:checked')\n          .map((i, el) => jQ(el)\n            .val())\n          .get(),\n        filterDisplayThreshold: jQ('input[name=filterDisplayThreshold]')\n          .val(),\n      }\n\n      if (jQ('.shareable-link-sets-input[name=shouldUseCustomBlockOrdering]')\n        .is(':checked')) {\n        sendRequest.customBlockOrder = _.reduce(\n          jQ('.block-ordinal')\n            .toArray(),\n          (memo, el) => {\n            memo[jQ(el)\n              .data('js-key')] = jQ(el)\n              .val()\n            return memo\n          },\n          {},\n        )\n      }\n\n      if (app.params.noValidDateRange == false) {\n        sendRequest.startDate = app.startDate.format('YYYY-MM-DD')\n        sendRequest.endDate = app.endDate.format('YYYY-MM-DD')\n      }\n\n      if (app.params.versionFiltersEnabled) {\n        sendRequest.versions = app.params.versions\n      }\n    }\n\n    jQ.post(`/ajax/treeversionsets/updateshareablelink/${app.tree_version_set_id}`, {data: sendRequest})\n      .done((response) => {\n        if (requestType == 'delete') {\n          if (response == 1) {\n            // Remove the entry with that hash from the local JS list\n            app.shareableLinks = _.without(\n              app.shareableLinks,\n              _.findWhere(app.shareableLinks, {public_hash: shareableLinkHash}),\n            )\n            // Initialize the second half with the list of existing links:\n            app.shareableLinkSetsModal.initializeLinksList()\n          }\n        } else {\n          // Add the new response to the start of the shareable links array:\n          app.shareableLinks.unshift(response)\n\n          // Initialize the second half with the list of existing links:\n          app.shareableLinkSetsModal.initializeLinksList()\n        }\n        return true\n      })\n      .fail((response) => {\n        const errorMessage = response.responseJSON || 'Error while updating shareable link...'\n        app.audioChoice.setTopUpdatesBar(errorMessage, 1)\n      })\n  }\n\n  // csvExports modal helper functions\n  app.csvExportsModal = {}\n  app.csvExportsModal.initialize = function () {\n    const csvExportTemplate = _.template(JST['legacy/templates/combined-csv-export-template.html'])\n\n    jQ('body')\n      .append(csvExportTemplate())\n\n    // Assign button clicks\n    jQ('.tree-csv-exports-generate-button')\n      .on('click', (e) => {\n        app.csvExportsModal.sendCreateRequest()\n      })\n\n    // var to check when default\n    let setToDefault = true\n    // set recipes – a string of values of customisable fields\n    // headings-cells-mcq-messages\n    const recipeHumanReadable = '0000'\n    const recipeMachineReadable = '1112'\n    let recipeUserCustomised = null\n\n    // get selected options for export from users\n    function getUserOptionsRecipe() {\n      const fhd = (jQ('.csv-exports-option-format-headings')\n        .val()) ? jQ('.csv-exports-option-format-headings')\n        .val() : '0'\n      const fcc = (jQ('.csv-exports-option-format-cells')\n        .val()) ? jQ('.csv-exports-option-format-cells')\n        .val() : '0'\n      const vcq = (jQ('.csv-exports-option-values-mcq')\n        .val()) ? jQ('.csv-exports-option-values-mcq')\n        .val() : '0'\n      const vms = (jQ('.csv-exports-option-values-messages')\n        .val()) ? jQ('.csv-exports-option-values-messages')\n        .val() : '0'\n\n      return fhd + fcc + vcq + vms\n    }\n\n    // remove active class from all\n    jQ('[class*=csv-exports-btn-format-]')\n      .click(() => {\n        jQ('[class*=csv-exports-btn-format-]')\n          .removeClass('btn-primary active')\n          .addClass('btn-secondary')\n      })\n\n    // when human-readable is selected\n    jQ('.csv-exports-btn-format-human')\n      .click(function () {\n        setToDefault = false\n        jQ(this)\n          .addClass('btn-primary active')\n          .removeClass('btn-secondary')\n        jQ('.csv-exports-option-format-headings option')\n          .eq('0')\n          .prop('selected', 'selected')\n        jQ('.csv-exports-option-format-cells option')\n          .eq('0')\n          .prop('selected', 'selected')\n        jQ('.csv-exports-option-values-mcq option')\n          .eq('0')\n          .prop('selected', 'selected')\n        jQ('.csv-exports-option-values-messages option')\n          .eq('0')\n          .prop('selected', 'selected')\n      })\n\n    // when machine-readable is selected\n    jQ('.csv-exports-btn-format-machine')\n      .click(function () {\n        setToDefault = false\n        jQ(this)\n          .addClass('btn-primary active')\n          .removeClass('btn-secondary')\n        jQ('.csv-exports-option-format-headings option')\n          .eq('1')\n          .prop('selected', 'selected')\n        jQ('.csv-exports-option-format-cells option')\n          .eq('1')\n          .prop('selected', 'selected')\n        jQ('.csv-exports-option-values-mcq option')\n          .eq('1')\n          .prop('selected', 'selected')\n        jQ('.csv-exports-option-values-messages option')\n          .eq('2')\n          .prop('selected', 'selected')\n      })\n\n    // when custom is selected\n    jQ('.csv-exports-btn-format-custom')\n      .click(function () {\n        setToDefault = false\n        jQ(this)\n          .addClass('btn-primary active')\n          .removeClass('btn-secondary')\n      })\n\n    // when we are to use default – use human-readable\n    if (setToDefault) {\n      jQ('.csv-exports-btn-format-human')\n        .trigger('click')\n    }\n\n    // on change check what options have been selected\n    jQ('[class*=csv-exports-option-]')\n      .change(() => {\n        setToDefault = false\n        recipeUserCustomised = getUserOptionsRecipe()\n\n        // if customRecipe is neither machine-readable NOR human-readable then it is custom\n        if (recipeUserCustomised) {\n          if (recipeUserCustomised == recipeHumanReadable) {\n            jQ('.csv-exports-btn-format-human')\n              .trigger('click')\n          } else if (recipeUserCustomised == recipeMachineReadable) {\n            jQ('.csv-exports-btn-format-machine')\n              .trigger('click')\n          } else {\n            setToDefault = false\n            jQ('[class*=csv-exports-btn-format-]')\n              .removeClass('btn-primary active')\n              .addClass('btn-secondary')\n            jQ('.csv-exports-btn-format-custom')\n              .addClass('btn-primary active')\n              .removeClass('btn-secondary')\n          }\n        }\n      })\n\n    // Initialize the second half with the list of existing links:\n    app.csvExportsModal.initializeLinksList()\n  }\n\n  app.csvExportsModal.initializeLinksList = function () {\n    if (typeof app.csvExportsModal.shareableLinkListTemplate === 'undefined') {\n      app.csvExportsModal.shareableLinkListTemplate = _.template(JST['legacy/templates/combined-csv-export-list-template.html'])\n    }\n    jQ('.csv-exports-list-container')\n      .html(app.csvExportsModal.shareableLinkListTemplate())\n    app.csvExportsModal.queueInProgress()\n  }\n\n  app.csvExportsModal.open = function (e) {\n    if (jQ('#combined-csv-export-modal').length == 0) {\n      app.csvExportsModal.initialize()\n    }\n\n    app.csvExportsModal.setLabelValues()\n    jQ('#combined-csv-export-modal')\n      .modal()\n  }\n\n  app.csvExportsModal.setLabelValues = function () {\n    // TODO - use another mini-template for these guys, rather than updating text values with jQuery.\n    const startDateLabel = app.startDate.format('MMMM D, YYYY')\n    const endDateLabel = app.endDate.format('MMMM D, YYYY')\n    const channelLabel = app.labels.channel\n    const blocksLabel = app.labels.blocks\n\n    if (app.params.versionFiltersEnabled) {\n      jQ('.export-version-sets-versions-label')\n        .show()\n    } else {\n      jQ('.export-version-sets-versions-label')\n        .hide()\n    }\n\n    if (app.params.noValidDateRange) {\n      jQ('.csv-exports-date-range-labels')\n        .hide()\n      jQ('.csv-exports-date-range-all-time-label')\n        .show()\n    } else {\n      jQ('span.sl-label-start-date')\n        .text(startDateLabel)\n      jQ('span.sl-label-end-date')\n        .text(endDateLabel)\n    }\n\n    jQ('span.sl-label-channel')\n      .text(channelLabel)\n    jQ('span.sl-label-blocks')\n      .text(blocksLabel)\n\n    jQ('span.sl-label-versions')\n      .text(`${app.labels.versionsSelected} of ${app.labels.versionsTotal}`)\n  }\n\n  app.csvExportsModal.sendStatusRequest = function () {\n    jQ.ajax({\n      url: `/ajax/treeversionsets/csvexportstatus/${app.tree_version_set_id}`,\n      type: 'GET',\n      dataType: 'json',\n      success(response) {\n        app.csvExports = response\n        app.csvExportsModal.initializeLinksList()\n      },\n    })\n  }\n\n  app.csvExportsModal.sendCreateRequest = function () {\n    const sendRequest = {\n      channelFilter: app.params.channelFilter,\n      includedBlocks: app.params.includedBlocks,\n      excludedBlocks: app.params.excludedBlocks,\n      blockKeys: app.blockKeys,\n      order: jQ('.csv-exports-input[name=order]')\n        .val(),\n      formatHeadings: jQ('.csv-exports-input[name=formatHeadings]')\n        .val(),\n      cellContents: jQ('.csv-exports-input[name=cellContents]')\n        .val(),\n      messageBlockPercent: jQ('.csv-exports-input[name=messageBlockPercent]')\n        .val(),\n      formatMCQResponses: jQ('.csv-exports-input[name=formatMCQResponses]')\n        .val(),\n      treeVersionIds: app.params.versions,\n      mergeOption: jQ('.csv-exports-input[name=mergeOption]')\n        .val(),\n      useLocalTimezone: jQ('.csv-exports-input[name=useLocalTimezone]')\n        .val(),\n      useExcelFormat: jQ('.csv-exports-input[name=useExcelFormat]')\n        .val(),\n    }\n\n    if (app.params.noValidDateRange == false) {\n      sendRequest.startDate = app.startDate.format('YYYY-MM-DD')\n      sendRequest.endDate = app.endDate.format('YYYY-MM-DD')\n    }\n\n    const treeVersionSetId = app.tree_version_set_id\n\n    // time of export click\n\n    const then = moment()\n    // Re-enable time will be after 5s\n    const thenAfter5s = then.clone()\n      .add(5, 'seconds')\n    jQ('.tree-csv-exports-generate-button')\n      .prop('disabled', true)\n    jQ.post(`/ajax/treeversionsets/csvexportstart/${treeVersionSetId}`, {data: sendRequest})\n      .done((response) => {\n        app.csvExports = response\n        app.csvExportsModal.initializeLinksList()\n        return true\n      })\n      .fail((response) => {\n        console.error(response)\n        app.audioChoice.setTopUpdatesBar('Error while sending CSV request...', 1)\n      })\n      .always((response) => {\n        // Re-enable the export button\n        // Estimate the right delay in case the request has been processed in less than 5s\n        const delay = moment.duration(thenAfter5s.diff(moment()))\n        const delayInMilliseconds = delay > 0 ? delay.asMilliseconds() : 0\n        _.delay(() => {\n          jQ('.tree-csv-exports-generate-button')\n            .prop('disabled', false)\n        }, delayInMilliseconds)\n      })\n  }\n\n  app.csvExportsModal.queueInProgress = function () {\n    const firstExportInProgress = _.find(app.csvExports, {upload_status: 0})\n\n    // If necessary, create a de-bounced version of the Ajax status check function\n    if (_.isFunction(app.csvExportsModal.sendStatusRequestDebounced) == false) {\n      app.csvExportsModal.sendStatusRequestDebounced = _.debounce(app.csvExportsModal.sendStatusRequest, 1000)\n    }\n\n    if (firstExportInProgress) {\n      _.delay(app.csvExportsModal.sendStatusRequestDebounced, 0.5 * 1000)\n    }\n  }\n\n  app.blockResultsLoader = {}\n  app.blockResultsLoader.load = function () {\n    const nextBlockKeyToLoad = jQ('.tree-results-block-container[data-is-loaded=0]')\n      .first()\n      .attr('id')\n\n    jQ('.tree-results-loading-indicators')\n      .show()\n\n    if (nextBlockKeyToLoad) {\n      app.blockResultsLoader.loadBlock(nextBlockKeyToLoad, 1)\n    } else {\n      jQ('.tree-results-loading-indicators')\n        .hide()\n    }\n  }\n\n  app.blockResultsLoader.assignButtons = function (parentElement) {\n    jQ(parentElement)\n      .find('.result-view-control-tab')\n      .on('click', (e) => {\n        const targetType = jQ(e.currentTarget)\n          .attr('data-tab-option')\n        jQ(parentElement)\n          .find('.tree-results-item-tabs')\n          .hide()\n        jQ(parentElement)\n          .find(`.tree-results-item-${targetType}`)\n          .show()\n      })\n    jQ(parentElement)\n      .find('.result-view-control-tab')\n      .first()\n      .trigger('click')\n  }\n\n  app.blockResultsLoader.loadBlock = function (blockKey, continueLoading) {\n    let url\n    if (app.shareableLink) {\n      url = window.location.pathname\n\n      // Check if there's already a query string\n      if (window.location.search) {\n        url += `${window.location.search}&blockKey=${blockKey}`\n      } else {\n        url += `?blockKey=${blockKey}`\n      }\n    } else {\n      url = `/ajax/trees/set/${app.tree_version_set_id}/results/${blockKey}${window.location.search}`\n    }\n\n    jQ.ajax({\n      url,\n      type: 'GET',\n      dataType: 'json',\n      success(data) {\n        if (data.htmlOutput) {\n          // Place the HTML output into the container DIV\n          // TODO - this should actually use client-side templates, once the item results template is converted back.\n          _.each(data.htmlOutput, (value, key) => {\n            jQ(`#${key}`)\n              .attr('data-is-loaded', 1)\n              .html(value)\n\n            // Assign buttons for tab switching:\n            app.blockResultsLoader.assignButtons(jQ(`#${key}`))\n          })\n\n          // Generate Chart.js-based charts:\n          app.chartJsHelper.createCharts()\n\n          if (continueLoading) {\n            // Check if there are more blocks to load!\n            app.blockResultsLoader.load()\n          }\n        }\n      },\n    })\n  }\n\n  app.blockResultsLoaderV2 = {}\n  app.blockResultsLoaderV2.loadKeyMetrics = function () {\n    let url\n\n    if (app.shareableLink) {\n      // Check if there's already a query string\n      url = window.location.search\n        ? `${window.location.pathname + window.location.search}&keymetrics=1`\n        : `${window.location.pathname}?keymetrics=1`\n    } else {\n      url = `/ajax/trees/set/${app.tree_version_set_id}/results/keymetrics${window.location.search}`\n    }\n\n    jQ.post(url, {filterSet: _.get(viamo, '$store.state.publicApp.filterSet', [])})\n      .done((keymetrics) => {\n        if (keymetrics) {\n          app.blockResultsLoaderV2.loadDonutChart(\n            'connected',\n            keymetrics.finishedDeliveryLogCount,\n            keymetrics.deliveryLogCount,\n          )\n          jQ('#print-connected-values')\n            .html(`${keymetrics.finishedDeliveryLogCount} Connected of ${keymetrics.deliveryLogCount} Calls`)\n\n          app.blockResultsLoaderV2.loadDonutChart(\n            'completed',\n            keymetrics.completedDeliveryLogCount,\n            keymetrics.deliveryLogCount,\n          )\n          jQ('#print-completed-values')\n            .html(`${keymetrics.completedDeliveryLogCount} Completed of ${keymetrics.deliveryLogCount} Calls`)\n\n          app.blockResultsLoaderV2.loadDonutChart(\n            'unique',\n            keymetrics.uniqueSubscriberCount,\n            keymetrics.deliveryLogCount,\n          )\n          jQ('#print-unique-value')\n            .html(`${keymetrics.uniqueSubscriberCount} Unique Subscribers`)\n\n          app.blockResultsLoaderV2.loadDonutChart(\n            'firsttime',\n            keymetrics.firstTimeSubscriberCount,\n            keymetrics.uniqueSubscriberCount,\n          )\n          jQ('#print-firsttime-value')\n            .html(`${keymetrics.firstTimeSubscriberCount} First Time Subscribers`)\n\n          app.blockResultsLoaderV2.loadDonutChart('answered', keymetrics.completedQuestionCount, 0)\n          jQ('#print-answered-value')\n            .html(`${keymetrics.completedQuestionCount} Question Responses`)\n\n          if (jQ('#tree-results-keymetrics-durations').length > 0) {\n            app.blockResultsLoaderV2.loadAvgCallDurations(keymetrics)\n          }\n        }\n      })\n      .fail((response) => {\n        console.error(response)\n        jQ('.doughnut-charts-row')\n          .html(`<h4 class=\"text-danger text-center\">${JSON.parse(response.responseText)}</h4>`)\n      })\n  }\n\n  app.blockResultsLoaderV2.loadDonutChart = function (keymetricName, chartNumerator, chartTotal) {\n    const chartDenominator = (chartTotal === 0) ? 0 : chartTotal - chartNumerator\n\n    const chartDataSets = {\n      labels: [\n        '',\n        '',\n      ],\n      datasets: [\n        {\n          data: [\n            chartNumerator,\n            chartDenominator,\n          ],\n          backgroundColor: [\n            '#333',\n            '#999',\n          ],\n          hoverBackgroundColor: [\n            '#333',\n            '#999',\n          ],\n          borderColor: [\n            '#333',\n            '#999',\n          ],\n        },\n      ],\n    }\n\n    jQ(`#tree-results-loading-indicator-doughnut-${keymetricName}`)\n      .hide()\n\n    app.chartJsHelper.updateTreeDoughnutChart(`v-chart-tree-doughnut-${keymetricName}`, chartDataSets)\n\n    // Set Chart's dynamic label as visible and set its span html with the value\n    if (chartTotal >= 0) {\n      jQ(`#tree-doughnut-total-${keymetricName}`)\n        .html(formatLargeNumber(chartTotal))\n        .parent()\n        .removeClass('hidden')\n    }\n  }\n\n  app.blockResultsLoaderV2.loadAvgCallDurations = function (durations) {\n    if (durations) {\n      // TODO what iv durationAvg or completedDurationAvg = 0 or don't exist?\n      jQ('#tree-results-duration-all')\n        .html(`${(durations.durationAvg / 60).toPrecision(2)} minutes`)\n      jQ('#tree-results-duration-completed')\n        .html(`${(durations.completedDurationAvg / 60).toPrecision(2)} minutes`)\n      jQ('#tree-results-keymetrics-duration')\n        .show()\n    }\n\n    jQ('#tree-results-loading-indicator-durations')\n      .hide()\n    jQ('.tree-results-duration-item')\n      .css('visibility', 'visible')\n  }\n\n  app.blockResultsLoaderV2.loadBlocksInteractionsChart = function () {\n    const barchartLabelsTruncated = []\n    const barchartLabels = []\n    const totalInteractionsBarchartData = []\n    const completedInteractionsBarchartData = []\n    const orderedCompletedInteractionsBarchartData = []\n    var totalInteractionsOrderedBarchartData = []\n    const colorIndexes = []\n    const orderedColorIndexes = []\n    const orderedBarchartLabelsTruncated = []\n    const orderedBarchartLabels = []\n    var totalInteractionsOrderedBarchartData = []\n\n    _.each(app.resultsData, (blockResult, key) => {\n      let truncatedBlockTitle\n      let resultIndex\n      let colorIndex\n      let totalInteractions\n      let completedInteractions\n      let\n        colorValue\n      const blockTitle = _.get(blockResult, 'details.title') || _.get(blockResult, 'classDetails.name') || ''\n\n      truncatedBlockTitle = blockTitle.length < 9 ? blockTitle : `${blockTitle.substring(0, 9)}...`\n      colorIndex = blockResult.colorIndex\n      colorValue = app.chartJsHelper.getChartChoiceColorsArray(colorIndex)[0]\n      totalInteractions = blockResult.totalInteractions\n\n      // outputKeys is either an empty array, or has one or more objects.\n      completedInteractions = blockResult.outputKeys.reduce((acc, val) => acc + val.outputKeyTotals, 0)\n\n      // Listing-ordered arrays\n      barchartLabels.push(blockTitle)\n      barchartLabelsTruncated.push(truncatedBlockTitle)\n      colorIndexes.push(colorValue)\n      totalInteractionsBarchartData.push(totalInteractions)\n      completedInteractionsBarchartData.push(completedInteractions)\n\n      // Popularity-ordered arrays. Callback fn applies descending order.\n      resultIndex = _.sortedIndex(orderedCompletedInteractionsBarchartData, completedInteractions, (i) => -i)\n      orderedBarchartLabels.splice(resultIndex, 0, blockTitle)\n      orderedBarchartLabelsTruncated.splice(resultIndex, 0, truncatedBlockTitle)\n      orderedColorIndexes.splice(resultIndex, 0, colorValue)\n      orderedCompletedInteractionsBarchartData.splice(resultIndex, 0, completedInteractions)\n      totalInteractionsOrderedBarchartData.splice(resultIndex, 0, totalInteractions)\n    })\n\n    app.chartJsHelper.updateTreeBlocksInteractionsChart('v-chart-tree-blocks-popularity', {\n      labels: orderedBarchartLabelsTruncated,\n      fullLabels: orderedBarchartLabels,\n      datasets: [\n        {\n          data: orderedCompletedInteractionsBarchartData,\n          backgroundColor: orderedColorIndexes,\n          borderColor: orderedColorIndexes,\n          borderWidth: 1,\n        },\n        {\n          hidden: true,\n          data: totalInteractionsOrderedBarchartData,\n          backgroundColor: orderedColorIndexes,\n          borderColor: orderedColorIndexes,\n          borderWidth: 1,\n        },\n      ],\n    })\n\n    app.chartJsHelper.updateTreeBlocksInteractionsChart('v-chart-tree-blocks-listing', {\n      labels: barchartLabelsTruncated,\n      fullLabels: barchartLabels,\n      datasets: [\n        {\n          data: completedInteractionsBarchartData,\n          backgroundColor: colorIndexes,\n          borderColor: colorIndexes,\n          borderWidth: 1,\n        },\n        {\n          hidden: true,\n          data: totalInteractionsBarchartData,\n          backgroundColor: colorIndexes,\n          borderColor: colorIndexes,\n          borderWidth: 1,\n        },\n      ],\n    })\n\n    app.blockResultsLoaderV2.assignButtons(jQ('#tree-summary-container'))\n  }\n\n  app.blockResultsLoaderV2.assignButtons = function (parentElement) {\n    jQ(parentElement)\n      .find('.tree-interactions-barcharts-toggle-button')\n      .on('click', (e) => {\n        const $buttonClicked = jQ(e.currentTarget)\n        const barchartTarget = $buttonClicked.attr('data-section-option')\n\n        if ($buttonClicked.hasClass('active')) {\n          return\n        }\n\n        $buttonClicked.siblings()\n          .removeClass('active')\n        $buttonClicked.addClass('active')\n\n        // Hide and show the relevant Bar Chart\n        jQ('canvas[id^=\\'v-chart-tree-blocks-\\']')\n          .hide()\n        jQ(`#v-chart-tree-blocks-${barchartTarget}`)\n          .show()\n\n        jQ('#order-by-active-label-print')\n          .html(`Order By: ${$buttonClicked.attr('aria-label')}`)\n\n        // Render any charts that haven't been rendered yet. Checks if data-generated==0 attribute.\n        app.chartJsHelper.createCharts()\n        jQ('#v-chart-tree-blocks-listing')\n          .removeClass('hidden')\n      })\n\n    jQ(parentElement)\n      .find('input[name=\"barchart-dataset-toggle\"]')\n      .on('click', (e) => {\n        const barchartDatasetTarget = jQ(e.currentTarget)\n          .attr('value')\n\n        // Note that the barchart-dataset-toggle Buttons are not specific to one Chart\n        const listingChart = app.chartJsHelper.chartObjects['v-chart-tree-blocks-listing']\n        const popularityChart = app.chartJsHelper.chartObjects['v-chart-tree-blocks-popularity']\n\n        const listingDatasets = listingChart.config.data.datasets\n        const popularityDatasets = popularityChart.config.data.datasets\n        const isEnteredSelected = barchartDatasetTarget == 'entered'\n        const isCompletedSelected = barchartDatasetTarget == 'completed'\n\n        if (isCompletedSelected) {\n          jQ('#tree-summary-barchart-title')\n            .html('Completed Interactions per Block')\n        } else {\n          jQ('#tree-summary-barchart-title')\n            .html('Entered Interactions per Block')\n        }\n\n        listingDatasets[0].hidden = isEnteredSelected\n        listingDatasets[1].hidden = isCompletedSelected\n        popularityDatasets[0].hidden = isEnteredSelected\n        popularityDatasets[1].hidden = isCompletedSelected\n\n        listingChart.update()\n        popularityChart.update()\n      })\n    jQ(parentElement)\n      .find('.result-view-section-button')\n      .on('click', (e) => {\n        const tabTarget = jQ(e.currentTarget)\n          .attr('data-section-option')\n        const tabLabel = jQ(e.currentTarget)\n          .text()\n\n        jQ(e.currentTarget)\n          .closest('.result-view-section-control-container')\n          .find('.sub-report-type-title')\n          .html(tabLabel == '╳'\n            ? 'Timeline: Total Interactions'\n            : `Timeline: ${tabLabel}`)\n\n        if (jQ(e.currentTarget)\n          .hasClass('active')) {\n          console.log(`Already on the ${tabLabel} section`)\n          return\n        }\n        jQ(e.currentTarget)\n          .siblings()\n          .removeClass('active')\n        jQ(e.currentTarget)\n          .addClass('active')\n\n        // Hide and show the relevant section\n        jQ(parentElement)\n          .find('.tree-results-item-tab-section')\n          .hide()\n        jQ(parentElement)\n          .find(`.tree-results-item-tab-section[data-section-id=${tabTarget}]`)\n          .show()\n\n        // Render any charts that haven't been rendered yet\n        app.chartJsHelper.createCharts()\n      })\n\n    jQ(parentElement)\n      .find('.result-normalize-cb')\n      .on('click', (e) => {\n        const chartTarget = jQ(e.currentTarget)\n          .attr('data-chart-type')\n        let doNormalize = 0\n        let targetElement\n\n        if (jQ(e.currentTarget)\n          .is(':checked')) {\n          doNormalize = 1\n        }\n\n        // Hide and show the relevant section\n        targetElement = jQ(parentElement)\n          .find(`canvas[data-chart-type=${chartTarget}]`)\n\n        // Set normalize to the new value, and set is-generated to 0, to queue up a re-rendering of the chart:\n        jQ(targetElement)\n          .attr('data-normalize', doNormalize)\n          .attr('data-generated', 0)\n\n        // Render any charts that haven't been rendered yet\n        app.chartJsHelper.createCharts()\n      })\n  }\n\n  app.combinedVersions = {}\n  app.combinedVersions.assignButtons = function () {\n    jQ('.tree-results-versions-select-button')\n      .on('click', (e) => {\n        // Make sure the element lines up underneath the \"Versions\" button\n        // This is a bit awkward, since we're right aligned and not in\n        // a position:absolute setting, so we'll actually add in the\n        // width of the (variable) daterangepicker to a fixed value:\n        const rightPosition = _.parseInt(jQ('#reportrange')\n          .width() + jQ('.tree-results-gear-menu')\n          .width() - jQ('.tree-results-versions-select-button')\n          .width() / 2) - 4\n        jQ('.tree-results-versions-selector')\n          .css({right: rightPosition})\n\n        jQ('.tree-results-versions-selector')\n          .toggle()\n\n        // Prevent clicks on the body element that would re-hide it.\n        e.stopPropagation()\n      })\n\n    jQ('.tree-results-versions-selector')\n      .on('click', (e) => {\n        // Prevent clicks on the body element that would re-hide it.\n        // This also protects clicks on the other elements within the dropdown.\n        e.stopPropagation()\n      })\n\n    jQ('.tree-results-versions-select-all-link')\n      .on('click', (e) => {\n        // jQ('.tree-results-versions-selector').toggle();\n        jQ('.tree-results-versions-selector input[type=checkbox]')\n          .prop('checked', true)\n          .trigger('change')\n      })\n    jQ('.tree-results-versions-select-none-link')\n      .on('click', (e) => {\n        // jQ('.tree-results-versions-selector').toggle();\n        jQ('.tree-results-versions-selector input[type=checkbox]')\n          .prop('checked', false)\n          .trigger('change')\n      })\n\n    jQ('.tree-results-versions-selector input[type=checkbox]')\n      .on('change', (e) => {\n        jQ('.tree-results-versions-apply-button')\n          .prop('disabled', false)\n      })\n\n    jQ('.tree-results-versions-apply-button')\n      .on('click', (e) => {\n        // Delete any existing version entries in the filter form, before adding the selected ones:\n        jQ('#filter-form input[name^=versions]')\n          .remove()\n\n        // With thanks to\n        // http://stackoverflow.com/questions/2530635/jquery-add-additional-parameters-on-submit-not-ajax#comment22923873_2531379\n        jQ('.tree-results-versions-selector input[type=checkbox]:checked')\n          .each(function () {\n            // return jQ(this).val()\n            const input = jQ('<input>', {\n              type: 'hidden',\n              name: 'versions[]',\n              value: jQ(this)\n                .val(),\n            })\n            jQ('#filter-form')\n              .append(jQ(input))\n          })\n\n        jQ('#filter-form')\n          .submit()\n      })\n\n    // If the selector is open, hide it by clicking on the open space,\n    // just like for dropdown menus.\n    jQ('body')\n      .on('click', (e) => {\n        jQ('.tree-results-versions-selector')\n          .hide()\n      })\n\n    jQ('.tree-results-versions-selector')\n      .hide()\n  }\n\n  app.combinedVersions = _.assign({}, app.combinedVersions, window.combinedVersions)\n}(window.jQuery))\n","'use strict';\n\nvar formats = require('./formats');\n\nvar has = Object.prototype.hasOwnProperty;\nvar isArray = Array.isArray;\n\nvar hexTable = (function () {\n    var array = [];\n    for (var i = 0; i < 256; ++i) {\n        array.push('%' + ((i < 16 ? '0' : '') + i.toString(16)).toUpperCase());\n    }\n\n    return array;\n}());\n\nvar compactQueue = function compactQueue(queue) {\n    while (queue.length > 1) {\n        var item = queue.pop();\n        var obj = item.obj[item.prop];\n\n        if (isArray(obj)) {\n            var compacted = [];\n\n            for (var j = 0; j < obj.length; ++j) {\n                if (typeof obj[j] !== 'undefined') {\n                    compacted.push(obj[j]);\n                }\n            }\n\n            item.obj[item.prop] = compacted;\n        }\n    }\n};\n\nvar arrayToObject = function arrayToObject(source, options) {\n    var obj = options && options.plainObjects ? Object.create(null) : {};\n    for (var i = 0; i < source.length; ++i) {\n        if (typeof source[i] !== 'undefined') {\n            obj[i] = source[i];\n        }\n    }\n\n    return obj;\n};\n\nvar merge = function merge(target, source, options) {\n    /* eslint no-param-reassign: 0 */\n    if (!source) {\n        return target;\n    }\n\n    if (typeof source !== 'object') {\n        if (isArray(target)) {\n            target.push(source);\n        } else if (target && typeof target === 'object') {\n            if ((options && (options.plainObjects || options.allowPrototypes)) || !has.call(Object.prototype, source)) {\n                target[source] = true;\n            }\n        } else {\n            return [target, source];\n        }\n\n        return target;\n    }\n\n    if (!target || typeof target !== 'object') {\n        return [target].concat(source);\n    }\n\n    var mergeTarget = target;\n    if (isArray(target) && !isArray(source)) {\n        mergeTarget = arrayToObject(target, options);\n    }\n\n    if (isArray(target) && isArray(source)) {\n        source.forEach(function (item, i) {\n            if (has.call(target, i)) {\n                var targetItem = target[i];\n                if (targetItem && typeof targetItem === 'object' && item && typeof item === 'object') {\n                    target[i] = merge(targetItem, item, options);\n                } else {\n                    target.push(item);\n                }\n            } else {\n                target[i] = item;\n            }\n        });\n        return target;\n    }\n\n    return Object.keys(source).reduce(function (acc, key) {\n        var value = source[key];\n\n        if (has.call(acc, key)) {\n            acc[key] = merge(acc[key], value, options);\n        } else {\n            acc[key] = value;\n        }\n        return acc;\n    }, mergeTarget);\n};\n\nvar assign = function assignSingleSource(target, source) {\n    return Object.keys(source).reduce(function (acc, key) {\n        acc[key] = source[key];\n        return acc;\n    }, target);\n};\n\nvar decode = function (str, decoder, charset) {\n    var strWithoutPlus = str.replace(/\\+/g, ' ');\n    if (charset === 'iso-8859-1') {\n        // unescape never throws, no try...catch needed:\n        return strWithoutPlus.replace(/%[0-9a-f]{2}/gi, unescape);\n    }\n    // utf-8\n    try {\n        return decodeURIComponent(strWithoutPlus);\n    } catch (e) {\n        return strWithoutPlus;\n    }\n};\n\nvar encode = function encode(str, defaultEncoder, charset, kind, format) {\n    // This code was originally written by Brian White (mscdex) for the io.js core querystring library.\n    // It has been adapted here for stricter adherence to RFC 3986\n    if (str.length === 0) {\n        return str;\n    }\n\n    var string = str;\n    if (typeof str === 'symbol') {\n        string = Symbol.prototype.toString.call(str);\n    } else if (typeof str !== 'string') {\n        string = String(str);\n    }\n\n    if (charset === 'iso-8859-1') {\n        return escape(string).replace(/%u[0-9a-f]{4}/gi, function ($0) {\n            return '%26%23' + parseInt($0.slice(2), 16) + '%3B';\n        });\n    }\n\n    var out = '';\n    for (var i = 0; i < string.length; ++i) {\n        var c = string.charCodeAt(i);\n\n        if (\n            c === 0x2D // -\n            || c === 0x2E // .\n            || c === 0x5F // _\n            || c === 0x7E // ~\n            || (c >= 0x30 && c <= 0x39) // 0-9\n            || (c >= 0x41 && c <= 0x5A) // a-z\n            || (c >= 0x61 && c <= 0x7A) // A-Z\n            || (format === formats.RFC1738 && (c === 0x28 || c === 0x29)) // ( )\n        ) {\n            out += string.charAt(i);\n            continue;\n        }\n\n        if (c < 0x80) {\n            out = out + hexTable[c];\n            continue;\n        }\n\n        if (c < 0x800) {\n            out = out + (hexTable[0xC0 | (c >> 6)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        if (c < 0xD800 || c >= 0xE000) {\n            out = out + (hexTable[0xE0 | (c >> 12)] + hexTable[0x80 | ((c >> 6) & 0x3F)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        i += 1;\n        c = 0x10000 + (((c & 0x3FF) << 10) | (string.charCodeAt(i) & 0x3FF));\n        out += hexTable[0xF0 | (c >> 18)]\n            + hexTable[0x80 | ((c >> 12) & 0x3F)]\n            + hexTable[0x80 | ((c >> 6) & 0x3F)]\n            + hexTable[0x80 | (c & 0x3F)];\n    }\n\n    return out;\n};\n\nvar compact = function compact(value) {\n    var queue = [{ obj: { o: value }, prop: 'o' }];\n    var refs = [];\n\n    for (var i = 0; i < queue.length; ++i) {\n        var item = queue[i];\n        var obj = item.obj[item.prop];\n\n        var keys = Object.keys(obj);\n        for (var j = 0; j < keys.length; ++j) {\n            var key = keys[j];\n            var val = obj[key];\n            if (typeof val === 'object' && val !== null && refs.indexOf(val) === -1) {\n                queue.push({ obj: obj, prop: key });\n                refs.push(val);\n            }\n        }\n    }\n\n    compactQueue(queue);\n\n    return value;\n};\n\nvar isRegExp = function isRegExp(obj) {\n    return Object.prototype.toString.call(obj) === '[object RegExp]';\n};\n\nvar isBuffer = function isBuffer(obj) {\n    if (!obj || typeof obj !== 'object') {\n        return false;\n    }\n\n    return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));\n};\n\nvar combine = function combine(a, b) {\n    return [].concat(a, b);\n};\n\nvar maybeMap = function maybeMap(val, fn) {\n    if (isArray(val)) {\n        var mapped = [];\n        for (var i = 0; i < val.length; i += 1) {\n            mapped.push(fn(val[i]));\n        }\n        return mapped;\n    }\n    return fn(val);\n};\n\nmodule.exports = {\n    arrayToObject: arrayToObject,\n    assign: assign,\n    combine: combine,\n    compact: compact,\n    decode: decode,\n    encode: encode,\n    isBuffer: isBuffer,\n    isRegExp: isRegExp,\n    maybeMap: maybeMap,\n    merge: merge\n};\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=7be6489a&prod&lang=scss&\"","/**\n * @license\n * =========================================================\n * bootstrap-datetimepicker.js \n * http://www.eyecon.ro/bootstrap-datepicker\n * =========================================================\n * Copyright 2012 Stefan Petre\n *\n * Contributions:\n *  - Andrew Rowls\n *  - Thiago de Arruda\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =========================================================\n */\n\n(function($) {\n\n  // Picker object\n  var smartPhone = (window.orientation != undefined);\n  var DateTimePicker = function(element, options) {\n    this.id = dpgId++;\n    this.init(element, options);\n  };\n\n  DateTimePicker.prototype = {\n    constructor: DateTimePicker,\n\n    init: function(element, options) {\n      var icon;\n      if (!(options.pickTime || options.pickDate))\n        throw new Error('Must choose at least one picker');\n      this.options = options;\n      this.$element = $(element);\n      this.language = options.language in dates ? options.language : 'en'\n      this.pickDate = options.pickDate;\n      this.pickTime = options.pickTime;\n      this.isInput = this.$element.is('input');\n      this.component = this.$element.is('.input-append') ? this.$element.find('.add-on') : false;\n      this.format = options.format;\n      if (!this.format) {\n        if (this.isInput) this.format = this.$element.data('format');\n        else this.format = this.$element.find('input').data('format');\n        if (!this.format) this.format = 'MM/dd/yyyy';\n      }\n      this._compileFormat();\n      if (this.component) {\n        icon = this.component.find('i');\n      }\n      if (this.pickTime) {\n        if (icon && icon.length) this.timeIcon = icon.data('time-icon');\n        if (!this.timeIcon) this.timeIcon = 'icon-time';\n        icon.addClass(this.timeIcon);\n      }\n      if (this.pickDate) {\n        if (icon && icon.length) this.dateIcon = icon.data('date-icon');\n        if (!this.dateIcon) this.dateIcon = 'icon-calendar';\n        icon.removeClass(this.timeIcon);\n        icon.addClass(this.dateIcon);\n      }\n      this.widget = $(getTemplate(this.timeIcon, options.pickDate, options.pickTime, options.pick12HourFormat)).appendTo('body');\n      this.minViewMode = options.minViewMode||this.$element.data('date-minviewmode')||0;\n      if (typeof this.minViewMode === 'string') {\n        switch (this.minViewMode) {\n          case 'months':\n            this.minViewMode = 1;\n          break;\n          case 'years':\n            this.minViewMode = 2;\n          break;\n          default:\n            this.minViewMode = 0;\n          break;\n        }\n      }\n      this.viewMode = options.viewMode||this.$element.data('date-viewmode')||0;\n      if (typeof this.viewMode === 'string') {\n        switch (this.viewMode) {\n          case 'months':\n            this.viewMode = 1;\n          break;\n          case 'years':\n            this.viewMode = 2;\n          break;\n          default:\n            this.viewMode = 0;\n          break;\n        }\n      }\n      this.startViewMode = this.viewMode;\n      this.weekStart = options.weekStart||this.$element.data('date-weekstart')||0;\n      this.weekEnd = this.weekStart === 0 ? 6 : this.weekStart - 1;\n      this.fillDow();\n      this.fillMonths();\n      this.fillHours();\n      this.fillMinutes();\n      this.fillSeconds();\n      this.update();\n      this.showMode();\n      this._attachDatePickerEvents();\n    },\n\n    show: function(e) {\n      this.widget.show();\n      this.height = this.component ? this.component.outerHeight() : this.$element.outerHeight();\n      this.place();\n      this.$element.trigger({\n        type: 'show',\n        date: this._date\n      });\n      this._attachDatePickerGlobalEvents();\n      if (e) {\n        e.stopPropagation();\n        e.preventDefault();\n      }\n    },\n\n    hide: function() {\n      // Ignore event if in the middle of a picker transition\n      var collapse = this.widget.find('.collapse')\n      for (var i = 0; i < collapse.length; i++) {\n        var collapseData = collapse.eq(i).data('collapse');\n        if (collapseData && collapseData.transitioning)\n          return;\n      }\n      this.widget.hide();\n      this.viewMode = this.startViewMode;\n      this.showMode();\n      this.set();\n      this.$element.trigger({\n        type: 'hide',\n        date: this._date\n      });\n      this._detachDatePickerGlobalEvents();\n    },\n\n    set: function() {\n      var formatted = '';\n      if (!this._unset) formatted = this.formatDate(this._date);\n      if (!this.isInput) {\n        if (this.component){\n          var input = this.$element.find('input');\n          input.val(formatted);\n          this._resetMaskPos(input);\n        }\n        this.$element.data('date', formatted);\n      } else {\n        this.$element.val(formatted);\n        this._resetMaskPos(this.$element);\n      }\n    },\n\n    setValue: function(newDate) {\n      if (!newDate) {\n        this._unset = true;\n      } else {\n        this._unset = false;\n      }\n      if (typeof newDate === 'string') {\n        this._date = this.parseDate(newDate);\n      } else {\n        this._date = new Date(newDate);\n      }\n      this.set();\n      this.viewDate = UTCDate(this._date.getUTCFullYear(), this._date.getUTCMonth(), 1, 0, 0, 0, 0);\n      this.fillDate();\n      this.fillTime();\n    },\n\n    getDate: function() {\n      if (this._unset) return null;\n      return new Date(this._date.valueOf());\n    },\n\n    setDate: function(date) {\n      if (!date) this.setValue(null);\n      else this.setValue(date.valueOf());\n    },\n\n    getLocalDate: function() {\n      if (this._unset) return null;\n      var d = this._date;\n      return new Date(d.getUTCFullYear(), d.getUTCMonth(), d.getUTCDate(),\n                      d.getUTCHours(), d.getUTCMinutes(), d.getUTCSeconds(), d.getUTCMilliseconds());\n    },\n\n    setLocalDate: function(localDate) {\n      if (!localDate) this.setValue(null);\n      else\n        this.setValue(Date.UTC(\n          localDate.getFullYear(),\n          localDate.getMonth(),\n          localDate.getDate(),\n          localDate.getHours(),\n          localDate.getMinutes(),\n          localDate.getSeconds(),\n          localDate.getMilliseconds()));\n    },\n\n    place: function(){\n      var offset = this.component ? this.component.offset() : this.$element.offset();\n      this.widget.css({\n        top: offset.top + this.height,\n        left: offset.left\n      });\n    },\n\n    notifyChange: function(){\n      this.$element.trigger({\n        type: 'changeDate',\n        date: this.getDate(),\n        localDate: this.getLocalDate()\n      });\n    },\n\n    update: function(newDate){\n      var dateStr = newDate;\n      if (!dateStr) {\n        if (this.isInput) {\n          dateStr = this.$element.val();\n        } else {\n          dateStr = this.$element.find('input').val();\n        }\n        if (!dateStr) {\n          var tmp = new Date()\n          this._date = UTCDate(tmp.getFullYear(),\n                              tmp.getMonth(),\n                              tmp.getDate(),\n                              tmp.getHours(),\n                              tmp.getMinutes(),\n                              tmp.getSeconds(),\n                              tmp.getMilliseconds())\n        } else {\n          this._date = this.parseDate(dateStr);\n        }\n      }\n      this.viewDate = UTCDate(this._date.getUTCFullYear(), this._date.getUTCMonth(), 1, 0, 0, 0, 0);\n      this.fillDate();\n      this.fillTime();\n    },\n\n    fillDow: function() {\n      var dowCnt = this.weekStart;\n      var html = '<tr>';\n      while (dowCnt < this.weekStart + 7) {\n        html += '<th class=\"dow\">' + dates[this.language].daysMin[(dowCnt++) % 7] + '</th>';\n      }\n      html += '</tr>';\n      this.widget.find('.datepicker-days thead').append(html);\n    },\n\n    fillMonths: function() {\n      var html = '';\n      var i = 0\n      while (i < 12) {\n        html += '<span class=\"month\">' + dates[this.language].monthsShort[i++] + '</span>';\n      }\n      this.widget.find('.datepicker-months td').append(html);\n    },\n\n    fillDate: function() {\n      var year = this.viewDate.getUTCFullYear();\n      var month = this.viewDate.getUTCMonth();\n      var currentDate = UTCDate(\n        this._date.getUTCFullYear(),\n        this._date.getUTCMonth(),\n        this._date.getUTCDate(),\n        0, 0, 0, 0\n      );\n      this.widget.find('.datepicker-days th:eq(1)').text(\n        dates[this.language].months[month] + ' ' + year);\n      var prevMonth = UTCDate(year, month-1, 28, 0, 0, 0, 0);\n      var day = DPGlobal.getDaysInMonth(\n        prevMonth.getUTCFullYear(), prevMonth.getUTCMonth());\n      prevMonth.setUTCDate(day);\n      prevMonth.setUTCDate(day - (prevMonth.getUTCDay() - this.weekStart + 7) % 7);\n      var nextMonth = new Date(prevMonth.valueOf());\n      nextMonth.setUTCDate(nextMonth.getUTCDate() + 42);\n      nextMonth = nextMonth.valueOf();\n      var html = [];\n      var clsName;\n      while (prevMonth.valueOf() < nextMonth) {\n        if (prevMonth.getUTCDay() === this.weekStart) {\n          html.push('<tr>');\n        }\n        clsName = '';\n        if (prevMonth.getUTCFullYear() < year ||\n            (prevMonth.getUTCFullYear() == year &&\n             prevMonth.getUTCMonth() < month)) {\n          clsName += ' old';\n        } else if (prevMonth.getUTCFullYear() > year ||\n                   (prevMonth.getUTCFullYear() == year &&\n                    prevMonth.getUTCMonth() > month)) {\n          clsName += ' new';\n        }\n        if (prevMonth.valueOf() === currentDate.valueOf()) {\n          clsName += ' active';\n        }\n        html.push('<td class=\"day' + clsName + '\">' + prevMonth.getUTCDate() + '</td>');\n        if (prevMonth.getUTCDay() === this.weekEnd) {\n          html.push('</tr>');\n        }\n        prevMonth.setUTCDate(prevMonth.getUTCDate() + 1);\n      }\n      this.widget.find('.datepicker-days tbody').empty().append(html.join(''));\n      var currentYear = this._date.getUTCFullYear();\n\n      var months = this.widget.find('.datepicker-months').find(\n        'th:eq(1)').text(year).end().find('span').removeClass('active');\n      if (currentYear === year) {\n        months.eq(this._date.getUTCMonth()).addClass('active');\n      }\n\n      html = '';\n      year = parseInt(year/10, 10) * 10;\n      var yearCont = this.widget.find('.datepicker-years').find(\n        'th:eq(1)').text(year + '-' + (year + 9)).end().find('td');\n      year -= 1;\n      for (var i = -1; i < 11; i++) {\n        html += '<span class=\"year' + (i === -1 || i === 10 ? ' old' : '') + (currentYear === year ? ' active' : '') + '\">' + year + '</span>';\n        year += 1;\n      }\n      yearCont.html(html);\n    },\n\n    fillHours: function() {\n      var table = this.widget.find(\n        '.timepicker .timepicker-hours table');\n      table.parent().hide();\n      var html = '';\n      if (this.options.pick12HourFormat) {\n        var current = 1;\n        for (var i = 0; i < 3; i += 1) {\n          html += '<tr>';\n          for (var j = 0; j < 4; j += 1) {\n             var c = current.toString();\n             html += '<td class=\"hour\">' + padLeft(c, 2, '0') + '</td>';\n             current++;\n          }\n          html += '</tr>'\n        }\n      } else {\n        var current = 0;\n        for (var i = 0; i < 6; i += 1) {\n          html += '<tr>';\n          for (var j = 0; j < 4; j += 1) {\n             var c = current.toString();\n             html += '<td class=\"hour\">' + padLeft(c, 2, '0') + '</td>';\n             current++;\n          }\n          html += '</tr>'\n        }\n      }\n      table.html(html);\n    },\n\n    fillMinutes: function() {\n      var table = this.widget.find(\n        '.timepicker .timepicker-minutes table');\n      table.parent().hide();\n      var html = '';\n      var current = 0;\n      for (var i = 0; i < 5; i++) {\n        html += '<tr>';\n        for (var j = 0; j < 4; j += 1) {\n          var c = current.toString();\n          html += '<td class=\"minute\">' + padLeft(c, 2, '0') + '</td>';\n          current += 3;\n        }\n        html += '</tr>';\n      }\n      table.html(html);\n    },\n\n    fillSeconds: function() {\n      var table = this.widget.find(\n        '.timepicker .timepicker-seconds table');\n      table.parent().hide();\n      var html = '';\n      var current = 0;\n      for (var i = 0; i < 5; i++) {\n        html += '<tr>';\n        for (var j = 0; j < 4; j += 1) {\n          var c = current.toString();\n          html += '<td class=\"second\">' + padLeft(c, 2, '0') + '</td>';\n          current += 3;\n        }\n        html += '</tr>';\n      }\n      table.html(html);\n    },\n\n    fillTime: function() {\n      if (!this._date)\n        return;\n      var timeComponents = this.widget.find('.timepicker span[data-time-component]');\n      var table = timeComponents.closest('table');\n      var is12HourFormat = this.options.pick12HourFormat;\n      var hour = this._date.getUTCHours();\n      var period = 'AM';\n      if (is12HourFormat) {\n        if (hour >= 12) period = 'PM';\n        if (hour === 0) hour = 12;\n        else if (hour != 12) hour = hour % 12;\n        this.widget.find(\n          '.timepicker [data-action=togglePeriod]').text(period);\n      }\n      hour = padLeft(hour.toString(), 2, '0');\n      var minute = padLeft(this._date.getUTCMinutes().toString(), 2, '0');\n      var second = padLeft(this._date.getUTCSeconds().toString(), 2, '0');\n      timeComponents.filter('[data-time-component=hours]').text(hour);\n      timeComponents.filter('[data-time-component=minutes]').text(minute);\n      timeComponents.filter('[data-time-component=seconds]').text(second);\n    },\n\n    click: function(e) {\n      e.stopPropagation();\n      e.preventDefault();\n      var target = $(e.target).closest('span, td, th');\n      if (target.length === 1) {\n        switch(target[0].nodeName.toLowerCase()) {\n          case 'th':\n            switch(target[0].className) {\n              case 'switch':\n                this.showMode(1);\n                break;\n              case 'prev':\n              case 'next':\n                var vd = this.viewDate;\n                var navFnc = DPGlobal.modes[this.viewMode].navFnc;\n                var step = DPGlobal.modes[this.viewMode].navStep;\n                if (target[0].className === 'prev') step = step * -1;\n                vd['set' + navFnc](vd['get' + navFnc]() + step);\n                this.fillDate();\n                this.set();\n                break;\n            }\n            break;\n          case 'span':\n            if (target.is('.month')) {\n              var month = target.parent().find('span').index(target);\n              this.viewDate.setUTCMonth(month);\n            } else {\n              var year = parseInt(target.text(), 10) || 0;\n              this.viewDate.setUTCFullYear(year);\n            }\n            if (this.viewMode !== 0) {\n              this._date = UTCDate(\n                this.viewDate.getUTCFullYear(),\n                this.viewDate.getUTCMonth(),\n                this.viewDate.getUTCDate(),\n                this._date.getUTCHours(),\n                this._date.getUTCMinutes(),\n                this._date.getUTCSeconds(),\n                this._date.getUTCMilliseconds()\n              );\n              this.notifyChange();\n            }\n            this.showMode(-1);\n            this.fillDate();\n            this.set();\n            break;\n          case 'td':\n            if (target.is('.day')) {\n              var day = parseInt(target.text(), 10) || 1;\n              var month = this.viewDate.getUTCMonth();\n              var year = this.viewDate.getUTCFullYear();\n              if (target.is('.old')) {\n                if (month === 0) {\n                  month = 11;\n                  year -= 1;\n                } else {\n                  month -= 1;\n                }\n              } else if (target.is('.new')) {\n                if (month == 11) {\n                  month = 0;\n                  year += 1;\n                } else {\n                  month += 1;\n                }\n              }\n              this._date = UTCDate(\n                year, month, day,\n                this._date.getUTCHours(),\n                this._date.getUTCMinutes(),\n                this._date.getUTCSeconds(),\n                this._date.getUTCMilliseconds()\n              );\n              this.viewDate = UTCDate(\n                year, month, Math.min(28, day) , 0, 0, 0, 0);\n              this.fillDate();\n              this.set();\n              this.notifyChange();\n            }\n            break;\n        }\n      }\n    },\n\n    actions: {\n      incrementHours: function(e) {\n        this._date.setUTCHours(this._date.getUTCHours() + 1);\n      },\n\n      incrementMinutes: function(e) {\n        this._date.setUTCMinutes(this._date.getUTCMinutes() + 1);\n      },\n\n      incrementSeconds: function(e) {\n        this._date.setUTCSeconds(this._date.getUTCSeconds() + 1);\n      },\n\n      decrementHours: function(e) {\n        this._date.setUTCHours(this._date.getUTCHours() - 1);\n      },\n\n      decrementMinutes: function(e) {\n        this._date.setUTCMinutes(this._date.getUTCMinutes() - 1);\n      },\n\n      decrementSeconds: function(e) {\n        this._date.setUTCSeconds(this._date.getUTCSeconds() - 1);\n      },\n\n      togglePeriod: function(e) {\n        var hour = this._date.getUTCHours();\n        if (hour >= 12) hour -= 12;\n        else hour += 12;\n        this._date.setUTCHours(hour);\n      },\n\n      showPicker: function() {\n        this.widget.find('.timepicker > div:not(.timepicker-picker)').hide();\n        this.widget.find('.timepicker .timepicker-picker').show();\n      },\n\n      showHours: function() {\n        this.widget.find('.timepicker .timepicker-picker').hide();\n        this.widget.find('.timepicker .timepicker-hours').show();\n      },\n\n      showMinutes: function() {\n        this.widget.find('.timepicker .timepicker-picker').hide();\n        this.widget.find('.timepicker .timepicker-minutes').show();\n      },\n\n      showSeconds: function() {\n        this.widget.find('.timepicker .timepicker-picker').hide();\n        this.widget.find('.timepicker .timepicker-seconds').show();\n      },\n\n      selectHour: function(e) {\n        var tgt = $(e.target);\n        var value = parseInt(tgt.text(), 10);\n        if (this.options.pick12HourFormat) {\n          var current = this._date.getUTCHours();\n          if (current >= 12) {\n            if (value != 12) value = (value + 12) % 24;\n          } else {\n            if (value === 12) value = 0;\n            else value = value % 12;\n          }\n        } \n        this._date.setUTCHours(value);\n        this.actions.showPicker.call(this);\n      },\n\n      selectMinute: function(e) {\n        var tgt = $(e.target);\n        var value = parseInt(tgt.text(), 10);\n        this._date.setUTCMinutes(value);\n        this.actions.showPicker.call(this);\n      },\n\n      selectSecond: function(e) {\n        var tgt = $(e.target);\n        var value = parseInt(tgt.text(), 10);\n        this._date.setUTCSeconds(value);\n        this.actions.showPicker.call(this);\n      }\n    },\n\n    doAction: function(e) {\n      e.stopPropagation();\n      e.preventDefault();\n      if (!this._date) this._date = UTCDate(1970, 0, 0, 0, 0, 0, 0);\n      var action = $(e.currentTarget).data('action');\n      var rv = this.actions[action].apply(this, arguments);\n      this.set();\n      this.fillTime();\n      this.notifyChange();\n      return rv;\n    },\n\n    stopEvent: function(e) {\n      e.stopPropagation();\n      e.preventDefault();\n    },\n\n    // part of the following code was taken from\n    // http://cloud.github.com/downloads/digitalBush/jquery.maskedinput/jquery.maskedinput-1.3.js\n    keydown: function(e) {\n      var self = this, k = e.which, input = $(e.target);\n      if (k == 8 || k == 46) {\n        // backspace and delete cause the maskPosition\n        // to be recalculated\n        setTimeout(function() {\n          self._resetMaskPos(input);\n        });\n      }\n    },\n\n    keypress: function(e) {\n      var k = e.which;\n      if (k == 8 || k == 46) {\n        // For those browsers which will trigger\n        // keypress on backspace/delete\n        return;\n      }\n      var input = $(e.target);\n      var c = String.fromCharCode(k);\n      var val = input.val() || '';\n      val += c;\n      var mask = this._mask[this._maskPos];\n      if (!mask) {\n        return false;\n      }\n      if (mask.end != val.length) {\n        return;\n      }\n      if (!mask.pattern.test(val.slice(mask.start))) {\n        val = val.slice(0, val.length - 1);\n        while ((mask = this._mask[this._maskPos]) && mask.character) {\n          val += mask.character;\n          // advance mask position past static\n          // part\n          this._maskPos++;\n        }\n        val += c;\n        if (mask.end != val.length) {\n          input.val(val);\n          return false;\n        } else {\n          if (!mask.pattern.test(val.slice(mask.start))) {\n            input.val(val.slice(0, mask.start));\n            return false;\n          } else {\n            input.val(val);\n            this._maskPos++;\n            return false;\n          }\n        }\n      } else {\n        this._maskPos++;\n      }\n    },\n\n    change: function(e) {\n      var input = $(e.target);\n      var val = input.val();\n      if (this._formatPattern.test(val)) {\n        this.update();\n        this.setValue(this._date.getTime());\n        this.notifyChange();\n        this.set();\n      } else if (val && val.trim()) {\n        this.setValue(this._date.getTime());\n        if (this._date) this.set();\n        else input.val('');\n      } else {\n        if (this._date) {\n          this.setValue(null);\n          // unset the date when the input is\n          // erased\n          this.notifyChange();\n        }\n      }\n      this._resetMaskPos(input);\n    },\n\n    showMode: function(dir) {\n      if (dir) {\n        this.viewMode = Math.max(this.minViewMode, Math.min(\n          2, this.viewMode + dir));\n      }\n      this.widget.find('.datepicker > div').hide().filter(\n        '.datepicker-'+DPGlobal.modes[this.viewMode].clsName).show();\n    },\n\n    destroy: function() {\n      this._detachDatePickerEvents();\n      this._detachDatePickerGlobalEvents();\n      this.widget.remove();\n      this.$element.removeData('datetimepicker');\n      this.component.removeData('datetimepicker');\n    },\n\n    formatDate: function(d) {\n      return this.format.replace(formatReplacer, function(match) {\n        var methodName, property, rv, len = match.length;\n        if (match === 'ms')\n          len = 1;\n        property = dateFormatComponents[match].property\n        if (property === 'Hours12') {\n          rv = d.getUTCHours();\n          if (rv === 0) rv = 12;\n          else if (rv !== 12) rv = rv % 12;\n        } else if (property === 'Period12') {\n          if (d.getUTCHours() >= 12) return 'PM';\n          else return 'AM';\n        } else {\n          methodName = 'get' + property;\n          rv = d[methodName]();\n        }\n        if (methodName === 'getUTCMonth') rv = rv + 1;\n        if (methodName === 'getUTCYear') rv = rv + 1900 - 2000;\n        return padLeft(rv.toString(), len, '0');\n      });\n    },\n\n    parseDate: function(str) {\n      var match, i, property, methodName, value, parsed = {};\n      if (!(match = this._formatPattern.exec(str)))\n        return null;\n      for (i = 1; i < match.length; i++) {\n        property = this._propertiesByIndex[i];\n        if (!property)\n          continue;\n        value = match[i];\n        if (/^\\d+$/.test(value))\n          value = parseInt(value, 10);\n        parsed[property] = value;\n      }\n      return this._finishParsingDate(parsed);\n    },\n\n    _resetMaskPos: function(input) {\n      var val = input.val();\n      for (var i = 0; i < this._mask.length; i++) {\n        if (this._mask[i].end > val.length) {\n          // If the mask has ended then jump to\n          // the next\n          this._maskPos = i;\n          break;\n        } else if (this._mask[i].end === val.length) {\n          this._maskPos = i + 1;\n          break;\n        }\n      }\n    },\n\n    _finishParsingDate: function(parsed) {\n      var year, month, date, hours, minutes, seconds, milliseconds;\n      year = parsed.UTCFullYear;\n      if (parsed.UTCYear) year = 2000 + parsed.UTCYear;\n      if (!year) year = 1970;\n      if (parsed.UTCMonth) month = parsed.UTCMonth - 1;\n      else month = 0;\n      date = parsed.UTCDate || 1;\n      hours = parsed.UTCHours || 0;\n      minutes = parsed.UTCMinutes || 0;\n      seconds = parsed.UTCSeconds || 0;\n      milliseconds = parsed.UTCMilliseconds || 0;\n      if (parsed.Hours12) {\n        hours = parsed.Hours12;\n      }\n      if (parsed.Period12) {\n        if (/pm/i.test(parsed.Period12)) {\n          if (hours != 12) hours = (hours + 12) % 24;\n        } else {\n          hours = hours % 12;\n        }\n      }\n      return UTCDate(year, month, date, hours, minutes, seconds, milliseconds);\n    },\n\n    _compileFormat: function () {\n      var match, component, components = [], mask = [],\n      str = this.format, propertiesByIndex = {}, i = 0, pos = 0;\n      while (match = formatComponent.exec(str)) {\n        component = match[0];\n        if (component in dateFormatComponents) {\n          i++;\n          propertiesByIndex[i] = dateFormatComponents[component].property;\n          components.push('\\\\s*' + dateFormatComponents[component].getPattern(\n            this) + '\\\\s*');\n          mask.push({\n            pattern: new RegExp(dateFormatComponents[component].getPattern(\n              this)),\n            property: dateFormatComponents[component].property,\n            start: pos,\n            end: pos += component.length\n          });\n        }\n        else {\n          components.push(escapeRegExp(component));\n          mask.push({\n            pattern: new RegExp(escapeRegExp(component)),\n            character: component,\n            start: pos,\n            end: ++pos\n          });\n        }\n        str = str.slice(component.length);\n      }\n      this._mask = mask;\n      this._maskPos = 0;\n      this._formatPattern = new RegExp(\n        '^\\\\s*' + components.join('') + '\\\\s*$');\n      this._propertiesByIndex = propertiesByIndex;\n    },\n\n    _attachDatePickerEvents: function() {\n      var self = this;\n      // this handles date picker clicks\n      this.widget.on('click', '.datepicker *', $.proxy(this.click, this));\n      // this handles time picker clicks\n      this.widget.on('click', '[data-action]', $.proxy(this.doAction, this));\n      this.widget.on('mousedown', $.proxy(this.stopEvent, this));\n      if (this.pickDate && this.pickTime) {\n        this.widget.on('click.togglePicker', '.accordion-toggle', function(e) {\n          e.stopPropagation();\n          var $this = $(this);\n          var $parent = $this.closest('ul');\n          var expanded = $parent.find('.collapse.in');\n          var closed = $parent.find('.collapse:not(.in)');\n\n          if (expanded && expanded.length) {\n            var collapseData = expanded.data('collapse');\n            if (collapseData && collapseData.transitioning) return;\n            expanded.collapse('hide');\n            closed.collapse('show')\n            $this.find('i').toggleClass(self.timeIcon + ' ' + self.dateIcon);\n            self.$element.find('.add-on i').toggleClass(self.timeIcon + ' ' + self.dateIcon);\n          }\n        });\n      }\n      if (this.isInput) {\n        this.$element.on({\n          'focus': $.proxy(this.show, this),\n          'change': $.proxy(this.change, this),\n        });\n        if (this.options.maskInput) {\n          this.$element.on({\n            'keydown': $.proxy(this.keydown, this),\n            'keypress': $.proxy(this.keypress, this)\n          });\n        }\n      } else {\n        this.$element.on({\n          'change': $.proxy(this.change, this),\n        }, 'input');\n        if (this.options.maskInput) {\n          this.$element.on({\n            'keydown': $.proxy(this.keydown, this),\n            'keypress': $.proxy(this.keypress, this)\n          }, 'input');\n        }\n        if (this.component){\n          this.component.on('click', $.proxy(this.show, this));\n        } else {\n          this.$element.on('click', $.proxy(this.show, this));\n        }\n      }\n    },\n\n    _attachDatePickerGlobalEvents: function() {\n      $(window).on(\n        'resize.datetimepicker' + this.id, $.proxy(this.place, this));\n      if (!this.isInput) {\n        $(document).on(\n          'mousedown.datetimepicker' + this.id, $.proxy(this.hide, this));\n      }\n    },\n\n    _detachDatePickerEvents: function() {\n      this.widget.off('click', '.datepicker *', this.click);\n      this.widget.off('click', '[data-action]');\n      this.widget.off('mousedown', this.stopEvent);\n      if (this.pickDate && this.pickTime) {\n        this.widget.off('click.togglePicker');\n      }\n      if (this.isInput) {\n        this.$element.off({\n          'focus': this.show,\n          'change': this.change,\n        });\n        if (this.options.maskInput) {\n          this.$element.off({\n            'keydown': this.keydown,\n            'keypress': this.keypress\n          });\n        }\n      } else {\n        this.$element.off({\n          'change': this.change,\n        }, 'input');\n        if (this.options.maskInput) {\n          this.$element.off({\n            'keydown': this.keydown,\n            'keypress': this.keypress\n          }, 'input');\n        }\n        if (this.component){\n          this.component.off('click', this.show);\n        } else {\n          this.$element.off('click', this.show);\n        }\n      }\n    },\n\n    _detachDatePickerGlobalEvents: function () {\n      $(window).off('resize.datetimepicker' + this.id);\n      if (!this.isInput) {\n        $(document).off('mousedown.datetimepicker' + this.id);\n      }\n    }\n  };\n\n  $.fn.datetimepicker = function ( option, val ) {\n    return this.each(function () {\n      var $this = $(this),\n      data = $this.data('datetimepicker'),\n      options = typeof option === 'object' && option;\n      if (!data) {\n        $this.data('datetimepicker', (data = new DateTimePicker(\n          this, $.extend({}, $.fn.datetimepicker.defaults,options))));\n      }\n      if (typeof option === 'string') data[option](val);\n    });\n  };\n\n  $.fn.datetimepicker.defaults = {\n    maskInput: true,\n    pickDate: true,\n    pickTime: true,\n    pick12HourFormat: false\n  };\n  $.fn.datetimepicker.Constructor = DateTimePicker;\n  var dpgId = 0;\n  var dates = $.fn.datetimepicker.dates = {\n    en: {\n      days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\",\n        \"Friday\", \"Saturday\", \"Sunday\"],\n      daysShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"],\n      daysMin: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\", \"Su\"],\n      months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\n        \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n      monthsShort: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\",\n        \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n    }\n  };\n\n  var dateFormatComponents = {\n    dd: {property: 'UTCDate', getPattern: function() { return '(0?[1-9]|[1-2][0-9]|3[0-1])\\\\b';}},\n    MM: {property: 'UTCMonth', getPattern: function() {return '(0?[1-9]|1[0-2])\\\\b';}},\n    yy: {property: 'UTCYear', getPattern: function() {return '(\\\\d{2})\\\\b'}},\n    yyyy: {property: 'UTCFullYear', getPattern: function() {return '(\\\\d{4})\\\\b';}},\n    hh: {property: 'UTCHours', getPattern: function() {return '(0?[0-9]|1[0-9]|2[0-3])\\\\b';}},\n    mm: {property: 'UTCMinutes', getPattern: function() {return '(0?[0-9]|[1-5][0-9])\\\\b';}},\n    ss: {property: 'UTCSeconds', getPattern: function() {return '(0?[0-9]|[1-5][0-9])\\\\b';}},\n    ms: {property: 'UTCMilliseconds', getPattern: function() {return '([0-9]{1,3})\\\\b';}},\n    HH: {property: 'Hours12', getPattern: function() {return '(0?[1-9]|1[0-2])\\\\b';}},\n    PP: {property: 'Period12', getPattern: function() {return '(AM|PM|am|pm|Am|aM|Pm|pM)\\\\b';}}\n  };\n\n  var keys = [];\n  for (var k in dateFormatComponents) keys.push(k);\n  keys[keys.length - 1] += '\\\\b';\n  keys.push('.');\n\n  var formatComponent = new RegExp(keys.join('\\\\b|'));\n  keys.pop();\n  var formatReplacer = new RegExp(keys.join('\\\\b|'), 'g');\n\n  function escapeRegExp(str) {\n    // http://stackoverflow.com/questions/3446170/escape-string-for-use-in-javascript-regex\n    return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n  }\n\n  function padLeft(s, l, c) {\n    if (l < s.length) return s;\n    else return Array(l - s.length + 1).join(c || ' ') + s;\n  }\n\n  function getTemplate(timeIcon, pickDate, pickTime, is12Hours) {\n    if (pickDate && pickTime) {\n      return (\n        '<div class=\"bootstrap-datetimepicker-widget dropdown-menu\">' +\n          '<ul>' +\n            '<li class=\"collapse in\">' +\n              '<div class=\"datepicker\">' +\n                DPGlobal.template +\n              '</div>' +\n            '</li>' +\n            '<li class=\"picker-switch\"><a class=\"accordion-toggle\"><i class=\"' + timeIcon + '\"></i></a></li>' +\n            '<li class=\"collapse\">' +\n              '<div class=\"timepicker\">' +\n                TPGlobal.getTemplate(is12Hours) +\n              '</div>' +\n            '</li>' +\n          '</ul>' +\n        '</div>'\n      );\n    } else if (pickTime) {\n      return (\n        '<div class=\"bootstrap-datetimepicker-widget dropdown-menu\">' +\n          '<div class=\"timepicker\">' +\n            TPGlobal.getTemplate(is12Hours) +\n          '</div>' +\n        '</div>'\n      );\n    } else {\n      return (\n        '<div class=\"bootstrap-datetimepicker-widget dropdown-menu\">' +\n          '<div class=\"datepicker\">' +\n            DPGlobal.template +\n          '</div>' +\n        '</div>'\n      );\n    }\n  }\n\n  function UTCDate() {\n    return new Date(Date.UTC.apply(Date, arguments));\n  }\n\n  var DPGlobal = {\n    modes: [\n      {\n      clsName: 'days',\n      navFnc: 'UTCMonth',\n      navStep: 1\n    },\n    {\n      clsName: 'months',\n      navFnc: 'UTCFullYear',\n      navStep: 1\n    },\n    {\n      clsName: 'years',\n      navFnc: 'UTCFullYear',\n      navStep: 10\n    }],\n    isLeapYear: function (year) {\n      return (((year % 4 === 0) && (year % 100 !== 0)) || (year % 400 === 0))\n    },\n    getDaysInMonth: function (year, month) {\n      return [31, (DPGlobal.isLeapYear(year) ? 29 : 28), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month]\n    },\n    headTemplate: \n      '<thead>' +\n        '<tr>' +\n          '<th class=\"prev\">&lsaquo;</th>' +\n          '<th colspan=\"5\" class=\"switch\"></th>' +\n          '<th class=\"next\">&rsaquo;</th>' +\n        '</tr>' +\n      '</thead>',\n    contTemplate: '<tbody><tr><td colspan=\"7\"></td></tr></tbody>'\n  };\n  DPGlobal.template =\n    '<div class=\"datepicker-days\">' +\n      '<table class=\"table-condensed\">' +\n        DPGlobal.headTemplate +\n        '<tbody></tbody>' +\n      '</table>' +\n    '</div>' +\n    '<div class=\"datepicker-months\">' +\n      '<table class=\"table-condensed\">' +\n        DPGlobal.headTemplate +\n        DPGlobal.contTemplate+\n      '</table>'+\n    '</div>'+\n    '<div class=\"datepicker-years\">'+\n      '<table class=\"table-condensed\">'+\n        DPGlobal.headTemplate+\n        DPGlobal.contTemplate+\n      '</table>'+\n    '</div>';\n  var TPGlobal = {\n    hourTemplate: '<span data-action=\"showHours\" data-time-component=\"hours\" class=\"timepicker-hour\"></span>',\n    minuteTemplate: '<span data-action=\"showMinutes\" data-time-component=\"minutes\" class=\"timepicker-minute\"></span>',\n    secondTemplate: '<span data-action=\"showSeconds\" data-time-component=\"seconds\" class=\"timepicker-second\"></span>',\n  };\n  TPGlobal.getTemplate = function(is12Hours) {\n    return (\n    '<div class=\"timepicker-picker\">' +\n      '<table class=\"table-condensed\"' +\n        (is12Hours ? ' data-hour-format=\"12\"' : '') +\n        '>' +\n        '<tr>' +\n          '<td><a href=\"#\" class=\"btn\" data-action=\"incrementHours\"><i class=\"icon-chevron-up\"></i></a></td>' +\n          '<td class=\"separator\"></td>' +\n          '<td><a href=\"#\" class=\"btn\" data-action=\"incrementMinutes\"><i class=\"icon-chevron-up\"></i></a></td>' +\n          '<td class=\"separator\"></td>' +\n          '<td><a href=\"#\" class=\"btn\" data-action=\"incrementSeconds\"><i class=\"icon-chevron-up\"></i></a></td>' +\n          (is12Hours ? '<td class=\"separator\"></td>' : '') +\n        '</tr>' +\n        '<tr>' +\n          '<td>' + TPGlobal.hourTemplate + '</td> ' +\n          '<td class=\"separator\">:</td>' +\n          '<td>' + TPGlobal.minuteTemplate + '</td> ' +\n          '<td class=\"separator\">:</td>' +\n          '<td>' + TPGlobal.secondTemplate + '</td>' +\n          (is12Hours ?\n          '<td class=\"separator\"></td>' +\n          '<td>' +\n          '<button type=\"button\" class=\"btn btn-primary\" data-action=\"togglePeriod\"></button>' +\n          '</td>' : '') +\n        '</tr>' +\n        '<tr>' +\n          '<td><a href=\"#\" class=\"btn\" data-action=\"decrementHours\"><i class=\"icon-chevron-down\"></i></a></td>' +\n          '<td class=\"separator\"></td>' +\n          '<td><a href=\"#\" class=\"btn\" data-action=\"decrementMinutes\"><i class=\"icon-chevron-down\"></i></a></td>' +\n          '<td class=\"separator\"></td>' +\n          '<td><a href=\"#\" class=\"btn\" data-action=\"decrementSeconds\"><i class=\"icon-chevron-down\"></i></a></td>' +\n          (is12Hours ? '<td class=\"separator\"></td>' : '') +\n        '</tr>' +\n      '</table>' +\n    '</div>' +\n    '<div class=\"timepicker-hours\" data-action=\"selectHour\">' +\n      '<table class=\"table-condensed\">' +\n      '</table>'+\n    '</div>'+\n    '<div class=\"timepicker-minutes\" data-action=\"selectMinute\">' +\n      '<table class=\"table-condensed\">' +\n      '</table>'+\n    '</div>'+\n    '<div class=\"timepicker-seconds\" data-action=\"selectSecond\">' +\n      '<table class=\"table-condensed\">' +\n      '</table>'+\n    '</div>'\n    );\n  }\n\n\n})(window.jQuery)\n","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"new-flow\"},[(_vm.activeFlow)?_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-sm-12 m-2\"},[_c('div',{staticClass:\"card w-100 pb-3 bg-light\"},[_c('div',{staticClass:\"card-body\"},[(_vm.flowError)?_c('div',{staticClass:\"alert alert-danger\",attrs:{\"role\":\"alert\"}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")(_vm.flowError))+\" \")]):_vm._e(),_c('flow-editor',{attrs:{\"flow\":_vm.activeFlow,\"flow-header\":_vm.createFlowTitle,\"did-user-submit\":_vm.didUserSubmit,\"is-on-small-container\":false}}),_c('div',{staticClass:\"float-right\"},[_c('router-link',{staticClass:\"btn btn-outline-secondary mr-2\",attrs:{\"to\":_vm.route('flows.cancelCreate')}},[_vm._v(\" \"+_vm._s(_vm.trans('flow-builder.cancel'))+\" \")]),_c('a',{staticClass:\"btn btn-primary\",attrs:{\"href\":_vm.route('flows.editFlow', {flowId: _vm.activeFlow.uuid, component: 'builder', mode: 'edit'}),\"data-cy\":\"create--btn\"},on:{\"click\":function($event){$event.preventDefault();_vm.handlePersistFlow(_vm.route('flows.editFlow', {flowId: _vm.activeFlow.uuid, component: 'builder', mode: 'edit'}))}}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.create'))+\" \")])],1)],1)])])]):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport Lang from '@/lib/filters/lang'\nimport Routes from '@/lib/mixins/Routes'\nimport {Component, Prop, Watch} from 'vue-property-decorator'\nimport Vue from 'vue'\nimport {Getter, Mutation, namespace, State} from 'vuex-class'\nimport {forEach, isEmpty} from 'lodash'\nimport {mixins} from 'vue-class-component'\nimport {store} from '@/store'\nimport {IContext, IFlow} from '@floip/flow-runner'\nimport {RawLocation} from 'vue-router'\nimport {IValidationStatus} from '@/store/validation'\n\nconst flowVuexNamespace = namespace('flow')\nconst validationVuexNamespace = namespace('validation')\n\n@Component({})\nclass NewFlow extends mixins(Lang, Routes) {\n  @Prop({default: () => ({})}) readonly appConfig!: object\n  @Prop({default: () => ({})}) readonly builderConfig!: object\n\n  didUserSubmit = false\n\n  @Watch('activeFlow', {deep: true, immediate: true})\n  async onActiveFlowChanged(newFlow: IFlow): Promise<void> {\n    if (Boolean(newFlow) === true) {\n      console.debug('watch/activeFlow:', 'active flow has changed from new flow flow page, validating ...')\n      await this.validate_flow({flow: newFlow})\n    }\n  }\n\n  get createFlowTitle(): string {\n    if (this.hasCreateFlowTitle) {\n      return 'flow-builder.create-flow'\n    }\n    return ''\n  }\n\n  async mounted(): Promise<void> {\n    await this.flow_addBlankFlow()\n  }\n\n  async beforeCreate(): Promise<void> {\n    const {$store} = this\n\n    forEach(store.modules, (v, k) => !$store.hasModule(k) && $store.registerModule(k, v))\n  }\n\n  async created(): Promise<void> {\n    if ((!isEmpty(this.appConfig) && !isEmpty(this.builderConfig)) || !this.isConfigured) {\n      this.configure({appConfig: this.appConfig, builderConfig: this.builderConfig})\n    }\n  }\n\n  async handlePersistFlow(route: RawLocation): Promise<void> {\n    this.didUserSubmit = true\n    if (!this.isActiveFlowConsideredValidOnCreationForm) {\n      return\n    }\n\n    this.flowError = null\n    const flowContainer = await this.flow_persist({\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore TODO: Would need to switch mixins to class components to fix this - https://class-component.vuejs.org/guide/extend-and-mixins.html#mixins\n      persistRoute: this.route('flows.persistFlow', {}),\n      flowContainer: this.activeFlowContainer,\n    })\n    if (flowContainer) {\n      await this.$router.push(route)\n    } else {\n      this.flowError = 'flow-builder.problem-creating-flow'\n      //TODO - hook into validation system when we have it.\n    }\n  }\n\n  flowError: string | null = null\n\n  @State(({trees: {ui}}) => ui) ui!: any\n\n  @Getter hasCreateFlowTitle!: boolean\n\n  @flowVuexNamespace.Action flow_addBlankFlow!: () => Promise<IFlow>\n  @flowVuexNamespace.Action flow_persist!: ({\n    persistRoute,\n    flowContainer,\n  }: { persistRoute: any, flowContainer: IContext }) => Promise<IContext | null>\n  @flowVuexNamespace.Getter activeFlow!: IFlow\n  @flowVuexNamespace.Getter isActiveFlowConsideredValidOnCreationForm?: boolean\n  @flowVuexNamespace.Getter activeFlowContainer!: IContext\n  @Mutation configure!: ({appConfig, builderConfig}: { appConfig: object, builderConfig: object }) => void\n  @Getter isConfigured!: boolean\n\n  @validationVuexNamespace.Action validate_flow!: ({flow}: { flow: IFlow }) => Promise<IValidationStatus>\n}\n\nexport default NewFlow\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/@vue/cli-plugin-typescript/node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./NewFlow.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/@vue/cli-plugin-typescript/node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./NewFlow.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./NewFlow.vue?vue&type=template&id=94f10110&\"\nimport script from \"./NewFlow.vue?vue&type=script&lang=ts&\"\nexport * from \"./NewFlow.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./BlockActionButtons.vue?vue&type=style&index=0&id=0f4e7d5a&prod&lang=scss&scoped=true&\"","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return (_vm.activeFlow)?_c('div',{ref:\"interaction-designer-contents\",staticClass:\"interaction-designer interaction-designer-contents\"},[_c('header',{ref:\"interaction-designer-header\",staticClass:\"interaction-designer-header\"},[_vm._t(\"toolbar\",function(){return [_c('tree-builder-toolbar')]})],2),(_vm.isSimulatorActive)?_c('aside',{staticClass:\"tree-sidebar-container\",class:{ 'slide-out': !_vm.$route.meta.isSidebarShown,}},[_c('div',{staticClass:\"sidebar-cue\",class:{'sidebar-close': _vm.$route.meta.isSidebarShown},on:{\"click\":_vm.showOrHideSidebar}},[(_vm.$route.meta.isSidebarShown)?_c('font-awesome-icon',{staticClass:\"fa-btn\",attrs:{\"icon\":['fac', 'minimize']}}):_c('font-awesome-icon',{staticClass:\"fa-btn\",attrs:{\"icon\":['fac', 'expand']}})],1),_c('div',{staticClass:\"tree-sidebar\"},[_c('clipboard-root')],1)]):_vm._e(),_c('main',{staticClass:\"interaction-designer-main\"},[(_vm.mainComponent === 'builder')?_c('builder-canvas',{attrs:{\"width-adjustment\":_vm.builderWidthAdjustment},nativeOn:{\"click\":function($event){return _vm.handleCanvasSelected.apply(null, arguments)}}}):(_vm.mainComponent === 'resource-viewer')?_c('resource-viewer'):_c('div',[_c('div',{staticClass:\"alert alert-danger\"},[_vm._v(\" ERROR: component '\"+_vm._s(_vm.mainComponent)+\"' is not supported \")])])],1)]):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/@vue/cli-plugin-typescript/node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./InteractionDesigner.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/@vue/cli-plugin-typescript/node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./InteractionDesigner.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./InteractionDesigner.vue?vue&type=template&id=30d954b6&\"\nimport script from \"./InteractionDesigner.vue?vue&type=script&lang=ts&\"\nexport * from \"./InteractionDesigner.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./InteractionDesigner.vue?vue&type=style&index=0&id=30d954b6&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}