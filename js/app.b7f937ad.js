(function(e){function t(t){for(var i,a,n=t[0],c=t[1],l=t[2],d=0,u=[];d<n.length;d++)a=n[d],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&u.push(s[a][0]),s[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);p&&p(t);while(u.length)u.shift()();return r.push.apply(r,l||[]),o()}function o(){for(var e,t=0;t<r.length;t++){for(var o=r[t],i=!0,a=1;a<o.length;a++){var n=o[a];0!==s[n]&&(i=!1)}i&&(r.splice(t--,1),e=c(c.s=o[0]))}return e}var i={},a={app:0},s={app:0},r=[];function n(e){return c.p+"js/"+({"chunk-builder":"chunk-builder"}[e]||e)+"."+{"chunk-builder":"28725a94"}[e]+".js"}function c(t){if(i[t])return i[t].exports;var o=i[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,c),o.l=!0,o.exports}c.e=function(e){var t=[],o={"chunk-builder":1};a[e]?t.push(a[e]):0!==a[e]&&o[e]&&t.push(a[e]=new Promise((function(t,o){for(var i="css/"+({"chunk-builder":"chunk-builder"}[e]||e)+"."+{"chunk-builder":"44427d35"}[e]+".css",s=c.p+i,r=document.getElementsByTagName("link"),n=0;n<r.length;n++){var l=r[n],d=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(d===i||d===s))return t()}var u=document.getElementsByTagName("style");for(n=0;n<u.length;n++){l=u[n],d=l.getAttribute("data-href");if(d===i||d===s)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var i=t&&t.target&&t.target.src||s,r=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=i,delete a[e],p.parentNode.removeChild(p),o(r)},p.href=s;var b=document.getElementsByTagName("head")[0];b.appendChild(p)})).then((function(){a[e]=0})));var i=s[e];if(0!==i)if(i)t.push(i[2]);else{var r=new Promise((function(t,o){i=s[e]=[t,o]}));t.push(i[2]=r);var l,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=n(e);var u=new Error;l=function(t){d.onerror=d.onload=null,clearTimeout(p);var o=s[e];if(0!==o){if(o){var i=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",u.name="ChunkLoadError",u.type=i,u.request=a,o[1](u)}s[e]=void 0}};var p=setTimeout((function(){l({type:"timeout",target:d})}),12e4);d.onerror=d.onload=l,document.head.appendChild(d)}return Promise.all(t)},c.m=e,c.c=i,c.d=function(e,t,o){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(c.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)c.d(o,i,function(t){return e[t]}.bind(null,i));return o},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/flow-builder/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var p=d;r.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("cd49")},"018c":function(e,t,o){},"025f":function(e,t,o){"use strict";o("4d04")},"02b5":function(e,t,o){"use strict";o.r(t),o.d(t,"Core_SetGroupMembershipBlock",(function(){return m})),o.d(t,"install",(function(){return y}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"core-set-group-membership-block"},[t("base-block",{attrs:{block:e.block,"show-semantic-label":!1,"uses-default-contact-props-editor":e.usesDefaultContactPropsEditor,"uses-default-branching-editor":e.usesDefaultBranchingEditor},on:{handleBranchingTypeChangedToUnified:function(t){return e.handleBranchingTypeChangedToUnified({block:e.block})}}},[e._t("description",null,{slot:"description"}),e._t("resource-editors",null,{slot:"resource-editors"}),e._t("extras",(function(){return[t("group-membership-editor",{attrs:{block:e.block,"available-groups":e.finalGroupOptions,"has-groups-loading":e.hasGroupsLoading}})]}),{slot:"extras"}),e._t("vendor-extras",null,{slot:"vendor-extras"}),e._t("branching",null,{slot:"branching"}),e._t("contact-props",null,{slot:"contact-props"}),e._t("vendor",null,{slot:"vendor"})],2)],1)},a=[],s=o("9ab4"),r=o("1b40"),n=o("4bb5"),c=o("4a51"),l=o("af98"),d=o("2ef0"),u=o("4004");const p="add",b="Core.SetGroupMembership",f={...u["a"],async createWith(e,t){let{getters:o,dispatch:i}=e,{props:a}=t;return a.type=b,a.config={is_member:!0,groups:[],clear:!1},u["a"].createWith({getters:o,dispatch:i},{props:a})},async setIsMember(e,t){let{commit:o,rootGetters:i}=e;const a=i["builder/activeBlock"];let s=!1;!0===t&&(s=t.id===p),o("flow/block_updateConfigByPath",{blockId:a.uuid,path:"is_member",value:s},{root:!0})},async validateWithProgrammaticLogic(e,t){let{block:o}=t;console.debug("floip/SetGroupMembership/validateWithProgrammaticLogic()",""+o.type);const i=[],{groups:a,is_member:s}=o.config;return void 0!==s&&0===(null===a||void 0===a?void 0:a.length)&&i.push(["/config/groups","set-group-membership-groups-required"]),i}},h={...Object(d["cloneDeep"])(u["b"]),actions:f};var v=h,_=o("2fe1");const g=Object(n["e"])("flow/"+b);let m=class extends(Object(_["c"])(c["a"])){get finalGroupOptions(){return this.availableGroups||this.groupsFromUiConfig.map(e=>{let{id:t,name:o}=e;return{group_key:t,group_name:o}})}};Object(s["__decorate"])([Object(r["b"])()],m.prototype,"block",void 0),Object(s["__decorate"])([Object(r["b"])({default:!0})],m.prototype,"usesDefaultBranchingEditor",void 0),Object(s["__decorate"])([Object(r["b"])({default:!1})],m.prototype,"usesDefaultContactPropsEditor",void 0),Object(s["__decorate"])([Object(r["b"])()],m.prototype,"availableGroups",void 0),Object(s["__decorate"])([Object(r["b"])()],m.prototype,"hasGroupsLoading",void 0),Object(s["__decorate"])([g.Action],m.prototype,"handleBranchingTypeChangedToUnified",void 0),Object(s["__decorate"])([Object(n["d"])(e=>{let{trees:{ui:{groups:t}}}=e;return t})],m.prototype,"groupsFromUiConfig",void 0),m=Object(s["__decorate"])([Object(r["a"])({})],m);var k=m;const y=Object(l["c"])(b,v);var j=k,O=(o("e02d"),o("0c7c")),w=Object(O["a"])(j,i,a,!1,null,"7f8c8bb5",null);t["default"]=w.exports},"02be":function(e,t,o){"use strict";o.d(t,"g",(function(){return n})),o.d(t,"f",(function(){return c})),o.d(t,"d",(function(){return d})),o.d(t,"e",(function(){return u})),o.d(t,"b",(function(){return p})),o.d(t,"a",(function(){return b})),o.d(t,"c",(function(){return f})),o.d(t,"h",(function(){return h}));o("13d5");var i=o("9300"),a=o("2ef0"),s=o("44e8"),r=o("3a27");function n(e,t){let{resources:o}=t;const i=Object(a["find"])(o,{uuid:e});if(null==i)throw new s["a"](`Unable to find resource on context: ${e} in ${Object(a["map"])(o,"uuid")}`);return i}function c(e,t,o){return l(n(e,o),t)}function l(e,t){const o=Object(a["without"])(Object.keys(t),"modes"),i=Object(a["pick"])(t,o),r=Object(a["find"])(e.values,e=>Object(a["isEqual"])(i,Object(a["pick"])(e,o))&&0===Object(a["difference"])(t.modes,e.modes).length);if(null==r)throw new s["a"](`Unable to find resource variant (over modes) on context: (\n      ${e.uuid},\n      ${JSON.stringify(t)}) in\n        ${JSON.stringify(Object(a["map"])(e.values,e=>Object(a["pick"])(e,o)))}`);return r}function d(e,t){const o=Object(a["without"])(Object.keys(t),"modes"),i=Object(a["pick"])(t,o);return e.values.findIndex(e=>Object(a["isEqual"])(i,Object(a["pick"])(e,o))&&0===Object(a["difference"])(t.modes,e.modes).length)}function u(e,t){try{return l(e,t)}catch(o){if(!(o instanceof s["a"]))throw o;return Object.assign(Object(a["cloneDeep"])(t),{value:""})}}function p(e,t){const{TEXT:o,AUDIO:a,IMAGE:s,VIDEO:r}=i["SupportedContentType"],n={[i["SupportedMode"].IVR]:[a],[i["SupportedMode"].SMS]:[o],[i["SupportedMode"].TEXT]:[o],[i["SupportedMode"].USSD]:[o],[i["SupportedMode"].OFFLINE]:[o,s,r],[i["SupportedMode"].RICH_MESSAGING]:[o,s,r]};if(!t||!t.values.length)return n[e];let c={};return c=t.values.reduce((e,t)=>(t.modes.reduce((e,o)=>(e[o]||(e[o]=[]),e[o].push(t.content_type),e),e),e),c),Object.assign(n,c)[e]}function b(e,t){const o=Object(r["a"])(e.flows);return o.forEach(e=>{e.resources.map(o=>(o.values=o.values.filter(o=>{if(o.mime_type===t)return!0;const i=e.supported_modes.some(e=>o.modes.includes(e)),a=e.languages.some(e=>o.language_id===e.id);return i&&a}),Object(a["isEmpty"])(o.values)?null:o)).filter(Boolean),e.blocks.forEach(e=>{var t;"Core.SetGroupMembership"===e.type&&(null===(t=e.vendor_metadata)||void 0===t||delete t.floip.ui_metadata.user_added_groups)})}),{...e,flows:o}}function f(e){let{block:t}=e;var o,i,a;const s=[];return void 0!==(null===(o=t.config)||void 0===o?void 0:o.prompt)&&s.push(t.config.prompt),null===(a=null===(i=t.config)||void 0===i?void 0:i.choices)||void 0===a||a.forEach(e=>{s.push(e.prompt)}),s}function h(e,t){const o=e.config.prompt===t,i=void 0!==e.config.choices&&e.config.choices.some(e=>e.prompt===t);return o||i}},"03d5":function(e,t,o){"use strict";o.r(t),o.d(t,"MobilePrimitives_SelectManyResponseBlock",(function(){return b})),o.d(t,"install",(function(){return h}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"mobile-primitive-select-many-response-block"},[t("base-block",{attrs:{block:e.block,"show-semantic-label":!1,"uses-default-contact-props-editor":e.usesDefaultContactPropsEditor,"uses-default-branching-editor":e.usesDefaultBranchingEditor},on:{handleBranchingTypeChangedToUnified:function(t){return e.handleBranchingTypeChangedToUnified({block:e.block})}}},[e._t("description",null,{slot:"description"}),e._t("resource-editors",(function(){return[t("per-language-resource-editor",{attrs:{block:e.block}})]}),{slot:"resource-editors"}),e._t("extras",(function(){return[t("choices-builder",{attrs:{block:e.block},on:{choiceChanged:e.handleChoiceChanged}}),t("hr"),t("minimum-choices-editor",{attrs:{block:e.block}}),t("maximum-choices-editor",{attrs:{block:e.block}})]}),{slot:"extras"}),e._t("vendor-extras",null,{slot:"vendor-extras"}),e._t("branching",(function(){return[t("block-output-branching-config",{attrs:{block:e.block,"has-exit-per-choice":!1,"label-class":""},on:{branchingTypeChanged:function(t){return e.reflowExitsWhenSwitchingToBranchingTypeNotUnified()}}})]}),{slot:"branching"}),e._t("contact-props",null,{slot:"contact-props"}),e._t("vendor",null,{slot:"vendor"})],2)],1)},a=[],s=o("9ab4"),r=o("1b40"),n=o("5801"),c=o("4bb5"),l=o("af98"),d=o("5c47");const u=Object(c["e"])("flow/"+n["a"]),p=Object(c["e"])("builder");let b=class extends d["default"]{};Object(s["__decorate"])([p.Getter],b.prototype,"isEditable",void 0),Object(s["__decorate"])([u.Action],b.prototype,"handleBranchingTypeChangedToUnified",void 0),b=Object(s["__decorate"])([Object(r["a"])({})],b);var f=b;const h=Object(l["c"])(n["a"],n["b"]);var v=f,_=o("0c7c"),g=Object(_["a"])(v,i,a,!1,null,null,null);t["default"]=g.exports},"0402":function(e,t,o){"use strict";o.r(t);var i=o("a026"),a=o("ad3d"),s=o("ecee"),r=o("c074"),n=o("b702");const c={prefix:"fac",iconName:"audio",icon:[14,14,[],"e001","M4.96802 2.635C5.24464 2.23831 5.71033 2.00004 6.20901 2.00004H7.0313C7.85503 2.00004 8.52279 2.63844 8.52279 3.42596V11.5741C8.52279 12.3616 7.85503 13 7.0313 13H6.95819C6.56262 13 6.18326 12.8498 5.90355 12.5824L3.84596 10.6152C3.80601 10.577 3.75181 10.5556 3.6953 10.5556H1.49149C0.667762 10.5556 0 9.91716 0 9.12964V5.87039C0 5.08288 0.667762 4.44447 1.49149 4.44447H3.5922C3.66344 4.44447 3.72997 4.41043 3.76948 4.35376L4.96802 2.635ZM6.20901 3.22226C6.13777 3.22226 6.07124 3.25629 6.03173 3.31296L4.83319 5.03173C4.55657 5.42842 4.09088 5.66669 3.5922 5.66669H1.49149C1.37381 5.66669 1.27842 5.75789 1.27842 5.87039V9.12964C1.27842 9.24214 1.37381 9.33334 1.49149 9.33334H3.6953C4.09087 9.33334 4.47023 9.48357 4.74994 9.75099L6.80753 11.7181C6.84748 11.7563 6.90168 11.7778 6.95819 11.7778H7.0313C7.14898 11.7778 7.24437 11.6866 7.24437 11.5741V3.42596C7.24437 3.31346 7.14898 3.22226 7.0313 3.22226H6.20901Z M10.3337 4.71804C10.5287 4.43669 10.9253 4.35973 11.2196 4.54615C11.9644 5.01793 12.8617 5.9752 13.1309 7.14458C13.2692 7.74562 13.2409 8.40541 12.9334 9.06324C12.6278 9.71697 12.0676 10.3241 11.2196 10.8613C10.9253 11.0477 10.5287 10.9707 10.3337 10.6894C10.1387 10.408 10.2192 10.0288 10.5135 9.84242C11.2091 9.40181 11.5814 8.9599 11.7662 8.56456C11.9491 8.17332 11.9691 7.78404 11.8823 7.4073C11.7013 6.62113 11.055 5.90804 10.5135 5.56501C10.2192 5.37859 10.1387 4.99939 10.3337 4.71804Z M13.0384 2.12334C13.3202 1.92004 13.721 1.97363 13.9336 2.24304C14.6116 3.10201 15.6372 4.7263 15.9236 6.65002C16.2158 8.61342 15.7293 10.8603 13.4249 12.8431C13.1625 13.0689 12.7583 13.0486 12.5221 12.7977C12.286 12.5468 12.3073 12.1604 12.5697 11.9347C14.5266 10.2508 14.8963 8.42364 14.6579 6.82224C14.4136 5.18115 13.5215 3.7499 12.9132 2.97925C12.7005 2.70984 12.7566 2.32664 13.0384 2.12334Z"]},l={prefix:"fac",iconName:"enter",icon:[17,20,[],"e002","M1 9C0.447715 9 0 9.44772 0 10C0 10.5523 0.447715 11 1 11V9ZM11 11H12V9H11V11ZM7.99929 4.62347C7.63354 4.20965 7.00157 4.17068 6.58775 4.53643C6.17393 4.90218 6.13497 5.53414 6.50071 5.94796L7.99929 4.62347ZM11.4167 10L12.166 10.6622L12.7513 10L12.166 9.33775L11.4167 10ZM6.50071 14.052C6.13497 14.4659 6.17393 15.0978 6.58775 15.4636C7.00157 15.8293 7.63354 15.7904 7.99929 15.3765L6.50071 14.052ZM3.33333 3.14286C3.33333 3.69514 3.78105 4.14286 4.33333 4.14286C4.88562 4.14286 5.33333 3.69514 5.33333 3.14286H3.33333ZM5.33333 16.8571C5.33333 16.3049 4.88562 15.8571 4.33333 15.8571C3.78105 15.8571 3.33333 16.3049 3.33333 16.8571H5.33333ZM1 11H11V9H1V11ZM5.33333 3.14286V2H3.33333V3.14286H5.33333ZM5.33333 2H15V0H5.33333V2ZM15 2V18H17V2H15ZM15 18H5.33333V20H15V18ZM5.33333 18V16.8571H3.33333V18H5.33333ZM10.6674 9.33775L8.58405 11.6949L10.0826 13.0194L12.166 10.6622L10.6674 9.33775ZM8.58405 11.6949L6.50071 14.052L7.99929 15.3765L10.0826 13.0194L8.58405 11.6949ZM6.50071 5.94796L8.58405 8.3051L10.0826 6.98061L7.99929 4.62347L6.50071 5.94796ZM8.58405 8.3051L10.6674 10.6622L12.166 9.33775L10.0826 6.98061L8.58405 8.3051ZM5.33333 18H5.33333H3.33333C3.33333 19.1046 4.22877 20 5.33333 20V18ZM15 18V20C16.1046 20 17 19.1046 17 18H15ZM15 2H15H17C17 0.89543 16.1046 0 15 0V2ZM5.33333 2L5.33333 2V0C4.22876 0 3.33333 0.895431 3.33333 2H5.33333Z"]},d={prefix:"fac",iconName:"record-audio",icon:[32,32,[],"e003","M7.99805 13.9376C7.9636 13.3864 7.48883 12.9675 6.93762 13.0019C6.38641 13.0364 5.9675 13.5112 6.00195 14.0624L7.99805 13.9376ZM25.9981 14.0624C26.0325 13.5112 25.6136 13.0364 25.0624 13.0019C24.5112 12.9675 24.0364 13.3864 24.0019 13.9376L25.9981 14.0624ZM15 28C15 28.5523 15.4477 29 16 29C16.5523 29 17 28.5523 17 28H15ZM8 27C7.44772 27 7 27.4477 7 28C7 28.5523 7.44772 29 8 29V27ZM24 29C24.5523 29 25 28.5523 25 28C25 27.4477 24.5523 27 24 27V29ZM20 8V13H22V8H20ZM12 13V8H10V13H12ZM16 17C13.7909 17 12 15.2091 12 13H10C10 16.3137 12.6863 19 16 19V17ZM20 13C20 15.2091 18.2091 17 16 17V19C19.3137 19 22 16.3137 22 13H20ZM16 4C18.2091 4 20 5.79086 20 8H22C22 4.68629 19.3137 2 16 2V4ZM16 2C12.6863 2 10 4.68629 10 8H12C12 5.79086 13.7909 4 16 4V2ZM6.00195 14.0624C6.09611 15.5689 6.7059 17.7811 8.24207 19.6375C9.81064 21.5331 12.3011 23 16 23V21C12.8989 21 10.9727 19.8003 9.78293 18.3625C8.56077 16.8855 8.07056 15.0977 7.99805 13.9376L6.00195 14.0624ZM16 23C19.6989 23 22.1894 21.5331 23.7579 19.6375C25.2941 17.7811 25.9039 15.5689 25.9981 14.0624L24.0019 13.9376C23.9294 15.0977 23.4392 16.8855 22.2171 18.3625C21.0273 19.8003 19.1011 21 16 21V23ZM17 28V22H15V28H17ZM8 29H24V27H8V29Z"]},u={prefix:"fac",iconName:"settings",icon:[16,16,[],"e004","M14.9757 7.00154L13.2241 5.81525L13.6254 3.73557C13.7015 3.34893 13.5785 2.95057 13.3002 2.66938C13.019 2.39111 12.6207 2.26809 12.2399 2.34424L10.1632 2.74553L8.97979 0.990993C8.53749 0.3378 7.45958 0.3378 7.01728 0.990993L5.83392 2.74553L3.76011 2.34424C3.37053 2.27102 2.9751 2.39111 2.69684 2.67231C2.41857 2.9535 2.29555 3.34893 2.3717 3.73557L2.77299 5.81525L1.02138 7.00154C0.693322 7.22415 0.5 7.59029 0.5 7.98572C0.5 8.38115 0.696251 8.74729 1.02138 8.96697L2.77299 10.1533L2.3717 12.2329C2.29555 12.6196 2.41857 13.0179 2.69684 13.2962C2.9751 13.5745 3.3676 13.6975 3.76011 13.6213L5.83392 13.2201L7.01728 14.9746C7.23697 15.3027 7.60603 15.4989 7.99854 15.4989C8.39104 15.4989 8.76011 15.3027 8.97979 14.9775L10.1632 13.223L12.2399 13.6243C12.6324 13.7034 13.0249 13.5774 13.3032 13.2991C13.5814 13.0209 13.7015 12.6225 13.6283 12.2359L13.227 10.1562L14.9786 8.9699C15.3037 8.75022 15.5 8.38115 15.5 7.98865C15.4971 7.59029 15.3037 7.22415 14.9757 7.00154ZM11.6687 9.50886L12.1842 12.1802L9.51875 11.6647L7.99854 13.9172L6.47832 11.6618L3.81576 12.1773L4.33128 9.50593L2.08172 7.98279L4.33128 6.45965L3.81576 3.7883L6.48125 4.30382L7.99854 2.05426L9.51875 4.30675L12.1842 3.79123L11.6687 6.45965L13.9183 7.98279L11.6687 9.50886ZM7.99854 4.95409C6.32015 4.95409 4.95226 6.32198 4.95226 8.00037C4.95226 9.67875 6.32015 11.0466 7.99854 11.0466C9.67692 11.0466 11.0448 9.67875 11.0448 8.00037C11.0448 6.32198 9.67692 4.95409 7.99854 4.95409ZM7.99854 9.64067C7.09344 9.64067 6.35823 8.90546 6.35823 8.00037C6.35823 7.09527 7.09344 6.36006 7.99854 6.36006C8.90363 6.36006 9.63884 7.09527 9.63884 8.00037C9.63884 8.90546 8.90363 9.64067 7.99854 9.64067Z"]},p={prefix:"fac",iconName:"upload",icon:[32,32,[],"e005","M15.3415 5.24742C15.7185 4.91753 16.2815 4.91753 16.6585 5.24742L24.6585 12.2474C25.0741 12.6111 25.1163 13.2429 24.7526 13.6585C24.3889 14.0741 23.7571 14.1163 23.3415 13.7526L17 8.20377V19C17 19.5523 16.5523 20 16 20C15.4477 20 15 19.5523 15 19V8.20377L8.6585 13.7526C8.24287 14.1163 7.61111 14.0741 7.24742 13.6585C6.88374 13.2429 6.92586 12.6111 7.3415 12.2474L15.3415 5.24742ZM7 20C7.55228 20 8 20.4477 8 21V26H24V21C24 20.4477 24.4477 20 25 20C25.5523 20 26 20.4477 26 21V27C26 27.5523 25.5523 28 25 28H7C6.44772 28 6 27.5523 6 27V21C6 20.4477 6.44772 20 7 20Z"]},b={prefix:"fac",iconName:"ussd",icon:[32,32,[],"e006","M18 23h11v-20h-26v20h9.541l0.607 3.639 4.852-3.639zM11.79 31.408c-0.36 0.27-0.878 0.062-0.952-0.381l-0.838-5.026h-8c-1.105 0-2-0.895-2-2v-22c0-1.105 0.895-2 2-2h28c1.105 0 2 0.895 2 2v22c0 1.105-0.895 2-2 2h-11l-7.21 5.408z M11.052 10l-0.331 3.077 3.014-0.872 0.265 2.103-2.749 0.205 1.805 2.479-1.838 1.009-1.259-2.615-1.11 2.598-1.905-0.991 1.789-2.479-2.733-0.222 0.315-2.085 2.948 0.872-0.331-3.077h2.12z M24.193 13.377l-0.306 1.268h1.674v1.133h-1.927l-0.505 2.222h-1.422l0.505-2.222h-1.262l-0.492 2.222h-1.395l0.478-2.222h-1.542v-1.133h1.794l0.306-1.268h-1.634v-1.144h1.874l0.505-2.233h1.422l-0.505 2.233h1.289l0.505-2.233h1.395l-0.505 2.233h1.555v1.144h-1.807zM21.203 14.645h1.276l0.306-1.268h-1.276l-0.306 1.268z"]},f={prefix:"fac",iconName:"copy",icon:[32,32,[],"e007","M14.667 13.333c-.737 0-1.334.597-1.334 1.334v12c0 .736.597 1.333 1.334 1.333h12c.736 0 1.333-.597 1.333-1.333v-12c0-.737-.597-1.334-1.333-1.334h-12zm-4 1.334a4 4 0 0 1 4-4h12a4 4 0 0 1 4 4v12a4 4 0 0 1-4 4h-12a4 4 0 0 1-4-4v-12z M5.333 4A1.333 1.333 0 0 0 4 5.333v12a1.333 1.333 0 0 0 1.333 1.334h1.334a1.333 1.333 0 1 1 0 2.666H5.333a4 4 0 0 1-4-4v-12a4 4 0 0 1 4-4h12a4 4 0 0 1 4 4v1.334a1.333 1.333 0 1 1-2.666 0V5.333A1.334 1.334 0 0 0 17.333 4h-12z"]},h={prefix:"fac",iconName:"expand",icon:[32,32,[],"e008","M13.432 27.9a1.333 1.333 0 0 1-1.304 1.36l-7.998.172a1.333 1.333 0 0 1-1.362-1.304l-.171-7.999a1.333 1.333 0 0 1 2.666-.057l.142 6.665 6.666-.142a1.333 1.333 0 0 1 1.361 1.304zM28.201 13.123a1.333 1.333 0 0 1-1.39-1.273l-.294-6.66-6.66.293a1.333 1.333 0 1 1-.118-2.664l7.992-.352a1.333 1.333 0 0 1 1.39 1.273l.353 7.992a1.333 1.333 0 0 1-1.273 1.391z M17.977 14.518a1.333 1.333 0 0 1-.084-1.884L26.806 2.9a1.333 1.333 0 0 1 1.967 1.8l-8.913 9.736c-.497.543-1.34.58-1.883.083zM3.179 29.062a1.333 1.333 0 0 1-.04-1.886l9.13-9.53a1.333 1.333 0 0 1 1.926 1.844l-9.131 9.531c-.51.532-1.354.55-1.885.04z"]},v={prefix:"fac",iconName:"minimize",icon:[32,32,[],"e009","M4 18.667c0-.737.597-1.334 1.333-1.334h8c.737 0 1.334.597 1.334 1.334v8a1.333 1.333 0 0 1-2.667 0V20H5.333A1.333 1.333 0 0 1 4 18.667zM18.667 4C19.403 4 20 4.597 20 5.333V12h6.667a1.333 1.333 0 1 1 0 2.667h-8a1.333 1.333 0 0 1-1.334-1.334v-8c0-.736.597-1.333 1.334-1.333z M28.943 3.057c.52.52.52 1.365 0 1.886l-9.334 9.333a1.333 1.333 0 1 1-1.885-1.886l9.333-9.333c.52-.52 1.365-.52 1.886 0zM14.276 17.724c.52.52.52 1.365 0 1.886l-9.333 9.333a1.333 1.333 0 0 1-1.886-1.886l9.333-9.333c.521-.52 1.365-.52 1.886 0z"]},_={prefix:"fac",iconName:"single-exit",icon:[32,32,[],"e010","M21 8H11V14H21V8ZM10 7V15H15.5V19H12V25H20V19H16.5V15H22V7H10ZM13 20H19V24H13V20Z"]},g={prefix:"fac",iconName:"advanced-exit",icon:[32,32,[],"e011","M11 8H21V14H11V8ZM10 7H22V15H16.5V19H25V25H7V19H15.5V15H10V7ZM24 20H8V24H24V20ZM13 22C13 22.5523 12.5523 23 12 23C11.4477 23 11 22.5523 11 22C11 21.4477 11.4477 21 12 21C12.5523 21 13 21.4477 13 22ZM16 23C16.5523 23 17 22.5523 17 22C17 21.4477 16.5523 21 16 21C15.4477 21 15 21.4477 15 22C15 22.5523 15.4477 23 16 23ZM21 22C21 22.5523 20.5523 23 20 23C19.4477 23 19 22.5523 19 22C19 21.4477 19.4477 21 20 21C20.5523 21 21 21.4477 21 22Z"]},m={prefix:"fac",iconName:"one-exit-per-choice",icon:[32,32,[],"e012","M21 8H11V14H21V8ZM10 7V15H15.5V18.5H11.5V21H9V25H14V21H12.5V19.5H19.5V21H18V25H23V21H20.5V18.5H16.5V15H22V7H10ZM10 24V22H13V24H10ZM22 24V22H19V24H22Z"]},k={prefix:"fac",iconName:"home",icon:[24,24,[],"e013","M9.38843 22.559V15.3539H14.6058V22.559C14.6058 23.3515 15.1927 24 15.9101 24H19.8231C20.5405 24 21.1275 23.3515 21.1275 22.559V12.4719H23.3448C23.9448 12.4719 24.2318 11.6506 23.7753 11.2183L12.871 0.367457C12.3754 -0.122486 11.6188 -0.122486 11.1232 0.367457L0.218936 11.2183C-0.224539 11.6506 0.0493717 12.4719 0.649367 12.4719H2.86674V22.559C2.86674 23.3515 3.45369 24 4.17108 24H8.08409C8.80148 24 9.38843 23.3515 9.38843 22.559Z"]},y={prefix:"fac",iconName:"content",icon:[32,32,[],"e014","M23 4v0c0.552 0 1 0.448 1 1v23c0 0.552-0.448 1-1 1h-14c-0.552 0-1-0.448-1-1v-23c0-0.552 0.448-1 1-1h14zM9 3c-1.105 0-2 0.895-2 2v0 23c0 1.105 0.895 2 2 2v0h14c1.105 0 2-0.895 2-2v0-23c0-1.105-0.895-2-2-2v0h-14z M19.7 7v0c0.552 0 1 0.448 1 1v13c0 0.552-0.448 1-1 1h-7.2c-0.552 0-1-0.448-1-1v-13c0-0.552 0.448-1 1-1h7.2zM12.5 6c-1.105 0-2 0.895-2 2v0 13c0 1.105 0.895 2 2 2v0h7.2c1.105 0 2-0.895 2-2v0-13c0-1.105-0.895-2-2-2v0h-7.2zM16 27v0c-0.552 0-1-0.448-1-1s0.448-1 1-1v0c0.552 0 1 0.448 1 1s-0.448 1-1 1zM16 28c1.105 0 2-0.895 2-2s-0.895-2-2-2v0c-1.105 0-2 0.895-2 2s0.895 2 2 2v0z"]},j={prefix:"fac",iconName:"contact",icon:[32,32,[],"e015","M16 13v0c-2.761 0-5-2.239-5-5s2.239-5 5-5v0c2.761 0 5 2.239 5 5s-2.239 5-5 5zM16 14c3.314 0 6-2.686 6-6s-2.686-6-6-6v0c-3.314 0-6 2.686-6 6s2.686 6 6 6v0zM9 15.89h14c1.105 0 2 0.895 2 2v10.443h-18v-10.444c0-1.105 0.895-2 2-2zM26 17.889c0-1.657-1.343-3-3-3v0h-14c-1.657 0-3 1.343-3 3v0 11.444h20v-11.443z"]},O={prefix:"fac",iconName:"branching",icon:[32,32,[],"e016","M12 4v4h-10v-4h10zM2 3c-0.552 0-1 0.448-1 1v0 4c0 0.552 0.448 1 1 1v0h10c0.552 0 1-0.448 1-1v0-4c0-0.552-0.448-1-1-1v0h-10zM26 4v4h-10v-4h10zM16 3c-0.552 0-1 0.448-1 1v0 4c0 0.552 0.448 1 1 1v0h10c0.552 0 1-0.448 1-1v0-4c0-0.552-0.448-1-1-1v0h-10zM20 14v4h-10v-4h10zM10 13c-0.552 0-1 0.448-1 1v0 4c0 0.552 0.448 1 1 1v0h10c0.552 0 1-0.448 1-1v0-4c0-0.552-0.448-1-1-1v0h-10zM30 24v4h-10v-4h10zM20 23c-0.552 0-1 0.448-1 1v0 4c0 0.552 0.448 1 1 1v0h10c0.552 0 1-0.448 1-1v0-4c0-0.552-0.448-1-1-1v0h-10z M15 6.5h-2.5v-1h2.5v1zM28.5 6.5h-2v-1h3v11.5h-8.5v-1h7.5v-9.5zM14.5 19h1v7h3.5v1h-4.5v-8z"]},w={prefix:"fac",iconName:"weather",icon:[32,32,[],"e017","M9.294 7.97c-2.196-0.082-4.117 1.822-4.194 4.36-0.002 0.053-0.003 0.116-0.003 0.179 0 1.041 0.329 2.005 0.889 2.793l-0.010-0.015-0.812 0.578c-0.668-0.936-1.068-2.103-1.068-3.364 0-0.073 0.001-0.146 0.004-0.219l-0 0.010c0.092-2.998 2.39-5.429 5.225-5.323 1.29 0.048 2.444 0.618 3.304 1.505l-0.715 0.694c-0.696-0.717-1.611-1.162-2.62-1.2z M10 16.1c0-3.415 2.506-6.1 5.5-6.1 2.21 0 4.146 1.454 5.017 3.597l0.205 0.504 0.485-0.247c0.699-0.356 1.475-0.554 2.293-0.554 2.994 0 5.5 2.685 5.5 6.1s-2.506 6.1-5.5 6.1h-14.721l-0.219-0.027c-1.965-0.239-3.56-2.093-3.56-4.423 0-2.504 1.835-4.45 4-4.45h0c0.155 0 0.308 0.010 0.44 0.027l0.561 0.068-0.001-0.595zM9.016 15.6h-0.016c-2.805 0-5 2.486-5 5.45 0 2.603 1.688 4.831 4 5.341v0.109h15.5c3.634 0 6.5-3.225 6.5-7.1s-2.866-7.1-6.5-7.1c-0.799 0-1.564 0.157-2.27 0.445-1.088-2.212-3.23-3.745-5.73-3.745-3.476 0-6.25 2.951-6.484 6.6zM13.928 5.91l-1 1.65-0.856-0.52 1-1.65 0.856 0.52zM7.488 3.89l0.5 2.2-0.976 0.22-0.5-2.2 0.976-0.22zM2.24 8.511l2 1.1-0.482 0.876-2-1.1 0.482-0.876zM2.129 16.863l1.5-1.65 0.74 0.672-1.5 1.65-0.74-0.672z"]},C={prefix:"fac",iconName:"developer",icon:[32,32,[],"e018","M11.052 12.934c0-0 0-0 0-0 0-0.25-0.202-0.452-0.452-0.452-0.061 0-0.12 0.012-0.173 0.034l0.003-0.001-7.958 3.23c-0.279 0.116-0.471 0.386-0.471 0.701s0.192 0.585 0.466 0.699l0.005 0.002 7.958 3.23c0.050 0.021 0.108 0.033 0.169 0.033 0.25 0 0.452-0.203 0.452-0.452 0-0.189-0.116-0.351-0.28-0.418l-0.003-0.001-7.746-3.092 7.746-3.093c0.168-0.069 0.284-0.23 0.284-0.42 0-0 0-0 0-0v0zM12.319 25.385c-0.017 0.046-0.026 0.098-0.026 0.153 0 0.255 0.207 0.462 0.462 0.462 0.2 0 0.371-0.128 0.435-0.306l0.001-0.003 6.704-19.076c0.017-0.046 0.026-0.098 0.026-0.153 0-0.255-0.207-0.462-0.462-0.462-0.2 0-0.371 0.128-0.435 0.306l-0.001 0.003-6.704 19.076zM21.57 12.515c-0.053-0.024-0.116-0.038-0.181-0.038-0.25 0-0.452 0.202-0.452 0.452 0 0.193 0.122 0.358 0.292 0.423l0.003 0.001 7.746 3.093-7.746 3.092c-0.174 0.066-0.296 0.231-0.296 0.424 0 0.25 0.202 0.452 0.452 0.452 0.066 0 0.128-0.014 0.184-0.039l-0.003 0.001 7.958-3.229c0.279-0.116 0.471-0.386 0.471-0.701s-0.192-0.585-0.466-0.699l-0.005-0.002-7.958-3.23z"]},x={prefix:"fac",iconName:"text",icon:[32,32,[],"e019","M3.5 6.115a1.5 1.5 0 0 0-1.5 1.5v15.87a1.5 1.5 0 0 0 1.5 1.5h7.112l1.588 3.177c.622 1.245 2.459 1.044 2.796-.307l.718-2.87h8.594a1.5 1.5 0 0 0 1.5-1.5V7.115h-.588v-1H5.469v2h18.34v14.87h-8.486a1.5 1.5 0 0 0-1.455 1.137l-.484 1.936-1.122-2.243a1.5 1.5 0 0 0-1.341-.83H4V8.115h1.469v-2H3.5z M5.469 13.698c0-.454.368-.822.823-.822h7.818a.823.823 0 1 1 0 1.646H6.292a.823.823 0 0 1-.823-.824zM5.469 18.636c0-.454.368-.823.823-.823h11.933a.823.823 0 1 1 0 1.646H6.292a.823.823 0 0 1-.823-.823z M29.335 9.584a6.584 6.584 0 1 1-13.168 0 6.584 6.584 0 0 1 13.168 0z M22.751 14.521a4.938 4.938 0 1 0 0-9.875 4.938 4.938 0 0 0 0 9.875zm0 1.646a6.584 6.584 0 1 0 0-13.167 6.584 6.584 0 0 0 0 13.167z M23.74 12.298a.578.578 0 0 1-1.155 0V8.13h-.972a.508.508 0 0 1 0-1.017h3.099a.508.508 0 1 1 0 1.017h-.972v4.167z"]},E={prefix:"fac",iconName:"message",icon:[32,32,[],"e020","M28 7h-24c-0.552 0-1 0.448-1 1v16c0 0.552 0.448 1 1 1h24c0.552 0 1-0.448 1-1v-16c0-0.552-0.448-1-1-1zM4 4h24c2.209 0 4 1.791 4 4v16c0 2.209-1.791 4-4 4h-24c-2.209 0-4-1.791-4-4v-16c0-2.209 1.791-4 4-4z M13.722 22.023l-12.698-10.884 1.952-2.278 12.698 10.884c0.187 0.16 0.464 0.16 0.651 0l12.698-10.884 1.952 2.278-12.698 10.884c-1.311 1.124-3.245 1.124-4.556 0z"]};var I=[c,l,d,u,p,b,f,h,v,_,g,m,k,y,j,O,w,C,x,E];s["c"].add(r["c"],n["a"],r["d"],r["e"],n["b"],n["c"],n["d"],n["e"],n["f"],n["g"],r["h"],r["j"],n["h"],r["k"],n["i"],r["g"],r["f"],r["a"],r["b"],r["i"],r["l"],...I),i["default"].component("FontAwesomeIcon",a["a"])},"0484":function(e,t,o){},"0abd":function(e,t,o){},"0de0":function(e,t,o){var i={"./1.0.0-rc1/IAdvancedSelectOneBlock.json":"467b","./1.0.0-rc1/ICaseBlock.json":"24dc","./1.0.0-rc1/ILocationResponseBlock.json":"b194","./1.0.0-rc1/ILogBlock.json":"7074","./1.0.0-rc1/IMessageBlock.json":"aa41","./1.0.0-rc1/INumericResponseBlock.json":"e0ae","./1.0.0-rc1/IOpenResponseBlock.json":"5831","./1.0.0-rc1/IOutputBlock.json":"5663","./1.0.0-rc1/IPhotoResponseBlock.json":"a0ef","./1.0.0-rc1/IPrintBlock.json":"79a9","./1.0.0-rc1/IReadBlock.json":"27e7","./1.0.0-rc1/IRunFlowBlock.json":"bf9a","./1.0.0-rc1/ISelectManyResponseBlock.json":"44db","./1.0.0-rc1/ISelectOneResponseBlock.json":"5149","./1.0.0-rc1/ISetContactPropertyBlock.json":"f37b","./1.0.0-rc1/ISetGroupMembershipBlock.json":"45d5","./1.0.0-rc2/IAdvancedSelectOneBlock.json":"5c3b","./1.0.0-rc2/ICaseBlock.json":"fabe","./1.0.0-rc2/ILocationResponseBlock.json":"24e6","./1.0.0-rc2/ILogBlock.json":"025b","./1.0.0-rc2/IMessageBlock.json":"5402","./1.0.0-rc2/INumericResponseBlock.json":"0999","./1.0.0-rc2/IOpenResponseBlock.json":"6612","./1.0.0-rc2/IOutputBlock.json":"c3a9","./1.0.0-rc2/IPhotoResponseBlock.json":"42f5","./1.0.0-rc2/IPrintBlock.json":"3d43","./1.0.0-rc2/IReadBlock.json":"56d3","./1.0.0-rc2/IRunFlowBlock.json":"4377","./1.0.0-rc2/ISelectManyResponseBlock.json":"468a","./1.0.0-rc2/ISelectOneResponseBlock.json":"897a","./1.0.0-rc2/ISetContactPropertyBlock.json":"9744","./1.0.0-rc2/ISetGroupMembershipBlock.json":"f2ae","./1.0.0-rc3/IAdvancedSelectOneBlock.json":"ebe9","./1.0.0-rc3/ICaseBlock.json":"df71","./1.0.0-rc3/ILocationResponseBlock.json":"4b5a","./1.0.0-rc3/ILogBlock.json":"5c92","./1.0.0-rc3/IMessageBlock.json":"9f75","./1.0.0-rc3/INumericResponseBlock.json":"ca51","./1.0.0-rc3/IOpenResponseBlock.json":"284f","./1.0.0-rc3/IOutputBlock.json":"bf9b","./1.0.0-rc3/IPhotoResponseBlock.json":"3da6","./1.0.0-rc3/IPrintBlock.json":"b781","./1.0.0-rc3/IReadBlock.json":"5bbb","./1.0.0-rc3/IRunFlowBlock.json":"84e0","./1.0.0-rc3/ISelectManyResponseBlock.json":"347b","./1.0.0-rc3/ISelectOneResponseBlock.json":"8832","./1.0.0-rc3/ISetContactPropertyBlock.json":"9b07","./1.0.0-rc3/ISetGroupMembershipBlock.json":"e4a3","./1.0.0-rc4/IAdvancedSelectOneBlock.json":"171d","./1.0.0-rc4/ICaseBlock.json":"35a7","./1.0.0-rc4/ILocationResponseBlock.json":"c6df","./1.0.0-rc4/ILogBlock.json":"0468","./1.0.0-rc4/IMessageBlock.json":"6faa","./1.0.0-rc4/INumericResponseBlock.json":"d6b7","./1.0.0-rc4/IOpenResponseBlock.json":"6897","./1.0.0-rc4/IOutputBlock.json":"ee9c","./1.0.0-rc4/IPhotoResponseBlock.json":"fdc7","./1.0.0-rc4/IPrintBlock.json":"3897","./1.0.0-rc4/IReadBlock.json":"74af","./1.0.0-rc4/IRunFlowBlock.json":"a629","./1.0.0-rc4/ISelectManyResponseBlock.json":"bcf6","./1.0.0-rc4/ISelectOneResponseBlock.json":"fea9","./1.0.0-rc4/ISetContactPropertyBlock.json":"7464","./1.0.0-rc4/ISetGroupMembershipBlock.json":"f47e","./current/IAdvancedSelectOneBlock.json":"9e25","./current/ICaseBlock.json":"0e0e","./current/ILocationResponseBlock.json":"24e9","./current/ILogBlock.json":"8b9f","./current/IMessageBlock.json":"1010","./current/INumericResponseBlock.json":"5cb6","./current/IOpenResponseBlock.json":"30f6","./current/IOutputBlock.json":"858c","./current/IPhotoResponseBlock.json":"768e","./current/IPrintBlock.json":"7cfe","./current/IReadBlock.json":"65d3","./current/IRunFlowBlock.json":"2ced","./current/ISelectManyResponseBlock.json":"d713","./current/ISelectOneResponseBlock.json":"d76c","./current/ISetContactPropertyBlock.json":"41c5","./current/ISetGroupMembershipBlock.json":"44b3"};function a(e){var t=s(e);return o(t)}function s(e){if(!o.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=s,e.exports=a,a.id="0de0"},"11a6":function(e,t,o){},1797:function(e,t,o){"use strict";o("4577")},"1a2e":function(e,t,o){},"1dd2":function(e,t,o){},"1eb1":function(e,t,o){"use strict";o("21be")},"21be":function(e,t,o){},2344:function(e,t,o){"use strict";o("ea87")},"244b":function(e,t,o){"use strict";o.d(t,"f",(function(){return n})),o.d(t,"e",(function(){return c})),o.d(t,"b",(function(){return l})),o.d(t,"a",(function(){return d})),o.d(t,"c",(function(){return u})),o.d(t,"g",(function(){return p})),o.d(t,"d",(function(){return b}));var i=o("a026"),a=o("2ef0"),s=o("9300");function r(e,t){const o=Object(a["toPath"])(t);let s=e;while(1!==o.length){const e=o.shift();"undefined"===typeof s[e]&&i["default"].set(s,e,{}),s=s[e]}return[s,o.shift()]}function n(e,t,o,a){const n=Object(s["findBlockOnActiveFlowWith"])(t,e),[c,l]=r(n,o);i["default"].set(c,l,a)}function c(e,t,o,a,n){const c=Object(s["findBlockOnActiveFlowWith"])(t,e),l=Object(s["findBlockExitWith"])(o,c),[d,u]=r(l,a);i["default"].set(d,u,n)}function l(e,t,o,a){const n=Object(s["findBlockOnActiveFlowWith"])(t,e),c=Object(s["findBlockExitWith"])(o,n),[l,d]=r(c,a);i["default"].delete(l,d)}function d(e,t,o){const[a,s]=r(t,o);i["default"].delete(a,s)}function u(e,t,o){const a=Object(s["findBlockOnActiveFlowWith"])(t,e),[n,c]=r(a,o);i["default"].delete(n,c)}function p(e,t,o,a){const n=Object(s["findFlowWith"])(t,e),[c,l]=r(n,o);i["default"].set(c,l,a)}function b(e,t,o){const a=Object(s["findFlowWith"])(t,e),[n,c]=r(a,o);i["default"].delete(n,c)}},2930:function(e,t,o){
/**
 * @license MIT
 */
(function(e,t,o){function i(e){if(this.version="2.0.0-beta2",this.support="undefined"!==typeof File&&"undefined"!==typeof Blob&&"undefined"!==typeof FileList&&(!!Blob.prototype.slice||!!Blob.prototype.webkitSlice||!!Blob.prototype.mozSlice||!1),!this.support)return;this.files=[],this.defaults={chunkSize:1048576,forceChunkSize:!1,simultaneousUploads:3,singleFile:!1,fileParameterName:"file",progressCallbacksInterval:500,speedSmoothingFactor:.1,query:{},headers:{},withCredentials:!1,preprocess:null,method:"multipart",prioritizeFirstAndLastChunk:!1,target:"/",testChunks:!0,generateUniqueIdentifier:null,maxChunkRetries:0,chunkRetryInterval:null,permanentErrors:[404,415,500,501]},this.opts={},this.events=[];const t=this;this.onDrop=function(e){e.stopPropagation(),e.preventDefault();const o=e.dataTransfer;o.items&&o.items[0].webkitGetAsEntry?t.webkitReadDataTransfer(e):t.addFiles(o.files,e)},this.preventEvent=function(e){e.preventDefault()},this.opts=i.extend({},this.defaults,e||{})}function a(e,t){this.flowObj=e,this.file=t,this.name=t.fileName||t.name,this.size=t.size,this.relativePath=t.relativePath||t.webkitRelativePath||this.name,this.uniqueIdentifier=e.generateUniqueIdentifier(t),this.chunks=[],this.paused=!1,this.error=!1,this.averageSpeed=0,this.currentSpeed=0,this._lastProgressCallback=Date.now(),this._prevUploadedSize=0,this._prevProgress=0,this.bootstrap()}function s(e,t,o){this.flowObj=e,this.fileObj=t,this.fileObjSize=t.size,this.offset=o,this.tested=!1,this.retries=0,this.pendingRetry=!1,this.preprocessState=0,this.loaded=0,this.total=0;const i=this.flowObj.opts.chunkSize;this.startByte=this.offset*i,this.endByte=Math.min(this.fileObjSize,(this.offset+1)*i),this.xhr=null,this.fileObjSize-this.endByte<i&&!this.flowObj.opts.forceChunkSize&&(this.endByte=this.fileObjSize);const a=this;this.progressHandler=function(e){e.lengthComputable&&(a.loaded=e.loaded,a.total=e.total),a.fileObj.chunkEvent("progress")},this.testHandler=function(e){const t=a.status();"success"===t?(a.tested=!0,a.fileObj.chunkEvent(t,a.message()),a.flowObj.uploadNextChunk()):a.fileObj.paused||(a.tested=!0,a.send())},this.doneHandler=function(e){const t=a.status();if("success"===t||"error"===t)a.fileObj.chunkEvent(t,a.message()),a.flowObj.uploadNextChunk();else{a.fileObj.chunkEvent("retry",a.message()),a.pendingRetry=!0,a.abort(),a.retries++;const e=a.flowObj.opts.chunkRetryInterval;null!==e?setTimeout(()=>{a.send()},e):a.send()}}}function r(e,t){return n(arguments,t=>{t!==e&&n(t,(t,o)=>{e[o]=t})}),e}function n(e,t,o){if(!e)return;let i;if("undefined"!==typeof e.length){for(i=0;i<e.length;i++)if(!1===t.call(o,e[i],i))return}else for(i in e)if(e.hasOwnProperty(i)&&!1===t.call(o,e[i],i))return}i.prototype={on(e,t){this.events.push(e.toLowerCase(),t)},fire(e,t){t=Array.prototype.slice.call(arguments),e=e.toLowerCase();let o=!1;for(let i=0;i<=this.events.length;i+=2)this.events[i]===e&&(o=!1===this.events[i+1].apply(this,t.slice(1))||o),"catchall"===this.events[i]&&(o=!1===this.events[i+1].apply(null,t)||o);return!o},webkitReadDataTransfer(e){const t=this;let o=e.dataTransfer.items.length;const i=[];function a(e){o+=e.length,n(e,e=>{if(e.isFile){const t=e.fullPath;e.file(e=>{s(e,t)},r)}else e.isDirectory&&e.createReader().readEntries(a,r)}),c()}function s(e,t){e.relativePath=t.substring(1),i.push(e),c()}function r(e){throw e}function c(){0==--o&&t.addFiles(i,e)}n(e.dataTransfer.items,e=>{const t=e.webkitGetAsEntry();t&&(t.isFile?s(e.getAsFile(),t.fullPath):t.createReader().readEntries(a,r))})},generateUniqueIdentifier(e){const t=this.opts.generateUniqueIdentifier;if("function"===typeof t)return t(e);const o=e.relativePath||e.webkitRelativePath||e.fileName||e.name;return`${e.size}-${o.replace(/[^0-9a-zA-Z_-]/gim,"")}`},uploadNextChunk(e){let t=!1;if(this.opts.prioritizeFirstAndLastChunk&&(n(this.files,e=>!e.paused&&e.chunks.length&&"pending"===e.chunks[0].status()&&0===e.chunks[0].preprocessState?(e.chunks[0].send(),t=!0,!1):!e.paused&&e.chunks.length>1&&"pending"===e.chunks[e.chunks.length-1].status()&&0===e.chunks[0].preprocessState?(e.chunks[e.chunks.length-1].send(),t=!0,!1):void 0),t))return t;if(n(this.files,e=>{if(e.paused||n(e.chunks,e=>{if("pending"===e.status()&&0===e.preprocessState)return e.send(),t=!0,!1}),t)return!1}),t)return!0;let o=!1;return n(this.files,e=>{if(!e.isComplete())return o=!0,!1}),o||e||this.fire("complete"),!1},assignBrowse(e,o,i){"undefined"===typeof e.length&&(e=[e]),n(e,(function(e){let a;"INPUT"===e.tagName&&"file"===e.type?a=e:(a=t.createElement("input"),a.setAttribute("type","file"),r(e.style,{display:"block",position:"relative",overflow:"hidden",verticalAlign:"top"}),r(a.style,{position:"absolute",top:0,right:0,fontFamily:"Arial",fontSize:"118px",margin:0,padding:0,opacity:0,cursor:"pointer"}),e.appendChild(a)),this.opts.singleFile||i||a.setAttribute("multiple","multiple"),o&&a.setAttribute("webkitdirectory","webkitdirectory");const s=this;a.addEventListener("change",e=>{s.addFiles(e.target.files,e),e.target.value=""},!1)}),this)},assignDrop(e){"undefined"===typeof e.length&&(e=[e]),n(e,(function(e){e.addEventListener("dragover",this.preventEvent,!1),e.addEventListener("dragenter",this.preventEvent,!1),e.addEventListener("drop",this.onDrop,!1)}),this)},unAssignDrop(e){"undefined"===typeof e.length&&(e=[e]),n(e,(function(e){e.removeEventListener("dragover",this.preventEvent),e.removeEventListener("dragenter",this.preventEvent),e.removeEventListener("drop",this.onDrop)}),this)},isUploading(){let e=!1;return n(this.files,t=>{if(t.isUploading())return e=!0,!1}),e},upload(){if(this.isUploading())return;this.fire("uploadStart");let e=!1;for(let t=1;t<=this.opts.simultaneousUploads;t++)e=this.uploadNextChunk(!0)||e;e||this.fire("complete")},resume(){n(this.files,e=>{e.resume()})},pause(){n(this.files,e=>{e.pause()})},cancel(){for(let e=this.files.length-1;e>=0;e--)this.files[e].cancel()},progress(){let e=0,t=0;return n(this.files,o=>{e+=o.progress()*o.size,t+=o.size}),t>0?e/t:0},addFile(e,t){this.addFiles([e],t)},addFiles(e,t){const o=[];n(e,(function(e){if((e.size%4096!==0||"."!==e.name&&"."!==e.fileName)&&!this.getFromUniqueIdentifier(this.generateUniqueIdentifier(e))){const i=new a(this,e);this.fire("fileAdded",i,t)&&o.push(i)}}),this),this.fire("filesAdded",o,t)&&n(o,(function(e){this.opts.singleFile&&this.files.length>0&&this.removeFile(this.files[0]),this.files.push(e)}),this),this.fire("filesSubmitted",o,t)},removeFile(e){for(let t=this.files.length-1;t>=0;t--)this.files[t]===e&&(this.files.splice(t,1),e.abort())},getFromUniqueIdentifier(e){let t=!1;return n(this.files,o=>{o.uniqueIdentifier===e&&(t=o)}),t},getSize(){let e=0;return n(this.files,t=>{e+=t.size}),e}},a.prototype={measureSpeed(){const e=this.flowObj.opts.speedSmoothingFactor,t=Date.now()-this._lastProgressCallback,o=this.sizeUploaded();this.currentSpeed=Math.max((o-this._prevUploadedSize)/t*1e3,0),this.averageSpeed=e*this.currentSpeed+(1-e)*this.averageSpeed,this._prevUploadedSize=o},chunkEvent(e,t){switch(e){case"progress":if(Date.now()-this._lastProgressCallback<this.flowObj.opts.progressCallbacksInterval)break;this.measureSpeed(),this.flowObj.fire("fileProgress",this),this.flowObj.fire("progress"),this._lastProgressCallback=Date.now();break;case"error":this.error=!0,this.abort(!0),this.flowObj.fire("fileError",this,t),this.flowObj.fire("error",t,this);break;case"success":if(this.error)return;this.flowObj.fire("fileProgress",this),this.flowObj.fire("progress"),this.isComplete()&&this.flowObj.fire("fileSuccess",this,t);break;case"retry":this.flowObj.fire("fileRetry",this);break}},pause(){this.paused=!0,this.abort()},resume(){this.paused=!1,this.flowObj.upload()},abort(e){this.currentSpeed=0,this.averageSpeed=0;const t=this.chunks;e&&(this.chunks=[]),n(t,(function(e){"uploading"===e.status()&&(e.abort(),this.flowObj.uploadNextChunk())}),this)},cancel(){this.flowObj.removeFile(this)},retry(){this.bootstrap(),this.flowObj.upload()},bootstrap(){this.abort(!0),this.error=!1,this._prevProgress=0;const e=this.flowObj.opts.forceChunkSize?Math.ceil:Math.floor,t=Math.max(e(this.file.size/this.flowObj.opts.chunkSize),1);for(let o=0;o<t;o++)this.chunks.push(new s(this.flowObj,this,o))},progress(){if(this.error)return 1;if(1===this.chunks.length)return this._prevProgress=Math.max(this._prevProgress,this.chunks[0].progress()),this._prevProgress;let e=0;n(this.chunks,t=>{e+=t.progress()*(t.endByte-t.startByte)});const t=e/this.size;return this._prevProgress=Math.max(this._prevProgress,t>.999?1:t),this._prevProgress},isUploading(){let e=!1;return n(this.chunks,t=>{if("uploading"===t.status())return e=!0,!1}),e},isComplete(){let e=!1;return n(this.chunks,t=>{const o=t.status();if("pending"===o||"uploading"===o||1===t.preprocessState)return e=!0,!1}),!e},sizeUploaded(){let e=0;return n(this.chunks,t=>{"success"===t.status()?e+=t.endByte-t.startByte:e+=t.loaded}),e},timeRemaining(){return this.averageSpeed?Math.floor(Math.max(this.size-this.sizeUploaded(),0)/this.averageSpeed):0},getType(){return this.file.type&&this.file.type.split("/")[1]},getExtension(){return this.name.substr(2+(~-this.name.lastIndexOf(".")>>>0)).toLowerCase()}},s.prototype={getParams(){return{flowChunkNumber:this.offset+1,flowChunkSize:this.flowObj.opts.chunkSize,flowCurrentChunkSize:this.endByte-this.startByte,flowTotalSize:this.fileObjSize,flowIdentifier:this.fileObj.uniqueIdentifier,flowFilename:this.fileObj.name,flowRelativePath:this.fileObj.relativePath,flowTotalChunks:this.fileObj.chunks.length}},getTarget(e){let t=this.flowObj.opts.target;return t.indexOf("?")<0?t+="?":t+="&",t+e.join("&")},test(){this.xhr=new XMLHttpRequest,this.xhr.addEventListener("load",this.testHandler,!1),this.xhr.addEventListener("error",this.testHandler,!1);const e=this.prepareXhrRequest("GET");this.xhr.send(e)},preprocessFinished(){this.preprocessState=2,this.send()},send(){const e=this.flowObj.opts.preprocess;if("function"===typeof e)switch(this.preprocessState){case 0:return e(this),void(this.preprocessState=1);case 1:return;case 2:break}if(this.flowObj.opts.testChunks&&!this.tested)return void this.test();this.loaded=0,this.total=0,this.pendingRetry=!1;const t=this.fileObj.file.slice?"slice":this.fileObj.file.mozSlice?"mozSlice":this.fileObj.file.webkitSlice?"webkitSlice":"slice",o=this.fileObj.file[t](this.startByte,this.endByte);this.xhr=new XMLHttpRequest,this.xhr.upload.addEventListener("progress",this.progressHandler,!1),this.xhr.addEventListener("load",this.doneHandler,!1),this.xhr.addEventListener("error",this.doneHandler,!1);const i=this.prepareXhrRequest("POST",this.flowObj.opts.method,o);this.xhr.send(i)},abort(){const e=this.xhr;this.xhr=null,e&&e.abort()},status(){return this.pendingRetry?"uploading":this.xhr?this.xhr.readyState<4?"uploading":200==this.xhr.status?"success":this.flowObj.opts.permanentErrors.indexOf(this.xhr.status)>-1||this.retries>=this.flowObj.opts.maxChunkRetries?"error":(this.abort(),"pending"):"pending"},message(){return this.xhr?this.xhr.responseText:""},progress(){if(this.pendingRetry)return 0;const e=this.status();return"success"===e||"error"===e?1:"pending"===e?0:this.total>0?this.loaded/this.total:0},prepareXhrRequest(e,t,o){let i=this.flowObj.opts.query;"function"===typeof i&&(i=i(this.fileObj,this)),i=r(this.getParams(),i);let a=this.flowObj.opts.target,s=null;if("GET"===e||"octet"===t){const e=[];n(i,(t,o)=>{e.push([encodeURIComponent(o),encodeURIComponent(t)].join("="))}),a=this.getTarget(e),s=o||null}else s=new FormData,n(i,(e,t)=>{s.append(t,e)}),s.append(this.flowObj.opts.fileParameterName,o);return this.xhr.open(e,a),this.xhr.withCredentials=this.flowObj.opts.withCredentials,n(this.flowObj.opts.headers,(function(e,t){this.xhr.setRequestHeader(t,e)}),this),s}},i.extend=r,i.each=n,i.FlowFile=a,i.FlowChunk=s,e.Flow=i})(window,document),e.exports=window.Flow},"2b04":function(e,t,o){},"2b44":function(e,t,o){"use strict";o.r(t),o.d(t,"SmartDevices_PhotoResponseBlock",(function(){return m})),o.d(t,"install",(function(){return y}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"smart-devices-photo-response-block"},[t("base-block",{attrs:{block:e.block,"show-semantic-label":!1,"uses-default-contact-props-editor":e.usesDefaultContactPropsEditor,"uses-default-branching-editor":e.usesDefaultBranchingEditor},on:{handleBranchingTypeChangedToUnified:function(t){return e.handleBranchingTypeChangedToUnified({block:e.block})}}},[e._t("description",null,{slot:"description"}),e._t("resource-editors",(function(){return[t("per-language-resource-editor",{attrs:{block:e.block}})]}),{slot:"resource-editors"}),e._t("extras",null,{slot:"extras"}),e._t("vendor-extras",null,{slot:"vendor-extras"}),e._t("branching",null,{slot:"branching"}),e._t("contact-props",null,{slot:"contact-props"}),e._t("vendor",null,{slot:"vendor"})],2)],1)},a=[],s=o("9ab4"),r=o("4bb5"),n=o("1b40"),c=o("2ef0"),l=o("4004");const d="SmartDevices.PhotoResponse",u={...l["a"],async createWith(e,t){let{getters:o,dispatch:i}=e,{props:a}=t;a.type=d;const s=await i("flow/flow_addBlankResourceForEnabledModesAndLangs",null,{root:!0});return a.config={prompt:s.uuid},l["a"].createWith({getters:o,dispatch:i},{props:a})}},p={...Object(c["cloneDeep"])(l["b"]),actions:u};var b=p,f=o("4a51"),h=o("af98"),v=o("2fe1");Object(r["e"])("flow");const _=Object(r["e"])("builder"),g=Object(r["e"])("flow/"+d);let m=class extends(Object(v["c"])(f["a"])){};Object(s["__decorate"])([Object(n["b"])()],m.prototype,"block",void 0),Object(s["__decorate"])([Object(n["b"])({default:!0})],m.prototype,"usesDefaultBranchingEditor",void 0),Object(s["__decorate"])([Object(n["b"])({default:!0})],m.prototype,"usesDefaultContactPropsEditor",void 0),Object(s["__decorate"])([_.Getter],m.prototype,"isEditable",void 0),Object(s["__decorate"])([g.Action],m.prototype,"handleBranchingTypeChangedToUnified",void 0),m=Object(s["__decorate"])([Object(n["a"])({})],m);var k=m;const y=Object(h["c"])(d,b);var j=k,O=o("0c7c"),w=Object(O["a"])(j,i,a,!1,null,null,null);t["default"]=w.exports},"2d61":function(e,t,o){"use strict";o.r(t),o.d(t,"MobilePrimitives_NumericResponseBlock",(function(){return y})),o.d(t,"install",(function(){return O}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"mobile-primitive-numeric-response-block"},[t("base-block",{attrs:{block:e.block,"show-semantic-label":!1,"uses-default-contact-props-editor":e.usesDefaultContactPropsEditor,"uses-default-branching-editor":e.usesDefaultBranchingEditor},on:{handleBranchingTypeChangedToUnified:function(t){return e.handleBranchingTypeChangedToUnified({block:e.block})}}},[e._t("description",null,{slot:"description"}),e._t("resource-editors",(function(){return[t("per-language-resource-editor",{attrs:{block:e.block}})]}),{slot:"resource-editors"}),e._t("extras",(function(){return[t("minimum-numeric-editor",{attrs:{block:e.block},on:{commitValidationMinimumChange:e.updateValidationMin}}),t("maximum-numeric-editor",{attrs:{block:e.block},on:{commitValidationMaximumChange:e.updateValidationMax}}),t("max-digit-editor",{attrs:{block:e.block,"has-ivr":e.hasVoiceMode},on:{commitMaxDigitsChange:e.updateMaxDigits}})]}),{slot:"extras"}),e._t("vendor-extras",null,{slot:"vendor-extras"}),e._t("branching",null,{slot:"branching"}),e._t("contact-props",null,{slot:"contact-props"}),e._t("vendor",null,{slot:"vendor"})],2)],1)},a=[],s=o("9ab4"),r=o("4bb5"),n=o("1b40"),c=o("2ef0"),l=o("4004");const d="MobilePrimitives.NumericResponse",u={...l["a"],async setValidationMinimum(e,t){let{commit:o}=e,{blockId:i,value:a}=t;const s=""===a?void 0:a;return o("flow/block_updateConfigByKey",{blockId:i,key:"validation_minimum",value:s},{root:!0}),s},async setValidationMaximum(e,t){let{commit:o}=e,{blockId:i,value:a}=t;const s=""===a?void 0:a;return o("flow/block_updateConfigByKey",{blockId:i,key:"validation_maximum",value:s},{root:!0}),s},async setMaxDigits(e,t){let{commit:o}=e,{blockId:i,value:a}=t;const s=""===a?void 0:a;return o("flow/block_updateConfigByKey",{blockId:i,key:"ivr",value:{max_digits:s}},{root:!0}),s},async createWith(e,t){let{getters:o,dispatch:i,commit:a}=e,{props:s}=t;s.type=d;const r=await i("flow/flow_addBlankResourceForEnabledModesAndLangs",null,{root:!0});return s.config={prompt:r.uuid,validation_minimum:void 0,validation_maximum:void 0},l["a"].createWith({getters:o,dispatch:i},{props:s})},async validateWithProgrammaticLogic(e,t){let{rootGetters:o}=e,{block:i}=t;var a,s,r,n;console.debug("floip/NumericResponse/validateWithProgrammaticLogic()",""+i.type);const c=o["flow/hasVoiceMode"],l=[],[d,u]=p(null===(s=null===(a=i.config)||void 0===a?void 0:a.ivr)||void 0===s?void 0:s.max_digits),[b,f]=p(null===(r=i.config)||void 0===r?void 0:r.validation_maximum),[h,v]=p(null===(n=i.config)||void 0===n?void 0:n.validation_minimum),_=f&&v,g=_&&h>b,m=v&&!f,k="/config/validation_minimum",y="/config/validation_maximum",j="/config/ivr/max_digits";if((g||m)&&(l.push([k,"numeric-block-min-value-must-be-lower-than-max-value"]),l.push([y,"numeric-block-max-value-must-be-greater-than-min-value"])),!0===c&&(f||u||(l.push([j,"numeric-block-missing-max-value-and-max-digits"]),l.push([y,"numeric-block-missing-max-value-and-max-digits"])),u)){const e=10**d-1;v&&h>e&&(l.push([j,"numeric-block-min-value-must-be-lower-than-implied-max-digits"]),l.push([k,"numeric-block-min-value-must-be-lower-than-implied-max-digits"])),f&&b>e&&(l.push([j,"numeric-block-max-value-must-be-lower-than-implied-max-digits"]),l.push([y,"numeric-block-max-value-must-be-lower-than-implied-max-digits"]))}return l}};function p(e){let t=0,o=!1;return void 0!==e&&null!==e&&(o=!0,t="number"===typeof e?e:parseInt(e,10)),[t,o]}const b={...Object(c["cloneDeep"])(l["b"]),actions:u};var f=b,h=o("4a51"),v=o("af98"),_=o("2fe1");const g=Object(r["e"])("flow"),m=Object(r["e"])("flow/"+d),k=Object(r["e"])("builder");let y=class extends(Object(_["c"])(h["a"])){updateValidationMin(e){this.setValidationMinimum({blockId:this.block.uuid,value:e})}updateValidationMax(e){this.setValidationMaximum({blockId:this.block.uuid,value:e})}updateMaxDigits(e){this.setMaxDigits({blockId:this.block.uuid,value:e})}};Object(s["__decorate"])([Object(n["b"])()],y.prototype,"block",void 0),Object(s["__decorate"])([Object(n["b"])({default:!0})],y.prototype,"usesDefaultBranchingEditor",void 0),Object(s["__decorate"])([Object(n["b"])({default:!0})],y.prototype,"usesDefaultContactPropsEditor",void 0),Object(s["__decorate"])([g.Getter],y.prototype,"hasVoiceMode",void 0),Object(s["__decorate"])([m.Action],y.prototype,"setValidationMinimum",void 0),Object(s["__decorate"])([m.Action],y.prototype,"setValidationMaximum",void 0),Object(s["__decorate"])([m.Action],y.prototype,"setMaxDigits",void 0),Object(s["__decorate"])([m.Action],y.prototype,"handleBranchingTypeChangedToUnified",void 0),Object(s["__decorate"])([k.Getter],y.prototype,"isEditable",void 0),y=Object(s["__decorate"])([Object(n["a"])({})],y);var j=y;const O=Object(v["c"])(d,f);var w=j,C=o("0c7c"),x=Object(C["a"])(w,i,a,!1,null,null,null);t["default"]=x.exports},3070:function(e,t,o){},"33da":function(e,t,o){"use strict";o("5bf3")},"34c1":function(e,t,o){var i={"./1.0.0-rc1/flowSpecJsonSchema.json":"fc41","./1.0.0-rc2/flowSpecJsonSchema.json":"5a2e","./1.0.0-rc3/flowSpecJsonSchema.json":"29d3","./1.0.0-rc4/flowSpecJsonSchema.json":"9b2d","./current/flowSpecJsonSchema.json":"0eaa"};function a(e){var t=s(e);return o(t)}function s(e){if(!o.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=s,e.exports=a,a.id="34c1"},3659:function(e,t,o){},"3ef7":function(e,t,o){"use strict";o.r(t),o.d(t,"BaseBlock",(function(){return u}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"base-block"},[t("div",{staticClass:"block-editor-header remove-margin-left-right"},[t("h3",{staticClass:"put-back-margin-left-right"},[e._v(" "+e._s(e.trans("flow-builder."+e.block.type))+" ")])]),e._t("description"),t("fieldset",{attrs:{disabled:!e.isEditable}},[t("label-editor",{attrs:{block:e.block},on:{gearClicked:function(t){e.showSemanticLabel=!e.showSemanticLabel}}}),e.showSemanticLabel?t("semantic-label-editor",{attrs:{block:e.block}}):e._e(),t("name-editor",{attrs:{block:e.block}}),e._t("resource-editors"),t("hr"),e._t("extras"),e._t("vendor-extras"),e._t("branching",(function(){return[e.usesDefaultBranchingEditor?t("block-output-branching-config",{attrs:{block:e.block,"has-exit-per-choice":!1},on:{branchingTypeChangedToUnified:e.handleBranchingTypeChangedToUnified}}):e._e()]})),t("categorization",{attrs:{block:e.block}}),e._t("contact-props",(function(){return[e.usesDefaultContactPropsEditor?t("generic-contact-property-editor",{attrs:{block:e.block}}):e._e()]})),e._t("vendor"),t("hr"),t("first-block-editor-button",{attrs:{"block-id":e.block.uuid}})],2),t("block-id",{attrs:{block:e.block}})],2)},a=[],s=o("9ab4"),r=o("4bb5"),n=o("1b40"),c=o("4a51"),l=o("2fe1");const d=Object(r["e"])("builder");let u=class extends(Object(l["c"])(c["a"])){handleBranchingTypeChangedToUnified(){this.$emit("handleBranchingTypeChangedToUnified")}};Object(s["__decorate"])([Object(n["b"])()],u.prototype,"block",void 0),Object(s["__decorate"])([Object(n["b"])({default:!0})],u.prototype,"usesDefaultBranchingEditor",void 0),Object(s["__decorate"])([Object(n["b"])({default:!0})],u.prototype,"usesDefaultContactPropsEditor",void 0),Object(s["__decorate"])([Object(n["b"])({default:!1})],u.prototype,"showSemanticLabel",void 0),Object(s["__decorate"])([d.Getter],u.prototype,"isEditable",void 0),u=Object(s["__decorate"])([Object(n["a"])({})],u);var p=u,b=p,f=o("0c7c"),h=Object(f["a"])(b,i,a,!1,null,null,null);t["default"]=h.exports},4004:function(e,t,o){"use strict";o.d(t,"c",(function(){return r})),o.d(t,"d",(function(){return n})),o.d(t,"a",(function(){return c}));var i=o("2ef0"),a=o("d3a4"),s=o("4a51");const r={primaryExitTest:()=>e=>{}},n={},c={async createWith(e,t){let{getters:o,dispatch:a}=e,{props:s}=t;const r={vendor_metadata:await a("initiateExtraVendorConfig")},n={type:"",name:"",label:"",semantic_label:"",config:{},tags:[],vendor_metadata:{floip:{ui_metadata:{branching_type:"UNIFIED",should_auto_update_name:!0}}}},c=Object(i["defaultsDeep"])({},r,s,n);return void 0===(null===s||void 0===s?void 0:s.exits)&&(c.exits=await Promise.all((await a("flow/block_generateExitsBasedOnUiConfig",{blockType:s.type,primaryExitTest:o.primaryExitTest(c)},{root:!0})).map(async e=>({...e,vendor_metadata:await a("initiateExtraVendorExitMetadata",{exit:e})})))),c},async handleBranchingTypeChangedToUnified(e,t){let{dispatch:o,getters:i,rootGetters:a}=e,{block:s}=t;!0===a["flow/block_shouldHave2Exits"](s.type)?await o("flow/block_resetBranchingExitsByCollapsingNonDefault",{blockId:s.uuid,primaryExitTest:i.primaryExitTest(s)},{root:!0}):await o("flow/block_resetBranchingExitsToDefaultOnly",{blockId:s.uuid},{root:!0})},async initiateExtraVendorConfig(e){return{}},async initiateExtraVendorExitMetadata(e,t){let{exit:o}=t;return{}},async validateBlockWithCustomJsonSchema(e,t){let{block:o,schemaVersion:i}=t;return console.debug("floip/BaseBlockStore/validateBlockWithCustomJsonSchema()",""+o.type),Object(a["a"])({block:o,schemaVersion:i})},async validateWithProgrammaticLogic(e,t){let{block:o}=t;return console.debug("floip/BaseBlockStore/validateWithProgrammaticLogic()",""+o.type),[]},async validate(e,t){let{dispatch:o}=e,{block:i,schemaVersion:a}=t;var r,n,c;console.debug("floip/BaseBlockStore/validate()",""+i.type);const l=await o("validateBlockWithCustomJsonSchema",{block:i,schemaVersion:a}),d=new Set(null===(r=l.ajvErrors)||void 0===r?void 0:r.map(e=>e.dataPath)),u=await o("validateWithProgrammaticLogic",{block:i});return u.forEach(e=>{let[t,o]=e;d.has(t)||(d.add(t),l.ajvErrors=l.ajvErrors||[],l.ajvErrors.push({dataPath:t,message:s["a"].trans("flow-builder-validation."+o)}))}),(null!==(c=null===(n=l.ajvErrors)||void 0===n?void 0:n.length)&&void 0!==c?c:0)>0&&(l.isValid=!1),l},async maybeHandleAnotherBlockChange(e,t){let{thisBlock:o,oldBlock:i,newBlock:a}=t}},l={namespaced:!0,getters:r,mutations:n,actions:c};t["b"]=l},"41bd":function(e,t,o){"use strict";o.r(t),o.d(t,"Core_LogBlock",(function(){return m})),o.d(t,"install",(function(){return y}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"core-log-block"},[t("base-block",{attrs:{block:e.block,"show-semantic-label":!1,"uses-default-contact-props-editor":e.usesDefaultContactPropsEditor,"uses-default-branching-editor":e.usesDefaultBranchingEditor},on:{handleBranchingTypeChangedToUnified:function(t){return e.handleBranchingTypeChangedToUnified({block:e.block})}}},[e._t("description",null,{slot:"description"}),e._t("resource-editors",null,{slot:"resource-editors"}),e._t("extras",(function(){return[t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/config/message`},scopedSlots:e._u([{key:"input-control",fn:function(o){let{isValid:i}=o;return[t("expression-input",{attrs:{label:e._f("trans")("flow-builder.log-message"),placeholder:e._f("trans")("flow-builder.enter-message"),"current-expression":e.value,"valid-state":i,"data-cy":"log-message--input"},on:{commitExpressionChange:e.commitMessageChange}})]}}])})]}),{slot:"extras"}),e._t("vendor-extras",null,{slot:"vendor-extras"}),e._t("branching",null,{slot:"branching"}),e._t("contact-props",null,{slot:"contact-props"}),e._t("vendor",null,{slot:"vendor"})],2)],1)},a=[],s=o("9ab4"),r=o("4bb5"),n=o("1b40"),c=o("2ef0"),l=o("4004");const d="Core.Log",u={...l["a"],async editMessage(e,t){let{commit:o}=e,{blockId:i,message:a}=t;return o("flow/block_updateConfigByKey",{blockId:i,key:"message",value:a},{root:!0}),a},async createWith(e,t){let{getters:o,dispatch:i}=e,{props:a}=t;return a.type=d,a.config={message:""},l["a"].createWith({getters:o,dispatch:i},{props:a})}},p={...Object(c["cloneDeep"])(l["b"]),actions:u};var b=p,f=o("af98"),h=o("4a51"),v=o("2fe1");const _=Object(r["e"])("flow/"+d),g=Object(r["e"])("builder");let m=class extends(Object(v["c"])(h["a"])){get value(){return this.block.config.message||""}commitMessageChange(e){return this.editMessage({blockId:this.block.uuid,message:e})}};Object(s["__decorate"])([Object(n["b"])()],m.prototype,"block",void 0),Object(s["__decorate"])([Object(n["b"])({default:!0})],m.prototype,"usesDefaultBranchingEditor",void 0),Object(s["__decorate"])([Object(n["b"])({default:!1})],m.prototype,"usesDefaultContactPropsEditor",void 0),Object(s["__decorate"])([_.Action],m.prototype,"editMessage",void 0),Object(s["__decorate"])([_.Action],m.prototype,"handleBranchingTypeChangedToUnified",void 0),Object(s["__decorate"])([g.Getter],m.prototype,"isEditable",void 0),m=Object(s["__decorate"])([Object(n["a"])({})],m);var k=m;const y=Object(f["c"])(d,b);var j=k,O=o("0c7c"),w=Object(O["a"])(j,i,a,!1,null,null,null);t["default"]=w.exports},"41e1":function(e,t,o){"use strict";o("018c")},"440d":function(e,t,o){"use strict";function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_";return e.replace(/ /g,t).toLowerCase()}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_";return e.replace(/[)(]/g,t).replace(/^_+/,"").toLowerCase()}function s(e){return a(i(null!==e&&void 0!==e?e:""))}o.d(t,"a",(function(){return s}))},4545:function(e,t,o){},4577:function(e,t,o){},4678:function(e,t,o){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf755","./tlh.js":"cf755","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(e){var t=s(e);return o(t)}function s(e){if(!o.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=s,e.exports=a,a.id="4678"},"4a51":function(e,t,o){"use strict";(function(e){o.d(t,"b",(function(){return d}));var i=o("9ab4"),a=o("a026"),s=o("1b40");const r=e,n=(e,t)=>r.Lang?r.Lang[e].apply(r.Lang,t):t[0],c=e=>function(){return n(e,arguments)};let l=class extends a["default"]{trans(e,t){return r.Lang.trans(e,t)}static trans(e,t){return r.Lang.trans(e,t)}transIf(e,t){return e?this.trans(t):""}};l=Object(i["__decorate"])([Object(s["a"])({filters:{trans:c("trans"),choice:c("choice")}})],l),t["a"]=l;const d=l}).call(this,o("c8ba"))},"4d04":function(e,t,o){},"4f90":function(e,t,o){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tech-error-notification"},e._l(e.validationErrors,(function(o,i){return t("div",{key:i},[t("h6",[t("b",[e._v("#"+e._s(i+1)+" ")]),t("b",[e._v(e._s(e.trans("flow-builder.location")))]),e._v(": "+e._s(o.dataPath)+", "),t("b",[e._v(e._s(e.trans("flow-builder.message")))]),e._v(": "+e._s(o.message)+" "),t("a",{attrs:{"aria-controls":`collapse_${e.errorType}_${i}`,href:`#collapse_${e.errorType}_${i}`,"aria-expanded":"false","data-toggle":"collapse",role:"button"}},[e._v(" See details ")])]),t("div",{staticClass:"collapse",attrs:{id:`collapse_${e.errorType}_${i}`}},[t("div",{staticClass:"card card-body"},[e._v(" "+e._s(o)+" ")])])])})),0)},a=[],s=o("4a51"),r={name:"TechErrorNotifications",props:{validationErrors:{type:Array,required:!0},errorType:{type:String,required:!0}},mixins:[s["a"]]},n=r,c=o("0c7c"),l=Object(c["a"])(n,i,a,!1,null,"272df386",null);t["a"]=l.exports},5108:function(e,t,o){"use strict";o("2b04")},5157:function(e,t,o){"use strict";o.d(t,"f",(function(){return _})),o.d(t,"b",(function(){return g})),o.d(t,"c",(function(){return m})),o.d(t,"a",(function(){return k})),o.d(t,"d",(function(){return y})),o.d(t,"e",(function(){return j}));var i=o("a026"),a=o("bc3a"),s=o.n(a),r=o("9300"),n=o("31aa"),c=o("c1df"),l=o.n(c),d=o("2ef0"),u=o("02be"),p=o("af98"),b=o("244b"),f=o("bd38"),h=o("440d"),v=o("90d2");const _=()=>({isCreated:!1,savedAt:null,specification_version:"1.0.0-rc4",container_uuid:"3666a05d-3792-482b-8f7f-9e2472e4f027",flows:[],first_flow_id:null,nested_flow_block_interaction_id_stack:[],selectedBlocks:[]}),g={activeFlow:e=>{var t;if(null===(t=e.flows)||void 0===t?void 0:t.length)try{return Object(r["getActiveFlowFrom"])(e)}catch(o){return}},blockUuidsOnActiveFlow:(e,t)=>{var o;return null===(o=t.activeFlow)||void 0===o?void 0:o.blocks},isActiveFlowValid:(e,t,o)=>{const i=Object(d["get"])(o.validation.validationStatuses,"flow/"+t.activeFlow.uuid);return!(i&&!i.isValid)&&Object(d["every"])(t.activeFlow.blocks,e=>{const t=Object(d["get"])(o.validation.validationStatuses,"block/"+e.uuid);return null==t||t.isValid})},isActiveFlowConsideredValidOnCreationForm:(e,t,o)=>{var i;const a=Object(d["get"])(o.validation.validationStatuses,"flow/"+t.activeFlow.uuid);return Boolean(t.isActiveFlowValid)||Boolean(a)&&1===(null===(i=a.ajvErrors)||void 0===i?void 0:i.length)},activeFlowContainer:e=>({isCreated:e.isCreated,specification_version:e.specification_version,uuid:e.container_uuid,name:"TODO",description:"TODO",vendor_metadata:{},flows:e.flows}),hasTextMode:(e,t)=>[r["SupportedMode"].USSD,r["SupportedMode"].SMS].some(e=>Object(d["includes"])(t.activeFlow.supported_modes||[],e)),hasVoiceMode:(e,t)=>Object(d["includes"])(t.activeFlow.supported_modes||[],r["SupportedMode"].IVR),hasOfflineMode:(e,t)=>Object(d["includes"])(t.activeFlow.supported_modes||[],r["SupportedMode"].OFFLINE),currentFlowsState:e=>e},m={flow_resetStates(e){Object.assign(e,_())},flow_setFlowContainer(e,t){let{flowContainer:o,isFromSaveAction:i}=t;const a=o;e.isCreated=a.isCreated,e.flows=a.flows,void 0!==i&&(e.savedAt=(new Date).toISOString())},flow_resetFlowState(e,t){Object.assign(e,t)},flow_updateCreatedState(e,t){e.isCreated=t},flow_setActiveFlowId(e,t){let{flowId:o}=t;e.first_flow_id=o},flow_addBlock(e,t){let{flowId:o,block:i}=t;if(null==i)throw new r["ValidationException"]("Unable to add null block to flow");const a=Object(r["findFlowWith"])(o||e.first_flow_id||"",e),s=a.blocks.push(i);1===s&&(a.first_block_id=i.uuid)},flow_removeBlock(e,t){let{flowId:o,blockId:i}=t;const a=Object(r["findFlowWith"])(o||e.first_flow_id||"",e),s=a.blocks.findIndex(e=>e.uuid===i);if(-1===s)throw new r["ValidationException"](`Unable to delete block ${i} absent from flow ${o}`);a.blocks.splice(s,1)},flow_setExitBlockId(e,t){let{flowId:o,blockId:i}=t;const a=Object(r["findFlowWith"])(o,e),s=Object(r["findBlockWith"])(i,a);a.exit_block_id=s.uuid},flow_setFirstBlockId(e,t){let{flowId:o,blockId:a}=t;const s=Object(r["findFlowWith"])(o,e),n=Object(r["findBlockWith"])(a,s);i["default"].set(s,"first_block_id",n.uuid)},flow_setNameFromLabel(e,t){let{flowId:o,label:i}=t;Object(r["findFlowWith"])(o,e).name=i.replace(/\W+/g,"")},flow_setLabel(e,t){let{flowId:o,label:i}=t;Object(r["findFlowWith"])(o,e).label=i},flow_setInteractionTimeout(e,t){let{flowId:o,value:i}=t;Object(r["findFlowWith"])(o,e).interaction_timeout=i},flow_setSupportedMode(e,t){let{flowId:o,value:i}=t;const a=Object(r["findFlowWith"])(o,e);a.supported_modes=Object(d["castArray"])(i)},flow_setLanguages(e,t){let{flowId:o,value:i}=t;const a=Object(r["findFlowWith"])(o,e);a.languages=Object(d["castArray"])(i)},flow_updateVendorMetadataByPath(e,t){let{flowId:o,path:i,value:a}=t;Object(b["g"])(e,o,"vendor_metadata."+i,a)},flow_removeVendorMetadataByPath(e,t){let{flowId:o,path:i}=t;Object(b["d"])(e,o,"vendor_metadata."+i)},flow_updateBlockCoordinates(e,t){let{flowId:o,blockId:a,coordinates:s}=t;const n=Object(r["findFlowWith"])(o,e),c=Object(r["findBlockWith"])(a,n);i["default"].set(c,"ui_metadata",{canvas_coordinates:s})}},k={async flow_persistImport(e,t){let{getters:o,commit:i,dispatch:a}=e,{persistRoute:r,flowContainer:n}=t;var c,l;n=Object(v["g"])(o.activeFlowContainer,n);const u=n.isCreated?"put":"post",p=n.isCreated;if(!r)return console.info("Flow persistence route not configured correctly in builder.config.json. Falling back to vuex store"),i("flow_setFlowContainer",{flowContainer:n,isFromSaveAction:!0}),o.activeFlowContainer;try{const{data:{data:e}}=await s.a[u](r,{data:Object(d["omit"])(n,["isCreated"])});return i("flow_setFlowContainer",{flowContainer:e,isFromSaveAction:!0}),i("flow_updateCreatedState",!0),await a("validation/validate_allBlocksFromBackend",null,{root:!0}),o.activeFlowContainer}catch(b){return console.error("Server error persisting flow:",b),i("flow_updateCreatedState",p),i("validation/pushAjvErrorToValidationStatuses",{key:"container_import",ajvError:{dataPath:"/container",keyword:"backend_error",message:null!==(l=null===(c=b.response.data)||void 0===c?void 0:c.error)&&void 0!==l?l:b.response.data}},{root:!0}),null}},async flow_persist(e,t){let{getters:o,rootGetters:i,commit:a,dispatch:r}=e,{persistRoute:n,flowContainer:c}=t;const l=c.isCreated?"put":"post",p=c.isCreated;if(!n)return console.info("Flow persistence route not configured correctly in builder.config.json. Falling back to vuex store"),a("flow_setFlowContainer",{flowContainer:c,isFromSaveAction:!0}),o.activeFlowContainer;r("flow_removeOrphanedResourcesAndRelatedValidationsOnActiveFlow");try{const{data:{data:e}}=await s.a[l](n,{data:Object(d["omit"])(Object(u["a"])(c,i["validation/choiceMimeType"]),["isCreated"])});return a("flow_setFlowContainer",{flowContainer:e,isFromSaveAction:!0}),a("flow_updateCreatedState",!0),await r("validation/validate_allBlocksFromBackend",null,{root:!0}),o.activeFlowContainer}catch(b){return a("flow_updateCreatedState",p),console.error(`Server error persisting flow: "${Object(d["get"])(b,"response.data")}". Status: ${b.response.status}`),null}},async flow_fetch(e,t){let{getters:o,commit:i,dispatch:a}=e,{fetchRoute:r}=t;if(!r)return console.info("Flow fetch route not configured correctly in builder.config.json. Falling back to vuex store"),o.activeFlow;try{const{data:{data:e}}=await s.a.get(r);return i("flow_setFlowContainer",{flowContainer:e}),i("flow_updateCreatedState",!0),await a("validation/validate_allBlocksFromBackend",null,{root:!0}),e}catch(n){return console.info(`Server error fetching flow: "${Object(d["get"])(n,"response.data")}". Status: ${n.response.status}`),null}},async flow_addBlankFlow(e){let{dispatch:t}=e;const o=await t("flow_createWith",{props:{uuid:await(new n["IdGeneratorUuidV4"]).generate()}});return t("flow_add",{flow:o})},async flow_add(e,t){let{state:o}=e,{flow:i}=t;return o.flows.push(i),o.first_flow_id=i.uuid,i},flow_removeBlock(e,t){let{state:o,commit:i,dispatch:a}=e,{flowId:s,blockId:n}=t;const c=Object(r["findFlowWith"])(s||o.first_flow_id||"",o);i("flow_removeBlock",{flowId:s,blockId:n}),i("validation/removeValidationStatusesFor",{key:"block/"+n},{root:!0}),a("flow_removeOrphanedResourcesAndRelatedValidationsOnActiveFlow");const l=c.blocks;c.first_block_id===n&&(c.first_block_id=l.length?l[0].uuid:""),c.exit_block_id===n&&(c.exit_block_id=void 0),Object(d["forEach"])(l,e=>{let{exits:t}=e;const o=t.filter(e=>e.destination_block===n);Object(d["forEach"])(o,e=>{e.destination_block=void 0})}),i("builder/activateBlock",{blockId:null},{root:!0})},async flow_removeResourcesAndRelatedValidationsOnActiveFlow(e,t){let{commit:o,getters:i}=e,{resourceUuids:a}=t;console.debug("trying to clean those resources:",a);const s=i.activeFlow;s.resources=s.resources.filter(e=>!a.includes(e.uuid)),a.forEach(e=>o("validation/removeValidationStatusesFor",{key:"resource/"+e},{root:!0}))},async flow_removeOrphanedResourcesAndRelatedValidationsOnActiveFlow(e){let{dispatch:t,getters:o}=e;await t("flow_removeResourcesAndRelatedValidationsOnActiveFlow",{resourceUuids:o.orphanResourceUuidsOnActiveFlow})},async flow_addBlankBlockByType(e,t){let{commit:o,dispatch:i}=e,{type:a,...s}=t;const r=await i(`flow/${a}/createWith`,{props:{uuid:await(new n["IdGeneratorUuidV4"]).generate(),...s}},{root:!0});return Object(d["defaults"])(r,{label:void 0,semantic_label:void 0}),o("flow_addBlock",{block:r}),r},async flow_addBlankResource(e){let{dispatch:t}=e;const o=await t("resource_createWith",{props:{uuid:await(new n["IdGeneratorUuidV4"]).generate()}});return t("resource_add",{resource:o}),o},async flow_addBlankResourceForEnabledModesAndLangs(e){let{dispatch:t}=e;const o=await t("flow_createBlankResource");return t("resource_add",{resource:o}),o},async flow_createBlankResource(e){let{getters:t,dispatch:o}=e;const i=t.activeFlow,a=i.supported_modes,s=i.languages.map(e=>e.id),r=[];return s.forEach(e=>{a.forEach(t=>{var o;null===(o=Object(u["b"])(t))||void 0===o||o.forEach(o=>{r.push({language_id:e,value:"",content_type:o,modes:[t]})})})}),o("resource_createWith",{props:{uuid:await(new n["IdGeneratorUuidV4"]).generate(),values:r}})},async flow_updateResourceValues(e){let{getters:t,rootGetters:o,dispatch:i}=e;const a=t.activeFlow,s=a.resources.filter(e=>e.values.every(e=>e.mime_type!==o["validation/choiceMimeType"])),r=a.supported_modes,n=a.languages.map(e=>e.id),c=[];s.forEach(e=>{const t=e.values.filter(e=>{const t=!n.includes(e.language_id),o=0===Object(d["intersection"])(e.modes,r).length;return t||o});c.push(i("resource_removeVariants",{resourceId:e.uuid,variants:t}))}),s.forEach(e=>{r.forEach(t=>{n.forEach(o=>{var a;const s=e.values.find(e=>e.language_id===o&&e.modes.includes(t));void 0===s&&(console.warn(`Adding missing variant: lang ${o}, mode: ${t} for resource ${e.uuid}`),null===(a=Object(u["b"])(t))||void 0===a||a.forEach(a=>{c.push(i("resource_createVariant",{resourceId:e.uuid,variant:{content_type:a,language_id:o,modes:[t],value:""}}))}))})})}),await Promise.all(c)},async flow_createWith(e,t){let{rootState:o}=e,{props:i}=t;return{...Object(d["defaults"])(i,{name:"",label:"",last_modified:l()().toISOString(),interaction_timeout:o.trees.ui.appWideInteractionTimeout,vendor_metadata:{},supported_modes:o.trees.ui.defaultModes,languages:[],blocks:[],first_block_id:"",resources:[]})}},async flow_duplicateBlock(e,t){let{commit:o,state:i,getters:a,dispatch:s}=e,{flowId:c,blockId:l}=t;const u=Object(r["findFlowWith"])(c||i.first_flow_id||"",i),b=Object(r["findBlockWith"])(l,u),f=Object(d["cloneDeep"])(b);return f.uuid=await(new n["IdGeneratorUuidV4"]).generate(),f.label=await s("flow_generateLabelForBlockDuplicate",{flowId:c,blockId:l}),f.name=Object(h["a"])(f.label),await Promise.all(f.exits.map(async e=>{e.uuid=await(new n["IdGeneratorUuidV4"]).generate(),delete e.destination_block})),Object(d["has"])(f.config,"prompt")&&(f.config.prompt=await s("flow_duplicateResource",{resourceUuid:f.config.prompt})),Object(d["has"])(f.config,"choices")&&await Promise.all(f.config.choices.map(async e=>{e.prompt=await s("flow_duplicateResource",{resourceUuid:e.prompt})})),Object(d["merge"])(f.ui_metadata,{canvas_coordinates:Object(p["b"])(b)}),o("flow_addBlock",{block:f}),f},flow_generateLabelForBlockDuplicate(e,t){let{state:o}=e,{flowId:i,blockId:a}=t;const s=Object(r["findFlowWith"])(i||o.first_flow_id||"",o),n=Object(r["findBlockWith"])(a,s);return void 0===n.label||""===n.label?n.label:Object(f["a"])(n.label,s.blocks.map(e=>e.label))},async flow_duplicateResource(e,t){let{getters:o,dispatch:i}=e,{resourceUuid:a}=t;const s=o.resourcesByUuidOnActiveFlow[a];if(void 0===s)throw new Error("Resource with uuid is not found: "+a);const r=Object(d["cloneDeep"])(s);return r.uuid=await(new n["IdGeneratorUuidV4"]).generate(),await i("resource_add",{resource:r}),r.uuid},async flow_clearMultiSelection(e){let{state:t,dispatch:o}=e;Object(d["forEach"])(t.selectedBlocks,e=>{o("block_deselect",{blockId:e})})},async flow_removeAllSelectedBlocks(e){let{state:t,dispatch:o}=e;const i=t.selectedBlocks.map(e=>o("flow_removeBlock",{blockId:e}));await Promise.all(i),t.selectedBlocks=[]},async flow_duplicateAllSelectedBlocks(e){let{state:t,dispatch:o}=e;const i=[];for(const a of t.selectedBlocks){const e=await o("flow_duplicateBlock",{blockId:a});i.push(e.uuid)}return t.selectedBlocks=[...i],i},async flow_updateModes(e,t){let{state:o,getters:i,commit:a,dispatch:s}=e,{flowId:n,newModes:c}=t;const l=Object(r["findFlowWith"])(n,o);a("flow_setSupportedMode",{flowId:n,value:c}),await s("flow_updateResourceValues"),await s("validation/validate_allBlocksWithinFlow",null,{root:!0}),await s("validation/validate_resourcesOnSupportedValues",{resources:l.resources,supportedModes:l.supported_modes,supportedLanguages:l.languages},{root:!0})},async flow_updateLanguages(e,t){let{state:o,getters:i,commit:a,dispatch:s}=e,{flowId:n,newLanguages:c}=t;const l=Object(r["findFlowWith"])(n,o),u=Object(d["clone"])(l.languages);a("flow_setLanguages",{flowId:n,value:c}),await s("flow_updateResourceValues"),await s("block_updateBlocksAfterLanguagesChange",{addedLanguageIds:Object(d["difference"])(c,u).map(e=>e.id),removedLanguageIds:Object(d["difference"])(u,c).map(e=>e.id)}),await s("validation/validate_allBlocksWithinFlow",null,{root:!0}),await s("validation/validate_resourcesOnSupportedValues",{resources:l.resources,supportedModes:l.supported_modes,supportedLanguages:l.languages},{root:!0})}};function y(e){return Object(d["sortBy"])(e,["label"])}function j(e){const t=[r["SupportedMode"].IVR,r["SupportedMode"].SMS,r["SupportedMode"].USSD,r["SupportedMode"].TEXT,r["SupportedMode"].RICH_MESSAGING,r["SupportedMode"].OFFLINE];return Object(d["sortBy"])(e,e=>t.indexOf(e))}},5262:function(e,t,o){"use strict";o.d(t,"b",(function(){return E}));var i=o("a026"),a=o("3a27"),s=o("2ef0"),r=o("02be");const n=/^flows.flows.(?<flowIndex>\d+).blocks.(?<blockIndex>\d+)$/;function c(e){var t;const o=null===(t=n.exec(e))||void 0===t?void 0:t.groups;if(void 0!==o){const{flowIndex:e,blockIndex:t}=o;return{flowIndex:Number(e),blockIndex:Number(t)}}return null}const l=/^flows.flows.(?<flowIndex>\d+).blocks.(?<blockIndex>\d+).(?<fieldPath>.+)/;function d(e){var t;const o=null===(t=l.exec(e))||void 0===t?void 0:t.groups;if(void 0!==o){const{flowIndex:e,blockIndex:t,fieldPath:i}=o;return{flowIndex:Number(e),blockIndex:Number(t),fieldPath:i.replace(/\./g,"/")}}return null}const u=/^flows.flows.(?<flowIndex>\d+).resources.(?<resourceIndex>\d+).(?<fieldPath>.+)/;function p(e){var t;const o=null===(t=u.exec(e))||void 0===t?void 0:t.groups;if(void 0!==o){const{flowIndex:e,resourceIndex:t,fieldPath:i}=o;return{flowIndex:Number(e),resourceIndex:Number(t),fieldPath:i.replace(/\./g,"/")}}return null}const b=/^flows.flows.\d+.(?!blocks|resources)/;function f(e){let{changedKeys:t,flows:o}=e;var i,a;const s=t.find(e=>n.test(e)||l.test(e)||u.test(e)||b.test(e));if(void 0===s)return console.warn("No deep link found for changed keys",JSON.stringify(t)),{routeName:null,routeParams:null};if(n.test(s)){const{flowIndex:e,blockIndex:t}=c(s),i=o.flows[e].blocks[t].uuid;return{routeName:"block-selected-details",routeParams:{blockId:i}}}if(l.test(s)){const{flowIndex:e,blockIndex:t,fieldPath:r}=d(s),n=null!==(a=null===(i=o.flows[e].blocks[t])||void 0===i?void 0:i.uuid)&&void 0!==a?a:null;return null===n?{routeName:"flow-canvas",routeParams:{id:o.flows[e].uuid,component:"builder",mode:"edit"}}:{routeName:"block-scroll-to-anchor",routeParams:{blockId:n,field:`block/${n}/${r}`}}}if(u.test(s)){const{flowIndex:e,resourceIndex:t,fieldPath:i}=p(s),a=o.flows[e],n=a.resources[t].uuid,c=a.blocks.find(e=>Object(r["h"])(e,n));return{routeName:"block-scroll-to-anchor",routeParams:{blockId:c.uuid,field:`resource/${n}/${i}`}}}return b.test(s)?{routeName:"flow-details",routeParams:{}}:(console.error("This should have never happened. Did you forget to implement a deep link case?"),{routeName:null,routeParams:null})}function h(e){return null!==e&&void 0!==e?e:{}}function v(e){return void 0===e||"object"===typeof e}function _(e,t){const o=[];return Object.keys({...e,...t}).forEach(i=>{const a=e[i],s=t[i];v(a)&&v(s)?o.push(..._(h(a),h(s)).map(e=>`${i}.${e}`)):a!==s&&(void 0===a?o.push(i+"+"):void 0===s?o.push(i+"-"):o.push(i+"~"))}),o}const g=100;function m(e){let{modules:t,routeName:o,routeParams:i}=e;return{modules:Object(a["a"])(t),routeName:o,routeParams:i,timestamp:(new Date).getTime()}}function k(e){var t;return Object(a["a"])(null!==(t=null===e||void 0===e?void 0:e.modules)&&void 0!==t?t:{})}function y(e,t){const o=k(e),i=k(t);return _(o,i)}function j(e){return e.some(e=>/^flows.flows.\d+.blocks.\d+.exits.\d+.destination_block$/.test(e))}const O=()=>({snapshots:[],position:-1}),w={currentSnapshot(e){return e.snapshots[e.position]},previousSnapshot(e){var t;return null!==(t=e.snapshots[e.position-1])&&void 0!==t?t:null},futureSnapshot(e){var t;return null!==(t=e.snapshots[e.position+1])&&void 0!==t?t:null},hasCurrentSnapshot(e,t){return Boolean(t.currentSnapshot)},hasPreviousSnapshot(e,t){return Boolean(t.previousSnapshot)},hasFutureSnapshot(e,t){return Boolean(t.futureSnapshot)},previouslyChangedKeys(e,t){return y(t.previousSnapshot,t.currentSnapshot)}},C={addSnapshot(e,t){e.snapshots=[...e.snapshots.slice(0,e.position+1),t].slice(-g),e.position=e.snapshots.length-1},patchSnapshot(e,t){i["default"].set(e.snapshots,e.position,t)},resetSnapshots(e,t){e.snapshots=[t],e.position=0},undo(e){e.position>0?e.position-=1:console.warn("Cannot undo, we have already reached the beginning of the history")},redo(e){e.position<e.snapshots.length-1?e.position+=1:console.warn("Cannot redo, we have already reached the end of the history")}},x={async handleStateChange(e){let{commit:t,getters:o,rootState:i}=e;var r,n,c,l,d,u,p,b,h;const v=Object(a["a"])({flows:null!==(n=null===(r=o.currentSnapshot)||void 0===r?void 0:r.modules.flows)&&void 0!==n?n:{}}),g=Object(a["a"])({flows:i.flow}),k=_(v,g);if(0===k.length)return;let{routeName:y,routeParams:O}=f({changedKeys:k,flows:i.flow}),w=!1;o.hasCurrentSnapshot||(w=!0);const C=null===(l=null===(c=o.currentSnapshot)||void 0===c?void 0:c.modules.flows)||void 0===l?void 0:l.savedAt,x=null===(d=g.flows)||void 0===d?void 0:d.savedAt;C!==x&&void 0!==C&&void 0!==x&&(w=!0),w?(y=null!==(p=null===(u=o.currentSnapshot)||void 0===u?void 0:u.routeName)&&void 0!==p?p:"flow-canvas",O=null!==(h=null===(b=o.currentSnapshot)||void 0===b?void 0:b.routeParams)&&void 0!==h?h:{}):(y=null!==y&&void 0!==y?y:"flow-canvas",O={component:i.builder.activeMainComponent,...O});const E=m({modules:g,routeName:y,routeParams:O});if(w)return void(o.hasCurrentSnapshot?t("patchSnapshot",E):t("addSnapshot",E));if(o.hasFutureSnapshot)return void t("addSnapshot",E);const I=o.previouslyChangedKeys,B=Object(s["union"])(Object(s["difference"])(k,I),Object(s["difference"])(I,k));B.length>0||j(k)?t("addSnapshot",E):t("patchSnapshot",E)},async undoAndUpdateState(e){let{commit:t,getters:o,dispatch:i}=e;if(!o.hasPreviousSnapshot)return void console.warn("Cannot undo, the action history is empty or we have already reached the beginning of it");t("undo");const a=k(o.currentSnapshot);t("flow/flow_resetFlowState",a.flows,{root:!0})},async redoAndUpdateState(e){let{commit:t,dispatch:o,getters:i}=e;if(!i.hasFutureSnapshot)return void console.warn("Cannot redo, the action history is empty or we have already reached the end of it");t("redo");const a=k(i.currentSnapshot);t("flow/flow_resetFlowState",a.flows,{root:!0})}},E={namespaced:!0,state:O,mutations:C,getters:w,actions:x};t["a"]=E},5540:function(e,t,o){},5801:function(e,t,o){"use strict";o.d(t,"a",(function(){return c}));var i=o("9300"),a=o("2ef0"),s=o("963c"),r=o("4004"),n=o("ecef");const c="MobilePrimitives.SelectManyResponse",l={...r["c"],primaryExitTest:()=>e=>{}},d={...r["a"],setMinChoices(e,t){let{commit:o,dispatch:r,rootGetters:n}=e,{blockId:c,value:l}=t;const d=Object(i["findBlockWith"])(c,n["flow/activeFlow"]);o("flow/block_updateConfigByKey",{blockId:d.uuid,key:"minimum_choices",value:Object(a["isNumber"])(l)?l:void 0},{root:!0});const{vendor_metadata:u}=d,{UNIFIED:p}=s["a"];u.floip.ui_metadata.branching_type===p&&r("handleBranchingTypeChangedToUnified",{block:d})},setMaxChoices(e,t){let{commit:o,dispatch:r,rootGetters:n}=e,{blockId:c,value:l}=t;const d=Object(i["findBlockWith"])(c,n["flow/activeFlow"]);o("flow/block_updateConfigByKey",{blockId:d.uuid,key:"maximum_choices",value:Object(a["isNumber"])(l)?l:void 0},{root:!0});const{vendor_metadata:u}=d,{UNIFIED:p}=s["a"];u.floip.ui_metadata.branching_type===p&&r("handleBranchingTypeChangedToUnified",{block:d})},async createWith(e,t){let{getters:o,dispatch:i}=e,{props:a}=t;a.type=c;const n=await i("flow/flow_addBlankResourceForEnabledModesAndLangs",null,{root:!0});return a.config={prompt:n.uuid,choices:[],minimum_choices:void 0,maximum_choices:void 0},a.vendor_metadata={floip:{ui_metadata:{branching_type:s["a"].EXIT_PER_CHOICE,choices:{}}}},r["a"].createWith({getters:o,dispatch:i},{props:a})}},u={...Object(a["cloneDeep"])(n["b"]),actions:d,getters:l};t["b"]=u},"584b":function(e,t,o){},"59c3":function(e,t,o){"use strict";o.r(t),o.d(t,"SmartDevices_LocationResponseBlock",(function(){return m})),o.d(t,"install",(function(){return y}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"smart-devices-location-response-block"},[t("base-block",{attrs:{block:e.block,"show-semantic-label":!1,"uses-default-contact-props-editor":e.usesDefaultContactPropsEditor,"uses-default-branching-editor":e.usesDefaultBranchingEditor},on:{handleBranchingTypeChangedToUnified:function(t){return e.handleBranchingTypeChangedToUnified({block:e.block})}}},[e._t("description",null,{slot:"description"}),e._t("resource-editors",(function(){return[t("per-language-resource-editor",{attrs:{block:e.block}})]}),{slot:"resource-editors"}),e._t("extras",(function(){return[t("threshold-editor",{attrs:{block:e.block},on:{commitAccuracyThresholdMetersChange:e.updateThreshold}}),t("timeout-editor",{attrs:{block:e.block},on:{commitAccuracyTimeoutSecondsChange:e.updateTimeout}})]}),{slot:"extras"}),e._t("vendor-extras",null,{slot:"vendor-extras"}),e._t("branching",null,{slot:"branching"}),e._t("contact-props",null,{slot:"contact-props"}),e._t("vendor",null,{slot:"vendor"})],2)],1)},a=[],s=o("9ab4"),r=o("4bb5"),n=o("1b40"),c=o("2ef0"),l=o("4004");const d="SmartDevices.LocationResponse",u={...l["a"],async setAccuracyThreshold(e,t){let{commit:o}=e,{blockId:i,value:a}=t;return o("flow/block_updateConfigByKey",{blockId:i,key:"accuracy_threshold_meters",value:a},{root:!0}),a},async setAccuracyTimeout(e,t){let{commit:o}=e,{blockId:i,value:a}=t;return o("flow/block_updateConfigByKey",{blockId:i,key:"accuracy_timeout_seconds",value:a},{root:!0}),a},async createWith(e,t){let{getters:o,dispatch:i}=e,{props:a}=t;a.type=d;const s=await i("flow/flow_addBlankResourceForEnabledModesAndLangs",null,{root:!0});return a.config={prompt:s.uuid,accuracy_threshold_meters:5,accuracy_timeout_seconds:120},l["a"].createWith({getters:o,dispatch:i},{props:a})}},p={...Object(c["cloneDeep"])(l["b"]),actions:u};var b=p,f=o("4a51"),h=o("af98"),v=o("2fe1");Object(r["e"])("flow");const _=Object(r["e"])("flow/"+d),g=Object(r["e"])("builder");let m=class extends(Object(v["c"])(f["a"])){updateThreshold(e){this.setAccuracyThreshold({blockId:this.block.uuid,value:e})}updateTimeout(e){this.setAccuracyTimeout({blockId:this.block.uuid,value:e})}};Object(s["__decorate"])([Object(n["b"])()],m.prototype,"block",void 0),Object(s["__decorate"])([Object(n["b"])({default:!0})],m.prototype,"usesDefaultBranchingEditor",void 0),Object(s["__decorate"])([Object(n["b"])({default:!0})],m.prototype,"usesDefaultContactPropsEditor",void 0),Object(s["__decorate"])([_.Action],m.prototype,"setAccuracyThreshold",void 0),Object(s["__decorate"])([_.Action],m.prototype,"setAccuracyTimeout",void 0),Object(s["__decorate"])([_.Action],m.prototype,"handleBranchingTypeChangedToUnified",void 0),Object(s["__decorate"])([g.Getter],m.prototype,"isEditable",void 0),m=Object(s["__decorate"])([Object(n["a"])({})],m);var k=m;const y=Object(h["c"])(d,b);var j=k,O=o("0c7c"),w=Object(O["a"])(j,i,a,!1,null,null,null);t["default"]=w.exports},"5bd9":function(e,t,o){"use strict";o("cd4d")},"5bf3":function(e,t,o){},"5c47":function(e,t,o){"use strict";o.r(t),o.d(t,"MobilePrimitives_SelectOneResponseBlock",(function(){return _})),o.d(t,"install",(function(){return m}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"mobile-primitives-select-one-response-block"},[t("base-block",{attrs:{block:e.block,"show-semantic-label":!1,"uses-default-contact-props-editor":e.usesDefaultContactPropsEditor,"uses-default-branching-editor":e.usesDefaultBranchingEditor},on:{handleBranchingTypeChangedToUnified:function(t){return e.handleBranchingTypeChangedToUnified({block:e.block})}}},[e._t("description",null,{slot:"description"}),e._t("resource-editors",(function(){return[t("per-language-resource-editor",{attrs:{block:e.block}})]}),{slot:"resource-editors"}),e._t("extras",(function(){return[t("choices-builder",{attrs:{block:e.block},on:{choiceChanged:e.handleChoiceChanged}})]}),{slot:"extras"}),e._t("vendor-extras",null,{slot:"vendor-extras"}),e._t("branching",(function(){return[t("block-output-branching-config",{attrs:{block:e.block,"has-exit-per-choice":!0,"label-class":""},on:{branchingTypeChanged:function(t){return e.reflowExitsWhenSwitchingToBranchingTypeNotUnified()}}})]}),{slot:"branching"}),e._t("contact-props",(function(){return[t("select-one-response-block-contact-property-editor",{attrs:{block:e.block}})]}),{slot:"contact-props"}),e._t("vendor",null,{slot:"vendor"})],2)],1)},a=[],s=o("9ab4"),r=o("9300"),n=o("4bb5"),c=o("1b40"),l=o("2ef0"),d=o("ecef"),u=o("4a51"),p=o("af98"),b=o("2fe1"),f=o("02be"),h=o("963c");Object(n["e"])("flow");const v=Object(n["e"])("flow/"+d["a"]);let _=class extends(Object(b["c"])(u["a"])){constructor(){super(...arguments),this.SupportedMode=r["SupportedMode"],this.findOrGenerateStubbedVariantOn=f["e"]}handleChoiceChanged(){const{uuid:e,vendor_metadata:{floip:{ui_metadata:{branching_type:t}}}}=this.block,{EXIT_PER_CHOICE:o,UNIFIED:i,ADVANCED:a}=h["a"];t===i?this.handleBranchingTypeChangedToUnified({block:this.block}):t===a||t===o?this.reflowExitsFromChoices({blockId:e}):console.error("handleChoiceChanged","cannot handle branching type "+t)}reflowExitsWhenSwitchingToBranchingTypeNotUnified(){const{uuid:e,vendor_metadata:t}=this.block,{EXIT_PER_CHOICE:o,ADVANCED:i}=h["a"],a=Object(l["includes"])([o,i],t.floip.ui_metadata.branching_type);a?this.reflowExitsFromChoices({blockId:e}):this.handleBranchingTypeChangedToUnified({block:this.block})}};Object(s["__decorate"])([Object(c["b"])()],_.prototype,"block",void 0),Object(s["__decorate"])([Object(c["b"])({default:!1})],_.prototype,"usesDefaultBranchingEditor",void 0),Object(s["__decorate"])([Object(c["b"])({default:!0})],_.prototype,"usesDefaultContactPropsEditor",void 0),Object(s["__decorate"])([v.Action],_.prototype,"reflowExitsFromChoices",void 0),Object(s["__decorate"])([v.Action],_.prototype,"handleBranchingTypeChangedToUnified",void 0),_=Object(s["__decorate"])([Object(c["a"])({})],_);var g=_;const m=Object(p["c"])(d["a"],d["b"]);var k=g,y=o("0c7c"),j=Object(y["a"])(k,i,a,!1,null,null,null);t["default"]=j.exports},"5dcb":function(e,t,o){"use strict";o.r(t),o.d(t,"Core_OutputBlock",(function(){return m})),o.d(t,"install",(function(){return y}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"core-output-block"},[t("base-block",{attrs:{block:e.block,"show-semantic-label":!1,"uses-default-contact-props-editor":e.usesDefaultContactPropsEditor,"uses-default-branching-editor":e.usesDefaultBranchingEditor},on:{handleBranchingTypeChangedToUnified:function(t){return e.handleBranchingTypeChangedToUnified({block:e.block})}}},[e._t("description",null,{slot:"description"}),e._t("resource-editors",null,{slot:"resource-editors"}),e._t("extras",(function(){return[t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/config/value`},scopedSlots:e._u([{key:"input-control",fn:function(o){let{isValid:i}=o;return[t("expression-input",{attrs:{label:e.trans("flow-builder.output-expression"),placeholder:e.trans("flow-builder.enter-expression"),"current-expression":e.value,"valid-state":i,rows:e.expressionEditorRows,"data-cy":"output-expression--input"},on:{commitExpressionChange:e.commitExpressionChange}})]}}])})]}),{slot:"extras"}),e._t("vendor-extras",null,{slot:"vendor-extras"}),e._t("branching",null,{slot:"branching"}),e._t("contact-props",null,{slot:"contact-props"}),e._t("vendor",null,{slot:"vendor"})],2)],1)},a=[],s=o("9ab4"),r=o("4bb5"),n=o("1b40"),c=o("2ef0"),l=o("4004");const d="Core.Output",u={...l["a"],async editOutputExpression(e,t){let{commit:o}=e,{blockId:i,value:a}=t;return o("flow/block_updateConfigByKey",{blockId:i,key:"value",value:a},{root:!0}),a},async createWith(e,t){let{getters:o,dispatch:i}=e,{props:a}=t;return a.type=d,a.config={value:"@"},l["a"].createWith({getters:o,dispatch:i},{props:a})}},p={...Object(c["cloneDeep"])(l["b"]),actions:u};var b=p,f=o("4a51"),h=o("af98"),v=o("2fe1");const _=Object(r["e"])("flow/"+d),g=Object(r["e"])("builder");let m=class extends(Object(v["c"])(f["a"])){get value(){return this.block.config.value||""}commitExpressionChange(e){return this.editOutputExpression({blockId:this.block.uuid,value:e})}};Object(s["__decorate"])([Object(n["b"])()],m.prototype,"block",void 0),Object(s["__decorate"])([Object(n["b"])({default:!0})],m.prototype,"usesDefaultBranchingEditor",void 0),Object(s["__decorate"])([Object(n["b"])({default:!0})],m.prototype,"usesDefaultContactPropsEditor",void 0),Object(s["__decorate"])([Object(n["b"])({type:Number,default:1})],m.prototype,"expressionEditorRows",void 0),Object(s["__decorate"])([_.Action],m.prototype,"editOutputExpression",void 0),Object(s["__decorate"])([_.Action],m.prototype,"handleBranchingTypeChangedToUnified",void 0),Object(s["__decorate"])([g.Getter],m.prototype,"isEditable",void 0),m=Object(s["__decorate"])([Object(n["a"])({})],m);var k=m;const y=Object(h["c"])(d,b);var j=k,O=o("0c7c"),w=Object(O["a"])(j,i,a,!1,null,null,null);t["default"]=w.exports},"5e0f":function(e,t,o){"use strict";o("584b")},6059:function(e,t,o){},6060:function(e,t,o){},6165:function(e,t,o){},"64bb":function(e,t,o){"use strict";o.r(t),o.d(t,"install",(function(){return j}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"mobile-primitive-open-response-block"},[t("base-block",{attrs:{block:e.block,"show-semantic-label":!1,"uses-default-contact-props-editor":e.usesDefaultContactPropsEditor,"uses-default-branching-editor":e.usesDefaultBranchingEditor},on:{handleBranchingTypeChangedToUnified:function(t){return e.handleBranchingTypeChangedToUnified({block:e.block})}}},[e._t("description",null,{slot:"description"}),e._t("resource-editors",(function(){return[t("per-language-resource-editor",{attrs:{block:e.block}})]}),{slot:"resource-editors"}),e._t("extras",(function(){return[t("max-duration-seconds-editor",{attrs:{block:e.block,"has-ivr":e.hasVoiceMode},on:{commitMaxDurationChange:e.setMaxDurationSeconds}}),t("end-recording-digits-editor",{attrs:{block:e.block,"has-ivr":e.hasVoiceMode},on:{commitEndRecordingDigitsChange:e.setEndRecordingDigits}})]}),{slot:"extras"}),e._t("vendor-extras",null,{slot:"vendor-extras"}),e._t("branching",null,{slot:"branching"}),e._t("contact-props",null,{slot:"contact-props"}),e._t("vendor",null,{slot:"vendor"})],2)],1)},a=[],s=o("9ab4"),r=o("4bb5"),n=o("1b40"),c=o("2ef0"),l=o("4004");const d="MobilePrimitives.OpenResponse",u={...l["a"],async setMaxDurationSeconds(e,t){let{commit:o,rootGetters:i}=e;const a=i["builder/activeBlock"];o("flow/block_updateConfigByPath",{blockId:a.uuid,path:"ivr.max_duration_seconds",value:t},{root:!0})},async setEndRecordingDigits(e,t){let{commit:o,rootGetters:i}=e;const a=i["builder/activeBlock"];o("flow/block_updateConfigByPath",{blockId:a.uuid,path:"ivr.end_recording_digits",value:t},{root:!0})},async createWith(e,t){let{getters:o,dispatch:i,commit:a}=e,{props:s}=t;s.type=d;const r=await i("flow/flow_addBlankResourceForEnabledModesAndLangs",null,{root:!0});return s.config={prompt:r.uuid},l["a"].createWith({getters:o,dispatch:i},{props:s})}},p={...Object(c["cloneDeep"])(l["b"]),actions:u};var b=p,f=o("4a51"),h=o("af98"),v=o("2fe1");const _=Object(r["e"])("flow"),g=Object(r["e"])("flow/"+d),m=Object(r["e"])("builder");let k=class extends(Object(v["c"])(f["a"])){};Object(s["__decorate"])([Object(n["b"])()],k.prototype,"block",void 0),Object(s["__decorate"])([Object(n["b"])({default:!0})],k.prototype,"usesDefaultBranchingEditor",void 0),Object(s["__decorate"])([Object(n["b"])({default:!0})],k.prototype,"usesDefaultContactPropsEditor",void 0),Object(s["__decorate"])([_.Getter],k.prototype,"hasTextMode",void 0),Object(s["__decorate"])([_.Getter],k.prototype,"hasVoiceMode",void 0),Object(s["__decorate"])([g.Action],k.prototype,"setMaxDurationSeconds",void 0),Object(s["__decorate"])([g.Action],k.prototype,"setEndRecordingDigits",void 0),Object(s["__decorate"])([g.Action],k.prototype,"handleBranchingTypeChangedToUnified",void 0),Object(s["__decorate"])([m.Getter],k.prototype,"isEditable",void 0),k=Object(s["__decorate"])([Object(n["a"])({})],k);var y=k;const j=Object(h["c"])(d,b);var O=y,w=o("0c7c"),C=Object(w["a"])(O,i,a,!1,null,null,null);t["default"]=C.exports},6537:function(e,t,o){"use strict";o("1dd2")},"6d21":function(e,t,o){"use strict";o("11a6")},"6df9":function(e,t,o){"use strict";o.d(t,"b",(function(){return v})),o.d(t,"d",(function(){return _})),o.d(t,"a",(function(){return g})),o.d(t,"c",(function(){return m}));var i=o("a026"),a=o("9300"),s=o("2ef0"),r=o("31aa"),n=o("963c"),c=o("ecef"),l=o("5801"),d=o("b85b"),u=o("440d");const p={block_getContactPropertyOnIndex:e=>t=>{let{blockId:o,index:i}=t;var s,r;return null===(r=null===(s=Object(a["findBlockOnActiveFlowWith"])(o,e).config)||void 0===s?void 0:s.set_contact_property)||void 0===r?void 0:r[i]},block_getContactPropertyValueByKey:e=>t=>{let{blockId:o,key:i}=t;var s,r;return null===(r=null===(s=Object(a["findBlockOnActiveFlowWith"])(o,e).config.set_contact_property)||void 0===s?void 0:s.find(e=>{let{property_key:t}=e;return t===i}))||void 0===r?void 0:r.property_value}},b={block_addContactProperty(e,t){let{blockId:o,key:i,value:s}=t;const r=Object(a["findBlockOnActiveFlowWith"])(o,e);if(r.config.set_contact_property||(r.config.set_contact_property=[]),r.config.set_contact_property.find(e=>{let{property_key:t}=e;return t===i}))throw new Error(`set_contact_property[${i}] already exists`);r.config.set_contact_property.push({property_key:i,property_value:s})},block_removeContactProperty(e,t){let{blockId:o,key:i}=t;var s;const r=Object(a["findBlockOnActiveFlowWith"])(o,e);r.config.set_contact_property=(null!==(s=r.config.set_contact_property)&&void 0!==s?s:[]).filter(e=>{let{property_key:t}=e;return t!==i})},block_removeAllContactProperties(e,t){let{blockId:o}=t;const i=Object(a["findBlockOnActiveFlowWith"])(o,e);i.config.set_contact_property=[]},block_changeContactProperty(e,t){let{blockId:o,key:i,value:s}=t;var r;const n=Object(a["findBlockOnActiveFlowWith"])(o,e);n.config.set_contact_property=(null!==(r=n.config.set_contact_property)&&void 0!==r?r:[]).map(e=>{let{property_key:t,property_value:o}=e;return{property_key:t,property_value:t===i?s:o}})}},f={block_makeSureSetContactPropertyExistsAsArray(e,t){let{commit:o,state:i}=e,{blockId:s}=t;var r;const n=Object(a["findBlockOnActiveFlowWith"])(s,i);void 0===(null===(r=n.config)||void 0===r?void 0:r.set_contact_property)&&o("block_updateConfigByPath",{blockId:s,path:"set_contact_property",value:[]})},block_setContactPropertyOnIndex(e,t){let{commit:o,state:i,dispatch:a}=e,{blockId:s,index:r,propertyKey:n,propertyValue:c}=t;a("block_makeSureSetContactPropertyExistsAsArray",{blockId:s}),o("block_updateConfigByPath",{blockId:s,path:`set_contact_property.[${r}]`,value:{property_key:n,property_value:c}})},block_setContactPropertyKeyOnIndex(e,t){let{commit:o,state:i,dispatch:a}=e,{blockId:s,index:r,propertyKey:n}=t;a("block_makeSureSetContactPropertyExistsAsArray",{blockId:s}),o("block_updateConfigByPath",{blockId:s,path:`set_contact_property.[${r}].property_key`,value:n})},block_setContactPropertyValueOnIndex(e,t){let{commit:o,state:i,dispatch:a}=e,{blockId:s,index:r,propertyValue:n}=t;a("block_makeSureSetContactPropertyExistsAsArray",{blockId:s}),o("block_updateConfigByPath",{blockId:s,path:`set_contact_property.[${r}].property_value`,value:n})},block_setContactPropertyByKey(e,t){let{commit:o,getters:i}=e,{blockId:a,key:s,value:r}=t;void 0===i.block_getContactPropertyValueByKey({blockId:a,key:s})?o("block_addContactProperty",{blockId:a,key:s,value:r}):o("block_changeContactProperty",{blockId:a,key:s,value:r})},block_deleteContactPropertyByKey(e,t){let{commit:o}=e,{blockId:i,key:a}=t;o("block_removeContactProperty",{blockId:i,key:a})},block_updateContactPropertyAfterChoicesChange(e,t){let{state:o,commit:i,dispatch:s}=e,{blockId:r}=t;var n,c,l,u;const p=Object(a["findBlockOnActiveFlowWith"])(r,o),b=null===(u=null===(l=null===(c=null===(n=p.vendor_metadata)||void 0===n?void 0:n.floip)||void 0===c?void 0:c.ui_metadata)||void 0===l?void 0:l.set_contact_property)||void 0===u?void 0:u.property_value_mapping;void 0!==b&&s("block_setContactPropertyValueOnIndex",{blockId:r,index:0,propertyValue:Object(d["b"])(p.config.choices,b)})},block_updateContactPropertyMetadataAfterNewChoiceAdded(e,t){let{state:o,commit:i,dispatch:a}=e,{blockId:s,prompt:r}=t;i("block_updateVendorMetadataByPath",{blockId:s,path:"floip.ui_metadata.set_contact_property.property_value_mapping."+r,value:""})},block_resetContactPropertyMetadata(e,t){let{state:o,commit:i,dispatch:s}=e,{blockId:r}=t;const{config:{choices:n}}=Object(a["findBlockOnActiveFlowWith"])(r,o);n.forEach(e=>{i("block_updateVendorMetadataByPath",{blockId:r,path:"floip.ui_metadata.set_contact_property.property_value_mapping."+e.prompt,value:""})})}};var h=o("244b");const v={...p,block_classesConfig(e,t,o){return o.trees.ui.blockClasses},block_shouldHave2Exits:(e,t)=>e=>{var o,i,a,s;const r=t.block_classesConfig[e],n=null===(i=null===(o=null===r||void 0===r?void 0:r.exits)||void 0===o?void 0:o.primary)||void 0===i?void 0:i.name,c=null===(s=null===(a=null===r||void 0===r?void 0:r.exits)||void 0===a?void 0:a.default)||void 0===s?void 0:s.name;return void 0!==n&&void 0!==c}},_={...b,block_setName(e,t){let{blockId:o,value:i}=t;Object(a["findBlockOnActiveFlowWith"])(o,e).name=i},block_setLabel(e,t){let{blockId:o,value:i}=t;Object(a["findBlockOnActiveFlowWith"])(o,e).label=i},block_setSemanticLabel(e,t){let{blockId:o,value:i}=t;Object(a["findBlockOnActiveFlowWith"])(o,e).semantic_label=i},block_setTags(e,t){let{blockId:o,value:i}=t;Object(a["findBlockOnActiveFlowWith"])(o,e).tags=i},block_addTag(e,t){let{blockId:o,value:i}=t;const r=Object(a["findBlockOnActiveFlowWith"])(o,e);Object(s["isArray"])(r.tags)?r.tags.push(i):r.tags=[i]},block_setExitName(e,t){let{exitId:o,blockId:i,value:s}=t;const r=Object(a["findBlockOnActiveFlowWith"])(i,e);Object(a["findBlockExitWith"])(o,r).name=s},block_setExitTest(e,t){let{exitId:o,blockId:i,value:s}=t;const r=Object(a["findBlockOnActiveFlowWith"])(i,e);Object(a["findBlockExitWith"])(o,r).test=s},block_setExitSemanticLabel(e,t){let{exitId:o,blockId:i,value:s}=t;const r=Object(a["findBlockOnActiveFlowWith"])(i,e);Object(a["findBlockExitWith"])(o,r).semantic_label=s},block_addExit(e,t){let{blockId:o,exit:i,shouldAppend:s}=t;const r=Object(a["findBlockOnActiveFlowWith"])(o,e);s?r.exits.push(i):r.exits.splice(r.exits.length-1,0,i)},block_removeExit(e,t){let{blockId:o,exit:i}=t;const r=Object(a["findBlockOnActiveFlowWith"])(o,e);r.exits=Object(s["reject"])(r.exits,e=>e.uuid===i.uuid)},block_updateExitVendorMetadata(e,t){let{blockId:o,exitId:i,vendorMetadata:s}=t;const r=Object(a["findBlockOnActiveFlowWith"])(o,e),n=Object(a["findBlockExitWith"])(i,r);n.vendor_metadata=s},block_updateExitVendorMetadataByPath(e,t){let{blockId:o,exitId:i,path:a,value:s}=t;Object(h["e"])(e,o,i,"vendor_metadata."+a,s)},block_removeExitVendorMetadataByPath(e,t){let{blockId:o,exitId:i,path:a}=t;Object(h["b"])(e,o,i,"vendor_metadata."+a)},block_updateConfig(e,t){let{blockId:o,newConfig:i}=t;Object(a["findBlockOnActiveFlowWith"])(o,e).config=i},block_updateConfigByKey(e,t){let{blockId:o,key:i,value:s}=t;const r=Object(a["findBlockOnActiveFlowWith"])(o,e).config;r[i]=s,Object(a["findBlockOnActiveFlowWith"])(o,e).config={...r}},block_removeConfigByKey(e,t){let{blockId:o,key:i}=t;Object(h["c"])(e,o,"config."+i)},block_updateConfigByPath(e,t){let{blockId:o,path:i,value:a}=t;Object(h["f"])(e,o,"config."+i,a)},block_updateUIMetadataByPath(e,t){let{blockId:o,path:s,value:r}=t;const n=s.split("."),c=Object(a["findBlockOnActiveFlowWith"])(o,e);c.ui_metadata||i["default"].set(c,"ui_metadata",{});const l=c.ui_metadata;let d=l;while(1!==n.length){const e=n.shift();"undefined"===typeof d[e]&&i["default"].set(d,e,{}),d=d[e]}i["default"].set(d,n[0],r)},block_setBlockExitDestinationBlockId(e,t){let{blockId:o,exitId:i,destinationBlockId:r}=t;Object(s["isNil"])(r)&&(r=void 0);const n=Object(a["findBlockOnActiveFlowWith"])(o,e);Object(a["findBlockExitWith"])(i,n).destination_block=r},block_updateVendorMetadataByPath(e,t){let{blockId:o,path:i,value:a}=t;Object(h["f"])(e,o,"vendor_metadata."+i,a)},block_removeVendorMetadataByPath(e,t){let{blockId:o,path:i}=t;Object(h["c"])(e,o,"vendor_metadata."+i)},block_exitClearDestinationBlockFor(e,t){let{blockExit:o}=t;o.destination_block=void 0}},g={...f,block_setLabel(e,t){let{commit:o,dispatch:i}=e,{blockId:a,value:s}=t;o("block_setLabel",{blockId:a,value:s}),i("block_setName",{blockId:a,value:Object(u["a"])(s)})},block_setName(e,t){let{commit:o,dispatch:i,state:r}=e,{blockId:n,value:c,lockAutoUpdate:l=!1}=t;var d,u;const p=Object(a["findBlockOnActiveFlowWith"])(n,r);if(!0===(null===(u=null===(d=p.vendor_metadata)||void 0===d?void 0:d.floip.ui_metadata)||void 0===u?void 0:u.should_auto_update_name)||l){const e=Object(s["cloneDeep"])(p);o("block_setName",{blockId:n,value:c});const t=Object(s["cloneDeep"])(p);i("block_notifyOtherBlocksAboutBlockChange",{oldBlock:e,newBlock:t})}l&&o("block_updateVendorMetadataByPath",{blockId:n,path:"floip.ui_metadata.should_auto_update_name",value:!1})},block_notifyOtherBlocksAboutBlockChange(e,t){let{dispatch:o,rootGetters:i}=e,{oldBlock:a,newBlock:s}=t;var r,n;return Promise.all(null!==(n=null===(r=i["flow/activeFlow"])||void 0===r?void 0:r.blocks.map(e=>o(`flow/${e.type}/maybeHandleAnotherBlockChange`,{thisBlock:e,oldBlock:a,newBlock:s},{root:!0})))&&void 0!==n?n:[])},block_resetName(e,t){let{commit:o,state:i}=e,{blockId:s}=t;const r=Object(a["findBlockOnActiveFlowWith"])(s,i);o("block_setName",{blockId:s,value:Object(u["a"])(r.label)}),o("block_updateVendorMetadataByPath",{blockId:s,path:"floip.ui_metadata.should_auto_update_name",value:!0})},async block_createBlockDefaultExitWith(e,t){let{dispatch:o}=e,{props:i}=t;return o("block_createBlockExitWith",{props:Object(s["defaults"])(i,{name:"Default",default:!0,test:""})})},async block_createBlockExitWith(e,t){let{dispatch:o,commit:i}=e,{props:a}=t;return{...Object(s["defaults"])(a,{name:"",vendor_metadata:{},destination_block:void 0,test:"",semantic_label:void 0})}},async block_generateExitsBasedOnUiConfig(e,t){let{state:o,dispatch:i,getters:a}=e,{blockType:s,primaryExitTest:c}=t;var l,d,u,p,b,f;const h=a.block_classesConfig[s],v=null===(d=null===(l=null===h||void 0===h?void 0:h.exits)||void 0===l?void 0:l.primary)||void 0===d?void 0:d.name,_=null===(p=null===(u=null===h||void 0===h?void 0:h.exits)||void 0===u?void 0:u.default)||void 0===p?void 0:p.name,g=null===(b=null===h||void 0===h?void 0:h.exits)||void 0===b?void 0:b.default_branching_type;let m=[];return void 0===g&&!0===a.block_shouldHave2Exits(s)?m=[await i("block_createBlockExitWith",{props:{uuid:await(new r["IdGeneratorUuidV4"]).generate(),name:v,test:null!==c&&void 0!==c?c:null===(f=null===h||void 0===h?void 0:h.exits)||void 0===f?void 0:f.primary.test}}),await i("block_createBlockDefaultExitWith",{props:{uuid:await(new r["IdGeneratorUuidV4"]).generate(),name:_}})]:(m=[await i("block_createBlockDefaultExitWith",{props:{uuid:await(new r["IdGeneratorUuidV4"]).generate()}})],[n["a"].EXIT_PER_CHOICE,n["a"].ADVANCED,void 0].includes(g)||console.warn("block_generateExitsBasedOnUiConfig",`the default_branching_type ${g} is not recognized, this might cause an error.`)),m},async block_updateBlockExitWith(e,t){let{commit:o}=e,{blockId:i,exitId:a,props:{test:s,name:r,semantic_label:n}}=t;o("block_setExitName",{blockId:i,exitId:a,value:r}),o("block_setExitTest",{blockId:i,exitId:a,value:s}),o("block_setExitSemanticLabel",{blockId:i,exitId:a,value:n})},async block_resetBranchingExitsByCollapsingNonDefault(e,t){let{state:o,getters:i,dispatch:n}=e,{blockId:c,primaryExitTest:l}=t;var d,u;const p=Object(a["findBlockOnActiveFlowWith"])(c,o),b=i.block_classesConfig[p.type],f={uuid:await(new r["IdGeneratorUuidV4"]).generate(),name:null===(d=null===b||void 0===b?void 0:b.exits)||void 0===d?void 0:d.primary.name,test:null!==l&&void 0!==l?l:null===(u=null===b||void 0===b?void 0:b.exits)||void 0===u?void 0:u.primary.test};p.exits=[await n("block_createBlockExitWith",{props:f}),Object(s["last"])(p.exits)]},async block_resetBranchingExitsToDefaultOnly(e,t){let{state:o,dispatch:i}=e,{blockId:r}=t;const n=Object(a["findBlockOnActiveFlowWith"])(r,o);n.exits=[Object(s["last"])(n.exits)]},async block_select(e,t){let{state:o,dispatch:i}=e,{blockId:a}=t;o.selectedBlocks.push(a)},async block_deselect(e,t){let{state:o}=e,{blockId:i}=t;o.selectedBlocks=o.selectedBlocks.filter(e=>e!==i)},block_updateBlocksAfterLanguagesChange(e,t){let{rootGetters:o,dispatch:i,getters:a}=e,{addedLanguageIds:s,removedLanguageIds:r}=t;!1!==o["flow/hasTextMode"]&&a.activeFlow.blocks.filter(e=>e.type===c["a"]||e.type===l["a"]).forEach(e=>{e.config.choices.forEach(e=>{var t;e.text_tests=null===(t=e.text_tests)||void 0===t?void 0:t.filter(e=>{let{language:t}=e;return void 0!==t&&!r.includes(t)})}),e.config.choices.forEach(e=>{s.forEach(t=>{var o;null===(o=e.text_tests)||void 0===o||o.push({language:t,test_expression:`@block.response = '${Object(d["c"])(e.name)}'`})})})})}};function m(e){return Object(s["has"])(e.config,"prompt")}},7312:function(e,t,o){"use strict";o("6165")},7433:function(e,t,o){"use strict";o("ad42")},"74d7":function(e,t,o){"use strict";o("dfbc")},7988:function(e,t,o){"use strict";o.d(t,"a",(function(){return s}));var i=o("2ef0"),a=o("4004");const s="Core.RunFlow",r={...a["c"],otherFlows:(e,t,o,i)=>o.flow.flows.filter(e=>e.uuid!==i["flow/activeFlow"].uuid)},n={...a["a"],async setDestinationFlowId(e,t){let{commit:o}=e,{blockId:i,newDestinationFlowId:a}=t;return o("flow/block_updateConfig",{blockId:i,newConfig:{flow_id:a}},{root:!0}),a},async createWith(e,t){let{getters:o,dispatch:i}=e,{props:r}=t;return r.type=s,r.config={flow_id:""},a["a"].createWith({getters:o,dispatch:i},{props:r})}},c={...Object(i["cloneDeep"])(a["b"]),getters:r,actions:n};t["b"]=c},"7ef8":function(e,t,o){"use strict";o("4545")},8127:function(e,t,o){"use strict";o("fdb0")},8227:function(e,t,o){},"84d1":function(e,t,o){"use strict";o.r(t),o.d(t,"Core_SetContactPropertyBlock",(function(){return g})),o.d(t,"install",(function(){return k}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"core-set-contact-property-block"},[t("base-block",{attrs:{block:e.block,"show-semantic-label":!1,"uses-default-contact-props-editor":e.usesDefaultContactPropsEditor,"uses-default-branching-editor":e.usesDefaultBranchingEditor},on:{handleBranchingTypeChangedToUnified:function(t){return e.handleBranchingTypeChangedToUnified({block:e.block})}}},[e._t("description",null,{slot:"description"}),e._t("resource-editors",null,{slot:"resource-editors"}),e._t("extras",(function(){return[t("contact-property-editor",{attrs:{block:e.block}})]}),{slot:"extras"}),e._t("vendor-extras",null,{slot:"vendor-extras"}),e._t("branching",null,{slot:"branching"}),e._t("contact-props",null,{slot:"contact-props"}),e._t("vendor",null,{slot:"vendor"})],2)],1)},a=[],s=o("9ab4"),r=o("4bb5"),n=o("1b40"),c=o("2ef0"),l=o("4004");const d="Core.SetContactProperty",u={...l["a"],async createWith(e,t){let{getters:o,dispatch:i}=e,{props:a}=t;return a.type=d,a.config={set_contact_property:[]},l["a"].createWith({getters:o,dispatch:i},{props:a})}},p={...Object(c["cloneDeep"])(l["b"]),actions:u};var b=p,f=o("4a51"),h=o("af98"),v=o("2fe1");const _=Object(r["e"])("flow/"+d);let g=class extends(Object(v["c"])(f["a"])){};Object(s["__decorate"])([Object(n["b"])()],g.prototype,"block",void 0),Object(s["__decorate"])([Object(n["b"])({default:!0})],g.prototype,"usesDefaultBranchingEditor",void 0),Object(s["__decorate"])([Object(n["b"])({default:!1})],g.prototype,"usesDefaultContactPropsEditor",void 0),Object(s["__decorate"])([_.Action],g.prototype,"handleBranchingTypeChangedToUnified",void 0),g=Object(s["__decorate"])([Object(n["a"])({})],g);var m=g;const k=Object(h["c"])(d,b);var y=m,j=o("0c7c"),O=Object(j["a"])(y,i,a,!1,null,null,null);t["default"]=O.exports},8562:function(e,t,o){"use strict";o.d(t,"a",(function(){return n})),o.d(t,"c",(function(){return c})),o.d(t,"d",(function(){return l})),o.d(t,"b",(function(){return d}));var i=o("9300"),a=o("244b"),s=o("a026"),r=o("b85b");const n="block.response",c={choice_findChoice:(e,t,o,a)=>(e,t)=>{const o=Object(i["findBlockWith"])(e,a["flow/activeFlow"]),s=a["flow/resourcesByUuidOnActiveFlow"][t];if(null==s)throw new i["ValidationException"]("Unable to find resource for choice: "+t);return o.config.choices.find(e=>e.prompt===t)}},l={choice_deleteByPath(e,t){let{choice:o,path:i}=t;Object(a["a"])(e,o,""+i)}},d={choice_create(e,t){let{rootGetters:o,dispatch:a}=e,{blockId:s,resourceId:r,value:c}=t;const l=Object(i["findBlockWith"])(s,o["flow/activeFlow"]),{choices:d,set_contact_property:u}=l.config;a("choice_updateName",{blockId:s,resourceId:r,value:c}),a("choice_updateIvrTestExpression",{blockId:s,resourceId:r,value:`${n} = '${d.length<10?d.length:"*"}'`}),void 0!==u&&u.length>0&&a("flow/block_updateContactPropertyMetadataAfterNewChoiceAdded",{blockId:s,prompt:r},{root:!0})},choice_change(e,t){let{dispatch:o}=e;o("choice_updateName",t)},choice_updateName(e,t){let{dispatch:o,getters:i}=e,{blockId:a,resourceId:s,value:r}=t;var n;const c=null===(n=i.choice_findChoice(a,s))||void 0===n?void 0:n.name;o("choice_updateByPath",{blockId:a,resourceId:s,path:"name",value:r}),o("flow/block_updateContactPropertyAfterChoicesChange",{blockId:a},{root:!0}),o("choice_updateFirstSynonymForActiveLanguages",{blockId:a,resourceId:s,oldValue:c,value:r})},choice_updateIvrTestExpression(e,t){let{getters:o,rootGetters:i,dispatch:a}=e,{blockId:r,resourceId:n,value:c}=t;const l=o.choice_findChoice(r,n);s["default"].set(l,"ivr_test",{}),s["default"].set(l.ivr_test,"test_expression",c)},choice_updateFirstSynonymForActiveLanguages(e,t){let{getters:o,rootGetters:i,dispatch:a,commit:s}=e,{blockId:n,resourceId:c,value:l,oldValue:d}=t;const u=i["flow/activeFlow"],p=u.languages;p.forEach(e=>{let{id:t}=e;var i,s;const u=o.choice_findChoice(n,c),p=null===(s=null===(i=u.text_tests)||void 0===i?void 0:i.find(e=>e.language===t))||void 0===s?void 0:s.test_expression,b=void 0===p,f=void 0!==d,h=f&&p===Object(r["a"])(d),v=b||!f||h;v&&a("choice_setSynonymForLanguage",{blockId:n,resourceId:c,language:t,index:0,value:l})})},choice_setSynonymForLanguage(e,t){let{getters:o,dispatch:i}=e,{blockId:a,resourceId:n,language:c,index:l=Number.POSITIVE_INFINITY,value:d}=t;const u=o.choice_findChoice(a,n),p=Object(r["a"])(d);void 0===(null===u||void 0===u?void 0:u.text_tests)&&s["default"].set(u,"text_tests",[]);let b=0,f=-1;for(;b<u.text_tests.length;b+=1){const e=u.text_tests[b];if(e.language===c&&(f+=1,f===l))return void i("choice_updateByPath",{blockId:a,resourceId:u.prompt,path:`text_tests.[${b}].test_expression`,value:p})}f<l&&i("choice_updateByPath",{blockId:a,resourceId:u.prompt,path:`text_tests.[${u.text_tests.length}]`,value:{language:c,test_expression:p}})},choice_removeTextTestsExpressionOnIndex(e,t){let{commit:o}=e,{choice:i,testIndex:a,value:s}=t;o("choice_deleteByPath",{choice:i,path:`text_tests.[${a}]`,value:s})},choice_updateByPath(e,t){let{commit:o,rootGetters:a}=e,{blockId:s,resourceId:r,path:n,value:c}=t;const l=Object(i["findBlockWith"])(s,a["flow/activeFlow"]),d=l.config.choices,u=d.findIndex(e=>e.prompt===r);o("flow/block_updateConfigByPath",{blockId:s,path:`choices.[${u}].${n}`,value:c},{root:!0})}}},"88df":function(e,t,o){"use strict";o.d(t,"a",(function(){return p}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"import-matcher"},[t("label",[e._v(e._s(e._f("trans")(e.matchNotFoundText)))]),e._l(e.missingMatches,(function(o){return t("div",{key:e.getIdentifier(o)+"-missing"},[t("div",{staticClass:"row full-width ml-1 mt-2"},[t("div",{staticClass:"form-check form-check-inline full-width"},[t("div",{staticClass:"col-xl-2 col-md-3"},[t("label",{staticClass:"form-check-label full-width mt-2 mb-2"},[e._v(e._s(e.getLabel(o)))])]),t("div",{staticClass:"col-xl-8 col-md-6"},[t("select",{staticClass:"form-control full-width",on:{change:function(t){return e.updateMappings(o,t)}}},[t("option",{key:"default",attrs:{value:""},domProps:{selected:e.mappingsEmpty}},[e._v(" "+e._s(e._f("trans")("flow-builder.none-selected"))+" ")]),e._l(e.existingOptionsWithoutMatch,(function(o){return t("option",{key:e.getIdentifier(o)+"-option",domProps:{value:JSON.stringify(o)}},[e._v(" "+e._s(o)+" ")])}))],2)]),t("div",{staticClass:"col-xl-2 col-md-3"},[t("button",{staticClass:"btn btn-primary full-width",on:{click:function(t){return e.handleMatch(o)}}},[e._v(" "+e._s(e._f("trans")("flow-builder.update"))+" ")])])])]),"language"===e.type&&e.isFeatureAddLanguageOnImportEnabled?t("div",{staticClass:"row full-width mt-2"},[t("div",{staticClass:"col-12"},[t("language-adder",{on:{onLanguageAddition:e.onLanguageAddition}})],1)]):e._e()])}))],2)},a=[],s=o("9ab4"),r=o("4a51"),n=o("1b40"),c=o("2ef0"),l=o("2fe1"),d=o("4bb5");const u=Object(d["e"])("flow/import");let p=class extends(Object(l["c"])(r["a"])){constructor(){super(...arguments),this.mappings={}}getLabel(e){return Object(c["get"])(e,this.typeLabel,"")}getIdentifier(e){return Object(c["get"])(e,this.typeId,"")}updateMappings(e,t){this.mappings[this.getIdentifier(e)]=t.target.value}get mappingsEmpty(){return Object(c["isEmpty"])(this.mappings)}handleMatch(e){const t=Object(c["get"])(this.mappings,this.getIdentifier(e));if(t){const o=JSON.parse(t);this.$emit("reactToMatch",e,o),this.mappings=Object(c["omit"])(this.mappings,this.getIdentifier(e))}}async onLanguageAddition(){await this.tryToFixLanguages(this.flowContainer)}};Object(s["__decorate"])([Object(n["b"])({default:""})],p.prototype,"matchNotFoundText",void 0),Object(s["__decorate"])([Object(n["b"])({required:!0})],p.prototype,"type",void 0),Object(s["__decorate"])([Object(n["b"])({required:!0})],p.prototype,"typeId",void 0),Object(s["__decorate"])([Object(n["b"])({required:!0})],p.prototype,"typeLabel",void 0),Object(s["__decorate"])([Object(n["b"])({required:!0})],p.prototype,"missingMatches",void 0),Object(s["__decorate"])([Object(n["b"])({required:!0})],p.prototype,"existingOptionsWithoutMatch",void 0),Object(s["__decorate"])([u.Action],p.prototype,"tryToFixLanguages",void 0),Object(s["__decorate"])([d["b"]],p.prototype,"isFeatureAddLanguageOnImportEnabled",void 0),Object(s["__decorate"])([u.State],p.prototype,"flowContainer",void 0),p=Object(s["__decorate"])([Object(n["a"])({})],p);var b=p,f=b,h=(o("74d7"),o("0c7c")),v=Object(h["a"])(f,i,a,!1,null,null,null);t["b"]=v.exports},9084:function(e,t,o){"use strict";var i=function(){var e=this,t=e._self._c;return e.hasSomethingToImport?t("div",{staticClass:"error-handler-v2"},[t("div",{staticClass:"mt-4 ml-4 mr-4 mb-4"},[t("h5",[e._v(e._s(e.trans("flow-builder.results")))]),e.isSafeToImport&&e.hasWarnings?t("div",{staticClass:"alert alert-success mt-3",attrs:{role:"alert"}},[t("font-awesome-icon",{attrs:{icon:["fa","exclamation-triangle"]}}),e._v(" "+e._s(e.trans("flow-builder.success-with-warnings"))+" ")],1):e._e(),e.isSafeToImport&&!e.hasWarnings?t("div",{staticClass:"alert alert-success mt-3",attrs:{role:"alert"}},[t("font-awesome-icon",{attrs:{icon:["far","check-circle"]}}),e._v(" "+e._s(e.trans("flow-builder.import-success"))+" ")],1):e._e(),e.isSafeToImport?e._e():t("div",[t("div",{staticClass:"alert alert-danger mt-3",attrs:{role:"alert"}},[t("i",{staticClass:"glyphicon glyphicon-exclamation-sign"}),e._v(" "+e._s(e.trans("flow-builder.failure"))+" ")]),t("h5",[e._v(e._s(e.trans("flow-builder.errors")))]),t("p",[e._v(e._s(e.trans("flow-builder.please-fix-errors-first")))]),t("full-import-matcher"),t("tech-error-notifications",{attrs:{"validation-errors":e.containerImportValidationTrueErrors,"error-type":"error"}})],1),e.hasWarnings?t("div",{staticClass:"mt-4"},[t("h5",[e._v(e._s(e.trans("flow-builder.warnings")))]),t("p",[e._v(e._s(e.trans("flow-builder.warnings-hint-on-import")))]),t("tech-error-notifications",{attrs:{"validation-errors":e.containerImportValidationWarningErrors,"error-type":"warning"}})],1):e._e()])]):e._e()},a=[],s=o("4f90"),r=o("ff9d"),n=o("2f62"),c=o("4a51"),l={name:"ErrorHandlerV2",components:{TechErrorNotifications:s["a"],FullImportMatcher:r["a"]},mixins:[c["a"]],computed:{...Object(n["e"])("flow/import",["missingLanguages","missingProperties","missingGroups"]),...Object(n["c"])("flow/import",["hasSomethingToImport","isSafeToImport","hasWarnings","containerImportValidationTrueErrors","containerImportValidationWarningErrors","containerImportValidationErrors","languagesMissing","propertiesMissing","groupsMissing"])}},d=l,u=o("0c7c"),p=Object(u["a"])(d,i,a,!1,null,"6a772eb3",null);t["a"]=p.exports},"90d2":function(e,t,o){"use strict";o.d(t,"h",(function(){return s})),o.d(t,"g",(function(){return r})),o.d(t,"a",(function(){return c})),o.d(t,"c",(function(){return l})),o.d(t,"d",(function(){return d})),o.d(t,"b",(function(){return u})),o.d(t,"f",(function(){return p})),o.d(t,"e",(function(){return b}));var i=o("2ef0"),a=o("7988");function s(e,t,o){return e.map(e=>{const a=Object(i["cloneDeep"])(e);return a.values=e.values.map(e=>{const a=Object(i["cloneDeep"])(e);return e.language_id===t&&(a.language_id=o),a}),a})}function r(e,t){const o=Object(i["cloneDeep"])(e),a=t.flows;return a.forEach(e=>{const t=Object(i["findIndex"])(o.flows,t=>t.uuid===e.uuid);t<0?o.flows.push(e):o.flows[t]=e}),o}function n(e){const t=e.flows,o=[],i=[];function s(e){o.push(e.uuid),e.blocks.forEach(e=>{if(e.type===a["a"]){const i=e.config.flow_id,a=t.find(e=>e.uuid===i);a&&!o.includes(a.uuid)&&s(a)}}),i.includes(e.uuid)||i.push(e.uuid)}return t.forEach(e=>{o.includes(e.uuid)||s(e)}),i}function c(e){if(Object(i["isEmpty"])(e))return"";const t=n(e),o=t.pop();return null!==o&&void 0!==o?o:""}function l(e){let{flowContainer:t,oldFlowContainer:o}=e;return!Object(i["isEqual"])(Object(i["get"])(t,"flows[0].languages"),Object(i["get"])(o,"flows[0].languages"))}function d(e){let{newPropertyBlocks:t,oldPropertyBlocks:o}=e;return!Object(i["isEqual"])(t,o)}function u(e){let{newGroupBlocks:t,oldGroupBlocks:o}=e;return!Object(i["isEqual"])(t,o)}function p(e){return Object(i["filter"])(Object(i["get"])(e,"flows[0].blocks"),e=>"Core.SetContactProperty"===e.type)}function b(e){return Object(i["filter"])(Object(i["get"])(e,"flows[0].blocks"),e=>"Core.SetGroupMembership"===e.type)}},"963c":function(e,t,o){"use strict";var i;o.d(t,"a",(function(){return i})),function(e){e["UNIFIED"]="UNIFIED",e["EXIT_PER_CHOICE"]="EXIT_PER_CHOICE",e["ADVANCED"]="ADVANCED"}(i||(i={}))},"9f67":function(e,t,o){},a520:function(e,t,o){},a621:function(e,t,o){},a925:function(e,t,o){var i={"./af":"65d7","./af.js":"65d7","./ar":"87f4","./ar-dz":"a873","./ar-dz.js":"a873","./ar-kw":"1333","./ar-kw.js":"1333","./ar-ly":"9f58","./ar-ly.js":"9f58","./ar-ma":"2e78","./ar-ma.js":"2e78","./ar-sa":"7727","./ar-sa.js":"7727","./ar-tn":"2c75","./ar-tn.js":"2c75","./ar.js":"87f4","./az":"3f69","./az.js":"3f69","./be":"2e86","./be.js":"2e86","./bg":"f4c3","./bg.js":"f4c3","./bm":"d539","./bm.js":"d539","./bn":"772c","./bn-bd":"7612","./bn-bd.js":"7612","./bn.js":"772c","./bo":"7d2b","./bo.js":"7d2b","./br":"7e42","./br.js":"7e42","./bs":"1841","./bs.js":"1841","./ca":"a615","./ca.js":"a615","./cs":"a78e","./cs.js":"a78e","./cv":"8570","./cv.js":"8570","./cy":"9d4d","./cy.js":"9d4d","./da":"38ba","./da.js":"38ba","./de":"c3fe","./de-at":"9dc2","./de-at.js":"9dc2","./de-ch":"694b1","./de-ch.js":"694b1","./de.js":"c3fe","./dv":"8c17","./dv.js":"8c17","./el":"5c9d","./el.js":"5c9d","./en-au":"7213","./en-au.js":"7213","./en-ca":"09b1","./en-ca.js":"09b1","./en-gb":"a42a","./en-gb.js":"a42a","./en-ie":"8fd4","./en-ie.js":"8fd4","./en-il":"794e","./en-il.js":"794e","./en-in":"e734","./en-in.js":"e734","./en-nz":"6c36","./en-nz.js":"6c36","./en-sg":"939d","./en-sg.js":"939d","./eo":"372d","./eo.js":"372d","./es":"ca85","./es-do":"7a59","./es-do.js":"7a59","./es-mx":"287e","./es-mx.js":"287e","./es-us":"221d","./es-us.js":"221d","./es.js":"ca85","./et":"ac6e","./et.js":"ac6e","./eu":"acd5","./eu.js":"acd5","./fa":"4e16","./fa.js":"4e16","./fi":"2a06","./fi.js":"2a06","./fil":"64ae","./fil.js":"64ae","./fo":"3e12","./fo.js":"3e12","./fr":"0d66","./fr-ca":"0d57","./fr-ca.js":"0d57","./fr-ch":"798e","./fr-ch.js":"798e","./fr.js":"0d66","./fy":"bd4d","./fy.js":"bd4d","./ga":"0ff6","./ga.js":"0ff6","./gd":"c344","./gd.js":"c344","./gl":"7846","./gl.js":"7846","./gom-deva":"e29f","./gom-deva.js":"e29f","./gom-latn":"675b","./gom-latn.js":"675b","./gu":"538c","./gu.js":"538c","./he":"8df8e","./he.js":"8df8e","./hi":"ab57","./hi.js":"ab57","./hr":"807a","./hr.js":"807a","./hu":"3229","./hu.js":"3229","./hy-am":"ac77","./hy-am.js":"ac77","./id":"3500","./id.js":"3500","./is":"2330","./is.js":"2330","./it":"bf52","./it-ch":"42b7","./it-ch.js":"42b7","./it.js":"bf52","./ja":"c022","./ja.js":"c022","./jv":"6ac8","./jv.js":"6ac8","./ka":"56cf","./ka.js":"56cf","./kk":"6da0","./kk.js":"6da0","./km":"b5aa","./km.js":"b5aa","./kn":"bf53","./kn.js":"bf53","./ko":"315f","./ko.js":"315f","./ku":"09db","./ku.js":"09db","./ky":"bffd","./ky.js":"bffd","./lb":"c666","./lb.js":"c666","./lo":"0139","./lo.js":"0139","./lt":"57a4","./lt.js":"57a4","./lv":"4fdf","./lv.js":"4fdf","./me":"d087","./me.js":"d087","./mi":"bff4","./mi.js":"bff4","./mk":"7cff","./mk.js":"7cff","./ml":"cfd2","./ml.js":"cfd2","./mn":"d49a","./mn.js":"d49a","./mr":"afba","./mr.js":"afba","./ms":"ba94","./ms-my":"80d2","./ms-my.js":"80d2","./ms.js":"ba94","./mt":"236f","./mt.js":"236f","./my":"ceaa","./my.js":"ceaa","./nb":"cf62","./nb.js":"cf62","./ne":"6c11","./ne.js":"6c11","./nl":"8538","./nl-be":"18aa","./nl-be.js":"18aa","./nl.js":"8538","./nn":"5687","./nn.js":"5687","./oc-lnc":"7f9f","./oc-lnc.js":"7f9f","./pa-in":"f112","./pa-in.js":"f112","./pl":"a865","./pl.js":"a865","./pt":"3005","./pt-br":"d705","./pt-br.js":"d705","./pt.js":"3005","./ro":"c354","./ro.js":"c354","./ru":"b6f4","./ru.js":"b6f4","./sd":"6c64","./sd.js":"6c64","./se":"c2cd","./se.js":"c2cd","./si":"9a0c","./si.js":"9a0c","./sk":"91fd","./sk.js":"91fd","./sl":"800b","./sl.js":"800b","./sq":"8fc8","./sq.js":"8fc8","./sr":"58f6","./sr-cyrl":"7fa6","./sr-cyrl.js":"7fa6","./sr.js":"58f6","./ss":"ab05","./ss.js":"ab05","./sv":"489a","./sv.js":"489a","./sw":"f683","./sw.js":"f683","./ta":"30c0","./ta.js":"30c0","./te":"29e8","./te.js":"29e8","./tet":"80b7","./tet.js":"80b7","./tg":"9e71","./tg.js":"9e71","./th":"8575","./th.js":"8575","./tk":"929d","./tk.js":"929d","./tl-ph":"2935","./tl-ph.js":"2935","./tlh":"c80c","./tlh.js":"c80c","./tr":"6fa0","./tr.js":"6fa0","./tzl":"81a8","./tzl.js":"81a8","./tzm":"a30f","./tzm-latn":"083a","./tzm-latn.js":"083a","./tzm.js":"a30f","./ug-cn":"7994","./ug-cn.js":"7994","./uk":"660b","./uk.js":"660b","./ur":"a63f","./ur.js":"a63f","./uz":"62bb","./uz-latn":"4b8a","./uz-latn.js":"4b8a","./uz.js":"62bb","./vi":"0521","./vi.js":"0521","./x-pseudo":"b73e","./x-pseudo.js":"b73e","./yo":"f86c","./yo.js":"f86c","./zh-cn":"1f75","./zh-cn.js":"1f75","./zh-hk":"379a","./zh-hk.js":"379a","./zh-mo":"eee5","./zh-mo.js":"eee5","./zh-tw":"c840","./zh-tw.js":"c840"};function a(e){var t=s(e);return o(t)}function s(e){if(!o.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=s,e.exports=a,a.id="a925"},ab96:function(e,t,o){var i={"./af":"8872","./af.js":"8872","./ar":"bb32","./ar-dz":"f38b","./ar-dz.js":"f38b","./ar-kw":"8a87","./ar-kw.js":"8a87","./ar-ly":"119f","./ar-ly.js":"119f","./ar-ma":"de6a","./ar-ma.js":"de6a","./ar-sa":"ab35","./ar-sa.js":"ab35","./ar-tn":"7068","./ar-tn.js":"7068","./ar.js":"bb32","./az":"32c8","./az.js":"32c8","./be":"a569","./be.js":"a569","./bg":"911b","./bg.js":"911b","./bm":"cade","./bm.js":"cade","./bn":"b059","./bn-bd":"60a6","./bn-bd.js":"60a6","./bn.js":"b059","./bo":"0b7e","./bo.js":"0b7e","./br":"7beb","./br.js":"7beb","./bs":"44a7","./bs.js":"44a7","./ca":"5978","./ca.js":"5978","./cs":"3e30","./cs.js":"3e30","./cv":"90d4","./cv.js":"90d4","./cy":"893a","./cy.js":"893a","./da":"673f","./da.js":"673f","./de":"745c","./de-at":"beab","./de-at.js":"beab","./de-ch":"5939","./de-ch.js":"5939","./de.js":"745c","./dv":"4da0","./dv.js":"4da0","./el":"6f8c","./el.js":"6f8c","./en-au":"8a25","./en-au.js":"8a25","./en-ca":"2e5f","./en-ca.js":"2e5f","./en-gb":"0787","./en-gb.js":"0787","./en-ie":"a30f3","./en-ie.js":"a30f3","./en-il":"45c0","./en-il.js":"45c0","./en-in":"3c1e","./en-in.js":"3c1e","./en-nz":"ff2e","./en-nz.js":"ff2e","./en-sg":"f14d","./en-sg.js":"f14d","./eo":"69bc","./eo.js":"69bc","./es":"f88f","./es-do":"66dc","./es-do.js":"66dc","./es-mx":"10af","./es-mx.js":"10af","./es-us":"e89d","./es-us.js":"e89d","./es.js":"f88f","./et":"71be","./et.js":"71be","./eu":"7780","./eu.js":"7780","./fa":"0b63","./fa.js":"0b63","./fi":"a33d","./fi.js":"a33d","./fil":"3dbd","./fil.js":"3dbd","./fo":"fc63","./fo.js":"fc63","./fr":"9a51","./fr-ca":"cda8","./fr-ca.js":"cda8","./fr-ch":"4a7d","./fr-ch.js":"4a7d","./fr.js":"9a51","./fy":"854a","./fy.js":"854a","./ga":"4489","./ga.js":"4489","./gd":"c0d5","./gd.js":"c0d5","./gl":"4530","./gl.js":"4530","./gom-deva":"8967","./gom-deva.js":"8967","./gom-latn":"2ef4","./gom-latn.js":"2ef4","./gu":"cbd2","./gu.js":"cbd2","./he":"c2f9","./he.js":"c2f9","./hi":"77fe","./hi.js":"77fe","./hr":"a34a","./hr.js":"a34a","./hu":"8d44","./hu.js":"8d44","./hy-am":"c920","./hy-am.js":"c920","./id":"4197","./id.js":"4197","./is":"540c","./is.js":"540c","./it":"2f58","./it-ch":"a347","./it-ch.js":"a347","./it.js":"2f58","./ja":"f6f6","./ja.js":"f6f6","./jv":"99f1","./jv.js":"99f1","./ka":"60e4","./ka.js":"60e4","./kk":"17f2","./kk.js":"17f2","./km":"ec19","./km.js":"ec19","./kn":"2216","./kn.js":"2216","./ko":"dba2","./ko.js":"dba2","./ku":"917e","./ku.js":"917e","./ky":"3ad1","./ky.js":"3ad1","./lb":"cb9a","./lb.js":"cb9a","./lo":"786a","./lo.js":"786a","./lt":"0eeb","./lt.js":"0eeb","./lv":"0716","./lv.js":"0716","./me":"325a","./me.js":"325a","./mi":"7732","./mi.js":"7732","./mk":"2fde","./mk.js":"2fde","./ml":"9991","./ml.js":"9991","./mn":"fb02","./mn.js":"fb02","./mr":"623d","./mr.js":"623d","./ms":"a904","./ms-my":"d801","./ms-my.js":"d801","./ms.js":"a904","./mt":"ddbe","./mt.js":"ddbe","./my":"c740","./my.js":"c740","./nb":"8196","./nb.js":"8196","./ne":"1f2a","./ne.js":"1f2a","./nl":"e056","./nl-be":"325b","./nl-be.js":"325b","./nl.js":"e056","./nn":"b7b0","./nn.js":"b7b0","./oc-lnc":"57c8","./oc-lnc.js":"57c8","./pa-in":"99c7","./pa-in.js":"99c7","./pl":"5919","./pl.js":"5919","./pt":"d9ae","./pt-br":"d851","./pt-br.js":"d851","./pt.js":"d9ae","./ro":"ce90","./ro.js":"ce90","./ru":"87a5","./ru.js":"87a5","./sd":"235c","./sd.js":"235c","./se":"839b","./se.js":"839b","./si":"2dd2","./si.js":"2dd2","./sk":"8cd8","./sk.js":"8cd8","./sl":"2a76","./sl.js":"2a76","./sq":"4a4d","./sq.js":"4a4d","./sr":"1632","./sr-cyrl":"73fd","./sr-cyrl.js":"73fd","./sr.js":"1632","./ss":"052a","./ss.js":"052a","./sv":"cb84","./sv.js":"cb84","./sw":"b126","./sw.js":"b126","./ta":"f946","./ta.js":"f946","./te":"399d","./te.js":"399d","./tet":"8d77","./tet.js":"8d77","./tg":"6588","./tg.js":"6588","./th":"462a","./th.js":"462a","./tk":"7d6b","./tk.js":"7d6b","./tl-ph":"27ff","./tl-ph.js":"27ff","./tlh":"1239","./tlh.js":"1239","./tr":"09a0","./tr.js":"09a0","./tzl":"e9ca","./tzl.js":"e9ca","./tzm":"d954","./tzm-latn":"e577","./tzm-latn.js":"e577","./tzm.js":"d954","./ug-cn":"5756","./ug-cn.js":"5756","./uk":"7c79","./uk.js":"7c79","./ur":"fb86","./ur.js":"fb86","./uz":"e487","./uz-latn":"251a","./uz-latn.js":"251a","./uz.js":"e487","./vi":"9681","./vi.js":"9681","./x-pseudo":"8e0c","./x-pseudo.js":"8e0c","./yo":"5cf8","./yo.js":"5cf8","./zh-cn":"96ae","./zh-cn.js":"96ae","./zh-hk":"7e5c","./zh-hk.js":"7e5c","./zh-mo":"eb4b","./zh-mo.js":"eb4b","./zh-tw":"623f","./zh-tw.js":"623f"};function a(e){var t=s(e);return o(t)}function s(e){if(!o.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=s,e.exports=a,a.id="ab96"},ac6d:function(e,t,o){"use strict";o("f32c")},ad19:function(e,t,o){"use strict";o("0484")},ad42:function(e,t,o){},af98:function(e,t,o){"use strict";o.d(t,"a",(function(){return v})),o.d(t,"e",(function(){return y})),o.d(t,"c",(function(){return j})),o.d(t,"d",(function(){return O})),o.d(t,"b",(function(){return w}));var i=o("2ef0"),a=o("a026"),s=o("9300"),r=o("d39e"),n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"in-progress-action"},[t("font-awesome-icon",{staticClass:"fa-btn fa-spin",attrs:{icon:["fas","spinner"]}}),e._v(" "+e._s(e.textContent)+" ")],1)},c=[],l={name:"InProgressAction",props:{textContent:{type:String,required:!0}}},d=l,u=o("0c7c"),p=Object(u["a"])(d,n,c,!1,null,null,null),b=p.exports,f=o("4a51");const h=1e3;var v;(function(e){e["CONNECTION_CREATE"]="CONNECTION_CREATE",e["BLOCK_RELOCATE"]="BLOCK_RELOCATE"})(v||(v={}));const _=()=>({activeBlockId:null,isEditable:!0,activeMainComponent:void 0,hasFlowChanges:!1,activeConnectionsContext:[],operations:{[v.CONNECTION_CREATE]:{kind:v.CONNECTION_CREATE,data:null},[v.BLOCK_RELOCATE]:null},draggableForExitsByUuid:{},isBlockEditorOpen:!1,interactionDesignerHeaderBoundingClientRect:{},isConnectionCreationInProgress:!1}),g={activeBlock:(e,t)=>{let{activeBlockId:o}=e,{blocksById:i}=t;return o?i[o]:null},blocksById:(e,t,o,a)=>{const{blocks:s}=a["flow/activeFlow"]?a["flow/activeFlow"]:{blocks:[]};return Object(i["keyBy"])(s,"uuid")},nodeLabelsById:(e,t,o)=>{let{flow:{flows:a}}=o;return Object(i["mapValues"])(Object(i["keyBy"])(a[0].blocks,"uuid"),"label")},exitLabelsById:(e,t,o)=>{let{flow:{flows:a}}=o;return Object(i["mapValues"])(Object(i["keyBy"])(Object(i["flatMap"])(a[0].blocks,"exits"),"uuid"),"label")},isEditable:e=>e.isEditable,hasFlowChanges:e=>e.hasFlowChanges,interactionDesignerHeaderBoundingClientRect:e=>e.interactionDesignerHeaderBoundingClientRect,isBuilderCanvasEnabled:e=>"builder"===e.activeMainComponent,isResourceViewerCanvasEnabled:e=>"resource-viewer"===e.activeMainComponent},m={resetBuilderState(e,t){Object.assign(e,t)},activateBlock(e,t){let{blockId:o}=t;e.activeBlockId=o},activateConnection(e,t){let{connectionContext:o}=t;e.activeConnectionsContext=Object(i["union"])([o],e.activeConnectionsContext)},setActiveMainComponent(e,t){let{mainComponent:o}=t;e.activeMainComponent=o},deactivateConnection(e,t){let{connectionContext:o}=t;e.activeConnectionsContext=Object(i["filter"])(e.activeConnectionsContext,e=>e!==o)},deactivateConnectionFromExitUuid(e,t){let{exitUuid:o}=t;e.activeConnectionsContext=Object(i["reject"])(e.activeConnectionsContext,e=>e.exitId===o)},setIsConnectionCreationInProgress(e,t){let{value:o}=t;e.isConnectionCreationInProgress=o},setOperation(e,t){let{operations:o}=e,{operation:i}=t;o[i.kind]=i},setIsEditable(e,t){e.isEditable=t},setHasFlowChanges(e,t){e.hasFlowChanges=t},initDraggableForExitsByUuid(e){e.draggableForExitsByUuid={}},setIsBlockEditorOpen(e,t){e.isBlockEditorOpen=t},setInteractionDesignerHeaderBoundingClientRect(e,t){e.interactionDesignerHeaderBoundingClientRect=t}},k={removeConnectionFrom(e,t){let{commit:o}=e,{block:{uuid:i},exit:{uuid:a}}=t;o("flow/block_setBlockExitDestinationBlockId",{blockId:i,exitId:a,destinationBlockId:void 0},{root:!0})},initializeConnectionCreateWith(e,t){let{commit:o}=e,{block:{uuid:i},exit:{uuid:a},position:r}=t;if(!i||!a)throw new s["ValidationException"]("Unable to create connection without source: "+JSON.stringify({blockId:i,exitId:a}));const n={kind:v.CONNECTION_CREATE,data:{source:{blockId:i,exitId:a},position:r,targetId:null}};o("setOperation",{operation:n})},setConnectionCreateTargetBlock(e,t){let{commit:o,state:i}=e,{block:a}=t;const{data:r}=i.operations[v.CONNECTION_CREATE];if(!r)throw new s["ValidationException"]("Unable to modify uninitialized operation: "+JSON.stringify(r));const{source:n,position:c}=r,l={kind:v.CONNECTION_CREATE,data:{source:n,position:c,targetId:a.uuid}};o("setOperation",{operation:l})},setConnectionCreateTargetBlockToNullFrom(e,t){let{commit:o,state:a}=e,{block:r}=t;const{data:n}=a.operations[v.CONNECTION_CREATE];if(!n)throw new s["ValidationException"]("Unable to modify uninitialized operation: "+JSON.stringify(n));const{source:c,targetId:l,position:d}=n;if(!Object(i["isEqual"])(l,r.uuid))throw new s["ValidationException"]("Unable to nullify exit relocation from different exit.");const u={kind:v.CONNECTION_CREATE,data:{source:c,position:d,targetId:null}};o("setOperation",{operation:u})},applyConnectionCreate(e){let{commit:t,state:{operations:o}}=e;const{data:i}=o[v.CONNECTION_CREATE];if(!i)throw new s["ValidationException"]("Unable to complete uninitialized operation: "+JSON.stringify(i));const{source:{blockId:a,exitId:r},targetId:n}=i;t("flow/block_setBlockExitDestinationBlockId",{blockId:a,exitId:r,destinationBlockId:n},{root:!0});const c={kind:v.CONNECTION_CREATE,data:null};t("setOperation",{operation:c})},setIsEditable(e,t){let{commit:o}=e;const i=Boolean(t);o("setIsEditable",i)},setHasFlowChanges(e,t){let{commit:o}=e;o("setHasFlowChanges",Boolean(t))},async persistFlowAndHandleUiState(e){let{dispatch:t,commit:o,state:i,rootGetters:s,rootState:n}=e;if(!1===s.isFeatureTreeSaveEnabled||!1===i.isEditable)return void console.debug("skipping persistFlowAndHandleUiState");o("setTreeSaving",!0,{root:!0}),o("setIsEditable",!1);const c=a["default"].$toast.info({component:b,props:{textContent:f["a"].trans("flow-builder.saving-flow")}},{closeButton:!1}),l=await t("flow/flow_persist",{persistRoute:Object(r["b"])("flows.persistFlow",{},n.trees.ui.routes),flowContainer:s["flow/activeFlowContainer"]},{root:!0}),d=new Promise(e=>setTimeout(e,h)),[u]=await Promise.all([l,d]);return null===u||void 0===u?a["default"].$toast.error(""+f["a"].trans("flow-builder.error-while-saving-flow")):a["default"].$toast.success(""+f["a"].trans("flow-builder.flow-saved"),{timeout:3e3,hideProgressBar:!0}),o("setTreeSaving",!1,{root:!0}),o("setIsEditable",!0),a["default"].$toast.dismiss(c),null!==u&&void 0!==u?u:void 0},setBlockPositionTo(e,t){let{commit:o,rootGetters:i}=e,{position:{x:a,y:s},block:r}=t;o("flow/flow_updateBlockCoordinates",{flowId:i["flow/activeFlow"].uuid,blockId:r.uuid,coordinates:{x:a,y:s}},{root:!0})}},y={namespaced:!0,state:_,getters:g,mutations:m,actions:k};function j(e,t){return o=>(void 0!==t&&void 0!==e||console.error("createDefaultBlockTypeInstallerFor","something weird is happening: the store is undefined","which might cause",'"TypeError: rawModule is undefined"'),o.$store.hasModule(["flow",e])||o.$store.registerModule(["flow",e],t))}function O(e,t){var o,a,s,r,n,c,l,d;return console.debug("store/builder","generateConnectionLayoutKeyFor",e.uuid,t.uuid),[[null===(a=null===(o=null===e||void 0===e?void 0:e.ui_metadata)||void 0===o?void 0:o.canvas_coordinates)||void 0===a?void 0:a.x,null===(r=null===(s=null===e||void 0===e?void 0:e.ui_metadata)||void 0===s?void 0:s.canvas_coordinates)||void 0===r?void 0:r.y],[null===(c=null===(n=null===t||void 0===t?void 0:t.ui_metadata)||void 0===n?void 0:n.canvas_coordinates)||void 0===c?void 0:c.x,null===(d=null===(l=null===t||void 0===t?void 0:t.ui_metadata)||void 0===l?void 0:l.canvas_coordinates)||void 0===d?void 0:d.y],e.label,t.label,...Object(i["map"])(e.exits,"name"),...Object(i["map"])(t.exits,"name")]}function w(e){var t,o,i,a;const s=220,r=124,n=120,c=134,l=null===(o=null===(t=null===e||void 0===e?void 0:e.ui_metadata)||void 0===t?void 0:t.canvas_coordinates)||void 0===o?void 0:o.x,d=null===(a=null===(i=null===e||void 0===e?void 0:e.ui_metadata)||void 0===i?void 0:i.canvas_coordinates)||void 0===a?void 0:a.y;if(null==l||null==d){const e=C();return{x:e.x-Math.round(s/2),y:e.y-Math.round(r/2)}}return{x:l+n,y:d+c}}function C(){const e=document.getElementsByClassName("builder-canvas")[0],t=e.getBoundingClientRect(),o=document.getElementsByClassName("tree-sidebar-container")[0],i=void 0!==o?o.clientWidth:0,a=window.innerWidth-i-t.left,s=window.innerHeight-t.top,r=Math.round(t.left+a/2+window.scrollX),n=Math.round(t.top+s/2+window.scrollY);return{x:r,y:n}}},b107:function(e,t,o){},b221:function(e,t,o){var i={"./1.0.0-rc1/IAdvancedSelectOneBlock.json":"467b","./1.0.0-rc1/ICaseBlock.json":"24dc","./1.0.0-rc1/ILocationResponseBlock.json":"b194","./1.0.0-rc1/ILogBlock.json":"7074","./1.0.0-rc1/IMessageBlock.json":"aa41","./1.0.0-rc1/INumericResponseBlock.json":"e0ae","./1.0.0-rc1/IOpenResponseBlock.json":"5831","./1.0.0-rc1/IOutputBlock.json":"5663","./1.0.0-rc1/IPhotoResponseBlock.json":"a0ef","./1.0.0-rc1/IPrintBlock.json":"79a9","./1.0.0-rc1/IReadBlock.json":"27e7","./1.0.0-rc1/IRunFlowBlock.json":"bf9a","./1.0.0-rc1/ISelectManyResponseBlock.json":"44db","./1.0.0-rc1/ISelectOneResponseBlock.json":"5149","./1.0.0-rc1/ISetContactPropertyBlock.json":"f37b","./1.0.0-rc1/ISetGroupMembershipBlock.json":"45d5","./1.0.0-rc1/flowSpecJsonSchema.json":"fc41","./1.0.0-rc2/IAdvancedSelectOneBlock.json":"5c3b","./1.0.0-rc2/ICaseBlock.json":"fabe","./1.0.0-rc2/ILocationResponseBlock.json":"24e6","./1.0.0-rc2/ILogBlock.json":"025b","./1.0.0-rc2/IMessageBlock.json":"5402","./1.0.0-rc2/INumericResponseBlock.json":"0999","./1.0.0-rc2/IOpenResponseBlock.json":"6612","./1.0.0-rc2/IOutputBlock.json":"c3a9","./1.0.0-rc2/IPhotoResponseBlock.json":"42f5","./1.0.0-rc2/IPrintBlock.json":"3d43","./1.0.0-rc2/IReadBlock.json":"56d3","./1.0.0-rc2/IRunFlowBlock.json":"4377","./1.0.0-rc2/ISelectManyResponseBlock.json":"468a","./1.0.0-rc2/ISelectOneResponseBlock.json":"897a","./1.0.0-rc2/ISetContactPropertyBlock.json":"9744","./1.0.0-rc2/ISetGroupMembershipBlock.json":"f2ae","./1.0.0-rc2/flowSpecJsonSchema.json":"5a2e","./1.0.0-rc3/IAdvancedSelectOneBlock.json":"ebe9","./1.0.0-rc3/ICaseBlock.json":"df71","./1.0.0-rc3/ILocationResponseBlock.json":"4b5a","./1.0.0-rc3/ILogBlock.json":"5c92","./1.0.0-rc3/IMessageBlock.json":"9f75","./1.0.0-rc3/INumericResponseBlock.json":"ca51","./1.0.0-rc3/IOpenResponseBlock.json":"284f","./1.0.0-rc3/IOutputBlock.json":"bf9b","./1.0.0-rc3/IPhotoResponseBlock.json":"3da6","./1.0.0-rc3/IPrintBlock.json":"b781","./1.0.0-rc3/IReadBlock.json":"5bbb","./1.0.0-rc3/IRunFlowBlock.json":"84e0","./1.0.0-rc3/ISelectManyResponseBlock.json":"347b","./1.0.0-rc3/ISelectOneResponseBlock.json":"8832","./1.0.0-rc3/ISetContactPropertyBlock.json":"9b07","./1.0.0-rc3/ISetGroupMembershipBlock.json":"e4a3","./1.0.0-rc3/flowSpecJsonSchema.json":"29d3","./1.0.0-rc4/IAdvancedSelectOneBlock.json":"171d","./1.0.0-rc4/ICaseBlock.json":"35a7","./1.0.0-rc4/ILocationResponseBlock.json":"c6df","./1.0.0-rc4/ILogBlock.json":"0468","./1.0.0-rc4/IMessageBlock.json":"6faa","./1.0.0-rc4/INumericResponseBlock.json":"d6b7","./1.0.0-rc4/IOpenResponseBlock.json":"6897","./1.0.0-rc4/IOutputBlock.json":"ee9c","./1.0.0-rc4/IPhotoResponseBlock.json":"fdc7","./1.0.0-rc4/IPrintBlock.json":"3897","./1.0.0-rc4/IReadBlock.json":"74af","./1.0.0-rc4/IRunFlowBlock.json":"a629","./1.0.0-rc4/ISelectManyResponseBlock.json":"bcf6","./1.0.0-rc4/ISelectOneResponseBlock.json":"fea9","./1.0.0-rc4/ISetContactPropertyBlock.json":"7464","./1.0.0-rc4/ISetGroupMembershipBlock.json":"f47e","./1.0.0-rc4/flowSpecJsonSchema.json":"9b2d","./current/IAdvancedSelectOneBlock.json":"9e25","./current/ICaseBlock.json":"0e0e","./current/ILocationResponseBlock.json":"24e9","./current/ILogBlock.json":"8b9f","./current/IMessageBlock.json":"1010","./current/INumericResponseBlock.json":"5cb6","./current/IOpenResponseBlock.json":"30f6","./current/IOutputBlock.json":"858c","./current/IPhotoResponseBlock.json":"768e","./current/IPrintBlock.json":"7cfe","./current/IReadBlock.json":"65d3","./current/IRunFlowBlock.json":"2ced","./current/ISelectManyResponseBlock.json":"d713","./current/ISelectOneResponseBlock.json":"d76c","./current/ISetContactPropertyBlock.json":"41c5","./current/ISetGroupMembershipBlock.json":"44b3","./current/flowSpecJsonSchema.json":"0eaa"};function a(e){var t=s(e);return o(t)}function s(e){if(!o.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=s,e.exports=a,a.id="b221"},b85b:function(e,t,o){"use strict";function i(e){return e.replace(/(['"])/g,"\\$1")}function a(e){return e.replace(/\\(['"])/g,"$1")}function s(e,t){const o=Object.entries(t).map(t=>{let[o,a]=t;const s=i(e.find(e=>e.prompt===o).name);return"string"===typeof a?`IF(block.value = '${s}', '${i(a)}', '')`:`IF(block.value = '${s}', ${a}, '')`});return`@CONCATENATE(${o.join(",")})`}function r(e){var t;const o=/^@block\.response = '(?<choice>.+)'$/,i=null===(t=o.exec(e))||void 0===t?void 0:t.groups;if(void 0!==i){const{choice:e}=i;return a(e)}return e}function n(e){return e.includes("@")?e:`@block.response = '${i(e)}'`}o.d(t,"c",(function(){return i})),o.d(t,"b",(function(){return s})),o.d(t,"d",(function(){return r})),o.d(t,"a",(function(){return n}))},bb96:function(e,t,o){"use strict";o("6059")},bc78:function(e,t,o){"use strict";o.d(t,"a",(function(){return i})),o.d(t,"b",(function(){return a}));const i=e=>{if(e.params.field){const t=e.params.field,o=document.getElementById(t);o?o.scrollIntoView({behavior:"smooth",block:"center"}):console.debug("Deep linking: cannot scroll to ",t," as the DOM element is not found")}},a=e=>{const t=document.querySelector(`#block\\/${e} .plain-draggable`);t?(console.debug("Deep linking: scrolling to the block",e,"on the DOM",t),t.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})):console.debug("Deep linking: cannot scroll block",e,"on the DOM",t)}},bd38:function(e,t,o){"use strict";function i(e){const t=/^\(Copy\)/,o=/^\(Copy (\d+)\)/;return t.test(e)?e.replace(t,"(Copy 2)"):o.test(e)?e.replace(o,(e,t)=>`(Copy ${Number(t)+1})`):"(Copy) "+e}function a(e,t){do{e=i(e)}while(t.includes(e));return e}o.d(t,"a",(function(){return a}))},bead:function(e,t,o){"use strict";o("8227")},c600:function(e,t,o){"use strict";o.r(t),o.d(t,"install",(function(){return y}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"mobile-primitive-message-block"},[t("base-block",{attrs:{block:e.block,"show-semantic-label":!1,"uses-default-contact-props-editor":e.usesDefaultContactPropsEditor,"uses-default-branching-editor":e.usesDefaultBranchingEditor},on:{handleBranchingTypeChangedToUnified:function(t){return e.handleBranchingTypeChangedToUnified({block:e.block})}}},[e._t("description",null,{slot:"description"}),e._t("resource-editors",(function(){return[t("per-language-resource-editor",{attrs:{block:e.block}})]}),{slot:"resource-editors"}),e._t("extras",null,{slot:"extras"}),e._t("vendor-extras",null,{slot:"vendor-extras"}),e._t("branching",null,{slot:"branching"}),e._t("contact-props",null,{slot:"contact-props"}),e._t("vendor",null,{slot:"vendor"})],2)],1)},a=[],s=o("9ab4"),r=o("4bb5"),n=o("1b40"),c=o("2ef0"),l=o("4004");const d="MobilePrimitives.Message",u={...l["a"],async createWith(e,t){let{getters:o,dispatch:i}=e,{props:a}=t;a.type=d;const s=await i("flow/flow_addBlankResourceForEnabledModesAndLangs",null,{root:!0});return a.config={prompt:s.uuid},l["a"].createWith({getters:o,dispatch:i},{props:a})}},p={...Object(c["cloneDeep"])(l["b"]),actions:u};var b=p,f=o("4a51"),h=o("af98"),v=o("2fe1");Object(r["e"])("flow");const _=Object(r["e"])("builder"),g=Object(r["e"])("flow/"+d);let m=class extends(Object(v["c"])(f["a"])){};Object(s["__decorate"])([Object(n["b"])()],m.prototype,"block",void 0),Object(s["__decorate"])([Object(n["b"])({default:!0})],m.prototype,"usesDefaultBranchingEditor",void 0),Object(s["__decorate"])([Object(n["b"])({default:!1})],m.prototype,"usesDefaultContactPropsEditor",void 0),Object(s["__decorate"])([_.Getter],m.prototype,"isEditable",void 0),Object(s["__decorate"])([g.Action],m.prototype,"handleBranchingTypeChangedToUnified",void 0),m=Object(s["__decorate"])([Object(n["a"])({})],m);var k=m;const y=Object(h["c"])(d,b);var j=k,O=o("0c7c"),w=Object(O["a"])(j,i,a,!1,null,null,null);t["default"]=w.exports},cab8:function(e,t,o){"use strict";o.r(t),o.d(t,"Core_RunAnotherFlowBlock",(function(){return f})),o.d(t,"install",(function(){return v}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"core-run-flow-block"},[t("base-block",{attrs:{block:e.block,"show-semantic-label":!1,"uses-default-contact-props-editor":e.usesDefaultContactPropsEditor,"uses-default-branching-editor":e.usesDefaultBranchingEditor},on:{handleBranchingTypeChangedToUnified:function(t){return e.handleBranchingTypeChangedToUnified({block:e.block})}}},[e._t("description",null,{slot:"description"}),e._t("resource-editors",null,{slot:"resource-editors"}),e._t("extras",(function(){return[t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/config/flow_id`},scopedSlots:e._u([{key:"input-control",fn:function(o){let{isValid:i}=o;return[t("div",{staticClass:"form-group"},[t("text-editor",{attrs:{label:e._f("trans")("flow-builder.destination-flow"),placeholder:e._f("trans")("flow-builder.enter-destination-flow-id"),"valid-state":i,"data-cy":"destination-flow-id--input"},model:{value:e.destinationFlowId,callback:function(t){e.destinationFlowId=t},expression:"destinationFlowId"}})],1)]}}])})]}),{slot:"extras"}),e._t("vendor-extras",null,{slot:"vendor-extras"}),e._t("branching",null,{slot:"branching"}),e._t("contact-props",null,{slot:"contact-props"}),e._t("vendor",null,{slot:"vendor"})],2)],1)},a=[],s=o("9ab4"),r=o("4bb5"),n=o("1b40"),c=o("7988"),l=o("4a51"),d=o("af98"),u=o("2fe1");const p=Object(r["e"])("flow/"+c["a"]),b=Object(r["e"])("builder");let f=class extends(Object(u["c"])(l["a"])){get destinationFlowId(){return this.block.config.flow_id}set destinationFlowId(e){""===e?this.setDestinationFlowId({blockId:this.block.uuid,newDestinationFlowId:void 0}):this.setDestinationFlowId({blockId:this.block.uuid,newDestinationFlowId:e})}};Object(s["__decorate"])([Object(n["b"])()],f.prototype,"block",void 0),Object(s["__decorate"])([Object(n["b"])({default:!0})],f.prototype,"usesDefaultBranchingEditor",void 0),Object(s["__decorate"])([Object(n["b"])({default:!1})],f.prototype,"usesDefaultContactPropsEditor",void 0),Object(s["__decorate"])([p.Action],f.prototype,"setDestinationFlowId",void 0),Object(s["__decorate"])([p.Action],f.prototype,"handleBranchingTypeChangedToUnified",void 0),Object(s["__decorate"])([b.Getter],f.prototype,"isEditable",void 0),f=Object(s["__decorate"])([Object(n["a"])({})],f);var h=f;const v=Object(d["c"])(c["a"],c["b"]);var _=h,g=o("0c7c"),m=Object(g["a"])(_,i,a,!1,null,null,null);t["default"]=m.exports},cd49:function(e,t,o){"use strict";o.r(t);var i={};o.r(i),o.d(i,"AudioLibrarySearchField",(function(){return I})),o.d(i,"AudioLibrarySelection",(function(){return W})),o.d(i,"AudioLibrarySelector",(function(){return X})),o.d(i,"ExpressionInput",(function(){return ye})),o.d(i,"FloatEditor",(function(){return Ie})),o.d(i,"KeypadDigitsSelector",(function(){return Ve})),o.d(i,"MarkdownView",(function(){return qe})),o.d(i,"NumericEditor",(function(){return et})),o.d(i,"PlainDraggable",(function(){return nt})),o.d(i,"TextEditor",(function(){return bt})),o.d(i,"ValidationMessage",(function(){return yt}));var a={};o.r(a),o.d(a,"BuilderCanvas",(function(){return Mt})),o.d(a,"colorStates",(function(){return Xt})),o.d(a,"Connection",(function(){return Yt})),o.d(a,"ResourceViewer",(function(){return uo}));var s={};o.r(s),o.d(s,"ChoicesBuilder",(function(){return hi})),o.d(s,"SelectOneResponseBlockContactPropertyEditor",(function(){return ji}));var r={};o.r(r),o.d(r,"ChoicesBuilder",(function(){return hi})),o.d(r,"SelectOneResponseBlockContactPropertyEditor",(function(){return ji})),o.d(r,"AdvancedExitEditor",(function(){return Bi})),o.d(r,"AdvancedExitsBuilder",(function(){return Ri})),o.d(r,"BlockEditor",(function(){return Hi})),o.d(r,"BlockId",(function(){return Qi})),o.d(r,"BlockOutputBranchingConfig",(function(){return ua})),o.d(r,"OutputBranchingType",(function(){return oa["a"]})),o.d(r,"Categorization",(function(){return _a})),o.d(r,"ContactPropertyEditor",(function(){return xa})),o.d(r,"EndRecordingDigitsEditor",(function(){return Ma})),o.d(r,"ExitSemanticLabelEditor",(function(){return La})),o.d(r,"GenericContactPropertyEditor",(function(){return Ka})),o.d(r,"GroupMembershipEditor",(function(){return os})),o.d(r,"LabelEditor",(function(){return ls})),o.d(r,"MaxDigitEditor",(function(){return hs})),o.d(r,"MaxDurationSecondsEditor",(function(){return ys})),o.d(r,"MaximumChoicesEditor",(function(){return Bs})),o.d(r,"MaximumNumericEditor",(function(){return As})),o.d(r,"MinimumChoicesEditor",(function(){return Us})),o.d(r,"MinimumNumericEditor",(function(){return Ks})),o.d(r,"NameEditor",(function(){return er})),o.d(r,"PhoneRecorder",(function(){return rr})),o.d(r,"PhoneRecordingRecorderSelector",(function(){return pr})),o.d(r,"SemanticLabelEditor",(function(){return mr})),o.d(r,"SimplifiedNameEditor",(function(){return xr})),o.d(r,"TagSelector",(function(){return Tr})),o.d(r,"ThresholdEditor",(function(){return Dr})),o.d(r,"TimeoutEditor",(function(){return Gr})),o.d(r,"UploadMonitor",(function(){return sn}));var n={};o.r(n),o.d(n,"SmartDevices_PhotoResponseBlock",(function(){return ln["default"]})),o.d(n,"photoResponseBlockIntstaller",(function(){return ln["install"]})),o.d(n,"SmartDevices_LocationResponseBlock",(function(){return dn["default"]})),o.d(n,"locationResponseBlockInstaller",(function(){return dn["install"]})),o.d(n,"MobilePrimitives_SelectOneResponseBlock",(function(){return un["default"]})),o.d(n,"selectOneResponseBlockInstaller",(function(){return un["install"]})),o.d(n,"MobilePrimitives_SelectManyResponseBlock",(function(){return pn["default"]})),o.d(n,"selectManyResponseBlockInstaller",(function(){return pn["install"]})),o.d(n,"MobilePrimitives_OpenResponseBlock",(function(){return bn["default"]})),o.d(n,"openResponseBlockInstaller",(function(){return bn["install"]})),o.d(n,"MobilePrimitives_NumericResponseBlock",(function(){return fn["default"]})),o.d(n,"numericResponseBlockInstaller",(function(){return fn["install"]})),o.d(n,"MobilePrimitives_MessageBlock",(function(){return hn["default"]})),o.d(n,"messageBlockInstaller",(function(){return hn["install"]})),o.d(n,"Core_CaseBlock",(function(){return vn["default"]})),o.d(n,"caseBlockInstaller",(function(){return vn["install"]})),o.d(n,"Core_SetGroupMembershipBlock",(function(){return _n["default"]})),o.d(n,"setGroupMembershipBlockInstaller",(function(){return _n["install"]})),o.d(n,"Core_RunFlowBlock",(function(){return gn["default"]})),o.d(n,"runFlowBlockInstaller",(function(){return gn["install"]})),o.d(n,"Core_LogBlock",(function(){return mn["default"]})),o.d(n,"logBlockInstaller",(function(){return mn["install"]})),o.d(n,"Core_OutputBlock",(function(){return kn["default"]})),o.d(n,"outputBlockInstaller",(function(){return kn["install"]})),o.d(n,"Core_SetContactPropertyBlock",(function(){return yn["default"]})),o.d(n,"setContactPropertyBlockInstaller",(function(){return yn["install"]})),o.d(n,"BaseBlock",(function(){return jn["BaseBlock"]}));var c={};o.r(c),o.d(c,"ExitBlockEditorToggle",(function(){return xn})),o.d(c,"FirstBlockEditorButton",(function(){return Fn})),o.d(c,"FlowEditor",(function(){return Dn})),o.d(c,"InteractionTimeoutEditor",(function(){return qn})),o.d(c,"FlowLabelEditor",(function(){return ec})),o.d(c,"LanguagesEditor",(function(){return cc})),o.d(c,"ModesEditor",(function(){return hc}));var l={};o.r(l),o.d(l,"ImportMatcher",(function(){return mc["a"]})),o.d(l,"LanguageAdder",(function(){return xc}));var d={};o.r(d),o.d(d,"BlockErrorsExpandable",(function(){return Ac})),o.d(d,"ErrorNotifications",(function(){return Wc})),o.d(d,"SelectionBanner",(function(){return Xc})),o.d(d,"TreeBuilderToolbar",(function(){return gl})),o.d(d,"UndoRedoButtonGroup",(function(){return Bl}));var u={};o.r(u),o.d(u,"BLOCK_RESET_CONNECTIONS",(function(){return zt})),o.d(u,"Block",(function(){return Gt})),o.d(u,"BlockExit",(function(){return Al})),o.d(u,"BlockToolbar",(function(){return Dl})),o.d(u,"BlockTitle",(function(){return Zl}));var p={};o.r(p),o.d(p,"ResourceEditorCell",(function(){return ld})),o.d(p,"PerLanguageResourceEditorRow",(function(){return _d})),o.d(p,"PerModeResourceEditorRow",(function(){return Cd})),o.d(p,"PerLanguageResourceEditor",(function(){return Td})),o.d(p,"PerModeResourceEditor",(function(){return Ud})),o.d(p,"ResourceVariantTextEditor",(function(){return Zd}));var b={};o.r(b),o.d(b,"ResourceViewerBlock",(function(){return au}));var f=o("a026"),h=o("2f62"),v=(o("4989"),o("ab8b0"),o("2dd8"),o("e607"),o("b107"),function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"audio-library-search-field dropdown"},[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.rawQuery,expression:"rawQuery"}],staticClass:"form-control",attrs:{type:"text",placeholder:e._f("trans")("flow-builder.search-audio-library"),disabled:e.isEntireLibraryModeEnabled},domProps:{value:e.rawQuery},on:{focus:e.activate,blur:e.deactivate,input:[function(t){t.target.composing||(e.rawQuery=t.target.value)},e.resetPagination]}}),t("span",{staticClass:"input-group-append"},[t("button",{staticClass:"btn btn-primary dropdown-toggle",class:{active:e.isEntireLibraryModeEnabled},attrs:{"data-cy":"audio-library-search--btn"},on:{click:function(t){return t.preventDefault(),e.toggleAudioLibrary.apply(null,arguments)}}},[t("i",{staticClass:"glyphicon glyphicon-search"})])])]),e.query||e.isAudioLibraryEmpty||e.isEntireLibraryModeEnabled?t("div",{staticClass:"dropdown-menu"},[e.isEntireLibraryModeEnabled?[t("a",{staticClass:"disabled dropdown-item",attrs:{href:"#"},on:{click:function(e){e.preventDefault()}}},[t("button",{staticClass:"close active",on:{click:e.toggleAudioLibrary}},[e._v("x ")]),t("i",{staticClass:"glyphicon glyphicon-info-sign"}),e._v(" "+e._s(e._f("trans")("flow-builder.showing-entire-audio-library"))+" ")]),t("div",{staticClass:"dropdown-divider",attrs:{role:"separator"}})]:e._e(),e.isAudioLibraryEmpty?e._e():[e._l(e.search(e.query).slice(e.offset*e.limit,(e.offset+1)*e.limit),(function(o){return t("a",{key:o.audio_uuid,staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.select(o)}}},[e._v(" "+e._s(o.description)+" ")])})),e.query.length>=3&&!e.search(e.query).length?t("a",{staticClass:"disabled dropdown-item",attrs:{href:"#"},on:{click:function(e){e.preventDefault()}}},[e._v(" "+e._s(e._f("trans")("flow-builder.no-audio-files-found-for-X"))+' "'),t("em",[e._v(e._s(e.query))]),e._v('". ')]):e._e(),e.query&&e.query.length<3?t("a",{staticClass:"disabled dropdown-item",attrs:{href:"#"},on:{click:function(e){e.preventDefault()}}},[e._v(" "+e._s(e._f("trans")("flow-builder.enter-at-least-three-chars"))+" ")]):e._e(),e.hasPrevious||e.hasNext?[t("div",{staticClass:"dropdown-divider",attrs:{role:"separator"}}),t("div",{staticClass:"pagers dropdown-item"},[t("a",{staticClass:"col-md-6",class:{disabled:!e.hasPrevious},attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.decrementPage.apply(null,arguments)}}},[t("i",{staticClass:"glyphicon glyphicon-chevron-left"}),e._v(" "+e._s(e._f("trans")("flow-builder.previous"))+" ")]),t("a",{staticClass:"col-md-6 text-right",class:{disabled:!e.hasNext},attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.incrementPage.apply(null,arguments)}}},[e._v(" "+e._s(e._f("trans")("flow-builder.next"))+" "),t("i",{staticClass:"glyphicon glyphicon-chevron-right"})])])]:e._e()],e.isAudioLibraryEmpty?t("a",{staticClass:"disabled dropdown-item",attrs:{href:"#"},on:{click:function(e){e.preventDefault()}}},[t("i",{staticClass:"glyphicon glyphicon-warning-sign"}),e._v(" "+e._s(e._f("trans")("flow-builder.audio-lib-empty-for-this-org"))+" ")]):e._e()],2):e._e()])}),g=[],m=o("9ab4"),k=o("6062"),y=o("2ef0"),j=o.n(y),O=o("f837"),w=o.n(O),C=o("2fe1"),x=o("1b40"),E=o("4a51");let I=class extends(Object(C["c"])(E["a"],w.a.mixin)){constructor(){super(...arguments),this.isActive=!1,this.rawQuery="",this.cache={},this.isEntireLibraryModeEnabled=!1,this.offset=0,this.limit=10}get query(){return Object(y["trim"])(this.rawQuery)}get isAudioLibraryEmpty(){var e;return this.isActive&&0===(null===(e=this.audioFiles)||void 0===e?void 0:e.length)}get hasNext(){return this.search(this.query).length/(this.offset+1)>this.limit}get hasPrevious(){return this.offset>0}search(e){var t;if(this.isEntireLibraryModeEnabled)return null!==(t=this.audioFiles)&&void 0!==t?t:[];if(e.length<3)return[];if(console.debug("flow-builder.ResourceViewer.AudioLibrarySearchField","searching",e),e in this.cache)return console.debug("flow-builder.ResourceViewer.AudioLibrarySearchField","cache hit",e),this.cache[e];console.debug("flow-builder.ResourceViewer.AudioLibrarySearchField","cache miss",e);const o=["uri","description"];return this.cache[e]=new k["a"](this.audioFiles,{keys:o,fieldNormWeight:1}).search(e).map(e=>e.item),this.cache[e]}incrementPage(){this.hasNext&&(this.offset+=1)}decrementPage(){this.hasPrevious&&(this.offset-=1)}resetPagination(){this.offset=0}toggleAudioLibrary(){this.isEntireLibraryModeEnabled=!this.isEntireLibraryModeEnabled,this.resetPagination()}select(e){this.$emit("select",{value:e,langId:this.langId})}activate(){this.isActive=!0}deactivate(){this.isActive=!1}};Object(m["__decorate"])([Object(x["b"])()],I.prototype,"langId",void 0),Object(m["__decorate"])([Object(x["b"])({required:!0})],I.prototype,"audioFiles",void 0),I=Object(m["__decorate"])([Object(x["a"])({})],I);var B=I,S=B,P=(o("1eb1"),o("0c7c")),M=Object(P["a"])(S,v,g,!1,null,"24824a2a",null),F=(M.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"audio-library-selection well well-sm",class:{"tree-audio-control-text-container-selectable":e.selectable,"tree-audio-control-text-container-selected":!e.selectable},attrs:{"data-audio-file-container-language":e.langId}},[t("button",{staticClass:"audio-library-selection-clear-selection btn-ghost pull-right",on:{click:function(t){return t.preventDefault(),e.clear.apply(null,arguments)}}},[t("i",{staticClass:"glyphicon glyphicon-remove"})]),t("div",{staticClass:"btn-group audio-library-selection-download-dropdown"},[e._m(0),t("div",{staticClass:"dropdown-menu dropdown-menu-right"},[t("a",{staticClass:"dropdown-item",attrs:{href:e.audioFileUrl,target:"_blank"}},[e._v(" "+e._s(e._f("trans")("flow-builder.original-file"))+" ")])])]),t("p",{staticClass:"audio-file-description",attrs:{title:e.audioFileUrl}},[e._v(" "+e._s(e.audioFileDescription)+" ")]),t("div",{staticClass:"btn-toolbar"},[e.selectable?t("button",{staticClass:"btn btn-secondary btn-xs",on:{click:function(t){return t.preventDefault(),e.select.apply(null,arguments)}}},[t("i",{staticClass:"glyphicon glyphicon-ok"})]):e._e()])])}),T=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("button",{staticClass:"btn btn-ghost dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown"}},[t("span",{staticClass:"glyphicon glyphicon-download-alt",attrs:{"aria-hidden":"true"}}),t("span",{staticClass:"caret"})])}],A=o("c1df"),R=o.n(A);function V(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"llll";return null===e||void 0===e?"":R.a.utc(e).format(t)}function L(e,t){return R.a.utc(e).fromNow(t)}function N(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"seconds",o=arguments.length>2?arguments[2]:void 0;const i=R.a.locale();R.a.locale("en");const a=R.a.duration(e,t).humanize(o);return R.a.locale(i),a}function D(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"seconds",i=arguments.length>3?arguments[3]:void 0;const a=R.a.locale();R.a.locale(t);const s=R.a.duration(e,o).humanize(i);return R.a.locale(a),s}let $=class extends x["c"]{};$=Object(m["__decorate"])([Object(x["a"])({filters:{formatDate:V,fromNow:L,formatDuration:N,formatDurationLocalized:D}})],$);var U=$;let W=class extends(Object(C["c"])(E["a"],U)){get audioFileUrl(){var e;return null===(e=this.audioFile)||void 0===e?void 0:e.uri}get audioFileDescription(){var e;return null===(e=this.audioFile)||void 0===e?void 0:e.description}select(){this.$emit("select")}clear(){this.$emit("clear")}};Object(m["__decorate"])([Object(x["b"])({type:Object,required:!0})],W.prototype,"audioFile",void 0),Object(m["__decorate"])([Object(x["b"])()],W.prototype,"selectable",void 0),Object(m["__decorate"])([Object(x["b"])()],W.prototype,"langId",void 0),W=Object(m["__decorate"])([Object(x["a"])({})],W);var H=W,z=H,G=(o("5108"),Object(P["a"])(z,F,T,!1,null,null,null)),q=(G.exports,function(){var e=this,t=e._self._c;return t("div",{staticClass:"audio-library-selector"},[e.selectedAudioUri?t("audio-library-selection",{attrs:{"audio-file":e.selectedFile,"lang-id":e.langId},on:{clear:e.clearSelection}}):[t("audio-library-search-field",{attrs:{"lang-id":e.langId,"audio-files":e.audioFiles},on:{select:e.selectAudioFile}})]],2)}),K=[],Z=o("9300");const X={props:["alternateSelections","selectedAudioUri","langId","audioFiles","isPlaying","audioPlayerUrl","resourceId"],computed:{...Object(h["c"])(["availableAudiosByUri"]),selectedFile(){return this.availableAudiosByUri[this.selectedAudioUri]}},methods:{...Object(h["b"])("flow",["resource_setOrCreateValueModeSpecific"]),clearSelection(){this.resource_setOrCreateValueModeSpecific({resourceId:this.resourceId,filter:{language_id:this.langId,content_type:Z["SupportedContentType"].AUDIO,modes:[Z["SupportedMode"].IVR]},value:""}),this.$emit("change")},selectAudioFile(e){let{value:t,langId:o}=e;this.resource_setOrCreateValueModeSpecific({resourceId:this.resourceId,filter:{language_id:o,content_type:Z["SupportedContentType"].AUDIO,modes:[Z["SupportedMode"].IVR]},value:t.uri}),this.$emit("change")}}};var J=X,Y=J,Q=Object(P["a"])(Y,q,K,!1,null,null,null),ee=(Q.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"expression-input form-group"},[e.label?t("label",{class:e.labelClass},[e._v(e._s(e.label))]):e._e(),t("div",{staticClass:"input-group"},[e.prependText?t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[e._v(e._s(e.prependText))])]):e._e(),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.expression,expression:"expression"}],ref:"input",class:["form-control",{"is-invalid":e.isInvalid}],attrs:{disabled:e.disabled,rows:e.rows,placeholder:e.placeholder,"data-cy":e.cypressDataAttribute},domProps:{value:e.expression},on:{click:function(t){return e.handleClick()},input:[function(t){t.target.composing||(e.expression=t.target.value)},function(t){return e.$emit("input",t.target.value)}]}})]),t("div",{ref:"suggest"}),e._t("default")],2)}),te=[],oe=o("4b17e"),ie=o.n(oe),ae=(o("c6c1"),o("4bb5"));function se(){return[{trigger:"@",values:["@block"]},{trigger:"@block.",values:["@block.entered_at","@block.response","@block.value"]}]}const re=["phone","urns","preferred_mode","preferred_urn","active_urn","created_at","timezone","language","groups","properties"];function ne(e){const t=e.subscriberPropertyFields,o={trigger:"@contact.",values:re.map(e=>"@contact."+e)},i={trigger:"@contact.properties.",values:[]},a=[];return t.forEach(e=>{re.includes(e.name)||(o.values.push("@contact."+e.name),a.push({trigger:`@contact.${e.name}.`,values:Object.keys(e).map(t=>`@contact.${e.name}.${t}`)})),i.values.push("@contact.properties."+e.name),a.push({trigger:`@contact.properties.${e.name}.`,values:Object.keys(e).map(t=>`@contact.properties.${e.name}.${t}`)})}),[{trigger:"@",values:["@contact"]},o,i,...a]}function ce(e){const t=new Set(e.blocks.map(e=>["@flow."+e.uuid,"@flow."+e.name]).flat());return[{trigger:"@",values:["@flow"]},{trigger:"@flow.",values:[...t]}]}var le=o("20c7");function de(){const e=new Map;for(const t of le["MethodNodeEvaluatorFactory"].defaultHandlers())for(const o of t.handles()){const t=o.substring(0,2),i=t.toUpperCase(),a=o.toUpperCase();e.has(t)?(e.set(t,[...e.get(t),o]),e.set(i,[...e.get(i),a])):(e.set(t,[o]),e.set(i,[a]))}return e}function ue(){return Array.from(de().entries()).map(e=>{let[t,o]=e;return{trigger:t,values:o.map(e=>({value:e+"()",focusText:[-1,-1]}))}})}function pe(e,t){e.startsWith("@")&&t.forEach(t=>{const o="string"===typeof t?t:t.value;console.assert(o.startsWith("@"),`${o} for trigger ${e} does not start with @`)})}function be(e){var t;const o=new Map;for(let i=0;i<e.length;i+=1){const{trigger:a,values:s}=e[i];pe(a,s),o.set(a,Object(y["uniq"])([...null!==(t=o.get(a))&&void 0!==t?t:[],...s]))}return Array.from(o.entries()).map(e=>{let[t,o]=e;return{trigger:t,values:o}})}function fe(e){var t;return null!==(t=e.blocks.map(e=>e.name).filter(Boolean))&&void 0!==t?t:[]}function he(e,t){return e.flatMap(o=>[{trigger:t+".",values:e.map(e=>`${t}.${e}`)},{trigger:`${t}.${o}.`,values:[`${t}.${o}.entered_at`,`${t}.${o}.exited_at`,`${t}.${o}.response`,`${t}.${o}.value`,`${t}.${o}.block`,`${t}.${o}.exit`]},{trigger:`${t}.${o}.block.`,values:[`${t}.${o}.block.id`,`${t}.${o}.block.name`,`${t}.${o}.block.label`]},{trigger:`${t}.${o}.exit.`,values:[`${t}.${o}.exit.name`,`${t}.${o}.exit.id`]}])}function ve(e){return[{trigger:"@",values:["@results"]},...he(fe(e),"@results")]}function _e(e){return[{trigger:e+".",values:[e+".language",e+".localization",e+".entered_at",e+".exited_at",e+".flow",e+".mode",e+".results",e+".parent",e+".child"]},{trigger:e+".language.",values:[e+".language.id",e+".language.label",e+".language.variant",e+".language.iso_639_3"]},{trigger:e+".flow.",values:[e+".flow.id",e+".flow.name"]}]}function ge(e){const t=fe(e);return[{trigger:"@",values:["@run"]},..._e("@run"),...he(t,"@run.results"),..._e("@run.parent"),..._e("@run.child"),{trigger:"@",values:["@parent","@child"]},..._e("@parent"),..._e("@child")]}function me(e){return be([{trigger:"@",values:[{value:"@()",focusText:[-1,-1]}]},...se(),...ne(e),...ce(e),...ue(),...ge(e),...ve(e)])}const ke=Object(ae["e"])("flow");let ye=class extends(Object(C["c"])(E["a"])){constructor(){super(...arguments),this.suggest={}}get autoSuggestDropdown(){var e;return null===(e=this.suggest.dropdown)||void 0===e?void 0:e.dropdown}get refAutoSuggestElement(){return this.$refs.suggest}get refInputElement(){return this.$refs.input}get isInvalid(){return!1===this.validState}get expression(){return this.currentExpression}set expression(e){void 0!==e&&(null===this.expressionIdentifier?this.$emit("commitExpressionChange",e):this.$emit("commitExpressionChange",{identifier:this.expressionIdentifier,value:e}))}get suggestions(){var e,t;return me({blocks:null!==(t=null===(e=this.activeFlow)||void 0===e?void 0:e.blocks)&&void 0!==t?t:[],subscriberPropertyFields:this.subscriberPropertyFields})}portAutoSuggestContent(){var e;this.autoSuggestDropdown.style.position="relative",this.autoSuggestDropdown.style.left="0px",this.autoSuggestDropdown.style.top="0px";const{width:t}=this.refInputElement.getBoundingClientRect();this.autoSuggestDropdown.style.width=t+"px",this.suggest.dropdown.dropdownContent.style.width=t+"px",null===(e=this.refAutoSuggestElement)||void 0===e||e.appendChild(this.autoSuggestDropdown)}debounce_portAutoSuggestContent(){this.$nextTick(()=>{setTimeout(()=>{this.portAutoSuggestContent()},500)})}handleClick(){!1===this.disabledAutoComplete?this.debounce_portAutoSuggestContent():console.debug("ExpressionInput","handleClick","disabledAutoComplete is false")}mounted(){if(!1===this.disabledAutoComplete){const e=this.refInputElement;this.suggest=new ie.a({caseSensitive:!1,suggestions:this.suggestions,onChange:()=>e.dispatchEvent(new Event("input"))},e),this.debounce_portAutoSuggestContent()}else console.debug("ExpressionInput","mounted","disabledAutoComplete is false")}updated(){!1===this.disabledAutoComplete?this.debounce_portAutoSuggestContent():console.debug("ExpressionInput","updated","disabledAutoComplete is false")}focus(){this.refInputElement.focus()}};Object(m["__decorate"])([Object(x["b"])({type:[String,Number],required:!0})],ye.prototype,"label",void 0),Object(m["__decorate"])([Object(x["b"])({type:String,default:"text-primary"})],ye.prototype,"labelClass",void 0),Object(m["__decorate"])([Object(x["b"])({type:String,default:""})],ye.prototype,"placeholder",void 0),Object(m["__decorate"])([Object(x["b"])({type:String})],ye.prototype,"currentExpression",void 0),Object(m["__decorate"])([Object(x["b"])({type:[String,Number],default:null})],ye.prototype,"expressionIdentifier",void 0),Object(m["__decorate"])([Object(x["b"])({type:Number,default:1})],ye.prototype,"rows",void 0),Object(m["__decorate"])([Object(x["b"])({type:Boolean,default:null})],ye.prototype,"validState",void 0),Object(m["__decorate"])([Object(x["b"])({type:String,default:""})],ye.prototype,"prependText",void 0),Object(m["__decorate"])([Object(x["b"])({type:Boolean,default:!1})],ye.prototype,"disabled",void 0),Object(m["__decorate"])([Object(x["b"])({type:Boolean,default:!1})],ye.prototype,"disabledAutoComplete",void 0),Object(m["__decorate"])([Object(x["b"])({type:String,default:""})],ye.prototype,"cypressDataAttribute",void 0),Object(m["__decorate"])([ke.Getter],ye.prototype,"activeFlow",void 0),Object(m["__decorate"])([ae["b"]],ye.prototype,"subscriberPropertyFields",void 0),ye=Object(m["__decorate"])([Object(x["a"])({})],ye);var je=ye,Oe=je,we=Object(P["a"])(Oe,ee,te,!1,null,null,null),Ce=we.exports,xe=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"float-editor"},[t("label",{staticClass:"text-primary"},[e._v(e._s(e.label))]),t("div",[t("input",{staticClass:"form-control",class:{"is-invalid":e.isInvalid},attrs:{type:"number",min:e.min,placeholder:e.placeholder,step:e.step},domProps:{value:e.value},on:{keypress:e.filterFloat,keydown:function(t){return e.$emit("keydown",t)},input:function(t){return e.$emit("input",t.target.value)}}})]),e._t("default")],2)},Ee=[];let Ie=class extends(Object(C["c"])(E["a"])){get isInvalid(){return"boolean"===typeof this.validState&&!this.validState}filterFloat(e){null===new RegExp(this.regexFloatFiltering,"g").exec(e.key)&&e.preventDefault()}};Object(m["__decorate"])([Object(x["b"])({type:[String,Number],required:!0})],Ie.prototype,"label",void 0),Object(m["__decorate"])([Object(x["b"])({type:String,default:""})],Ie.prototype,"placeholder",void 0),Object(m["__decorate"])([Object(x["b"])({type:String,default:"0.1"})],Ie.prototype,"step",void 0),Object(m["__decorate"])([Object(x["b"])({type:[String,Number],required:!0})],Ie.prototype,"value",void 0),Object(m["__decorate"])([Object(x["b"])({type:[String,Number],required:!0,default:""})],Ie.prototype,"min",void 0),Object(m["__decorate"])([Object(x["b"])({type:String,default:"[0-9-.,]"})],Ie.prototype,"regexFloatFiltering",void 0),Object(m["__decorate"])([Object(x["b"])({type:Boolean})],Ie.prototype,"validState",void 0),Ie=Object(m["__decorate"])([Object(x["a"])({})],Ie);var Be=Ie,Se=Be,Pe=Object(P["a"])(Se,xe,Ee,!1,null,null,null),Me=(Pe.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"keypad-digits-selector"},[t("label",{staticClass:"text-primary"},[e._v(e._s(e.label))]),t("vue-multiselect",{class:{invalid:!1===e.validState},attrs:{options:e.options,placeholder:e.placeholder,"show-labels":!1,"preselect-first":!0,"track-by":"name",label:"label"},model:{value:e.modelValue,callback:function(t){e.modelValue=t},expression:"modelValue"}}),e._t("default")],2)}),Fe=[],Te=o("8e5f"),Ae=o.n(Te);const Re="1234567890#*";let Ve=class extends(Object(C["c"])(E["a"])){get options(){return[{name:Re,label:this.trans("flow-builder.any-key")},...Re.split("").map(e=>({name:e,label:e}))]}get modelValue(){return this.options.find(e=>this.value.includes(e.name))}set modelValue(e){this.$emit("input",null===e||void 0===e?void 0:e.name)}};Object(m["__decorate"])([Object(x["b"])({type:String,required:!0})],Ve.prototype,"label",void 0),Object(m["__decorate"])([Object(x["b"])({type:String,required:!0})],Ve.prototype,"value",void 0),Object(m["__decorate"])([Object(x["b"])({type:String,default:""})],Ve.prototype,"placeholder",void 0),Object(m["__decorate"])([Object(x["b"])({type:Boolean,default:!0})],Ve.prototype,"validState",void 0),Ve=Object(m["__decorate"])([Object(x["a"])({components:{VueMultiselect:Ae.a}})],Ve);var Le=Ve,Ne=Le,De=(o("7ef8"),Object(P["a"])(Ne,Me,Fe,!1,null,"008079cd",null)),$e=(De.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t(e.tag,{tag:"component",staticClass:"markdown-view",domProps:{innerHTML:e._s(e.html)}})}),Ue=[],We=o("7c5c"),He=o("c0c4");const ze=["b","i","strong","em"];function Ge(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ze;return He["sanitize"](We["marked"].parse(e),{ALLOWED_TAGS:t})}const qe=Object(f["defineComponent"])({name:"MarkdownView",props:{tag:{type:String,default:"div"},markdown:{type:String,required:!0}},computed:{html(){return Ge(this.markdown)}}});var Ke=qe,Ze=Ke,Xe=Object(P["a"])(Ze,$e,Ue,!1,null,null,null),Je=Xe.exports,Ye=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"numeric-editor"},[t("label",{staticClass:"text-primary mb-0 d-flex justify-content-between"},[e._v(" "+e._s(e.label)+" "),e.tooltipHint?t("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.tooltipHint,expression:"tooltipHint",modifiers:{hover:!0}}],staticClass:"fa-btn text-primary",attrs:{icon:["fas","info-circle"]}}):e._e()],1),t("div",{staticClass:"small mb-2"},[e._v(" "+e._s(e.subTitle)+" ")]),t("div",[t("input",{staticClass:"form-control",class:{"is-invalid":e.isInvalid},attrs:{type:"number",min:"0",placeholder:e.placeholder},domProps:{value:e.value},on:{keypress:e.filterNumeric,keydown:function(t){return e.$emit("keydown",t)},input:function(t){return e.$emit("input",t.target.value)}}})]),e._t("default")],2)},Qe=[];let et=class extends(Object(C["c"])(E["a"])){get isInvalid(){return"boolean"===typeof this.validState&&!this.validState}filterNumeric(e){null===new RegExp(this.regexNumericFiltering,"g").exec(e.key)&&e.preventDefault()}};Object(m["__decorate"])([Object(x["b"])({type:Boolean})],et.prototype,"validState",void 0),Object(m["__decorate"])([Object(x["b"])({type:[String,Number],required:!0})],et.prototype,"label",void 0),Object(m["__decorate"])([Object(x["b"])({type:String,default:""})],et.prototype,"placeholder",void 0),Object(m["__decorate"])([Object(x["b"])({type:[String,Number]})],et.prototype,"value",void 0),Object(m["__decorate"])([Object(x["b"])({type:String,default:"[0-9-]"})],et.prototype,"regexNumericFiltering",void 0),Object(m["__decorate"])([Object(x["b"])({type:String,default:""})],et.prototype,"subTitle",void 0),Object(m["__decorate"])([Object(x["b"])({type:String,default:""})],et.prototype,"tooltipHint",void 0),et=Object(m["__decorate"])([Object(x["a"])({})],et);var tt=et,ot=tt,it=Object(P["a"])(ot,Ye,Qe,!1,null,null,null),at=(it.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"plain-draggable"},[e._t("default")],2)}),st=[],rt=o("3d6b");Object(ae["e"])("builder");let nt=class extends(Object(C["c"])(E["a"])){constructor(){super(...arguments),this.draggable=null}onToggleEditable(e){this.draggable.disabled=!e}mounted(){console.debug("PlainDraggable.vue","mounted"),this.draggable=new rt["a"](this.$el,this.plainDraggableLibOptions),this.handleInitialized()}updated(){this.draggable.setOptions(this.plainDraggableLibOptions)}get plainDraggableLibOptions(){const e=void 0!==this.dragHandleId?document.getElementById(this.dragHandleId):this.$el.querySelectorAll(".draggable-handle")[0];return{containment:document.querySelector(".builder-canvas"),autoScroll:!0,leftTop:!1,disabled:!1,onDrag:this.handleDragged.bind(this),onDragStart:this.handleDragStarted.bind(this),onDragEnd:this.handleDragEnded.bind(this),left:this.startX,top:this.startY,handle:e}}destroyed(){var e;const{draggable:t}=this;this.$emit("destroyed",{draggable:t}),null===(e=this.draggable)||void 0===e||e.remove()}handleInitialized(){const{draggable:e}=this;this.$emit("initialized",{draggable:e})}handleDragged(e){const{draggable:t}=this;this.$emit("dragged",{draggable:t,position:e})}handleDragStarted(e){const{draggable:t}=this;this.$emit("dragStarted",{draggable:t,position:e})}handleDragEnded(e){const{draggable:t}=this;this.$emit("dragEnded",{draggable:t,position:e})}};Object(m["__decorate"])([Object(x["b"])(Number)],nt.prototype,"startX",void 0),Object(m["__decorate"])([Object(x["b"])(Number)],nt.prototype,"startY",void 0),Object(m["__decorate"])([Object(x["b"])({type:Boolean,required:!0})],nt.prototype,"isEditable",void 0),Object(m["__decorate"])([Object(x["b"])(String)],nt.prototype,"dragHandleId",void 0),Object(m["__decorate"])([Object(x["d"])("isEditable")],nt.prototype,"onToggleEditable",null),nt=Object(m["__decorate"])([Object(x["a"])({})],nt);var ct=nt,lt=ct,dt=Object(P["a"])(lt,at,st,!1,null,null,null),ut=(dt.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"text-editor"},[e.label?t("label",{class:e.labelClass},[e._v(e._s(e.label))]):e._e(),t("textarea",{staticClass:"form-control",class:{"is-invalid":e.isInvalid},attrs:{placeholder:e.placeholder,rows:e.rows},domProps:{value:e.value},on:{keydown:function(t){return e.$emit("keydown",t)},input:function(t){return e.$emit("input",t.target.value)}}}),e._v(" "),e._t("default")],2)}),pt=[];let bt=class extends x["c"]{get isInvalid(){return"boolean"===typeof this.validState&&!this.validState}};Object(m["__decorate"])([Object(x["b"])({type:[String,Number],required:!0})],bt.prototype,"label",void 0),Object(m["__decorate"])([Object(x["b"])({type:String,default:"text-primary"})],bt.prototype,"labelClass",void 0),Object(m["__decorate"])([Object(x["b"])({type:String,required:!0})],bt.prototype,"placeholder",void 0),Object(m["__decorate"])([Object(x["b"])({type:String,required:!1})],bt.prototype,"value",void 0),Object(m["__decorate"])([Object(x["b"])({type:Boolean})],bt.prototype,"validState",void 0),Object(m["__decorate"])([Object(x["b"])({type:Number,default:1})],bt.prototype,"rows",void 0),bt=Object(m["__decorate"])([Object(x["a"])({})],bt);var ft=bt,ht=ft,vt=Object(P["a"])(ht,ut,pt,!1,null,null,null),_t=(vt.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"validation-message form-group",attrs:{id:e.messageKey}},[e._t("input-control",null,{isValid:e.isValid}),e.shouldHideValidation?e._e():t("small",{staticClass:"text-danger"},[e._v(" "+e._s(e.errorMessage)+" ")])],2)}),gt=[],mt=(o("13d5"),o("5fda"));const kt=Object(ae["e"])("validation");let yt=class extends(Object(C["c"])(E["a"])){get errorMessage(){if(!Object.prototype.hasOwnProperty.call(this.flattenErrorMessages,this.messageKey))return"";const e=this.flattenErrorMessages[this.messageKey],t=this.messageOverrides.has(e)?this.messageOverrides.get(e):e;return t.trim().replace(/^(.)/,e=>e.toUpperCase())}get messageOverrides(){var e;return Object.entries(null!==(e=this.overrides)&&void 0!==e?e:{}).reduce((e,t)=>{let[o,i]=t;return e.set(this.trans("flow-builder-validation."+o),this.trans("flow-builder-validation."+i)),e},new Map)}get isValid(){return!this.errorMessage}};Object(m["__decorate"])([Object(x["b"])()],yt.prototype,"messageKey",void 0),Object(m["__decorate"])([Object(x["b"])({default:!1})],yt.prototype,"shouldHideValidation",void 0),Object(m["__decorate"])([Object(x["b"])()],yt.prototype,"overrides",void 0),Object(m["__decorate"])([kt.Getter],yt.prototype,"flattenErrorMessages",void 0),yt=Object(m["__decorate"])([Object(x["a"])({components:{BAlert:mt["a"]}})],yt);var jt=yt,Ot=jt,wt=Object(P["a"])(Ot,_t,gt,!1,null,null,null),Ct=(wt.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return e.activeFlow?t("div",{staticClass:"builder-canvas no-select",style:{minWidth:e.canvasWidth+"px",minHeight:e.canvasHeight+"px"},attrs:{"data-cy":"builder-canvas--page"}},e._l(e.activeFlow.blocks,(function(e){return t("block",{key:e.uuid,attrs:{block:e,x:e.ui_metadata.canvas_coordinates.x,y:e.ui_metadata.canvas_coordinates.y}})})),1):e._e()}),xt=[];const Et=Object(ae["e"])("flow"),It=(Object(ae["e"])("validation"),Object(ae["e"])("builder")),Bt=-10,St=120,Pt=300;let Mt=class extends x["c"]{constructor(){super(...arguments),this.debounceVerticalScroll=Object(y["debounce"])((function(){window.scrollTo({top:this.canvasHeight})}),Pt),this.debounceHorizontalScroll=Object(y["debounce"])((function(){window.scrollTo({left:this.canvasWidth})}),Pt)}onCanvasHeightChanged(e){console.debug("canvas height changed to",e),this.debounceVerticalScroll()}onCanvasWidthChanged(e){console.debug("canvas width changed to",e),this.debounceHorizontalScroll()}get blockHeight(){var e,t;const o=this.$refs["block/"+(null===(e=this.blockAtTheLowestPosition)||void 0===e?void 0:e.uuid)];if(!o){console.debug("Interaction Designer","Unable to find DOM element corresponding to lowest block id: ","block/"+(null===(t=this.blockAtTheLowestPosition)||void 0===t?void 0:t.uuid));const e=84;return e}return o[0].$refs.draggable.$el.offsetHeight}get blockWidth(){var e,t;const o=this.$refs["block/"+(null===(e=this.blockAtTheFurthestRightPosition)||void 0===e?void 0:e.uuid)];if(!o){console.debug("Interaction Designer","Unable to find DOM element corresponding to furthest right block id: ","block/"+(null===(t=this.blockAtTheFurthestRightPosition)||void 0===t?void 0:t.uuid));const e=110;return e}return o[0].$refs.draggable.$el.offsetWidth}get blockAtTheLowestPosition(){return Object(y["maxBy"])(this.activeFlow.blocks,"ui_metadata.canvas_coordinates.y")}get blockAtTheFurthestRightPosition(){return Object(y["maxBy"])(this.activeFlow.blocks,"ui_metadata.canvas_coordinates.x")}get windowHeight(){return window.screen.availHeight}get windowWidth(){return window.screen.availWidth}get canvasHeight(){if(0===this.activeFlow.blocks.length)return this.windowHeight;if(!this.blockAtTheLowestPosition)return console.debug("Interaction Designer","Unable to find block at the lowest position"),this.windowHeight;const e=this.blockAtTheLowestPosition.ui_metadata.canvas_coordinates.y,t=e+Bt;return t<this.windowHeight?this.windowHeight:t}get canvasWidth(){if(0===this.activeFlow.blocks.length)return this.windowWidth-this.widthAdjustment;if(!this.blockAtTheFurthestRightPosition)return console.debug("Interaction Designer","Unable to find block at the furthest right position"),this.windowWidth-this.widthAdjustment;const e=this.blockAtTheFurthestRightPosition.ui_metadata.canvas_coordinates.x,t=e+this.blockWidth+St+this.visibleBlockEditorWidth;return t<this.windowWidth?this.windowWidth-this.widthAdjustment:t-this.widthAdjustment}get visibleBlockEditorWidth(){const e=365;return this.isBlockEditorOpen?e:0}};Object(m["__decorate"])([Object(x["b"])({default:0})],Mt.prototype,"widthAdjustment",void 0),Object(m["__decorate"])([Object(x["d"])("canvasHeight")],Mt.prototype,"onCanvasHeightChanged",null),Object(m["__decorate"])([Object(x["d"])("canvasWidth")],Mt.prototype,"onCanvasWidthChanged",null),Object(m["__decorate"])([Et.State],Mt.prototype,"flows",void 0),Object(m["__decorate"])([Et.Getter],Mt.prototype,"activeFlow",void 0),Object(m["__decorate"])([It.State],Mt.prototype,"isBlockEditorOpen",void 0),Mt=Object(m["__decorate"])([Object(x["a"])({})],Mt);var Ft=Mt,Tt=Ft,At=(o("ef67"),Object(P["a"])(Tt,Ct,xt,!1,null,"e2546f5c",null)),Rt=(At.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("span",{staticClass:"connection",attrs:{"reposition-hook":e.repositionHook}})}),Vt=[],Lt=o("e2dd"),Nt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{ref:"block/"+e.block.uuid,staticClass:"block",attrs:{id:"block/"+e.block.uuid,"data-cy":"block--"+e.block.uuid},on:{click:function(t){return t.stopPropagation(),e.selectBlock.apply(null,arguments)},mouseenter:function(t){return e.setIsMouseOnBlock(!0)},mouseleave:function(t){return e.setIsMouseOnBlock(!1)}}},[e.hasLayout?t("plain-draggable",{ref:"draggable",staticClass:"block-draggable",class:{"is-active":e.isBlockActivated,"source-block-having-active-connection":e.isAssociatedWithActiveConnectionAsSourceBlock,"target-block-having-active-connection":e.isAssociatedWithActiveConnectionAsTargetBlock,"target-block-waiting-for-connection":e.isWaitingForConnection,"has-toolbar":e.isBlockSelected||e.shouldShowBlockEditorForCurrentBlock,["has-exits"]:e.hasExitsShown,["has-multiple-exits"]:e.hasMultipleExitsShown,[`has-${e.numberOfExitsShown}-exits`]:!0,["category-"+e.blockClasses[e.block.type].category]:!0},attrs:{"start-x":e.x,"start-y":e.y,"is-editable":e.isEditable},on:{dragged:e.onMoved,dragEnded:e.handleDraggableEndedForBlock,destroyed:e.handleDraggableDestroyedForBlock},nativeOn:{mouseenter:function(t){e.isConnectionCreateActive&&e.activateBlockAsDropZone()},mouseleave:function(t){e.isConnectionCreateActive&&e.deactivateBlockAsDropZone()}}},[t("header",{staticClass:"block-target draggable-handle",class:{initial:!1,pending:e.isConnectionCreateActive,fulfilled:!1,rejected:!1,activated:e.isBlockActivated},attrs:{id:`block/${e.block.uuid}/handle`,"data-cy":"block-handle--"+e.block.uuid}},[t("block-toolbar",{attrs:{block:e.block,"is-activated-by-connection":e.isAssociatedWithActiveConnectionAsTargetBlock,"is-block-selected":e.isBlockSelected,"is-editor-visible":e.shouldShowBlockEditorForCurrentBlock,"is-waiting-for-connection":e.isWaitingForConnection},on:{"after-block-duplicate":function(){for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return e.$emit("after-block-duplicate",...o)}}}),t("block-title",{attrs:{block:e.block}}),t("h3",{staticClass:"block-label",class:{empty:!e.block.label},style:{maxWidth:e.labelContainerMaxWidth+"px"}},[e._v(" "+e._s(e.block.label||e.trans("flow-builder.untitled-block"))+" ")]),e._t("after-label")],2),t("footer",{ref:`block/${e.block.uuid}/exits`,staticClass:"block-exits d-flex mt-1",class:{"pointer-events-none":!e.isEditable},attrs:{id:`block/${e.block.uuid}/exits`}},e._l(e.block.exits,(function(o){return t("block-exit",{key:o.uuid,attrs:{id:"exit/"+o.uuid,exit:o,block:e.block,"data-cy":"exit--"+o.uuid},on:{"connection-create-start":function(t){return e.setIsConnectionSource(!0)},"connection-create-end":function(t){return e.setIsConnectionSource(!1)}}})})),1)]):e._e()],1)},Dt=[],$t=o("af98");const Ut=Object(ae["e"])("flow"),Wt=Object(ae["e"])("builder"),Ht=650,zt="BLOCK_RESET_CONNECTIONS";let Gt=class extends(Object(C["c"])(E["a"])){constructor(){super(...arguments),this.labelContainerMaxWidth=Ht,this.blockWidth=0,this.isConnectionSource=!1,this.isMouseOnBlock=!1}created(){this.initDraggableForExitsByUuid()}updated(){this.$refs.draggable&&(this.blockWidth=this.$refs.draggable.$el.clientWidth)}mounted(){this.$nextTick((function(){this.updateLabelContainerMaxWidth()})),window.addEventListener("message",e=>{e.data===zt&&this.activeConnectionsContext.forEach(e=>{this.deactivateConnectionFromExitUuid({exitUuid:e.exitId})})})}onBlockExitsLengthChanged(e,t){this.$nextTick(()=>{this.updateLabelContainerMaxWidth(e,e<t)})}get blockExitsLength(){return this.block.exits.length}get numberOfExitsShown(){const{exits:e}=this.block;return e.length}get hasExitsShown(){return this.numberOfExitsShown>0}get hasMultipleExitsShown(){return this.numberOfExitsShown>1}get hasLayout(){return Object(y["isNumber"])(this.x)&&Object(y["isNumber"])(this.y)}get isAssociatedWithActiveConnection(){const{block:e,activeConnectionsContext:t}=this;return!!Object(y["filter"])(t,t=>t.sourceId===e.uuid||t.targetId===e.uuid).length}get isAssociatedWithActiveConnectionAsSourceBlock(){const{block:e,activeConnectionsContext:t}=this;return!!Object(y["filter"])(t,t=>t.sourceId===e.uuid).length}get isAssociatedWithActiveConnectionAsTargetBlock(){const{block:e,activeConnectionsContext:t}=this;return!!Object(y["filter"])(t,t=>t.targetId===e.uuid).length}get isWaitingForConnection(){return!this.isConnectionSource&&this.isMouseOnBlock&&this.isConnectionCreationInProgress}get isBlockSelected(){return Object(y["includes"])(this.selectedBlocks,this.block.uuid)}get isConnectionCreateActive(){const{operations:e}=this;return!!e[$t["a"].CONNECTION_CREATE].data}get isBlockActivated(){const{activeBlockId:e,isAssociatedWithActiveConnection:t,block:o,operations:i}=this;if(e&&e===o.uuid||t)return!0;const{data:a}=i[$t["a"].CONNECTION_CREATE];return(null===a||void 0===a?void 0:a.targetId)===o.uuid}get shouldShowBlockEditorForCurrentBlock(){return this.isBlockEditorOpen&&this.activeBlockId===this.block.uuid}setIsMouseOnBlock(e){this.isMouseOnBlock=e}setIsConnectionSource(e){this.isConnectionSource=e}updateLabelContainerMaxWidth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockExitsLength,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const o=document.querySelector(`#block\\/${this.block.uuid} .block-exit`);if(o){if(t){if(Ht<(e-1)*o.offsetWidth)return void(this.labelContainerMaxWidth=(e-1)*o.offsetWidth)}else if(Ht<e*o.clientWidth)return void(this.labelContainerMaxWidth=e*o.offsetWidth);this.labelContainerMaxWidth=Ht}else console.debug("blockExitWidth","DOM not ready yet on",`#block\\/${this.block.uuid} .block-exit`)}isExitActivatedForCreate(e){var t;const{data:o}=this.operations[$t["a"].CONNECTION_CREATE];return(null===(t=null===o||void 0===o?void 0:o.source)||void 0===t?void 0:t.exitId)===e.uuid}activateBlockAsDropZone(){const{block:e}=this;this.setConnectionCreateTargetBlock({block:e})}deactivateBlockAsDropZone(){var e;const{block:t}=this;null!==(null===(e=this.operations[$t["a"].CONNECTION_CREATE].data)||void 0===e?void 0:e.targetId)&&this.setConnectionCreateTargetBlockToNullFrom({block:t})}onMoved(e){let{position:{left:t,top:o}}=e;const{block:i}=this;this.$nextTick(()=>{this.setBlockPositionTo({position:{x:t,y:o},block:i}),Object(y["forEach"])(this.draggableForExitsByUuid,(e,t)=>{try{e.position()}catch(o){console.warn("Block","onMoved","positioning draggable on",t,'can\'t access property "initElm", props is undefined')}}),console.debug("Block","onMoved","positioned all of",this.draggableForExitsByUuid)})}selectBlock(){let e,t;e=this.activeBlockId!==this.block.uuid||!this.isBlockEditorOpen,this.setIsBlockEditorOpen(e),this.isBlockEditorOpen?(t="block-selected-details",this.$emit("before-minimize")):(t="block-selected",this.$emit("before-expand")),this.$router.replace({name:t,params:{blockId:this.block.uuid}},void 0,e=>{null==e?console.warn("Unknown navigation error has occurred when selecting a block"):"NavigationDuplicated"!==e.name&&console.warn(e)})}handleDraggableEndedForBlock(){console.debug("Block","handleDraggableEndedForBlock"),Object(y["forEach"])(this.block.exits,e=>{delete this.draggableForExitsByUuid[e.uuid]})}handleDraggableDestroyedForBlock(){console.debug("Block","handleDraggableDestroyedForBlock"),Object(y["forEach"])(this.block.exits,e=>{delete this.draggableForExitsByUuid[e.uuid]})}};Object(m["__decorate"])([Object(x["b"])({type:Object,required:!0})],Gt.prototype,"block",void 0),Object(m["__decorate"])([Object(x["b"])({type:Number,required:!0})],Gt.prototype,"x",void 0),Object(m["__decorate"])([Object(x["b"])({type:Number,required:!0})],Gt.prototype,"y",void 0),Object(m["__decorate"])([Object(x["d"])("blockExitsLength")],Gt.prototype,"onBlockExitsLengthChanged",null),Object(m["__decorate"])([Ut.State],Gt.prototype,"selectedBlocks",void 0),Object(m["__decorate"])([Wt.State],Gt.prototype,"activeBlockId",void 0),Object(m["__decorate"])([Wt.State],Gt.prototype,"operations",void 0),Object(m["__decorate"])([Wt.State],Gt.prototype,"activeConnectionsContext",void 0),Object(m["__decorate"])([Wt.State],Gt.prototype,"isBlockEditorOpen",void 0),Object(m["__decorate"])([Wt.State],Gt.prototype,"draggableForExitsByUuid",void 0),Object(m["__decorate"])([Wt.State],Gt.prototype,"isConnectionCreationInProgress",void 0),Object(m["__decorate"])([Object(ae["d"])(e=>{let{trees:{ui:t}}=e;return t.blockClasses})],Gt.prototype,"blockClasses",void 0),Object(m["__decorate"])([Wt.Getter],Gt.prototype,"isEditable",void 0),Object(m["__decorate"])([Ut.Getter],Gt.prototype,"activeFlow",void 0),Object(m["__decorate"])([Wt.Mutation],Gt.prototype,"activateBlock",void 0),Object(m["__decorate"])([Wt.Mutation],Gt.prototype,"initDraggableForExitsByUuid",void 0),Object(m["__decorate"])([Wt.Mutation],Gt.prototype,"setIsBlockEditorOpen",void 0),Object(m["__decorate"])([Wt.Mutation],Gt.prototype,"deactivateConnectionFromExitUuid",void 0),Object(m["__decorate"])([Wt.Action],Gt.prototype,"setConnectionCreateTargetBlock",void 0),Object(m["__decorate"])([Wt.Action],Gt.prototype,"setConnectionCreateTargetBlockToNullFrom",void 0),Object(m["__decorate"])([Wt.Action],Gt.prototype,"setBlockPositionTo",void 0),Gt=Object(m["__decorate"])([Object(x["a"])({})],Gt);var qt=Gt,Kt=qt,Zt=(o("7312"),Object(P["a"])(Kt,Nt,Dt,!1,null,null,null));Zt.exports;const Xt={ON_HOVER:"#A31E65",CONNECTING:"#10661E",DEFAULT:"#707070"},Jt=Object(ae["e"])("builder");let Yt=class extends(Object(C["c"])(E["a"])){constructor(){super(...arguments),this.line=void 0,this.isPermanentlyActive=!1}get hasDestination(){return null!=this.exit.destination_block}get options(){return{startPlug:"square",color:this.color,startSocket:"bottom",endSocket:"top",size:4,path:"grid",endPlugSize:1}}get onHoverOptions(){return{color:Xt.ON_HOVER}}get connectionContext(){var e,t,o,i,a,s;return{sourceId:null!==(t=null===(e=this.source)||void 0===e?void 0:e.uuid)&&void 0!==t?t:"",targetId:null!==(i=null===(o=this.target)||void 0===o?void 0:o.uuid)&&void 0!==i?i:"",exitId:null!==(s=null===(a=this.exit)||void 0===a?void 0:a.uuid)&&void 0!==s?s:""}}get sourceElementId(){return"exit/"+this.exit.uuid}get targetElementId(){const{exit:e}=this;return e.destination_block?`block/${e.destination_block}/handle`:`exit/${e.uuid}/pseudo-block-handle`}get repositionHook(){var e,t,o,i;if(!this.repaintCacheKeyGenerator)return null;this.$nextTick(()=>{this.reposition()});const a=this.source||{...Object(y["set"])({},"ui_metadata.canvas_coordinates.x",null===(e=this.position)||void 0===e?void 0:e.x),...Object(y["set"])({},"ui_metadata.canvas_coordinates.y",null===(t=this.position)||void 0===t?void 0:t.y)},s=this.target||{...Object(y["set"])({},"ui_metadata.canvas_coordinates.x",null===(o=this.position)||void 0===o?void 0:o.x),...Object(y["set"])({},"ui_metadata.canvas_coordinates.y",null===(i=this.position)||void 0===i?void 0:i.y)};return this.repaintCacheKeyGenerator(a,s).join("\n")}mounted(){const e={x:"50%",y:-7},t=document.getElementById(this.sourceElementId),o=this.position?document.getElementById(this.targetElementId):Lt["a"].pointAnchor(document.getElementById(this.targetElementId),e);this.line=new Lt["a"](t,o,this.options);const i=document.querySelector("body>.leader-line:last-of-type");null!==i&&(i.addEventListener("click",this.clickHandler.bind(this),!1),document.addEventListener("click",this.clickAwayHandler.bind(this,i),!1),i.addEventListener("mouseover",this.mouseOverHandler.bind(this),!1),i.addEventListener("mouseout",this.mouseOutHandler.bind(this),!1)),window.addEventListener("message",e=>{e.data===zt&&this.resetActiveConnection()})}beforeDestroy(){this.line.remove()}reposition(){var e,t;if(!this.line)return;const o=this.line.position();console.debug("connection","repositioning",{sourceId:null===(e=this.source)||void 0===e?void 0:e.uuid,targetId:null===(t=this.target)||void 0===t?void 0:t.uuid,position:o,y:this.line.top,x:this.line.left})}mouseOverHandler(){this.hasDestination&&(this.line.setOptions(this.onHoverOptions),this.activateConnection({connectionContext:this.connectionContext}),this.$emit("lineMouseIn"))}mouseOutHandler(){this.hasDestination&&(this.isPermanentlyActive||(this.line.setOptions(this.options),this.deactivateConnection({connectionContext:this.connectionContext})),this.$emit("lineMouseOut"))}clickHandler(){this.isPermanentlyActive=!0,this.activateConnection({connectionContext:this.connectionContext}),this.activateBlock({blockId:null}),this.$emit("lineMouseIn"),this.$emit("lineMouseClickedIn")}clickAwayHandler(e,t){var o;try{if(!(null===(o=this.line)||void 0===o?void 0:o.end))return}catch(a){return}const i=e.contains(t.target);i||this.resetActiveConnection(),this.$emit("lineMouseOut")}resetActiveConnection(){this.isPermanentlyActive=!1;try{this.line.setOptions(this.options)}catch(e){}this.deactivateConnection({connectionContext:this.connectionContext}),this.$emit("lineMouseClickedOut")}};Object(m["__decorate"])([Object(x["b"])({type:Object,required:!0})],Yt.prototype,"exit",void 0),Object(m["__decorate"])([Object(x["b"])({type:Function,required:!0})],Yt.prototype,"repaintCacheKeyGenerator",void 0),Object(m["__decorate"])([Object(x["b"])({type:Object})],Yt.prototype,"source",void 0),Object(m["__decorate"])([Object(x["b"])({type:Object})],Yt.prototype,"target",void 0),Object(m["__decorate"])([Object(x["b"])({type:Object})],Yt.prototype,"position",void 0),Object(m["__decorate"])([Object(x["b"])({type:String})],Yt.prototype,"color",void 0),Object(m["__decorate"])([Jt.Mutation],Yt.prototype,"activateConnection",void 0),Object(m["__decorate"])([Jt.Mutation],Yt.prototype,"deactivateConnection",void 0),Object(m["__decorate"])([Jt.Mutation],Yt.prototype,"activateBlock",void 0),Yt=Object(m["__decorate"])([Object(x["a"])({})],Yt);var Qt=Yt,eo=Qt,to=(o("bead"),Object(P["a"])(eo,Rt,Vt,!1,null,null,null)),oo=(to.exports,function(){var e,t,o=this,i=o._self._c;return i("div",{staticClass:"resource-viewer",attrs:{"data-cy":"resource-viewer--page"}},[o._t("vendor-header"),i("div",{staticClass:"resource-viewer-contents"},o._l(null!==(e=null===(t=o.activeFlow)||void 0===t?void 0:t.blocks)&&void 0!==e?e:[],(function(e){return i("resource-viewer-block",{directives:[{name:"show",rawName:"v-show",value:null===o.visibleBlocks||o.visibleBlocks.includes(e.uuid),expression:"visibleBlocks === null || visibleBlocks.includes(block.uuid)"}],key:e.uuid,attrs:{id:"block/"+e.uuid,block:e},on:{change:o.debounce_persistFlow}})})),1),o._t("vendor-footer")],2)}),io=[];const ao=1500;var so,ro,no={name:"ResourceViewer",mixins:[E["a"]],props:{visibleBlocks:{type:Array,default:()=>null}},computed:{...Object(h["c"])({activeFlow:"flow/activeFlow"}),id(){return this.$route.params.id}},mounted(){console.debug("VueJS flow resources viewer mounted!")},methods:{...Object(h["b"])("builder",["persistFlowAndHandleUiState"]),debounce_persistFlow:Object(y["debounce"])((function(){return this.persistFlowAndHandleUiState()}),ao)}},co=no,lo=(o("025f"),Object(P["a"])(co,oo,io,!1,null,null,null)),uo=lo.exports,po=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"choices-builder form-group",attrs:{"data-cy":"choices-builder"}},[t("label",{staticClass:"text-primary"},[e._v(e._s(e._f("trans")("flow-builder.choices")))]),e._l(e.choiceResourcesOrderedByResourcesList,(function(o,i){return[t("resource-variant-text-editor",{key:o.uuid,ref:"choices",refInFor:!0,staticClass:"choices-builder-item",attrs:{index:0,"data-cy":"choices-builder--editor","prepend-text":(i+1).toString(),title:o.uuid,rows:1,placeholder:"Enter choice...","resource-id":o.uuid,"resource-variant":o.values[0],mode:e.SupportedMode.TEXT,"disabled-auto-complete":!0},on:{afterResourceVariantChanged:function(t){return e.handleExistingResourceVariantChangedFor({choiceIndex:i},t)}}})]})),e.draftResource?t("resource-variant-text-editor",{ref:"draftChoice",staticClass:"choices-builder-item",attrs:{"data-cy":"choices-builder--editor-new","prepend-text":(e.choiceResourcesOrderedByResourcesList.length+1).toString(),rows:1,placeholder:"Enter choice...","resource-id":e.draftResource.uuid,"resource-variant":e.findOrGenerateStubbedVariantOn(e.draftResource,{language_id:e.activeFlow.languages[0].id,content_type:e.SupportedContentType.TEXT,mime_type:e.choiceMimeType,modes:[e.SupportedMode.TEXT]}),mode:e.SupportedMode.TEXT,"disabled-auto-complete":!0},on:{beforeResourceVariantChanged:e.addDraftResourceToChoices,afterResourceVariantChanged:e.handleNewChoiceChange}}):e._e(),t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/config/choices`},scopedSlots:e._u([{key:"input-control",fn:function(e){let{isValid:t}=e}}])}),t("choice-mapping-modal",{attrs:{block:e.block}})],2)},bo=[],fo=o("02be"),ho=o("ecef"),vo=o("31aa"),_o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"choice-mapping-modal"},[t("div",{staticClass:"form-group"},[t("button",{staticClass:"btn btn-primary btn-sm",attrs:{disabled:0===e.block.config.choices.length,"data-cy":"set-choice-options--btn"},on:{click:e.showModal}},[e._v(" "+e._s(e.trans("flow-builder.set-choice-options"))+" ")])]),t("b-modal",{ref:"edit-choice-mapping-modal",attrs:{"ok-title":e.trans("flow-builder.close"),title:e.trans("flow-builder.choice-options"),"ok-only":"",size:"lg"}},[e.shouldHaveTabs?t("div",{staticClass:"choice-mapping-navs",attrs:{"data-cy":"choice-mapping-modal"}},[t("nav",[t("div",{staticClass:"nav nav-tabs",attrs:{id:"choice-options-nav-tab",role:"tablist"}},[e.hasVoiceMode?t("a",{staticClass:"nav-item nav-link",class:{active:e.hasVoiceMode},attrs:{id:"nav-voice-tab","data-cy":"voice-tab","aria-controls":"nav-home","aria-selected":"true","data-toggle":"tab",href:"#nav-voice",role:"tab"}},[e._v(" "+e._s(e.trans("flow-builder.voice"))+" ("+e._s(e.trans("flow-builder.all-languages"))+") ")]):e._e(),e.hasTextMode?e._l(e.textLanguages,(function(o,i){let{id:a,label:s,iso_639_3:r}=o;return t("a",{key:a,staticClass:"nav-item nav-link",class:{active:!e.hasVoiceMode&&e.hasTextMode&&0===i},attrs:{id:"nav-lang-tab-"+a,"data-cy":"text-tab-"+r,href:"#nav-lang-"+a,title:s||e.trans("flow-builder.unknown-language"),"aria-controls":"nav-profile","aria-selected":"false","data-toggle":"tab",role:"tab"}},[e._v(" "+e._s(e.trans("flow-builder.data-type-text"))+" ("+e._s(s||e.trans("flow-builder.unknown-language"))+") ")])})):e._e()],2)]),t("div",{staticClass:"tab-content",attrs:{id:"choice-options-nav-tab-content"}},[e.hasVoiceMode?t("div",{staticClass:"tab-pane fade",class:{"show active":e.hasVoiceMode},attrs:{id:"nav-voice","aria-labelledby":"nav-voice-tab",role:"tabpanel"}},[t("div",{staticClass:"mt-3"},[t("voice-mapping-table",{attrs:{block:e.block}})],1)]):e._e(),e.hasTextMode?e._l(e.textLanguages,(function(o,i){let{id:a,label:s}=o;return t("div",{key:a,staticClass:"tab-pane fade",class:{"show active":!e.hasVoiceMode&&e.hasTextMode&&0===i},attrs:{id:"nav-lang-"+a,"aria-labelledby":"nav-lang-tab",role:"tabpanel"}},[t("div",{staticClass:"mt-3"},[t("text-mapping-table",{attrs:{block:e.block,"lang-id":a}})],1)])})):e._e()],2)]):t("div",[e._v(" "+e._s(e.trans("flow-builder.cannot-map-choices-hint"))+" ")])])],1)},go=[],mo=o("6aac"),ko=function(){var e=this,t=e._self._c;return t("table",{staticClass:"voice-mapping-table table table-striped"},[t("thead",[t("tr",[t("th",{staticClass:"col-5 align-top"},[e._v(e._s(e.trans("flow-builder.choice-name")))]),t("th",{staticClass:"align-top"},[e._v(e._s(e.trans("flow-builder.voice-key-press")))]),t("th",{staticClass:"col-5 align-top"},[e._v(" "+e._s(e.trans("flow-builder.expressions"))+" "),t("h5",{staticClass:"small"},[e._v(e._s(e.trans("flow-builder.voice-choice-mapping-expression")))])])])]),t("tbody",e._l(e.block.config.choices,(function(o,i){return t("voice-mapping-row",{key:i,attrs:{block:e.block,"current-choice":o,index:i}})})),1)])},yo=[],jo=function(){var e=this,t=e._self._c;return t("tr",{staticClass:"voice-mapping-row",attrs:{"data-cy":"voice-mapping-entry"}},[t("td",{staticClass:"d-flex"},[e._v(" "+e._s(e.currentChoice.name)+" "),t("div",{staticClass:"custom-control custom-checkbox ml-auto"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.shouldUseExpression,expression:"shouldUseExpression"}],staticClass:"custom-control-input",attrs:{id:"useExpression-"+e.index,name:"useExpression-"+e.index,type:"checkbox"},domProps:{checked:Array.isArray(e.shouldUseExpression)?e._i(e.shouldUseExpression,null)>-1:e.shouldUseExpression},on:{change:function(t){var o=e.shouldUseExpression,i=t.target,a=!!i.checked;if(Array.isArray(o)){var s=null,r=e._i(o,s);i.checked?r<0&&(e.shouldUseExpression=o.concat([s])):r>-1&&(e.shouldUseExpression=o.slice(0,r).concat(o.slice(r+1)))}else e.shouldUseExpression=a}}}),t("label",{staticClass:"custom-control-label font-weight-normal",attrs:{for:"useExpression-"+e.index}},[e._v(" "+e._s(e.trans("flow-builder.use-expressions"))+" ")])])]),t("td",[t("div",{staticClass:"d-flex justify-content-center"},[t("key-press-selector",{attrs:{block:e.block,"current-choice":e.currentChoice,disabled:e.shouldUseExpression,index:e.index}})],1)]),t("td",[t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/config/choices/${e.index}/ivr_test/test_expression`},scopedSlots:e._u([{key:"input-control",fn:function(o){let{isValid:i}=o;return[t("expression-input",{staticClass:"mb-1",attrs:{"current-expression":e.currentExpression,label:"",placeholder:e.trans("flow-builder.enter-expression"),"valid-state":i,disabled:!e.shouldUseExpression},on:{commitExpressionChange:e.updateCurrentExpression}})]}}])})],1)])},Oo=[],wo=function(){var e=this,t=e._self._c;return t("select",{directives:[{name:"model",rawName:"v-model",value:e.keypress,expression:"keypress"}],staticClass:"voice-key-press-selector",on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.keypress=t.target.multiple?o:o[0]}}},e._l(e.options,(function(o){return t("option",{key:o,attrs:{disabled:e.disabled},domProps:{value:o}},[e._v(" "+e._s(o)+" ")])})),0)},Co=[],xo=o("8562"),Eo={props:{block:{type:Z["ISelectOneResponseBlock"],required:!0},currentChoice:{type:Z["IChoice"],required:!0},index:{type:Number,required:!0}},data(){return{options:["1","2","3","4","5","6","7","8","9","0","*"],BLOCK_RESPONSE_EXPRESSION:xo["a"]}},computed:{currentExpressionWithoutSpaces(){return void 0!==this.currentExpression?this.currentExpression.replace(/\s/g,""):void 0},currentExpression(){var e;return null===(e=this.currentChoice.ivr_test)||void 0===e?void 0:e.test_expression},isKeyPressIdentifiable(){var e,t;return!0===this.currentExpressionWithoutSpaces.endsWith("'")&&(!0===(null===(e=this.currentExpressionWithoutSpaces)||void 0===e?void 0:e.startsWith(xo["a"]+"='"))||!0===(null===(t=this.currentExpressionWithoutSpaces)||void 0===t?void 0:t.startsWith(`@${xo["a"]}='`)))&&!0===this.options.includes(this.estimatedKeyPress)},estimatedKeyPress(){var e,t;return String(null===(e=this.currentExpressionWithoutSpaces)||void 0===e||null===(t=e.split("'"))||void 0===t?void 0:t[1])},keypress:{get(){if(!0===this.isKeyPressIdentifiable)return this.estimatedKeyPress;const e=Number(this.index)+1;return e<=9?String(e):"*"},set(e){this.updateCurrentExpression(`${xo["a"]} = '${e}'`)}}},methods:{...Object(h["b"])("flow/"+ho["a"],["block_setChoiceIvrExpressionOnIndex"]),updateCurrentExpression(e){this.block_setChoiceIvrExpressionOnIndex({blockId:this.block.uuid,index:this.index,value:e})}}},Io=Eo,Bo=Object(P["a"])(Io,so,ro,!1,null,null,null),So=Bo.exports,Po={extends:So,props:{disabled:{type:Boolean,default:!1}}},Mo=Po,Fo=(o("5e0f"),Object(P["a"])(Mo,wo,Co,!1,null,"156d9deb",null)),To=Fo.exports,Ao={name:"VoiceMappingRow",components:{KeyPressSelector:To},extends:So,mixins:[E["a"]],created(){var e,t;!0===this.hasVoiceMode&&void 0===(null===(e=this.currentChoice)||void 0===e||null===(t=e.ivr_test)||void 0===t?void 0:t.test_expression)&&this.updateCurrentExpression(`${this.BLOCK_RESPONSE_EXPRESSION} = '${this.keypress}'`)},computed:{...Object(h["c"])("flow",["hasVoiceMode"]),shouldUseExpression:{get(){return!(!0===this.isKeyPressIdentifiable)},set(e){!0===e?this.updateCurrentExpression(""):this.updateCurrentExpression(`${this.BLOCK_RESPONSE_EXPRESSION} = '${this.keypress}'`)}}}},Ro=Ao,Vo=Object(P["a"])(Ro,jo,Oo,!1,null,"d4dc2d64",null),Lo=Vo.exports,No={name:"VoiceMappingTable",components:{VoiceMappingRow:Lo},mixins:[E["a"]],props:{block:{type:Z["ISelectOneResponseBlock"],required:!0}}},Do=No,$o=Object(P["a"])(Do,ko,yo,!1,null,null,null),Uo=$o.exports,Wo=function(){var e=this,t=e._self._c;return t("table",{staticClass:"text-mapping-table table table-striped"},[t("thead",[t("tr",[t("th",{staticClass:"col-5 align-top"},[e._v(e._s(e.trans("flow-builder.choice-name")))]),t("th",{staticClass:"align-top"},[e._v(e._s(e.trans("flow-builder.synonyms"))+" / "+e._s(e.trans("flow-builder.text-expression")))])])]),t("tbody",e._l(e.block.config.choices,(function(o,i){return t("text-mapping-row",{key:i,attrs:{block:e.block,"current-choice":o,index:i,"lang-id":e.langId}})})),1)])},Ho=[],zo=function(){var e=this,t=e._self._c;return t("tr",{staticClass:"text-mapping-row",attrs:{"data-cy":"text-mapping-entry"}},[t("td",[e._v(" "+e._s(e.currentChoice.name)+" ")]),t("td",[t("text-synonyms-editor",{attrs:{block:e.block,"current-choice":e.currentChoice,index:e.index,"lang-id":e.langId}})],1)])},Go=[],qo=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-synonyms-editor"},[e._l(e.synonymsForLanguage,(function(o,i){let{test_expression:a,visible_expression:s,globalIndex:r}=o;return t("validation-message",{key:i,attrs:{"message-key":`block/${e.block.uuid}/config/choices/${e.index}/text_tests/${r}/test_expression`},scopedSlots:e._u([{key:"input-control",fn:function(o){let{isValid:r}=o;return[t("expression-input",{ref:"expressionInputs",refInFor:!0,staticClass:"mb-1",attrs:{"current-expression":s,title:a,label:"",placeholder:e.trans("flow-builder.enter-expression"),"valid-state":r},on:{commitExpressionChange:function(t){return e.updateCurrentExpression(i,t)}}})]}}],null,!0)})})),t("expression-input",{staticClass:"mb-1",attrs:{"current-expression":e.draftExpression,label:"",placeholder:e.trans("flow-builder.enter-expression")},on:{commitExpressionChange:e.addNewExpression}})],2)},Ko=[],Zo=o("b85b"),Xo={name:"TextSynonymsEditor",mixins:[E["a"]],props:{block:{type:Z["ISelectOneResponseBlock"],required:!0},currentChoice:{type:Z["IChoice"],required:!0},index:{type:Number,required:!0},langId:{type:String,required:!0}},data(){return{draftExpression:""}},computed:{synonymsForLanguage(){return this.choiceTests.map((e,t)=>({...e,visible_expression:Object(Zo["d"])(e.test_expression),globalIndex:t})).filter(e=>{let{language:t}=e;return t===this.langId})},choiceTests(){return this.currentChoice.text_tests}},created(){var e,t,o;const i=0;void 0===(null===(e=this.currentChoice)||void 0===e||null===(t=e.text_tests)||void 0===t||null===(o=t[i])||void 0===o?void 0:o.test_expression)&&this.updateCurrentExpression(i,{value:this.currentChoice.name})},methods:{...Object(h["b"])("flow/"+ho["a"],["choice_setSynonymForLanguage","choice_removeTextTestsExpressionOnIndex"]),updateCurrentExpression(e,t){t>""?this.choice_setSynonymForLanguage({blockId:this.block.uuid,resourceId:this.currentChoice.prompt,language:this.langId,index:e,value:t}):(this.choice_removeTextTestsExpressionOnIndex({choice:this.currentChoice,testIndex:e}),this.draftExpression=t,this.$nextTick(()=>{this.draftExpression=""}))},addNewExpression(e){this.draftExpression=e,this.choice_setSynonymForLanguage({blockId:this.block.uuid,resourceId:this.currentChoice.prompt,language:this.langId,value:e}),this.$nextTick(()=>{this.draftExpression="",this.$refs.expressionInputs.at(-1).focus()})}}},Jo=Xo,Yo=Object(P["a"])(Jo,qo,Ko,!1,null,null,null),Qo=Yo.exports,ei={name:"TextMappingRow",components:{TextSynonymsEditor:Qo},mixins:[E["a"]],props:{block:{type:Z["ISelectOneResponseBlock"],required:!0},currentChoice:{type:Z["IChoice"],required:!0},index:{type:Number,required:!0},langId:{type:String,required:!0}}},ti=ei,oi=Object(P["a"])(ti,zo,Go,!1,null,"5c2edd5d",null),ii=oi.exports,ai={name:"TextMappingTable",components:{TextMappingRow:ii},mixins:[E["a"]],props:{block:{type:Z["ISelectOneResponseBlock"],required:!0},langId:{type:String,required:!0}}},si=ai,ri=Object(P["a"])(si,Wo,Ho,!1,null,null,null),ni=ri.exports,ci={name:"ChoiceMappingModal",components:{BModal:mo["a"],VoiceMappingTable:Uo,TextMappingTable:ni},mixins:[E["a"]],props:{block:{type:Z["ISelectOneResponseBlock"],required:!0}},computed:{...Object(h["c"])("flow",["activeFlow","hasTextMode","hasVoiceMode"]),textLanguages(){return!0===this.hasTextMode?this.activeFlow.languages:[]},shouldHaveTabs(){return!0===this.hasVoiceMode||!0===this.hasTextMode&&this.activeFlow.languages.length>0}},methods:{showModal(){const e=this.$refs["edit-choice-mapping-modal"];void 0!==e?e.show():console.error("showModal","ref `edit-choice-mapping-modal` not found")},hideModal(){const e=this.$refs["edit-choice-mapping-modal"];void 0!==e?e.hide():console.error("hideModal","ref `edit-choice-mapping-modal` not found")}}},li=ci,di=(o("5bd9"),Object(P["a"])(li,_o,go,!1,null,"ac85cfcc",null)),ui=di.exports;const pi=Object(ae["e"])("flow"),bi=Object(ae["e"])("flow/"+ho["a"]),fi=Object(ae["e"])("validation");let hi=class extends(Object(C["c"])(E["a"])){constructor(){super(...arguments),this.draftResource=null,this.SupportedContentType=Z["SupportedContentType"],this.SupportedMode=Z["SupportedMode"],this.findOrGenerateStubbedVariantOn=fo["e"]}get choiceResourcesOrderedByResourcesList(){return Object(y["intersectionWith"])(this.activeFlow.resources,this.block.config.choices,(e,t)=>e.uuid===(null===t||void 0===t?void 0:t.prompt))}created(){this.generateDraftResource()}async generateDraftResource(){this.draftResource=await this.resource_createWith({props:{uuid:await(new vo["IdGeneratorUuidV4"]).generate()}})}async addDraftResourceToChoices(){null!=this.draftResource?(this.resource_add({resource:this.draftResource}),this.addChoiceByResourceIdTo({blockId:this.block.uuid,resourceId:this.draftResource.uuid}),this.$nextTick(()=>this.focusInputElFor(Object(y["last"])(this.$refs.choices))),await this.generateDraftResource()):console.warn("interaction-designer/block-editors/ChoicesBuilder","Unable to add absent draft resource to block choices.",{block:this.block})}focusInputElFor(e){var t;e&&(null===(t=e.$el.querySelector("input, textarea"))||void 0===t||t.focus())}handleExistingResourceVariantChangedFor(e,t){let{choiceIndex:o}=e,{variant:i,resourceId:a,value:s}=t;const r=o===this.choiceResourcesOrderedByResourcesList.length-1,n=Object(y["isEmpty"])(s);r&&n?(this.deleteLastAndPreviousChoicesIfEmpty(o),this.focusInputElFor(this.$refs.draftChoice)):this.choice_change({blockId:this.block.uuid,resourceId:a,value:s}),this.$emit("choiceChanged",{resourceId:a})}deleteLastAndPreviousChoicesIfEmpty(e){let t=e,o=this.block.config.choices[t];do{console.debug("delete previous empty choice at index",t),this.deleteChoiceByResourceIdFrom({blockId:this.block.uuid,resourceId:o.prompt}),this.flow_removeResourcesAndRelatedValidationsOnActiveFlow({resourceUuids:[o.prompt]}),t-=1,o=this.block.config.choices[t]}while(t>=0&&""===o.name)}handleNewChoiceChange(e){let{variant:t,resourceId:o,value:i}=e;this.choice_create({blockId:this.block.uuid,resourceId:o,value:i}),this.$emit("choiceChanged",{resourceId:o})}};Object(m["__decorate"])([Object(x["b"])()],hi.prototype,"block",void 0),Object(m["__decorate"])([bi.Action],hi.prototype,"choice_create",void 0),Object(m["__decorate"])([bi.Action],hi.prototype,"choice_change",void 0),Object(m["__decorate"])([fi.Getter],hi.prototype,"choiceMimeType",void 0),Object(m["__decorate"])([pi.Getter],hi.prototype,"activeFlow",void 0),Object(m["__decorate"])([pi.Action],hi.prototype,"resource_add",void 0),Object(m["__decorate"])([pi.Action],hi.prototype,"resource_createWith",void 0),Object(m["__decorate"])([pi.Action],hi.prototype,"flow_removeResourcesAndRelatedValidationsOnActiveFlow",void 0),Object(m["__decorate"])([bi.Action],hi.prototype,"deleteChoiceByResourceIdFrom",void 0),Object(m["__decorate"])([bi.Action],hi.prototype,"block_setChoiceIvrExpressionOnIndex",void 0),Object(m["__decorate"])([bi.Action],hi.prototype,"addChoiceByResourceIdTo",void 0),hi=Object(m["__decorate"])([Object(x["a"])({components:{ChoiceMappingModal:ui}})],hi);var vi=hi,_i=vi,gi=Object(P["a"])(_i,po,bo,!1,null,null,null),mi=(gi.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"select-one-response-block-contact-property-editor"},[t("generic-contact-property-editor",{attrs:{block:e.block,"disable-expression-input":!0},on:{toggleSetContactProperty:e.onSetContactPropertyToggle,changeContactPropertyType:e.resetMapping,updateShouldUseCurrentBlockResponse:e.onShouldUseCurrentBlockResponseUpdate}},[t("template",{slot:"entry-from-this-block"},[t("div",{staticClass:"mt-2 mb-2"},[0===e.choices.length?t("div",{staticClass:"mt-2 mb-2 text-danger"},[e._v(" "+e._s(e.trans("flow-builder.enter-at-least-one-choice-above"))+" ")]):[e.isMultipleChoiceProperty?t("div",[e._v(" "+e._s(e.trans("flow-builder.select-value-for-choices-for-selected-property"))+" ")]):t("div",[e._v(" "+e._s(e.trans("flow-builder.enter-value-for-choices-for-selected-property"))+" ")]),e._l(e.choices,(function(o){let{prompt:i,name:a}=o;return t("div",{key:i,staticClass:"mt-2"},[t("label",[e._v(e._s(e.trans("flow-builder.choice"))+": "+e._s(a))]),e.isTextProperty?t("input",{staticClass:"form-control",attrs:{type:"text",placeholder:e.trans("flow-builder.enter-value")},domProps:{value:e.getChoiceValue(i)},on:{input:function(t){return e.setChoiceValue(t.target.value,i)}}}):e._e(),e.isNumberProperty?t("input",{staticClass:"form-control",attrs:{type:"number",placeholder:e.trans("flow-builder.enter-value")},domProps:{value:e.getChoiceValue(i)},on:{input:function(t){e.setChoiceValue(Number(t.target.value),i)}}}):e._e(),e.isBooleanProperty?t("vue-multiselect",{attrs:{value:e.getBooleanChoiceValueOption(i),options:e.booleanChoiceValueOptions,"show-labels":!1,placeholder:e.trans("flow-builder.select-a-value"),"preselect-first":!0,"track-by":"value",label:"description"},on:{input:function(t){return e.setBooleanChoiceValueOption(t,i)}}}):e._e(),e.isMultipleChoiceProperty?t("vue-multiselect",{attrs:{value:e.getChoiceValueOption(i),options:e.choiceValueOptions,"show-labels":!1,placeholder:e.trans("flow-builder.select-a-value"),"preselect-first":!0,"track-by":"value",label:"description"},on:{input:function(t){return e.setChoiceValueOption(t,i)}}}):e._e()],1)}))]],2)])],2)],1)}),ki=[];const yi="NULL",ji=Object(f["defineComponent"])({components:{VueMultiselect:Ae.a},mixins:[E["b"]],props:{block:{type:Object,required:!0}},computed:{...Object(h["c"])(["subscriberPropertyFields"]),contactPropertyName(){var e;return null===(e=this.block.config.set_contact_property)||void 0===e?void 0:e[0].property_key},contactProperty(){var e;return null!==(e=Object(y["find"])(this.subscriberPropertyFields,e=>e.name===this.contactPropertyName))&&void 0!==e?e:null},isTextProperty(){var e;return"text"===(null===(e=this.contactProperty)||void 0===e?void 0:e.data_type)},isNumberProperty(){var e;return"number"===(null===(e=this.contactProperty)||void 0===e?void 0:e.data_type)},isBooleanProperty(){var e;return"boolean"===(null===(e=this.contactProperty)||void 0===e?void 0:e.data_type)},choices(){return this.block.config.choices},isMultipleChoiceProperty(){var e;return"multiple_choice"===(null===(e=this.contactProperty)||void 0===e?void 0:e.data_type)},choiceValueOptions(){var e,t;return[{value:yi,description:this.trans("flow-builder.no-value")},...(null!==(t=null===(e=this.contactProperty)||void 0===e?void 0:e.choices)&&void 0!==t?t:[]).map(e=>{let{value:t,description:o}=e;return{value:t,description:null!==o&&void 0!==o?o:t}})]},booleanChoiceValueOptions(){return[{value:yi,description:this.trans("flow-builder.no-value")},{value:"TRUE",description:this.trans("flow-builder.true")},{value:"FALSE",description:this.trans("flow-builder.false")}]}},methods:{...Object(h["d"])("flow",["block_updateVendorMetadataByPath","block_removeVendorMetadataByPath","block_updateConfigByPath"]),...Object(h["b"])("flow",["block_resetContactPropertyMetadata"]),getChoiceValue(e){var t,o,i,a,s;return null===(s=null===(a=null===(i=null===(o=null===(t=this.block.vendor_metadata)||void 0===t?void 0:t.floip)||void 0===o?void 0:o.ui_metadata)||void 0===i?void 0:i.set_contact_property)||void 0===a?void 0:a.property_value_mapping)||void 0===s?void 0:s[e]},setChoiceValue(e,t){var o,i,a,s,r;this.block_updateVendorMetadataByPath({blockId:this.block.uuid,path:"floip.ui_metadata.set_contact_property.property_value_mapping."+t,value:e}),this.block_updateConfigByPath({blockId:this.block.uuid,path:"set_contact_property[0].property_value",value:Object(Zo["b"])(this.block.config.choices,null!==(r=null===(s=null===(a=null===(i=null===(o=this.block.vendor_metadata)||void 0===o?void 0:o.floip)||void 0===i?void 0:i.ui_metadata)||void 0===a?void 0:a.set_contact_property)||void 0===s?void 0:s.property_value_mapping)&&void 0!==r?r:{})})},onSetContactPropertyToggle(e){e?this.resetMapping():this.removeMapping()},onShouldUseCurrentBlockResponseUpdate(e){e?this.resetMapping():this.removeMapping()},resetMapping(){this.block_resetContactPropertyMetadata({blockId:this.block.uuid})},removeMapping(){this.block_removeVendorMetadataByPath({blockId:this.block.uuid,path:"floip.ui_metadata.set_contact_property"})},getChoiceValueOption(e){const t=this.getChoiceValue(e);return this.choiceValueOptions.find(e=>e.value===t)},setChoiceValueOption(e,t){this.setChoiceValue(e.value,t)},getBooleanChoiceValueOption(e){const t=this.getChoiceValue(e);return this.booleanChoiceValueOptions.find(e=>e.value===t)},setBooleanChoiceValueOption(e,t){var o;this.setChoiceValue(null!==(o=null===e||void 0===e?void 0:e.value)&&void 0!==o?o:"",t)}}});var Oi=ji,wi=Oi,Ci=Object(P["a"])(wi,mi,ki,!1,null,null,null),xi=(Ci.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"advanced-exit-editor remove-margin-left-right"},[t("div",{staticClass:"put-back-margin-left-right"},[t("div",{staticClass:"input-group"},[t("div",{staticClass:"input-group-prepend bg-grey"},[t("span",{staticClass:"input-group-text"},[e._v(" "+e._s(e.label)+" ")])]),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],ref:"name",staticClass:"form-control",attrs:{placeholder:e.trans("flow-builder.advanced-exit-name-placeholder"),"data-cy":"advanced-exit-name--input",rows:"1"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),e._v(" "),t("button",{staticClass:"btn btn-outline-primary ml-3",attrs:{"data-cy":"advanced-exit-delete--btn"},on:{click:function(t){return e.$emit("deleteExit",e.exit)}}},[t("font-awesome-icon",{attrs:{icon:["far","trash-alt"]}})],1)]),t("h6",{staticClass:"mt-2"},[e._v(" "+e._s(e.trans("flow-builder.test-expression"))+" ")]),t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/exits/${e.index}/test`},scopedSlots:e._u([{key:"input-control",fn:function(){return[t("expression-input",{ref:"testExpressionInput",attrs:{label:"",placeholder:e.trans("flow-builder.advanced-exit-expression-placeholder"),"current-expression":e.test,rows:1,"data-cy":"advanced-exit-test-expression--input"},on:{commitExpressionChange:e.commitExpressionChange}})]},proxy:!0}])})],1)])}),Ei=[];const Ii=Object(ae["e"])("flow");let Bi=class extends(Object(C["c"])(E["a"])){get index(){var e;return null===(e=this.block.exits)||void 0===e?void 0:e.findIndex(e=>{let{uuid:t}=e;return t===this.exit.uuid})}get test(){return this.exit.test}get name(){return this.exit.name}set name(e){const{uuid:t}=this.block,{uuid:o}=this.exit;this.$emit("beforeExitNameChanged",{blockId:t,exitId:o,value:e}),this.block_setExitName({blockId:t,exitId:o,value:e}),this.$emit("afterExitNameChanged",{blockId:t,exitId:o,value:e})}async commitExpressionChange(e){this.$emit("beforeExitTestChanged",{exitId:this.exit.uuid,blockId:this.block.uuid,value:e}),this.block_setExitTest({exitId:this.exit.uuid,blockId:this.block.uuid,value:e}),this.$emit("afterExitTestChanged",{exitId:this.exit.uuid,blockId:this.block.uuid,value:e})}};Object(m["__decorate"])([Object(x["b"])()],Bi.prototype,"block",void 0),Object(m["__decorate"])([Object(x["b"])()],Bi.prototype,"exit",void 0),Object(m["__decorate"])([Object(x["b"])()],Bi.prototype,"label",void 0),Object(m["__decorate"])([Ii.Mutation],Bi.prototype,"block_setExitTest",void 0),Object(m["__decorate"])([Ii.Mutation],Bi.prototype,"block_setExitName",void 0),Bi=Object(m["__decorate"])([Object(x["a"])({})],Bi);var Si=Bi,Pi=Si,Mi=Object(P["a"])(Pi,xi,Ei,!1,null,null,null),Fi=(Mi.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"advanced-exits-builder"},[t("h6",[e._v(e._s(e.trans("flow-builder.hint-to-set-advance-exit")))]),e._l(e.block.exits,(function(o,i){return[t("div",{key:o.uuid},[i>0?t("hr"):e._e(),o.default?e._e():t("advanced-exit-editor",{ref:"exitEditors",refInFor:!0,staticClass:"advanced-block-exit-builder-item mb-2",attrs:{block:e.block,exit:o,label:(i+1).toString()},on:{deleteExit:e.handleDeleteExit}})],1)]})),t("input",{staticClass:"btn btn-outline-primary btn-sm w-100",attrs:{"data-cy":"add-exit--btn",type:"button",value:e.trans("flow-builder.btn-add-exit")},on:{click:e.addDraftExitToBlock}})],2)}),Ti=[];const Ai=Object(ae["e"])("flow");let Ri=class extends(Object(C["c"])(E["a"])){async addDraftExitToBlock(){const e=await(new vo["IdGeneratorUuidV4"]).generate();this.block_addExit({blockId:this.block.uuid,exit:await this.block_createBlockExitWith({props:{uuid:e}})}),this.$nextTick(()=>{var t,o;null===(o=null===(t=this.$refs.exitEditors.find(t=>t.$props.exit.uuid===e))||void 0===t?void 0:t.$refs.name)||void 0===o||o.focus()})}handleDeleteExit(e){this.block_removeExit({blockId:this.block.uuid,exit:e})}};Object(m["__decorate"])([Object(x["b"])()],Ri.prototype,"block",void 0),Object(m["__decorate"])([Ai.Mutation],Ri.prototype,"block_addExit",void 0),Object(m["__decorate"])([Ai.Mutation],Ri.prototype,"block_removeExit",void 0),Object(m["__decorate"])([Ai.Action],Ri.prototype,"block_createBlockExitWith",void 0),Ri=Object(m["__decorate"])([Object(x["a"])({})],Ri);var Vi=Ri,Li=Vi,Ni=Object(P["a"])(Li,Fi,Ti,!1,null,null,null),Di=(Ni.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"block-editor",style:{top:e.topPosition}},[e.activeBlock?t("div",[t("div",{staticClass:"tree-sidebar-edit-block",attrs:{"data-block-type":e.activeBlock&&e.activeBlock.type,"data-for-block-id":e.activeBlock&&e.activeBlock.uuid}},[e.activeBlock?t("Flow"+e.activeBlock.type.replace(".",""),{key:e.activeBlock.uuid,tag:"component",attrs:{block:e.activeBlock,flow:e.activeFlow}}):e._e()],1)]):e._e()])}),$i=[];const Ui=Object(ae["e"])("builder"),Wi=Object(ae["e"])("flow");let Hi=class extends(Object(C["c"])(E["a"])){get topPosition(){const{top:e,height:t}=this.interactionDesignerHeaderBoundingClientRect,o=5;return e+t+o+"px"}};Object(m["__decorate"])([Ui.Getter],Hi.prototype,"activeBlock",void 0),Object(m["__decorate"])([Ui.Getter],Hi.prototype,"interactionDesignerHeaderBoundingClientRect",void 0),Object(m["__decorate"])([Wi.Getter],Hi.prototype,"activeFlow",void 0),Hi=Object(m["__decorate"])([Object(x["a"])({})],Hi);var zi=Hi,Gi=zi,qi=(o("e6bd"),Object(P["a"])(Gi,Di,$i,!1,null,null,null)),Ki=(qi.exports,function(){var e=this,t=e._self._c,o=e._self._setupProxy;return t("div",{staticClass:"block-id text-right",attrs:{"data-cy":"block-id-"+e.block.uuid}},[t("small",{staticClass:"text-muted"},[e._v(e._s(o.trans("flow-builder.block-id"))+": "),t("em",[e._v(e._s(o.blockId))])])])}),Zi=[],Xi=Object(f["defineComponent"])({__name:"BlockId",props:{block:Object},setup(e){const t=e,o=Object(f["computed"])(()=>void 0!==t.block.uuid?t.block.uuid:""),{trans:i}=E["a"];return{__sfc:!0,props:t,blockId:o,trans:i}}}),Ji=Xi,Yi=Object(P["a"])(Ji,Ki,Zi,!1,null,null,null),Qi=Yi.exports,ea=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"block-output-branching-config"},[t("div",{staticClass:"form-group"},[t("label",{class:e.labelClass},[e._v(e._s(e._f("trans")("flow-builder.output-branching")))]),t("div",{staticClass:"btn-group d-block"},[e.hasExitPerChoice?t("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:e.trans("flow-builder.multiple-choice-mode"),expression:"trans('flow-builder.multiple-choice-mode')",modifiers:{hover:!0,bottom:!0}}],staticClass:"btn btn-sm",class:{active:e.isBranchingTypeExitPerChoice,"btn-primary":e.isBranchingTypeExitPerChoice,"btn-outline-primary":!e.isBranchingTypeExitPerChoice},attrs:{"data-cy":"output-branching--exit-per-choice--btn"},on:{click:function(t){e.selectedBranchingType=e.OutputBranchingType.EXIT_PER_CHOICE}}},[t("font-awesome-icon",{staticClass:"exit-type-icons",attrs:{icon:["fac","one-exit-per-choice"]}})],1):e._e(),e.hasUnifiedExit?t("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:e.trans("flow-builder.standard-mode"),expression:"trans('flow-builder.standard-mode')",modifiers:{hover:!0,bottom:!0}}],staticClass:"btn btn-sm",class:{active:e.isBranchingTypeUnified,"btn-primary":e.isBranchingTypeUnified,"btn-outline-primary":!e.isBranchingTypeUnified},attrs:{"data-cy":"output-branching--unified--btn"},on:{click:function(t){e.selectedBranchingType=e.OutputBranchingType.UNIFIED}}},[t("font-awesome-icon",{staticClass:"exit-type-icons",attrs:{icon:["fac","single-exit"]}})],1):e._e(),t("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:e.trans("flow-builder.advanced-mode"),expression:"trans('flow-builder.advanced-mode')",modifiers:{hover:!0,bottom:!0}}],staticClass:"btn btn-sm",class:{active:e.isBranchingTypeAdvanced,"btn-primary":e.isBranchingTypeAdvanced,"btn-outline-primary":!e.isBranchingTypeAdvanced},attrs:{"data-cy":"output-branching--advanced--btn",disabled:!e.hasUnifiedExit&&!e.hasExitPerChoice},on:{click:function(t){e.selectedBranchingType=e.OutputBranchingType.ADVANCED}}},[t("font-awesome-icon",{staticClass:"exit-type-icons",attrs:{icon:["fac","advanced-exit"]}})],1)])]),t("block-output-branching-explanations",{attrs:{"block-type":e.block.type,"branching-type":e.selectedBranchingType}}),e.isBranchingTypeAdvanced?t("advanced-exits-builder",{attrs:{block:e.block}}):e._e()],1)},ta=[],oa=o("963c"),ia=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.definitions?t("dl",{staticClass:"block-output-branching-explanations"},[e._l(e.definitions,(function(o,i){return[t("dt",{key:i+"-dt"},[e._v(" "+e._s(o.title)+" ")]),t("dd",{key:i+"-dd"},[t("markdown-view",{attrs:{markdown:o.description}})],1)]}))],2):e._e()},aa=[];const sa=Object(f["defineComponent"])({name:"BlockOutputBranchingExplanations",components:{MarkdownView:Je},props:{blockType:{type:String,required:!0},branchingType:{type:String,required:!0}},computed:{blockClasses(){return this.$store.state.trees.ui.blockClasses},blockClass(){return this.blockClasses[this.blockType]},explanatoryTexts(){var e;return null!==(e=this.blockClass.explanatory_texts)&&void 0!==e?e:[]},definitions(){const e=[];for(let t=0;t<this.explanatoryTexts.length;t+=1){const o=this.explanatoryTexts[t];(void 0===o.show_for_branching_types||o.show_for_branching_types.includes(this.branchingType))&&e.push({title:E["b"].trans(o.title),description:E["b"].trans(o.description)})}return e}}});var ra=sa,na=ra,ca=Object(P["a"])(na,ia,aa,!1,null,null,null),la=ca.exports;const da=Object(ae["e"])("flow");let ua=class extends(Object(C["c"])(E["a"])){constructor(){super(...arguments),this.OutputBranchingType=oa["a"]}mounted(){Object(y["isEmpty"])(this.selectedBranchingType)&&(this.selectedBranchingType=oa["a"].UNIFIED)}get selectedBranchingType(){return Object(y["get"])(this.block.vendor_metadata,"floip.ui_metadata.branching_type")}set selectedBranchingType(e){const{uuid:t}=this.block;switch(this.block_updateVendorMetadataByPath({blockId:t,path:"floip.ui_metadata.branching_type",value:e}),e){case oa["a"].UNIFIED:this.$emit("branchingTypeChangedToUnified");break;case oa["a"].EXIT_PER_CHOICE:break;case oa["a"].ADVANCED:break;default:console.warn("block-editors/BlockOutputBranchingConfig","Unknown branching type received.",{branching_type:e})}this.$emit("branchingTypeChanged",{branching_type:e})}get isBranchingTypeExitPerChoice(){return this.selectedBranchingType===oa["a"].EXIT_PER_CHOICE}get isBranchingTypeUnified(){return this.selectedBranchingType===oa["a"].UNIFIED}get isBranchingTypeAdvanced(){return this.selectedBranchingType===oa["a"].ADVANCED}};Object(m["__decorate"])([Object(x["b"])()],ua.prototype,"block",void 0),Object(m["__decorate"])([Object(x["b"])()],ua.prototype,"hasExitPerChoice",void 0),Object(m["__decorate"])([Object(x["b"])({default:!0})],ua.prototype,"hasUnifiedExit",void 0),Object(m["__decorate"])([Object(x["b"])({default:"text-primary"})],ua.prototype,"labelClass",void 0),Object(m["__decorate"])([da.Mutation],ua.prototype,"block_updateVendorMetadataByPath",void 0),Object(m["__decorate"])([da.Mutation],ua.prototype,"block_exitClearDestinationBlockFor",void 0),ua=Object(m["__decorate"])([Object(x["a"])({components:{BlockOutputBranchingExplanations:la}})],ua);var pa=ua,ba=pa,fa=(o("6d21"),Object(P["a"])(ba,ea,ta,!1,null,"cb3b21a2",null)),ha=(fa.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"categorization"},[t("hr"),t("label",{staticClass:"text-primary"},[e._v(e._s(e._f("trans")("flow-builder.categorization")))]),t("tag-selector",{attrs:{block:e.block}})],1)}),va=[];let _a=class extends(Object(C["c"])(E["a"])){};Object(m["__decorate"])([Object(x["b"])()],_a.prototype,"block",void 0),_a=Object(m["__decorate"])([Object(x["a"])({})],_a);var ga=_a,ma=ga,ka=Object(P["a"])(ma,ha,va,!1,null,null,null),ya=(ka.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"contact-property-editor",attrs:{"data-cy":"contact-property--editor"}},[t("div",{staticClass:"form-group"},[t("label",{staticClass:"text-primary"},[e._v(e._s(e._f("trans")("flow-builder.action-label")))]),t("p",[e._v(e._s(e._f("trans")("flow-builder.contact-property-action-hint")))]),t("div",{staticClass:"form-group"},[t("div",{staticClass:"custom-control custom-radio"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.propertyAction,expression:"propertyAction"}],staticClass:"custom-control-input",attrs:{id:"setProp",type:"radio",name:"contactPropAction","data-cy":"set-contact-property--radio"},domProps:{value:e.PROPERTY_ACTION.SET,checked:e._q(e.propertyAction,e.PROPERTY_ACTION.SET)},on:{change:function(t){e.propertyAction=e.PROPERTY_ACTION.SET}}}),t("label",{staticClass:"custom-control-label font-weight-normal",attrs:{for:"setProp"}},[e._v(" "+e._s(e._f("trans")("flow-builder.set-contact-property"))+" ")])]),t("div",{staticClass:"custom-control custom-radio"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.propertyAction,expression:"propertyAction"}],staticClass:"custom-control-input",attrs:{id:"clearProp",type:"radio",name:"contactPropAction","data-cy":"clear-contact-property--radio"},domProps:{value:e.PROPERTY_ACTION.CLEAR,checked:e._q(e.propertyAction,e.PROPERTY_ACTION.CLEAR)},on:{change:function(t){e.propertyAction=e.PROPERTY_ACTION.CLEAR}}}),t("label",{staticClass:"custom-control-label font-weight-normal",attrs:{for:"clearProp"}},[e._v(" "+e._s(e._f("trans")("flow-builder.clear-contact-property"))+" ")])])]),t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/config/set_contact_property/0/property_key`},scopedSlots:e._u([{key:"input-control",fn:function(o){let{isValid:i}=o;return[t("div",{staticClass:"block-contact-property-key"},[t("text-editor",{attrs:{label:e._f("trans")("flow-builder.contact-property-label"),"label-class":"font-weight-bold",placeholder:e._f("trans")("flow-builder.enter-contact-property-label"),"data-cy":"contact-property-key--input","valid-state":i},model:{value:e.propertyKey,callback:function(t){e.propertyKey=t},expression:"propertyKey"}})],1)]}}])}),e.propertyAction===e.PROPERTY_ACTION.SET?t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/config/set_contact_property/0/property_value`},scopedSlots:e._u([{key:"input-control",fn:function(o){let{isValid:i}=o;return[t("expression-input",{attrs:{label:e._f("trans")("flow-builder.value-expression"),placeholder:e._f("trans")("flow-builder.enter-expression"),"label-class":"font-weight-bold","current-expression":e.propertyValue,"valid-state":i,"data-cy":"contact-property-value--expression-input"},on:{commitExpressionChange:e.updatePropertyValue}})]}}],null,!1,2395683263)}):e._e()],1)])}),ja=[];const Oa=Object(ae["e"])("flow"),wa="@(null)",Ca="";let xa=class extends(Object(C["c"])(E["a"])){constructor(){super(...arguments),this.PROPERTY_ACTION={SET:"set",CLEAR:"clear"}}created(){void 0===this.propertyKey&&(this.propertyKey=null)}get propertyAction(){return this.propertyValue===wa?this.PROPERTY_ACTION.CLEAR:this.PROPERTY_ACTION.SET}set propertyAction(e){e===this.PROPERTY_ACTION.CLEAR?this.updatePropertyValue(wa):this.updatePropertyValue(Ca)}get firstProperty(){return Object(y["first"])(this.block.config.set_contact_property)}get propertyKey(){var e;return null===(e=this.firstProperty)||void 0===e?void 0:e.property_key}get propertyValue(){var e,t;return null!==(t=null===(e=this.firstProperty)||void 0===e?void 0:e.property_value)&&void 0!==t?t:Ca}updatePropertyValue(e){this.block_setContactPropertyValueOnIndex({blockId:this.block.uuid,index:0,propertyValue:e})}set propertyKey(e){this.block_setContactPropertyKeyOnIndex({blockId:this.block.uuid,index:0,propertyKey:""===e||void 0===e?null:e})}};Object(m["__decorate"])([Object(x["b"])()],xa.prototype,"block",void 0),Object(m["__decorate"])([Oa.Action],xa.prototype,"block_setContactPropertyKeyOnIndex",void 0),Object(m["__decorate"])([Oa.Mutation],xa.prototype,"block_updateConfigByPath",void 0),Object(m["__decorate"])([Oa.Action],xa.prototype,"block_setContactPropertyValueOnIndex",void 0),xa=Object(m["__decorate"])([Object(x["a"])({})],xa);var Ea=xa,Ia=Ea,Ba=Object(P["a"])(Ia,ya,ja,!1,null,null,null),Sa=(Ba.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return e.hasIvr?t("div",{staticClass:"end-recording-digits-editor"},[t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/config/ivr/end_recording_digits`},scopedSlots:e._u([{key:"input-control",fn:function(o){let{isValid:i}=o;return[t("keypad-digits-selector",{attrs:{label:e._f("trans")("flow-builder.end-recording-by-pressing"),placeholder:e._f("trans")("flow-builder.enter-value"),"valid-state":i,"data-cy":"end-recording-digit--selector"},model:{value:e.endRecordingDigits,callback:function(t){e.endRecordingDigits=t},expression:"endRecordingDigits"}})]}}],null,!1,451136046)})],1):e._e()}),Pa=[];let Ma=class extends(Object(C["c"])(E["a"])){get endRecordingDigits(){var e,t,o,i;return null!==(i=null===(o=null===(t=null===(e=this.block)||void 0===e?void 0:e.config)||void 0===t?void 0:t.ivr)||void 0===o?void 0:o.end_recording_digits)&&void 0!==i?i:""}set endRecordingDigits(e){this.$emit("commitEndRecordingDigitsChange",e)}};Object(m["__decorate"])([Object(x["b"])({type:Boolean,default:!0})],Ma.prototype,"hasIvr",void 0),Object(m["__decorate"])([Object(x["b"])({type:Object,required:!0})],Ma.prototype,"block",void 0),Ma=Object(m["__decorate"])([Object(x["a"])({})],Ma);var Fa=Ma,Ta=Fa,Aa=Object(P["a"])(Ta,Sa,Pa,!1,null,null,null),Ra=(Aa.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"exit-semantic-label-editor"},[t("text-editor",{attrs:{"is-editable":e.isEditable,label:e._f("trans")("flow-builder.block-exit-semantic-label"),placeholder:e._f("trans")("flow-builder.enter-block-exit-semantic-label")},model:{value:e.semanticLabel,callback:function(t){e.semanticLabel=t},expression:"semanticLabel"}})],1)}),Va=[];let La=class extends(Object(C["c"])(E["a"])){get semanticLabel(){var e;return null!==(e=this.exit.semantic_label)&&void 0!==e?e:""}set semanticLabel(e){this.exit.semantic_label=e,this.$emit("commitSemanticLabel",e)}};Object(m["__decorate"])([Object(x["b"])({type:Boolean,default:!0})],La.prototype,"isEditable",void 0),Object(m["__decorate"])([Object(x["b"])({type:Object,required:!0})],La.prototype,"exit",void 0),La=Object(m["__decorate"])([Object(x["a"])({})],La);var Na=La,Da=Na,$a=Object(P["a"])(Da,Ra,Va,!1,null,null,null),Ua=($a.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"generic-contact-property-editor",attrs:{"data-cy":"generic-contact-property--editor"}},[t("hr"),t("label",{staticClass:"text-primary"},[e._v(e._s(e._f("trans")("flow-builder.contact-properties")))]),t("div",{staticClass:"custom-control custom-checkbox"},[t("input",{staticClass:"custom-control-input",attrs:{id:"setContactProperty",type:"checkbox",name:"setContactProperty","data-cy":"set-contact-property--checkbox"},domProps:{value:e.shouldSetContactProperty,checked:e.shouldSetContactProperty},on:{change:e.toggleSetContactProperty}}),t("label",{staticClass:"custom-control-label font-weight-normal",attrs:{for:"setContactProperty"}},[e._v(" "+e._s(e._f("trans")("flow-builder.set-contact-property-with-response"))+" ")])]),e.shouldSetContactProperty?t("div",{staticClass:"form-group"},[t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/config/set_contact_property/0/property_key`},scopedSlots:e._u([{key:"input-control",fn:function(o){let{isValid:i}=o;return[t("div",{staticClass:"block-contact-property-key",attrs:{"data-cy":"contact-property--selector"}},[e.hasSubscriberPropertyFields?t("div",[t("label",{attrs:{for:"contact-property-selector"}},[e._v(e._s(e.trans("flow-builder.property")))]),t("vue-multiselect",{attrs:{id:"contact-property-selector","track-by":"id",label:"display_label",placeholder:e._f("trans")("flow-builder.select-a-property"),options:e.subscriberPropertyFieldsForSelector,multiple:!1,"show-labels":!1,searchable:!0},model:{value:e.flowSelectedContactPropertyField,callback:function(t){e.flowSelectedContactPropertyField=t},expression:"flowSelectedContactPropertyField"}})],1):t("text-editor",{attrs:{value:e.propertyKey,label:e._f("trans")("flow-builder.property"),"label-class":"",placeholder:e._f("trans")("flow-builder.enter-contact-property-label"),"valid-state":i},on:{input:e.updateFirstContactPropertyKey}})],1)]}}],null,!1,1440980758)}),null===e.flowSelectedContactPropertyField||e.forceUsingBlockValue?e._e():[t("label",[e._v(e._s(e._f("trans")("flow-builder.value")))]),e.isBlockInteractive?t("div",{staticClass:"form-group"},[e.disableExpressionInput?e._e():t("div",{staticClass:"custom-control custom-radio"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.propertyValueAction,expression:"propertyValueAction"}],staticClass:"custom-control-input",attrs:{id:"setProp",type:"radio",name:"contactPropAction","data-cy":"set-contact-property--from-current-block-response"},domProps:{value:e.PROPERTY_VALUE_ACTION.FROM_CURRENT_BLOCK_RESPONSE,checked:e._q(e.propertyValueAction,e.PROPERTY_VALUE_ACTION.FROM_CURRENT_BLOCK_RESPONSE)},on:{change:function(t){e.propertyValueAction=e.PROPERTY_VALUE_ACTION.FROM_CURRENT_BLOCK_RESPONSE}}}),t("label",{staticClass:"custom-control-label font-weight-normal",attrs:{for:"setProp"}},[e._v(" "+e._s(e._f("trans")("flow-builder.entry-from-this-block"))+" ")])]),e.propertyValueAction===e.PROPERTY_VALUE_ACTION.FROM_CURRENT_BLOCK_RESPONSE?e._t("entry-from-this-block"):e._e(),e.disableExpressionInput?e._e():t("div",{staticClass:"custom-control custom-radio"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.propertyValueAction,expression:"propertyValueAction"}],staticClass:"custom-control-input",attrs:{id:"clearProp",type:"radio",name:"contactPropAction","data-cy":"set-contact-property--open-expression"},domProps:{value:e.PROPERTY_VALUE_ACTION.OPEN_EXPRESSION,checked:e._q(e.propertyValueAction,e.PROPERTY_VALUE_ACTION.OPEN_EXPRESSION)},on:{change:function(t){e.propertyValueAction=e.PROPERTY_VALUE_ACTION.OPEN_EXPRESSION}}}),t("label",{staticClass:"custom-control-label font-weight-normal",attrs:{for:"clearProp"}},[e._v(" "+e._s(e._f("trans")("flow-builder.expression"))+" ")])])],2):e._e(),e.shouldUseOpenExpression?[t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/config/set_contact_property/0/property_value`},scopedSlots:e._u([{key:"input-control",fn:function(o){let{isValid:i}=o;return[t("expression-input",{staticClass:"mb-1",attrs:{label:"",placeholder:e._f("trans")("flow-builder.enter-expression"),"current-expression":e.propertyValue,"valid-state":i,"data-cy":"contact-property--expression-input"},on:{commitExpressionChange:e.updateFirstContactPropertyValue}})]}}],null,!1,320085298)}),t("div",{staticClass:"small"},[e._v(" "+e._s(e.trans("flow-builder.hint-to-set-contact-prop-by-expression"))+" ")])]:e._e()]],2):e._e()])}),Wa=[],Ha=o("6df9");const za=Object(ae["e"])("flow"),Ga="",qa="@block.value";let Ka=class extends(Object(C["c"])(E["a"])){constructor(){super(...arguments),this.PROPERTY_VALUE_ACTION={OPEN_EXPRESSION:"openExpression",FROM_CURRENT_BLOCK_RESPONSE:"fromCurrentBlockResponse"},this.CREATE_CONTACT_PROPERTY_OPTION={id:"confirm_contact_property_creation",name:"confirm_contact_property_creation",display_label:"+ "+this.trans("flow-builder.new-property"),data_type:"confirm_contact_property_creation"}}created(){void 0===this.propertyValue&&(this.isBlockInteractive?this.propertyValue=qa:this.propertyValue=Ga)}get isBlockInteractive(){return Object(Ha["c"])(this.block)}get shouldSetContactProperty(){return Object(y["has"])(this.block.config,"set_contact_property")}set shouldSetContactProperty(e){var t,o;if(e){let e;e=this.forceUsingBlockValue?qa:this.shouldUseOpenExpression?Ga:null!==(t=this.propertyValue)&&void 0!==t?t:"",this.block_setContactPropertyOnIndex({blockId:this.block.uuid,index:0,propertyKey:null!==(o=this.propertyKey)&&void 0!==o?o:"",propertyValue:e})}else this.block_removeConfigByKey({blockId:this.block.uuid,key:"set_contact_property"})}get propertyValueAction(){const e=this.isBlockInteractive,t=this.disableExpressionInput||this.propertyValue===qa;return e&&t||this.forceUsingBlockValue?this.PROPERTY_VALUE_ACTION.FROM_CURRENT_BLOCK_RESPONSE:this.PROPERTY_VALUE_ACTION.OPEN_EXPRESSION}set propertyValueAction(e){e===this.PROPERTY_VALUE_ACTION.FROM_CURRENT_BLOCK_RESPONSE||this.forceUsingBlockValue?(this.$emit("updateShouldUseCurrentBlockResponse",!0),this.updateFirstContactPropertyValue(qa)):(this.$emit("updateShouldUseCurrentBlockResponse",!1),this.updateFirstContactPropertyValue(Ga))}get shouldUseOpenExpression(){return this.propertyValueAction===this.PROPERTY_VALUE_ACTION.OPEN_EXPRESSION}updateFirstContactPropertyKey(e){this.block_setContactPropertyKeyOnIndex({blockId:this.block.uuid,index:0,propertyKey:e})}updateFirstContactPropertyValue(e){this.propertyValue=e,this.block_setContactPropertyValueOnIndex({blockId:this.block.uuid,index:0,propertyValue:e})}get propertyKey(){var e,t;return null!==(t=null===(e=this.block.config.set_contact_property)||void 0===e?void 0:e[0].property_key)&&void 0!==t?t:null}get propertyValue(){var e,t;return null!==(t=null===(e=this.block.config.set_contact_property)||void 0===e?void 0:e[0].property_value)&&void 0!==t?t:null}set propertyValue(e){this.block_setContactPropertyValueOnIndex({blockId:this.block.uuid,index:0,propertyValue:null!==e&&void 0!==e?e:""})}get flowSelectedContactPropertyField(){const e=Object(y["find"])(this.subscriberPropertyFields,e=>e.name===this.propertyKey);return null!==e&&void 0!==e?e:null}set flowSelectedContactPropertyField(e){var t;(null===e||void 0===e?void 0:e.name)!==this.CREATE_CONTACT_PROPERTY_OPTION.name?((null===(t=this.flowSelectedContactPropertyField)||void 0===t?void 0:t.data_type)!==(null===e||void 0===e?void 0:e.data_type)&&this.$emit("changeContactPropertyType"),this.updateFirstContactPropertyKey(null===e||void 0===e?void 0:e.name)):this.$emit("onCreateContactPropertySelected")}get hasSubscriberPropertyFields(){return!Object(y["isEmpty"])(this.subscriberPropertyFields)}get subscriberPropertyFieldsForSelector(){const e=Object(y["map"])(this.subscriberPropertyFields,e=>{let t;return t=!(""!==this.propertyValue&&!this.forceUsingBlockValue)||this.subscriberPropertyFieldDataTypesMapping[e.data_type].includes(this.block.type),{...e,$isDisabled:!t}});return this.showCreateContactPropertyOption&&e.push({...this.CREATE_CONTACT_PROPERTY_OPTION,$isDisabled:!1}),e}toggleSetContactProperty(){this.shouldSetContactProperty=!this.shouldSetContactProperty,this.$emit("toggleSetContactProperty",this.shouldSetContactProperty)}};Object(m["__decorate"])([Object(x["b"])()],Ka.prototype,"block",void 0),Object(m["__decorate"])([Object(x["b"])({default:!1})],Ka.prototype,"disableExpressionInput",void 0),Object(m["__decorate"])([Object(x["b"])({default:!1})],Ka.prototype,"forceUsingBlockValue",void 0),Object(m["__decorate"])([Object(x["b"])({default:!1})],Ka.prototype,"showCreateContactPropertyOption",void 0),Object(m["__decorate"])([za.Mutation],Ka.prototype,"block_updateConfigByPath",void 0),Object(m["__decorate"])([za.Mutation],Ka.prototype,"block_updateVendorMetadataByPath",void 0),Object(m["__decorate"])([za.Mutation],Ka.prototype,"block_removeConfigByKey",void 0),Object(m["__decorate"])([za.Action],Ka.prototype,"block_setContactPropertyKeyOnIndex",void 0),Object(m["__decorate"])([za.Action],Ka.prototype,"block_setContactPropertyValueOnIndex",void 0),Object(m["__decorate"])([za.Action],Ka.prototype,"block_setContactPropertyOnIndex",void 0),Object(m["__decorate"])([ae["b"]],Ka.prototype,"subscriberPropertyFields",void 0),Object(m["__decorate"])([ae["b"]],Ka.prototype,"subscriberPropertyFieldDataTypesMapping",void 0),Ka=Object(m["__decorate"])([Object(x["a"])({components:{VueMultiselect:Ae.a}})],Ka);var Za=Ka,Xa=Za,Ja=Object(P["a"])(Xa,Ua,Wa,!1,null,null,null),Ya=(Ja.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"group-membership-editor",attrs:{"data-cy":"group-membership--editor"}},[t("div",{staticClass:"form-group"},[t("label",{staticClass:"text-primary"},[e._v(e._s(e.trans("flow-builder.action-label")))]),t("p",[e._v(e._s(e.trans("flow-builder.group-membership-action-hint")))]),t("div",{staticClass:"form-group"},e._l(e.availableMembershipActions,(function(o){return t("div",{key:o.id,staticClass:"custom-control custom-radio"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.membershipAction,expression:"membershipAction"}],staticClass:"custom-control-input",attrs:{id:o.id,type:"radio",name:"groupMembershipAction","data-cy":o.id+"--radio"},domProps:{value:o.value,checked:e._q(e.membershipAction,o.value)},on:{change:function(t){e.membershipAction=o.value}}}),t("label",{staticClass:"custom-control-label font-weight-normal",attrs:{for:o.id}},[e._v(" "+e._s(o.label)+" ")])])})),0),t("ValidationMessage",{attrs:{"message-key":`block/${e.block.uuid}/config/groups`},scopedSlots:e._u([{key:"input-control",fn:function(o){let{isValid:i}=o;return[e.isGroupListVisible?t("vue-multiselect",{class:{invalid:!1===i},attrs:{"is-loading":e.hasGroupsLoading,options:e.groupOptions,taggable:!e.availableGroups,multiple:!0,"show-labels":!1,"track-by":"group_key",label:"group_name","data-cy":"group-membership--selector"},on:{"seach-change":e.onSearchChange,tag:e.onGroupAdd},model:{value:e.selectedGroups,callback:function(t){e.selectedGroups=t},expression:"selectedGroups"}}):e._e()]}}])})],1)])}),Qa=[];const es=Object(ae["e"])("flow");var ts;(function(e){e["ADD"]="add",e["REMOVE"]="remove",e["CLEAR"]="clear"})(ts||(ts={}));let os=class extends(Object(C["c"])(E["a"])){get userAddedGroups(){var e,t;return null!==(t=null===(e=this.block.vendor_metadata)||void 0===e?void 0:e.floip.ui_metadata.user_added_groups)&&void 0!==t?t:[]}set userAddedGroups(e){this.block_updateVendorMetadataByPath({blockId:this.block.uuid,path:"floip.ui_metadata.user_added_groups",value:e})}get groupOptions(){return Object(y["unionWith"])(this.availableGroups,this.userAddedGroups,y["isEqual"])}get availableMembershipActions(){return[{id:"addGroup",label:this.trans("flow-builder.set-group-membership"),value:ts.ADD},{id:"removeGroup",label:this.trans("flow-builder.remove-group-membership"),value:ts.REMOVE},{id:"clearGroup",label:this.trans("flow-builder.clear-group-membership"),value:ts.CLEAR}]}get membershipAction(){const{clear:e,is_member:t}=this.block.config;return!0===e?ts.CLEAR:!0===t?ts.ADD:ts.REMOVE}set membershipAction(e){if(e===ts.CLEAR)this.updateBlockConfig({clear:!0,is_member:void 0});else{if(e!==ts.ADD&&e!==ts.REMOVE)throw new Error("Unknown membership action "+e);this.updateBlockConfig({clear:!1,is_member:e===ts.ADD})}}get isGroupListVisible(){return this.membershipAction!==ts.CLEAR}get selectedGroups(){var e,t;return null!==(t=null===(e=this.block.config)||void 0===e?void 0:e.groups)&&void 0!==t?t:[]}set selectedGroups(e){this.updateBlockConfig({groups:e})}updateBlockConfig(e){Object.entries(e).forEach(e=>{let[t,o]=e;this.block_updateConfigByPath({blockId:this.block.uuid,path:t,value:o})})}onSearchChange(e){this.$emit("group-search",e)}onGroupAdd(e){const t={group_key:e,group_name:e};this.userAddedGroups=[...this.userAddedGroups,t],this.selectedGroups=[...this.selectedGroups,t]}};Object(m["__decorate"])([Object(x["b"])()],os.prototype,"block",void 0),Object(m["__decorate"])([Object(x["b"])()],os.prototype,"availableGroups",void 0),Object(m["__decorate"])([Object(x["b"])({type:Boolean,default:!1})],os.prototype,"hasGroupsLoading",void 0),Object(m["__decorate"])([es.Mutation],os.prototype,"block_updateConfigByPath",void 0),Object(m["__decorate"])([es.Mutation],os.prototype,"block_updateVendorMetadataByPath",void 0),os=Object(m["__decorate"])([Object(x["a"])({components:{VueMultiselect:Ae.a}})],os);var is=os,as=is,ss=(o("1797"),Object(P["a"])(as,Ya,Qa,!1,null,"3b1ca92b",null)),rs=(ss.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"label-editor",attrs:{"data-cy":"label--editor"}},[t("section",{staticClass:"mb-3"},[t("label",{staticClass:"text-primary"},[e._v(e._s(e._f("trans")("flow-builder.title")))]),t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/label`},scopedSlots:e._u([{key:"input-control",fn:function(o){let{isValid:i}=o;return[t("div",{staticClass:"d-flex"},[t("text-editor",{staticClass:"w-100",attrs:{label:"",placeholder:e._f("trans")("flow-builder.enter-title"),"valid-state":i},model:{value:e.blockLabel,callback:function(t){e.blockLabel=t},expression:"blockLabel"}}),t("span",{staticClass:"btn btn-outline-primary btn-xs align-self-center ml-2",on:{click:e.emitGearClickedEvent}},[t("font-awesome-icon",{staticClass:"fa-btn",attrs:{icon:["fac","settings"]}})],1)],1)]}}])})],1)])}),ns=[];const cs=Object(ae["e"])("flow");let ls=class extends(Object(C["c"])(E["a"])){get blockLabel(){return this.block.label}set blockLabel(e){this.block_setLabel({blockId:this.block.uuid,value:e})}emitGearClickedEvent(){this.$emit("gearClicked")}};Object(m["__decorate"])([Object(x["b"])()],ls.prototype,"block",void 0),Object(m["__decorate"])([cs.Action],ls.prototype,"block_setLabel",void 0),ls=Object(m["__decorate"])([x["a"]],ls);var ds=ls,us=ds,ps=Object(P["a"])(us,rs,ns,!1,null,null,null),bs=(ps.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return e.hasIvr?t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/config/ivr/max_digits`},scopedSlots:e._u([{key:"input-control",fn:function(o){let{isValid:i}=o;return[t("div",{staticClass:"max-digit-editor",attrs:{"data-cy":"max-digit--editor"}},[t("numeric-editor",{attrs:{"regex-numeric-filtering":"[0-9]",label:e._f("trans")("flow-builder.maximum-digits"),placeholder:e._f("trans")("flow-builder.enter-value"),"tooltip-hint":e._f("trans")("flow-builder.max-digits-help-text"),"valid-state":i},model:{value:e.maxDigits,callback:function(t){e.maxDigits=e._n(t)},expression:"maxDigits"}})],1)]}}],null,!1,560033197)}):e._e()}),fs=[];let hs=class extends(Object(C["c"])(E["a"])){get maxDigits(){return Object(y["get"])(this.block,"config.ivr.max_digits","")}set maxDigits(e){this.$emit("commitMaxDigitsChange",e)}};Object(m["__decorate"])([Object(x["b"])({type:Object,required:!0})],hs.prototype,"block",void 0),Object(m["__decorate"])([Object(x["b"])({type:Boolean,default:!0})],hs.prototype,"hasIvr",void 0),hs=Object(m["__decorate"])([Object(x["a"])({})],hs);var vs=hs,_s=vs,gs=Object(P["a"])(_s,bs,fs,!1,null,null,null),ms=(gs.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return e.hasIvr?t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/config/ivr/max_duration_seconds`},scopedSlots:e._u([{key:"input-control",fn:function(o){let{isValid:i}=o;return[t("numeric-editor",{staticClass:"max-duration-seconds-editor",attrs:{"regex-numeric-filtering":"[0-9]",label:e.trans("flow-builder.max-duration-in-seconds"),placeholder:e.trans("flow-builder.enter-value"),"valid-state":i,"data-cy":"max-duration--input"},model:{value:e.duration,callback:function(t){e.duration=e._n(t)},expression:"duration"}})]}}],null,!1,1845588836)}):e._e()}),ks=[];let ys=class extends(Object(C["c"])(E["a"])){constructor(){super(...arguments),this.defaultMaxDuration=60}get duration(){return Object(y["get"])(this.block,"config.ivr.max_duration_seconds","")}set duration(e){this.$emit("commitMaxDurationChange",e)}created(){this.duration||(this.duration=this.defaultMaxDuration)}};Object(m["__decorate"])([Object(x["b"])({type:Object,required:!0})],ys.prototype,"block",void 0),Object(m["__decorate"])([Object(x["b"])({type:Boolean,default:!0})],ys.prototype,"hasIvr",void 0),ys=Object(m["__decorate"])([Object(x["a"])({})],ys);var js=ys,Os=js,ws=Object(P["a"])(Os,ms,ks,!1,null,null,null),Cs=(ws.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/config/maximum_choices`},scopedSlots:e._u([{key:"input-control",fn:function(o){let{isValid:i}=o;return[t("div",{staticClass:"maximum-choices-editor"},[t("numeric-editor",{attrs:{"data-cy":"maximum-choices--editor","regex-numeric-filtering":"[0-9]",label:e._f("trans")("flow-builder.maximum-choices"),placeholder:e._f("trans")("flow-builder.enter-value"),"valid-state":i},model:{value:e.maxChoices,callback:function(t){e.maxChoices=e._n(t)},expression:"maxChoices"}})],1)]}}])})}),xs=[],Es=o("5801");const Is=Object(ae["e"])("flow/"+Es["a"]);Object(ae["e"])("builder");let Bs=class extends(Object(C["c"])(E["a"])){mounted(){}get maxChoices(){const e=this.block.config.maximum_choices;return Object(y["isNumber"])(e)?e:""}set maxChoices(e){const{uuid:t}=this.block;this.setMaxChoices({blockId:t,value:Object(y["isNumber"])(e)?e:void 0})}};Object(m["__decorate"])([Object(x["b"])()],Bs.prototype,"block",void 0),Object(m["__decorate"])([Is.Action],Bs.prototype,"setMaxChoices",void 0),Bs=Object(m["__decorate"])([Object(x["a"])({})],Bs);var Ss=Bs,Ps=Ss,Ms=Object(P["a"])(Ps,Cs,xs,!1,null,null,null),Fs=(Ms.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/config/validation_maximum`},scopedSlots:e._u([{key:"input-control",fn:function(o){let{isValid:i}=o;return[t("div",{staticClass:"maximum-numeric-editor",attrs:{"data-cy":"maximum-numeric--editor"}},[t("numeric-editor",{attrs:{"regex-numeric-filtering":"[0-9]",label:e._f("trans")("flow-builder.maximum-value-(inclusive)"),placeholder:e._f("trans")("flow-builder.enter-value"),"valid-state":i},model:{value:e.maxValue,callback:function(t){e.maxValue=e._n(t)},expression:"maxValue"}})],1)]}}])})}),Ts=[];let As=class extends(Object(C["c"])(E["a"])){get maxValue(){return this.block.config.validation_maximum}set maxValue(e){this.$emit("commitValidationMaximumChange",e)}};Object(m["__decorate"])([Object(x["b"])()],As.prototype,"block",void 0),As=Object(m["__decorate"])([Object(C["b"])({})],As);var Rs=As,Vs=Rs,Ls=Object(P["a"])(Vs,Fs,Ts,!1,null,null,null),Ns=(Ls.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/config/minimum_choices`},scopedSlots:e._u([{key:"input-control",fn:function(o){let{isValid:i}=o;return[t("div",{staticClass:"minimum-choices-editor"},[t("numeric-editor",{attrs:{"data-cy":"minimum-choices--editor","regex-numeric-filtering":"[0-9]",label:e._f("trans")("flow-builder.minimum-choices"),placeholder:e._f("trans")("flow-builder.enter-value"),"valid-state":i},model:{value:e.minChoices,callback:function(t){e.minChoices=e._n(t)},expression:"minChoices"}})],1)]}}])})}),Ds=[];const $s=Object(ae["e"])("flow/"+Es["a"]);Object(ae["e"])("builder");let Us=class extends(Object(C["c"])(E["a"])){mounted(){}get minChoices(){const e=this.block.config.minimum_choices;return Object(y["isNumber"])(e)?e:""}set minChoices(e){const{uuid:t}=this.block;this.setMinChoices({blockId:t,value:Object(y["isNumber"])(e)?e:void 0})}};Object(m["__decorate"])([Object(x["b"])()],Us.prototype,"block",void 0),Object(m["__decorate"])([$s.Action],Us.prototype,"setMinChoices",void 0),Us=Object(m["__decorate"])([Object(x["a"])({})],Us);var Ws=Us,Hs=Ws,zs=Object(P["a"])(Hs,Ns,Ds,!1,null,null,null),Gs=(zs.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/config/validation_minimum`},scopedSlots:e._u([{key:"input-control",fn:function(o){let{isValid:i}=o;return[t("div",{staticClass:"minimum-numeric-editor",attrs:{"data-cy":"minimum-numeric--editor"}},[t("numeric-editor",{attrs:{"regex-numeric-filtering":"[0-9]",label:e._f("trans")("flow-builder.minimum-value-(inclusive)"),placeholder:e._f("trans")("flow-builder.enter-value"),"valid-state":i},model:{value:e.minValue,callback:function(t){e.minValue=e._n(t)},expression:"minValue"}})],1)]}}])})}),qs=[];let Ks=class extends(Object(C["c"])(E["a"])){get minValue(){return this.block.config.validation_minimum}set minValue(e){this.$emit("commitValidationMinimumChange",e)}};Object(m["__decorate"])([Object(x["b"])()],Ks.prototype,"block",void 0),Ks=Object(m["__decorate"])([Object(C["b"])({})],Ks);var Zs=Ks,Xs=Zs,Js=Object(P["a"])(Xs,Gs,qs,!1,null,null,null),Ys=(Js.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"name-editor mt-3",attrs:{"data-cy":"name--editor"}},[t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/name`},scopedSlots:e._u([{key:"input-control",fn:function(o){let{isValid:i}=o;return[e.editBlockName||!1===i?t("div",[t("h6",[e._v(e._s(e.trans("flow-builder.edit-block-code")))]),t("div",{staticClass:"d-flex"},[t("text-editor",{staticClass:"w-100",attrs:{label:"",placeholder:e.trans("flow-builder.enter-block-code"),"valid-state":i,"data-cy":"name-editor--input"},on:{keydown:e.filterName},model:{value:e.blockName,callback:function(t){e.blockName=t},expression:"blockName"}}),t("span",{staticClass:"btn btn-primary btn-xs align-self-center ml-2",attrs:{"data-cy":"name-editor--save-btn"},on:{click:e.handleCompleteEditing}},[t("font-awesome-icon",{staticClass:"fa-btn",attrs:{icon:["fas","check"]}})],1)],1)]):t("div",{staticClass:"d-flex justify-content-between"},[t("div",{staticClass:"block-code align-self-center"},[t("h6",{staticClass:"d-inline"},[e._v(" "+e._s(e.trans("flow-builder.code"))+": ")]),t("span",[e._v(" "+e._s(e.blockName)+" ")])]),t("span",{staticClass:"btn btn-primary btn-xs align-self-baseline ml-2",attrs:{"data-cy":"name-editor--edit-btn"},on:{click:function(t){e.editBlockName=!0}}},[t("font-awesome-icon",{staticClass:"fa-btn",attrs:{icon:["far","edit"]}})],1)])]}}])})],1)}),Qs=[];const er=Object(f["defineComponent"])({name:"NameEditor",mixins:[E["a"]],props:{block:{type:Object,required:!0}},computed:{blockName:{get(){return this.block.name},set(e){this.block_setName({blockId:this.block.uuid,value:e,lockAutoUpdate:!0})}},editBlockName:{get(){var e,t;return null!==(t=null===(e=this.block.vendor_metadata)||void 0===e?void 0:e.floip.ui_metadata.is_block_name_editable)&&void 0!==t&&t},set(e){this.block_updateVendorMetadataByPath({blockId:this.block.uuid,path:"floip.ui_metadata.is_block_name_editable",value:e})}}},methods:{...Object(h["b"])({block_setName:"flow/block_setName",block_resetName:"flow/block_resetName"}),...Object(h["d"])({block_updateVendorMetadataByPath:"flow/block_updateVendorMetadataByPath"}),filterName(e){this.editBlockName=!0,e.key.match(/\W+|Enter/g)&&e.preventDefault()},handleCompleteEditing(){this.editBlockName=!1,""===this.blockName&&this.block_resetName({blockId:this.block.uuid})}}});var tr=er,or=tr,ir=(o("ec49"),Object(P["a"])(or,Ys,Qs,!1,null,"0916813e",null)),ar=(ir.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return e.isFeatureCallToRecordEnabled?t("div",{staticClass:"phone-recorder"},[t("phone-recording-recorder-selector",{attrs:{"is-modal-visible":e.isRecorderSelectorVisible},on:{input:e.handleRecorderSelectionChanged},model:{value:e.callConfig,callback:function(t){e.callConfig=t},expression:"callConfig"}})],1):e._e()}),sr=[];let rr=class extends x["c"]{constructor(){super(...arguments),this.callConfig={}}handleRecorderSelectionChanged(){if(this.$store.commit("setAudioRecordingConfigVisibilityForSelectedBlock",{isVisible:!1}),null===this.callConfig.recorder)return;const e={key:this.recordingKey,description:this.callConfig.description,...this.callConfig.recorder};this.$store.dispatch("startAudioRecordingFor",e).finally(()=>this.$emit("finish"))}};Object(m["__decorate"])([Object(x["b"])({type:String,required:!0})],rr.prototype,"recordingKey",void 0),Object(m["__decorate"])([Object(ae["d"])(e=>{let{audio:{recording:{isRecorderSelectorVisible:t}}}=e;return t})],rr.prototype,"isRecorderSelectorVisible",void 0),Object(m["__decorate"])([ae["b"]],rr.prototype,"isFeatureCallToRecordEnabled",void 0),rr=Object(m["__decorate"])([Object(x["a"])({})],rr);var nr=rr,cr=nr,lr=Object(P["a"])(cr,ar,sr,!1,null,null,null),dr=(lr.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("b-modal",{staticClass:"phone-recording-recorder-selector",attrs:{size:"lg","no-close-on-backdrop":"","no-close-on-esc":"",title:e._f("trans")("flow-builder.select-a-caller-from-the-list-below"),visible:e.isModalVisible,"ok-title":e._f("trans")("flow-builder.call-this-phone-number"),"cancel-title":e._f("trans")("flow-builder.close")},on:{ok:e.handleModalClosed,cancel:e.handleModalCancelled,close:e.handleModalCancelled}},[t("div",{staticClass:"call-to-record-modal-table-container"},[t("table",{staticClass:"table table-striped"},[t("thead",[t("tr",[t("th",{staticClass:"recorder-selector-field"}),t("th",[e._v(e._s(e._f("trans")("flow-builder.name")))]),t("th",[e._v(e._s(e._f("trans")("flow-builder.phone-number")))])])]),t("tbody",{attrs:{id:"call-to-record-modal-list"}},e._l(e.recorders,(function(o,i){return t("tr",{key:i,staticClass:"call-to-record-item"},[t("td",{staticClass:"recorder-selector-field"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedRecorder,expression:"selectedRecorder"}],attrs:{id:"call-to-record-caller-"+o.id,type:"radio","x-name":"calltorecord_caller_select"},domProps:{value:o,checked:e._q(e.selectedRecorder,o)},on:{change:function(t){e.selectedRecorder=o}}})]),t("td",[t("label",{attrs:{for:"call-to-record-caller-"+o.id},on:{click:function(t){return e.setSelectedRecorder(o)}}},[e._v(e._s(o.name))])]),t("td",[t("label",{attrs:{for:"call-to-record-caller-"+o.id},on:{click:function(t){return e.setSelectedRecorder(o)}}},[e._v(e._s(o.phone))])])])})),0)]),t("h4",[e._v(e._s(e._f("trans")("flow-builder.add-a-description-to-this-recording")))]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],staticClass:"form-control",attrs:{type:"text",rows:"2",placeholder:e._f("trans")("flow-builder.optional-description")},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}}),t("h4",[e._v(e._s(e._f("trans")("flow-builder.add-a-new-recorder")))]),t("table",{staticClass:"table"},[t("tbody",[t("tr",[t("td",{staticClass:"recorder-selector-field"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedRecorder,expression:"selectedRecorder"}],attrs:{id:"new_recorder_radio",type:"radio",name:"calltorecord_caller_select"},domProps:{value:e.draft,checked:e._q(e.selectedRecorder,e.draft)},on:{change:function(t){e.selectedRecorder=e.draft}}})]),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.draft.name,expression:"draft.name"}],staticClass:"form-control",attrs:{type:"text",placeholder:e._f("trans")("flow-builder.name")},domProps:{value:e.draft.name},on:{click:e.selectNewRecorder,input:function(t){t.target.composing||e.$set(e.draft,"name",t.target.value)}}})]),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.draft.phone,expression:"draft.phone"}],staticClass:"form-control",attrs:{type:"text",placeholder:e._f("trans")("flow-builder.phone-number")},domProps:{value:e.draft.phone},on:{click:e.selectNewRecorder,input:function(t){t.target.composing||e.$set(e.draft,"phone",t.target.value)}}})])])])])])])}),ur=[];let pr=class extends(Object(C["c"])(E["a"])){constructor(){super(...arguments),this.description=null,this.draft=null,this.selectedRecorder=null}created(){this.reset()}selectNewRecorder(){this.draft.isNew=!0,this.selectedRecorder=this.draft}setSelectedRecorder(e){this.selectedRecorder=e}reset(){this.draft={name:null,phone:null,isNew:!0},this.description=null,this.selectedRecorder=null}handleModalClosed(){const{description:e}=this,t=Object(y["clone"])(this.selectedRecorder);this.reset(),this.$emit("input",{value:t,recorder:t,description:e})}handleModalCancelled(){this.reset();const{description:e}=this,t=Object(y["clone"])(this.selectedRecorder);this.$emit("input",{value:t,recorder:t,description:e})}};Object(m["__decorate"])([Object(x["b"])({type:Boolean,required:!0})],pr.prototype,"isModalVisible",void 0),Object(m["__decorate"])([Object(ae["d"])(e=>{let{audio:{recording:{recorders:t}}}=e;return t})],pr.prototype,"recorders",void 0),pr=Object(m["__decorate"])([Object(x["a"])({components:{BModal:mo["a"]}})],pr);var br=pr,fr=br,hr=(o("f4bd"),Object(P["a"])(fr,dr,ur,!1,null,"0ed07710",null)),vr=(hr.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/semantic_label`},scopedSlots:e._u([{key:"input-control",fn:function(o){let{isValid:i}=o;return[t("div",{staticClass:"semantic-label-editor"},[t("text-editor",{attrs:{label:e._f("trans")("flow-builder.block-exit-semantic-label"),placeholder:e._f("trans")("flow-builder.enter-block-semantic-label"),"valid-state":i},model:{value:e.semanticLabel,callback:function(t){e.semanticLabel=t},expression:"semanticLabel"}})],1)]}}])})}),_r=[];const gr=Object(ae["e"])("flow");let mr=class extends(Object(C["c"])(E["a"])){get semanticLabel(){var e;return null!==(e=this.block.semantic_label)&&void 0!==e?e:""}set semanticLabel(e){this.block_setSemanticLabel({blockId:this.block.uuid,value:e})}};Object(m["__decorate"])([Object(x["b"])({type:Object,required:!0})],mr.prototype,"block",void 0),Object(m["__decorate"])([gr.Mutation],mr.prototype,"block_setSemanticLabel",void 0),mr=Object(m["__decorate"])([Object(x["a"])({})],mr);var kr=mr,yr=kr,jr=Object(P["a"])(yr,vr,_r,!1,null,null,null),Or=(jr.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"simplified-name-editor",attrs:{"data-cy":"simplified-name--editor"}},[t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/name`},scopedSlots:e._u([{key:"input-control",fn:function(o){let{isValid:i}=o;return[e.editBlockName||!1===i?t("div",[t("text-editor",{attrs:{label:"",placeholder:e.trans("flow-builder.enter-block-code"),"valid-state":i},on:{keydown:e.filterName},nativeOn:{mouseleave:function(t){return e.handleCompleteEditing.apply(null,arguments)}},model:{value:e.blockName,callback:function(t){e.blockName=t},expression:"blockName"}})],1):t("div",{staticClass:"block-code"},[t("div",{on:{mouseenter:e.activateEditing}},[e._v(" "+e._s(e.blockName)+" ")])])]}}])})],1)}),wr=[];const Cr=Object(ae["e"])("flow");let xr=class extends(Object(C["c"])(E["a"])){constructor(){super(...arguments),this.editBlockName=!1}get blockName(){return this.block.name}set blockName(e){this.block_setName({blockId:this.block.uuid,value:e,lockAutoUpdate:!0}),this.$emit("change")}updated(){""===this.blockName&&(this.editBlockName=!0)}filterName(e){this.activateEditing(),e.key.match(/\W+|Enter/g)&&e.preventDefault()}activateEditing(){this.editBlockName=!0}handleCompleteEditing(){this.editBlockName=!1,""===this.blockName&&this.block_resetName({blockId:this.block.uuid}),this.$emit("change")}};Object(m["__decorate"])([Object(x["b"])()],xr.prototype,"block",void 0),Object(m["__decorate"])([Cr.Action],xr.prototype,"block_setName",void 0),Object(m["__decorate"])([Cr.Action],xr.prototype,"block_resetName",void 0),xr=Object(m["__decorate"])([Object(x["a"])({})],xr);var Er=xr,Ir=Er,Br=(o("41e1"),Object(P["a"])(Ir,Or,wr,!1,null,"4bf9ccb6",null)),Sr=(Br.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/tags`},scopedSlots:e._u([{key:"input-control",fn:function(o){let{isValid:i}=o;return[t("div",{staticClass:"tag-selector",attrs:{"data-cy":"tag--selector"}},[e.noLabel?e._e():t("label",[e._v(e._s(e._f("trans")("flow-builder.tags-label")))]),t("vue-multiselect",{class:{invalid:!1===i},attrs:{"track-by":"name",label:"name",multiple:!0,placeholder:e._f("trans")("flow-builder.tags-selector-placeholder"),options:e.availableTagOptions,searchable:!0,"show-labels":!1,"close-on-select":!1,taggable:e.taggable,"tag-placeholder":e.taggable?e.trans("flow-builder.create-a-tag-prompt"):"",disabled:!e.isEditable},on:{tag:e.addTag},scopedSlots:e._u([{key:"clear",fn:function(){return[e.selectedTags.length?t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.trans("flow-builder.clear-all"),expression:"trans('flow-builder.clear-all')",modifiers:{hover:!0}}],staticClass:"multiselect__clear-all",on:{click:function(t){return e.clearAll()}}},[t("font-awesome-icon",{attrs:{icon:["fas","times-circle"]}})],1):e._e()]},proxy:!0},{key:"tag",fn:function(t){let{remove:o,option:i,search:a}=t;return[e._t("tag",null,{remove:o,option:i,search:a})]}}],null,!0),model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}})],1)]}}])})}),Pr=[];const Mr=Object(ae["e"])("flow"),Fr=Object(ae["e"])("builder");let Tr=class extends(Object(C["c"])(E["a"])){get selectedTags(){return this.stringListToOptions(this.block.tags||[])}set selectedTags(e){this.block_setTags({blockId:this.block.uuid,value:Object(y["map"])(e,"name")})}get availableTagOptions(){return this.stringListToOptions(this.blockTags)}stringListToOptions(e){return Object(y["map"])(Object(y["uniq"])(e),e=>({id:e,name:e}))}addTag(e){this.blockTags.push(e),this.block_addTag({blockId:this.block.uuid,value:e})}clearAll(){this.selectedTags=[]}};Object(m["__decorate"])([Object(x["b"])()],Tr.prototype,"block",void 0),Object(m["__decorate"])([Object(x["b"])({default:!0})],Tr.prototype,"taggable",void 0),Object(m["__decorate"])([Object(x["b"])({default:!1})],Tr.prototype,"noLabel",void 0),Object(m["__decorate"])([Fr.Getter],Tr.prototype,"isEditable",void 0),Object(m["__decorate"])([Mr.Mutation],Tr.prototype,"block_setTags",void 0),Object(m["__decorate"])([Mr.Mutation],Tr.prototype,"block_addTag",void 0),Object(m["__decorate"])([Object(ae["d"])(e=>{let{trees:{ui:{blockTags:t}}}=e;return t})],Tr.prototype,"blockTags",void 0),Tr=Object(m["__decorate"])([Object(x["a"])({components:{VueMultiselect:Ae.a}})],Tr);var Ar=Tr,Rr=Ar,Vr=(o("ac6d"),Object(P["a"])(Rr,Sr,Pr,!1,null,"9cda8d7e",null)),Lr=(Vr.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("ValidationMessage",{attrs:{"message-key":`block/${e.block.uuid}/config/accuracy_threshold_meters`},scopedSlots:e._u([{key:"input-control",fn:function(o){let{isValid:i}=o;return[t("div",{staticClass:"threshold-editor",attrs:{"data-cy":"accuracy-threshold--editor"}},[t("float-editor",{attrs:{min:0,"regex-float-filtering":"[0-9.,]",label:e._f("trans")("flow-builder.accuracy-threshold-in-meters"),placeholder:e._f("trans")("flow-builder.enter-value"),"valid-state":i},model:{value:e.threshold,callback:function(t){e.threshold=e._n(t)},expression:"threshold"}})],1)]}}])})}),Nr=[];let Dr=class extends(Object(C["c"])(E["a"])){constructor(){super(...arguments),this.defaultValue=5}get threshold(){return Object(y["get"])(this.block,"config.accuracy_threshold_meters",this.defaultValue)}set threshold(e){this.$emit("commitAccuracyThresholdMetersChange",e)}};Object(m["__decorate"])([Object(x["b"])({type:Object,required:!0})],Dr.prototype,"block",void 0),Dr=Object(m["__decorate"])([Object(x["a"])({})],Dr);var $r=Dr,Ur=$r,Wr=Object(P["a"])(Ur,Lr,Nr,!1,null,null,null),Hr=(Wr.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/config/accuracy_timeout_seconds`},scopedSlots:e._u([{key:"input-control",fn:function(o){let{isValid:i}=o;return[t("div",{staticClass:"timeout-editor",attrs:{"data-cy":"accuracy-timeout--editor"}},[t("numeric-editor",{attrs:{"regex-numeric-filtering":"[0-9]",label:e._f("trans")("flow-builder.accuracy-timeout-in-seconds"),placeholder:e._f("trans")("flow-builder.enter-value"),"valid-state":i},model:{value:e.timeout,callback:function(t){e.timeout=e._n(t)},expression:"timeout"}})],1)]}}])})}),zr=[];let Gr=class extends(Object(C["c"])(E["a"])){constructor(){super(...arguments),this.defaultValue=120}get timeout(){return Object(y["get"])(this.block,"config.accuracy_timeout_seconds",this.defaultValue)}set timeout(e){this.$emit("commitAccuracyTimeoutSecondsChange",e)}};Object(m["__decorate"])([Object(x["b"])({type:Object,required:!0})],Gr.prototype,"block",void 0),Gr=Object(m["__decorate"])([Object(x["a"])({})],Gr);var qr=Gr,Kr=qr,Zr=Object(P["a"])(Kr,Hr,zr,!1,null,null,null),Xr=(Zr.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"upload-monitor"},[e.hasProgress?t("div",{staticClass:"upload-monitor-progress"},[t("h6",[e._v(e._s(e._f("trans")("flow-builder.uploading"))+" "+e._s(e.upload.file.name))]),t("div",{staticClass:"progress"},[t("b-progress",{staticClass:"mb-3",attrs:{value:1*e.progress,"show-value":"",animated:""}})],1)]):e._e(),e.isFailure?t("p",{staticClass:"text-danger small"},[e._v(" "+e._s(e._f("trans")("flow-builder.error-uploading-file-try-again"))+" "),e.upload.message?t("span",{staticClass:"details"},[e._v("("+e._s(e.upload.message)+")")]):e._e()]):e._e(),e.hasProgress?e._e():e._t("default")],2)}),Jr=[],Yr=o("49f5"),Qr=o("bc3a"),en=o.n(Qr);const tn={UPLOADING:-1,UNINITIALIZED:0,SUCCESS:1,FAILURE:2};tn.UPLOADING,tn.UNINITIALIZED,tn.SUCCESS,tn.FAILURE;var on={namespaced:!0,state:{uploadProgressByKey:{},errorMessageByKey:{},uploadsById:{},uploadIdsByKey:{}},mutations:{setErrorMessage(e,t){let{errorMessageByKey:o}=e,{key:i,errorMessage:a}=t;f["default"].set(o,i,a)},setUploadProgress(e,t){let{uploadProgressByKey:o}=e,{key:i,uploadProgress:a}=t;f["default"].set(o,i,a)},setUploadStatusFor(e,t){let{uploadsById:o,uploadIdsByKey:i}=e,{file:a,key:s,status:r,progress:n,message:c,cancel:l}=t;const d=j.a.pick(a,["averageSpeed","currentSpeed","error","name","paused","relativePath","size","uniqueIdentifier"]);f["default"].set(o,d.uniqueIdentifier,{key:s,status:r,progress:n,message:c,cancel:l,file:d}),f["default"].set(i,s,d.uniqueIdentifier)}},actions:{uploadFile(e,t){let{commit:o}=e,{key:i,uploadUrl:a,formDataFields:s,onSuccess:r,onError:n}=t;if(!a)return o("setUploadProgress",{key:i,uploadProgress:null}),void n(new Error("url was "+a));const c=new FormData;j.a.forEach(s,(e,t)=>{c.set(t,e)});const l={onUploadProgress:e=>{o("setUploadProgress",{key:i,uploadProgress:Math.floor(100*e.loaded/e.total)})}};en.a.post(a,c,l).then(e=>{o("setUploadProgress",{key:i,uploadProgress:null}),r(e)}).catch(e=>{o("setUploadProgress",{key:i,uploadProgress:null}),n(e)})},uploadFiles(e,t){let{commit:o,dispatch:i,state:a}=e,{key:s,files:r,uploader:n}=t;const c=e=>n.cancel();r.forEach(e=>o("setUploadStatusFor",{file:e,key:s,progress:0,status:tn.UNINITIALIZED,message:null,cancel:c})),n.on("fileProgress",(e,t)=>{console.debug(`Upload in progress... ${_.parseInt(100*e.progress())}%`),o("setUploadStatusFor",{file:e,key:s,progress:e.progress(),status:tn.UPLOADING,message:null,cancel:c})}),n.on("fileSuccess",(e,t)=>{console.debug("Upload successful!"),o("setUploadStatusFor",{file:e,key:s,progress:1,status:tn.SUCCESS,message:null,cancel:c})}),n.on("error",(e,t)=>{const{status_description:i}=JSON.parse(e)||{};console.debug("Upload has error "+i),o("setUploadStatusFor",{file:t,key:s,status:tn.FAILURE,message:i,cancel:c})}),n.upload(),console.debug("Upload in progress...")}}};const an=Object(ae["e"])("multimediaUpload");let sn=class extends(Object(C["c"])(E["a"])){get upload(){var e;return null!==(e=this.uploadsById[this.uploadIdsByKey[this.uploadKey]])&&void 0!==e?e:null}get hasProgress(){return null!==this.upload&&this.upload.status!==tn.SUCCESS&&this.upload.status!==tn.FAILURE}get isFailure(){return null!==this.upload&&this.upload.status===tn.FAILURE}get progress(){return 100*Object(y["get"])(this.upload,"progress",0)}created(){const e=this.$store,t="multimediaUpload";e.hasModule(t)||e.registerModule(t,on)}};Object(m["__decorate"])([Object(x["b"])({type:String,required:!0})],sn.prototype,"uploadKey",void 0),Object(m["__decorate"])([an.State],sn.prototype,"uploadsById",void 0),Object(m["__decorate"])([an.State],sn.prototype,"uploadIdsByKey",void 0),sn=Object(m["__decorate"])([Object(x["a"])({components:{BProgress:Yr["a"]}})],sn);var rn=sn,nn=rn,cn=(o("e131"),Object(P["a"])(nn,Xr,Jr,!1,null,null,null)),ln=(cn.exports,o("2b44")),dn=o("59c3"),un=o("5c47"),pn=o("03d5"),bn=o("64bb"),fn=o("2d61"),hn=o("c600"),vn=o("cf2c"),_n=o("02b5"),gn=o("cab8"),mn=o("41bd"),kn=o("5dcb"),yn=o("84d1"),jn=o("3ef7"),On=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"exit-block-editor-toggle"},[e.isEditable&&e.hasClipboard?[t("div",{staticClass:"form-group"},[t("button",{staticClass:"btn btn-secondary btn-sm",class:{active:e.isExitBlock},attrs:{type:"button"},on:{click:e.toggleExitBlock}},[e.isExitBlock?[e._v(" "+e._s(e._f("trans")("flow-builder.unset-as-exit-block"))+" ")]:[e._v(" "+e._s(e._f("trans")("flow-builder.set-as-exit-block"))+" ")]],2)])]:e._e()],2)},wn=[];const Cn=Object(ae["e"])("flow");let xn=class extends(Object(C["c"])(E["a"])){get isExitBlock(){return this.blockId===this.flow.exit_block_id}toggleExitBlock(){this.flow_setExitBlockId({flowId:this.flow.uuid,blockId:this.isExitBlock?"":this.blockId})}};Object(m["__decorate"])([Object(x["b"])({type:Object,required:!0})],xn.prototype,"flow",void 0),Object(m["__decorate"])([Object(x["b"])({type:String,default:""})],xn.prototype,"blockId",void 0),Object(m["__decorate"])([Object(x["b"])({type:Boolean,default:!0})],xn.prototype,"isEditable",void 0),Object(m["__decorate"])([Object(x["b"])({type:Boolean,default:!1})],xn.prototype,"hasClipboard",void 0),Object(m["__decorate"])([Cn.Mutation],xn.prototype,"flow_setExitBlockId",void 0),xn=Object(m["__decorate"])([Object(x["a"])({})],xn);var En=xn,In=En,Bn=Object(P["a"])(In,On,wn,!1,null,null,null),Sn=(Bn.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"first-block-editor-button"},[e.isEditable?[t("div",{staticClass:"form-group"},[t("button",{staticClass:"btn btn-sm w-100",class:{"btn-outline-primary":!e.isStartBlock,"btn-primary":e.isStartBlock},attrs:{type:"button",disabled:e.isStartBlock},on:{click:function(t){return e.setStartBlock(t)}}},[t("font-awesome-icon",{staticClass:"fa-btn",attrs:{icon:["fac","enter"]}}),e.isStartBlock?[e._v(" "+e._s(e._f("trans")("flow-builder.currently-set-as-starting-block"))+" ")]:[e._v(" "+e._s(e._f("trans")("flow-builder.set-as-starting-block"))+" ")]],2)])]:e._e()],2)}),Pn=[];const Mn=Object(ae["e"])("flow");let Fn=class extends(Object(C["c"])(E["a"])){setStartBlock(e){this.flow_setFirstBlockId({flowId:this.activeFlow.uuid,blockId:this.blockId})}get isStartBlock(){return this.blockId===this.activeFlow.first_block_id}};Object(m["__decorate"])([Object(x["b"])({default:!0})],Fn.prototype,"isEditable",void 0),Object(m["__decorate"])([Object(x["b"])()],Fn.prototype,"blockId",void 0),Object(m["__decorate"])([Mn.Getter],Fn.prototype,"activeFlow",void 0),Object(m["__decorate"])([Mn.Mutation],Fn.prototype,"flow_setFirstBlockId",void 0),Fn=Object(m["__decorate"])([Object(x["a"])({})],Fn);var Tn=Fn,An=Tn,Rn=Object(P["a"])(An,Sn,Pn,!1,null,null,null),Vn=(Rn.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"flow-editor",attrs:{"data-cy":"flow-editor"}},[e.flowHeader?t("h3",{staticClass:"no-room-above"},[e._v(" "+e._s(e._f("trans")(e.flowHeader))+" ")]):e._e(),t("fieldset",{attrs:{disabled:!e.isEditable&&e.isOnSmallContainer}},[t("div",{staticClass:"row"},[t("validation-message",{class:e.firstRowClass,attrs:{"message-key":`flow/${e.flow.uuid}/name`,"should-hide-validation":!e.didUserSubmit},scopedSlots:e._u([{key:"input-control",fn:function(o){let{isValid:i}=o;return[t("flow-label-editor",{attrs:{flow:e.flow,"valid-state":i,"data-cy":"flow-label--editor"}})]}}])}),e.hasDefaultInteractionTimeout?e._e():t("validation-message",{class:e.firstRowClass,attrs:{"message-key":`flow/${e.flow.uuid}/interaction_timeout`,"should-hide-validation":!e.didUserSubmit},scopedSlots:e._u([{key:"input-control",fn:function(o){let{isValid:i}=o;return[t("interaction-timeout-editor",{attrs:{flow:e.flow,"valid-state":i,"data-cy":"interaction-timeout--editor"}})]}}],null,!1,2174225140)})],1),t("div",{staticClass:"row"},[t("validation-message",{class:e.otherRowsClass,attrs:{"message-key":`flow/${e.flow.uuid}/languages`,"should-hide-validation":!e.didUserSubmit},scopedSlots:e._u([{key:"input-control",fn:function(o){let{isValid:i}=o;return[t("languages-editor",{attrs:{flow:e.flow,"data-cy":"languages--selector"}})]}}])}),t("validation-message",{class:e.otherRowsClass,attrs:{"message-key":`flow/${e.flow.uuid}/supported_modes`,"should-hide-validation":!e.didUserSubmit},scopedSlots:e._u([{key:"input-control",fn:function(o){let{isValid:i}=o;return[t("modes-editor",{attrs:{flow:e.flow,"data-cy":"modes--selector"}})]}}])})],1),e._t("vendor-extras")],2)])}),Ln=[];Object(ae["e"])("flow");const Nn=Object(ae["e"])("builder");Object(ae["e"])("validation");let Dn=class extends(Object(C["c"])(E["a"])){get hasDefaultInteractionTimeout(){return Boolean(this.ui.appWideInteractionTimeout)}get firstRowClass(){return this.isOnSmallContainer||this.hasDefaultInteractionTimeout?"col-12":"col-xl-6 col-lg-6 col-md-12 col-sm-12"}get otherRowsClass(){return this.isOnSmallContainer?"col-12":"col-xl-6 col-lg-6 col-md-12 col-sm-12"}};Object(m["__decorate"])([Object(x["b"])()],Dn.prototype,"flow",void 0),Object(m["__decorate"])([Object(x["b"])({default:""})],Dn.prototype,"flowHeader",void 0),Object(m["__decorate"])([Object(x["b"])({default:!0})],Dn.prototype,"isOnSmallContainer",void 0),Object(m["__decorate"])([Object(x["b"])({default:!1})],Dn.prototype,"didUserSubmit",void 0),Object(m["__decorate"])([Object(ae["d"])(e=>{let{trees:{ui:t}}=e;return t})],Dn.prototype,"ui",void 0),Object(m["__decorate"])([Nn.Getter],Dn.prototype,"isEditable",void 0),Dn=Object(m["__decorate"])([Object(x["a"])({})],Dn);var $n=Dn,Un=$n,Wn=Object(P["a"])(Un,Vn,Ln,!1,null,null,null),Hn=(Wn.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"interaction-timeout-editor form-group"},[t("numeric-editor",{attrs:{"regex-numeric-filtering":"[0-9]",label:e._f("trans")("flow-builder.Interaction-timeout"),placeholder:e._f("trans")("flow-builder.enter-value"),"valid-state":e.validState},model:{value:e.interactionTimeout,callback:function(t){e.interactionTimeout=e._n(t)},expression:"interactionTimeout"}})],1)}),zn=[];const Gn=Object(ae["e"])("flow");let qn=class extends(Object(C["c"])(E["a"])){get interactionTimeout(){return this.flow.interaction_timeout}set interactionTimeout(e){this.flow_setInteractionTimeout({flowId:this.flow.uuid,value:e})}};Object(m["__decorate"])([Object(x["b"])()],qn.prototype,"flow",void 0),Object(m["__decorate"])([Object(x["b"])()],qn.prototype,"validState",void 0),Object(m["__decorate"])([Gn.Mutation],qn.prototype,"flow_setInteractionTimeout",void 0),qn=Object(m["__decorate"])([Object(x["a"])({})],qn);var Kn=qn,Zn=Kn,Xn=Object(P["a"])(Zn,Hn,zn,!1,null,null,null),Jn=(Xn.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"flow-label-editor form-group"},[t("text-editor",{class:{"is-invalid":e.isInvalid},attrs:{"valid-state":e.validState,label:e._f("trans")("flow-builder.flow-label"),placeholder:e._f("trans")("flow-builder.enter-flow-label"),"data-cy":"Open-response-label"},model:{value:e.label,callback:function(t){e.label=t},expression:"label"}})],1)}),Yn=[];const Qn=Object(ae["e"])("flow");let ec=class extends(Object(C["c"])(E["a"])){get isInvalid(){return!1===this.validState}get label(){var e;return null!==(e=this.flow.label)&&void 0!==e?e:""}set label(e){this.flow_setLabel({flowId:this.flow.uuid,label:e}),this.flow_setNameFromLabel({flowId:this.flow.uuid,label:e})}};Object(m["__decorate"])([Object(x["b"])()],ec.prototype,"flow",void 0),Object(m["__decorate"])([Object(x["b"])()],ec.prototype,"validState",void 0),Object(m["__decorate"])([Qn.Mutation],ec.prototype,"flow_setLabel",void 0),Object(m["__decorate"])([Qn.Mutation],ec.prototype,"flow_setNameFromLabel",void 0),ec=Object(m["__decorate"])([x["a"]],ec);var tc=ec,oc=tc,ic=Object(P["a"])(oc,Jn,Yn,!1,null,null,null),ac=(ic.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"languages-editor form-group"},[t("label",{staticClass:"text-primary"},[e._v(e._s(e._f("trans")("flow-builder.languages")))]),t("vue-multiselect",{attrs:{"track-by":"id",label:"label",placeholder:e._f("trans")("flow-builder.select-languages"),options:e.allLanguages,multiple:!0,"show-labels":!1,searchable:!0},model:{value:e.selectedLanguages,callback:function(t){e.selectedLanguages=t},expression:"selectedLanguages"}})],1)}),sc=[],rc=o("5157");const nc=Object(ae["e"])("flow");let cc=class extends(Object(C["c"])(E["a"])){get allLanguages(){var e;return Object(rc["d"])(null!==(e=this.availableLanguages)&&void 0!==e?e:[])}get selectedLanguages(){var e;return Object(rc["d"])(null!==(e=this.flow.languages)&&void 0!==e?e:[])}set selectedLanguages(e){this.flow_updateLanguages({flowId:this.flow.uuid,newLanguages:e})}};Object(m["__decorate"])([Object(x["b"])()],cc.prototype,"flow",void 0),Object(m["__decorate"])([Object(ae["d"])(e=>e.trees.ui.languages)],cc.prototype,"availableLanguages",void 0),Object(m["__decorate"])([nc.Action],cc.prototype,"flow_updateLanguages",void 0),cc=Object(m["__decorate"])([Object(x["a"])({components:{VueMultiselect:Ae.a}})],cc);var lc=cc,dc=lc,uc=Object(P["a"])(dc,ac,sc,!1,null,null,null),pc=(uc.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"modes-editor form-group"},[t("label",{staticClass:"text-primary"},[e._v(e._s(e._f("trans")("flow-builder.modes")))]),t("vue-multiselect",{attrs:{placeholder:e._f("trans")("flow-builder.select-modes"),options:e.allModes,multiple:!0,"show-labels":!1,searchable:!0},model:{value:e.selectedModes,callback:function(t){e.selectedModes=t},expression:"selectedModes"}})],1)}),bc=[];const fc=Object(ae["e"])("flow");let hc=class extends(Object(C["c"])(E["a"])){get allModes(){var e;return Object(rc["e"])(null!==(e=this.availableModes)&&void 0!==e?e:[])}get selectedModes(){var e;return Object(rc["e"])(null!==(e=this.flow.supported_modes)&&void 0!==e?e:[])}set selectedModes(e){this.flow_updateModes({flowId:this.flow.uuid,newModes:e})}};Object(m["__decorate"])([Object(x["b"])()],hc.prototype,"flow",void 0),Object(m["__decorate"])([Object(ae["d"])(e=>e.trees.ui.supportedModes)],hc.prototype,"availableModes",void 0),Object(m["__decorate"])([fc.Action],hc.prototype,"flow_updateModes",void 0),hc=Object(m["__decorate"])([Object(x["a"])({components:{VueMultiselect:Ae.a}})],hc);var vc=hc,_c=vc,gc=Object(P["a"])(_c,pc,bc,!1,null,null,null),mc=(gc.exports,o("88df")),kc=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"language-adder"},[e._t("default",(function(){return[t("button",{staticClass:"btn btn-primary",on:{click:e.showAddLanguageModal}},[e._v(" "+e._s(e._f("trans")("flow-builder.add-language"))+" ")])]}),{showAddLanguageModal:e.showAddLanguageModal}),t("b-modal",{ref:"add-language-modal",attrs:{title:e._f("trans")("flow-builder.add-language"),"ok-title":e._f("trans")("flow-builder.create"),"cancel-title":e._f("trans")("flow-builder.cancel")},on:{ok:function(t){return t.preventDefault(),e.handleCreateLanguage.apply(null,arguments)}}},[t("div",{staticClass:"form-group"},[t("validation-message",{attrs:{"message-key":"language/new_language/label"},scopedSlots:e._u([{key:"input-control",fn:function(o){let{isValid:i}=o;return[t("text-editor",{attrs:{placeholder:e._f("trans")("flow-builder.enter-label"),label:e._f("trans")("flow-builder.label"),"valid-state":i},model:{value:e.newLanguage.label,callback:function(t){e.$set(e.newLanguage,"label",t)},expression:"newLanguage.label"}})]}}])})],1),t("div",{staticClass:"form-group"},[t("validation-message",{attrs:{"message-key":"language/new_language/iso_639_3"},scopedSlots:e._u([{key:"input-control",fn:function(o){let{isValid:i}=o;return[t("label",{staticClass:"text-primary"},[e._v(e._s(e._f("trans")("flow-builder.iso-639-3-label")))]),t("vue-multiselect",{class:{invalid:!1===i},attrs:{placeholder:e._f("trans")("flow-builder.language-tag-selector-placeholder"),options:e.iso_639_3Tags,"allow-empty":!1,"custom-label":e.customLanguageLabel,"track-by":"iso6393",searchable:!0},model:{value:e.iso_639_3,callback:function(t){e.iso_639_3=t},expression:"iso_639_3"}})]}}])})],1),t("div",{staticClass:"form-group"},[t("validation-message",{attrs:{"message-key":"language/new_language/variant"},scopedSlots:e._u([{key:"input-control",fn:function(o){let{isValid:i}=o;return[t("text-editor",{attrs:{placeholder:e._f("trans")("flow-builder.enter-variant"),label:e._f("trans")("flow-builder.language-variant"),"valid-state":i},on:{keydown:e.filterVariant},model:{value:e.variant,callback:function(t){e.variant=t},expression:"variant"}})]}}])})],1),t("div",{staticClass:"form-group"},[t("label",{staticClass:"text-primary"},[e._v(e._s(e._f("trans")("flow-builder.iso-3166-1-label")))]),t("vue-multiselect",{attrs:{placeholder:e._f("trans")("flow-builder.language-locale-selector-placeholder"),options:e.iso_3166_1Locales(),"allow-empty":!1,"track-by":"locale","custom-label":e.customLocaleLabel,searchable:!0},model:{value:e.iso_3166_1,callback:function(t){e.iso_3166_1=t},expression:"iso_3166_1"}})],1),t("div",{staticClass:"form-group"},[t("label",{staticClass:"text-primary"},[e._v(e._s(e._f("trans")("flow-builder.bcp-47-label")))]),t("validation-message",{attrs:{"message-key":"language/new_language/bcp_47"},scopedSlots:e._u([{key:"input-control",fn:function(o){let{isValid:i}=o;return[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newLanguage.bcp_47,expression:"newLanguage.bcp_47"}],staticClass:"form-control",attrs:{name:"bcp_47",type:"text",disabled:""},domProps:{value:e.newLanguage.bcp_47},on:{input:function(t){t.target.composing||e.$set(e.newLanguage,"bcp_47",t.target.value)}}})]}}])})],1)])],2)},yc=[],jc=o("d39e"),Oc=o("943c");const wc=o("2e18");wc.registerLocale(o("d13c")),wc.registerLocale(o("20fc"));Object(ae["e"])("flow/import");const Cc=Object(ae["e"])("validation");let xc=class extends(Object(C["c"])(E["a"],jc["a"])){constructor(){super(...arguments),this.newLanguage={id:"",label:"",iso_639_3:"",variant:"",bcp_47:""},this.selected_iso_639_3={},this.selected_iso_3166_1={},this.iso_639_3Tags=Oc["a"]}resetLanguage(){this.newLanguage={id:"",label:"",iso_639_3:"",variant:"",bcp_47:""},this.selected_iso_639_3={},this.selected_iso_3166_1={},this.validation_removeNewLanguageValidation()}showAddLanguageModal(){this.resetLanguage();const e=this.$refs["add-language-modal"];e.show()}customLanguageLabel(e){return Object(y["isEmpty"])(e)?"":`${e.name} - ${e.iso6393}`}customLocaleLabel(e){return Object(y["isEmpty"])(e)?"":`${e.country} - ${e.locale}`}iso_3166_1Locales(){const e=wc.getNames(this.locale,{select:"official"});return Object(y["map"])(Object(y["keys"])(e),t=>({locale:t,country:e[t]}))}set iso_639_3(e){this.selected_iso_639_3=e,Object(y["isEmpty"])(e)||(this.newLanguage.iso_639_3=e.iso6393,this.updateBCP47())}get iso_639_3(){return this.selected_iso_639_3}set iso_3166_1(e){this.selected_iso_3166_1=e,Object(y["isEmpty"])(e)||this.updateBCP47()}get iso_3166_1(){return this.selected_iso_3166_1}set variant(e){this.newLanguage.variant=e,Object(y["isEmpty"])(e)||this.updateBCP47()}get variant(){return void 0!==this.newLanguage.variant?this.newLanguage.variant:""}filterVariant(e){if(e.key.match(/[^a-z_]/g)&&8!==e.keyCode&&46!==e.keyCode&&e.preventDefault(),void 0!==this.newLanguage.variant&&!Object(y["isEmpty"])(this.newLanguage.variant)){const t=this.newLanguage.variant[this.newLanguage.variant.length-1];"_"===t&&e.key.match(/_/g)&&e.preventDefault()}}updateBCP47(){if(!Object(y["isEmpty"])(this.selected_iso_639_3)){let e=""+this.newLanguage.iso_639_3;Object(y["isEmpty"])(this.selected_iso_3166_1)||(e+="-"+this.selected_iso_3166_1.locale),void 0===this.newLanguage.variant||Object(y["isEmpty"])(this.newLanguage.variant)||(e+="-"+this.newLanguage.variant),this.newLanguage.bcp_47=e}}async handleCreateLanguage(){this.newLanguage.id=await(new vo["IdGeneratorUuidV4"]).generate();const e=this.route("languages.persistLanguage",{}),t=await this.validateAndAddOrgLanguage({language:this.newLanguage,persistRoute:e});if(!t)return;this.$emit("onLanguageAddition");const o=this.$refs["add-language-modal"];o.hide()}};Object(m["__decorate"])([ae["a"]],xc.prototype,"validateAndAddOrgLanguage",void 0),Object(m["__decorate"])([ae["d"]],xc.prototype,"locale",void 0),Object(m["__decorate"])([Cc.Action],xc.prototype,"validation_removeNewLanguageValidation",void 0),xc=Object(m["__decorate"])([Object(x["a"])({components:{BModal:mo["a"],VueMultiselect:Ae.a}})],xc);var Ec=xc,Ic=Ec,Bc=Object(P["a"])(Ic,kc,yc,!1,null,null,null),Sc=(Bc.exports,o("4f90"),o("9084"),o("ff9d"),function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"block-errors-expandable card w-100"},[t("div",{staticClass:"card-title m-0 px-2 pt-1 menu-bg-color"},[e._v(" "+e._s(e.trans("flow-builder."+e.block.type))+" "),t("div",{staticClass:"text-secondary"},[t("small",[e._v(e._s(e.blockLabel))])])]),e._l(e.errorsToShow,(function(o){return t("div",{key:`${o.dataPath}-${o.keyword}`,staticClass:"card-body d-flex justify-content-between px-2 py-0 highlight-on-hover menu-bg-color"},[t("span",{staticClass:"text-danger align-self-center"},[e._v(e._s(o.message))]),t("button",{staticClass:"btn btn-link btn-link-text",attrs:{type:"button"},on:{click:function(t){return e.$emit("fixBlockError",e.block.uuid,o.dataPath)}}},[e._v(" "+e._s(e._f("trans")("flow-builder.fix-issue"))+" ")])])})),e.isListLong?t("div",{staticClass:"btn btn-link text-left px-2 m-0 border-0 text-center menu-bg-color",attrs:{type:"button"},on:{click:function(t){return t.stopPropagation(),e.toggleList.apply(null,arguments)}}},[e.isExpanded?t("font-awesome-icon",{attrs:{icon:["fas","chevron-up"],"aria-label":e._f("trans")("flow-builder.show-less")}}):t("font-awesome-icon",{attrs:{icon:["fas","chevron-down"],"aria-label":e._f("trans")("flow-builder.show-more")}})],1):e._e()],2)}),Pc=[];const Mc=Object(ae["e"])("flow"),Fc=Object(ae["e"])("validation"),Tc=3;let Ac=class extends(Object(C["c"])(E["a"])){constructor(){super(...arguments),this.isExpanded=!1}get errorsToShow(){var e,t,o;return this.isExpanded?null!==(e=this.allErrors)&&void 0!==e?e:[]:null!==(o=null===(t=this.allErrors)||void 0===t?void 0:t.slice(0,Tc))&&void 0!==o?o:[]}get allErrors(){return[...this.blockValidationStatusesForCurrentBlock,...this.resourceValidationStatusesForCurrentBlock,...this.backendBlockValidationStatusesForCurrentBlock,...this.backendResourceValidationStatusesForCurrentBlock].filter(Boolean)}get isListLong(){return this.allErrors.length>Tc}get blockLabel(){var e;return null!==(e=this.block.label)&&void 0!==e?e:this.trans("flow-builder.untitled-block")}get currentBlockResourceUuids(){var e,t;const o=void 0!==(null===(e=this.block.config)||void 0===e?void 0:e.choices)?Object(y["map"])(this.block.config.choices,"prompt"):[];return[null===(t=this.block.config)||void 0===t?void 0:t.prompt,...o]}get resourceValidationStatusesForCurrentBlock(){return this.currentBlockResourceUuids.map(e=>this.getAjvErrorsFor("resource",e)).flat()}get backendResourceValidationStatusesForCurrentBlock(){return this.currentBlockResourceUuids.map(e=>this.getAjvErrorsFor("backend/resource",e)).flat()}get backendBlockValidationStatusesForCurrentBlock(){return this.getAjvErrorsFor("backend/block",this.block.uuid)}get blockValidationStatusesForCurrentBlock(){return this.getAjvErrorsFor("block",this.block.uuid)}getAjvErrorsFor(e,t){const o=Object(y["get"])(this.validationStatuses,`${e}/${t}`);return void 0!==o&&o.ajvErrors?o.ajvErrors.map(o=>({...o,dataPath:`${e}/${t}${o.dataPath}`})):[]}toggleList(){this.isExpanded=!this.isExpanded}};Object(m["__decorate"])([Object(x["b"])({required:!0})],Ac.prototype,"block",void 0),Object(m["__decorate"])([Fc.State],Ac.prototype,"validationStatuses",void 0),Object(m["__decorate"])([Mc.Getter],Ac.prototype,"activeFlow",void 0),Ac=Object(m["__decorate"])([Object(C["b"])({})],Ac);var Rc=Ac,Vc=Rc,Lc=(o("ad19"),Object(P["a"])(Vc,Sc,Pc,!1,null,"2809301f",null)),Nc=(Lc.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("main",{staticClass:"error-notifications"},[e.flowValidationErrors.length>0?t("section",{staticClass:"alert alert-danger d-flex mb-0 py-sm-1 px-2",attrs:{role:"alert"}},[t("span",{staticClass:"align-self-center ml-2"},[e._v(" "+e._s(e._f("trans")("flow-builder.flow-error-message"))+" ")]),t("div",{staticClass:"dropdown"},[t("button",{staticClass:"btn btn-link btn-link-text dropdown-toggle",attrs:{id:"flowErrorsDropdown",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"}},[e._v(" "+e._s(e._f("trans")("flow-builder.show-issues"))+" "),t("span",{staticClass:"caret"})]),t("ul",{staticClass:"notification dropdown-menu",attrs:{"aria-labelledby":"flowErrorsDropdown"}},e._l(e.flowValidationErrors,(function(o){return t("li",{key:o.dataPath},[t("div",{staticClass:"d-flex justify-content-between px-2 py-0 highlight-on-hover"},[t("span",{staticClass:"text-danger align-self-center"},[e._v(e._s(o.message))]),"/first_block_id"!==o.dataPath?t("button",{staticClass:"btn btn-link btn-link-text",attrs:{type:"button"},on:{click:function(t){return e.fixFlowError()}}},[e._v(" "+e._s(e._f("trans")("flow-builder.fix-issue"))+" ")]):e._e()])])})),0)])]):e._e(),e.numberOfBlocksWithErrors>0?t("section",{staticClass:"alert alert-danger d-flex py-sm-1 px-2 mb-1",attrs:{role:"alert"}},[t("span",{staticClass:"align-self-center ml-2"},[e._v(" "+e._s(e._f("trans")("flow-builder.block-error-message",{block_count:e.numberOfBlocksWithErrors}))+" ")]),t("div",{staticClass:"dropdown"},[t("button",{staticClass:"btn btn-link btn-link-text dropdown-toggle",attrs:{id:"blockErrorsDropdown",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"}},[e._v(" "+e._s(e._f("trans")("flow-builder.locate-block-issue"))+" "),t("span",{staticClass:"caret"})]),t("ul",{staticClass:"notification dropdown-menu",attrs:{"aria-labelledby":"blockErrorsDropdown"}},e._l(e.invalidBlocksInActiveFlow,(function(o,i){return t("li",{key:i},[t("block-errors-expandable",{attrs:{block:o},on:{fixBlockError:e.fixBlockError}})],1)})),0)])]):e._e()])}),Dc=[];const $c=Object(ae["e"])("flow"),Uc=Object(ae["e"])("validation");let Wc=class extends(Object(C["c"])(jc["a"],E["a"])){updated(){this.$emit("updated")}get flowValidationErrors(){var e,t,o,i;const a="flow/"+(null===(e=this.activeFlow)||void 0===e?void 0:e.uuid),s="backend/flow/"+(null===(t=this.activeFlow)||void 0===t?void 0:t.uuid);return Object(y["union"])((null===(o=this.validationStatuses[a])||void 0===o?void 0:o.ajvErrors)||[],(null===(i=this.validationStatuses[s])||void 0===i?void 0:i.ajvErrors)||[])}get blockValidationStatuses(){var e;const t=null===(e=this.activeFlow)||void 0===e?void 0:e.blocks.reduce((e,t)=>(e["block/"+t.uuid]=!0,e["backend/block/"+t.uuid]=!0,e),{});return t&&0!==Object(y["size"])(t)?Object(y["pickBy"])(this.validationStatuses,(e,o)=>o.includes("block/")&&t[o]):{}}hasBlockValidationErrors(e){const t=Object(y["get"])(this.blockValidationStatuses,"block/"+e),o=Object(y["get"])(this.blockValidationStatuses,"backend/block/"+e);return(void 0!==t||void 0!==o)&&(!0!==(null===t||void 0===t?void 0:t.isValid)&&void 0!==(null===t||void 0===t?void 0:t.isValid)||!0!==(null===o||void 0===o?void 0:o.isValid)&&void 0!==(null===o||void 0===o?void 0:o.isValid))}hasResourceValidationErrors(e){const t=Object(y["castArray"])(e);return t.some(e=>{var t,o;const i=null===(t=this.validationStatuses["resource/"+e])||void 0===t?void 0:t.isValid,a=null===(o=this.activeFlow)||void 0===o?void 0:o.resources.some(t=>t.uuid===e);return!1===i&&a},this)}isBlockInvalid(e){return this.hasBlockValidationErrors(e.uuid)||this.hasResourceValidationErrors(e.config.prompt)||this.hasResourceValidationErrors(e.config.choices)}get invalidBlocksInActiveFlow(){var e;return Object(y["filter"])(null===(e=this.activeFlow)||void 0===e?void 0:e.blocks,this.isBlockInvalid.bind(this))}get numberOfBlocksWithErrors(){return Object(y["size"])(this.invalidBlocksInActiveFlow)}async fixFlowError(){try{await this.$router.push({name:"flow-details"})}catch(e){"NavigationDuplicated"!==e.name&&console.error(e)}}async fixBlockError(e,t){try{await this.$router.push({name:"block-scroll-to-anchor",params:{blockId:e,field:t}})}catch(o){"NavigationDuplicated"!==o.name&&console.error(o)}}};Object(m["__decorate"])([Uc.State],Wc.prototype,"validationStatuses",void 0),Object(m["__decorate"])([$c.Getter],Wc.prototype,"activeFlow",void 0),Object(m["__decorate"])([$c.Getter],Wc.prototype,"resourceUuidsOnActiveFlow",void 0),Wc=Object(m["__decorate"])([Object(C["b"])({})],Wc);var Hc=Wc,zc=Hc,Gc=(o("8127"),Object(P["a"])(zc,Nc,Dc,!1,null,"1bf8eedc",null)),qc=(Gc.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return e.countSelectedBlocks?t("div",{staticClass:"selection-banner"},[t("div",{staticClass:"alert alert-primary mb-0 d-flex py-sm-2 px-3",attrs:{role:"alert"}},[t("div",{staticClass:"mr-3"},[e._v(" "+e._s(e._f("trans")("flow-builder.selected-x-blocks",{x:e.countSelectedBlocks}))+". ")]),e.deleting?e._e():t("div",[t("button",{staticClass:"btn btn-danger btn-sm mr-2",attrs:{"data-cy":"builder-toolbar--delete-x-block--btn"},on:{click:function(t){e.deleting=!0}}},[t("font-awesome-icon",{attrs:{icon:["far","trash-alt"]}}),e._v(" "+e._s(e._f("trans")("flow-builder.delete"))+" ")],1),t("button",{staticClass:"btn btn-outline-dark btn-sm mr-2",attrs:{"data-cy":"builder-toolbar--duplicate-x-block--btn"},on:{click:function(t){return t.preventDefault(),e.handleMultipleDuplicate.apply(null,arguments)}}},[t("font-awesome-icon",{attrs:{icon:["fac","copy"]}}),e._v(" "+e._s(e._f("trans")("flow-builder.duplicate"))+" ")],1),t("button",{staticClass:"btn btn-outline-dark btn-sm ml-4",on:{click:e.flow_clearMultiSelection}},[e._v(" "+e._s(e._f("trans")("flow-builder.clear-selection"))+" ")])]),e.deleting?t("div",[t("b",{staticClass:"mr-3"},[e._v(e._s(e._f("trans")("flow-builder.confirmation-for-delete-selection")))]),t("button",{staticClass:"btn btn-outline-dark btn-sm mr-2",on:{click:function(t){e.deleting=!1}}},[e._v(" "+e._s(e._f("trans")("flow-builder.no-cancel"))+" ")]),t("button",{staticClass:"btn btn-danger btn-sm mr-2",attrs:{"data-cy":"builder-toolbar--confirm-delete-x-block--btn"},on:{click:e.confirmMultipleDeletion}},[e._v(" "+e._s(e._f("trans")("flow-builder.yes-delete"))+" ")])]):e._e()])]):e._e()}),Kc=[];const Zc=Object(ae["e"])("flow");Object(ae["e"])("undoRedo");let Xc=class extends(Object(C["c"])(E["a"])){constructor(){super(...arguments),this.deleting=!1}updated(){this.$emit("updated")}get countSelectedBlocks(){return Object(y["size"])(this.selectedBlocks)}async confirmMultipleDeletion(){await this.flow_removeAllSelectedBlocks(),this.deleting=!1}async handleMultipleDuplicate(){const e=await this.flow_duplicateAllSelectedBlocks();await this.flow_clearMultiSelection(),this.$emit("after-multiple-block-duplicate",{duplicateBlockUuids:e})}};Object(m["__decorate"])([Zc.State],Xc.prototype,"selectedBlocks",void 0),Object(m["__decorate"])([Zc.Action],Xc.prototype,"flow_clearMultiSelection",void 0),Object(m["__decorate"])([Zc.Action],Xc.prototype,"flow_removeAllSelectedBlocks",void 0),Object(m["__decorate"])([Zc.Action],Xc.prototype,"flow_duplicateAllSelectedBlocks",void 0),Xc=Object(m["__decorate"])([Object(C["b"])({})],Xc);var Jc=Xc,Yc=Jc,Qc=Object(P["a"])(Yc,qc,Kc,!1,null,null,null),el=(Qc.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{ref:"builder-toolbar",staticClass:"tree-builder-toolbar d-flex flex-column"},[t("div",{staticClass:"tree-builder-toolbar-main-menu d-flex flex-column"},[e.isExportVisible?t("div",{staticClass:"flows-exporter alert alert-info"},[t("h3",[e._v(e._s(e.trans("flow-builder.flow-exporter")))]),t("textarea",{staticClass:"flow-exporter",attrs:{rows:"15",disabled:""},domProps:{value:e.flow}})]):e._e(),t("div",{staticClass:"tree-workspace-panel-heading panel-heading w-100"},[t("div",{staticClass:"tree-workspace-panel-heading-contents"},[t("div",{staticClass:"btn-toolbar"},[e.hasToolbarFlowTitle?t("h4",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.activeFlow.label,expression:"activeFlow.label",modifiers:{hover:!0}}],staticClass:"text-primary mr-4 mb-0 flow-label"},[e._v(" "+e._s(e.activeFlow.label)+" ")]):e._e(),t("div",[e.hasToolbarHomeButton?t("router-link",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.trans("flow-builder.home"),expression:"trans('flow-builder.home')",modifiers:{hover:!0}}],staticClass:"mr-2",attrs:{to:e.route("flows.home")}},[t("font-awesome-icon",{staticClass:"fa-btn",attrs:{icon:["fac","home"]}})],1):e._e(),e.hasToolbarNewFlowButton?t("router-link",{staticClass:"btn btn-primary btn-sm mr-2",attrs:{to:e.route("flows.newFlow")}},[e._v(" "+e._s(e.trans("flow-builder.new-flow"))+" ")]):e._e(),t("button",{staticClass:"btn btn-sm",class:{"btn-outline-primary":e.hasToolbarNewFlowButton,"btn-primary":!e.hasToolbarNewFlowButton},attrs:{"data-cy":"builder-toolbar--flow-details--btn"},on:{click:e.showOrHideEditFlowModal}},[e._v(" "+e._s(e._f("trans")("flow-builder.flow-details"))+" ")]),t("b-modal",{ref:"edit-flow-modal",attrs:{"data-cy":"flow-editor--modal","ok-only":"","ok-title":e._f("trans")("flow-builder.done")},on:{ok:e.showOrHideEditFlowModal}},[t("template",{slot:"modal-header"},[t("h2",{staticClass:"mb-0"},[e._v(" "+e._s(e._f("trans")("flow-builder.flow-details"))+" ")]),t("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close","data-cy":"flow-editor--modal--close-btn"},on:{click:e.showOrHideEditFlowModal}},[e._v("  ")])]),t("flow-editor",{attrs:{flow:e.activeFlow,"did-user-submit":!0,"flow-header":""}})],2),t("div",{staticClass:"vertical-divider"}),e.isResourceViewerEnabled?t("div",{staticClass:"btn-group"},[t("router-link",{staticClass:"btn btn-outline-primary btn-sm",class:{active:e.isBuilderCanvasEnabled,disabled:e.isTreeSaving},attrs:{to:e.treeUrl,"data-cy":"builder-toolbar--builder-view--btn"},nativeOn:{click:function(t){return t.preventDefault(),e.handleFlowViewMenu.apply(null,arguments)}}},[e._v(" "+e._s(e.trans("flow-builder.flow-view"))+" ")]),t("router-link",{staticClass:"btn btn-outline-primary btn-sm",class:{active:e.isResourceViewerCanvasEnabled,disabled:e.isTreeSaving},attrs:{to:e.resourceUrl,"data-cy":"builder-toolbar--resource-view--btn"},nativeOn:{click:function(t){return t.preventDefault(),e.handleResourceViewMenu.apply(null,arguments)}}},[e._v(" "+e._s(e.trans("flow-builder.resource-view"))+" ")])],1):e._e(),e.ui.isEditableLocked||e.isResourceViewerCanvasEnabled?e._e():t("div",{staticClass:"btn-group ml-3"},[t("router-link",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.trans("flow-builder.click-to-toggle-editing"),expression:"trans('flow-builder.click-to-toggle-editing')",modifiers:{hover:!0}}],staticClass:"btn btn-outline-primary btn-sm",class:{active:!e.isEditable,disabled:e.isTreeSaving},attrs:{to:e.viewModeUrl,event:"","aria-disabled":e.isTreeSaving,tabindex:e.isTreeSaving?-1:void 0},nativeOn:{click:function(t){return t.preventDefault(),e.handlePersistFlow(e.viewModeUrl)}}},[e._v(" "+e._s(e.trans("flow-builder.view-mode"))+" ")]),t("router-link",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.trans("flow-builder.click-to-toggle-editing"),expression:"trans('flow-builder.click-to-toggle-editing')",modifiers:{hover:!0}}],staticClass:"btn btn-outline-primary btn-sm",class:{active:e.isEditable,disabled:e.isTreeSaving},attrs:{to:e.editModeUrl,event:"","aria-disabled":e.isTreeSaving,tabindex:e.isTreeSaving?-1:void 0},nativeOn:{click:function(t){return t.preventDefault(),e.handlePersistFlow(e.editModeUrl)}}},[e._v(" "+e._s(e.trans("flow-builder.edit-mode"))+" ")])],1),t("div",{staticClass:"vertical-divider"}),t("UndoRedoButtonGroup"),e._t("extra-buttons")],2),t("div",{staticClass:"ml-auto"},[e.isBuilderCanvasEnabled&&e.hasSimulator?t("button",{staticClass:"btn btn-outline-primary btn-sm",attrs:{type:"button"},on:{click:function(t){return e.setSimulatorActive(!0)}}},[e._v(" "+e._s(e.trans("flow-builder.show-clipboard-simulator"))+" ")]):e._e(),t("div",{staticClass:"btn-group"},[e._t("right-grouped-buttons")],2),e.isBuilderCanvasEnabled&&e.hasToolbarExportButton?t("button",{staticClass:"btn btn-outline-primary btn-sm",class:{active:e.isExportVisible},on:{click:e.toggleExportVisibility}},[e._v(" "+e._s(e.trans("flow-builder.export"))+" ")]):e._e(),e.isBuilderCanvasEnabled&&e.isEditable&&e.isFeatureTreeSaveEnabled?t("button",{staticClass:"btn btn-sm ml-4 save-button",class:{"btn-outline-primary":!e.hasFlowChanges,"btn-primary":e.hasFlowChanges},attrs:{type:"button",disabled:e.isSavingDisabled,"data-cy":"save--btn"},on:{click:function(t){return e.handlePersistFlow()}}},[e._v(" "+e._s(e.saveButtonText)+" ")]):e._e()])])])]),e.isBuilderCanvasEnabled&&e.isEditable?t("div",{staticClass:"tree-workspace-panel-heading panel-heading w-100 bg-white d-flex justify-content-start pt-0 pb-0",attrs:{"data-cy":"blocks--menu"}},[t("div",{staticClass:"tree-workspace-panel-heading-contents"},[t("ul",{staticClass:"nav"},[e.isEmpty(e.blockClassesForContentCategory)?e._e():t("li",{staticClass:"nav-item dropdown nav",attrs:{"data-cy":"blocks--menu-item"}},[t("a",{staticClass:"nav-link dropdown-toggle",attrs:{"data-toggle":"dropdown",href:"#",role:"button","aria-haspopup":"true","aria-expanded":"false"},on:{mouseover:function(t){return e.openDropdownMenu(t.target)}}},[t("span",{staticClass:"nav-link-text"},[e._v(e._s(e._f("trans")("flow-builder.content")))])]),t("div",{staticClass:"dropdown-menu mt-0"},[e._l(e.blockClassesForContentCategory,(function(o,i){return[e.shouldDisplayDividerBefore(e.blockClassesForContentCategory,i)?t("div",{key:i+"divider",staticClass:"dropdown-divider"}):e._e(),e.isBlockAvailableByBlockClass[i]?t("a",{key:i+"item",staticClass:"dropdown-item",attrs:{href:"#","data-block-type":i,"data-default-num-connections":o["defaultConnections"],"data-cy":"blocks--menu-item"},on:{click:function(t){return t.preventDefault(),e.handleAddBlockByTypeSelected(o)}}},[e._v(" "+e._s(e.translateTreeClassName(i))+" ")]):e._e()]})),e._t("extra-dropdown-items-for-category1")],2)]),e.isEmpty(e.blockClassesForContactCategory)?e._e():t("li",{staticClass:"nav-item dropdown",attrs:{"data-cy":"blocks--menu-item"}},[t("a",{staticClass:"nav-link dropdown-toggle",attrs:{"data-toggle":"dropdown",href:"#",role:"button","aria-haspopup":"true","aria-expanded":"false"},on:{mouseover:function(t){return e.openDropdownMenu(t.target)}}},[t("span",{staticClass:"nav-link-text"},[e._v(e._s(e._f("trans")("flow-builder.contact")))])]),t("div",{staticClass:"dropdown-menu mt-0"},[e._l(e.blockClassesForContactCategory,(function(o,i){return[e.shouldDisplayDividerBefore(e.blockClassesForContactCategory,i)?t("div",{key:i+"divider",staticClass:"dropdown-divider"}):e._e(),e.isBlockAvailableByBlockClass[i]?t("a",{key:i+"item",staticClass:"dropdown-item",attrs:{href:"#","data-block-type":i,"data-default-num-connections":o["defaultConnections"],"data-cy":"blocks--menu-item"},on:{click:function(t){return t.preventDefault(),e.handleAddBlockByTypeSelected(o)}}},[e._v(" "+e._s(e.translateTreeClassName(i))+" ")]):e._e()]})),e._t("extra-dropdown-items-for-category2")],2)]),e.isEmpty(e.blockClassesForBranchingCategory)?e._e():[1===Object.keys(e.blockClassesForBranchingCategory).length?t("li",{staticClass:"nav-item",attrs:{"data-cy":"blocks--menu-item"}},e._l(e.blockClassesForBranchingCategory,(function(o,i){return t("a",{key:i+"item",staticClass:"nav-link single-menu",attrs:{href:"#","data-cy":"blocks--menu-item"},on:{click:function(t){return t.preventDefault(),e.handleAddBlockByTypeSelected(o)}}},[e._v(" "+e._s(e._f("trans")("flow-builder.branching"))+" ")])})),0):t("li",{staticClass:"nav-item dropdown",attrs:{"data-cy":"blocks--menu-item"}},[t("a",{staticClass:"nav-link dropdown-toggle",attrs:{"data-toggle":"dropdown",href:"#",role:"button","aria-haspopup":"true","aria-expanded":"false"},on:{mouseover:function(t){return e.openDropdownMenu(t.target)}}},[t("span",{staticClass:"nav-link-text"},[e._v(e._s(e._f("trans")("flow-builder.branching")))])]),t("div",{staticClass:"dropdown-menu mt-0"},[e._l(e.blockClassesForBranchingCategory,(function(o,i){return[e.shouldDisplayDividerBefore(e.blockClassesForBranchingCategory,i)?t("div",{key:i+"divider",staticClass:"dropdown-divider"}):e._e(),e.isBlockAvailableByBlockClass[i]?t("a",{key:i+"item",staticClass:"dropdown-item",attrs:{href:"#","data-block-type":i,"data-default-num-connections":o["defaultConnections"],"data-cy":"blocks--menu-item"},on:{click:function(t){return t.preventDefault(),e.handleAddBlockByTypeSelected(o)}}},[e._v(" "+e._s(e.translateTreeClassName(i))+" ")]):e._e()]})),e._t("extra-dropdown-items-for-category3")],2)])],e.isEmpty(e.blockClassesForDeveloperCategory)?e._e():t("li",{staticClass:"nav-item dropdown",attrs:{"data-cy":"blocks--menu-item"}},[t("a",{staticClass:"nav-link dropdown-toggle",attrs:{"data-toggle":"dropdown",href:"#",role:"button","aria-haspopup":"true","aria-expanded":"false"},on:{mouseover:function(t){return e.openDropdownMenu(t.target)}}},[t("span",{staticClass:"nav-link-text"},[e._v(e._s(e._f("trans")("flow-builder.advanced")))])]),t("div",{staticClass:"dropdown-menu mt-0"},[e._l(e.blockClassesForDeveloperCategory,(function(o,i){return[e.shouldDisplayDividerBefore(e.blockClassesForDeveloperCategory,i)?t("div",{key:i+"divider",staticClass:"dropdown-divider"}):e._e(),e.isBlockAvailableByBlockClass[i]?t("a",{key:i+"item",staticClass:"dropdown-item",attrs:{href:"#","data-block-type":i,"data-default-num-connections":o["defaultConnections"],"data-cy":"blocks--menu-item"},on:{click:function(t){return t.preventDefault(),e.handleAddBlockByTypeSelected(o)}}},[e._v(" "+e._s(e.translateTreeClassName(i))+" ")]):e._e()]})),e._t("extra-dropdown-items-for-category5")],2)])],2)])]):e._e()]),e.isBuilderCanvasEnabled?t("div",{staticClass:"tree-builder-toolbar-alerts w-100"},[e.isEditable?t("selection-banner",{on:{updated:e.handleHeightChangeFromDOM,"after-multiple-block-duplicate":function(){for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return e.$emit("after-multiple-block-duplicate",...o)}}}):e._e(),t("error-notifications",{on:{updated:e.handleHeightChangeFromDOM}}),e.isBlockEditorOpen?t("block-editor"):e._e()],1):e._e()])}),tl=[],ol=o("5f5b"),il=o("b4ae");function al(e,t){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(y["isArray"])(t)?o?Object(y["every"])(t,t=>e[t]):Object(y["find"])(t,t=>e[t]):e[t]}let sl=class extends f["default"]{can(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return al(this.permissions,e,t)}};Object(m["__decorate"])([ae["d"]],sl.prototype,"permissions",void 0),sl=Object(m["__decorate"])([C["b"]],sl);var rl=sl,nl=o("b429"),cl=o.n(nl),ll=o("512d"),dl=o.n(ll);const ul=100,pl=e=>{const t=Object(y["debounce"])(()=>{e.dispatch("undoRedo/handleStateChange")},ul),o=e=>{"flow/flow_resetFlowState"!==e.type&&e.type.startsWith("flow/")&&t()};e.subscribe(o)};var bl=o("5262");f["default"].use(ol["a"]),f["default"].component("BTooltip",il["a"]);const fl=Object(ae["e"])("flow"),hl=Object(ae["e"])("builder"),vl=Object(ae["e"])("clipboard"),_l=Object(ae["e"])("validation");Object(ae["e"])("undoRedo");let gl=class extends(Object(C["c"])(jc["a"],rl,E["a"])){constructor(){super(...arguments),this.isExportVisible=!1,this.height=102}created(){const e=this.$store,t="undoRedo";e.hasModule(t)||e.registerModule(t,bl["a"]),pl(this.$store)}async mounted(){const e=this.$route.meta?this.$route.meta:{};this.onMetaChanged(e);const t=this.$refs["edit-flow-modal"];t?(t.$on("shown",()=>{const e=this.$route.meta;e&&!0===e.isFlowEditorShown||this.$router.replace({name:"flow-details"})}),t.$on("hidden",()=>{const e=this.$route.meta;e&&!0===e.isFlowEditorShown&&this.$router.replace({name:"flow-canvas"})})):console.debug("Builder Toolbar","Unable to find the edit flow modal on mount - deep linking may not work")}onMetaChanged(e){const t=this.$refs["edit-flow-modal"];t&&(e.isFlowEditorShown?t.show():t.hide())}isEmpty(e){return Object(y["isEmpty"])(e)}get flow(){return JSON.stringify(Object(y["omit"])(this.activeFlowContainer,"isCreated"),null,2)}get resourceUrl(){return this.editTreeRoute({component:"resource-viewer",mode:this.isEditable?"edit":"view"})}get downloadAudioUrl(){return this.editTreeRoute({component:"downloadaudio"})}get treeUrl(){return this.editTreeRoute({component:"builder",mode:this.isEditable?"edit":"view"})}get editModeUrl(){return this.editTreeRoute({component:this.activeMainComponent,mode:"edit"})}get saveButtonText(){return this.isTreeSaving?this.trans("flow-builder.saving"):this.hasFlowChanges?this.trans("flow-builder.save"):this.trans("flow-builder.saved")}get isSavingDisabled(){return!0===this.isTreeSaving||!this.hasFlowChanges}get blockClassesForContentCategory(){return cl()(dl()(e=>!this.hasClassDetail(e,"hidden_in_menu")),dl()(e=>this.hasMenuCategory(e,1)))(this.ui.blockClasses)}get blockClassesForContactCategory(){return cl()(dl()(e=>!this.hasClassDetail(e,"hidden_in_menu")),dl()(e=>this.hasMenuCategory(e,2)))(this.ui.blockClasses)}get blockClassesForBranchingCategory(){return cl()(dl()(e=>!this.hasClassDetail(e,"hidden_in_menu")),dl()(e=>this.hasMenuCategory(e,3)||this.hasClassDetail(e,"branchingMenu")))(this.ui.blockClasses)}get blockClassesForDeveloperCategory(){return cl()(dl()(e=>!this.hasClassDetail(e,"hidden_in_menu")),dl()(e=>this.hasMenuCategory(e,5)))(this.ui.blockClasses)}get canViewResultsTotals(){return this.can("view-result-totals")&&this.isFeatureViewResultsEnabled}get hasSimulator(){return!0===this.hasOfflineMode&&!0===this.isFeatureSimulatorEnabled}async handleAddBlockByTypeSelected(e){let{type:t}=e;const{uuid:o}=await this.flow_addBlankBlockByType({type:t,ui_metadata:{canvas_coordinates:Object($t["b"])(this.activeBlock)}});this.activateBlock({blockId:o}),await this.$router.push({name:"block-selected-details",params:{blockId:o}})}async handlePersistFlow(e){if(this.$route.path!==e){if(this.isEditable){await this.persistFlowAndHandleUiState()}e&&await this.$router.push(e)}}showOrHideEditFlowModal(){const e=this.$refs["edit-flow-modal"];e&&e.toggle()}openDropdownMenu(e){e.hasAttribute("aria-expanded")&&"true"!==e.getAttribute("aria-expanded")&&e.click()}toggleExportVisibility(){this.isExportVisible=!this.isExportVisible}editTreeRoute(){let{component:e=null,mode:t=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var o;const i=this.removeNilValues({flowId:null===(o=this.activeFlow)||void 0===o?void 0:o.uuid,component:e,mode:t});return this.route("flows.editFlow",i)}hasClassDetail(e,t){return!Object(y["isNil"])(e[t])&&e[t]}hasMenuCategory(e,t){return this.hasClassDetail(e,"menu_category")&&e.menu_category===t}translateTreeClassName(e){return this.trans("flow-builder."+e)}shouldDisplayDividerBefore(e,t){const o=Object(y["pickBy"])(e,e=>this.hasClassDetail(e,"divider_before"))[t];return o&&this.isBlockAvailableByBlockClass[t]}removeNilValues(e){return Object(y["pickBy"])(e,y["identity"])}handleHeightChangeFromDOM(){const e=this.$refs["builder-toolbar"];e||console.debug("Interaction Designer","Unable to find DOM element corresponding to builder-toolbar");const t=Object(y["reduce"])(e.childNodes,(e,t)=>e+t.offsetHeight,0);t>0&&(this.height=t,this.$emit("height-updated",this.height))}handleFlowViewMenu(){this.handlePersistFlow(this.treeUrl)}handleResourceViewMenu(){this.handlePersistFlow(this.resourceUrl),window.scrollTo(0,0)}get viewModeUrl(){return this.editTreeRoute({component:this.activeMainComponent,mode:"view"})}};Object(m["__decorate"])([Object(x["d"])("$route.meta",{immediate:!0,deep:!0})],gl.prototype,"onMetaChanged",null),Object(m["__decorate"])([hl.State],gl.prototype,"activeMainComponent",void 0),Object(m["__decorate"])([Object(ae["d"])(e=>{let{trees:{tree:t}}=e;return t})],gl.prototype,"tree",void 0),Object(m["__decorate"])([Object(ae["d"])(e=>{let{trees:{ui:t}}=e;return t})],gl.prototype,"ui",void 0),Object(m["__decorate"])([ae["b"]],gl.prototype,"hasToolbarFlowTitle",void 0),Object(m["__decorate"])([ae["b"]],gl.prototype,"hasToolbarHomeButton",void 0),Object(m["__decorate"])([ae["b"]],gl.prototype,"hasToolbarNewFlowButton",void 0),Object(m["__decorate"])([ae["b"]],gl.prototype,"hasToolbarExportButton",void 0),Object(m["__decorate"])([ae["b"]],gl.prototype,"isTreeSaving",void 0),Object(m["__decorate"])([ae["b"]],gl.prototype,"isBlockAvailableByBlockClass",void 0),Object(m["__decorate"])([ae["b"]],gl.prototype,"hasChanges",void 0),Object(m["__decorate"])([ae["b"]],gl.prototype,"isTreeValid",void 0),Object(m["__decorate"])([ae["b"]],gl.prototype,"selectedBlock",void 0),Object(m["__decorate"])([ae["b"]],gl.prototype,"isFeatureTreeSaveEnabled",void 0),Object(m["__decorate"])([ae["b"]],gl.prototype,"isFeatureTreeSendEnabled",void 0),Object(m["__decorate"])([ae["b"]],gl.prototype,"isFeatureTreeDuplicateEnabled",void 0),Object(m["__decorate"])([ae["b"]],gl.prototype,"isFeatureViewResultsEnabled",void 0),Object(m["__decorate"])([ae["b"]],gl.prototype,"isFeatureSimulatorEnabled",void 0),Object(m["__decorate"])([ae["b"]],gl.prototype,"isFeatureUpdateInteractionTotalsEnabled",void 0),Object(m["__decorate"])([ae["b"]],gl.prototype,"isResourceViewerEnabled",void 0),Object(m["__decorate"])([ae["c"]],gl.prototype,"setTreeSaving",void 0),Object(m["__decorate"])([ae["a"]],gl.prototype,"attemptSaveTree",void 0),Object(m["__decorate"])([fl.Getter],gl.prototype,"activeFlow",void 0),Object(m["__decorate"])([fl.Getter],gl.prototype,"activeFlowContainer",void 0),Object(m["__decorate"])([fl.Getter],gl.prototype,"hasOfflineMode",void 0),Object(m["__decorate"])([fl.Getter],gl.prototype,"isActiveFlowValid",void 0),Object(m["__decorate"])([fl.State],gl.prototype,"flows",void 0),Object(m["__decorate"])([fl.State],gl.prototype,"resources",void 0),Object(m["__decorate"])([fl.Action],gl.prototype,"flow_removeBlock",void 0),Object(m["__decorate"])([fl.Action],gl.prototype,"flow_addBlankBlockByType",void 0),Object(m["__decorate"])([fl.Action],gl.prototype,"flow_duplicateBlock",void 0),Object(m["__decorate"])([hl.Getter],gl.prototype,"isEditable",void 0),Object(m["__decorate"])([hl.Getter],gl.prototype,"hasFlowChanges",void 0),Object(m["__decorate"])([hl.State],gl.prototype,"activeBlockId",void 0),Object(m["__decorate"])([hl.State],gl.prototype,"isBlockEditorOpen",void 0),Object(m["__decorate"])([hl.Getter],gl.prototype,"activeBlock",void 0),Object(m["__decorate"])([hl.Getter],gl.prototype,"isBuilderCanvasEnabled",void 0),Object(m["__decorate"])([hl.Getter],gl.prototype,"isResourceViewerCanvasEnabled",void 0),Object(m["__decorate"])([hl.Mutation],gl.prototype,"activateBlock",void 0),Object(m["__decorate"])([hl.Action],gl.prototype,"persistFlowAndHandleUiState",void 0),Object(m["__decorate"])([vl.Action],gl.prototype,"setSimulatorActive",void 0),Object(m["__decorate"])([_l.Action],gl.prototype,"remove_block_validation",void 0),gl=Object(m["__decorate"])([Object(C["b"])({components:{BModal:mo["a"]}})],gl);var ml=gl,kl=ml,yl=(o("7433"),Object(P["a"])(kl,el,tl,!1,null,null,null)),jl=(yl.exports,function(){var e=this,t=e._self._c,o=e._self._setupProxy;return t("fieldset",{staticClass:"undo-redo-button-group btn-group",attrs:{disabled:o.isTreeSaving}},[t("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:o.undoTooltip,expression:"undoTooltip",modifiers:{hover:!0}}],staticClass:"btn btn-sm btn-outline-primary",attrs:{disabled:!o.hasPreviousSnapshot,"data-cy":"undo--btn"},on:{click:function(e){return e.stopPropagation(),o.handleUndo.apply(null,arguments)}}},[t("font-awesome-icon",{attrs:{icon:["fas","undo"]}})],1),t("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:o.redoTooltip,expression:"redoTooltip",modifiers:{hover:!0}}],staticClass:"btn btn-sm btn-outline-primary",attrs:{disabled:!o.hasFutureSnapshot,"data-cy":"redo--btn"},on:{click:function(e){return e.stopPropagation(),o.handleRedo.apply(null,arguments)}}},[t("font-awesome-icon",{attrs:{icon:["fas","redo"]}})],1)])}),Ol=[];function wl(){return Object(f["inject"])("store")}var Cl=o("6815"),xl=Object(f["defineComponent"])({__name:"UndoRedoButtonGroup",setup(e){const t=wl(),o=Object(Cl["a"])(),i=Object(f["computed"])(()=>t.getters["undoRedo/hasPreviousSnapshot"]),a=Object(f["computed"])(()=>t.getters["undoRedo/hasFutureSnapshot"]),s=Object(f["computed"])(()=>t.getters["undoRedo/currentSnapshot"]),r=Object(f["computed"])(()=>t.getters["isTreeSaving"]),n=Object(f["computed"])(()=>t.getters["flow/activeFlow"]),c=Object(f["computed"])(()=>i.value?E["b"].trans("flow-builder.undo"):""),l=Object(f["computed"])(()=>a.value?E["b"].trans("flow-builder.redo"):"");async function d(){window.postMessage(zt,"*"),t.dispatch("undoRedo/undoAndUpdateState",null,{root:!0}),await p()}async function u(){window.postMessage(zt,"*"),t.dispatch("undoRedo/redoAndUpdateState",null,{root:!0}),await p()}async function p(){var e;const{routeName:t,routeParams:i}=s.value;if(console.debug("navigating to",t,i),null!==t&&void 0!==t)try{await o.push({name:t,params:{id:(null===(e=n.value)||void 0===e?void 0:e.uuid)||"",mode:"edit",...i}})}catch(a){"NavigationDuplicated"!==a.name&&console.error(a)}}return{__sfc:!0,store:t,router:o,hasPreviousSnapshot:i,hasFutureSnapshot:a,currentSnapshot:s,isTreeSaving:r,activeFlow:n,undoTooltip:c,redoTooltip:l,handleUndo:d,handleRedo:u,navigateToDeepLink:p}}}),El=xl,Il=Object(P["a"])(El,jl,Ol,!1,null,null,null),Bl=Il.exports,Sl=function(){var e=this,t=e._self._c,o=e._self._setupProxy;return t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:o.tooltip,expression:"tooltip",modifiers:{hover:!0,bottom:!0}}],key:o.componentKey,staticClass:"block-exit flex-grow-1",on:{mousemove:o.updateCursorPosition,click:function(t){e.exit.destination_block&&o.handleRemoveConnection()}}},[t("div",{staticClass:"block-exit-name badge badge-warning w-100",class:o.exitNameClass,on:{mouseenter:function(e){o.isHovered=!0},mouseleave:function(e){o.isHovered=!1}}},[o.isHovered||o.isExitActivatedForCreate?e._e():t("div",{staticClass:"d-flex flex-row justify-content-between align-items-center w-100 px-1"},[t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:e.exit.test,expression:"exit.test",modifiers:{hover:!0,bottom:!0}}],staticClass:"block-exit-name-text"},[e._v(" "+e._s(e.exit.name||"(untitled)")+" ")]),e._t("middle")],2),t("span",{staticClass:"align-self-center d-flex"},[null==e.exit.destination_block?[o.isHovered||o.isExitActivatedForCreate?t("plain-draggable",{key:`exit/${e.exit.uuid}/pseudo-block-handle`,staticClass:"btn btn-xs btn-flat p-0",attrs:{id:`exit/${e.exit.uuid}/pseudo-block-handle`,"drag-handle-id":"exit/"+e.exit.uuid,"is-editable":o.isEditable},on:{initialized:function(e){return o.handleDraggableInitializedFor(e)},dragStarted:function(e){return o.onCreateExitDragStarted(e)},dragged:function(e){return o.onCreateExitDragged(e)},dragEnded:function(e){return o.onCreateExitDragEnded(e)},destroyed:function(e){return o.handleDraggableDestroyedFor()}}},[t("i",{staticClass:"glyphicon glyphicon-move"})]):e._e(),o.isConnectionCreateActive&&o.isExitActivatedForCreate&&o.livePosition?[t("div",{staticClass:"btn btn-xs p-0 text-white",attrs:{id:`exit/${e.exit.uuid}/handle`}},[t("i",{staticClass:"glyphicon glyphicon-move"})]),t("connection",{key:`exit/${e.exit.uuid}/line-for-draft`,attrs:{color:o.connectionColorAtSourceDragged,"repaint-cache-key-generator":o.generateConnectionLayoutKeyFor,source:e.block,target:o.blocksById[e.exit.destination_block],exit:e.exit,position:o.livePosition}})]:e._e()]:e._e(),null!=e.exit.destination_block?[t("div",{key:`exit/${e.exit.uuid}/handle`,staticClass:"btn btn-xs btn-flat",attrs:{id:`exit/${e.exit.uuid}/handle`}},[o.isHovered?t("font-awesome-icon",{staticClass:"text-danger",attrs:{title:"Click to remove this connection",icon:["far","times-circle"]}}):e._e()],1),t("connection",{key:`exit/${e.exit.uuid}/line`,attrs:{color:o.connectionColorForKnowDestination,"repaint-cache-key-generator":o.generateConnectionLayoutKeyFor,source:o.livePosition?null:e.block,target:o.blocksById[e.exit.destination_block],exit:e.exit,position:o.livePosition},on:{lineMouseIn:function(e){return o.setIsLineHovered(!0)},lineMouseClickedIn:function(e){return o.setIsLineClicked(!0)},lineMouseClickedOut:function(e){return o.setIsLineClicked(!1)},lineMouseOut:function(e){return o.setIsLineHovered(!1)}}})]:e._e(),e._t("right")],2)])])},Pl=[],Ml=Object(f["defineComponent"])({__name:"BlockExit",props:{block:null,exit:null},emits:["connection-create-start","connection-create-end"],setup(e,t){let{emit:o}=t;const i=e,a=wl(),s=Xt.CONNECTING,r=Xt.DEFAULT,n=10,c=Object(f["ref"])(!1),l=Object(f["ref"])(!1),d=Object(f["ref"])(!1),u=Object(f["ref"])(!1),p=Object(f["ref"])(null),b=Object(f["ref"])(null),h=Object(f["ref"])(0),v=Object(f["computed"])(()=>a.getters["builder/isEditable"]),_=Object(f["computed"])(()=>a.state.builder.operations),g=Object(f["computed"])(()=>null!==_.value[$t["a"].CONNECTION_CREATE].data),m=Object(f["computed"])(()=>{var e;const{data:t}=_.value[$t["a"].CONNECTION_CREATE];return(null===(e=null===t||void 0===t?void 0:t.source)||void 0===e?void 0:e.exitId)===i.exit.uuid}),k=Object(f["computed"])(()=>v.value?void 0!==i.exit.destination_block?E["b"].trans("flow-builder.tooltip-remove-connection"):E["b"].trans("flow-builder.tooltip-new-connection"):""),y=Object(f["computed"])(()=>({"is-initiating":null==i.exit.destination_block&&c.value,"is-connected":null!=i.exit.destination_block,"is-disconnected":null==i.exit.destination_block&&!c.value,"is-highlighted-from-connection":null!=i.exit.destination_block&&(d.value||u.value),"is-connected-and-on-hover":null!=i.exit.destination_block&&l.value})),j=Object(f["computed"])(()=>a.getters["builder/blocksById"]),O=Object(f["computed"])(()=>a.state.builder.draggableForExitsByUuid);function w(){h.value+=1}function C(e){b.value={x:e.clientX+window.scrollX,y:e.clientY+window.scrollY}}function x(){A(!1),a.commit("builder/deactivateConnectionFromExitUuid",{exitUuid:i.exit.uuid},{root:!0}),a.dispatch("builder/removeConnectionFrom",{block:i.block,exit:i.exit},{root:!0}),this.forceRender()}function I(e){let{draggable:t}=e;const o=i.exit.uuid;O.value[o]=t;const{left:a,top:s}=t;console.debug("Block","handleDraggableInitializedFor",{blockId:i.block.uuid,exitId:o,coords:{left:a,top:s}})}function B(){const e=i.exit.uuid;delete O.value[e]}function S(e){const t=b.value.x-e.left-n,o=b.value.y-e.top-n;e.left+=t,e.top+=o}function P(e){let{draggable:t}=e;a.commit("builder/setIsConnectionCreationInProgress",{value:!0},{root:!0}),window.postMessage(zt,"*"),c.value=!0,o("connection-create-start");const{left:s,top:r}=t;a.dispatch("builder/initializeConnectionCreateWith",{block:i.block,exit:i.exit,position:{x:s,y:r}},{root:!0}),S(t)}function M(e){let{position:{left:t,top:o}}=e;p.value={x:t,y:o}}function F(e){let{draggable:t}=e;a.commit("builder/setIsConnectionCreationInProgress",{value:!1},{root:!0}),c.value=!1,o("connection-create-end");const{x:i,y:s}=_.value[$t["a"].CONNECTION_CREATE].data.position;console.debug("Block","onCreateExitDragEnded","operation.data.position",{left:i,top:s}),console.debug("Block","onCreateExitDragEnded","reset",{left:t.left,top:t.top}),Object.assign(t,{left:i,top:s}),a.dispatch("builder/applyConnectionCreate",null,{root:!0}),p.value=null}function T(e){Object(f["nextTick"])(()=>{d.value=e})}function A(e){Object(f["nextTick"])(()=>{u.value=e})}return{__sfc:!0,store:a,connectionColorAtSourceDragged:s,connectionColorForKnowDestination:r,ICON_SIZE:n,props:i,emit:o,isDragged:c,isHovered:l,isLineHovered:d,isLinePermanentlyActive:u,livePosition:p,cursorPosition:b,componentKey:h,isEditable:v,operations:_,isConnectionCreateActive:g,isExitActivatedForCreate:m,tooltip:k,exitNameClass:y,blocksById:j,draggableForExitsByUuid:O,forceRender:w,updateCursorPosition:C,handleRemoveConnection:x,handleDraggableInitializedFor:I,handleDraggableDestroyedFor:B,adjustDraggablePosition:S,onCreateExitDragStarted:P,onCreateExitDragged:M,onCreateExitDragEnded:F,setIsLineHovered:T,setIsLineClicked:A,generateConnectionLayoutKeyFor:$t["d"]}}}),Fl=Ml,Tl=(o("bb96"),Object(P["a"])(Fl,Sl,Pl,!1,null,null,null)),Al=Tl.exports,Rl=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"block-toolbar d-flex justify-content-between"},[t("div",{staticClass:"header-actions-left"},[e.isEditable?[e.isBlockSelected?t("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.trans("flow-builder.deselect-block"),expression:"trans('flow-builder.deselect-block')",modifiers:{hover:!0}}],staticClass:"cursor-pointer text-info",attrs:{icon:["far","check-circle"],"data-cy":"block-toolbar--deselect-block--btn"},on:{click:function(t){t.stopPropagation(),e.isEditable&&e.block_deselect({blockId:e.block.uuid})}}}):e._e(),e.isBlockSelected?e._e():t("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.trans("flow-builder.select-block"),expression:"trans('flow-builder.select-block')",modifiers:{hover:!0}}],staticClass:"cursor-pointer",attrs:{icon:["far","circle"],"data-cy":"block-toolbar--select-block--btn"},on:{click:function(t){t.stopPropagation(),e.isEditable&&e.block_select({blockId:e.block.uuid})}}})]:e._e()],2),t("div",{staticClass:"header-actions-right d-flex"},[e._t("right"),e.isEditable?t("div",{staticClass:"mr-1 ml-2"},[e.isDeleting?t("div",[t("button",{staticClass:"btn btn-light btn-xs",on:{click:function(t){t.stopPropagation(),e.isDeleting=!1}}},[t("small",[e._v(e._s(e.trans("flow-builder.cancel")))])]),t("button",{staticClass:"btn btn-xs ml-1",class:{"btn-danger":!e.isWaitingForConnection&&!e.isActivatedByConnection,"btn-secondary":e.isWaitingForConnection||e.isActivatedByConnection},attrs:{"data-cy":"block-toolbar--confirm-deletion--btn"},on:{click:function(t){return t.stopPropagation(),e.handleDeleteBlock.apply(null,arguments)}}},[t("small",[e._v(e._s(e.trans("flow-builder.delete-block")))])])]):e._e(),e.isDeleting?e._e():t("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.trans("flow-builder.tooltip-delete-block"),expression:"trans('flow-builder.tooltip-delete-block')",modifiers:{hover:!0}}],staticClass:"cursor-pointer",class:{"text-danger":!e.isWaitingForConnection&&!e.isActivatedByConnection},attrs:{icon:["far","trash-alt"],"data-cy":"block-toolbar--delete--btn"},on:{click:function(t){t.stopPropagation(),e.isDeleting=!0}}})],1):e._e(),t("div",{staticClass:"mr-1 ml-2"},[e.isEditable?t("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.trans("flow-builder.tooltip-duplicate-block"),expression:"trans('flow-builder.tooltip-duplicate-block')",modifiers:{hover:!0}}],staticClass:"cursor-pointer",attrs:{icon:["fac","copy"],"data-cy":"block-toolbar--duplicate--btn"},on:{click:function(t){return t.stopPropagation(),e.handleDuplicateBlock.apply(null,arguments)}}}):e._e()],1)],2)])},Vl=[];const Ll=Object(ae["e"])("builder"),Nl=Object(ae["e"])("flow");Object(ae["e"])("validation"),Object(ae["e"])("undoRedo");let Dl=class extends(Object(C["c"])(E["a"])){constructor(){super(...arguments),this.isDeleting=!1}async handleDeleteBlock(){await this.block_deselect({blockId:this.block.uuid}),await this.flow_removeBlock({blockId:this.block.uuid}),this.isDeleting=!1,this.$emit("after-delete")}async handleDuplicateBlock(){try{const e=await this.flow_duplicateBlock({blockId:this.block.uuid});await this.$router.replace({name:"block-selected-details",params:{blockId:e.uuid}}),this.$emit("after-block-duplicate",{duplicateBlockUuid:e.uuid})}catch(e){console.error("Failed to duplicate a block:",e)}}};Object(m["__decorate"])([Object(x["b"])()],Dl.prototype,"block",void 0),Object(m["__decorate"])([Object(x["b"])()],Dl.prototype,"isBlockSelected",void 0),Object(m["__decorate"])([Object(x["b"])()],Dl.prototype,"isEditorVisible",void 0),Object(m["__decorate"])([Object(x["b"])()],Dl.prototype,"isWaitingForConnection",void 0),Object(m["__decorate"])([Object(x["b"])()],Dl.prototype,"isActivatedByConnection",void 0),Object(m["__decorate"])([Ll.Getter],Dl.prototype,"isEditable",void 0),Object(m["__decorate"])([Nl.Action],Dl.prototype,"block_select",void 0),Object(m["__decorate"])([Nl.Action],Dl.prototype,"block_deselect",void 0),Object(m["__decorate"])([Nl.Action],Dl.prototype,"flow_removeBlock",void 0),Object(m["__decorate"])([Nl.Action],Dl.prototype,"flow_duplicateBlock",void 0),Dl=Object(m["__decorate"])([Object(C["b"])({})],Dl);var $l=Dl,Ul=$l,Wl=Object(P["a"])(Ul,Rl,Vl,!1,null,null,null),Hl=(Wl.exports,function(){var e=this,t=e._self._c,o=e._self._setupProxy;return t("div",{staticClass:"block-title d-flex justify-content-between"},[t("p",{staticClass:"block-type"},[e._v(" "+e._s(o.lang.trans("flow-builder."+e.block.type))+" ")]),t("div",{staticClass:"d-flex"},[e._t("right"),o.activeFlow.first_block_id===e.block.uuid?t("i",{staticClass:"glyphicon glyphicon-arrow-down"}):e._e()],2)])}),zl=[],Gl=Object(f["defineComponent"])({__name:"BlockTitle",props:{block:null},setup(e){const t=e,o=wl(),i=Object(f["computed"])(()=>o.getters["flow/activeFlow"]);return{__sfc:!0,store:o,props:t,activeFlow:i,lang:E["b"]}}}),ql=Gl,Kl=Object(P["a"])(ql,Hl,zl,!1,null,null,null),Zl=Kl.exports,Xl=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"resource-editor-cell d-flex flex-column"},[e.contentType===e.SupportedContentType.TEXT?t("resource-variant-text-editor",{attrs:{index:e.index,mode:e.mode,"resource-id":e.resource.uuid,"resource-variant":e.resourceVariant},on:{afterResourceVariantChanged:function(t){return e.$emit("change")}}}):e._e(),e.contentType===e.SupportedContentType.AUDIO?t("div",[t("validation-message",{attrs:{"message-key":`resource/${e.resource.uuid}/values/${e.index}/value`},scopedSlots:e._u([{key:"input-control",fn:function(o){let{isValid:i}=o;return[t("audio-library-selector",{attrs:{"audio-files":e.availableAudioFiles,"lang-id":e.languageId,"resource-id":e.resource.uuid,"selected-audio-uri":e.resourceVariant.value},on:{change:function(t){return e.$emit("change")}}})]}}],null,!1,4105706637)}),e.can(["edit-content","send-call-to-records"],!0)&&!e.resourceVariant.value?t("phone-recorder",{attrs:{"recording-key":`${e.block.uuid}:${e.languageId}`},on:{finish:function(t){return e.$emit("change")}}}):e._e(),e.resourceVariant.value?e._e():[t("upload-monitor",{attrs:{"upload-key":`${e.block.uuid}:${e.languageId}`}}),t("div",{staticClass:"d-flex mt-2 mb-3"},[e.isEditable&&e.isFeatureAudioUploadEnabled?t("button",{directives:[{name:"flow-uploader",rawName:"v-flow-uploader",value:{target:e.route("trees.resumeableAudioUpload"),token:`${e.block.uuid}:${e.languageId}`,accept:"audio/*"},expression:"{\n            target: route('trees.resumeableAudioUpload'),\n            token: `${block.uuid}:${languageId}`,\n            accept: 'audio/*'}"}],staticClass:"btn btn-primary ivr-buttons",on:{fileError:function(t){return e.handleFileErrorFor(t)},fileSuccess:function(t){return e.handleFileSuccessFor(`${e.block.uuid}:${e.languageId}`,e.languageId,t)},filesSubmitted:function(t){return e.handleFilesSubmittedFor(`${e.block.uuid}:${e.languageId}`,t)}}},[t("font-awesome-icon",{staticClass:"fa-btn",attrs:{icon:["fac","upload"]}}),e._v(" "+e._s(e._f("trans")("flow-builder.upload-audio"))+" ")],1):e._e(),e.can(["edit-content","send-call-to-records"],!0)&&e.isFeatureAudioUploadEnabled?t("button",{staticClass:"btn btn-primary ivr-buttons ml-2",on:{click:function(t){return t.preventDefault(),e.triggerRecordViaPhoneFor(e.languageId)}}},[t("font-awesome-icon",{staticClass:"fa-btn",attrs:{icon:["fac","record-audio"]}}),e._v(" "+e._s(e._f("trans")("flow-builder.record-audio"))+" ")],1):e._e()])]],2):e._e()],1)},Jl=[],Yl=o("2930"),Ql=o.n(Yl);const ed=(e,t,o)=>{e.dispatchEvent(Object(y["extend"])(new Event(t,{bubbles:!0,cancelable:!0}),{data:o}))};let td=class extends f["default"]{};td=Object(m["__decorate"])([Object(C["b"])({directives:{"flow-uploader":{bind(e,t){const{accept:o,target:i,token:a}=t.value,s=new Ql.a({target:i,singleFile:!0,chunkSize:524288,query:{upload_token:a}});s.support&&(Object(y["extend"])(e.style,{overflow:"hidden"}),s.assignBrowse([e]),Object(y["chain"])(e.children).find({tagName:"INPUT",type:"file"}).assign({accept:o}).value(),s.on("filesSubmitted",(t,o)=>ed(e,"filesSubmitted",{files:t,uploader:s})),s.on("fileProgress",(t,o)=>ed(e,"fileProgress",{file:t,uploader:s})),s.on("fileSuccess",(t,o)=>ed(e,"fileSuccess",{file:t,uploader:s,json:o})),s.on("error",(t,o)=>ed(e,"fileError",{file:o,uploader:s,message:t})))}}}})],td);var od=td;const id=Object(ae["e"])("flow"),ad=Object(ae["e"])("builder");let sd=class extends(Object(C["c"])(od,rl,jc["a"],E["a"])){constructor(){super(...arguments),this.SupportedContentType=Z["SupportedContentType"]}get resource(){return this.resourcesByUuidOnActiveFlow[this.block.config.prompt]}triggerRecordViaPhoneFor(e){this.$store.commit("setAudioRecordingConfigVisibilityForSelectedBlock",{langId:e,isVisible:!0})}handleFilesSubmittedFor(e,t){let{data:o}=t;console.debug("call handleFilesSubmittedFor"),this.$store.dispatch("multimediaUpload/uploadFiles",{...o,key:e}),this.$emit("change")}handleFileSuccessFor(e,t,o){const{data:{json:i}}=o,{audio_file_id:a,audio_uuid:s,created_at:{date:r},description:n,duration_seconds:c,uri:l}=JSON.parse(i),d=n.split(".")[n.split(".").length-1],u={id:a,audio_uuid:s,description:n,language_id:t,duration_seconds:c,original_extension:d,created_at:r,uri:l};this.resource_setOrCreateValueModeSpecific({resourceId:this.resource.uuid,filter:{language_id:t,content_type:Z["SupportedContentType"].AUDIO,modes:[Z["SupportedMode"].IVR]},value:l}),o.target.blur(),this.pushAudioIntoLibrary(u),this.$emit("change")}handleFileErrorFor(e){const{data:{message:t}}=e;console.debug("handleFileErrorFor",t),this.$emit("change")}get resourceVariant(){return Object(fo["e"])(this.resource,{language_id:this.languageId,content_type:this.contentType,modes:[this.mode]})}get index(){return Object(fo["d"])(this.resource,{language_id:this.languageId,content_type:this.contentType,modes:[this.mode]})}};Object(m["__decorate"])([Object(x["b"])({required:!0})],sd.prototype,"block",void 0),Object(m["__decorate"])([Object(x["b"])({required:!0})],sd.prototype,"contentType",void 0),Object(m["__decorate"])([Object(x["b"])({required:!0})],sd.prototype,"languageId",void 0),Object(m["__decorate"])([Object(x["b"])({required:!0})],sd.prototype,"mode",void 0),Object(m["__decorate"])([ae["b"]],sd.prototype,"availableAudioFiles",void 0),Object(m["__decorate"])([ae["b"]],sd.prototype,"isFeatureAudioUploadEnabled",void 0),Object(m["__decorate"])([ae["c"]],sd.prototype,"pushAudioIntoLibrary",void 0),Object(m["__decorate"])([id.Getter],sd.prototype,"resourcesByUuidOnActiveFlow",void 0),Object(m["__decorate"])([id.Getter],sd.prototype,"activeFlow",void 0),Object(m["__decorate"])([id.Action],sd.prototype,"resource_setOrCreateValueModeSpecific",void 0),Object(m["__decorate"])([ad.Getter],sd.prototype,"isEditable",void 0),sd=Object(m["__decorate"])([Object(x["a"])({})],sd);var rd=sd,nd=rd,cd=(o("33da"),Object(P["a"])(nd,Xl,Jl,!1,null,"74b1a524",null)),ld=cd.exports,dd=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.resource?t("div",{staticClass:"per-language-resource-editor-row d-flex flex-column"},e._l(e.modes,(function(o){return t("div",{key:o,staticClass:"mbx-4"},[t("header",{staticClass:"d-flex mb-2"},[e.iconsMap.get(o)?t("font-awesome-icon",{class:{"custom-icons":"fac"===e.iconsMap.get(o)[0],"library-icons":"fac"!==e.iconsMap.get(o)[0]},attrs:{icon:e.iconsMap.get(o)}}):e._e(),t("h6",{staticClass:"ml-3 mb-0 align-self-center"},[e._v(" "+e._s(e._f("trans")(`flow-builder.${o.toLowerCase()}-content`))+" ")])],1),e._l(e.discoverContentTypesFor(o),(function(i){return t("resource-editor-cell",{key:i,attrs:{block:e.block,"content-type":i,"language-id":e.languageId,mode:o}})}))],2)})),0):e._e()},ud=[];const pd=Object(ae["e"])("flow");Object(ae["e"])("builder");let bd=class extends(Object(C["c"])(od,rl,jc["a"],E["a"])){constructor(){super(...arguments),this.iconsMap=new Map([[Z["SupportedMode"].SMS,["fac","message"]],[Z["SupportedMode"].TEXT,["fac","text"]],[Z["SupportedMode"].USSD,["fac","ussd"]],[Z["SupportedMode"].IVR,["fac","audio"]],[Z["SupportedMode"].RICH_MESSAGING,["far","comment-dots"]],[Z["SupportedMode"].OFFLINE,["fas","mobile-alt"]]]),this.discoverContentTypesFor=fo["b"]}get resource(){return this.resourcesByUuidOnActiveFlow[this.block.config.prompt]}get modes(){return Object(rc["e"])(this.activeFlow.supported_modes)}};Object(m["__decorate"])([Object(x["b"])({required:!0})],bd.prototype,"block",void 0),Object(m["__decorate"])([Object(x["b"])({required:!0})],bd.prototype,"languageId",void 0),Object(m["__decorate"])([pd.Getter],bd.prototype,"resourcesByUuidOnActiveFlow",void 0),Object(m["__decorate"])([pd.Getter],bd.prototype,"activeFlow",void 0),bd=Object(m["__decorate"])([Object(x["a"])({})],bd);var fd=bd,hd=fd,vd=(o("ef1c"),Object(P["a"])(hd,dd,ud,!1,null,"31b1520d",null)),_d=vd.exports,gd=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.resource?t("div",{staticClass:"per-mode-resource-editor-row d-flex flex-wrap"},e._l(e.languages,(function(o){let{id:i,label:a}=o;return t("div",{key:i,staticClass:"col-3"},[t("header",{staticClass:"d-flex"},[t("div",{staticClass:"mr-auto"},[e._v(" "+e._s(a||e.trans("flow-builder.unknown-language"))+" ")])]),e._l(e.discoverContentTypesFor(e.mode),(function(o){return t("resource-editor-cell",{key:o,attrs:{block:e.block,"content-type":o,"language-id":i,mode:e.mode},on:{change:function(t){return e.$emit("change")}}})}))],2)})),0):e._e()},md=[];const kd=Object(ae["e"])("flow");Object(ae["e"])("builder");let yd=class extends(Object(C["c"])(od,rl,jc["a"],E["a"])){constructor(){super(...arguments),this.discoverContentTypesFor=fo["b"]}get resource(){return this.resourcesByUuidOnActiveFlow[this.block.config.prompt]}get languages(){var e;return Object(rc["d"])(null!==(e=this.activeFlow.languages)&&void 0!==e?e:[])}};Object(m["__decorate"])([Object(x["b"])({required:!0})],yd.prototype,"block",void 0),Object(m["__decorate"])([Object(x["b"])({required:!0})],yd.prototype,"mode",void 0),Object(m["__decorate"])([kd.Getter],yd.prototype,"resourcesByUuidOnActiveFlow",void 0),Object(m["__decorate"])([kd.Getter],yd.prototype,"activeFlow",void 0),yd=Object(m["__decorate"])([Object(x["a"])({})],yd);var jd=yd,Od=jd,wd=Object(P["a"])(Od,gd,md,!1,null,null,null),Cd=wd.exports,xd=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.languages.length>0?t("div",{staticClass:"per-language-resource-editor",attrs:{"data-cy":"resource-editor"}},[t("div",[t("b-tabs",e._l(e.languages,(function(o){let{id:i,label:a,iso_639_3:s}=o;return t("b-tab",{key:i,scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{attrs:{"data-cy":"resource-editor--tab--"+s}},[e._v(" "+e._s(e.trans(a||"flow-builder.unknown-language"))+" ")])]},proxy:!0}],null,!0)},[t("per-language-resource-editor-row",{staticClass:"tab-content-style",attrs:{block:e.block,"language-id":i}})],1)})),1)],1)]):e._e()},Ed=[],Id=o("700c");f["default"].use(Id["a"]);const Bd=Object(ae["e"])("flow");let Sd=class extends(Object(C["c"])(od,rl,jc["a"],E["a"])){get languages(){var e;return Object(rc["d"])(null!==(e=this.activeFlow.languages)&&void 0!==e?e:[])}};Object(m["__decorate"])([Object(x["b"])({required:!0})],Sd.prototype,"block",void 0),Object(m["__decorate"])([Bd.Getter],Sd.prototype,"activeFlow",void 0),Sd=Object(m["__decorate"])([Object(x["a"])({})],Sd);var Pd=Sd,Md=Pd,Fd=(o("2344"),Object(P["a"])(Md,xd,Ed,!1,null,"f5de1cda",null)),Td=Fd.exports,Ad=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.modes.length>0?t("div",{staticClass:"per-mode-resource-editor"},[t("div",{staticClass:"d-flex flex-column"},e._l(e.modes,(function(o,i){return t("div",{key:o,staticClass:"resource-panel",class:{"radius-on-top":0===i,"radius-on-bottom":i===e.modes.length-1}},[t("div",{staticClass:"resource-panel-heading p-2 d-flex align-items-center",class:{"radius-on-top":0===i,"radius-on-bottom":i===e.modes.length-1},on:{click:function(t){return e.updateIsPanelExpanded(`${e.block.uuid}-${o}`)}}},[t("div",{staticClass:"mr-auto"},[t("header",{staticClass:"d-flex channel-name"},[e.iconsMap.get(o)?t("font-awesome-icon",{staticClass:"ml-3",class:{"custom-icons":"fac"===e.iconsMap.get(o)[0],"library-icons":"fac"!==e.iconsMap.get(o)[0]},attrs:{icon:e.iconsMap.get(o),size:"lg"}}):e._e(),t("h6",{staticClass:"ml-3 align-self-center mb-0"},[e._v(" "+e._s(e._f("trans")(`flow-builder.${o.toLowerCase()}-content`))+" ")])],1)]),t("div",{staticClass:"ml-auto"},[e._t("right",null,{mode:o}),t("font-awesome-icon",{staticClass:"cursor-pointer text-primary align-self-center",attrs:{icon:["fas",!0===e.isPanelExpanded[`${e.block.uuid}-${o}`]?"angle-up":"angle-down"]}})],2)]),t("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.isPanelExpanded[`${e.block.uuid}-${o}`],expression:"isPanelExpanded[`${block.uuid}-${mode}`] === true"}],staticClass:"resource-panel-body p-2 collapse multi-collapse show",attrs:{id:`collapse-lang-panel-${e.block.uuid}-${o}`}},[t("per-mode-resource-editor-row",{attrs:{block:e.block,mode:o},on:{change:function(t){return e.$emit("change")}}})],1)])})),0)]):e._e()},Rd=[];const Vd=Object(ae["e"])("flow");let Ld=class extends(Object(C["c"])(od,rl,jc["a"],E["a"])){constructor(){super(...arguments),this.iconsMap=new Map([[Z["SupportedMode"].SMS,["fac","message"]],[Z["SupportedMode"].TEXT,["fac","text"]],[Z["SupportedMode"].USSD,["fac","ussd"]],[Z["SupportedMode"].IVR,["fac","audio"]],[Z["SupportedMode"].RICH_MESSAGING,["far","comment-dots"]],[Z["SupportedMode"].OFFLINE,["fas","mobile-alt"]]]),this.expandedPanels={},this.expandedPanelsOverridden={}}get modes(){return Object(rc["e"])(this.activeFlow.supported_modes)}get hasOpenPanelsOverridden(){return void 0===this.openResources||this.openResources.length>0}overrideOpenResources(e){this.expandedPanelsOverridden=void 0!==e?e.reduce((e,t)=>({...e,[t]:!0}),{}):{}}get isPanelExpanded(){return this.hasOpenPanelsOverridden?this.expandedPanelsOverridden:this.expandedPanels}updateIsPanelExpanded(e){this.hasOpenPanelsOverridden?this.expandedPanelsOverridden={...this.expandedPanelsOverridden,[e]:!this.expandedPanelsOverridden[e]}:this.expandedPanels={...this.expandedPanels,[e]:!this.expandedPanels[e]}}};Object(m["__decorate"])([Object(x["b"])({required:!0})],Ld.prototype,"block",void 0),Object(m["__decorate"])([Object(x["b"])({})],Ld.prototype,"openResources",void 0),Object(m["__decorate"])([Vd.Getter],Ld.prototype,"activeFlow",void 0),Object(m["__decorate"])([Object(x["d"])("openResources")],Ld.prototype,"overrideOpenResources",null),Ld=Object(m["__decorate"])([Object(x["a"])({})],Ld);var Nd=Ld,Dd=Nd,$d=(o("e034"),Object(P["a"])(Dd,Ad,Rd,!1,null,"6f3509c8",null)),Ud=$d.exports,Wd=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"resource-variant-text-editor mb-0",attrs:{"data-cy":e.mode+"-resource-variant-text--editor"}},[t("validation-message",{attrs:{"message-key":`resource/${e.resourceId}/values/${e.index}/value`},scopedSlots:e._u([{key:"input-control",fn:function(o){let{isValid:i}=o;return[t("expression-input",{ref:"input",staticClass:"mb-0",attrs:{label:e.label,"prepend-text":e.prependText,placeholder:e.placeholder||e.defaultPlaceholder,"current-expression":e.content,rows:e.rows,"valid-state":i,"disabled-auto-complete":e.disabledAutoComplete,"cypress-data-attribute":("resource--"+e.mode).toLowerCase()},on:{commitExpressionChange:e.commitExpressionChange}}),e.isSms||e.isUssd?t("div",{staticClass:"content-length-info",class:{"font-weight-bold":e.isSms&&e.smsCharInfo.bytes>0}},[e._v(" "+e._s(e.contentLengthInfo)+" ")]):e._e()]}}])})],1)},Hd=[],zd=o("a2e5"),Gd=o.n(zd),qd=o("650f");const Kd=Object(ae["e"])("flow");let Zd=class extends(Object(C["c"])(E["a"])){get defaultPlaceholder(){return this.trans(`flow-builder.enter-${this.mode.toLowerCase()}-content`)}get content(){return this.resourceVariant.value}get contentLengthInfo(){const e=this.smsCharInfo.bytes,t="Unicode"===this.smsCharInfo.characterSet,o=this.smsCharInfo.parts.length,i=this.trans("flow-builder.x-characters",{charCount:e}),a=t?this.trans("flow-builder.x-unicode-pages",{smsPagesCount:o}):this.trans("flow-builder.x-pages",{smsPagesCount:o});return this.isSms&&o>1?`${i} (${a})`:i}commitExpressionChange(e){const{resourceId:t,mode:o,resourceVariant:i}=this,{language_id:a,content_type:s,mime_type:r}=i,n={language_id:a,content_type:s,modes:[o]};void 0!==r&&(n.mime_type=r),this.$emit("beforeResourceVariantChanged",{variant:i,resourceId:t,value:e}),this.resource_setOrCreateValueModeSpecific({resourceId:t,filter:n,value:e}),this.$emit("afterResourceVariantChanged",{variant:i,resourceId:t,value:e})}get isSms(){return this.mode===qd["a"].SMS}get isUssd(){return this.mode===qd["a"].USSD}get smsCharInfo(){return Gd.a.split(this.content)}};Object(m["__decorate"])([Object(x["b"])({default:null})],Zd.prototype,"index",void 0),Object(m["__decorate"])([Object(x["b"])()],Zd.prototype,"resourceId",void 0),Object(m["__decorate"])([Object(x["b"])({default:""})],Zd.prototype,"label",void 0),Object(m["__decorate"])([Object(x["b"])({type:String,default:""})],Zd.prototype,"prependText",void 0),Object(m["__decorate"])([Object(x["b"])()],Zd.prototype,"placeholder",void 0),Object(m["__decorate"])([Object(x["b"])()],Zd.prototype,"resourceVariant",void 0),Object(m["__decorate"])([Object(x["b"])()],Zd.prototype,"mode",void 0),Object(m["__decorate"])([Object(x["b"])({default:2})],Zd.prototype,"rows",void 0),Object(m["__decorate"])([Object(x["b"])({type:Boolean,default:!1})],Zd.prototype,"disabledAutoComplete",void 0),Object(m["__decorate"])([Kd.Action],Zd.prototype,"resource_setOrCreateValueModeSpecific",void 0),Zd=Object(m["__decorate"])([Object(x["a"])({components:{ExpressionInput:Ce}})],Zd);var Xd=Zd,Jd=Xd,Yd=(o("e1f5"),Object(P["a"])(Jd,Wd,Hd,!1,null,"304ae980",null)),Qd=(Yd.exports,function(){var e=this,t=e._self._c;return t("div",{staticClass:"resource-viewer-block border p-2"},[t("div",{staticClass:"block-header-1 d-flex"},[t("div",{staticClass:"mr-auto text-primary"},[t("h5",[e._v(e._s(e.blockLabel))])]),t("div",{staticClass:"ml-auto"},[t("h6",[e._v(e._s(e.trans("flow-builder."+e.block.type).toUpperCase()))])])]),t("div",{staticClass:"block-content"},[t("fieldset",{attrs:{disabled:!e.isEditable}},[t("div",{staticClass:"d-flex flex-wrap"},[t("simplified-name-editor",{staticClass:"col-lg-3 col-sm-6 col-xs-12 p-0",attrs:{block:e.block},on:{change:function(t){return e.$emit("change")}}}),e.hasContent?e._e():t("div",{staticClass:"col-lg-3 col-sm-6 col-xs-12 pl-1 mb-3"},[t("div",{staticClass:"badge badge-info"},[e._v(" "+e._s(e.trans("flow-builder.no-content-block-info"))+" ")])]),e._t("tags",null,{block:e.block})],2),e.hasContent?t("div",[t("per-mode-resource-editor",{attrs:{block:e.block},on:{change:function(t){return e.$emit("change")}}})],1):e._e()])])])}),eu=[],tu={name:"ResourceViewerBlock",mixins:[E["b"]],props:{block:{required:!0,type:Object}},computed:{...Object(h["c"])("flow",["block_classesConfig"]),...Object(h["c"])("builder",["isEditable"]),blockLabel(){return this.block.label>""?this.block.label:E["b"].trans("flow-builder.untitled-block")},hasContent(){return void 0!==this.block.config.prompt}}},ou=tu,iu=(o("6537"),Object(P["a"])(ou,Qd,eu,!1,null,"03234acd",null)),au=iu.exports;function su(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={...i,...a,...r,...s,...n,...c,...l,...d,...u,...p,...b,...e};return Object.entries(t).forEach(e=>{let[t,o]=e;f["default"].component(t,o)}),t}o("0402");var ru=o("6c42"),nu=o("ab8b"),cu=o("8c4f");const lu=[{path:"/",component:()=>o.e("chunk-builder").then(o.bind(null,"bb51"))},{path:"/flows/new",component:()=>o.e("chunk-builder").then(o.bind(null,"e0f6"))},{path:"/flows/import",component:()=>o.e("chunk-builder").then(o.bind(null,"7d8c"))},{path:"/flows/:uuid",props:e=>({uuid:e.params.uuid}),component:()=>o.e("chunk-builder").then(o.bind(null,"8cba"))},{path:"/flows/:id/:component/:mode",name:"flow-canvas",props:e=>({id:e.params.id,mode:e.params.mode,mainComponent:e.params.component}),component:()=>o.e("chunk-builder").then(o.bind(null,"e7f0")),children:[{path:"details",name:"flow-details",meta:{isFlowEditorShown:!0}},{path:"block/:blockId",name:"block-selected",props:e=>({blockId:e.params.blockId}),children:[{path:"details",name:"block-selected-details",meta:{isBlockEditorShown:!0}},{path:":field",name:"block-scroll-to-anchor",meta:{isBlockEditorShown:!0}}]}]},{path:"*",redirect:"/"}];var du=o("bc78");f["default"].use(cu["a"]);const uu=[...lu],pu=new cu["a"]({mode:"history",base:"/flow-builder/",scrollBehavior:du["a"],routes:uu});var bu=pu,fu=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},hu=[],vu={},_u=Object(P["a"])(vu,fu,hu,!1,null,null,null),gu=_u.exports;o("da96");su(),f["default"].use(h["a"]);const mu={position:nu["a"].TOP_RIGHT,draggable:!0,draggablePercent:.6,closeOnClick:!1,timeout:!1};f["default"].use(ru["a"],mu),f["default"].config.productionTip=!1;const ku=new h["a"].Store({});async function yu(){new f["default"]({router:bu,store:ku,provide:{store:ku},render:e=>e(f["default"].extend(gu))}).$mount("#app"),void 0!==(null===window||void 0===window?void 0:window.Cypress)?(console.debug("Cypress detected, exposing app on window"),window.store=ku):console.debug("Cypress not detected, app not exposed on window")}yu()},cd4d:function(e,t,o){},cf2c:function(e,t,o){"use strict";o.r(t),o.d(t,"Core_CaseBlock",(function(){return m})),o.d(t,"install",(function(){return y}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"core-case-block"},[t("base-block",{attrs:{block:e.block,"show-semantic-label":!1,"uses-default-contact-props-editor":e.usesDefaultContactPropsEditor,"uses-default-branching-editor":e.usesDefaultBranchingEditor}},[e._t("description",null,{slot:"description"}),e._t("resource-editors",null,{slot:"resource-editors"}),e._t("extras",null,{slot:"extras"}),e._t("vendor-extras",null,{slot:"vendor-extras"}),e._t("branching",(function(){return[t("block-output-branching-config",{attrs:{block:e.block,"has-exit-per-choice":!1,"has-unified-exit":!1}})]}),{slot:"branching"}),e._t("contact-props",null,{slot:"contact-props"}),e._t("vendor",null,{slot:"vendor"})],2)],1)},a=[],s=o("9ab4"),r=o("4bb5"),n=o("1b40"),c=o("2ef0"),l=o("963c"),d=o("4004");const u="Core.Case",p={...d["a"],async createWith(e,t){let{getters:o,dispatch:i}=e,{props:a}=t;return a.type=u,a.vendor_metadata={floip:{ui_metadata:{branching_type:l["a"].ADVANCED}}},d["a"].createWith({getters:o,dispatch:i},{props:a})}},b={...Object(c["cloneDeep"])(d["b"]),actions:p};var f=b,h=o("4a51"),v=o("af98"),_=o("2fe1");Object(r["e"])("flow/"+u);const g=Object(r["e"])("builder");let m=class extends(Object(_["c"])(h["a"])){get exits(){return this.block.exits}};Object(s["__decorate"])([Object(n["b"])()],m.prototype,"block",void 0),Object(s["__decorate"])([Object(n["b"])({default:!0})],m.prototype,"usesDefaultBranchingEditor",void 0),Object(s["__decorate"])([Object(n["b"])({default:!1})],m.prototype,"usesDefaultContactPropsEditor",void 0),Object(s["__decorate"])([g.Getter],m.prototype,"isEditable",void 0),m=Object(s["__decorate"])([Object(n["a"])({})],m);var k=m;const y=Object(v["c"])(u,f);var j=k,O=o("0c7c"),w=Object(O["a"])(j,i,a,!1,null,null,null);t["default"]=w.exports},d39e:function(e,t,o){"use strict";o.d(t,"b",(function(){return u}));var i=o("9ab4"),a=o("a026"),s=o("2ef0"),r=o("2fe1"),n=o("4bb5");const c=/(\/){(.*?)(\?)?}/g,l=e=>{throw new Error("InvalidContextError - Missing param: "+e)};function d(e,t){if(!t)return null;e=e||{};const{path:o,params:i}=t,a=Object(s["isEmpty"])(i);return a?o:o.replace(c,(function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;const s=i.trim(),r=!(s in e);return r&&!a&&l(s),r&&a?"":`${o}${e[s]}`}))}function u(e,t,o){return d(t,Object(s["get"])(o,e))}let p=class extends a["default"]{route(e,t){return u(e,t,this.routes)}};Object(i["__decorate"])([Object(n["d"])(e=>e.trees.ui.routes)],p.prototype,"routes",void 0),p=Object(i["__decorate"])([r["b"]],p),t["a"]=p},d3a4:function(e,t,o){"use strict";o.d(t,"b",(function(){return T})),o.d(t,"a",(function(){return E}));var i=o("a026"),a=o("9300"),s=o("2ef0"),r=(o("ad9d"),o("ebd9")),n=o.n(r),c=o("1401"),l=o.n(c),d=o("14d3"),u=o("4a51");const p=["additionalProperties","required"],b=new u["a"],f=new Map;function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const o=new n.a({allErrors:!0});if(l()(o),o.addFormat("floip-expression",{type:"string",validate:e=>{try{Object(d["parse"])(e)}catch(t){return!1}return!0}}),""===t)return o.compile(e);let i=o.getSchema(t);if(i||(o.addSchema(e),i=o.getSchema(t)),!i)throw new Error(`Cannot find definition ${t} in schema ${e}`);return i}function v(e,t){null!=e?console.debug("store/validation:",t," | isValid:",e.isValid," | error dataPaths:",""+(Object.prototype.hasOwnProperty.call(e,"ajvErrors")&&e.ajvErrors?e.ajvErrors.map(e=>Object(s["get"])(e,"dataPath","undefined")).join(";"):"undefined")," | error messages:",""+(Object.prototype.hasOwnProperty.call(e,"ajvErrors")&&e.ajvErrors?e.ajvErrors.map(e=>Object(s["get"])(e,"message","undefined")).join(";"):"undefined")," | error details:",e):console.debug("store/validation:","the status in debugValidationStatus was undefined")}function _(e,t){var o,i;const[a]=e.split("/");let s;return s=void 0!==(null===(o=t.params)||void 0===o?void 0:o.missingProperty)?`${t.dataPath}-${null===(i=t.params)||void 0===i?void 0:i.missingProperty}`:t.dataPath,s=s.replaceAll("/","-").replaceAll(/\d+/g,"x").replace(/^-/,""),`flow-builder-validation.${a}-${s}-${t.keyword}`}function g(e,t){var o;const i="format"===t.keyword,a="floip-expression"===(null===(o=t.params)||void 0===o?void 0:o.format);return i&&a?"flow-builder-validation.floip-format":_(e,t)}function m(e,t){var o;const i="string"===typeof t.keyword,a="string"===typeof t.message&&t.message.length>0;if(!i){if(a)return t.message;throw new Error("Malformed AJV error object: no keyword or message; "+JSON.stringify(t))}const s=g(e,t),r=b.trans(s).replace(/({([^}]+)})/g,(e,o,i)=>t.params[i]||""),n=r!==s;return n?r:(console.warn("Error message not localized: "+s,{dataPath:t.dataPath,keyword:t.keyword,message:t.message,params:t.params,schemaPath:t.schemaPath}),null!==(o=t.message)&&void 0!==o?o:"")}function k(e,t){return void 0===t||null===t?null:t.map(t=>({...t,message:m(e,t)}))}function y(e,t){return Array.isArray(t)?t.map(e=>{let{message:t,dataPath:o}=e;const i={message:b.trans("flow-builder-validation."+t),keyword:"backend",dataPath:o,schemaPath:o,params:{}};return i}):(console.debug("getLocalizedBackendErrors","returning null as blockErrors is not an array",t),null)}function j(e){let{keyPrefix:t,errors:o,accumulator:i}=e;null===o||void 0===o||o.forEach(e=>{let o="",a="";p.includes(e.keyword)?(o=`${t}${e.schemaPath}`,a=`${e.message}, for params ${JSON.stringify(e.params)}`,console.warn("store/validation:",`Schema issue found on ${o}: ${a}`)):(o=`${t}${e.dataPath}`,a=e.message),i[o]=a})}function O(e){const t="flow";if(Object(s["isEmpty"])(f)||!f.has(t)){const i=o("34c1")(`./${e}/flowSpecJsonSchema.json`);i.definitions.IFlow.additionalProperties=!0,delete i.definitions.IFlow.properties.blocks,delete i.definitions.IFlow.properties.resources,f.set(t,h(i,"#/definitions/IFlow"))}return f.get(t)}function w(e){const t=o("34c1")(`./${e}/flowSpecJsonSchema.json`);return h(t,"#/definitions/IContainer")}function C(e){const t="language";if(Object(s["isEmpty"])(f)||!f.has(t)){const i=o("34c1")(`./${e}/flowSpecJsonSchema.json`);f.set(t,h(i,"#/definitions/ILanguage"))}return f.get(t)}function x(e){const t="resource";if(Object(s["isEmpty"])(f)||!f.has(t)){const i=o("34c1")(`./${e}/flowSpecJsonSchema.json`);f.set(t,h(i,"#/definitions/IResource"))}return f.get(t)}function E(e){let{block:t,schemaVersion:i,customBlockJsonSchema:a}=e,r=null;if(Object(s["isEmpty"])(f)||!f.has(t.type)){const e=t.type.split(".")[t.type.split(".").length-1];let s;try{null==a?(s=o("0de0")(`./${i}/I${e}Block.json`),r=h(s)):r=h(a)}catch(n){if("MODULE_NOT_FOUND"!==n.code)throw n;console.warn(`A Specific Validator for the ${e}Block could not be found. Falling back the generic Block validator for `+i),s=o("34c1")(`./${i}/flowSpecJsonSchema.json`),r=h(s,"#/definitions/IBlock")}f.set(t.type,r)}else r=f.get(t.type);return{isValid:r(t),ajvErrors:r.errors,type:t.type,label:t.label,context:{resourceUuid:Object(s["get"])(t,"config.prompt")}}}function I(e){var t,o;const i=null===(o=null===(t=/^\/values\/(?<index>\d+)/.exec(e))||void 0===t?void 0:t.groups)||void 0===o?void 0:o.index;if(void 0!==i)return Number(i)}function B(e){return void 0!==e}const S=()=>({validationStatuses:{}}),P={flattenErrorMessages(e){const t={};return Object(s["forIn"])(e.validationStatuses,(e,o)=>{var i,a;void 0!==(null===(i=e.context)||void 0===i?void 0:i.isOrphanResource)&&!0===(null===(a=e.context)||void 0===a?void 0:a.isOrphanResource)||j({keyPrefix:o,errors:e.ajvErrors,accumulator:t})}),t},choiceMimeType(){return"text/plain;choice=true"}},M={removeValidationStatusesFor(e,t){let{key:o}=t;i["default"].delete(e.validationStatuses,o)},resetValidationStatuses(e,t){let{key:o}=t;i["default"].set(e.validationStatuses,o,{ajvErrors:void 0}),i["default"].set(e.validationStatuses[o],"ajvErrors",[])},pushAjvErrorToValidationStatuses(e,t){let{key:o,ajvError:a}=t;var s;null==(null===(s=e.validationStatuses[o])||void 0===s?void 0:s.ajvErrors)&&(i["default"].set(e.validationStatuses,o,{ajvErrors:void 0}),i["default"].set(e.validationStatuses[o],"ajvErrors",[])),e.validationStatuses[o].ajvErrors.push(a)}},F={async validate_block(e,t){let{state:o,commit:a,rootGetters:s,dispatch:r}=e,{block:n}=t;const c=s["flow/activeFlowContainer"].specification_version,l=await r(`flow/${n.type}/validate`,{block:n,schemaVersion:c},{root:!0}),d="block/"+n.uuid;return i["default"].set(o.validationStatuses,d,{...l,ajvErrors:k(d,l.ajvErrors)}),null===l.ajvErrors&&a("removeValidationStatusesFor",{key:d}),r("cleanBackendAjvErrorsBasedOnFrontend",{type:"block",id:n.uuid,frontendAjvErrors:l.ajvErrors}),v(o.validationStatuses[d],"validation status for "+d),o.validationStatuses[d]},async validate_allBlocksFromBackend(e){let{dispatch:t}=e;await t("validate_fromBackend",{type:"block"}),await t("validate_fromBackend",{type:"resource"})},async validate_fromBackend(e,t){let{state:o,rootGetters:a,commit:r}=e,{type:n}=t;var c,l,d,u;Object.keys(o.validationStatuses).forEach(e=>{e.startsWith("backend/"+n)&&r("removeValidationStatusesFor",{key:e})});const p=Object(s["get"])(null===(u=null===(d=null===(l=null===(c=a["flow/activeFlow"])||void 0===c?void 0:c.vendor_metadata)||void 0===l?void 0:l.floip)||void 0===d?void 0:d.ui_metadata)||void 0===u?void 0:u.validation_results,n+"s",{}),b=a["flow/orphanResourceUuidsOnActiveFlow"];Object.keys(p).forEach(e=>{const t=`backend/${n}/${e}`,a=`${n}/${e}`,r=p[e],c=Object(s["get"])(o.validationStatuses,a,{}),l=Object(s["map"])(null===c||void 0===c?void 0:c.ajvErrors,"dataPath"),d=Object(s["uniqBy"])(r,"dataPath").filter(e=>{let{dataPath:t}=e;return!l.includes(t)});i["default"].set(o.validationStatuses,t,{isValid:void 0===d||0===d.length,ajvErrors:y(t,d),context:{isOrphanResource:b.includes(e)}}),v(o.validationStatuses[t],n+" validation based on backend action")})},async cleanBackendAjvErrorsBasedOnFrontend(e,t){let{state:o,rootGetters:a,commit:r}=e,{type:n,id:c,frontendAjvErrors:l}=t;var d;if(Object(s["isEmpty"])(l))return;const u=`backend/${n}/${c}`,p=Object(s["get"])(o.validationStatuses,u,{});if(Object(s["isEmpty"])(p)||Object(s["isEmpty"])(null===p||void 0===p?void 0:p.ajvErrors))return;const b=Object(s["map"])(l,"dataPath"),f={...p,ajvErrors:null===(d=p.ajvErrors)||void 0===d?void 0:d.filter(e=>{let{dataPath:t}=e;return!b.includes(t)})};i["default"].set(o.validationStatuses,u,f)},async validate_allBlocksWithinFlow(e){let{rootGetters:t,dispatch:o}=e;await Promise.all(t["flow/activeFlow"].blocks.map(async e=>{await o("validate_block",{block:e})}))},async validate_flow(e,t){let{state:o,rootGetters:a}=e,{flow:s}=t;const r=O(a["flow/activeFlowContainer"].specification_version),n="flow/"+s.uuid;return i["default"].set(o.validationStatuses,n,{isValid:r(s),ajvErrors:k(n,r.errors),type:"flow"}),v(o.validationStatuses[n],"flow validation status"),o.validationStatuses[n]},async validate_containerImport(e,t){let{state:o,commit:a,dispatch:s,rootGetters:r}=e,{flowContainer:n}=t;const c="container_import",l=w(r["flow/activeFlowContainer"].specification_version);return i["default"].set(o.validationStatuses,c,{isValid:l(n),ajvErrors:k(c,l.errors),type:"container_import"}),v(o.validationStatuses[c],"flow container validation status"),o.validationStatuses[c]},async validate_new_language(e,t){let{state:o,rootGetters:a}=e,{language:s}=t;const r=C(a["flow/activeFlowContainer"].specification_version),n="language/new_language";return i["default"].set(o.validationStatuses,n,{isValid:r(s),ajvErrors:r.errors}),v(o.validationStatuses[n],"language validation status"),o.validationStatuses[n]},validation_removeNewLanguageValidation(e){let{state:t}=e;const o="language/new_language";i["default"].delete(t.validationStatuses,o)},async validate_resource(e,t){let{state:o,rootGetters:a,dispatch:s}=e,{resource:r}=t;var n;const c=x(a["flow/activeFlowContainer"].specification_version),l="resource/"+r.uuid,d=c(r);null===(n=c.errors)||void 0===n||n.forEach(e=>{if("pattern"===e.keyword){const t=I(e.dataPath);if(void 0!==t){const{content_type:o}=r.values[t];"AUDIO"===o&&(e.keyword="pattern-ivr")}}});const u=a["flow/orphanResourceUuidsOnActiveFlow"];return i["default"].set(o.validationStatuses,l,{isValid:d,ajvErrors:k(l,c.errors),type:"resource",context:{isOrphanResource:u.includes(r.uuid)},invalidCounterBy:await s("computeInvalidResourcesBy",{errors:c.errors,resource:r})}),s("cleanBackendAjvErrorsBasedOnFrontend",{type:"resource",id:r.uuid,frontendAjvErrors:c.errors}),v(o.validationStatuses[l],"resource validation status"),o.validationStatuses[l]},async validate_resourcesOnSupportedValues(e,t){let{dispatch:o,getters:i}=e,{resources:r,supportedModes:n,supportedLanguages:c}=t;if(!r)return;const l=Object(s["map"])(r,e=>{const t=Object(s["cloneDeep"])(e);return t.values=Object(s["filter"])(e.values,e=>{const t=Object(s["includes"])(Object(s["map"])(c,"id"),e.language_id),o=e.mime_type===i.choiceMimeType,r=!Object(s["isEmpty"])(Object(s["intersection"])(n,e.modes)),l=Object(s["includes"])([a["SupportedContentType"].TEXT,a["SupportedContentType"].AUDIO],e.content_type);return o||t&&r&&l}),t});await Promise.all(Object(s["each"])(l,async e=>{await o("validate_resource",{resource:e})}))},resetValidationStatuses(e,t){let{commit:o}=e,{key:i}=t;o("resetValidationStatuses",{key:i})},async computeInvalidResourcesBy(e,t){let{getters:o,rootGetters:i}=e,{errors:a,resource:r}=t;const n={},c={},l=i["flow/activeFlow"],d=l.languages.map(e=>e.id),u=l.supported_modes;return null===a||void 0===a||a.map(e=>I(e.dataPath)).filter(B).map(e=>r.values[e]).filter(e=>e.mime_type!==o.choiceMimeType).forEach(e=>{const t=e.language_id,o=e.modes[0];d.includes(t)&&u.includes(o)?(Object(s["update"])(n,o,e=>e?e+1:1),Object(s["update"])(c,t,e=>e?e+1:1)):console.warn("A resource variant exists that has unsupported mode or language:",e)}),{mode:n,languageId:c}}},T={namespaced:!0,state:S,getters:P,mutations:M,actions:F}},dfbc:function(e,t,o){},e02d:function(e,t,o){"use strict";o("3659")},e034:function(e,t,o){"use strict";o("5540")},e131:function(e,t,o){"use strict";o("a520")},e1f5:function(e,t,o){"use strict";o("0abd")},e6bd:function(e,t,o){"use strict";o("9f67")},ea87:function(e,t,o){},ec49:function(e,t,o){"use strict";o("3070")},ecef:function(e,t,o){"use strict";o.d(t,"a",(function(){return u}));var i=o("9300"),a=o("31aa"),s=o("a026"),r=o("2ef0"),n=o("4004"),c=o("963c"),l=o("8562"),d=o("b85b");const u="MobilePrimitives.SelectOneResponse",p={...n["c"],...l["c"]},b={...n["d"],...l["d"]},f={...n["a"],...l["b"],addChoiceByResourceIdTo(e,t){let{rootGetters:o}=e,{blockId:a,resourceId:s}=t;const n=Object(i["findBlockWith"])(a,o["flow/activeFlow"]),c=o["flow/resourcesByUuidOnActiveFlow"][s];if(null==c)throw new i["ValidationException"]("Unable to find resource for choice: "+s);const l=Object(r["find"])(n.config.choices,{prompt:c.uuid});if(void 0===l){const e=n.config.choices;e.push({prompt:c.uuid})}},deleteChoiceByResourceIdFrom(e,t){let{dispatch:o,rootGetters:a}=e,{blockId:n,resourceId:c}=t;var l,d,u,p;const b=Object(i["findBlockWith"])(n,a["flow/activeFlow"]),f=Object(r["reject"])(b.config.choices,e=>e.prompt===c);s["default"].set(b.config,"choices",f),void 0!==(null===(p=null===(u=null===(d=null===(l=b.vendor_metadata)||void 0===l?void 0:l.floip)||void 0===d?void 0:d.ui_metadata)||void 0===u?void 0:u.set_contact_property)||void 0===p?void 0:p.property_value_mapping)&&s["default"].delete(b.vendor_metadata.floip.ui_metadata.set_contact_property.property_value_mapping,c),o("flow/block_updateContactPropertyAfterChoicesChange",{blockId:n},{root:!0})},async reflowExitsFromChoices(e,t){let{dispatch:o,rootGetters:s}=e,{blockId:n}=t;const c=Object(i["findBlockWith"])(n,s["flow/activeFlow"]),{config:{choices:l},exits:u}=c;let p=u.slice(0,-1);await Promise.all(l.map(async(e,t)=>{if(null==p[t]){const e=await(new a["IdGeneratorUuidV4"]).generate(),t=await o("flow/block_createBlockExitWith",{props:{uuid:e}},{root:!0});p.push(t)}Object.assign(p[t],{name:e.name,test:`@block.value = '${Object(d["c"])(e.name)}'`})})),p=Object(r["reject"])(p,e=>{const t=void 0===Object(r["find"])(l,t=>t.name===e.name);return!0===t&&console.debug("removing exit named",e.name),t}),u.splice(0,u.length-1,...p)},block_setChoiceIvrExpressionOnIndex(e,t){let{commit:o,state:i,dispatch:a}=e,{blockId:s,index:r,value:n}=t;o("flow/block_updateConfigByPath",{blockId:s,path:`choices.[${r}].ivr_test.test_expression`,value:n},{root:!0})},async createWith(e,t){let{getters:o,dispatch:i}=e,{props:a}=t;a.type=u;const s=await i("flow/flow_addBlankResourceForEnabledModesAndLangs",null,{root:!0});return a.config={prompt:s.uuid,choices:[]},a.vendor_metadata={floip:{ui_metadata:{branching_type:c["a"].EXIT_PER_CHOICE,choices:{}}}},n["a"].createWith({getters:o,dispatch:i},{props:a})},async validateWithProgrammaticLogic(e,t){let{block:o}=t;console.debug("floip/SelectOneResponse/validateWithProgrammaticLogic()",""+o.type);const i=[],a="/config/choices",s=o.config.choices.map(e=>{var t;return null===(t=e.ivr_test)||void 0===t?void 0:t.test_expression}),r=s.filter((e,t)=>void 0!==e&&s.indexOf(e)!==t);r.length>0&&i.push([a,"duplicate-ivr-test-test_expression"]);const n=o.config.choices.map(e=>e.name),c=n.filter((e,t)=>void 0!==e&&n.indexOf(e)!==t);return c.length>0&&i.push([a,"duplicate-choice-names"]),i}},h={...Object(r["cloneDeep"])(n["b"]),getters:p,mutations:b,actions:f};t["b"]=h},ef1c:function(e,t,o){"use strict";o("1a2e")},ef67:function(e,t,o){"use strict";o("6060")},f32c:function(e,t,o){},f4bd:function(e,t,o){"use strict";o("a621")},fdb0:function(e,t,o){},ff9d:function(e,t,o){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"error-handler-v2"},[e.languagesMissing?t("import-matcher",{staticClass:"mt-2",attrs:{"existing-options-without-match":e.existingLanguagesWithoutMatch,"missing-matches":e.missingLanguages,"match-not-found-text":"flow-builder.match-for-languages-not-found",type:"language","type-id":"id","type-label":"label"},on:{reactToMatch:e.handleMatchLanguage}}):e._e(),e.propertiesMissing?t("import-matcher",{staticClass:"mt-2",attrs:{"existing-options-without-match":e.existingPropertiesWithoutMatch,"missing-matches":e.missingProperties,"match-not-found-text":"flow-builder.match-for-properties-not-found",type:"property","type-id":"name","type-label":"name"},on:{reactToMatch:e.handleMatchProperty}}):e._e(),e.groupsMissing?t("import-matcher",{staticClass:"mt-2",attrs:{"existing-options-without-match":e.existingGroupsWithoutMatch,"missing-matches":e.missingGroups,"match-not-found-text":"flow-builder.match-for-groups-not-found",type:"group","type-id":"id","type-label":"group_name"},on:{reactToMatch:e.handleMatchGroup}}):e._e()],1)},a=[],s=o("2f62"),r=o("4a51"),n=o("88df"),c={name:"FullImportMatcher",components:{ImportMatcher:n["b"]},mixins:[r["a"]],computed:{...Object(s["e"])("flow/import",["missingLanguages","missingProperties","missingGroups","existingLanguagesWithoutMatch","existingPropertiesWithoutMatch","existingGroupsWithoutMatch"]),...Object(s["c"])("flow/import",["languagesMissing","propertiesMissing","groupsMissing"])},methods:{...Object(s["b"])("flow/import",["matchLanguage","matchProperty","matchGroup"]),handleMatchLanguage(e,t){this.matchLanguage({oldLanguage:e,matchingNewLanguage:t})},handleMatchProperty(e,t){this.matchProperty({oldProperty:e,matchingNewProperty:t})},handleMatchGroup(e,t){this.matchGroup({oldGroup:e,matchingNewGroup:t})}}},l=c,d=o("0c7c"),u=Object(d["a"])(l,i,a,!1,null,"2bbce29e",null);t["a"]=u.exports}});
//# sourceMappingURL=app.b7f937ad.js.map