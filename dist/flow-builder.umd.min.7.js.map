{"version":3,"sources":["webpack://flow-builder/./src/components/interaction-designer/block-types/MobilePrimitives_SelectManyResponseBlock.vue?7fd9","webpack://flow-builder/./src/store/flow/block-types/MobilePrimitives_SelectManyResponseBlockStore.ts","webpack://flow-builder/./src/components/interaction-designer/block-types/MobilePrimitives_SelectManyResponseBlock.vue?2b86","webpack://flow-builder/./src/components/interaction-designer/block-types/MobilePrimitives_SelectManyResponseBlock.vue?f5d1","webpack://flow-builder/./src/components/interaction-designer/block-types/MobilePrimitives_SelectManyResponseBlock.vue","webpack://flow-builder/./src/components/interaction-designer/block-types/MobilePrimitives_SelectOneResponseBlock.vue?c60b","webpack://flow-builder/./src/components/interaction-designer/block-types/MobilePrimitives_SelectOneResponseBlock.vue?1385","webpack://flow-builder/./src/components/interaction-designer/block-types/MobilePrimitives_SelectOneResponseBlock.vue?4674","webpack://flow-builder/./src/components/interaction-designer/block-types/MobilePrimitives_SelectOneResponseBlock.vue","webpack://flow-builder/./src/store/flow/block-types/MobilePrimitives_SelectOneResponseBlockStore.ts"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","_f","block_type","trans","block","attrs","promptResource","flow","_e","questionPromptResource","choicesPromptResource","_l","Object","keys","inflatedChoices","choiceKey","uuid","staticRenderFns","BLOCK_TYPE","getters","mutations","actions","createWith","state","commit","dispatch","props","root","blankResource","blankPromptResource","blankQuestionPromptResource","blankChoicesPromptResource","defaultExitProps","generate","tag","label","errorExitProps","prompt","questionPrompt","choicesPrompt","choices","type","name","semanticLabel","exits","config","namespaced","blockVuexNamespace","Getter","Action","components","BlockNameEditor","BlockLabelEditor","BlockSemanticLabelEditor","FirstBlockEditorButton","ResourceEditor","BlockId","mixins","lang","install","component","flowVuexNamespace","resourcesByUuid","newChoices","editSelectOneResponseBlockChoice","deep","rootState","rootGetters","currentBlock","reduce","memo","allChoicesHaveContent","every","key","values","twoChoicesBlank","blankNumber","some","deleteChoiceByKey","choiceKeyToRemove","blockId","sort","index","pushNewChoice","choiceId","newIndex","popFirstEmptyChoice","choiceToRemove","activeBlock","parseInt","test","exit","newExit","exitLabel"],"mappings":"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","file":"flow-builder.umd.min.7.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h3',{staticClass:\"no-room-above\"},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.edit-block-type',{block_type: _vm.trans((\"flow-builder.\" + (_vm.block.type)))}))+\" \")]),_c('block-name-editor',{attrs:{\"block\":_vm.block}}),_c('block-label-editor',{attrs:{\"block\":_vm.block}}),_c('block-semantic-label-editor',{attrs:{\"block\":_vm.block}}),_c('div',{staticClass:\"prompt-resource\"},[(_vm.promptResource)?_c('resource-editor',{attrs:{\"label\":_vm._f(\"trans\")('flow-builder.prompt'),\"resource\":_vm.promptResource,\"block\":_vm.block,\"flow\":_vm.flow}}):_vm._e()],1),_c('div',{staticClass:\"question-prompt-resource\"},[(_vm.questionPromptResource)?_c('resource-editor',{attrs:{\"label\":_vm._f(\"trans\")('flow-builder.question-prompt'),\"resource\":_vm.questionPromptResource,\"block\":_vm.block,\"flow\":_vm.flow}}):_vm._e()],1),_c('div',{staticClass:\"choices-prompt-resource\"},[(_vm.choicesPromptResource)?_c('resource-editor',{attrs:{\"label\":_vm._f(\"trans\")('flow-builder.choices-prompt'),\"resource\":_vm.choicesPromptResource,\"block\":_vm.block,\"flow\":_vm.flow}}):_vm._e()],1),_vm._l((Object.keys(_vm.inflatedChoices)),function(choiceKey){return _c('div',{staticClass:\"form-group form-inline\"},[_c('resource-editor',{attrs:{\"label\":(\"Choice \" + choiceKey),\"resource\":_vm.inflatedChoices[choiceKey],\"block\":_vm.block,\"flow\":_vm.flow}})],1)}),_c('first-block-editor-button',{attrs:{\"flow\":_vm.flow,\"block-id\":_vm.block.uuid}}),_c('block-id',{attrs:{\"block\":_vm.block}})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import {getters as selectOneGetters, mutations as selectOneMutations, actions as selectOneActions} from './MobilePrimitives_SelectOneResponseBlockStore'\nimport ISelectOneResponseBlock from \"@floip/flow-runner/dist/model/block/ISelectOneResponseBlock\"\nimport {IBlockExit} from \"@floip/flow-runner\"\nimport IdGeneratorUuidV4 from \"@floip/flow-runner/dist/domain/IdGeneratorUuidV4\"\nimport {defaults} from \"lodash\"\nimport {ActionTree, GetterTree, MutationTree} from \"vuex\";\nimport {IFlowsState} from \"@/store/flow\";\nimport {IRootState} from \"@/store\";\n\nexport const BLOCK_TYPE = 'MobilePrimitives\\\\SelectManyResponse'\n\nexport const getters: GetterTree<IFlowsState, IRootState> = {\n  ...selectOneGetters,\n}\n\nexport const mutations: MutationTree<IFlowsState> = {\n  ...selectOneMutations,\n}\n\nexport const actions: ActionTree<IFlowsState, IRootState> = {\n  ...selectOneActions,\n\n  async createWith({state, commit, dispatch}, {props}: {props: {uuid: string} & Partial<ISelectOneResponseBlock>}) {\n    const blankResource = await dispatch('flow/flow_addBlankResourceForEnabledModesAndLangs', null, {root: true})\n    const blankPromptResource = await dispatch('flow/flow_addBlankResourceForEnabledModesAndLangs', null, {root: true})\n    const blankQuestionPromptResource = await dispatch('flow/flow_addBlankResourceForEnabledModesAndLangs', null, {root: true})\n    const blankChoicesPromptResource = await dispatch('flow/flow_addBlankResourceForEnabledModesAndLangs', null, {root: true})\n\n    const defaultExitProps: Partial<IBlockExit> = {\n      uuid: (new IdGeneratorUuidV4).generate(),\n      tag: 'Default',\n      label: 'Default',\n    }\n\n    const errorExitProps: Partial<IBlockExit> = {\n      uuid: (new IdGeneratorUuidV4).generate(),\n      tag: 'Error',\n      label: 'Error',\n    }\n\n    return defaults(props, {\n      type: BLOCK_TYPE,\n      name: '',\n      label: '',\n      semanticLabel: '',\n      exits: [\n        await dispatch('flow/block_createBlockDefaultExitWith', {props: defaultExitProps}, {root: true}),\n        await dispatch('flow/block_createBlockExitWith', {props: errorExitProps}, {root: true}),\n      ],\n      config: {\n        prompt: blankPromptResource.uuid,\n        questionPrompt: blankQuestionPromptResource.uuid,\n        choicesPrompt: blankChoicesPromptResource.uuid,\n        choices: {'1': blankResource.uuid},\n      },\n    })\n  }\n}\n\nexport default {\n  namespaced: true,\n  getters,\n  mutations,\n  actions,\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {Component} from 'vue-property-decorator'\nimport {\n  IResourceDefinition,\n} from '@floip/flow-runner/src/domain/IResourceResolver'\nimport BlockNameEditor from '../block-editors/NameEditor.vue'\nimport BlockLabelEditor from '../block-editors/LabelEditor.vue'\nimport BlockSemanticLabelEditor from '../block-editors/SemanticLabelEditor.vue'\n\nimport FirstBlockEditorButton from '../flow-editors/FirstBlockEditorButton.vue'\nimport ResourceEditor from '../resource-editors/ResourceEditor.vue'\nimport BlockId from '../block-editors/BlockId.vue'\n\nimport SelectOneResponseBlock from './MobilePrimitives_SelectOneResponseBlock.vue'\n\nimport SelectManyResponseStore, {BLOCK_TYPE} from '@/store/flow/block-types/MobilePrimitives_SelectManyResponseBlockStore'\n\nimport {namespace} from 'vuex-class'\nimport lang from '@/lib/filters/lang'\nimport {createDefaultBlockTypeInstallerFor} from \"@/store/builder\";\n\nconst blockVuexNamespace = namespace(`flow/${BLOCK_TYPE}`)\n\n@Component<any>({\n  components: {\n    BlockNameEditor,\n    BlockLabelEditor,\n    BlockSemanticLabelEditor,\n    FirstBlockEditorButton,\n    ResourceEditor,\n    BlockId,\n  },\n  mixins: [lang],\n})\nexport class MobilePrimitives_SelectManyResponseBlock extends SelectOneResponseBlock {\n  @blockVuexNamespace.Getter inflatedChoices!: {[key: string]: IResourceDefinition}\n  @blockVuexNamespace.Action editSelectOneResponseBlockChoice!: () => Promise<object>\n}\n\nexport default MobilePrimitives_SelectManyResponseBlock\nexport const install = createDefaultBlockTypeInstallerFor(BLOCK_TYPE, SelectManyResponseStore)\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MobilePrimitives_SelectManyResponseBlock.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MobilePrimitives_SelectManyResponseBlock.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./MobilePrimitives_SelectManyResponseBlock.vue?vue&type=template&id=69e348ab&\"\nimport script from \"./MobilePrimitives_SelectManyResponseBlock.vue?vue&type=script&lang=ts&\"\nexport * from \"./MobilePrimitives_SelectManyResponseBlock.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h3',{staticClass:\"no-room-above\"},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.edit-block-type',{block_type: _vm.trans((\"flow-builder.\" + (_vm.block.type)))}))+\" \")]),_c('block-name-editor',{attrs:{\"block\":_vm.block}}),_c('block-label-editor',{attrs:{\"block\":_vm.block}}),_c('block-semantic-label-editor',{attrs:{\"block\":_vm.block}}),_c('div',{staticClass:\"prompt-resource\"},[(_vm.promptResource)?_c('resource-editor',{attrs:{\"label\":_vm._f(\"trans\")('flow-builder.prompt'),\"resource\":_vm.promptResource,\"block\":_vm.block,\"flow\":_vm.flow}}):_vm._e()],1),_c('div',{staticClass:\"question-prompt-resource\"},[(_vm.questionPromptResource)?_c('resource-editor',{attrs:{\"label\":_vm._f(\"trans\")('flow-builder.question-prompt'),\"resource\":_vm.questionPromptResource,\"block\":_vm.block,\"flow\":_vm.flow}}):_vm._e()],1),_c('div',{staticClass:\"choices-prompt-resource\"},[(_vm.choicesPromptResource)?_c('resource-editor',{attrs:{\"label\":_vm._f(\"trans\")('flow-builder.choices-prompt'),\"resource\":_vm.choicesPromptResource,\"block\":_vm.block,\"flow\":_vm.flow}}):_vm._e()],1),_vm._l((Object.keys(_vm.inflatedChoices)),function(choiceKey){return _c('div',{staticClass:\"form-group form-inline\"},[_c('resource-editor',{attrs:{\"label\":(\"Choice \" + choiceKey),\"resource\":_vm.inflatedChoices[choiceKey],\"block\":_vm.block,\"flow\":_vm.flow}})],1)}),_c('first-block-editor-button',{attrs:{\"flow\":_vm.flow,\"block-id\":_vm.block.uuid}}),_c('block-id',{attrs:{\"block\":_vm.block}})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {IFlow} from '@floip/flow-runner'\nimport ISelectOneResponseBlock from '@floip/flow-runner/src/model/block/ISelectOneResponseBlock'\nimport {\n  IResourceDefinition,\n} from '@floip/flow-runner/src/domain/IResourceResolver'\nimport Vue from 'vue'\nimport {namespace} from 'vuex-class'\nimport {Component, Prop, Watch} from 'vue-property-decorator'\n\nimport BlockNameEditor from '../block-editors/NameEditor.vue'\nimport BlockLabelEditor from '../block-editors/LabelEditor.vue'\nimport BlockSemanticLabelEditor from '../block-editors/SemanticLabelEditor.vue'\n\nimport FirstBlockEditorButton from '../flow-editors/FirstBlockEditorButton.vue'\nimport ResourceEditor from '../resource-editors/ResourceEditor.vue'\nimport BlockId from '../block-editors/BlockId.vue'\n\nimport SelectOneStore, {BLOCK_TYPE} from '@/store/flow/block-types/MobilePrimitives_SelectOneResponseBlockStore'\nimport lang from '@/lib/filters/lang'\nimport {createDefaultBlockTypeInstallerFor} from \"@/store/builder\";\n\nconst flowVuexNamespace = namespace('flow')\nconst blockVuexNamespace = namespace(`flow/${BLOCK_TYPE}`)\n\n@Component<any>({\n  components: {\n    BlockNameEditor,\n    BlockLabelEditor,\n    BlockSemanticLabelEditor,\n    FirstBlockEditorButton,\n    ResourceEditor,\n    BlockId,\n  },\n  mixins: [lang],\n})\nexport class MobilePrimitives_SelectOneResponseBlock extends Vue {\n  @Prop()readonly block!: ISelectOneResponseBlock\n  @Prop()readonly flow!: IFlow\n\n  get promptResource(): IResourceDefinition {\n    return this.resourcesByUuid[this.block.config.prompt]\n  }\n  get questionPromptResource(): IResourceDefinition {\n    return this.resourcesByUuid[this.block.config.questionPrompt || \"\"]\n  }\n  get choicesPromptResource(): IResourceDefinition {\n    return this.resourcesByUuid[this.block.config.choicesPrompt || \"\"]\n  }\n\n  @Watch('inflatedChoices', {deep: true})\n  onChoicesChanged(newChoices: object) {\n    this.editSelectOneResponseBlockChoice()\n  }\n\n  @flowVuexNamespace.Getter resourcesByUuid!: {[key: string]: IResourceDefinition}\n  @blockVuexNamespace.Getter inflatedChoices!: {[key: string]: IResourceDefinition}\n  @blockVuexNamespace.Action editSelectOneResponseBlockChoice!: () => Promise<object>\n}\n\nexport default MobilePrimitives_SelectOneResponseBlock\nexport const install = createDefaultBlockTypeInstallerFor(BLOCK_TYPE, SelectOneStore)\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MobilePrimitives_SelectOneResponseBlock.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MobilePrimitives_SelectOneResponseBlock.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./MobilePrimitives_SelectOneResponseBlock.vue?vue&type=template&id=8ef63946&\"\nimport script from \"./MobilePrimitives_SelectOneResponseBlock.vue?vue&type=script&lang=ts&\"\nexport * from \"./MobilePrimitives_SelectOneResponseBlock.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import {ActionTree, GetterTree, MutationTree} from 'vuex'\nimport {IFlowsState} from '../index'\nimport {IRootState} from '@/store'\nimport {\n  IBlockExitTestRequired,\n  IBlockExit,\n  IFlow,\n  IContext,\n  SupportedContentType,\n  findBlockOnActiveFlowWith,\n  IResourceDefinitionContentTypeSpecific,\n} from '@floip/flow-runner'\nimport IdGeneratorUuidV4 from '@floip/flow-runner/dist/domain/IdGeneratorUuidV4'\nimport ISelectOneResponseBlock from '@floip/flow-runner/dist/model/block/ISelectOneResponseBlock'\nimport {IResourceDefinitionVariantOverModesFilter} from '../resource'\nimport {\n  IResourceDefinition,\n} from '@floip/flow-runner/src/domain/IResourceResolver'\nimport Vue from 'vue'\nimport {defaults, find, max} from 'lodash'\n\nexport const BLOCK_TYPE = 'MobilePrimitives\\\\SelectOneResponse'\n\nimport { someItemsHaveValue, allItemsHaveValue, twoItemsBlank } from '../utils/listBuilder'\n\nexport const getters: GetterTree<IFlowsState, IRootState> = {\n  inflatedChoices: (state, getters, rootState, rootGetters): object => {\n    const currentBlock = rootGetters['builder/activeBlock']\n    let choices: {[key: string]: IResourceDefinition} = {}\n    return Object.keys(currentBlock.config.choices).reduce((memo, choiceKey): {[key: string]: IResourceDefinition} => {\n      memo[choiceKey] = rootGetters['flow/resourcesByUuid'][currentBlock.config.choices[choiceKey]]\n      return memo\n    }, choices)\n  },\n  allChoicesHaveContent: (state, getters): boolean => {\n    return Object.keys(getters.inflatedChoices).every((key: string) => {\n      return someItemsHaveValue(getters.inflatedChoices[key].values, \"value\")\n    })\n  },\n  twoChoicesBlank: (state, getters, rootState, rootGetters): boolean => {\n    let blankNumber = 0\n    return Object.keys(getters.inflatedChoices).some((key: string) => {\n\n      if (!someItemsHaveValue(getters.inflatedChoices[key].values, \"value\")) {\n        blankNumber += 1\n      }\n\n      if (blankNumber > 1) {\n        return true\n      }\n\n      return false\n    })\n  },\n\n}\n\nexport const mutations: MutationTree<IFlowsState> = {\n  deleteChoiceByKey(state, {choiceKeyToRemove, blockId}) {\n    //TODO - this shouldn't be necessary\n    // @ts-ignore - TS2339: Property 'flow' does not exist on type\n    const block: ISelectOneResponseBlock = findBlockOnActiveFlowWith(blockId, this.state.flow as unknown as IContext) as ISelectOneResponseBlock\n    delete block.config.choices[choiceKeyToRemove]\n    let choices: {[key: string]: string} = {}\n    //rekey\n    block.config.choices = Object.keys(block.config.choices).sort().reduce((choices, choiceKey: string, index: number) => {\n      choices[index+1] = block.config.choices[choiceKey]\n      return choices\n    }, choices)\n  },\n  pushNewChoice(state, {choiceId, blockId, newIndex}) {\n    //TODO - this shouldn't be necessary\n    // @ts-ignore - TS2339: Property 'flow' does not exist on type\n    const block: ISelectOneResponseBlock = findBlockOnActiveFlowWith(blockId, this.state.flow as unknown as IContext) as ISelectOneResponseBlock\n    block.config.choices[newIndex] = choiceId\n  }\n}\n\nexport const actions: ActionTree<IFlowsState, IRootState> = {\n  async popFirstEmptyChoice({commit, rootGetters, getters}) {\n    const choiceToRemove = find(Object.keys(getters.inflatedChoices), (key: string) => {\n      return !someItemsHaveValue(getters.inflatedChoices[key].values, \"value\")\n    })\n    if (choiceToRemove) {\n      commit('deleteChoiceByKey', {choiceKeyToRemove: choiceToRemove, blockId: rootGetters['builder/activeBlock'].uuid})\n      return rootGetters['builder/activeBlock'].config.choices[choiceToRemove]\n    }\n    return null\n  },\n  async editSelectOneResponseBlockChoice({commit, dispatch, getters, rootGetters}) {\n    const activeBlock = rootGetters['builder/activeBlock']\n    if (getters.allChoicesHaveContent) {\n      const newIndex = parseInt(max(Object.keys(activeBlock.config.choices)) || \"0\")+1\n      const blankResource = await dispatch('flow/flow_addBlankResourceForEnabledModesAndLangs', null, {root: true})\n      //due to a race condition we may have already pushed something\n      if(!activeBlock.config.choices[newIndex]) {\n        commit('pushNewChoice', {choiceId: blankResource.uuid, blockId: activeBlock.uuid, newIndex})\n        const exit: IBlockExitTestRequired = await dispatch('flow/block_createBlockExitWith', {\n          props: ({\n            uuid: (new IdGeneratorUuidV4()).generate(),\n            test: 'block.value = '+(newIndex-1),\n            label: blankResource.uuid\n          }) as IBlockExitTestRequired,\n        }, {root: true})\n        commit('flow/block_pushNewExit', {blockId: activeBlock.uuid, newExit: exit}, {root: true})\n      }\n    } else if (getters.twoChoicesBlank) {\n      const exitLabel = await dispatch('popFirstEmptyChoice', {blockId: activeBlock.uuid})\n      if(exitLabel) {\n        commit('flow/block_popExitsByLabel', {blockId: activeBlock.uuid, exitLabel}, {root: true})\n      }\n    }\n    return activeBlock.config.choices\n  },\n\n  // todo: in the flow-spec, there's mention that we can configure to swap between exit-per-choice and a default exit\n  //       but, it doesn't seem to mention how this is configured\n  async createWith({state, commit, dispatch}, {props}: {props: {uuid: string} & Partial<ISelectOneResponseBlock>}) {\n    const blankResource = await dispatch('flow/flow_addBlankResourceForEnabledModesAndLangs', null, {root: true})\n    const blankPromptResource = await dispatch('flow/flow_addBlankResourceForEnabledModesAndLangs', null, {root: true})\n    const blankQuestionPromptResource = await dispatch('flow/flow_addBlankResourceForEnabledModesAndLangs', null, {root: true})\n    const blankChoicesPromptResource = await dispatch('flow/flow_addBlankResourceForEnabledModesAndLangs', null, {root: true})\n\n    const defaultExitProps: Partial<IBlockExit> = {\n      uuid: (new IdGeneratorUuidV4).generate(),\n      tag: 'Default',\n      label: 'Default',\n    }\n\n    const errorExitProps: Partial<IBlockExit> = {\n      uuid: (new IdGeneratorUuidV4).generate(),\n      tag: 'Error',\n      label: 'Error',\n    }\n\n    return defaults(props, {\n      type: BLOCK_TYPE,\n      name: '',\n      label: '',\n      semanticLabel: '',\n      exits: [\n        await dispatch('flow/block_createBlockDefaultExitWith', {props: defaultExitProps}, {root: true}),\n        await dispatch('flow/block_createBlockExitWith', {props: errorExitProps}, {root: true}),\n      ],\n      config: {\n        prompt: blankPromptResource.uuid,\n        questionPrompt: blankQuestionPromptResource.uuid,\n        choicesPrompt: blankChoicesPromptResource.uuid,\n        choices: {'1': blankResource.uuid},\n      },\n    })\n  }\n,\n\n}\n\nexport default {\n  namespaced: true,\n  getters,\n  mutations,\n  actions,\n}\n"],"sourceRoot":""}