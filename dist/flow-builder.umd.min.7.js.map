{"version":3,"sources":["webpack://flow-builder/./src/components/interaction-designer/block-types/MobilePrimitives_SelectManyResponseBlock.vue?de3c","webpack://flow-builder/./src/store/flow/block-types/MobilePrimitives_SelectManyResponseBlockStore.ts","webpack://flow-builder/./src/components/interaction-designer/block-types/MobilePrimitives_SelectManyResponseBlock.vue?2b86","webpack://flow-builder/./src/components/interaction-designer/block-types/MobilePrimitives_SelectManyResponseBlock.vue?f5d1","webpack://flow-builder/./src/components/interaction-designer/block-types/MobilePrimitives_SelectManyResponseBlock.vue","webpack://flow-builder/./src/components/interaction-designer/block-types/MobilePrimitives_SelectOneResponseBlock.vue?4791","webpack://flow-builder/./src/components/interaction-designer/block-types/MobilePrimitives_SelectOneResponseBlock.vue?1385","webpack://flow-builder/./src/components/interaction-designer/block-types/MobilePrimitives_SelectOneResponseBlock.vue?4674","webpack://flow-builder/./src/components/interaction-designer/block-types/MobilePrimitives_SelectOneResponseBlock.vue","webpack://flow-builder/./src/store/flow/block-types/MobilePrimitives_SelectOneResponseBlockStore.ts"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","_f","block_type","trans","block","attrs","promptResource","flow","_e","questionPromptResource","choicesPromptResource","_l","Object","keys","inflatedChoices","choiceKey","uuid","staticRenderFns","BLOCK_TYPE","getters","assign","mutations","actions","namespaced","blockVuexNamespace","Getter","Action","components","BlockNameEditor","BlockLabelEditor","BlockSemanticLabelEditor","FirstBlockEditorButton","ResourceEditor","BlockId","mixins","lang","install","component","flowVuexNamespace","newChoices","editSelectOneResponseBlockChoice","resourcesByUuid","config","prompt","questionPrompt","choicesPrompt","deep","state","rootState","rootGetters","currentBlock","choices","reduce","memo","allChoicesHaveContent","every","key","values","twoChoicesBlank","blankNumber","some","deleteChoiceByKey","choiceKeyToRemove","blockId","sort","index","pushNewChoice","choiceId","newIndex","popFirstEmptyChoice","commit","choiceToRemove","dispatch","activeBlock","parseInt","root","blankResource","props","generate","test","label","exit","newExit","exitLabel","createWith","blankPromptResource","blankQuestionPromptResource","blankChoicesPromptResource","tag","exits","type","name","semanticLabel"],"mappings":"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","file":"flow-builder.umd.min.7.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h3',{staticClass:\"no-room-above\"},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.edit-block-type',{block_type: _vm.trans((\"flow-builder.\" + (_vm.block.type)))}))+\" \")]),_c('block-name-editor',{attrs:{\"block\":_vm.block}}),_c('block-label-editor',{attrs:{\"block\":_vm.block}}),_c('block-semantic-label-editor',{attrs:{\"block\":_vm.block}}),_c('div',{staticClass:\"prompt-resource\"},[_c('label',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.prompt')))]),(_vm.promptResource)?_c('resource-editor',{attrs:{\"resource\":_vm.promptResource,\"flow\":_vm.flow}}):_vm._e()],1),_c('div',{staticClass:\"question-prompt-resource\"},[_c('label',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.question-prompt')))]),(_vm.questionPromptResource)?_c('resource-editor',{attrs:{\"resource\":_vm.questionPromptResource,\"flow\":_vm.flow}}):_vm._e()],1),_c('div',{staticClass:\"choices-prompt-resource\"},[_c('label',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.choices-prompt')))]),(_vm.choicesPromptResource)?_c('resource-editor',{attrs:{\"resource\":_vm.choicesPromptResource,\"flow\":_vm.flow}}):_vm._e()],1),_vm._l((Object.keys(_vm.inflatedChoices)),function(choiceKey){return _c('div',{staticClass:\"form-group form-inline\"},[_c('resource-editor',{attrs:{\"label\":choiceKey,\"resource\":_vm.inflatedChoices[choiceKey],\"flow\":_vm.flow}})],1)}),_c('first-block-editor-button',{attrs:{\"flow\":_vm.flow,\"block-id\":_vm.block.uuid}}),_c('block-id',{attrs:{\"block\":_vm.block}})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import {getters as selectOneGetters, mutations as selectOneMutations, actions as selectOneActions} from './MobilePrimitives_SelectOneResponseBlockStore'\n\nexport const BLOCK_TYPE = 'MobilePrimitives\\\\SelectManyResponse'\n\nexport const getters = Object.assign({}, selectOneGetters)\n\nexport const mutations = Object.assign({}, selectOneMutations)\n\nexport const actions = Object.assign({}, selectOneActions)\n\nexport default {\n  namespaced: true,\n  getters,\n  mutations,\n  actions,\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {Component} from 'vue-property-decorator'\nimport {\n  IResourceDefinition,\n} from '@floip/flow-runner/src/domain/IResourceResolver'\nimport BlockNameEditor from '../block-editors/NameEditor.vue'\nimport BlockLabelEditor from '../block-editors/LabelEditor.vue'\nimport BlockSemanticLabelEditor from '../block-editors/SemanticLabelEditor.vue'\n\nimport FirstBlockEditorButton from '../flow-editors/FirstBlockEditorButton.vue'\nimport ResourceEditor from '../resource-editors/ResourceEditor.vue'\nimport BlockId from '../block-editors/BlockId.vue'\n\nimport SelectOneResponseBlock from './MobilePrimitives_SelectOneResponseBlock.vue'\n\nimport SelectManyResponseStore, {BLOCK_TYPE} from '@/store/flow/block-types/MobilePrimitives_SelectManyResponseBlockStore'\n\nimport {namespace} from 'vuex-class'\nimport lang from '@/lib/filters/lang'\nimport {createDefaultBlockTypeInstallerFor} from \"@/store/builder\";\n\nconst blockVuexNamespace = namespace(`flow/${BLOCK_TYPE}`)\n\n@Component<any>({\n  components: {\n    BlockNameEditor,\n    BlockLabelEditor,\n    BlockSemanticLabelEditor,\n    FirstBlockEditorButton,\n    ResourceEditor,\n    BlockId,\n  },\n  mixins: [lang],\n})\nexport class MobilePrimitives_SelectManyResponseBlock extends SelectOneResponseBlock {\n  @blockVuexNamespace.Getter inflatedChoices!: {[key: string]: IResourceDefinition}\n  @blockVuexNamespace.Action editSelectOneResponseBlockChoice!: () => Promise<object>\n}\n\nexport default MobilePrimitives_SelectManyResponseBlock\nexport const install = createDefaultBlockTypeInstallerFor(BLOCK_TYPE, SelectManyResponseStore)\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MobilePrimitives_SelectManyResponseBlock.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MobilePrimitives_SelectManyResponseBlock.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./MobilePrimitives_SelectManyResponseBlock.vue?vue&type=template&id=c81a0c04&\"\nimport script from \"./MobilePrimitives_SelectManyResponseBlock.vue?vue&type=script&lang=ts&\"\nexport * from \"./MobilePrimitives_SelectManyResponseBlock.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h3',{staticClass:\"no-room-above\"},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.edit-block-type',{block_type: _vm.trans((\"flow-builder.\" + (_vm.block.type)))}))+\" \")]),_c('block-name-editor',{attrs:{\"block\":_vm.block}}),_c('block-label-editor',{attrs:{\"block\":_vm.block}}),_c('block-semantic-label-editor',{attrs:{\"block\":_vm.block}}),_c('div',{staticClass:\"prompt-resource\"},[_c('label',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.prompt')))]),(_vm.promptResource)?_c('resource-editor',{attrs:{\"resource\":_vm.promptResource,\"flow\":_vm.flow}}):_vm._e()],1),_c('div',{staticClass:\"question-prompt-resource\"},[_c('label',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.question-prompt')))]),(_vm.questionPromptResource)?_c('resource-editor',{attrs:{\"resource\":_vm.questionPromptResource,\"flow\":_vm.flow}}):_vm._e()],1),_c('div',{staticClass:\"choices-prompt-resource\"},[_c('label',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.choices-prompt')))]),(_vm.choicesPromptResource)?_c('resource-editor',{attrs:{\"resource\":_vm.choicesPromptResource,\"flow\":_vm.flow}}):_vm._e()],1),_vm._l((Object.keys(_vm.inflatedChoices)),function(choiceKey){return _c('div',{staticClass:\"form-group form-inline\"},[_c('resource-editor',{attrs:{\"label\":choiceKey,\"resource\":_vm.inflatedChoices[choiceKey],\"flow\":_vm.flow}})],1)}),_c('first-block-editor-button',{attrs:{\"flow\":_vm.flow,\"block-id\":_vm.block.uuid}}),_c('block-id',{attrs:{\"block\":_vm.block}})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {IBlock, IFlow} from '@floip/flow-runner'\nimport ISelectOneResponseBlock from '@floip/flow-runner/src/model/block/ISelectOneResponseBlock'\nimport {\n  IResourceDefinition,\n} from '@floip/flow-runner/src/domain/IResourceResolver'\nimport Vue from 'vue'\nimport {namespace} from 'vuex-class'\nimport {Component, Prop, Watch} from 'vue-property-decorator'\n\nimport BlockNameEditor from '../block-editors/NameEditor.vue'\nimport BlockLabelEditor from '../block-editors/LabelEditor.vue'\nimport BlockSemanticLabelEditor from '../block-editors/SemanticLabelEditor.vue'\n\nimport FirstBlockEditorButton from '../flow-editors/FirstBlockEditorButton.vue'\nimport ResourceEditor from '../resource-editors/ResourceEditor.vue'\nimport BlockId from '../block-editors/BlockId.vue'\n\nimport SelectOneStore, {BLOCK_TYPE} from '@/store/flow/block-types/MobilePrimitives_SelectOneResponseBlockStore'\nimport lang from '@/lib/filters/lang'\nimport {createDefaultBlockTypeInstallerFor} from \"@/store/builder\";\n\nconst flowVuexNamespace = namespace('flow')\nconst blockVuexNamespace = namespace(`flow/${BLOCK_TYPE}`)\n\n@Component<any>({\n  components: {\n    BlockNameEditor,\n    BlockLabelEditor,\n    BlockSemanticLabelEditor,\n    FirstBlockEditorButton,\n    ResourceEditor,\n    BlockId,\n  },\n  mixins: [lang],\n})\nexport class MobilePrimitives_SelectOneResponseBlock extends Vue {\n  @Prop()readonly block!: ISelectOneResponseBlock\n  @Prop()readonly flow!: IFlow\n\n  get promptResource(): IResourceDefinition {\n    return this.resourcesByUuid[this.block.config.prompt]\n  }\n  get questionPromptResource(): IResourceDefinition {\n    return this.resourcesByUuid[this.block.config.questionPrompt || \"\"]\n  }\n  get choicesPromptResource(): IResourceDefinition {\n    return this.resourcesByUuid[this.block.config.choicesPrompt || \"\"]\n  }\n\n  @Watch('inflatedChoices', {deep: true})\n  onChoicesChanged(newChoices: object) {\n    this.editSelectOneResponseBlockChoice()\n  }\n\n  @flowVuexNamespace.Getter resourcesByUuid!: {[key: string]: IResourceDefinition}\n  @blockVuexNamespace.Getter inflatedChoices!: {[key: string]: IResourceDefinition}\n  @blockVuexNamespace.Action editSelectOneResponseBlockChoice!: () => Promise<object>\n}\n\nexport default MobilePrimitives_SelectOneResponseBlock\nexport const install = createDefaultBlockTypeInstallerFor(BLOCK_TYPE, SelectOneStore)\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MobilePrimitives_SelectOneResponseBlock.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MobilePrimitives_SelectOneResponseBlock.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./MobilePrimitives_SelectOneResponseBlock.vue?vue&type=template&id=1ae69348&\"\nimport script from \"./MobilePrimitives_SelectOneResponseBlock.vue?vue&type=script&lang=ts&\"\nexport * from \"./MobilePrimitives_SelectOneResponseBlock.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import {ActionTree, GetterTree, MutationTree} from 'vuex'\nimport {IFlowsState} from '../index'\nimport {IRootState} from '@/store'\nimport {\n  IBlockExitTestRequired,\n  IBlockExit,\n  IFlow,\n  IContext,\n  SupportedContentType,\n  findBlockOnActiveFlowWith,\n  IResourceDefinitionContentTypeSpecific,\n} from '@floip/flow-runner'\nimport IdGeneratorUuidV4 from '@floip/flow-runner/dist/domain/IdGeneratorUuidV4'\nimport ISelectOneResponseBlock from '@floip/flow-runner/dist/model/block/ISelectOneResponseBlock'\nimport {IResourceDefinitionVariantOverModesFilter} from '../resource'\nimport {\n  IResourceDefinition,\n} from '@floip/flow-runner/src/domain/IResourceResolver'\nimport Vue from 'vue'\nimport {defaults, find, max} from 'lodash'\n\nexport const BLOCK_TYPE = 'MobilePrimitives\\\\SelectOneResponse'\n\nimport { someItemsHaveValue, allItemsHaveValue, twoItemsBlank } from '../utils/listBuilder'\n\nexport const getters: GetterTree<IFlowsState, IRootState> = {\n  inflatedChoices: (state, getters, rootState, rootGetters): object => {\n    const currentBlock = rootGetters['builder/activeBlock']\n    let choices: {[key: string]: IResourceDefinition} = {}\n    return Object.keys(currentBlock.config.choices).reduce((memo, choiceKey): {[key: string]: IResourceDefinition} => {\n      memo[choiceKey] = rootGetters['flow/resourcesByUuid'][currentBlock.config.choices[choiceKey]]\n      return memo\n    }, choices)\n  },\n  allChoicesHaveContent: (state, getters): boolean => {\n    return Object.keys(getters.inflatedChoices).every((key: string) => {\n      return someItemsHaveValue(getters.inflatedChoices[key].values, \"value\")\n    })\n  },\n  twoChoicesBlank: (state, getters, rootState, rootGetters): boolean => {\n    let blankNumber = 0\n    return Object.keys(getters.inflatedChoices).some((key: string) => {\n\n      if (!someItemsHaveValue(getters.inflatedChoices[key].values, \"value\")) {\n        blankNumber += 1\n      }\n\n      if (blankNumber > 1) {\n        return true\n      }\n\n      return false\n    })\n  },\n\n}\n\nexport const mutations: MutationTree<IFlowsState> = {\n  deleteChoiceByKey(state, {choiceKeyToRemove, blockId}) {\n    //TODO - this shouldn't be necessary\n    // @ts-ignore - TS2339: Property 'flow' does not exist on type\n    const block: ISelectOneResponseBlock = findBlockOnActiveFlowWith(blockId, this.state.flow as unknown as IContext) as ISelectOneResponseBlock\n    delete block.config.choices[choiceKeyToRemove]\n    let choices: {[key: string]: string} = {}\n    //rekey\n    block.config.choices = Object.keys(block.config.choices).sort().reduce((choices, choiceKey: string, index: number) => {\n      choices[index+1] = block.config.choices[choiceKey]\n      return choices\n    }, choices)\n  },\n  pushNewChoice(state, {choiceId, blockId, newIndex}) {\n    //TODO - this shouldn't be necessary\n    // @ts-ignore - TS2339: Property 'flow' does not exist on type\n    const block: ISelectOneResponseBlock = findBlockOnActiveFlowWith(blockId, this.state.flow as unknown as IContext) as ISelectOneResponseBlock\n    block.config.choices[newIndex] = choiceId\n  }\n}\n\nexport const actions: ActionTree<IFlowsState, IRootState> = {\n  async popFirstEmptyChoice({commit, rootGetters, getters}) {\n    const choiceToRemove = find(Object.keys(getters.inflatedChoices), (key: string) => {\n      return !someItemsHaveValue(getters.inflatedChoices[key].values, \"value\")\n    })\n    if (choiceToRemove) {\n      commit('deleteChoiceByKey', {choiceKeyToRemove: choiceToRemove, blockId: rootGetters['builder/activeBlock'].uuid})\n      return rootGetters['builder/activeBlock'].config.choices[choiceToRemove]\n    }\n    return null\n  },\n  async editSelectOneResponseBlockChoice({commit, dispatch, getters, rootGetters}) {\n    const activeBlock = rootGetters['builder/activeBlock']\n    if (getters.allChoicesHaveContent) {\n      const newIndex = parseInt(max(Object.keys(activeBlock.config.choices)) || \"0\")+1\n      const blankResource = await dispatch('flow/flow_addBlankResourceForEnabledModesAndLangs', null, {root: true})\n      //due to a race condition we may have already pushed something\n      if(!activeBlock.config.choices[newIndex]) {\n        commit('pushNewChoice', {choiceId: blankResource.uuid, blockId: activeBlock.uuid, newIndex})\n        const exit: IBlockExitTestRequired = await dispatch('flow/block_createBlockExitWith', {\n          props: ({\n            uuid: (new IdGeneratorUuidV4()).generate(),\n            test: 'block.value = '+(newIndex-1),\n            label: blankResource.uuid\n          }) as IBlockExitTestRequired,\n        }, {root: true})\n        commit('flow/block_pushNewExit', {blockId: activeBlock.uuid, newExit: exit}, {root: true})\n      }\n    } else if (getters.twoChoicesBlank) {\n      const exitLabel = await dispatch('popFirstEmptyChoice', {blockId: activeBlock.uuid})\n      if(exitLabel) {\n        commit('flow/block_popExitsByLabel', {blockId: activeBlock.uuid, exitLabel}, {root: true})\n      }\n    }\n    return activeBlock.config.choices\n  },\n\n  // todo: in the flow-spec, there's mention that we can configure to swap between exit-per-choice and a default exit\n  //       but, it doesn't seem to mention how this is configured\n  async createWith({state, commit, dispatch}, {props}: {props: {uuid: string} & Partial<ISelectOneResponseBlock>}) {\n    const blankResource = await dispatch('flow/flow_addBlankResourceForEnabledModesAndLangs', null, {root: true})\n    const blankPromptResource = await dispatch('flow/flow_addBlankResourceForEnabledModesAndLangs', null, {root: true})\n    const blankQuestionPromptResource = await dispatch('flow/flow_addBlankResourceForEnabledModesAndLangs', null, {root: true})\n    const blankChoicesPromptResource = await dispatch('flow/flow_addBlankResourceForEnabledModesAndLangs', null, {root: true})\n\n    const exits: IBlockExit[] = [\n      await dispatch('flow/block_createBlockDefaultExitWith', {\n        props: ({\n          uuid: (new IdGeneratorUuidV4).generate(),\n          tag: 'Default',\n          label: 'Default',\n        }) as IBlockExit}, {root: true}),\n      await dispatch('flow/block_createBlockExitWith', {\n        props: ({\n          uuid: (new IdGeneratorUuidV4).generate(),\n          tag: 'Error',\n          label: 'Error',\n        }) as IBlockExit}, {root: true}),\n    ]\n\n    return defaults(props, {\n      type: BLOCK_TYPE,\n      name: '',\n      label: '',\n      semanticLabel: '',\n      exits,\n      config: {\n        //TODO - waiting for Brett and Bart input on these prompts\n        prompt: blankPromptResource.uuid,\n        questionPrompt: blankQuestionPromptResource.uuid,\n        choicesPrompt: blankChoicesPromptResource.uuid,\n        choices: {'1': blankResource.uuid},\n      },\n    })\n  },\n\n}\n\nexport default {\n  namespaced: true,\n  getters,\n  mutations,\n  actions,\n}\n"],"sourceRoot":""}