{"version":3,"sources":["webpack://flow-builder/./src/components/interaction-designer/block-editors/ChoicesBuilder.vue?6fb2","webpack://flow-builder/./src/components/interaction-designer/block-editors/ChoicesBuilder.vue?bc5c","webpack://flow-builder/./src/components/interaction-designer/block-editors/ChoicesBuilder.vue?4ab4","webpack://flow-builder/./src/components/interaction-designer/block-editors/ChoicesBuilder.vue","webpack://flow-builder/./src/components/interaction-designer/block-types/MobilePrimitives_SelectOneResponseBlock.vue?d2ea","webpack://flow-builder/./src/components/interaction-designer/block-types/MobilePrimitives_SelectOneResponseBlock.vue?1385","webpack://flow-builder/./src/components/interaction-designer/block-types/MobilePrimitives_SelectOneResponseBlock.vue?4674","webpack://flow-builder/./src/components/interaction-designer/block-types/MobilePrimitives_SelectOneResponseBlock.vue","webpack://flow-builder/./src/components/interaction-designer/block-editors/ExitSemanticLabelEditor.vue?e767","webpack://flow-builder/src/components/interaction-designer/block-editors/ExitSemanticLabelEditor.vue","webpack://flow-builder/./src/components/interaction-designer/block-editors/ExitSemanticLabelEditor.vue?b2d2","webpack://flow-builder/./src/components/interaction-designer/block-editors/ExitSemanticLabelEditor.vue","webpack://flow-builder/./src/store/flow/block-types/MobilePrimitives_SelectOneResponseBlockStore.ts"],"names":[],"mappings":"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","file":"flow-builder.umd.3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"choices-builder form-group\"},[_c('h4',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.choices')))]),_vm._l((_vm.choiceResourcesOrderedByResourcesList),function(resource,i){return [_c('resource-variant-text-editor',{key:resource.uuid,ref:\"choices\",refInFor:true,staticClass:\"choices-builder-item\",attrs:{\"label\":(i + 1).toString(),\"rows\":1,\"placeholder\":'Enter choice...',\"resource-id\":resource.uuid,\"resource-variant\":resource.values[0],\"mode\":_vm.SupportedMode.TEXT},on:{\"afterResourceVariantChanged\":function($event){return _vm.handleExistingResourceVariantChangedFor(\n        resource.uuid,\n        i,\n        resource)}}})]}),(_vm.draftResource)?_c('resource-variant-text-editor',{ref:\"draftChoice\",staticClass:\"choices-builder-item\",attrs:{\"label\":(_vm.choiceResourcesOrderedByResourcesList.length + 1).toString(),\"rows\":1,\"placeholder\":'Enter choice...',\"resource-id\":_vm.draftResource.uuid,\"resource-variant\":_vm.findOrGenerateStubbedVariantOn(\n      _vm.draftResource,\n      {language_id: _vm.activeFlow.languages[0].id,\n       content_type: _vm.SupportedContentType.TEXT,\n       modes: [_vm.SupportedMode.TEXT]}),\"mode\":_vm.SupportedMode.TEXT},on:{\"beforeResourceVariantChanged\":_vm.addDraftResourceToChoices,\"afterResourceVariantChanged\":function($event){return _vm.rewriteChoiceKeyFor({resourceId: _vm.draftResource.uuid, blockId: _vm.block.uuid})}}}):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {get, isEmpty, last, intersectionWith} from 'lodash'\nimport {findOrGenerateStubbedVariantOn} from '@/store/flow/resource'\nimport {Component, Prop} from 'vue-property-decorator'\nimport {mixins} from 'vue-class-component'\nimport Lang from '@/lib/filters/lang'\nimport {IBlock, IFlow, IResource, Resource, SupportedContentType, SupportedMode} from '@floip/flow-runner'\nimport {namespace} from 'vuex-class'\nimport ResourceVariantTextEditor from '@/components/interaction-designer/resource-editors/ResourceVariantTextEditor.vue'\nimport {ISelectOneResponseBlock} from '@floip/flow-runner/src/model/block/ISelectOneResponseBlock'\nimport SelectOneStore, {BLOCK_TYPE} from '@/store/flow/block-types/MobilePrimitives_SelectOneResponseBlockStore'\nimport {IdGeneratorUuidV4} from '@floip/flow-runner/dist/domain/IdGeneratorUuidV4'\nimport Vue from 'vue'\n\nconst flowVuexNamespace = namespace('flow')\nconst blockVuexNamespace = namespace(`flow/${BLOCK_TYPE}`)\n\n@Component({\n  components: {\n    ResourceVariantTextEditor,\n\n  },\n})\nclass ChoicesBuilder extends mixins(Lang) {\n  @Prop() readonly block!: ISelectOneResponseBlock\n\n  draftResource: IResource | null = null\n\n  SupportedContentType = SupportedContentType\n  SupportedMode = SupportedMode\n  findOrGenerateStubbedVariantOn = findOrGenerateStubbedVariantOn\n\n  get choiceResourcesOrderedByResourcesList(): IResource[] {\n    const choiceResourceIds = Object.values(this.block.config.choices)\n    return intersectionWith(this.resources, choiceResourceIds,\n      (resource, choiceResourceId) => resource.uuid === choiceResourceId)\n  }\n\n  created(): void {\n    this.generateDraftResource()\n  }\n\n  async generateDraftResource(): Promise<void> {\n    this.draftResource = await this.resource_createWith({ // todo: abstract as createResourceForVanillaChoice()\n      props: {uuid: await (new IdGeneratorUuidV4()).generate()},\n    })\n  }\n\n  async addDraftResourceToChoices(): Promise<void> {\n    if (this.draftResource == null) {\n      console.warn(\n        'interaction-designer/block-editors/ChoicesBuilder',\n        'Unable to add absent draft resource to block choices.',\n        {block: this.block})\n      return\n    }\n\n    this.resource_add({resource: this.draftResource})\n    this.addChoiceByResourceIdTo({blockId: this.block.uuid, resourceId: this.draftResource.uuid})\n\n    this.$nextTick(() =>\n      this.focusInputElFor(last(this.$refs.choices as Vue[])))\n\n    await this.generateDraftResource()\n  }\n\n  focusInputElFor(editor?: Vue): void {\n    (editor?.$refs.input as HTMLInputElement).focus()\n  }\n\n  handleExistingResourceVariantChangedFor(resourceId: IResource['uuid'], choiceIndex: number, resource: IResource): void {\n    const isLast = choiceIndex === this.choiceResourcesOrderedByResourcesList.length - 1\n    const hasEmptyValue = isEmpty(get(resource.values[0], 'value'))\n\n    if (isLast && hasEmptyValue) {\n      // todo: clean up resource, but should we first check for references?\n      // this.resource_delete({resourceId: resource.uuid})\n      this.deleteChoiceByResourceIdFrom({blockId: this.block.uuid, resourceId})\n      this.focusInputElFor(this.$refs.draftChoice as Vue)\n      return\n    }\n\n    this.rewriteChoiceKeyFor({resourceId, blockId: this.block.uuid})\n    this.$emit('choiceChanged', {resourceId, choiceIndex, resource})\n  }\n\n  @flowVuexNamespace.State resources!: IResource[]\n  @flowVuexNamespace.Getter resourcesByUuid!: { [key: string]: IResource }\n  @flowVuexNamespace.Getter activeFlow!: IFlow\n  @flowVuexNamespace.Mutation resource_add!: ({resource}: {resource: IResource}) => void\n  // @flowVuexNamespace.Action flow_createBlankResourceForEnabledModesAndLangs!: () => Promise<IResource>\n  @flowVuexNamespace.Action resource_createWith!: ({props}: { props: { uuid: string } & Partial<IResource> }) => Promise<IResource>\n  @blockVuexNamespace.Action deleteChoiceByResourceIdFrom!:\n    ({blockId, resourceId}: {blockId: IBlock['uuid'], resourceId: IResource['uuid']}) => void\n  @blockVuexNamespace.Action rewriteChoiceKeyFor!:\n    ({blockId, resourceId}: {blockId: IBlock['uuid'], resourceId: IResource['uuid']}) => void\n  @blockVuexNamespace.Action addChoiceByResourceIdTo!:\n    ({blockId, resourceId}: {blockId: IBlock['uuid'], resourceId: IResource['uuid']}) => void\n}\nexport default ChoicesBuilder\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChoicesBuilder.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChoicesBuilder.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ChoicesBuilder.vue?vue&type=template&id=481d38b7&\"\nimport script from \"./ChoicesBuilder.vue?vue&type=script&lang=ts&\"\nexport * from \"./ChoicesBuilder.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mobile-primitive-select-one-response-block\"},[_c('h3',{staticClass:\"block-editor-header\"},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")((\"flow-builder.\" + (_vm.block.type))))+\" \")]),_c('fieldset',{attrs:{\"disabled\":!_vm.isEditable}},[_c('block-label-editor',{attrs:{\"block\":_vm.block},on:{\"gearClicked\":function($event){_vm.showSemanticLabel = !_vm.showSemanticLabel}}}),(_vm.showSemanticLabel)?_c('block-semantic-label-editor',{attrs:{\"block\":_vm.block}}):_vm._e(),_c('block-name-editor',{attrs:{\"block\":_vm.block}}),_c('hr'),_c('choices-builder',{attrs:{\"block\":_vm.block},on:{\"choiceChanged\":_vm.handleChoiceChanged}}),_c('block-output-branching-config',{attrs:{\"block\":_vm.block,\"has-exit-per-choice\":true,\"label-class\":''},on:{\"branchingTypeChanged\":function($event){return _vm.reflowExitsWhenSwitchingToBranchingTypeNotUnified()}}}),_c('div',{staticClass:\"prompt-resource\"},[(_vm.promptResource)?_c('resource-editor',{attrs:{\"label\":_vm._f(\"trans\")('flow-builder.prompt'),\"resource\":_vm.promptResource,\"block\":_vm.block,\"flow\":_vm.flow}}):_vm._e()],1),_vm._t(\"extras\"),_c('categorization',{attrs:{\"block\":_vm.block}}),_c('generic-contact-property-editor',{attrs:{\"block\":_vm.block}}),_c('hr'),_c('first-block-editor-button',{attrs:{\"flow\":_vm.flow,\"block-id\":_vm.block.uuid}})],2),_c('block-id',{attrs:{\"block\":_vm.block}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {IBlock, IBlockExit, IFlow, IResource, SupportedMode} from '@floip/flow-runner'\nimport {ISelectOneResponseBlock} from '@floip/flow-runner/src/model/block/ISelectOneResponseBlock'\nimport {namespace} from 'vuex-class'\nimport {Component, Prop} from 'vue-property-decorator'\nimport {includes, map} from 'lodash'\n\nimport SelectOneStore, {BLOCK_TYPE} from '@/store/flow/block-types/MobilePrimitives_SelectOneResponseBlockStore'\nimport Lang from '@/lib/filters/lang'\nimport Categorization from '@/components/interaction-designer/block-editors/Categorization.vue'\nimport {createDefaultBlockTypeInstallerFor} from '@/store/builder'\nimport {mixins} from 'vue-class-component'\nimport ResourceVariantTextEditor from '@/components/interaction-designer/resource-editors/ResourceVariantTextEditor.vue'\nimport {findOrGenerateStubbedVariantOn} from '@/store/flow/resource'\nimport ChoicesBuilder from '@/components/interaction-designer/block-editors/ChoicesBuilder.vue'\nimport BlockOutputBranchingConfig, {\n  IBlockWithBranchingType,\n  OutputBranchingType,\n} from '@/components/interaction-designer/block-editors/BlockOutputBranchingConfig.vue'\nimport BlockNameEditor from '../block-editors/NameEditor.vue'\nimport BlockLabelEditor from '../block-editors/LabelEditor.vue'\nimport BlockSemanticLabelEditor from '../block-editors/SemanticLabelEditor.vue'\nimport BlockExitSemanticLabelEditor from '../block-editors/ExitSemanticLabelEditor.vue'\nimport FirstBlockEditorButton from '../flow-editors/FirstBlockEditorButton.vue'\nimport ResourceEditor from '../resource-editors/ResourceEditor.vue'\nimport BlockId from '../block-editors/BlockId.vue'\nimport GenericContactPropertyEditor from '../block-editors/GenericContactPropertyEditor.vue'\n\nconst flowVuexNamespace = namespace('flow')\nconst blockVuexNamespace = namespace(`flow/${BLOCK_TYPE}`)\nconst builderVuexNamespace = namespace('builder')\n\n@Component({\n  components: {\n    GenericContactPropertyEditor,\n    ResourceVariantTextEditor,\n    BlockExitSemanticLabelEditor,\n    BlockId,\n    BlockLabelEditor,\n    BlockNameEditor,\n    BlockOutputBranchingConfig,\n    BlockSemanticLabelEditor,\n    ChoicesBuilder,\n    FirstBlockEditorButton,\n    ResourceEditor,\n    Categorization,\n  },\n})\nexport class MobilePrimitives_SelectOneResponseBlock extends mixins(Lang) {\n  @Prop() readonly block!: ISelectOneResponseBlock\n\n  @Prop() readonly flow!: IFlow\n\n  showSemanticLabel = false\n\n  SupportedMode = SupportedMode\n  findOrGenerateStubbedVariantOn = findOrGenerateStubbedVariantOn\n\n  get promptResource(): IResource {\n    return this.resourcesByUuid[this.block.config.prompt]\n  }\n\n  handleChoiceChanged(): void {\n    const {uuid: blockId, vendor_metadata: metadata} = this.block as unknown as IBlockWithBranchingType\n    const {EXIT_PER_CHOICE, UNIFIED} = OutputBranchingType\n\n    if (metadata.io_viamo.branchingType === UNIFIED) {\n      this.handleBranchingTypeChangedToUnified({block: this.block})\n    }\n\n    if (metadata.io_viamo.branchingType !== EXIT_PER_CHOICE) {\n      return\n    }\n\n    this.reflowExitsFromChoices({blockId})\n  }\n\n  reflowExitsWhenSwitchingToBranchingTypeNotUnified(): void {\n    const {uuid: blockId, vendor_metadata: metadata} = this.block as unknown as IBlockWithBranchingType\n    const {EXIT_PER_CHOICE, ADVANCED} = OutputBranchingType\n    const isEnteringChoiceOrAdvancedBranchingType = includes([EXIT_PER_CHOICE, ADVANCED], metadata.io_viamo.branchingType)\n\n    if (!isEnteringChoiceOrAdvancedBranchingType) {\n      this.handleBranchingTypeChangedToUnified({block: this.block})\n      return\n    }\n\n    this.reflowExitsFromChoices({blockId})\n  }\n\n  @flowVuexNamespace.Getter resourcesByUuid!: { [key: string]: IResource }\n  @flowVuexNamespace.Action block_createBlockExitWith!: ({props}: { props: { uuid: string } & Partial<IBlockExit> }) => Promise<IBlockExit>\n  @flowVuexNamespace.Action block_convertExitFormationToUnified!:\n    ({blockId, test}: {blockId: IBlock['uuid'], test: IBlockExit['test']}) => Promise<void>\n  @blockVuexNamespace.Action reflowExitsFromChoices!: ({blockId}: {blockId: IBlock['uuid']}) => void\n  @blockVuexNamespace.Action handleBranchingTypeChangedToUnified!: ({block}: {block: IBlock}) => void\n  @builderVuexNamespace.Getter isEditable !: boolean\n}\n\nexport default MobilePrimitives_SelectOneResponseBlock\nexport const install = createDefaultBlockTypeInstallerFor(BLOCK_TYPE, SelectOneStore)\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MobilePrimitives_SelectOneResponseBlock.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MobilePrimitives_SelectOneResponseBlock.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./MobilePrimitives_SelectOneResponseBlock.vue?vue&type=template&id=b97b0298&\"\nimport script from \"./MobilePrimitives_SelectOneResponseBlock.vue?vue&type=script&lang=ts&\"\nexport * from \"./MobilePrimitives_SelectOneResponseBlock.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('text-editor',{attrs:{\"is-editable\":_vm.isEditable,\"label\":_vm._f(\"trans\")('flow-builder.block-exit-semantic-label'),\"placeholder\":_vm._f(\"trans\")('flow-builder.enter-block-exit-semantic-label')},model:{value:(_vm.semanticLabel),callback:function ($$v) {_vm.semanticLabel=$$v},expression:\"semanticLabel\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <text-editor\n      v-model=\"semanticLabel\"\n      :is-editable=\"isEditable\"\n      :label=\"'flow-builder.block-exit-semantic-label' | trans\"\n      :placeholder=\"'flow-builder.enter-block-exit-semantic-label' | trans\" />\n  </div>\n</template>\n\n<script lang=\"js\">\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types,@typescript-eslint/strict-boolean-expressions */\nimport {mapMutations} from 'vuex'\nimport TextEditor from '@/components/common/TextEditor'\nimport {lang} from '@/lib/filters/lang'\n\nexport default {\n  components: {\n    TextEditor,\n  },\n  mixins: [lang],\n  props: {\n    isEditable: {\n      default: true,\n      type: Boolean,\n    },\n    exit: {\n      type: Object,\n      required: true,\n    },\n  },\n  computed: {\n    semanticLabel: {\n      get() {\n        return this.exit.semantic_label\n      },\n      set(value) {\n        this.exit.semantic_label = value\n        this.$emit('commitSemanticLabel', value)\n      },\n    },\n  },\n  methods: {\n    ...mapMutations('flow', ['block_setExitSemanticLabel']),\n  },\n}\n\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExitSemanticLabelEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExitSemanticLabelEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ExitSemanticLabelEditor.vue?vue&type=template&id=5c7a7930&\"\nimport script from \"./ExitSemanticLabelEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./ExitSemanticLabelEditor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import {ActionTree, GetterTree, MutationTree} from 'vuex'\nimport {IRootState} from '@/store'\nimport {\n  findBlockWith,\n  IBlock,\n  IBlockExit,\n  IResource,\n  ValidationException,\n} from '@floip/flow-runner'\nimport {IdGeneratorUuidV4} from '@floip/flow-runner/dist/domain/IdGeneratorUuidV4'\nimport {ISelectOneResponseBlock} from '@floip/flow-runner/dist/model/block/ISelectOneResponseBlock'\nimport Vue from 'vue'\nimport {defaultsDeep, findKey, get, map, omit, snakeCase} from 'lodash'\nimport {validateCommunityBlock} from '@/store/validation/validationHelpers'\nimport {IFlowsState} from '../index'\n\nexport const BLOCK_TYPE = 'MobilePrimitives.SelectOneResponse'\n\nexport interface ICustomFlowState extends Partial<IFlowsState> {}\n\nexport const stateFactory = (): ICustomFlowState => ({})\n\nexport const getters: GetterTree<ICustomFlowState, IRootState> = {}\n\nexport const mutations: MutationTree<ICustomFlowState> = {}\n\nexport const actions: ActionTree<ICustomFlowState, IRootState> = {\n  rewriteChoiceKeyFor({rootGetters, dispatch}, {resourceId, blockId}: {resourceId: IResource['uuid'], blockId: IBlock['uuid']}) {\n    const block: ISelectOneResponseBlock = findBlockWith(blockId, rootGetters['flow/activeFlow']) as ISelectOneResponseBlock\n    const resource: IResource = rootGetters['flow/resourcesByUuid'][resourceId]\n\n    if (resource == null) {\n      throw new ValidationException(`Unable to find resource for choice: ${resourceId}`)\n    }\n\n    const choiceKey = String(findKey(block.config.choices, (v) => v === resourceId))\n    // omit() will inadvertently but desirably remove an empty `choiceKey`\n    block.config.choices = omit(block.config.choices, choiceKey)\n    dispatch('addChoiceByResourceIdTo', {blockId, resourceId})\n  },\n\n  addChoiceByResourceIdTo({rootGetters}, {blockId, resourceId}: {blockId: IBlock['uuid'], resourceId: IResource['uuid']}) {\n    const block: ISelectOneResponseBlock = findBlockWith(blockId, rootGetters['flow/activeFlow']) as ISelectOneResponseBlock\n    const resource: IResource = rootGetters['flow/resourcesByUuid'][resourceId]\n\n    if (resource == null) {\n      throw new ValidationException(`Unable to find resource for choice: ${resourceId}`)\n    }\n\n    // defaulted to `resourceId` to mitigate empty keys and associated error handling altogether\n    const desiredChoiceKey = snakeCase(get(resource.values[0], 'value')) || resource.uuid\n    const doesChoiceKeyAlreadyExist = desiredChoiceKey in block.config.choices\n    // apply suffix as resourceId when duplicated to prevent overwriting as input is received\n    const suffix = doesChoiceKeyAlreadyExist ? `-${resource.uuid}` : ''\n    Vue.set(block.config.choices, `${desiredChoiceKey}${suffix}`, resource.uuid)\n  },\n\n  deleteChoiceByResourceIdFrom({rootGetters}, {blockId, resourceId}: {blockId: IBlock['uuid'], resourceId: IResource['uuid']}) {\n    const block: ISelectOneResponseBlock = findBlockWith(blockId, rootGetters['flow/activeFlow']) as ISelectOneResponseBlock\n    const choiceKey = String(findKey(block.config.choices, (v) => v === resourceId))\n    Vue.delete(block.config.choices, choiceKey)\n  },\n\n  async reflowExitsFromChoices({dispatch, rootGetters}, {blockId}: {blockId: IBlock['uuid']}) {\n    const block: ISelectOneResponseBlock = findBlockWith(blockId, rootGetters['flow/activeFlow']) as ISelectOneResponseBlock\n    const {config: {choices}, exits}: ISelectOneResponseBlock = block\n    const choiceKeys = Object.keys(choices)\n    const exitsForChoices: IBlockExit[] = exits.slice(0, -1) // non-default exits; default should always be last\n\n    // reflow exits based on choices\n    await Promise.all(choiceKeys.map(async (choiceKey, i) => {\n      if (exitsForChoices[i] == null) {\n        const uuid = await (new IdGeneratorUuidV4()).generate()\n        const exit = await dispatch('flow/block_createBlockExitWith', {props: {uuid} as IBlockExit}, {root: true})\n        exitsForChoices.push(exit)\n      }\n\n      Object.assign(exitsForChoices[i], {\n        name: choiceKey,\n        test: `block.value = \"${choiceKey}\"`,\n      })\n    }))\n\n    exits.splice(0, exits.length - 1, ...exitsForChoices)\n  },\n\n  async createWith({dispatch}, {props}: { props: { uuid: string } & Partial<ISelectOneResponseBlock> }) {\n    const blankPromptResource = await dispatch('flow/flow_addBlankResourceForEnabledModesAndLangs', null, {root: true})\n    const exits: IBlockExit[] = [\n      await dispatch('flow/block_createBlockDefaultExitWith', {\n        props: ({\n          uuid: await (new IdGeneratorUuidV4()).generate(),\n        }) as IBlockExit,\n      }, {root: true}),\n    ]\n\n    return defaultsDeep(props, {\n      type: BLOCK_TYPE,\n      name: '',\n      label: '',\n      semantic_label: '',\n      config: {\n        prompt: blankPromptResource.uuid,\n        choices: {},\n      },\n      exits,\n      tags: [],\n      vendor_metadata: {},\n    })\n  },\n\n  handleBranchingTypeChangedToUnified({dispatch}, {block}: {block: IBlock}) {\n    dispatch('flow/block_convertExitFormationToUnified', {\n      blockId: block.uuid,\n      test: formatTestValueForUnifiedBranchingType(block as ISelectOneResponseBlock),\n    }, {root: true})\n  },\n\n  validate({rootGetters}, {block, schemaVersion}: {block: IBlock, schemaVersion: string}) {\n    return validateCommunityBlock({block, schemaVersion})\n  },\n}\n\nfunction formatTestValueForUnifiedBranchingType(block: ISelectOneResponseBlock): string {\n  const blockChoicesKey = Object.keys(block.config.choices)\n  if (blockChoicesKey.length === 0) {\n    console.warn('Choices are empty for SelectOneBlock, providing `true` by default')\n    return 'true'\n  }\n  return `OR(${map(blockChoicesKey, (choice) => `block.value = \"${choice}\"`).join(',')})`\n}\n\nexport default {\n  namespaced: true,\n  state: stateFactory,\n  getters,\n  mutations,\n  actions,\n}\n"],"sourceRoot":""}