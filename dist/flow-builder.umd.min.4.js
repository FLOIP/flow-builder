(("undefined"!==typeof self?self:this)["webpackJsonpflow_builder"]=("undefined"!==typeof self?self:this)["webpackJsonpflow_builder"]||[]).push([[4],{"02b5":function(e,t,o){"use strict";o.r(t),o.d(t,"install",(function(){return de}));var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"core-set-group-membership-block"},[o("h3",{staticClass:"block-editor-header"},[e._v(" "+e._s(e._f("trans")("flow-builder."+e.block.type))+" ")]),o("fieldset",{attrs:{disabled:!e.isEditable}},[o("block-label-editor",{attrs:{block:e.block},on:{gearClicked:function(t){e.showSemanticLabel=!e.showSemanticLabel}}}),e.showSemanticLabel?o("block-semantic-label-editor",{attrs:{block:e.block}}):e._e(),o("block-name-editor",{attrs:{block:e.block}}),e._t("extras"),o("group-membership-editor",{attrs:{block:e.block}}),o("hr"),o("block-output-branching-config",{attrs:{block:e.block,"has-exit-per-choice":!1},on:{branchingTypeChangedToUnified:function(t){return e.handleBranchingTypeChangedToUnified({block:e.block})}}}),o("categorization",{attrs:{block:e.block}}),o("generic-contact-property-editor",{attrs:{block:e.block}}),o("hr"),o("first-block-editor-button",{attrs:{flow:e.flow,"block-id":e.block.uuid}})],2),o("block-id",{attrs:{block:e.block}})],1)},r=[],i=o("276c"),c=o("e954"),n=o("2c4c"),s=o("920b"),l=o("92a6"),b=o("fc11"),u=(o("99af"),o("9ab4")),d=o("4bb5"),p=o("1b40"),m=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("validation-message",{attrs:{"message-key":"block/"+e.block.uuid+"/config/group_key"},scopedSlots:e._u([{key:"input-control",fn:function(t){var a=t.isValid;return[o("div",{staticClass:"block-group"},[o("label",{staticClass:"text-primary"},[e._v(e._s(e._f("trans")("flow-builder.group-label")))]),o("vue-multiselect",{class:{invalid:!1===a},attrs:{"track-by":"id",label:"name",placeholder:e._f("trans")("flow-builder.group-selector-placeholder"),options:e.groups,"allow-empty":!1,"show-labels":!1,searchable:!0},model:{value:e.selectedGroup,callback:function(t){e.selectedGroup=t},expression:"selectedGroup"}})],1)]}}])})},f=[],h=(o("b0c0"),o("8e5f")),_=o.n(h),O=o("4a51"),k=o("2ef0"),g=o("2fe1"),v=o("21e9"),E=Object(d["e"])("flow"),j=function(e){Object(s["a"])(o,e);var t=Object(l["a"])(o);function o(){var e;Object(i["a"])(this,o);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r)),Object(b["a"])(Object(n["a"])(e),"block",void 0),Object(b["a"])(Object(n["a"])(e),"block_updateConfigByPath",void 0),Object(b["a"])(Object(n["a"])(e),"groups",void 0),e}return Object(c["a"])(o,[{key:"selectedGroup",get:function(){var e=this.block.config.group_key;if(!e)return{};var t=Object(k["find"])(this.groups,{id:e});return t||{}},set:function(e){this.block_updateConfigByPath({blockId:this.block.uuid,path:"group_key",value:e.id}),this.block_updateConfigByPath({blockId:this.block.uuid,path:"group_name",value:e.name})}}]),o}(Object(g["c"])(O["a"]));Object(u["__decorate"])([Object(p["b"])()],j.prototype,"block",void 0),Object(u["__decorate"])([E.Mutation],j.prototype,"block_updateConfigByPath",void 0),Object(u["__decorate"])([d["b"]],j.prototype,"groups",void 0),j=Object(u["__decorate"])([Object(p["a"])({components:{VueMultiselect:_.a,ValidationMessage:v["a"]}})],j);var y=j,M=y,C=(o("75ce"),o("2877")),I=Object(C["a"])(M,m,f,!1,null,"caea6292",null),w=I.exports,A=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"group-membership-editor"},[o("hr"),o("div",{staticClass:"form-group"},[o("label",{staticClass:"text-primary"},[e._v(e._s(e._f("trans")("flow-builder.action-label")))]),o("p",[e._v(e._s(e._f("trans")("flow-builder.group-membership-action-hint")))]),o("div",{staticClass:"form-group"},[o("div",{staticClass:"custom-control custom-radio"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.membershipAction,expression:"membershipAction"}],staticClass:"custom-control-input",attrs:{id:"addGroup",type:"radio",name:"groupMembershipAction"},domProps:{value:e.MEMBERSHIP_ACTION.ADD,checked:e._q(e.membershipAction,e.MEMBERSHIP_ACTION.ADD)},on:{change:function(t){e.membershipAction=e.MEMBERSHIP_ACTION.ADD}}}),o("label",{staticClass:"custom-control-label font-weight-normal",attrs:{for:"addGroup"}},[e._v(" "+e._s(e._f("trans")("flow-builder.set-group-membership"))+" ")])]),o("div",{staticClass:"custom-control custom-radio"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.membershipAction,expression:"membershipAction"}],staticClass:"custom-control-input",attrs:{id:"clearGroup",type:"radio",name:"groupMembershipAction"},domProps:{value:e.MEMBERSHIP_ACTION.REMOVE,checked:e._q(e.membershipAction,e.MEMBERSHIP_ACTION.REMOVE)},on:{change:function(t){e.membershipAction=e.MEMBERSHIP_ACTION.REMOVE}}}),o("label",{staticClass:"custom-control-label font-weight-normal",attrs:{for:"clearGroup"}},[e._v(" "+e._s(e._f("trans")("flow-builder.clear-group-membership"))+" ")])]),o("div",{staticClass:"custom-control custom-radio"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.membershipAction,expression:"membershipAction"}],staticClass:"custom-control-input",attrs:{id:"setFromExpression",type:"radio",name:"groupMembershipAction"},domProps:{value:e.MEMBERSHIP_ACTION.SET_FROM_EXPRESSION,checked:e._q(e.membershipAction,e.MEMBERSHIP_ACTION.SET_FROM_EXPRESSION)},on:{change:function(t){e.membershipAction=e.MEMBERSHIP_ACTION.SET_FROM_EXPRESSION}}}),o("label",{staticClass:"custom-control-label font-weight-normal",attrs:{for:"setFromExpression"}},[e._v(" "+e._s(e._f("trans")("flow-builder.set-group-membership-from-expression"))+" ")])])]),o("validation-message",{attrs:{"message-key":"block/"+e.block.uuid+"/config/group_key"},scopedSlots:e._u([{key:"input-control",fn:function(t){var a=t.isValid;return[o("div",{staticClass:"block-group-key"},[o("text-editor",{attrs:{label:e._f("trans")("flow-builder.group-label"),"label-class":"font-weight-bold",placeholder:e._f("trans")("flow-builder.enter-group-label"),"valid-state":a},model:{value:e.groupKey,callback:function(t){e.groupKey=t},expression:"groupKey"}})],1)]}}])}),e.membershipAction===e.MEMBERSHIP_ACTION.SET_FROM_EXPRESSION?o("validation-message",{attrs:{"message-key":"block/"+e.block.uuid+"/config/is_member"},scopedSlots:e._u([{key:"input-control",fn:function(t){var a=t.isValid;return[o("expression-input",{attrs:{label:e._f("trans")("flow-builder.value-expression"),placeholder:e._f("trans")("flow-builder.enter-expression"),"label-class":"font-weight-bold","current-expression":e.isMember,"valid-state":a},on:{commitExpressionChange:e.updateIsMemberExpression}})]}}],null,!1,628814233)}):e._e()],1)])},S=[],B=o("6faa"),R=o("d883"),P=Object(d["e"])("flow"),x="@(null)",T="@(true)",N="",V=function(e){Object(s["a"])(o,e);var t=Object(l["a"])(o);function o(){var e;Object(i["a"])(this,o);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r)),Object(b["a"])(Object(n["a"])(e),"block",void 0),Object(b["a"])(Object(n["a"])(e),"MEMBERSHIP_ACTION",{ADD:"add",SET_FROM_EXPRESSION:"set_from_expression",REMOVE:"remove"}),Object(b["a"])(Object(n["a"])(e),"block_updateConfigByPath",void 0),e}return Object(c["a"])(o,[{key:"membershipAction",get:function(){return this.isMember===x?this.MEMBERSHIP_ACTION.REMOVE:this.isMember===T?this.MEMBERSHIP_ACTION.ADD:this.MEMBERSHIP_ACTION.SET_FROM_EXPRESSION},set:function(e){e===this.MEMBERSHIP_ACTION.REMOVE?this.updateIsMemberExpression(x):e===this.MEMBERSHIP_ACTION.ADD?this.updateIsMemberExpression(T):this.updateIsMemberExpression(N)}},{key:"groupKey",get:function(){return Object(k["get"])(this.block.config,"group_key")},set:function(e){this.block_updateConfigByPath({blockId:this.block.uuid,path:"group_key",value:e})}},{key:"isMember",get:function(){return Object(k["get"])(this.block.config,"is_member",N)}},{key:"updateIsMemberExpression",value:function(e){this.block_updateConfigByPath({blockId:this.block.uuid,path:"is_member",value:e})}}]),o}(Object(g["c"])(O["a"]));Object(u["__decorate"])([Object(p["b"])()],V.prototype,"block",void 0),Object(u["__decorate"])([P.Mutation],V.prototype,"block_updateConfigByPath",void 0),V=Object(u["__decorate"])([Object(p["a"])({components:{TextEditor:R["a"],ExpressionInput:B["a"],ValidationMessage:v["a"]}})],V);var G=V,H=G,D=Object(C["a"])(H,A,S,!1,null,null,null),F=D.exports,L=o("c964"),U=(o("96cf"),o("31aa")),X=o("85b2"),K="add",q="remove",$="Core.SetGroupMembership",z={},J={},W={createWith:function(e,t){return Object(L["a"])(regeneratorRuntime.mark((function o(){var a,r,i;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return a=e.dispatch,r=t.props,o.t0=a,o.next=5,(new U["IdGeneratorUuidV4"]).generate();case 5:return o.t1=o.sent,o.t2={uuid:o.t1},o.t3={props:o.t2},o.t4={root:!0},o.next=11,(0,o.t0)("flow/block_createBlockDefaultExitWith",o.t3,o.t4);case 11:return o.t5=o.sent,i=[o.t5],o.abrupt("return",Object(k["defaultsDeep"])(r,{type:$,name:"",label:"",semantic_label:"",config:{group_key:"",group_name:"",is_member:null},exits:i,tags:[],vendor_metadata:{}}));case 14:case"end":return o.stop()}}),o)})))()},handleBranchingTypeChangedToUnified:function(e,t){var o=e.dispatch,a=t.block;o("flow/block_convertExitFormationToUnified",{blockId:a.uuid,test:"block.value = true"},{root:!0})},setIsMember:function(e,t){return Object(L["a"])(regeneratorRuntime.mark((function o(){var a,r,i,c;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:a=e.commit,r=e.rootGetters,i=r["builder/activeBlock"],c=!1,t&&(c=t.id===K),a("flow/block_updateConfigByPath",{blockId:i.uuid,path:"is_member",value:c},{root:!0});case 5:case"end":return o.stop()}}),o)})))()},validate:function(e,t){e.rootGetters;var o=t.block,a=t.schemaVersion;return Object(X["e"])({block:o,schemaVersion:a})}},Q={namespaced:!0,getters:z,mutations:J,actions:W},Y=o("8619"),Z=o("af98"),ee=o("18b0"),te=o("792f"),oe=o("192b"),ae=o("1b4e"),re=o("3411"),ie=o("f04e"),ce=o("b4ec"),ne=Object(d["e"])("flow/".concat($)),se=Object(d["e"])("flow"),le=Object(d["e"])("builder"),be=function(e){Object(s["a"])(o,e);var t=Object(l["a"])(o);function o(){var e;Object(i["a"])(this,o);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r)),Object(b["a"])(Object(n["a"])(e),"block",void 0),Object(b["a"])(Object(n["a"])(e),"flow",void 0),Object(b["a"])(Object(n["a"])(e),"showSemanticLabel",!1),Object(b["a"])(Object(n["a"])(e),"actionsList",[{id:K,name:e.trans("flow-builder.add")},{id:q,name:e.trans("flow-builder.remove")}]),Object(b["a"])(Object(n["a"])(e),"setIsMember",void 0),Object(b["a"])(Object(n["a"])(e),"handleBranchingTypeChangedToUnified",void 0),Object(b["a"])(Object(n["a"])(e),"isEditable",void 0),Object(b["a"])(Object(n["a"])(e),"block_updateConfigByPath",void 0),e}return Object(c["a"])(o,[{key:"selectedAction",get:function(){var e=this.block.config.is_member;return e?e&&Object(k["find"])(this.actionsList,{id:K})||{}:Object(k["find"])(this.actionsList,{id:q})||{}},set:function(e){this.setIsMember(e)}}]),o}(Object(g["c"])(O["a"]));Object(u["__decorate"])([Object(p["b"])()],be.prototype,"block",void 0),Object(u["__decorate"])([Object(p["b"])()],be.prototype,"flow",void 0),Object(u["__decorate"])([ne.Action],be.prototype,"setIsMember",void 0),Object(u["__decorate"])([ne.Action],be.prototype,"handleBranchingTypeChangedToUnified",void 0),Object(u["__decorate"])([le.Getter],be.prototype,"isEditable",void 0),Object(u["__decorate"])([se.Mutation],be.prototype,"block_updateConfigByPath",void 0),be=Object(u["__decorate"])([Object(p["a"])({components:{GenericContactPropertyEditor:ce["a"],BlockNameEditor:ie["a"],BlockLabelEditor:re["a"],BlockSemanticLabelEditor:ae["a"],FirstBlockEditorButton:oe["a"],BlockId:te["a"],GroupSelector:w,VueMultiselect:_.a,ValidationMessage:v["a"],Categorization:Y["a"],GroupMembershipEditor:F,BlockOutputBranchingConfig:ee["c"]}})],be);var ue=be,de=Object(Z["d"])($,Q),pe=ue,me=(o("54df"),Object(C["a"])(pe,a,r,!1,null,"22114df1",null));t["default"]=me.exports},"3e88":function(e,t,o){},"54df":function(e,t,o){"use strict";var a=o("3e88"),r=o.n(a);r.a},"75ce":function(e,t,o){"use strict";var a=o("edc4"),r=o.n(a);r.a},edc4:function(e,t,o){}}]);
//# sourceMappingURL=flow-builder.umd.min.4.js.map