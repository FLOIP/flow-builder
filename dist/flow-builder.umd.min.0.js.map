{"version":3,"sources":["webpack://flow-builder/./src/components/interaction-designer/resource-editors/ResourceVariantTextEditor.vue?fb7d","webpack://flow-builder/./src/components/interaction-designer/block-editors/PhoneRecordingRecorderSelector.vue?b47e","webpack://flow-builder/./src/components/interaction-designer/flow-editors/FirstBlockEditorButton.vue?4fda","webpack://flow-builder/./src/components/interaction-designer/flow-editors/FirstBlockEditorButton.vue?d0ef","webpack://flow-builder/./src/components/interaction-designer/flow-editors/FirstBlockEditorButton.vue?5fad","webpack://flow-builder/./src/components/interaction-designer/flow-editors/FirstBlockEditorButton.vue","webpack://flow-builder/./src/components/interaction-designer/block-editors/SemanticLabelEditor.vue?935e","webpack://flow-builder/src/components/interaction-designer/block-editors/SemanticLabelEditor.vue","webpack://flow-builder/./src/components/interaction-designer/block-editors/SemanticLabelEditor.vue?2154","webpack://flow-builder/./src/components/interaction-designer/block-editors/SemanticLabelEditor.vue","webpack://flow-builder/./src/components/interaction-designer/block-editors/LabelEditor.vue?317a","webpack://flow-builder/./src/components/interaction-designer/block-editors/LabelEditor.vue?dfd9","webpack://flow-builder/./src/components/interaction-designer/block-editors/LabelEditor.vue?497b","webpack://flow-builder/./src/components/interaction-designer/block-editors/LabelEditor.vue","webpack://flow-builder/./src/components/common/AudioLibrarySearchField.vue?a8ea","webpack://flow-builder/./src/components/interaction-designer/resource-editors/ResourceEditor.vue?f8c1","webpack://flow-builder/./src/lib/mixins/FlowUploader.ts","webpack://flow-builder/./src/components/common/AudioLibrarySelector.vue?8425","webpack://flow-builder/./src/components/common/AudioLibrarySearchField.vue?c533","webpack://flow-builder/src/components/common/AudioLibrarySearchField.vue","webpack://flow-builder/./src/components/common/AudioLibrarySearchField.vue?b8ca","webpack://flow-builder/./src/components/common/AudioLibrarySearchField.vue","webpack://flow-builder/./src/components/common/AudioLibrarySelection.vue?d626","webpack://flow-builder/./src/lib/filters/moment.js","webpack://flow-builder/src/components/common/AudioLibrarySelection.vue","webpack://flow-builder/./src/components/common/AudioLibrarySelection.vue?c7e4","webpack://flow-builder/./src/components/common/AudioLibrarySelection.vue","webpack://flow-builder/src/components/common/AudioLibrarySelector.vue","webpack://flow-builder/./src/components/common/AudioLibrarySelector.vue?53e4","webpack://flow-builder/./src/components/common/AudioLibrarySelector.vue","webpack://flow-builder/./src/components/interaction-designer/block-editors/PhoneRecorder.vue?00cf","webpack://flow-builder/./src/components/interaction-designer/block-editors/PhoneRecordingRecorderSelector.vue?1037","webpack://flow-builder/src/components/interaction-designer/block-editors/PhoneRecordingRecorderSelector.vue","webpack://flow-builder/./src/components/interaction-designer/block-editors/PhoneRecordingRecorderSelector.vue?7697","webpack://flow-builder/./src/components/interaction-designer/block-editors/PhoneRecordingRecorderSelector.vue","webpack://flow-builder/src/components/interaction-designer/block-editors/PhoneRecorder.vue","webpack://flow-builder/./src/components/interaction-designer/block-editors/PhoneRecorder.vue?baeb","webpack://flow-builder/./src/components/interaction-designer/block-editors/PhoneRecorder.vue","webpack://flow-builder/./src/components/interaction-designer/block-editors/UploadMonitor.vue?c541","webpack://flow-builder/./src/store/trees/multimediaUpload.js","webpack://flow-builder/src/components/interaction-designer/block-editors/UploadMonitor.vue","webpack://flow-builder/./src/components/interaction-designer/block-editors/UploadMonitor.vue?48ac","webpack://flow-builder/./src/components/interaction-designer/block-editors/UploadMonitor.vue","webpack://flow-builder/./src/components/interaction-designer/resource-editors/ResourceEditor.vue?e48e","webpack://flow-builder/./src/components/interaction-designer/resource-editors/ResourceEditor.vue?d175","webpack://flow-builder/./src/components/interaction-designer/resource-editors/ResourceEditor.vue","webpack://flow-builder/./src/components/interaction-designer/block-editors/PhoneRecordingRecorderSelector.vue?c4d1","webpack://flow-builder/./src/components/interaction-designer/resource-editors/ResourceVariantTextEditor.vue?2e34","webpack://flow-builder/./src/components/common/AudioLibrarySelection.vue?e1be","webpack://flow-builder/./src/components/interaction-designer/block-editors/BlockId.vue?f4b7","webpack://flow-builder/./src/components/interaction-designer/block-editors/BlockId.vue?f848","webpack://flow-builder/./src/components/interaction-designer/block-editors/BlockId.vue?aafa","webpack://flow-builder/./src/components/interaction-designer/block-editors/BlockId.vue","webpack://flow-builder/./src/components/interaction-designer/resource-editors/ResourceVariantTextEditor.vue?9522","webpack://flow-builder/./src/components/common/AudioLibrarySelection.vue?3262","webpack://flow-builder/./src/components/interaction-designer/block-editors/PhoneRecordingRecorderSelector.vue?3e5d","webpack://flow-builder/./src/components/interaction-designer/block-editors/UploadMonitor.vue?4e06","webpack://flow-builder/./src/components/common/AudioLibrarySearchField.vue?1b1c","webpack://flow-builder/./src/components/interaction-designer/block-editors/UploadMonitor.vue?01cb","webpack://flow-builder/./src/components/interaction-designer/block-editors/UploadMonitor.vue?533d","webpack://flow-builder/./src/components/interaction-designer/resource-editors/ResourceVariantTextEditor.vue?cc3d","webpack://flow-builder/src/components/interaction-designer/resource-editors/ResourceVariantTextEditor.vue","webpack://flow-builder/./src/components/interaction-designer/resource-editors/ResourceVariantTextEditor.vue?8dfc","webpack://flow-builder/./src/components/interaction-designer/resource-editors/ResourceVariantTextEditor.vue","webpack://flow-builder/./src/components/common/AudioLibrarySelection.vue?a41f","webpack://flow-builder/./src/components/interaction-designer/block-editors/NameEditor.vue?1b2b","webpack://flow-builder/src/components/interaction-designer/block-editors/NameEditor.vue","webpack://flow-builder/./src/components/interaction-designer/block-editors/NameEditor.vue?32e2","webpack://flow-builder/./src/components/interaction-designer/block-editors/NameEditor.vue","webpack://flow-builder/./src/components/common/AudioLibrarySearchField.vue?85d7"],"names":["___CSS_LOADER_API_IMPORT___","exports","push","module","i","content","locals","add","default","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","_f","attrs","isStartBlock","on","$event","setStartBlock","_e","staticRenderFns","flowVuexNamespace","event","flowId","flow","uuid","blockId","flow_setFirstBlockId","first_block_id","Mutation","component","model","value","callback","$$v","semanticLabel","expression","components","TextEditor","props","block","type","Object","required","mixins","lang","computed","get","semantic_label","set","block_setSemanticLabel","methods","label","block_setLabel","_l","ref","languageId","id","language","mode","toLowerCase","discoverContentTypesFor","contentType","SupportedContentType","TEXT","resource","findOrGenerateStubbedVariantOn","language_id","content_type","modes","AUDIO","findAudioResourceVariantFor","preventDefault","can","isFeatureAudioUploadEnabled","triggerRecordViaPhoneFor","directives","name","rawName","target","route","token","accept","handleFilesSubmittedFor","handleFileSuccessFor","availableAudio","el","data","dispatchEvent","extend","Event","bubbles","cancelable","bind","binding","upload_token","uploader","singleFile","chunkSize","query","support","style","overflow","assignBrowse","chain","children","find","tagName","assign","files","e","file","json","message","unbind","selectedAudioFile","langId","clearSelection","audioFiles","selectAudioFile","class","active","isEntireLibraryModeEnabled","toggleAudioLibrary","domProps","activate","deactivate","composing","rawQuery","resetPagination","isAudioLibraryEmpty","search","slice","offset","limit","audio","select","description","length","hasPrevious","hasNext","disabled","decrementPage","incrementPage","isActive","cache","console","debug","$emit","selectable","clear","_m","audioFileUrl","filters","formatDate","date","format","moment","utc","fromNow","withoutSuffix","formatDuration","duration","unit","withSuffix","currentLocale","locale","result","humanize","formatDurationLocalized","audioFile","AudioLibrarySearchField","AudioLibrarySelection","resource_setOrCreateValueModeSpecific","resourceId","filter","isRecorderSelectorVisible","handleRecorderSelectionChanged","callConfig","isModalVisible","handleModalClosed","handleModalCancelled","recorder","_q","selectedRecorder","setSelectedRecorder","phone","draft","selectNewRecorder","$set","BModal","Boolean","created","reset","isNew","PhoneRecordingRecorderSelector","$store","commit","key","recordingKey","dispatch","upload","progress","hasProgress","_t","Statuses","UPLOADING","UNINITIALIZED","SUCCESS","FAILURE","namespaced","state","uploadProgressByKey","errorMessageByKey","uploadsById","uploadIdsByKey","mutations","setErrorMessage","errorMessage","Vue","setUploadProgress","uploadProgress","setUploadStatusFor","fileWithRefs","status","cancel","lodash","pick","uniqueIdentifier","actions","uploadFile","uploadUrl","formDataFields","onSuccess","onError","Error","formData","FormData","forEach","config","onUploadProgress","progressEvent","Math","floor","loaded","total","axios","post","then","response","catch","error","uploadFiles","_","parseInt","JSON","parse","status_description","uploadKey","isFailure","multimediaUpload","builderVuexNamespace","findResourceVariantOverModesOn","SupportedMode","isVisible","audio_file_id","filename","audio_uuid","created_at","duration_seconds","extension","split","uploadedAudio","original_extension","IVR","blur","pushAudioIntoLibrary","ValidationException","Permissions","Routes","Action","Getter","AudioLibrarySelector","ResourceVariantTextEditor","UploadMonitor","PhoneRecorder","resourceVariant","toString","deselect","invisible","characterCounter","count","pages","hasUnicode","trans","modifiers","staticStyle","contentExpressionAST","location","start","line","column","isEditable","String","enableAutogenButton","ast","SyntaxError","hasMembers","doesContentContainExpression","doesContentContainExpressionError","ceil","filterName","block_setName","match"],"mappings":"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","file":"flow-builder.umd.min.0.js","sourcesContent":["// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".block-text-content-editor-for-lang-and-type{margin-bottom:.5em}.block-text-content-editor-for-lang-and-type .content-editor{position:relative}.block-text-content-editor-for-lang-and-type .content-editor textarea{height:56px}.block-text-content-editor-for-lang-and-type .content-editor input[type=text]:not(:focus)+button,.block-text-content-editor-for-lang-and-type .content-editor textarea:not(:focus)+button{opacity:1}.block-text-content-editor-for-lang-and-type .content-editor input[type=text]+button,.block-text-content-editor-for-lang-and-type .content-editor textarea+button{position:absolute;bottom:7px;right:10px;transition:opacity .2s ease-in-out;opacity:0}.block-text-content-editor-for-lang-and-type .content-editor-selected input[type=text],.block-text-content-editor-for-lang-and-type .content-editor-selected textarea{background-color:#f8f8f8}.block-text-content-editor-for-lang-and-type .content-toolbar{margin-top:1px}.invisible{opacity:0}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PhoneRecordingRecorderSelector.vue?vue&type=style&index=0&id=6630b4be&lang=scss&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"e5ad3886\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"starting-block-button\"},[(_vm.isEditable)?[_c('h4',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.options')))]),_c('div',{staticClass:\"form-group\"},[_c('button',{staticClass:\"btn btn-secondary btn-sm\",attrs:{\"type\":\"button\",\"disabled\":_vm.isStartBlock},on:{\"click\":function($event){return _vm.setStartBlock($event)}}},[(_vm.isStartBlock)?[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.currently-set-as-starting-block'))+\" \")]:[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.set-as-starting-block'))+\" \")]],2)])]:_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop } from 'vue-property-decorator'\nimport { IBlock, IFlow } from '@floip/flow-runner'\nimport Lang from '@/lib/filters/lang'\nimport { namespace } from 'vuex-class'\nimport { mixins } from \"vue-class-component\";\n\nconst flowVuexNamespace = namespace('flow')\n\n@Component({})\nclass FirstBlockEditorButton extends mixins(Lang) {\n    @Prop({ default: true }) readonly isEditable!: boolean\n\n    @Prop()readonly blockId!: string\n\n    @Prop()readonly flow!: IFlow\n\n    get isStartBlock() {\n      return this.blockId === this.flow.first_block_id\n    }\n\n    setStartBlock(event: any) {\n      const { flow: { uuid: flowId }, blockId } = this\n      this.flow_setFirstBlockId({ flowId, blockId })\n    }\n\n    @flowVuexNamespace.Mutation flow_setFirstBlockId!: ({ flowId, blockId }: {flowId: IFlow['uuid']; blockId: IBlock['uuid']}) => void\n  }\nexport default FirstBlockEditorButton\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FirstBlockEditorButton.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FirstBlockEditorButton.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./FirstBlockEditorButton.vue?vue&type=template&id=4d00be79&\"\nimport script from \"./FirstBlockEditorButton.vue?vue&type=script&lang=ts&\"\nexport * from \"./FirstBlockEditorButton.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"block-semantic-label\"},[_c('text-editor',{attrs:{\"label\":_vm._f(\"trans\")('flow-builder.block-semantic-label'),\"placeholder\":_vm._f(\"trans\")('flow-builder.enter-block-semantic-label')},model:{value:(_vm.semanticLabel),callback:function ($$v) {_vm.semanticLabel=$$v},expression:\"semanticLabel\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"block-semantic-label\">\n    <text-editor v-model=\"semanticLabel\"\n        :label=\"'flow-builder.block-semantic-label' | trans\"\n        :placeholder=\"'flow-builder.enter-block-semantic-label' | trans\"/>\n  </div>\n</template>\n\n<script>\nimport { mapMutations } from 'vuex'\nimport TextEditor from '@/components/common/TextEditor'\nimport { lang } from '@/lib/filters/lang'\n\nexport default {\n  components: {\n    TextEditor,\n  },\n  props: {\n    block: {\n      type: Object,\n      required: true,\n    },\n  },\n  mixins: [lang],\n  computed: {\n    semanticLabel: {\n      get() {\n        return this.block.semantic_label || ''\n      },\n      set(value) {\n        this.block_setSemanticLabel({ blockId: this.block.uuid, value })\n      },\n    },\n  },\n  methods: {\n    ...mapMutations('flow', ['block_setSemanticLabel']),\n  },\n}\n\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SemanticLabelEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SemanticLabelEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SemanticLabelEditor.vue?vue&type=template&id=bf43c964&\"\nimport script from \"./SemanticLabelEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./SemanticLabelEditor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"block-label\"},[_c('text-editor',{attrs:{\"label\":_vm._f(\"trans\")('flow-builder.block-label'),\"placeholder\":_vm._f(\"trans\")('flow-builder.enter-block-label')},model:{value:(_vm.label),callback:function ($$v) {_vm.label=$$v},expression:\"label\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\nimport TextEditor from '@/components/common/TextEditor.vue'\nimport Lang from '@/lib/filters/lang'\nimport { Component, Prop, Vue } from 'vue-property-decorator'\nimport { IBlock } from '@floip/flow-runner'\nimport { namespace } from 'vuex-class'\nimport { mixins } from \"vue-class-component\";\n\nconst flowVuexNamespace = namespace('flow')\n\n@Component({\n  components: {\n    TextEditor,\n  },\n})\nexport default class LabelEditor extends mixins(Lang) {\n  @Prop() block!: IBlock\n\n  get label(): IBlock['label'] {\n    return this.block.label\n  }\n\n  set label(value: IBlock['label']) {\n    this.block_setLabel({ blockId: this.block.uuid, value })\n  }\n\n  @flowVuexNamespace.Mutation block_setLabel!: ({ blockId, value }: { blockId: IBlock['uuid'], value: IBlock['label'] }) => void\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LabelEditor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LabelEditor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./LabelEditor.vue?vue&type=template&id=7a9fd554&\"\nimport script from \"./LabelEditor.vue?vue&type=script&lang=ts&\"\nexport * from \"./LabelEditor.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioLibrarySearchField.vue?vue&type=style&index=0&id=50208a5c&lang=scss&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"f3f99278\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"resource-editor\"},[(_vm.label)?_c('hr'):_vm._e(),(_vm.label)?_c('h4',[_vm._v(_vm._s(_vm.label))]):_vm._e(),_vm._l((_vm.flow.languages),function(ref){\nvar languageId = ref.id;\nvar language = ref.label;\nreturn [_c('div',{staticClass:\"block-content-editor-lang\"},[_c('h5',{staticClass:\"badge badge-info\"},[_vm._v(_vm._s(_vm._f(\"trans\")(language || 'flow-builder.unknown-language')))])]),_vm._l((_vm.flow.supported_modes),function(mode){return [_c('h6',[_vm._v(_vm._s(_vm._f(\"trans\")((\"flow-builder.\" + (mode.toLowerCase()) + \"-content\"))))]),_vm._l((_vm.discoverContentTypesFor(mode)),function(contentType){return [(contentType === _vm.SupportedContentType.TEXT)?_c('resource-variant-text-editor',{attrs:{\"resource-id\":_vm.resource.uuid,\"resource-variant\":_vm.findOrGenerateStubbedVariantOn(\n                                              _vm.resource,\n                                              {language_id: languageId, content_type: contentType, modes: [mode]}),\"mode\":mode,\"enable-autogen-button\":true || _vm.enableAutogenButton}}):_vm._e(),(contentType === _vm.SupportedContentType.AUDIO)?_c('div',[(!_vm.findAudioResourceVariantFor(_vm.resource, {language_id: languageId, content_type: contentType, modes: [mode]}))?[_c('upload-monitor',{attrs:{\"uploadKey\":((_vm.block.uuid) + \":\" + languageId)}}),_c('ul',{staticClass:\"nav nav-tabs\"},[_c('li',{staticClass:\"nav-item\"},[_c('a',{staticClass:\"nav-link px-2 py-1 active\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();}}},[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.library')))])]),(_vm.can(['edit-content', 'send-call-to-records'], true) && _vm.isFeatureAudioUploadEnabled)?_c('li',{staticClass:\"nav-item\"},[_c('a',{staticClass:\"nav-link px-2 py-1\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.triggerRecordViaPhoneFor(languageId)}}},[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.phone-recording')))])]):_vm._e(),(_vm.isEditable)?_c('li',{staticClass:\"nav-item\"},[(_vm.isFeatureAudioUploadEnabled)?_c('a',{directives:[{name:\"flow-uploader\",rawName:\"v-flow-uploader\",value:({\n                    target: _vm.route('trees.resumeableAudioUpload'),\n                    token: (\"\" + (_vm.block.uuid) + languageId),\n                    accept: 'audio/*'}),expression:\"{\\n                    target: route('trees.resumeableAudioUpload'),\\n                    token: `${block.uuid}${languageId}`,\\n                    accept: 'audio/*'}\"}],staticClass:\"nav-link px-2 py-1\",attrs:{\"href\":\"#\"},on:{\"filesSubmitted\":function($event){return _vm.handleFilesSubmittedFor(((_vm.block.uuid) + \":\" + languageId), $event)},\"fileSuccess\":function($event){return _vm.handleFileSuccessFor(((_vm.block.uuid) + \":\" + languageId), languageId, $event)}}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.upload'))+\" \")]):_vm._e()]):_vm._e()])]:_vm._e(),_c('audio-library-selector',{attrs:{\"audioFiles\":_vm.availableAudio,\"langId\":languageId,\"resourceId\":_vm.resource.uuid,\"selectedAudioFile\":_vm.findOrGenerateStubbedVariantOn(\n                 _vm.resource,\n                 {language_id: languageId, content_type: contentType, modes: [mode]}).value}}),(_vm.can(['edit-content', 'send-call-to-records'], true) && !_vm.findOrGenerateStubbedVariantOn(_vm.resource,{language_id: languageId, content_type: contentType, modes: [mode]}).value)?_c('phone-recorder',{attrs:{\"recordingKey\":((_vm.block.uuid) + \":\" + languageId)}}):_vm._e()],2):_vm._e()]})]})]})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Vue from 'vue'\nimport Flow from '@flowjs/flow.js'\nimport lodash from 'lodash'\nimport Component from 'vue-class-component'\n\nconst dispatch = (el: any, name: string, data: any) => {\n  el.dispatchEvent(lodash.extend(new Event(name, {\n    bubbles: true,\n    cancelable: true,\n  }), { data }))\n}\n\n@Component({\n  directives: {\n    'flow-uploader': {\n      /**\n       * This binding provides a bridge between Flow and vuejs such that we can continue using our resumable backend\n       */\n      bind(el, binding) {\n        const {\n          accept,\n          target,\n          token: upload_token,\n        } = binding.value\n        const uploader = new Flow({\n          target,\n          singleFile: true,\n          chunkSize: 1024 * 512, // kbytes, chunked?  ¯\\_(ツ)_/¯\n          query: { upload_token },\n        })\n\n        if (!uploader.support) {\n          // Your browser doesn't support HTML5 uploads; please try Firefox or Chrome.\n          return\n        }\n\n        lodash.extend(el.style, { overflow: 'hidden' })\n        uploader.assignBrowse(el)\n\n        lodash.chain(el.children)\n          .find({\n            tagName: 'INPUT',\n            type: 'file',\n          } as any)\n          .assign({ accept })\n          .value()\n\n        // todo: migrate to proxied catch-all handler (voto5 legacy todo)\n        // uploader.on('catchAll', (name, file/*or files*/, e) => console.debug(name))\n\n        // todo: when do we call upload on a multiselect-upload and file-added triggered multiple times? (voto5 legacy todo)\n        // uploader.on('fileAdded', (file, e) => dispatch(el, 'filesSubmitted', {file, uploader})) // uploader.upload()\n        uploader.on('filesSubmitted', (files: any, e: any) => dispatch(el, 'filesSubmitted', {\n          files,\n          uploader,\n        })) // uploader.upload()\n        uploader.on('fileProgress', (file: any, e: any) => dispatch(el, 'fileProgress', {\n          file,\n          uploader,\n        }))\n        uploader.on('fileSuccess', (file: any, json: any) => dispatch(el, 'fileSuccess', {\n          file,\n          uploader,\n          json,\n        })) // uploader.cancel()\n        uploader.on('error', (message: string, file: any) => dispatch(el, 'fileSuccess', {\n          file,\n          uploader,\n          message,\n        })) // uploader.cancel()\n      },\n\n      unbind(el, binding) {\n      },\n    },\n  },\n})\nexport default class FlowUploader extends Vue {\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"audio-library-selector\"},[(_vm.selectedAudioFile)?_c('audio-library-selection',{attrs:{\"audioFile\":_vm.selectedAudioFile,\"langId\":_vm.langId},on:{\"clear\":_vm.clearSelection}}):[_c('audio-library-search-field',{attrs:{\"langId\":_vm.langId,\"audioFiles\":_vm.audioFiles},on:{\"select\":_vm.selectAudioFile}})]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"audio-library-search-field dropdown\"},[_c('div',{staticClass:\"input-group\"},[_c('span',{staticClass:\"input-group-prepend\"},[_c('button',{staticClass:\"btn btn-outline-secondary dropdown-toggle\",class:{active: _vm.isEntireLibraryModeEnabled},on:{\"click\":function($event){$event.preventDefault();return _vm.toggleAudioLibrary($event)}}},[_c('i',{staticClass:\"glyphicon glyphicon-search\"})])]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.rawQuery),expression:\"rawQuery\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":_vm._f(\"trans\")('flow-builder.search-audio-library'),\"disabled\":_vm.isEntireLibraryModeEnabled},domProps:{\"value\":(_vm.rawQuery)},on:{\"focus\":_vm.activate,\"blur\":_vm.deactivate,\"input\":[function($event){if($event.target.composing){ return; }_vm.rawQuery=$event.target.value},_vm.resetPagination]}})]),(_vm.query || _vm.isAudioLibraryEmpty || _vm.isEntireLibraryModeEnabled)?_c('div',{staticClass:\"dropdown-menu\"},[(_vm.isEntireLibraryModeEnabled)?[_c('a',{staticClass:\"disabled dropdown-item\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();}}},[_c('button',{staticClass:\"close active\",on:{\"click\":_vm.toggleAudioLibrary}},[_vm._v(\"x\")]),_c('i',{staticClass:\"glyphicon glyphicon-info-sign\"}),_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.showing-entire-audio-library'))+\"… \")]),_c('div',{staticClass:\"dropdown-divider\",attrs:{\"role\":\"separator\"}})]:_vm._e(),(!_vm.isAudioLibraryEmpty)?[_vm._l((_vm.search(_vm.query).slice(_vm.offset * _vm.limit, (_vm.offset + 1) * _vm.limit)),function(audio){return _c('a',{staticClass:\"dropdown-item\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.select(audio)}}},[_vm._v(\" \"+_vm._s(audio.description)+\" \")])}),(_vm.query.length >= 3 && !_vm.search(_vm.query).length)?_c('a',{staticClass:\"disabled dropdown-item\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();}}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.no-audio-files-found-for-X'))+\" \\\"\"),_c('em',[_vm._v(_vm._s(_vm.query))]),_vm._v(\"\\\". \")]):_vm._e(),(_vm.query && _vm.query.length < 3)?_c('a',{staticClass:\"disabled dropdown-item\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();}}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.enter-at-least-three-chars'))+\" \")]):_vm._e(),(_vm.hasPrevious || _vm.hasNext)?[_c('div',{staticClass:\"dropdown-divider\",attrs:{\"role\":\"separator\"}}),_c('div',{staticClass:\"pagers dropdown-item\"},[_c('a',{staticClass:\"col-md-6\",class:{disabled: !_vm.hasPrevious},attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.decrementPage($event)}}},[_c('i',{staticClass:\"glyphicon glyphicon-chevron-left\"}),_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.previous'))+\" \")]),_c('a',{staticClass:\"col-md-6 text-right\",class:{disabled: !_vm.hasNext},attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.incrementPage($event)}}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.next'))+\" \"),_c('i',{staticClass:\"glyphicon glyphicon-chevron-right\"})])])]:_vm._e()]:_vm._e(),(_vm.isAudioLibraryEmpty)?_c('a',{staticClass:\"disabled dropdown-item\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();}}},[_c('i',{staticClass:\"glyphicon glyphicon-warning-sign\"}),_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.audio-lib-empty-for-this-org'))+\" \")]):_vm._e()],2):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"audio-library-search-field dropdown\">\n    <div class=\"input-group\">\n      <span class=\"input-group-prepend\">\n        <button :class=\"{active: isEntireLibraryModeEnabled}\"\n                class=\"btn btn-outline-secondary dropdown-toggle\"\n                @click.prevent=\"toggleAudioLibrary\">\n          <i class=\"glyphicon glyphicon-search\"></i>\n        </button>\n      </span>\n\n      <input v-model=\"rawQuery\"\n             @focus=\"activate\"\n             @blur=\"deactivate\"\n             @input=\"resetPagination\"\n             type=\"text\"\n             :placeholder=\"'flow-builder.search-audio-library' | trans\"\n             :disabled=\"isEntireLibraryModeEnabled\"\n             class=\"form-control\">\n    </div>\n\n    <div v-if=\"query || isAudioLibraryEmpty || isEntireLibraryModeEnabled\" class=\"dropdown-menu\">\n      <template v-if=\"isEntireLibraryModeEnabled\">\n        <a @click.prevent=\"\" href=\"#\" class=\"disabled dropdown-item\">\n          <button @click=\"toggleAudioLibrary\" class=\"close active\">x</button>\n\n          <i class=\"glyphicon glyphicon-info-sign\"></i>\n          {{'flow-builder.showing-entire-audio-library'|trans}}&hellip;\n        </a>\n        <div role=\"separator\" class=\"dropdown-divider\"></div>\n      </template>\n\n      <template v-if=\"!isAudioLibraryEmpty\">\n        <a class=\"dropdown-item\"\n           v-for=\"audio in search(query).slice(offset * limit, (offset + 1) * limit)\"\n           @click.prevent=\"select(audio)\" href=\"#\">\n          {{audio.description}}\n        </a>\n        <a v-if=\"query.length >= 3 && !search(query).length\" class=\"disabled dropdown-item\" @click.prevent=\"\" href=\"#\">\n          {{'flow-builder.no-audio-files-found-for-X' | trans}} \"<em>{{query}}</em>\".\n        </a>\n        <a v-if=\"query && query.length < 3\" class=\"disabled dropdown-item\" @click.prevent=\"\" href=\"#\">\n          {{'flow-builder.enter-at-least-three-chars' | trans}}\n        </a>\n\n        <template v-if=\"hasPrevious || hasNext\">\n          <div role=\"separator\" class=\"dropdown-divider\"></div>\n\n          <div class=\"pagers dropdown-item\">\n            <a @click.prevent=\"decrementPage\" href=\"#\" :class=\"{disabled: !hasPrevious}\" class=\"col-md-6\">\n              <i class=\"glyphicon glyphicon-chevron-left\"></i>\n              {{'flow-builder.previous' | trans}}\n            </a>\n\n            <a @click.prevent=\"incrementPage\" href=\"#\" :class=\"{disabled: !hasNext}\" class=\"col-md-6 text-right\">\n              {{'flow-builder.next' | trans}}\n              <i class=\"glyphicon glyphicon-chevron-right\"></i>\n            </a>\n          </div>\n        </template>\n      </template>\n\n      <a v-if=\"isAudioLibraryEmpty\" class=\"disabled dropdown-item\" @click.prevent=\"\" href=\"#\">\n        <i class=\"glyphicon glyphicon-warning-sign\"></i>\n        {{'flow-builder.audio-lib-empty-for-this-org' | trans}}\n      </a>\n    </div>\n  </div>\n</template>\n\n<script>\nimport fuse from 'fuse.js'\nimport lodash from 'lodash'\nimport VueFocus from 'vue-focus'\nimport { lang } from '@/lib/filters/lang'\n\nexport default {\n  props: ['langId', 'audioFiles'],\n  mixins: [VueFocus.mixin, lang],\n\n  data() {\n    return {\n      isActive: false,\n\n      // querying\n      rawQuery: '',\n      cache: {},\n      isEntireLibraryModeEnabled: false,\n\n      // pagination\n      offset: 0,\n      limit: 10,\n    }\n  },\n\n  computed: {\n    query() {\n      return lodash.trim(this.rawQuery)\n    },\n\n    isAudioLibraryEmpty() {\n      return this.isActive && !this.audioFiles.length\n    },\n\n    hasNext() {\n      return (this.search(this.query).length / (this.offset + 1)) > this.limit\n    },\n\n    hasPrevious() {\n      return this.offset > 0\n    },\n  },\n\n  methods: {\n    search(query) {\n\t\t\t  if (this.isEntireLibraryModeEnabled) {\n\t\t\t    return this.audioFiles\n      }\n\n      if (query.length < 3) {\n        return []\n      }\n\n      console.debug('flow-builder.ResourceViewer.AudioLibrarySearchField', 'searching', query)\n\n      if (query in this.cache) {\n        console.debug('flow-builder.ResourceViewer.AudioLibrarySearchField', 'cache hit', query)\n        return this.cache[query]\n      }\n\n      console.debug('flow-builder.ResourceViewer.AudioLibrarySearchField', 'cache miss', query)\n\n      const keys = ['filename', 'description']\n      return this.cache[query] = new fuse(this.audioFiles, { keys }).search(query)\n    },\n\n    // todo: push pagination into isolated component\n    incrementPage() {\n      this.hasNext && (this.offset += 1)\n    },\n\n    decrementPage() {\n      this.hasPrevious && (this.offset -= 1)\n    },\n\n    resetPagination() {\n\t\t\t  this.offset = 0\n    },\n\n    toggleAudioLibrary() {\n      this.isEntireLibraryModeEnabled = !this.isEntireLibraryModeEnabled\n      this.resetPagination()\n    },\n\n    select(audio) {\n      this.$emit('select', { value: audio, langId: this.langId })\n    },\n\n    activate() {\n      this.isActive = true\n    },\n\n    deactivate() {\n      this.isActive = false\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n  .audio-library-search-field {\n    &.dropdown {\n      .dropdown-menu {\n        display: block;\n        min-width: 100%;\n\n        > li.pagers > a {\n          clear: none;\n          margin-top: 0;\n          margin-bottom: 0;\n          padding-top: 0.5em;\n          padding-bottom: 0.5em;\n\n          &.disabled {\n            text-decoration: none;\n            background-color: transparent;\n            background-image: none;\n            filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);\n            cursor: not-allowed;\n            color: #777777;\n          }\n        }\n      }\n    }\n  }\n\n  .close {\n    pointer-events: auto;\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioLibrarySearchField.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioLibrarySearchField.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AudioLibrarySearchField.vue?vue&type=template&id=50208a5c&scoped=true&\"\nimport script from \"./AudioLibrarySearchField.vue?vue&type=script&lang=js&\"\nexport * from \"./AudioLibrarySearchField.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AudioLibrarySearchField.vue?vue&type=style&index=0&id=50208a5c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"50208a5c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"well well-sm audio-library-selection\",class:{\n           'tree-audio-control-text-container-selectable': _vm.selectable,\n           'tree-audio-control-text-container-selected': !_vm.selectable},attrs:{\"data-audio-file-container-language\":_vm.langId}},[_c('button',{staticClass:\"audio-library-selection-clear-selection btn-ghost pull-right\",on:{\"click\":function($event){$event.preventDefault();return _vm.clear($event)}}},[_c('i',{staticClass:\"glyphicon glyphicon-remove\"})]),_c('div',{staticClass:\"btn-group audio-library-selection-download-dropdown\"},[_vm._m(0),_c('ul',{staticClass:\"dropdown-menu dropdown-menu-right\"},[_c('li',[_c('a',{staticClass:\"tree-block-audio-files-download-original\",attrs:{\"href\":_vm.audioFileUrl,\"target\":\"_blank\"}},[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.original-file')))])])])]),_c('p',{staticClass:\"audio-file-description\",attrs:{\"title\":_vm.audioFileUrl}},[_vm._v(\" \"+_vm._s(_vm.audioFileUrl)+\" \")]),_c('div',{staticClass:\"btn-toolbar\"},[(_vm.selectable)?_c('button',{staticClass:\"btn btn-secondary btn-xs\",on:{\"click\":function($event){$event.preventDefault();return _vm.select($event)}}},[_c('i',{staticClass:\"glyphicon glyphicon-ok\"})]):_vm._e()])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"btn btn-ghost dropdown-toggle\",attrs:{\"type\":\"button\",\"data-toggle\":\"dropdown\"}},[_c('span',{staticClass:\"glyphicon glyphicon-download-alt\",attrs:{\"aria-hidden\":\"true\"}}),_c('span',{staticClass:\"caret\"})])}]\n\nexport { render, staticRenderFns }","import moment from 'moment'\n\nexport default {\n  filters: {\n    formatDate(date, format = 'llll') {\n      if (!date) {\n        return ''\n      }\n      return moment.utc(date).format(format)\n    },\n\n    fromNow(date, withoutSuffix) {\n      return moment.utc(date).fromNow(withoutSuffix)\n    },\n\n    formatDuration(duration, unit = 'seconds', withSuffix) {\n      const currentLocale = moment.locale()\n      moment.locale('en') // this function only gets used in english.\n      const result = moment.duration(duration, unit).humanize(withSuffix)\n      moment.locale(currentLocale)\n      return result\n    },\n\n    formatDurationLocalized(duration, locale, unit = 'seconds', withSuffix) {\n      const currentLocale = moment.locale()\n      moment.locale(locale)\n      const result = moment.duration(duration, unit).humanize(withSuffix)\n      moment.locale(currentLocale)\n      return result\n    },\n  },\n}\n","<template>\n  <div  class=\"well well-sm audio-library-selection\"\n       :data-audio-file-container-language=\"langId\"\n       :class=\"{\n           'tree-audio-control-text-container-selectable': selectable,\n           'tree-audio-control-text-container-selected': !selectable}\">\n\n    <button @click.prevent=\"clear\" class=\"audio-library-selection-clear-selection btn-ghost pull-right\">\n      <i class=\"glyphicon glyphicon-remove\"></i>\n    </button>\n\n    <div class=\"btn-group audio-library-selection-download-dropdown\">\n      <button type=\"button\" class=\"btn btn-ghost dropdown-toggle\" data-toggle=\"dropdown\">\n        <span class=\"glyphicon glyphicon-download-alt\" aria-hidden=\"true\"></span>\n        <span class=\"caret\"></span>\n      </button>\n\n      <ul class=\"dropdown-menu dropdown-menu-right\">\n        <li><a :href=\"audioFileUrl\" target=\"_blank\" class=\"tree-block-audio-files-download-original\">{{'flow-builder.original-file'|trans}}</a></li>\n\n        <!-- <li><a :href=\"`/audiofiles/download/${audioFile.filename}/ogg`\" target=\"_blank\" class=\"tree-block-audio-files-download-ogg\">{{'flow-builder.download-X-format'|trans({kind: '.ogg'})}}</a></li>\n        <li><a :href=\"`/audiofiles/download/${audioFile.filename}/ul`\" target=\"_blank\" class=\"tree-block-audio-files-download-ul\">{{'flow-builder.download-X-format'|trans({kind: '.ul'})}}</a></li> -->\n      </ul>\n    </div>\n\n    <p class=\"audio-file-description\" :title=\"audioFileUrl\">\n      {{audioFileUrl}}\n    </p>\n\n    <div class=\"btn-toolbar\">\n<!--      <vue-audio :file=\"audioFileUrl\"></vue-audio>-->\n\n      <button v-if=\"selectable\"\n              @click.prevent=\"select\"\n              class=\"btn btn-secondary btn-xs\">\n        <i class=\"glyphicon glyphicon-ok\"></i>\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { lang } from '@/lib/filters/lang'\nimport momentFilters from '@/lib/filters/moment'\n\nexport default {\n  props: ['audioFile', 'selected', 'selectable', 'langId'],\n\n  mixins: [lang, momentFilters],\n\n  computed: {\n    audioFileUrl() {\n      return this.audioFile\n    },\n  },\n\n  methods: {\n    select() {\n      this.$emit('select')\n    },\n\n    clear() {\n      this.$emit('clear')\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\">\n  .btn-ghost {\n    background: transparent;\n    border: none;\n  }\n\n  .audio-library-selection {\n    position: relative;\n    background-color: transparent !important;\n    background-image: none !important;\n    border-color: #cccccc !important;\n\n    .audio-library-selection-download-dropdown {\n      position: absolute;\n      right: 1.6em;\n      top: 50%;\n      margin-top: -8px;\n      color: #888888;\n\n      svg {\n        vertical-align: middle;\n      }\n    }\n\n    .audio-library-selection-clear-selection {\n      margin-right: -7px;\n    }\n\n    .audio-file-description {\n      text-overflow: ellipsis;\n      overflow: hidden;\n      margin-bottom: 3px;\n    }\n\n    .vue-sound-wrapper {\n      margin-bottom: 8px;\n      margin-left: 1em;\n\n      .vue-sound__player {\n        .icon-play3, .icon-pause2 {\n          font-size:130%;\n          color: #888888;\n        }\n\n        .icon-play3:hover, .icon-pause2:hover {\n          color: black;\n          text-decoration: none;\n        }\n\n        .icon-stop2, .icon-download, .icon-volume-high, .volume-toggle {\n          display: none !important;\n        }\n\n        .vue-sound__playback-time-current, .vue-sound__playback-time-total, .vue-sound__playback-time-separator {\n          font-size: 80%;\n          color: #888888;\n        }\n\n        .vue-sound__playback-time-wrapper {\n          text-align: center;\n          width: 71% !important;\n        }\n      }\n    }\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioLibrarySelection.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioLibrarySelection.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AudioLibrarySelection.vue?vue&type=template&id=9e9421ca&\"\nimport script from \"./AudioLibrarySelection.vue?vue&type=script&lang=js&\"\nexport * from \"./AudioLibrarySelection.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AudioLibrarySelection.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"audio-library-selector\">\n    <audio-library-selection v-if=\"selectedAudioFile\"\n                             :audioFile=\"selectedAudioFile\"\n                             :langId=\"langId\"\n                             @clear=\"clearSelection\" />\n\n    <template v-else>\n      <!-- todo: refactor audio-library-selection to use v-model's @input + :value -->\n      <!-- <audio-library-selection\n          v-for=\"audioFile in alternateSelections\"\n          :key=\"audioFile && audioFile.id\"\n          :audioFile=\"audioFile\"\n          :selectable=\"selectable\"\n          @select=\"selectAudioFile({value: audioFile, langId})\" /> -->\n\n      <!-- todo: refactor audio-library-search-field to use v-model's @input + :value -->\n      <audio-library-search-field\n          :langId=\"langId\"\n          :audioFiles=\"audioFiles\"\n          @select=\"selectAudioFile\" />\n    </template>\n  </div>\n</template>\n\n<script>\nimport lodash from 'lodash'\nimport { mapActions } from 'vuex'\nimport {\n  SupportedContentType,\n  SupportedMode,\n} from '@floip/flow-runner'\nimport AudioLibrarySearchField from './AudioLibrarySearchField'\nimport AudioLibrarySelection from './AudioLibrarySelection'\n\nexport default {\n  props: [\n    'alternateSelections',\n    'selectedAudioFile',\n    'langId',\n    'audioFiles',\n    'isPlaying',\n    'audioPlayerUrl',\n    'resourceId',\n  ],\n\n  components: {\n    AudioLibrarySearchField,\n    AudioLibrarySelection,\n  },\n\n  computed: {\n    selectable() {\n      return !lodash.isEmpty(this.alternateSelections)\n    },\n  },\n\n  methods: {\n    ...mapActions('flow', ['resource_setOrCreateValueModeSpecific']),\n    clearSelection() {\n      this.resource_setOrCreateValueModeSpecific({\n        resourceId: this.resourceId,\n        filter: { language_id: this.langId, content_type: SupportedContentType.AUDIO, modes: [SupportedMode.IVR] },\n        value: '',\n      })\n    },\n    selectAudioFile({ value, langId }) {\n      this.resource_setOrCreateValueModeSpecific({\n        resourceId: this.resourceId,\n        filter: { language_id: langId, content_type: SupportedContentType.AUDIO, modes: [SupportedMode.IVR] },\n        value: value.description,\n      })\n    },\n  },\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioLibrarySelector.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioLibrarySelector.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AudioLibrarySelector.vue?vue&type=template&id=aed8bb4c&\"\nimport script from \"./AudioLibrarySelector.vue?vue&type=script&lang=js&\"\nexport * from \"./AudioLibrarySelector.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.isFeatureCallToRecordEnabled)?_c('div',{staticClass:\"phone-recorder\"},[_c('phone-recording-recorder-selector',{attrs:{\"isModalVisible\":_vm.isRecorderSelectorVisible},on:{\"input\":_vm.handleRecorderSelectionChanged},model:{value:(_vm.callConfig),callback:function ($$v) {_vm.callConfig=$$v},expression:\"callConfig\"}})],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-modal',{staticClass:\"phone-recording-recorder-selector\",attrs:{\"size\":\"lg\",\"no-close-on-backdrop\":\"\",\"no-close-on-esc\":\"\",\"title\":_vm._f(\"trans\")('flow-builder.select-a-caller-from-the-list-below'),\"visible\":_vm.isModalVisible,\"ok-title\":_vm._f(\"trans\")('flow-builder.call-this-phone-number'),\"cancel-title\":_vm._f(\"trans\")('flow-builder.close')},on:{\"ok\":_vm.handleModalClosed,\"cancel\":_vm.handleModalCancelled,\"close\":_vm.handleModalCancelled}},[_c('div',{staticClass:\"call-to-record-modal-table-container\"},[_c('table',{staticClass:\"table table-striped\"},[_c('thead',[_c('tr',[_c('th',{staticClass:\"recorder-selector-field\"}),_c('th',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.name')))]),_c('th',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.phone-number')))])])]),_c('tbody',{attrs:{\"id\":\"call-to-record-modal-list\"}},_vm._l((_vm.recorders),function(recorder){return _c('tr',{staticClass:\"call-to-record-item\"},[_c('td',{staticClass:\"recorder-selector-field\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedRecorder),expression:\"selectedRecorder\"}],attrs:{\"type\":\"radio\",\"x-name\":\"calltorecord_caller_select\",\"id\":(\"call-to-record-caller-\" + (recorder.id))},domProps:{\"value\":recorder,\"checked\":_vm._q(_vm.selectedRecorder,recorder)},on:{\"change\":function($event){_vm.selectedRecorder=recorder}}})]),_c('td',[_c('label',{attrs:{\"for\":(\"call-to-record-caller-\" + (recorder.id))},on:{\"click\":function($event){return _vm.setSelectedRecorder(recorder)}}},[_vm._v(_vm._s(recorder.name))])]),_c('td',[_c('label',{attrs:{\"for\":(\"call-to-record-caller-\" + (recorder.id))},on:{\"click\":function($event){return _vm.setSelectedRecorder(recorder)}}},[_vm._v(_vm._s(recorder.phone))])])])}),0)]),_c('h4',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.add-a-description-to-this-recording')))]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.description),expression:\"description\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"rows\":\"2\",\"placeholder\":_vm._f(\"trans\")('flow-builder.optional-description')},domProps:{\"value\":(_vm.description)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.description=$event.target.value}}}),_c('h4',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.add-a-new-recorder')))]),_c('table',{staticClass:\"table\"},[_c('tbody',[_c('tr',[_c('td',{staticClass:\"recorder-selector-field\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedRecorder),expression:\"selectedRecorder\"}],attrs:{\"type\":\"radio\",\"name\":\"calltorecord_caller_select\",\"id\":\"new_recorder_radio\"},domProps:{\"value\":_vm.draft,\"checked\":_vm._q(_vm.selectedRecorder,_vm.draft)},on:{\"change\":function($event){_vm.selectedRecorder=_vm.draft}}})]),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.draft.name),expression:\"draft.name\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":_vm._f(\"trans\")('flow-builder.name')},domProps:{\"value\":(_vm.draft.name)},on:{\"click\":_vm.selectNewRecorder,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.draft, \"name\", $event.target.value)}}})]),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.draft.phone),expression:\"draft.phone\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":_vm._f(\"trans\")('flow-builder.phone-number')},domProps:{\"value\":(_vm.draft.phone)},on:{\"click\":_vm.selectNewRecorder,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.draft, \"phone\", $event.target.value)}}})])])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-modal\n      size=\"lg\"\n      class=\"phone-recording-recorder-selector\"\n      no-close-on-backdrop\n      no-close-on-esc\n      :title=\"'flow-builder.select-a-caller-from-the-list-below'|trans\"\n      :visible=\"isModalVisible\"\n      :ok-title=\"'flow-builder.call-this-phone-number'|trans\"\n      :cancel-title=\"'flow-builder.close'|trans\"\n      @ok=\"handleModalClosed\"\n      @cancel=\"handleModalCancelled\"\n      @close=\"handleModalCancelled\"\n  >\n    <div class=\"call-to-record-modal-table-container\">\n      <table class=\"table table-striped\">\n        <thead>\n        <tr>\n          <th class=\"recorder-selector-field\"></th>\n          <th>{{ 'flow-builder.name'|trans }}</th>\n          <th>{{ 'flow-builder.phone-number'|trans }}</th>\n        </tr>\n        </thead>\n        <tbody id=\"call-to-record-modal-list\">\n        <tr v-for=\"recorder in recorders\" class=\"call-to-record-item\">\n          <td class=\"recorder-selector-field\">\n            <input v-model=\"selectedRecorder\"\n                   type=\"radio\"\n                   x-name=\"calltorecord_caller_select\"\n                   :id=\"`call-to-record-caller-${recorder.id}`\"\n                   :value=\"recorder\">\n          </td>\n          <td><label :for=\"`call-to-record-caller-${recorder.id}`\" @click=\"setSelectedRecorder(recorder)\">{{ recorder.name }}</label></td>\n          <td><label :for=\"`call-to-record-caller-${recorder.id}`\" @click=\"setSelectedRecorder(recorder)\">{{ recorder.phone }}</label></td>\n        </tr>\n        </tbody>\n      </table>\n\n      <h4>{{ 'flow-builder.add-a-description-to-this-recording'|trans }}</h4>\n      <input v-model=\"description\"\n             type=\"text\"\n             class=\"form-control\"\n             rows=\"2\"\n             :placeholder=\"'flow-builder.optional-description'|trans\">\n\n      <h4>{{ 'flow-builder.add-a-new-recorder'|trans }}</h4>\n      <table class=\"table\">\n        <tbody>\n        <tr>\n          <td class=\"recorder-selector-field\">\n            <input v-model=\"selectedRecorder\"\n                   type=\"radio\"\n                   name=\"calltorecord_caller_select\"\n                   id=\"new_recorder_radio\"\n                   :value=\"draft\">\n          </td>\n          <td>\n            <input v-model=\"draft.name\"\n                   type=\"text\"\n                   :placeholder=\"'flow-builder.name'|trans\"\n                   @click=\"selectNewRecorder\"\n                   class=\"form-control\">\n          </td>\n          <td>\n            <input v-model=\"draft.phone\"\n                   type=\"text\"\n                   :placeholder=\"'flow-builder.phone-number'|trans\"\n                   @click=\"selectNewRecorder\"\n                   class=\"form-control\">\n          </td>\n        </tr>\n\n        </tbody>\n      </table>\n    </div>\n  </b-modal>\n</template>\n\n<script>\nimport { lang } from '@/lib/filters/lang'\nimport lodash from 'lodash'\nimport { mapState } from 'vuex'\nimport { BModal } from 'bootstrap-vue'\n\nexport default {\n  components: {\n    BModal,\n  },\n\n  props: {\n    isModalVisible: Boolean,\n  },\n\n  mixins: [lang],\n\n  data() {\n    return {\n      selectedRecorder: null,\n      description: null,\n      draft: null,\n    }\n  },\n\n  created() {\n    this.reset()\n  },\n\n  computed: {\n    ...mapState({\n      recorders: ({ audio: { recording: { recorders } } }) => recorders,\n    }),\n  },\n\n  methods: {\n    selectNewRecorder() {\n      this.draft.isNew = true\n      this.selectedRecorder = this.draft\n    },\n    setSelectedRecorder(recorder) {\n      this.selectedRecorder = recorder\n    },\n    reset() {\n      this.draft = {\n        name: null,\n        phone: null,\n        isNew: true,\n      }\n      this.description = null\n      this.selectedRecorder = null\n    },\n\n    handleModalClosed() {\n      const\n        { description } = this\n      const value = lodash.clone(this.selectedRecorder)\n\n      this.reset()\n      this.$emit('input', {\n        value,\n        recorder: value,\n        description,\n      })\n    },\n\n    handleModalCancelled() {\n      this.reset()\n\n      const\n        { description } = this\n      const value = lodash.clone(this.selectedRecorder)\n\n      this.$emit('input', {\n        value,\n        recorder: value,\n        description,\n      })\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.phone-recording-recorder-selector {\n  padding-top: 3em;\n\n  .modal-body {\n    h4, .h4 {\n      margin-top: 2em;\n    }\n  }\n\n  .table {\n    .recorder-selector-field {\n      width: 3em;\n      text-align: center;\n      vertical-align: middle;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PhoneRecordingRecorderSelector.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PhoneRecordingRecorderSelector.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PhoneRecordingRecorderSelector.vue?vue&type=template&id=6630b4be&scoped=true&\"\nimport script from \"./PhoneRecordingRecorderSelector.vue?vue&type=script&lang=js&\"\nexport * from \"./PhoneRecordingRecorderSelector.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PhoneRecordingRecorderSelector.vue?vue&type=style&index=0&id=6630b4be&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6630b4be\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div v-if=\"isFeatureCallToRecordEnabled\" class=\"phone-recorder\">\n    <phone-recording-recorder-selector\n        v-model=\"callConfig\"\n        @input=\"handleRecorderSelectionChanged\"\n        :isModalVisible=\"isRecorderSelectorVisible\"/>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapGetters } from 'vuex'\nimport PhoneRecordingRecorderSelector from './PhoneRecordingRecorderSelector'\n\nexport default {\n  components: {\n    PhoneRecordingRecorderSelector,\n  },\n\n  props: ['recordingKey'],\n\n  data() {\n    return {\n      // this is set by hooking into the v-model property of <phone-recording-recorder-selector v-model=\"callConfig\">\n      // which $emits a new value that results in setting this variable by reference.\n      callConfig: null,\n    }\n  },\n\n  computed: {\n    ...mapState({\n      // todo: deprecate (this + setAudioRecordingConfigVisibilityForSelectedBlock) in favor of modal + local state\n      isRecorderSelectorVisible: ({ audio: { recording: { isRecorderSelectorVisible } } }) => isRecorderSelectorVisible,\n    }),\n\n    ...mapGetters(['isFeatureCallToRecordEnabled']),\n  },\n\n  methods: {\n    handleRecorderSelectionChanged() {\n      this.$store.commit('setAudioRecordingConfigVisibilityForSelectedBlock', { isVisible: false })\n\n      if (!this.callConfig.recorder) {\n        return\n      }\n\n      const callConfig = {\n        key: this.recordingKey,\n        description: this.callConfig.description,\n        ...this.callConfig.recorder,\n      }\n\n      this.$store.dispatch('startAudioRecordingFor', callConfig)\n    },\n  },\n}\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PhoneRecorder.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PhoneRecorder.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PhoneRecorder.vue?vue&type=template&id=58e4d142&\"\nimport script from \"./PhoneRecorder.vue?vue&type=script&lang=js&\"\nexport * from \"./PhoneRecorder.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"upload-monitor\"},[(_vm.hasProgress)?_c('div',{staticClass:\"upload-monitor-progress\"},[_c('h6',[_vm._v(_vm._s(_vm._f(\"trans\")('trees.uploading'))+\"… \"+_vm._s(_vm.upload.file.name))]),_c('div',{staticClass:\"progress\"},[_c('b-progress',{staticClass:\"mb-3\",attrs:{\"value\":_vm.progress * 1,\"show-value\":\"\",\"animated\":\"\"}})],1)]):_vm._e(),(_vm.isFailure)?_c('p',{staticClass:\"text-danger small\"},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('trees.error-uploading-file-try-again'))+\" \"),(_vm.upload.message)?_c('span',{staticClass:\"details\"},[_vm._v(\"(\"+_vm._s(_vm.upload.message)+\")\")]):_vm._e()]):_vm._e(),(!_vm.hasProgress)?_vm._t(\"default\"):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import axios from 'axios'\nimport lodash from 'lodash'\nimport Vue from 'vue'\n\nexport const Statuses = {\n  UPLOADING: -1,\n  UNINITIALIZED: 0,\n  SUCCESS: 1,\n  FAILURE: 2,\n}\n\nexport const UploadStatusToStateMap = {\n  [Statuses.UPLOADING]: 'uploading',\n  [Statuses.UNINITIALIZED]: 'uninitialized',\n  [Statuses.SUCCESS]: 'success',\n  [Statuses.FAILURE]: 'failure',\n}\n\nexport default {\n  namespaced: true,\n\n  state: {\n    uploadProgressByKey: {},\n    errorMessageByKey: {},\n\n    uploadsById: {},\n    uploadIdsByKey: {},\n  },\n\n  mutations: {\n    setErrorMessage({ errorMessageByKey }, { key, errorMessage }) {\n      Vue.set(errorMessageByKey, key, errorMessage)\n    },\n\n    setUploadProgress({ uploadProgressByKey }, { key, uploadProgress }) {\n      Vue.set(uploadProgressByKey, key, uploadProgress)\n    },\n\n    setUploadStatusFor({ uploadsById, uploadIdsByKey }, {\n      file: fileWithRefs, key, status, progress, message, cancel,\n    }) {\n      const file = lodash.pick(fileWithRefs, ['averageSpeed', 'currentSpeed', 'error', 'name', 'paused', 'relativePath', 'size', 'uniqueIdentifier'])\n      Vue.set(uploadsById, file.uniqueIdentifier, {\n        key, status, progress, message, cancel, file,\n      })\n      Vue.set(uploadIdsByKey, key, file.uniqueIdentifier)\n    },\n  },\n\n  actions: {\n    uploadFile({ commit }, {\n      key,\n      uploadUrl,\n      formDataFields,\n      onSuccess,\n      onError,\n    }) {\n      if (!uploadUrl) {\n        commit('setUploadProgress', { key, uploadProgress: null })\n        onError(new Error(`url was ${uploadUrl}`))\n        return\n      }\n\n      const formData = new FormData()\n      lodash.forEach(formDataFields, (value, name) => {\n        formData.set(name, value)\n      })\n\n      const config = {\n        onUploadProgress: (progressEvent) => {\n          commit('setUploadProgress', {\n            key,\n            uploadProgress: Math.floor((progressEvent.loaded * 100) / progressEvent.total),\n          })\n        },\n      }\n\n      axios.post(uploadUrl, formData, config)\n        .then((response) => {\n          commit('setUploadProgress', { key, uploadProgress: null })\n          onSuccess(response)\n        })\n        .catch((error) => {\n          commit('setUploadProgress', { key, uploadProgress: null })\n          onError(error)\n        })\n    },\n\n    // todo: this is slightly different, because it implements chunked+resumable uploads; generify\n    // todo: upgrade backend to use more recent composer package that's compatible w/ npm flow.js\n    // https://github.com/flowjs/flow-php-server\n    uploadFiles({ commit, dispatch, state }, { key, files, uploader }) { // todo: handle multi-file-per-key\n      const cancel = (_) => uploader.cancel()\n\n      files.forEach((file) => commit('setUploadStatusFor', {\n        file, key, progress: 0, status: Statuses.UNINITIALIZED, message: null, cancel,\n      }))\n\n      uploader.on('fileProgress', (file, e) => {\n        // TODO: enable showAppMessageFor and use it as follow\n        // dispatch('showAppMessageFor', {message: `Upload in progress... ${_.parseInt(file.progress() * 100)}%`}, {root: true})\n        console.debug(`Upload in progress... ${_.parseInt(file.progress() * 100)}%`)\n        commit('setUploadStatusFor', {\n          file,\n          key,\n          progress: file.progress(),\n          status: Statuses.UPLOADING,\n          message: null,\n          cancel,\n        })\n      })\n\n      uploader.on('fileSuccess', (file, json) => {\n        // TODO: enable showAppMessageFor and use it as follow\n        // dispatch('showAppMessageFor', {message: 'Upload successful!', isComplete: true}, {root: true})\n        console.debug('Upload successful!')\n        commit('setUploadStatusFor', {\n          file,\n          key,\n          progress: 1,\n          status: Statuses.SUCCESS,\n          message: null,\n          cancel,\n        })\n        // uploader.cancel() // clear for next batch\n      })\n\n      uploader.on('error', (json, file) => {\n        const { status_description } = JSON.parse(json) || {}\n        // TODO: enable showAppMessageFor and use it as follow\n        // dispatch('showAppMessageFor', {message: status_description, isComplete: true}, {root: true})\n        console.debug(`Upload has error ${status_description}`)\n        commit('setUploadStatusFor', {\n          file,\n          key,\n          status: Statuses.FAILURE,\n          message: status_description,\n          cancel,\n        })\n        // uploader.cancel() // clear for retry\n      })\n\n      uploader.upload()\n      // TODO: enable showAppMessageFor and use it as follow\n      // dispatch('showAppMessageFor', {message: 'Upload in progress...'}, {root: true})\n      console.debug('Upload in progress...')\n    },\n  },\n}\n","<template>\n  <div class=\"upload-monitor\">\n    <div v-if=\"hasProgress\" class=\"upload-monitor-progress\">\n      <h6>{{ 'trees.uploading' | trans }}&hellip; {{ upload.file.name }}</h6>\n\n      <div class=\"progress\">\n        <b-progress :value=\"progress * 1\" show-value animated class=\"mb-3\"/>\n      </div>\n    </div>\n\n    <p v-if=\"isFailure\" class=\"text-danger small\">\n      {{ 'trees.error-uploading-file-try-again'|trans }}\n      <span v-if=\"upload.message\" class=\"details\">({{ upload.message }})</span>\n    </p>\n\n    <slot v-if=\"!hasProgress\"/>\n  </div>\n</template>\n\n<script>\nimport { lang } from '@/lib/filters/lang'\nimport lodash, { forEach } from 'lodash'\n\nimport { mapState } from 'vuex'\nimport { BProgress } from 'bootstrap-vue'\nimport multimediaUpload, { Statuses as UploadStatuses } from '@/store/trees/multimediaUpload'\n\nexport default {\n  props: ['uploadKey'],\n\n  mixins: [lang],\n\n  components: { BProgress },\n\n  computed: {\n    ...mapState('multimediaUpload', ['uploadsById', 'uploadIdsByKey']),\n\n    upload() {\n      return this.uploadsById[this.uploadIdsByKey[this.uploadKey]]\n    },\n\n    hasProgress() {\n      return this.upload\n          && this.upload.status !== UploadStatuses.SUCCESS\n          && this.upload.status !== UploadStatuses.FAILURE\n    },\n\n    isFailure() {\n      return this.upload && this.upload.status === UploadStatuses.FAILURE\n    },\n\n    progress() {\n      return lodash.get(this.upload, 'progress', 0) * 100\n    },\n  },\n\n  created() {\n    const { $store } = this\n    const modules = {\n      multimediaUpload,\n    }\n\n    forEach(modules, (v, k) => !$store.hasModule(k) && $store.registerModule(k, v))\n  },\n}\n</script>\n\n<style lang=\"scss\">\n.progress {\n  margin-bottom: 0.5em;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadMonitor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadMonitor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UploadMonitor.vue?vue&type=template&id=3101c22e&\"\nimport script from \"./UploadMonitor.vue?vue&type=script&lang=js&\"\nexport * from \"./UploadMonitor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UploadMonitor.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  Getter,\n  Mutation,\n  namespace,\n} from 'vuex-class'\nimport {\n  IBlock,\n  IFlow,\n  IResource,\n  SupportedContentType,\n  SupportedMode,\n  IResourceValue as IResourceDefinitionVariantOverModes,\n} from '@floip/flow-runner'\nimport Lang from '@/lib/filters/lang'\nimport Permissions from '@/lib/mixins/Permissions'\nimport Routes from '@/lib/mixins/Routes'\nimport FlowUploader from '@/lib/mixins/FlowUploader'\nimport { Component, Prop } from 'vue-property-decorator'\nimport {\n  discoverContentTypesFor,\n  findOrGenerateStubbedVariantOn,\n  findResourceVariantOverModesOn, IResourceDefinitionVariantOverModesFilter,\n} from '@/store/flow/resource'\nimport AudioLibrarySelector from '@/components/common/AudioLibrarySelector.vue'\nimport { ValidationException } from '@floip/flow-runner/src/domain/exceptions/ValidationException'\nimport PhoneRecorder from '@/components/interaction-designer/block-editors/PhoneRecorder.vue'\nimport UploadMonitor from '../block-editors/UploadMonitor.vue'\nimport ResourceVariantTextEditor from './ResourceVariantTextEditor.vue'\nimport { ILanguage } from \"@floip/flow-runner/dist/flow-spec/ILanguage\"\nimport { mixins } from \"vue-class-component\"\n\nconst flowVuexNamespace = namespace('flow')\nconst builderVuexNamespace = namespace('builder')\n\n  interface IAudioFile {\n    id: string;\n    filename: string;\n    description: string;\n    language_id: string;\n    duration_seconds: string;\n    original_extension: string;\n    created_at: string;\n  }\n\n  interface IResourceDefinitionVariantOverModesWithOptionalValue extends Partial<IResourceDefinitionVariantOverModes> {\n    value?: IResourceDefinitionVariantOverModes['value']\n  }\n\n  @Component({\n    components: {\n      AudioLibrarySelector,\n      ResourceVariantTextEditor,\n      UploadMonitor,\n      PhoneRecorder,\n    },\n  })\nexport class ResourceEditor extends mixins(FlowUploader, Permissions, Routes, Lang) {\n  @Prop({ required: true }) block!: IBlock\n\n  @Prop({ required: true }) flow!: IFlow\n\n  @Prop() resource!: IResource\n\n  @Prop() label?: string | number\n\n    discoverContentTypesFor = discoverContentTypesFor\n\n    findOrGenerateStubbedVariantOn = findOrGenerateStubbedVariantOn\n\n    findResourceVariantOverModesOn = findResourceVariantOverModesOn\n\n    SupportedMode = SupportedMode\n\n    SupportedContentType = SupportedContentType\n\n    triggerRecordViaPhoneFor(langId: ILanguage['id']) {\n      this.$store.commit('setAudioRecordingConfigVisibilityForSelectedBlock', { langId, isVisible: true })\n    }\n\n    handleFilesSubmittedFor(key: string, { data }: { data: any }) {\n      console.debug('call handleFilesSubmittedFor')\n      this.$store.dispatch('multimediaUpload/uploadFiles', { ...data, key })\n    }\n\n    handleFileSuccessFor(key: string, langId: ILanguage['id'], event: any) {\n      const { data: { file, json } } = event\n      const { uuid: jsKey } = this.block\n      const {\n        audio_file_id: id,\n        audio_uuid: filename,\n        created_at: { date: created_at },\n        description,\n        duration_seconds,\n      } = JSON.parse(json)\n      const extension = description.split('.')[description.split('.').length - 1]\n      const uploadedAudio: IAudioFile = {\n        id,\n        filename,\n        description,\n        language_id: langId,\n        duration_seconds,\n        original_extension: extension,\n        created_at,\n      }\n\n      this.resource_setOrCreateValueModeSpecific({\n        resourceId: this.resource.uuid,\n        filter: { language_id: langId, content_type: SupportedContentType.AUDIO, modes: [SupportedMode.IVR] },\n        value: description,\n      })\n      event.target.blur() // remove the focus from the `upload` Tab\n      this.pushAudioIntoLibrary(uploadedAudio)\n    }\n\n    findAudioResourceVariantFor(resource: IResource, filter: IResourceDefinitionVariantOverModesFilter) {\n      try {\n        return findResourceVariantOverModesOn(resource, filter).value\n      } catch (e) {\n        if (!(e instanceof ValidationException)) {\n          throw e\n        }\n\n        return null\n      }\n    }\n\n    @Getter availableAudio!: IAudioFile[]\n\n    @Getter isFeatureAudioUploadEnabled!: boolean\n\n    @Mutation pushAudioIntoLibrary!: (audio: IAudioFile) => void\n\n    @flowVuexNamespace.Action resource_setOrCreateValueModeSpecific!: ({ resourceId, filter, value }: { resourceId: IResource['uuid']; filter: IResourceDefinitionVariantOverModesWithOptionalValue; value: string }) => void\n\n    @builderVuexNamespace.Getter isEditable !: boolean\n}\n\nexport default ResourceEditor\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceEditor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceEditor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ResourceEditor.vue?vue&type=template&id=e6c6ccc8&\"\nimport script from \"./ResourceEditor.vue?vue&type=script&lang=ts&\"\nexport * from \"./ResourceEditor.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".phone-recording-recorder-selector[data-v-6630b4be]{padding-top:3em}.phone-recording-recorder-selector .modal-body .h4[data-v-6630b4be],.phone-recording-recorder-selector .modal-body h4[data-v-6630b4be]{margin-top:2em}.phone-recording-recorder-selector .table .recorder-selector-field[data-v-6630b4be]{width:3em;text-align:center;vertical-align:middle}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import mod from \"-!../../../../node_modules/vue-style-loader/index.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceVariantTextEditor.vue?vue&type=custom&index=0&blockType=x-style&lang=scss&scoped=true\"; export default mod; export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceVariantTextEditor.vue?vue&type=custom&index=0&blockType=x-style&lang=scss&scoped=true\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".btn-ghost{background:transparent;border:none}.audio-library-selection{position:relative;background-color:transparent!important;background-image:none!important;border-color:#ccc!important}.audio-library-selection .audio-library-selection-download-dropdown{position:absolute;right:1.6em;top:50%;margin-top:-8px;color:#888}.audio-library-selection .audio-library-selection-download-dropdown svg{vertical-align:middle}.audio-library-selection .audio-library-selection-clear-selection{margin-right:-7px}.audio-library-selection .audio-file-description{text-overflow:ellipsis;overflow:hidden;margin-bottom:3px}.audio-library-selection .vue-sound-wrapper{margin-bottom:8px;margin-left:1em}.audio-library-selection .vue-sound-wrapper .vue-sound__player .icon-pause2,.audio-library-selection .vue-sound-wrapper .vue-sound__player .icon-play3{font-size:130%;color:#888}.audio-library-selection .vue-sound-wrapper .vue-sound__player .icon-pause2:hover,.audio-library-selection .vue-sound-wrapper .vue-sound__player .icon-play3:hover{color:#000;text-decoration:none}.audio-library-selection .vue-sound-wrapper .vue-sound__player .icon-download,.audio-library-selection .vue-sound-wrapper .vue-sound__player .icon-stop2,.audio-library-selection .vue-sound-wrapper .vue-sound__player .icon-volume-high,.audio-library-selection .vue-sound-wrapper .vue-sound__player .volume-toggle{display:none!important}.audio-library-selection .vue-sound-wrapper .vue-sound__player .vue-sound__playback-time-current,.audio-library-selection .vue-sound-wrapper .vue-sound__player .vue-sound__playback-time-separator,.audio-library-selection .vue-sound-wrapper .vue-sound__player .vue-sound__playback-time-total{font-size:80%;color:#888}.audio-library-selection .vue-sound-wrapper .vue-sound__player .vue-sound__playback-time-wrapper{text-align:center;width:71%!important}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"block-id text-right\"},[_c('small',{staticClass:\"text-muted\"},[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.block-id'))+\": \"),_c('em',[_vm._v(_vm._s(_vm.blockId))])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\nimport { IBlock } from '@floip/flow-runner'\nimport { Component, Prop } from 'vue-property-decorator'\nimport Lang from '@/lib/filters/lang'\nimport { mixins } from \"vue-class-component\";\n\n@Component({})\nclass BlockId extends mixins(Lang) {\n    @Prop()readonly block!: IBlock\n\n    get blockId(): string {\n      return this.block.uuid || ''\n    }\n  }\n\nexport default BlockId\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BlockId.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BlockId.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./BlockId.vue?vue&type=template&id=9ef7b11c&\"\nimport script from \"./BlockId.vue?vue&type=script&lang=ts&\"\nexport * from \"./BlockId.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceVariantTextEditor.vue?vue&type=custom&index=0&blockType=x-style&lang=scss&scoped=true\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"98e06cea\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","import mod from \"-!../../../node_modules/vue-style-loader/index.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioLibrarySelection.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/vue-style-loader/index.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioLibrarySelection.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../../../node_modules/vue-style-loader/index.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PhoneRecordingRecorderSelector.vue?vue&type=style&index=0&id=6630b4be&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PhoneRecordingRecorderSelector.vue?vue&type=style&index=0&id=6630b4be&lang=scss&scoped=true&\"","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadMonitor.vue?vue&type=style&index=0&lang=scss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"001dc3d2\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".audio-library-search-field.dropdown .dropdown-menu[data-v-50208a5c]{display:block;min-width:100%}.audio-library-search-field.dropdown .dropdown-menu>li.pagers>a[data-v-50208a5c]{clear:none;margin-top:0;margin-bottom:0;padding-top:.5em;padding-bottom:.5em}.audio-library-search-field.dropdown .dropdown-menu>li.pagers>a.disabled[data-v-50208a5c]{text-decoration:none;background-color:transparent;background-image:none;filter:progid:DXImageTransform.Microsoft.gradient(enabled = false);cursor:not-allowed;color:#777}.close[data-v-50208a5c]{pointer-events:auto}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import mod from \"-!../../../../node_modules/vue-style-loader/index.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadMonitor.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadMonitor.vue?vue&type=style&index=0&lang=scss&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".progress{margin-bottom:.5em}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"resource-variant-text-editor\"},[_c('div',{staticClass:\"content-editor\",class:{'content-editor-selected': !!_vm.content}},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.content),expression:\"content\"},{name:\"focus\",rawName:\"v-focus\",value:(_vm.isSelected),expression:\"isSelected\"}],staticClass:\"form-control\",attrs:{\"placeholder\":_vm._f(\"trans\")((\"flow-builder.enter-\" + (_vm.resourceVariant.content_type.toString().toLowerCase()) + \"-content\"))},domProps:{\"value\":(_vm.content)},on:{\"focus\":_vm.select,\"blur\":_vm.deselect,\"input\":function($event){if($event.target.composing){ return; }_vm.content=$event.target.value}}})]),_c('div',{staticClass:\"content-toolbar\"},[(_vm.isEditable)?_c('span',{staticClass:\"text-muted transition-all\",class:{invisible: !_vm.characterCounter.count}},[_vm._v(\" \"+_vm._s(_vm.characterCounter.count)+\" characters \"),(_vm.mode === 'sms' && _vm.characterCounter.pages > 1)?[_vm._v(\" (\"+_vm._s(_vm.characterCounter.pages)+\" \"+_vm._s(_vm.characterCounter.hasUnicode ? 'unicode pages' : 'pages')+\") \")]:_vm._e()],2):_vm._e(),(_vm.doesContentContainExpression)?_c('a',{directives:[{name:\"b-tooltip\",rawName:\"v-b-tooltip.hover.top.html\",value:((\"<p>\" + (_vm.trans('flow-builder.youre-using-floip-expressions')) + \"</p>\\n                     <p>\\n                       <strong>\" + (_vm.trans('flow-builder.pro-tip')) + \":</strong>\\n                       \" + (_vm.trans('flow-builder.floip-expressions-escape-with-double-at-symbol')) + \"\\n                     </p>\")),expression:\"`<p>${trans('flow-builder.youre-using-floip-expressions')}</p>\\n                     <p>\\n                       <strong>${trans('flow-builder.pro-tip')}:</strong>\\n                       ${trans('flow-builder.floip-expressions-escape-with-double-at-symbol')}\\n                     </p>`\",modifiers:{\"hover\":true,\"top\":true,\"html\":true}}],attrs:{\"href\":\"https://floip.gitbooks.io/flow-specification/content/fundamentals/expressions.html\",\"target\":\"_blank\"}},[_c('kbd',{staticStyle:{\"margin-left\":\"1em\"}},[_c('i',{staticClass:\"glyphicon glyphicon-console\"}),(_vm.doesContentContainExpressionError)?_c('i',{staticClass:\"glyphicon glyphicon glyphicon-remove-sign text-danger\"}):_c('i',{staticClass:\"glyphicon glyphicon-ok-sign text-success\"})])]):_vm._e(),(_vm.doesContentContainExpressionError)?_c('div',{staticClass:\"alert alert-danger\",staticStyle:{\"margin-top\":\"0.5em\"}},[_c('p',[_c('i',{staticClass:\"glyphicon glyphicon-remove-sign\"}),_c('strong',[_c('a',{attrs:{\"href\":\"https://floip.gitbooks.io/flow-specification/content/fundamentals/expressions.html\",\"target\":\"_blank\"}},[_vm._v(\"FLOIP Expression\")]),_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.error-found'))+\" \")])]),_c('p',[_c('em',[_vm._v(\" \"+_vm._s(_vm.contentExpressionAST.message)+\" (\"),(_vm.contentExpressionAST.location.start.line !== 1)?_c('span',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.on-line'))+\" \"+_vm._s(_vm.contentExpressionAST.location.start.line)+\", \")]):_vm._e(),_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.at-character'))+\" \"+_vm._s(_vm.contentExpressionAST.location.start.column)+\") \")])])]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"resource-variant-text-editor\">\n    <div class=\"content-editor\" :class=\"{'content-editor-selected': !!content}\">\n      <textarea v-model=\"content\"\n              v-focus=\"isSelected\"\n              @focus=\"select\"\n              @blur=\"deselect\"\n              :placeholder=\"`flow-builder.enter-${resourceVariant.content_type.toString().toLowerCase()}-content` | trans\"\n              class=\"form-control\"></textarea>\n\n      <!-- <button @click=\"select\"\n              class=\"btn btn-xs btn-secondary\">\n        <i class=\"glyphicon glyphicon-pencil\"></i>\n      </button> -->\n    </div>\n\n    <div class=\"content-toolbar\">\n<!--      <block-content-autogen-button-->\n<!--          v-if=\"enableAutogenButton\"-->\n<!--          :isEditable=\"isEditable\"-->\n<!--          :langId=\"langId\"-->\n<!--          :type=\"type\"-->\n<!--          :block=\"block\"-->\n<!--          class=\"pull-right\" />-->\n\n      <span v-if=\"isEditable\" class=\"text-muted transition-all\" :class=\"{invisible: !characterCounter.count}\">\n        {{characterCounter.count}} characters\n\n        <template v-if=\"mode === 'sms' && characterCounter.pages > 1\">\n          ({{characterCounter.pages}} {{characterCounter.hasUnicode ? 'unicode pages' : 'pages'}})\n        </template>\n      </span>\n\n      <a v-if=\"doesContentContainExpression\"\n         v-b-tooltip.hover.top.html=\"`<p>${trans('flow-builder.youre-using-floip-expressions')}</p>\n                     <p>\n                       <strong>${trans('flow-builder.pro-tip')}:</strong>\n                       ${trans('flow-builder.floip-expressions-escape-with-double-at-symbol')}\n                     </p>`\"\n        href=\"https://floip.gitbooks.io/flow-specification/content/fundamentals/expressions.html\"\n        target=\"_blank\">\n\n        <kbd style=\"margin-left: 1em\">\n          <i class=\"glyphicon glyphicon-console\"></i>\n          <i v-if=\"doesContentContainExpressionError\" class=\"glyphicon glyphicon glyphicon-remove-sign text-danger\"></i>\n          <i v-else class=\"glyphicon glyphicon-ok-sign text-success\"></i>\n        </kbd>\n      </a>\n\n      <div v-if=\"doesContentContainExpressionError\"\n          class=\"alert alert-danger\"\n          style=\"\n  margin-top: 0.5em;\n\">\n        <p>\n          <i class=\"glyphicon glyphicon-remove-sign\"></i>\n          <strong>\n            <a href=\"https://floip.gitbooks.io/flow-specification/content/fundamentals/expressions.html\"\n               target=\"_blank\">FLOIP Expression</a>\n            {{'flow-builder.error-found' | trans}}\n          </strong>\n        </p>\n\n        <p><!-- NOTE: Funky source formatting to mitigate spaces between parens -->\n          <em>\n            {{contentExpressionAST.message}}\n            (<span v-if=\"contentExpressionAST.location.start.line !== 1\">{{'flow-builder.on-line' | trans}}\n              {{contentExpressionAST.location.start.line}},\n            </span>{{'flow-builder.at-character' | trans}} {{contentExpressionAST.location.start.column}})\n          </em>\n        </p>\n      </div>\n    </div>\n\n<!--    <template v-if=\"!isEditable\">-->\n<!--      <p v-if=\"content\">{{content}}</p>-->\n<!--      <p>-->\n<!--        <em class=\"text-muted\">{{'flow-builder.no-sms-content-yet' | trans}}</em>-->\n<!--      </p>-->\n<!--    </template>-->\n  </div>\n</template>\n\n<script>\nimport Vue from 'vue'\nimport { lang } from '@/lib/filters/lang'\nimport { parse as floipExpressionParser } from '@floip/expression-parser'\nimport { isObject, some } from 'lodash'\nimport VueFocus from 'vue-focus'\nimport { mapActions } from 'vuex'\nimport { BTooltip } from 'bootstrap-vue'\n\n// import BlockContentAutogenButton from './BlockContentAutogenButton'\n\nVue.component('b-tooltip', BTooltip)\n\nexport default {\n  components: {\n    // BlockContentAutogenButton,\n  },\n  mixins: [lang, VueFocus.mixin],\n\n  props: {\n    isEditable: Boolean,\n    resourceId: {\n      type: String,\n      default: null,\n    },\n    resourceVariant: {\n      type: Object, // as () => IResourceValue\n      default: null,\n    },\n    mode: {\n      type: String,\n      default: null,\n    },\n\n    enableAutogenButton: {\n      type: Boolean,\n      default: true,\n    },\n\n    // block: Object, // maybe!?\n    // langId: [String, Number],\n    // type: String,\n    // pathToTextContent: String,\n  },\n\n  data: () => ({ isSelected: false }),\n\n  computed: {\n    content: {\n      get() {\n        return this.resourceVariant.value\n      },\n\n      set(value) {\n        const { resourceId, mode } = this\n        const { language_id: languageId, content_type: contentType } = this.resourceVariant\n\n        this.resource_setOrCreateValueModeSpecific({\n          resourceId,\n          filter: { language_id: languageId, content_type: contentType, modes: [mode] },\n          value,\n        })\n      },\n    },\n\n    contentExpressionAST() {\n      let ast = []\n\n      try {\n        ast = floipExpressionParser(this.content)\n      } catch (e) {\n        if (e instanceof SyntaxError || e.name === 'SyntaxError') {\n          return e\n        }\n      }\n\n      const hasMembers = some(ast, isObject)\n      return hasMembers\n        ? ast\n        : null\n    },\n\n    doesContentContainExpression() {\n      return !!this.contentExpressionAST\n    },\n\n    doesContentContainExpressionError() {\n      return !!(this.contentExpressionAST instanceof Error)\n    },\n\n    characterCounter() {\n      const\n        hasUnicode = !/^[\\x00-\\x7F]*$/.test(this.content)\n      const count = this.content.length\n\n      console.debug('BlockTextContentEditorForLangAndType', 'characterCounter', { hasUnicode, count })\n\n      return {\n        hasUnicode,\n        count,\n        pages: hasUnicode ? Math.ceil(count / 70) : Math.ceil(count / 160),\n      }\n    },\n  },\n\n  methods: {\n    ...mapActions('flow', ['resource_setOrCreateValueModeSpecific']),\n\n    select() { this.isSelected = true },\n    deselect() { this.isSelected = false },\n\n    // debouncedSaveTree: debounce(function () {\n    //   this.$store.dispatch('attemptSaveTree')\n    // }, 500),\n  },\n}\n</script>\n\n<x-style lang=\"scss\" scoped>\n  .block-text-content-editor-for-lang-and-type {\n    margin-bottom: 0.5em;\n\n    .content-editor {\n      position: relative;\n\n      textarea {\n        height: 56px;\n      }\n\n      textarea, input[type=\"text\"] {\n        &:not(:focus) {\n          + button {\n            opacity: 1;\n          }\n        }\n\n        + button {\n          position: absolute;\n          bottom: 7px;\n          right: 10px; //15px + 7px; // 15px padding => parent, 8px padding => textarea\n\n          transition: opacity 200ms ease-in-out;\n          opacity: 0;\n        }\n      }\n\n      &-selected {\n        textarea, input[type=\"text\"] {\n          background-color: #F8F8F8;\n          //border-color: #DDDDDD;\n        }\n      }\n    }\n\n    .content-toolbar {\n      margin-top: 1px;\n    }\n  }\n\n  .invisible {\n    opacity: 0;\n  }\n</x-style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceVariantTextEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceVariantTextEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ResourceVariantTextEditor.vue?vue&type=template&id=40ae6254&\"\nimport script from \"./ResourceVariantTextEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./ResourceVariantTextEditor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* custom blocks */\nimport block0 from \"./ResourceVariantTextEditor.vue?vue&type=custom&index=0&blockType=x-style&lang=scss&scoped=true\"\nif (typeof block0 === 'function') block0(component)\n\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioLibrarySelection.vue?vue&type=style&index=0&lang=scss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"f82b14ce\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"block-name\"},[_c('text-editor',{attrs:{\"label\":_vm._f(\"trans\")('flow-builder.block-name'),\"placeholder\":_vm._f(\"trans\")('flow-builder.enter-block-name')},on:{\"keydown\":_vm.filterName},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}},[_c('small',{staticClass:\"text-muted\"},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.only-accepts-word-characters'))+\" \")])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"block-name\">\n    <text-editor v-model=\"name\"\n        :label=\"'flow-builder.block-name' | trans\"\n        :placeholder=\"'flow-builder.enter-block-name' | trans\"\n        @keydown=\"filterName\">\n      <small class=\"text-muted\">\n        {{'flow-builder.only-accepts-word-characters' | trans}}\n      </small>\n    </text-editor>\n  </div>\n</template>\n\n<script>\nimport { mapMutations } from 'vuex'\nimport TextEditor from '@/components/common/TextEditor'\nimport { lang } from '@/lib/filters/lang'\n\nexport default {\n  components: {\n    TextEditor,\n  },\n  mixins: [lang],\n  props: {\n    block: {\n      type: Object,\n      required: true,\n    },\n  },\n  computed: {\n    name: {\n      get() {\n        return this.block.name\n      },\n      set(value) {\n        this.block_setName({ blockId: this.block.uuid, value })\n      },\n    },\n\n  },\n  methods: {\n    ...mapMutations('flow', ['block_setName']),\n    filterName(e) {\n      if (e.key.match(/\\W+|Enter/g)) {\n        e.preventDefault()\n      }\n    },\n  },\n}\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NameEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NameEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NameEditor.vue?vue&type=template&id=34a67941&\"\nimport script from \"./NameEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./NameEditor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/vue-style-loader/index.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioLibrarySearchField.vue?vue&type=style&index=0&id=50208a5c&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/vue-style-loader/index.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioLibrarySearchField.vue?vue&type=style&index=0&id=50208a5c&lang=scss&scoped=true&\""],"sourceRoot":""}