{"version":3,"sources":["webpack://flow-builder/./src/components/interaction-designer/flow-editors/import/ImportMatcher.vue?f836","webpack://flow-builder/./src/views/ImportFlow.vue?6d83","webpack://flow-builder/./src/components/interaction-designer/flow-editors/import/ErrorHandler.vue?dbdb","webpack://flow-builder/./src/components/interaction-designer/flow-editors/import/ImportMatcher.vue?f916","webpack://flow-builder/./src/components/interaction-designer/flow-editors/import/ImportMatcher.vue?c2ce","webpack://flow-builder/./src/components/interaction-designer/flow-editors/import/ImportMatcher.vue?1243","webpack://flow-builder/./src/components/interaction-designer/flow-editors/import/ImportMatcher.vue","webpack://flow-builder/./src/components/interaction-designer/flow-editors/import/ErrorHandler.vue?d92a","webpack://flow-builder/./src/components/interaction-designer/flow-editors/import/ErrorHandler.vue?cf56","webpack://flow-builder/./src/components/interaction-designer/flow-editors/import/ErrorHandler.vue","webpack://flow-builder/./src/store/flow/views/import.ts","webpack://flow-builder/./src/views/ImportFlow.vue?322a","webpack://flow-builder/./src/views/ImportFlow.vue?20e9","webpack://flow-builder/./src/views/ImportFlow.vue","webpack://flow-builder/./src/views/ImportFlow.vue?1e00","webpack://flow-builder/./src/views/ImportFlow.vue?ab36","webpack://flow-builder/./src/views/ImportFlow.vue?54ae","webpack://flow-builder/./src/components/interaction-designer/flow-editors/import/ImportMatcher.vue?93bd","webpack://flow-builder/./src/components/interaction-designer/flow-editors/import/ImportMatcher.vue?9418"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","_f","attrs","directives","name","rawName","value","expression","domProps","_q","uploadOrPaste","on","$event","chooseFile","ref","handleFileUpload","_e","fileName","flowJson","setUpdatingAndHandleFlowJsonTextChange","route","trans","class","disableContinue","treeId","flowUUID","component","mode","preventDefault","handleImportFlow","staticRenderFns","_m","flowError","unsupportedBlockClassesList","missingLanguages","existingLanguagesWithoutMatch","handleMatchLanguage","missingProperties","existingPropertiesWithoutMatch","handleMatchProperty","missingGroups","existingGroupsWithoutMatch","handleMatchGroup","matchNotFoundText","_l","missingMatch","key","getIdentifier","getLabel","updateMappings","mappingsEmpty","option","JSON","stringify","handleMatch","mappings","typeLabel","typeId","event","target","matchingJson","newMatch","parse","$emit","default","required","mixins","lang","importVuexNamespace","oldLanguage","matchingNewLanguage","matchLanguage","oldProperty","matchingNewProperty","matchProperty","oldGroup","matchingNewGroup","matchGroup","Action","Getter","State","components","ImportMatcher","languagesMissing","state","propertiesMissing","groupsMissing","hasUnsupportedBlockClasses","getters","unsupportedBlockClasses","rootState","rootGetters","uploadedBlockTypes","blockClasses","flowContainer","map","block","type","mutations","setUpdating","updatingStatus","updating","baseReset","flowJsonText","propertyBlocks","groupBlocks","resetLanguageMatching","matchingLanguages","resetPropertyMatching","blocksMissingProperties","resetGroupMatching","matchingGroups","blocksMissingGroups","addMissingLanguage","language","push","setMissingLanguages","languages","setMatchingLanguages","setExistingLanguagesWithoutMatch","setFlowLanguages","flows","setFlowResources","resources","addFlowLanguage","setFlowJsonText","text","setFlowContainer","setFlowContainerBlocks","blocks","setFlowError","setGroupBlocks","setPropertyBlocks","setBlocksMissingProperties","setMissingProperties","setMatchingProperties","matchingProperties","setExistingPropertiesWithoutMatch","setBlocksMissingGroups","setMissingGroups","setMatchingGroups","setExistingGroupsWithoutMatch","actions","setFlowJson","commit","dispatch","oldFlowContainer","newFlowContainer","newPropertyBlocks","oldPropertyBlocks","newGroupBlocks","oldGroupBlocks","validateLanguages","uploadLanguages","forEach","matchingLanguage","orgLanguage","validateProperties","propertyBlock","propertyIdentifier","matchingProperty","subscriberPropertyFields","orgProperty","uuid","blockIds","validateGroups","groupBlock","groupIdentifier","groupName","matchingGroup","groups","orgGroup","id","group_name","blockId","blockIndex","newBlocksMissingProperties","reduce","newBlocksMissingGroups","stateFactory","namespaced","flowVuexNamespace","uploadOrPasteSetting","debounceHandleFlowJsonTextChange","handleFlowJsonTextChange","$store","store","modules","v","k","hasModule","registerModule","appConfig","builderConfig","isConfigured","configure","fileInput","$refs","file","click","reset","selectedFile","files","reader","FileReader","onload","readEvent","result","toString","readAsText","flow_import","persistRoute","flowId","$router","Mutation","TextEditor","ErrorHandler","Routes","___CSS_LOADER_API_IMPORT___","exports","module","i","content","locals","add"],"mappings":"yLAAA,yBAA8oB,EAAG,G,2CCAjpB,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,MAAM,CAACE,YAAY,wBAAwB,CAACF,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,MAAM,CAACA,EAAG,KAAK,CAACJ,EAAIO,GAAG,IAAIP,EAAIQ,GAAGR,EAAIS,GAAG,QAAPT,CAAgB,6BAA6B,OAAOI,EAAG,IAAI,CAACJ,EAAIO,GAAGP,EAAIQ,GAAGR,EAAIS,GAAG,QAAPT,CAAgB,0CAA0CI,EAAG,MAAM,CAACE,YAAY,qBAAqBI,MAAM,CAAC,KAAO,UAAU,CAACV,EAAIO,GAAG,IAAIP,EAAIQ,GAAGR,EAAIS,GAAG,QAAPT,CAAgB,6BAA6B,SAASI,EAAG,MAAM,CAACA,EAAG,QAAQ,CAACE,YAAY,kBAAkB,CAACF,EAAG,QAAQ,CAACO,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAOd,EAAiB,cAAEe,WAAW,kBAAkBL,MAAM,CAAC,KAAO,QAAQ,MAAQ,UAAUM,SAAS,CAAC,QAAUhB,EAAIiB,GAAGjB,EAAIkB,cAAc,WAAWC,GAAG,CAAC,OAAS,SAASC,GAAQpB,EAAIkB,cAAc,aAAalB,EAAIO,GAAG,IAAIP,EAAIQ,GAAGR,EAAIS,GAAG,QAAPT,CAAgB,kCAAkC,OAA8B,WAAtBA,EAAIkB,cAA4Bd,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,OAAO,CAACE,YAAY,YAAY,CAACF,EAAG,IAAI,CAACE,YAAY,4BAA4Ba,GAAG,CAAC,MAAQnB,EAAIqB,aAAa,CAACrB,EAAIO,GAAG,IAAIP,EAAIQ,GAAGR,EAAIS,GAAG,QAAPT,CAAgB,6BAA6B,OAAOI,EAAG,QAAQ,CAACkB,IAAI,OAAOZ,MAAM,CAAC,KAAO,OAAO,GAAK,aAAa,OAAS,IAAIS,GAAG,CAAC,OAASnB,EAAIuB,oBAAqBvB,EAAY,SAAEI,EAAG,SAAS,CAACE,YAAY,QAAQ,CAACN,EAAIO,GAAGP,EAAIQ,GAAGR,EAAIS,GAAG,QAAPT,CAAgB,kCAAkCA,EAAIwB,KAAKxB,EAAIO,GAAG,IAAIP,EAAIQ,GAAGR,EAAIyB,UAAU,SAAUzB,EAAgB,aAAEI,EAAG,cAAc,CAACE,YAAY,YAAYI,MAAM,CAAC,MAAQV,EAAI0B,SAAS,MAAQ,GAAG,YAAc1B,EAAIS,GAAG,QAAPT,CAAgB,gCAAgCmB,GAAG,CAAC,MAAQnB,EAAI2B,0CAA0C3B,EAAIwB,KAAKpB,EAAG,kBAAkB,GAAGJ,EAAIwB,OAAOpB,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,QAAQ,CAACE,YAAY,kBAAkB,CAACF,EAAG,QAAQ,CAACO,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAOd,EAAiB,cAAEe,WAAW,kBAAkBL,MAAM,CAAC,KAAO,QAAQ,MAAQ,SAASM,SAAS,CAAC,QAAUhB,EAAIiB,GAAGjB,EAAIkB,cAAc,UAAUC,GAAG,CAAC,OAAS,SAASC,GAAQpB,EAAIkB,cAAc,YAAYlB,EAAIO,GAAG,IAAIP,EAAIQ,GAAGR,EAAIS,GAAG,QAAPT,CAAgB,qCAAqC,OAA8B,UAAtBA,EAAIkB,cAA2Bd,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,cAAc,CAACE,YAAY,YAAYI,MAAM,CAAC,MAAQV,EAAI0B,SAAS,MAAQ,GAAG,YAAc1B,EAAIS,GAAG,QAAPT,CAAgB,iCAAiCmB,GAAG,CAAC,MAAQnB,EAAI2B,0CAA0CvB,EAAG,kBAAkB,GAAGJ,EAAIwB,OAAOpB,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,cAAc,CAACE,YAAY,iCAAiCI,MAAM,CAAC,GAAKV,EAAI4B,MAAM,wBAAwB,CAAC5B,EAAIO,GAAG,IAAIP,EAAIQ,GAAGR,EAAI6B,MAAM,wBAAwB,OAAOzB,EAAG,IAAI,CAACE,YAAY,kBAAkBwB,MAAM,CAAC,SAAY9B,EAAI+B,iBAAiBrB,MAAM,CAAC,KAAOV,EAAI4B,MAAM,iBAAkB,CAACI,OAAQhC,EAAIiC,SAAUC,UAAW,uBAAwBC,KAAM,UAAUhB,GAAG,CAAC,MAAQ,SAASC,GAAQA,EAAOgB,iBAAiBpC,EAAIqC,iBAAiBrC,EAAI4B,MAAM,iBAAkB,CAACI,OAAQhC,EAAIiC,SAAUC,UAAW,uBAAwBC,KAAM,aAAa,CAACnC,EAAIO,GAAG,IAAIP,EAAIQ,GAAGR,EAAIS,GAAG,QAAPT,CAAgB,6BAA6B,QAAQ,cAC1nGsC,EAAkB,G,2NCDlB,EAAS,WAAa,IAAItC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAAEJ,EAAY,SAAEI,EAAG,MAAM,CAACA,EAAG,MAAMJ,EAAIuC,GAAG,KAAKvC,EAAIwB,KAAMxB,EAAa,UAAEI,EAAG,MAAM,CAACE,YAAY,qBAAqBI,MAAM,CAAC,KAAO,UAAU,CAACV,EAAIO,GAAG,IAAIP,EAAIQ,GAAGR,EAAIS,GAAG,QAAPT,CAAgBA,EAAIwC,YAAY,OAAOxC,EAAIwB,KAAMxB,EAA8B,2BAAEI,EAAG,MAAM,CAACE,YAAY,qBAAqBI,MAAM,CAAC,KAAO,UAAU,CAACV,EAAIO,GAAG,IAAIP,EAAIQ,GAAKR,EAAI6B,MAAM,4CAA+C,KAAO7B,EAAIyC,6BAA8B,OAAOzC,EAAIwB,KAAMxB,EAAoB,iBAAEI,EAAG,iBAAiB,CAACE,YAAY,OAAOI,MAAM,CAAC,kBAAkBV,EAAI0C,iBAAiB,UAAU,KAAK,aAAa,QAAQ,iCAAiC1C,EAAI2C,8BAA8B,uBAAuB,8CAA8CxB,GAAG,CAAC,aAAenB,EAAI4C,uBAAuB5C,EAAIwB,KAAMxB,EAAqB,kBAAEI,EAAG,iBAAiB,CAACE,YAAY,OAAOI,MAAM,CAAC,kBAAkBV,EAAI6C,kBAAkB,UAAU,OAAO,aAAa,OAAO,iCAAiC7C,EAAI8C,+BAA+B,uBAAuB,+CAA+C3B,GAAG,CAAC,aAAenB,EAAI+C,uBAAuB/C,EAAIwB,KAAMxB,EAAiB,cAAEI,EAAG,iBAAiB,CAACE,YAAY,OAAOI,MAAM,CAAC,kBAAkBV,EAAIgD,cAAc,UAAU,KAAK,aAAa,aAAa,iCAAiChD,EAAIiD,2BAA2B,uBAAuB,2CAA2C9B,GAAG,CAAC,aAAenB,EAAIkD,oBAAoBlD,EAAIwB,MAAM,IAC1gD,EAAkB,CAAC,WAAa,IAAIxB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,iBAAiBI,MAAM,CAAC,KAAO,WAAW,CAACN,EAAG,OAAO,CAACE,YAAY,WAAW,CAACN,EAAIO,GAAG,oBCDjN,EAAS,WAAa,IAAIP,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,QAAQ,CAACJ,EAAIO,GAAGP,EAAIQ,GAAGR,EAAIS,GAAG,QAAPT,CAAgBA,EAAImD,uBAAuBnD,EAAIoD,GAAIpD,EAAkB,gBAAE,SAASqD,GAAc,OAAOjD,EAAG,MAAM,CAACkD,IAAMtD,EAAIuD,cAAcF,GAAiB,YAAa,CAACjD,EAAG,MAAM,CAACE,YAAY,2CAA2C,CAACF,EAAG,MAAM,CAACE,YAAY,uBAAuB,CAACF,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACF,EAAG,QAAQ,CAACE,YAAY,yCAAyC,CAACN,EAAIO,GAAGP,EAAIQ,GAAGR,EAAIwD,SAASH,SAAoBjD,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACF,EAAG,SAAS,CAACE,YAAY,0BAA0Ba,GAAG,CAAC,OAAS,SAASC,GAAQ,OAAOpB,EAAIyD,eAAeJ,EAAcjC,MAAW,CAAChB,EAAG,SAAS,CAACkD,IAAI,UAAU5C,MAAM,CAAC,MAAQ,IAAIM,SAAS,CAAC,SAAWhB,EAAI0D,gBAAgB,CAAC1D,EAAIO,GAAG,IAAIP,EAAIQ,GAAGR,EAAIS,GAAG,QAAPT,CAAgB,+BAA+B,OAAOA,EAAIoD,GAAIpD,EAA+B,6BAAE,SAAS2D,GAAQ,OAAOvD,EAAG,SAAS,CAACkD,IAAMtD,EAAIuD,cAAcI,GAAW,UAAW3C,SAAS,CAAC,MAAQ4C,KAAKC,UAAUF,KAAU,CAAC3D,EAAIO,GAAG,IAAIP,EAAIQ,GAAGmD,GAAQ,WAAU,KAAKvD,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACF,EAAG,SAAS,CAACE,YAAY,6BAA6Ba,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOpB,EAAI8D,YAAYT,MAAiB,CAACrD,EAAIO,GAAG,IAAIP,EAAIQ,GAAGR,EAAIS,GAAG,QAAPT,CAAgB,wBAAwB,mBAAkB,IACz0C,EAAkB,GC8ChB,EAAN,yG,0BAWE,EAAA+D,SAAoC,GAXtC,0DAaWV,GACP,OAAO,iBAAIA,EAAcpD,KAAK+D,UAAW,MAd7C,oCAiBgBX,GACZ,OAAO,iBAAIA,EAAcpD,KAAKgE,OAAQ,MAlB1C,qCAqBiBZ,EAAuCa,GACpDjE,KAAK8D,SAAS9D,KAAKsD,cAAcF,IAAiBa,EAAMC,OAAOrD,QAtBnE,kCA6BcuC,GACV,IAAMe,EAAe,iBAAInE,KAAK8D,SAAU9D,KAAKsD,cAAcF,IAC3D,GAAIe,EAAc,CAChB,IAAMC,EAAWT,KAAKU,MAAMF,GAC5BnE,KAAKsE,MAAM,eAAgBlB,EAAcgB,GACzCpE,KAAK8D,SAAW,kBAAK9D,KAAK8D,SAAU9D,KAAKsD,cAAcF,OAlC7D,oCA0BI,OAAO,qBAAQpD,KAAK8D,cA1BxB,GAA4B,KACH,yBAAtB,eAAK,CAAES,QAAS,M,wCAES,yBAAzB,eAAK,CAAEC,UAAU,K,6BAEQ,yBAAzB,eAAK,CAAEA,UAAU,K,gCAEQ,yBAAzB,eAAK,CAAEA,UAAU,K,qCAEQ,yBAAzB,eAAK,CAAEA,UAAU,K,kDATd,EAAa,yBAHlB,eAAU,CACTC,OAAQ,CAACC,EAAA,SAEL,GAuCS,QCtF+a,I,wBCQ1bzC,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,EAAAA,E,QCiCT0C,EAAsB,eAAU,eAUhC,EAAN,8LACsBC,EAAwBC,GAC1C7E,KAAK8E,cAAc,CAAEF,cAAaC,0BAFtC,0CAMIE,EACAC,GAEAhF,KAAKiF,cAAc,CAAEF,cAAaC,0BATtC,uCAaIE,EACAC,GAEAnF,KAAKoF,WAAW,CAAEF,WAAUC,yBAhBhC,GAA2B,KAmBjB,yBAAP,Q,mCAE2B,yBAA3BR,EAAoBU,Q,oCAIO,yBAA3BV,EAAoBU,Q,oCAIO,yBAA3BV,EAAoBU,Q,iCAIO,yBAA3BV,EAAoBW,Q,iDAEO,yBAA3BX,EAAoBW,Q,kDAEO,yBAA3BX,EAAoBW,Q,uCAEO,yBAA3BX,EAAoBW,Q,oCAEO,yBAA3BX,EAAoBW,Q,wCAEM,yBAA1BX,EAAoBY,O,gCAEM,yBAA1BZ,EAAoBY,O,oCAEM,yBAA1BZ,EAAoBY,O,uCAEM,yBAA1BZ,EAAoBY,O,oDAEM,yBAA1BZ,EAAoBY,O,wCAEM,yBAA1BZ,EAAoBY,O,qDAEM,yBAA1BZ,EAAoBY,O,oCAEM,yBAA1BZ,EAAoBY,O,iDAEM,yBAA1BZ,EAAoBY,O,+BA3DjB,EAAY,yBARjB,eACC,CACEC,WAAY,CACVC,cAAA,GAEFhB,OAAQ,CAACC,EAAA,SAGP,GA8DS,QC5H8a,ICOzb,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,I,0ECgBF,EAAgD,CAC3DgB,iBAAkB,SAACC,GACjB,OAAQ,qBAAQA,EAAMlD,mBAExBmD,kBAAmB,SAACD,GAClB,OAAQ,qBAAQA,EAAM/C,oBAExBiD,cAAe,SAACF,GACd,OAAQ,qBAAQA,EAAM5C,gBAExB+C,2BAA4B,SAACH,EAAOI,GAClC,OAAQ,qBAAQA,EAAQC,0BAE1BA,wBAAyB,SAACL,EAAOI,EAASE,EAAWC,GACnD,OAAO,wBAAWH,EAAQI,mBAAoBD,EAAYE,eAE5D5D,4BAA6B,SAACmD,EAAOI,GACnC,OAAO,kBAAKA,EAAQC,wBAAyB,OAE/CG,mBAAoB,SAACR,GACnB,OAAO,kBAAK,iBAAIA,EAAMU,cAAe,kBAAmB,IAAIC,KAAI,SAACC,GAAD,OAAmBA,EAAMC,WAIhFC,EAAwC,CACnDC,YADmD,SACvCf,EAAOgB,GACjBhB,EAAMiB,SAAWD,GAEnBE,UAJmD,SAIzClB,GACRA,EAAMU,cAAgB,KACtBV,EAAMmB,aAAe,GACrBnB,EAAMpD,UAAY,GAClBoD,EAAMoB,eAAiB,GACvBpB,EAAMqB,YAAc,IAEtBC,sBAXmD,SAW7BtB,GACpBA,EAAMuB,kBAAoB,GAC1BvB,EAAMlD,iBAAmB,GACzBkD,EAAMjD,8BAAgC,IAExCyE,sBAhBmD,SAgB7BxB,GACpBA,EAAMuB,kBAAoB,GAC1BvB,EAAMyB,wBAA0B,GAChCzB,EAAM/C,kBAAoB,GAC1B+C,EAAM9C,+BAAiC,IAEzCwE,mBAtBmD,SAsBhC1B,GACjBA,EAAM2B,eAAiB,GACvB3B,EAAM4B,oBAAsB,GAC5B5B,EAAM5C,cAAgB,GACtB4C,EAAM3C,2BAA6B,IAErCwE,mBA5BmD,SA4BhC7B,EAAO8B,GACxB9B,EAAMlD,iBAAiBiF,KAAKD,IAE9BE,oBA/BmD,SA+B/BhC,EAAOiC,GACzBjC,EAAMlD,iBAAmBmF,GAE3BC,qBAlCmD,SAkC9BlC,EAAOiC,GAC1BjC,EAAMuB,kBAAoBU,GAE5BE,iCArCmD,SAqClBnC,EAAOiC,GACtCjC,EAAMjD,8BAAgCkF,GAExCG,iBAxCmD,SAwClCpC,EAAOiC,GACtB,IAAIjC,EAAMU,cAGR,KAAO,2BAFPV,EAAMU,cAAc2B,MAAM,GAAGJ,UAAYA,GAK7CK,iBA/CmD,SA+ClCtC,EAAOuC,GACtB,IAAIvC,EAAMU,cAGR,KAAO,2BAFPV,EAAMU,cAAc6B,UAAYA,GAKpCC,gBAtDmD,SAsDnCxC,EAAO8B,GACrB,IAAI9B,EAAMU,cAGR,KAAO,2BAFPV,EAAMU,cAAc2B,MAAM,GAAGJ,UAAUF,KAAKD,IAKhDW,gBA7DmD,SA6DnCzC,EAAO0C,GACrB1C,EAAMmB,aAAeuB,GAEvBC,iBAhEmD,SAgElC3C,EAAOU,GACtBV,EAAMU,cAAgBA,GAExBkC,uBAnEmD,SAmE5B5C,EAAO6C,GACxB7C,EAAMU,eACR,iBAAIV,EAAMU,cAAe,kBAAmBmC,IAGhDC,aAxEmD,SAwEtC9C,EAAO0C,GAClB1C,EAAMpD,UAAY8F,GAEpBK,eA3EmD,SA2EpC/C,EAAOqB,GACpBrB,EAAMqB,YAAcA,GAEtB2B,kBA9EmD,SA8EjChD,EAAOoB,GACvBpB,EAAMoB,eAAiBA,GAEzB6B,2BAjFmD,SAiFxBjD,EAAOyB,GAChCzB,EAAMyB,wBAA0BA,GAElCyB,qBApFmD,SAoF9BlD,EAAO/C,GAC1B+C,EAAM/C,kBAAoBA,GAE5BkG,sBAvFmD,SAuF7BnD,EAAOoD,GAC3BpD,EAAMoD,mBAAqBA,GAE7BC,kCA1FmD,SA0FjBrD,EAAO9C,GACvC8C,EAAM9C,+BAAiCA,GAEzCoG,uBA7FmD,SA6F5BtD,EAAO4B,GAC5B5B,EAAM4B,oBAAsBA,GAE9B2B,iBAhGmD,SAgGlCvD,EAAO5C,GACtB4C,EAAM5C,cAAgBA,GAExBoG,kBAnGmD,SAmGjCxD,EAAO2B,GACvB3B,EAAM2B,eAAiBA,GAEzB8B,8BAtGmD,SAsGrBzD,EAAO3C,GACnC2C,EAAM3C,2BAA6BA,IAI1BqG,EAAgD,CACrDC,YADqD,WACZzI,GAAa,iKAAxC0I,EAAwC,EAAxCA,OAAQ5D,EAAgC,EAAhCA,MAAO6D,EAAyB,EAAzBA,SACjCD,EAAO,eAAgB,IACvBA,EAAO,kBAAmB1I,GAFgC,SAMxDwF,EAAgB1C,KAAKU,MAAMsB,EAAMmB,cANuB,0DAQxDyC,EAAO,yBACPA,EAAO,yBACPA,EAAO,sBACPA,EAAO,eAAgB,sCAXiC,8BAerD,eAAoBlD,GAfmC,CAAF,uBAgBxDkD,EAAO,eAAgB,6DAhBiC,8BAmBpDE,EAAmB,uBAAU9D,EAAMU,eACnCqD,EAAmB,uBAAUrD,GACnCkD,EAAO,mBAAoBlD,IAEvB,eAAwB,CAAEA,cAAeqD,EAAkBD,qBAvBH,CAAF,iCAwBlDD,EAAS,oBAAqB7D,EAAMU,eAxBc,WA2BpDsD,EAAoB,eAAkBtD,IACxC,eAAwB,CAAEsD,oBAAmBC,kBAAmBjE,EAAMoB,iBA5Bd,CAAF,uBA6BxDwC,EAAO,oBAAqBI,GA7B4B,UA8BlDH,EAAS,qBAAsB7D,EAAMoB,gBA9Ba,WAiCpD8C,EAAiB,eAAexD,IAClC,eAAqB,CAAEwD,iBAAgBC,eAAgBnE,EAAMqB,cAlCL,CAAF,uBAmCxDuC,EAAO,iBAAkBM,GAnC+B,UAoClDL,EAAS,iBAAkB7D,EAAMqB,aApCiB,QAsC1DuC,EAAO,kBAAmB5F,KAAKC,UAAU+B,EAAMU,cAAe,KAAM,IAtCV,4DAwCtD0D,kBAzCqD,WAyCH1D,GAAuB,2JAArDV,EAAqD,EAArDA,MAAO4D,EAA8C,EAA9CA,OAAQrD,EAAsC,EAAtCA,YACjC8D,EAA+B,iBAAI3D,EAAe,qBAAsB,IACxEa,EAAiC,GACnC8C,IACFA,EAAgBC,SAAQ,SAACxC,GACvB,IAAMyC,EAAmB,kBAAKhE,EAAY0B,WAAW,SAACuC,GAAD,OAAiB,qBAAQA,EAAa1C,MACtFyC,EAKHhD,EAAkBQ,KAAKD,GAFvB8B,EAAO,qBAAsB9B,MAKjC8B,EAAO,uBAAwBrC,GAE/BqC,EAAO,mBAAoB5D,EAAMuB,mBACjCqC,EAAO,mCAAoC,4BAAerD,EAAY0B,UAAWjC,EAAMuB,kBAAmB,gBAjB/B,8CAoBzEkD,mBA7DqD,WA6DFT,GAA2B,2JAAzDzD,EAAyD,EAAzDA,YAAaP,EAA4C,EAA5CA,MAAO4D,EAAqC,EAArCA,OACvCR,EAA+C,GAC/C3B,EAA0B,uBAAUzB,EAAMyB,yBAChDuC,EAAkBM,SAAQ,SAACI,GACzB,IAAMC,EAAqB,iBAAID,EAAe,4CAC9C,GAAIC,EAAoB,CACtB,IAAMC,EAAmB,kBAAKrE,EAAYsE,0BAA0B,SAACC,GAAD,OAAiB,qBAAQA,EAAY9J,KAAM2J,MAC1GC,EAWHxB,EAAmBrB,KAAK6C,IALnB,iBAAInD,EAAyBkD,KAChClD,EAAwBkD,GAAsB,IAEhDlD,EAAwBkD,GAAoB5C,KAAK2C,EAAcK,WAMrEnB,EAAO,6BAA8BnC,GAErCmC,EAAO,uBAAwB,kBAAK5D,EAAMyB,yBAAyBd,KAAI,SAACgE,GAAD,MAAyB,CAAE3J,KAAM2J,EAAoBK,SAAUhF,EAAMyB,wBAAwBkD,QACpKf,EAAO,wBAAyBR,GAEhCQ,EAAO,oCAAqC,4BAAerD,EAAYsE,yBAA0B7E,EAAMoD,mBAAoB,eA3BzC,8CA8B9E6B,eA3FqD,WA2FNf,GAAwB,2JAAtD3D,EAAsD,EAAtDA,YAAaP,EAAyC,EAAzCA,MAAO4D,EAAkC,EAAlCA,OACnCjC,EAAiC,GACjCC,EAAsB,uBAAU5B,EAAM4B,qBAC5CsC,EAAeI,SAAQ,SAACY,GACtB,IAAMC,EAAkB,iBAAID,EAAY,oBAClCE,EAAY,iBAAIF,EAAY,qBAClC,GAAIC,EAAiB,CACnB,IAAME,EAAgB,kBAAK9E,EAAY+E,QAAQ,SAACC,GAAD,OAAe,qBAAQA,EAASC,GAAIL,IAC5E,qBAAQI,EAASvK,KAAMoK,MACzBC,EAQH1D,EAAeI,KAAKsD,IALf,iBAAIzD,EAAqBuD,KAC5BvD,EAAoBuD,GAAmB,CAAEM,WAAYL,EAAWJ,SAAU,KAE5EpD,EAAoBuD,GAAiBH,SAASjD,KAAKmD,EAAWH,WAMpEnB,EAAO,yBAA0BhC,GAEjCgC,EAAO,mBAAoB,kBAAK5D,EAAM4B,qBAAqBjB,KAAI,SAACwE,GAAD,uBAAwBK,GAAIL,GAAoBnF,EAAM4B,oBAAoBuD,QACzIvB,EAAO,oBAAqBjC,GAE5BiC,EAAO,gCAAiC,4BAAerD,EAAY+E,OAAQtF,EAAM2B,eAAgB,eA1BtB,8CA4B7ExC,cAvH2D,cAuHoB,IAA/DyE,EAA+D,EAA/DA,OAAQ5D,EAAuD,EAAvDA,MAAO6D,EAAgD,EAAhDA,SAAc5E,EAAkC,EAAlCA,YAAaC,EAAqB,EAArBA,oBACxD0E,EAAO,kBAAmB1E,GAC1B0E,EAAO,mBAAoB,eAAgC,iBAAI5D,EAAMU,cAAe,YAAa,IAAKzB,EAAYuG,GAAItG,EAAoBsG,KAC1I5B,EAAO,kBAAmB5F,KAAKC,UAAU+B,EAAMU,cAAe,KAAM,IACpEkD,EAAO,sBAAuB,oBAAO5D,EAAMlD,kBAAkB,SAACgF,GAAD,OAAc,qBAAQA,EAAU7C,OAC7F4E,EAAS,oBAAqB7D,EAAMU,gBAEtCpB,cA9H2D,cA8HoB,IAA/DsE,EAA+D,EAA/DA,OAAQ5D,EAAuD,EAAvDA,MAAO6D,EAAgD,EAAhDA,SAAczE,EAAkC,EAAlCA,YAAaC,EAAqB,EAArBA,oBAClDwD,EAAS,uBAAU,iBAAI7C,EAAMU,cAAe,oBAClD,GAAKmC,EAAL,CACAzD,EAAY4F,SAASV,SAAQ,SAACoB,GAC5B,IAAMC,EAAa,uBAAU9C,GAAQ,SAACjC,GAAD,OAAmBA,EAAMmE,OAASW,KACnEC,EAAa,GACjB,iBAAI9C,EAAD,UAAY8C,EAAZ,6CAAmEtG,EAAoBrE,SAE5F4I,EAAO,yBAA0Bf,GACjCe,EAAO,kBAAmB5F,KAAKC,UAAU+B,EAAMU,cAAe,KAAM,IAEpE,IAAMkF,EAAwD,GAC9DhC,EAAO,6BAA8B,kBAAK5D,EAAMyB,yBAAyBoE,QAAO,SAACD,EAA4BjB,GAI3G,OAHIvF,EAAYpE,OAAS2J,IACvBiB,EAA2BjB,GAAsB3E,EAAMyB,wBAAwBkD,IAE1EiB,IACNA,IACHhC,EAAO,oBAAqB,eAAkB5D,EAAMU,gBACpDmD,EAAS,qBAAsB7D,EAAMoB,kBAEvC3B,WAnJ2D,cAmJW,IAAzDmE,EAAyD,EAAzDA,OAAQ5D,EAAiD,EAAjDA,MAAO6D,EAA0C,EAA1CA,SAActE,EAA4B,EAA5BA,SAAUC,EAAkB,EAAlBA,iBAC5CqD,EAAS,uBAAU,iBAAI7C,EAAMU,cAAe,oBAClD,GAAKmC,EAAL,CACAtD,EAASyF,SAASV,SAAQ,SAACoB,GACzB,IAAMC,EAAa,uBAAU9C,GAAQ,SAACjC,GAAD,OAAmBA,EAAMmE,OAASW,KACnEC,EAAa,IACjB,iBAAI9C,EAAD,UAAY8C,EAAZ,qBAA2CnG,EAAiBgG,IAC/D,iBAAI3C,EAAD,UAAY8C,EAAZ,sBAA4CnG,EAAiBxE,UAElE4I,EAAO,yBAA0Bf,GACjCe,EAAO,kBAAmB5F,KAAKC,UAAU+B,EAAMU,cAAe,KAAM,IAEpE,IAAMoF,EAAoF,GAC1FlC,EAAO,yBAA0B,kBAAK5D,EAAM4B,qBAAqBiE,QAAO,SAACC,EAAwBX,GAI/F,OAHI5F,EAASiG,KAAOL,IAClBW,EAAuBX,GAAmBnF,EAAM4B,oBAAoBuD,IAE/DW,IACNA,IACHlC,EAAO,iBAAkB,eAAe5D,EAAMU,gBAC9CmD,EAAS,iBAAkB7D,EAAMqB,gBAwBxB0E,EAAe,iBAAqB,CAC/CxE,kBAAmB,GACnBzE,iBAAkB,GAClBC,8BAA+B,GAC/B0E,wBAAyB,GACzBxE,kBAAmB,GACnBmG,mBAAoB,GACpBlG,+BAAgC,GAChC0E,oBAAqB,GACrBxE,cAAe,GACfuE,eAAgB,GAChBtE,2BAA4B,GAC5BqD,cAAe,KACfS,aAAc,GACdvE,UAAW,GACXwE,eAAgB,GAChBC,YAAa,GACbJ,UAAU,IAGG,GACb+E,YAAY,EACZhG,MAAO+F,EACP3F,QAAA,EACAU,YACA4C,WChSIuC,EAAoB,eAAU,QAC9B,EAAsB,eAAU,eAWhC,EAAN,yG,0BAKE,EAAAC,qBAAuB,SAEvB,EAAArK,SAAW,GAgDX,EAAAsK,iCAAmC,sBAAS,EAAKC,yBAA0B,KAvD7E,6MAUYC,EAAWhM,KAAXgM,OAER,qBAAQC,EAAA,KAAMC,SAAS,SAACC,EAAGC,GAAJ,OAAWJ,EAAOK,UAAUD,IAAMJ,EAAOM,eAAeF,EAAGD,MAElFH,EAAOK,UAAU,CAAC,OAAQ,YACrBL,EAAOM,eAAe,CAAC,OAAQ,UAAW,IAEzC,qBAAQtM,KAAKuM,YAAe,qBAAQvM,KAAKwM,iBAAoBxM,KAAKyM,cACtEzM,KAAK0M,UAAU,CAAEH,UAAWvM,KAAKuM,UAAWC,cAAexM,KAAKwM,gBAlBtE,uIAuBIxM,KAAKwB,SAAW,GAChBxB,KAAK6G,YACL7G,KAAKiH,wBACLjH,KAAKmH,wBACLnH,KAAKqH,uBA3BT,6DAiDyCxG,GACrCb,KAAK0G,aAAY,GACjB1G,KAAK8L,iCAAiCjL,KAnD1C,0GAyDiCA,GAzDjC,iFA0DIb,KAAKyB,SAAWZ,EAChBb,KAAK0G,aAAY,GA3DrB,6IA4EI,IAAMiG,EAAiB3M,KAAK4M,MAAMC,KAClCF,EAAUG,UA7Ed,kGAgFyB7I,GAhFzB,gGAiFIjE,KAAK+M,QAECC,EAAe/I,EAAMC,OAAO+I,MAAM,GACxCjN,KAAKwB,SAAWwL,EAAarM,KAC7BsD,EAAMC,OAAOrD,MAAQ,GAEfqM,EAAS,IAAIC,WAEnBD,EAAOE,OAAS,SAACC,GACf,EAAK5L,SAAW4L,EAAUnJ,OAAOoJ,OAAOC,YAGzBL,EAAOM,WAAWR,EAAc,SA7FrD,4MAgGyBrL,GAhGzB,uGAiGgC3B,KAAKyN,YAAY,CAE3CC,aAAc1N,KAAK2B,MAAM,oBAAqB,CAAEgM,OAAQ3N,KAAKqG,cAAcqE,OAC3ErE,cAAerG,KAAKqG,gBApG1B,OAiGUA,EAjGV,OAsGQA,GACFrG,KAAK+M,QACL/M,KAAK4N,QAAQlG,KAAK/F,IAElB3B,KAAKyI,aAAa,uCA1GxB,8IA+BI,OAAOzI,KAAK6L,sBA/BhB,aAkCoBhL,GACZA,IAAUb,KAAK6L,sBACjB7L,KAAK+M,QAEP/M,KAAK6L,qBAAuBhL,IAtChC,+BA0CI,OAAOb,KAAK8G,cA1ChB,aA6CejG,GACXb,KAAKsJ,YAAYzI,KA9CrB,sCA+DI,OAAQb,KAAKgC,UACRhC,KAAKuC,WACLvC,KAAK0F,kBACL1F,KAAK4F,mBACL5F,KAAK6F,eACL7F,KAAK8F,6BApEd,+BAwEI,OAAO,iBAAI9F,KAAKqG,cAAe,qBAxEnC,GAAyB,KACQ,yBAA9B,eAAK,CAAE9B,QAAS,iBAAO,O,gCAEO,yBAA9B,eAAK,CAAEA,QAAS,iBAAO,O,oCA4GE,yBAAzBqH,EAAkBvG,Q,kCAET,yBAAT,Q,gCAEO,yBAAP,Q,mCAE2B,yBAA3B,EAAoBC,Q,iDAEO,yBAA3B,EAAoBA,Q,uCAEO,yBAA3B,EAAoBA,Q,oCAEO,yBAA3B,EAAoBA,Q,wCAEO,yBAA3B,EAAoBD,Q,kCAES,yBAA7B,EAAoBwI,U,gCAES,yBAA7B,EAAoBA,U,4CAES,yBAA7B,EAAoBA,U,yCAES,yBAA7B,EAAoBA,U,4CAES,yBAA7B,EAAoBA,U,mCAES,yBAA7B,EAAoBA,U,kCAEM,yBAA1B,EAAoBtI,O,gCAEM,yBAA1B,EAAoBA,O,mCAEM,yBAA1B,EAAoBA,O,oCA/IjB,EAAU,yBATf,eACC,CACEC,WAAY,CACVsI,aAAA,KACAC,aAAA,GAEFtJ,OAAQ,CAACC,EAAA,KAAMsJ,EAAA,SAGb,GAkJS,QC3PsX,ICQjY,G,UAAY,eACd,EACAlO,EACAuC,GACA,EACA,KACA,KACA,OAIa,e,6CCnBf,yBAAmkB,EAAG,G,uBCCtkB,IAAI4L,EAA8B,EAAQ,QAC1CC,EAAUD,GAA4B,GAEtCC,EAAQxG,KAAK,CAACyG,EAAOC,EAAI,4GAA6G,KAEtID,EAAOD,QAAUA,G,uBCHjB,IAAIG,EAAU,EAAQ,QACA,kBAAZA,IAAsBA,EAAU,CAAC,CAACF,EAAOC,EAAIC,EAAS,MAC7DA,EAAQC,SAAQH,EAAOD,QAAUG,EAAQC,QAE5C,IAAIC,EAAM,EAAQ,QAA+DhK,QACpEgK,EAAI,WAAYF,GAAS,EAAM,CAAC,WAAY,EAAM,YAAa,K,qBCP5E,IAAIJ,EAA8B,EAAQ,QAC1CC,EAAUD,GAA4B,GAEtCC,EAAQxG,KAAK,CAACyG,EAAOC,EAAI,0BAA2B,KAEpDD,EAAOD,QAAUA,G,qBCHjB,IAAIG,EAAU,EAAQ,QACA,kBAAZA,IAAsBA,EAAU,CAAC,CAACF,EAAOC,EAAIC,EAAS,MAC7DA,EAAQC,SAAQH,EAAOD,QAAUG,EAAQC,QAE5C,IAAIC,EAAM,EAAQ,QAAwEhK,QAC7EgK,EAAI,WAAYF,GAAS,EAAM,CAAC,WAAY,EAAM,YAAa","file":"flow-builder.umd.min.chunk-builder.js","sourcesContent":["import mod from \"-!../../../../../node_modules/vue-style-loader/index.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImportMatcher.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../node_modules/vue-style-loader/index.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImportMatcher.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"new-contents\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-sm-8 offset-sm-2\"},[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-body\"},[_c('div',[_c('h2',[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.import-flow'))+\" \")]),_c('p',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.create-flow-from-json')))]),_c('div',{staticClass:\"alert alert-danger\",attrs:{\"role\":\"alert\"}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.import-note'))+\" \")])]),_c('div',[_c('label',{staticClass:\"mt-2 no-weight\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.uploadOrPaste),expression:\"uploadOrPaste\"}],attrs:{\"type\":\"radio\",\"value\":\"upload\"},domProps:{\"checked\":_vm._q(_vm.uploadOrPaste,\"upload\")},on:{\"change\":function($event){_vm.uploadOrPaste=\"upload\"}}}),_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.import-json-file'))+\" \")]),(_vm.uploadOrPaste === 'upload')?_c('div',{staticClass:\"ml-3 mr-3\"},[_c('div',{staticClass:\"form-inline mb-2\"},[_c('span',{staticClass:\"one-line\"},[_c('a',{staticClass:\"btn btn-outline-secondary\",on:{\"click\":_vm.chooseFile}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.import-file'))+\" \")]),_c('input',{ref:\"file\",attrs:{\"type\":\"file\",\"id\":\"flowUpload\",\"hidden\":\"\"},on:{\"change\":_vm.handleFileUpload}}),(_vm.fileName)?_c('strong',{staticClass:\"ml-1\"},[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.uploaded-file')))]):_vm._e(),_vm._v(\" \"+_vm._s(_vm.fileName)+\" \")])]),(_vm.flowJsonText)?_c('text-editor',{staticClass:\"tall-text\",attrs:{\"value\":_vm.flowJson,\"label\":\"\",\"placeholder\":_vm._f(\"trans\")('flow-builder.edit-flow-json')},on:{\"input\":_vm.setUpdatingAndHandleFlowJsonTextChange}}):_vm._e(),_c('error-handler')],1):_vm._e()]),_c('div',{staticClass:\"mt-2\"},[_c('label',{staticClass:\"mt-2 no-weight\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.uploadOrPaste),expression:\"uploadOrPaste\"}],attrs:{\"type\":\"radio\",\"value\":\"paste\"},domProps:{\"checked\":_vm._q(_vm.uploadOrPaste,\"paste\")},on:{\"change\":function($event){_vm.uploadOrPaste=\"paste\"}}}),_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.paste-json-directly'))+\" \")]),(_vm.uploadOrPaste === 'paste')?_c('div',{staticClass:\"ml-3 mr-3\"},[_c('text-editor',{staticClass:\"tall-text\",attrs:{\"value\":_vm.flowJson,\"label\":\"\",\"placeholder\":_vm._f(\"trans\")('flow-builder.paste-flow-json')},on:{\"input\":_vm.setUpdatingAndHandleFlowJsonTextChange}}),_c('error-handler')],1):_vm._e()]),_c('div',{staticClass:\"float-right mt-3\"},[_c('router-link',{staticClass:\"btn btn-outline-secondary mr-2\",attrs:{\"to\":_vm.route('flows.cancelImport')}},[_vm._v(\" \"+_vm._s(_vm.trans('flow-builder.cancel'))+\" \")]),_c('a',{staticClass:\"btn btn-primary\",class:{'disabled': _vm.disableContinue},attrs:{\"href\":_vm.route('trees.editTree', {treeId: _vm.flowUUID, component: 'interaction-designer', mode: 'edit'})},on:{\"click\":function($event){$event.preventDefault();_vm.handleImportFlow(_vm.route('trees.editTree', {treeId: _vm.flowUUID, component: 'interaction-designer', mode: 'edit'}))}}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.create-flow'))+\" \")])],1)])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.updating)?_c('div',[_c('br'),_vm._m(0)]):_vm._e(),(_vm.flowError)?_c('div',{staticClass:\"alert alert-danger\",attrs:{\"role\":\"alert\"}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")(_vm.flowError))+\" \")]):_vm._e(),(_vm.hasUnsupportedBlockClasses)?_c('div',{staticClass:\"alert alert-danger\",attrs:{\"role\":\"alert\"}},[_vm._v(\" \"+_vm._s(((_vm.trans('flow-builder.unsupported-blocks-detected')) + \": \" + _vm.unsupportedBlockClassesList))+\" \")]):_vm._e(),(_vm.languagesMissing)?_c('import-matcher',{staticClass:\"mt-2\",attrs:{\"missing-matches\":_vm.missingLanguages,\"type-id\":\"id\",\"type-label\":\"label\",\"existing-options-without-match\":_vm.existingLanguagesWithoutMatch,\"match-not-found-text\":\"flow-builder.match-for-languages-not-found\"},on:{\"reactToMatch\":_vm.handleMatchLanguage}}):_vm._e(),(_vm.propertiesMissing)?_c('import-matcher',{staticClass:\"mt-2\",attrs:{\"missing-matches\":_vm.missingProperties,\"type-id\":\"name\",\"type-label\":\"name\",\"existing-options-without-match\":_vm.existingPropertiesWithoutMatch,\"match-not-found-text\":\"flow-builder.match-for-properties-not-found\"},on:{\"reactToMatch\":_vm.handleMatchProperty}}):_vm._e(),(_vm.groupsMissing)?_c('import-matcher',{staticClass:\"mt-2\",attrs:{\"missing-matches\":_vm.missingGroups,\"type-id\":\"id\",\"type-label\":\"group_name\",\"existing-options-without-match\":_vm.existingGroupsWithoutMatch,\"match-not-found-text\":\"flow-builder.match-for-groups-not-found\"},on:{\"reactToMatch\":_vm.handleMatchGroup}}):_vm._e()],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"spinner-border\",attrs:{\"role\":\"status\"}},[_c('span',{staticClass:\"sr-only\"},[_vm._v(\"Loading...\")])])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('label',[_vm._v(_vm._s(_vm._f(\"trans\")(_vm.matchNotFoundText)))]),_vm._l((_vm.missingMatches),function(missingMatch){return _c('div',{key:((_vm.getIdentifier(missingMatch)) + \"-missing\")},[_c('div',{staticClass:\"form-check form-check-inline full-width\"},[_c('div',{staticClass:\"row full-width ml-1\"},[_c('div',{staticClass:\"col-xl-2 col-md-3\"},[_c('label',{staticClass:\"form-check-label full-width mt-2 mb-2\"},[_vm._v(_vm._s(_vm.getLabel(missingMatch)))])]),_c('div',{staticClass:\"col-xl-8 col-md-6\"},[_c('select',{staticClass:\"form-control full-width\",on:{\"change\":function($event){return _vm.updateMappings(missingMatch, $event)}}},[_c('option',{key:\"default\",attrs:{\"value\":\"\"},domProps:{\"selected\":_vm.mappingsEmpty}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.none-selected'))+\" \")]),_vm._l((_vm.existingOptionsWithoutMatch),function(option){return _c('option',{key:((_vm.getIdentifier(option)) + \"-option\"),domProps:{\"value\":JSON.stringify(option)}},[_vm._v(\" \"+_vm._s(option)+\" \")])})],2)]),_c('div',{staticClass:\"col-xl-2 col-md-3\"},[_c('button',{staticClass:\"btn btn-primary full-width\",on:{\"click\":function($event){return _vm.handleMatch(missingMatch)}}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.update'))+\" \")])])])])])})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport lang from '@/lib/filters/lang'\nimport Vue from 'vue'\nimport { Component, Prop } from 'vue-property-decorator'\nimport {\n  omit,\n  isEmpty,\n  get,\n} from 'lodash'\n\n@Component({\n  mixins: [lang],\n})\nclass ImportMatcher extends Vue {\n  @Prop({ default: '' }) readonly matchNotFoundText!: string\n\n  @Prop({ required: true }) readonly typeId!: string\n\n  @Prop({ required: true }) readonly typeLabel!: string\n\n  @Prop({ required: true }) readonly missingMatches!: any[]\n\n  @Prop({ required: true }) readonly existingOptionsWithoutMatch!: any[]\n\n  mappings: {[key: string]: string} = {}\n\n  getLabel(missingMatch: {[key: string]: string}): string {\n    return get(missingMatch, this.typeLabel, '')\n  }\n\n  getIdentifier(missingMatch: {[key: string]: string}): string {\n    return get(missingMatch, this.typeId, '')\n  }\n\n  updateMappings(missingMatch: {[key: string]: string}, event: {target: {value: string}}) {\n    this.mappings[this.getIdentifier(missingMatch)] = event.target.value\n  }\n\n  get mappingsEmpty() {\n    return isEmpty(this.mappings)\n  }\n\n  handleMatch(missingMatch: {[key: string]: string}) {\n    const matchingJson = get(this.mappings, this.getIdentifier(missingMatch))\n    if (matchingJson) {\n      const newMatch = JSON.parse(matchingJson)\n      this.$emit('reactToMatch', missingMatch, newMatch)\n      this.mappings = omit(this.mappings, this.getIdentifier(missingMatch))\n    }\n  }\n}\n\nexport default ImportMatcher\n\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImportMatcher.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImportMatcher.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ImportMatcher.vue?vue&type=template&id=431c8a0c&\"\nimport script from \"./ImportMatcher.vue?vue&type=script&lang=ts&\"\nexport * from \"./ImportMatcher.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ImportMatcher.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport lang from '@/lib/filters/lang'\nimport { Component } from 'vue-property-decorator'\nimport Vue from 'vue'\nimport { Getter, namespace } from 'vuex-class'\nimport { IContext } from '@floip/flow-runner'\nimport { ILanguage } from '@floip/flow-runner/dist/flow-spec/ILanguage'\nimport ImportMatcher from '@/components/interaction-designer/flow-editors/import/ImportMatcher.vue'\nimport { IContactPropertyOption } from '@/store/flow/block-types/Core_SetContactPropertyStore'\nimport { IGroupOption } from '@/store/flow/block-types/Core_SetGroupMembershipStore'\n\nconst importVuexNamespace = namespace('flow/import')\n\n@Component(\n  {\n    components: {\n      ImportMatcher,\n    },\n    mixins: [lang],\n  },\n)\nclass ErrorHandler extends Vue {\n  handleMatchLanguage(oldLanguage: ILanguage, matchingNewLanguage: ILanguage) {\n    this.matchLanguage({ oldLanguage, matchingNewLanguage })\n  }\n\n  handleMatchProperty(\n    oldProperty: {name: string; blockIds: string[]},\n    matchingNewProperty: IContactPropertyOption,\n  ) {\n    this.matchProperty({ oldProperty, matchingNewProperty })\n  }\n\n  handleMatchGroup(\n    oldGroup: {id: string; group_name: string; blockIds: string[]},\n    matchingNewGroup: IGroupOption,\n  ) {\n    this.matchGroup({ oldGroup, matchingNewGroup })\n  }\n\n  @Getter blockClasses!: string[]\n\n  @importVuexNamespace.Action matchLanguage!: (\n    { oldLanguage, matchingNewLanguage }: {oldLanguage: ILanguage; matchingNewLanguage: ILanguage}\n  ) => Promise<void>\n\n  @importVuexNamespace.Action matchProperty!: (\n    { oldProperty, matchingNewProperty }: {oldProperty: object; matchingNewProperty: object}\n  ) => Promise<void>\n\n  @importVuexNamespace.Action matchGroup!: (\n    { oldGroup, matchingNewGroup }: {oldGroup: object; matchingNewGroup: object}\n  ) => Promise<void>\n\n  @importVuexNamespace.Getter hasUnsupportedBlockClasses!: boolean\n\n  @importVuexNamespace.Getter unsupportedBlockClassesList!: string\n\n  @importVuexNamespace.Getter languagesMissing!: boolean\n\n  @importVuexNamespace.Getter groupsMissing!: boolean\n\n  @importVuexNamespace.Getter propertiesMissing!: boolean\n\n  @importVuexNamespace.State flowError!: string\n\n  @importVuexNamespace.State flowContainer!: IContext\n\n  @importVuexNamespace.State missingLanguages!: ILanguage[]\n\n  @importVuexNamespace.State existingLanguagesWithoutMatch!: ILanguage[]\n\n  @importVuexNamespace.State missingProperties!: {name: string; blockIds: string[]}[]\n\n  @importVuexNamespace.State existingPropertiesWithoutMatch!: IContactPropertyOption[]\n\n  @importVuexNamespace.State missingGroups!: {id: string; group_name: string; blockIds: string[]}[]\n\n  @importVuexNamespace.State existingGroupsWithoutMatch!: IGroupOption[]\n\n  @importVuexNamespace.State updating!: boolean\n}\n\nexport default ErrorHandler\n\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ErrorHandler.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ErrorHandler.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ErrorHandler.vue?vue&type=template&id=ddfc5760&\"\nimport script from \"./ErrorHandler.vue?vue&type=script&lang=ts&\"\nexport * from \"./ErrorHandler.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { ILanguage } from '@floip/flow-runner/dist/flow-spec/ILanguage'\nimport { ActionTree, GetterTree, MutationTree } from 'vuex'\nimport { IRootState } from '@/store'\nimport { IContext, IBlock } from '@floip/flow-runner'\nimport {\n  join,\n  isEmpty,\n  difference,\n  uniq,\n  get,\n  set,\n  find,\n  findIndex,\n  reject,\n  keys,\n  differenceWith,\n  isEqual,\n  cloneDeep,\n} from 'lodash'\nimport { IContactPropertyOption } from '../block-types/Core_SetContactPropertyStore'\nimport { IGroupOption } from '../block-types/Core_SetGroupMembershipStore'\n\nimport { IFlowsState } from '../index'\n\nimport {\n  updateResourcesForLanguageMatch,\n  checkSingleFlowOnly,\n  detectedLanguageChanges,\n  detectedGroupChanges,\n  detectedPropertyChanges,\n  getGroupBlocks,\n  getPropertyBlocks,\n} from '../utils/importHelpers'\n\nexport const getters: GetterTree<IImportState, IRootState> = {\n  languagesMissing: (state) => {\n    return !isEmpty(state.missingLanguages)\n  },\n  propertiesMissing: (state) => {\n    return !isEmpty(state.missingProperties)\n  },\n  groupsMissing: (state) => {\n    return !isEmpty(state.missingGroups)\n  },\n  hasUnsupportedBlockClasses: (state, getters) => {\n    return !isEmpty(getters.unsupportedBlockClasses)\n  },\n  unsupportedBlockClasses: (state, getters, rootState, rootGetters) => {\n    return difference(getters.uploadedBlockTypes, rootGetters.blockClasses)\n  },\n  unsupportedBlockClassesList: (state, getters) => {\n    return join(getters.unsupportedBlockClasses, ', ')\n  },\n  uploadedBlockTypes: (state) => {\n    return uniq(get(state.flowContainer, 'flows[0].blocks', []).map((block: IBlock) => block.type))\n  }\n}\n\nexport const mutations: MutationTree<IImportState> = {\n  setUpdating(state, updatingStatus) {\n    state.updating = updatingStatus\n  },\n  baseReset(state) {\n    state.flowContainer = null\n    state.flowJsonText = ''\n    state.flowError = ''\n    state.propertyBlocks = []\n    state.groupBlocks = []\n  },\n  resetLanguageMatching(state) {\n    state.matchingLanguages = []\n    state.missingLanguages = []\n    state.existingLanguagesWithoutMatch = []\n  },\n  resetPropertyMatching(state) {\n    state.matchingLanguages = []\n    state.blocksMissingProperties = {}\n    state.missingProperties = []\n    state.existingPropertiesWithoutMatch = []\n  },\n  resetGroupMatching(state) {\n    state.matchingGroups = []\n    state.blocksMissingGroups = {}\n    state.missingGroups = []\n    state.existingGroupsWithoutMatch = []\n  },\n  addMissingLanguage(state, language) {\n    state.missingLanguages.push(language)\n  },\n  setMissingLanguages(state, languages) {\n    state.missingLanguages = languages\n  },\n  setMatchingLanguages(state, languages) {\n    state.matchingLanguages = languages\n  },\n  setExistingLanguagesWithoutMatch(state, languages) {\n    state.existingLanguagesWithoutMatch = languages\n  },\n  setFlowLanguages(state, languages) {\n    if (state.flowContainer) {\n      state.flowContainer.flows[0].languages = languages\n    } else {\n      throw ('flowContainer is not set')\n    }\n  },\n  setFlowResources(state, resources) {\n    if (state.flowContainer) {\n      state.flowContainer.resources = resources\n    } else {\n      throw ('flowContainer is not set')\n    }\n  },\n  addFlowLanguage(state, language) {\n    if (state.flowContainer) {\n      state.flowContainer.flows[0].languages.push(language)\n    } else {\n      throw ('flowContainer is not set')\n    }\n  },\n  setFlowJsonText(state, text) {\n    state.flowJsonText = text\n  },\n  setFlowContainer(state, flowContainer) {\n    state.flowContainer = flowContainer\n  },\n  setFlowContainerBlocks(state, blocks) {\n    if (state.flowContainer) {\n      set(state.flowContainer, 'flows[0].blocks', blocks)\n    }\n  },\n  setFlowError(state, text) {\n    state.flowError = text\n  },\n  setGroupBlocks(state, groupBlocks) {\n    state.groupBlocks = groupBlocks\n  },\n  setPropertyBlocks(state, propertyBlocks) {\n    state.propertyBlocks = propertyBlocks\n  },\n  setBlocksMissingProperties(state, blocksMissingProperties) {\n    state.blocksMissingProperties = blocksMissingProperties\n  },\n  setMissingProperties(state, missingProperties) {\n    state.missingProperties = missingProperties\n  },\n  setMatchingProperties(state, matchingProperties) {\n    state.matchingProperties = matchingProperties\n  },\n  setExistingPropertiesWithoutMatch(state, existingPropertiesWithoutMatch) {\n    state.existingPropertiesWithoutMatch = existingPropertiesWithoutMatch\n  },\n  setBlocksMissingGroups(state, blocksMissingGroups) {\n    state.blocksMissingGroups = blocksMissingGroups\n  },\n  setMissingGroups(state, missingGroups) {\n    state.missingGroups = missingGroups\n  },\n  setMatchingGroups(state, matchingGroups) {\n    state.matchingGroups = matchingGroups\n  },\n  setExistingGroupsWithoutMatch(state, existingGroupsWithoutMatch) {\n    state.existingGroupsWithoutMatch = existingGroupsWithoutMatch\n  },\n}\n\nexport const actions: ActionTree<IImportState, IRootState> = {\n  async setFlowJson({ commit, state, dispatch }, value: string) {\n    commit('setFlowError', '')\n    commit('setFlowJsonText', value)\n    let flowContainer\n    try {\n      // check valid json\n      flowContainer = JSON.parse(state.flowJsonText)\n    } catch (e) {\n      commit('resetLanguageMatching')\n      commit('resetPropertyMatching')\n      commit('resetGroupMatching')\n      commit('setFlowError', 'flow-builder.invalid-json-provided')\n      return\n    }\n    // await dispatch('checkIfValidFlow'. flowContainer) //TODO - waiting for validation work\n    if (!checkSingleFlowOnly(flowContainer)) {\n      commit('setFlowError', 'flow-builder.importer-currently-supports-single-flow-only')\n      return\n    }\n    const oldFlowContainer = cloneDeep(state.flowContainer)\n    const newFlowContainer = cloneDeep(flowContainer)\n    commit('setFlowContainer', flowContainer)\n\n    if (detectedLanguageChanges({ flowContainer: newFlowContainer, oldFlowContainer })) {\n      await dispatch('validateLanguages', state.flowContainer)\n    }\n    // matching on \"property_key\" == \"name\" in builder.config.json\n    const newPropertyBlocks = getPropertyBlocks(flowContainer)\n    if (detectedPropertyChanges({ newPropertyBlocks, oldPropertyBlocks: state.propertyBlocks })) {\n      commit('setPropertyBlocks', newPropertyBlocks)\n      await dispatch('validateProperties', state.propertyBlocks)\n    }\n    // matching on \"group_key\" == \"id\" in builder.config.json\n    const newGroupBlocks = getGroupBlocks(flowContainer)\n    if (detectedGroupChanges({ newGroupBlocks, oldGroupBlocks: state.groupBlocks })) {\n      commit('setGroupBlocks', newGroupBlocks)\n      await dispatch('validateGroups', state.groupBlocks)\n    }\n    commit('setFlowJsonText', JSON.stringify(state.flowContainer, null, 2))\n  },\n  async validateLanguages({ state, commit, rootGetters }, flowContainer: IContext) {\n    const uploadLanguages: ILanguage[] = get(flowContainer, 'flows[0].languages', [])\n    const matchingLanguages: ILanguage[] = []\n    if (uploadLanguages) {\n      uploadLanguages.forEach((language) => {\n        const matchingLanguage = find(rootGetters.languages, (orgLanguage) => isEqual(orgLanguage, language))\n        if (!matchingLanguage) {\n          // Unlike the others we don't reset this.\n          // A previously unmatched language can only be fixed by updating or adding a language\n          commit('addMissingLanguage', language)\n        } else {\n          matchingLanguages.push(language)\n        }\n      })\n      commit('setMatchingLanguages', matchingLanguages)\n      // Update the languages so we use the org settings for things like id and orgId\n      commit('setFlowLanguages', state.matchingLanguages)\n      commit('setExistingLanguagesWithoutMatch', differenceWith(rootGetters.languages, state.matchingLanguages, isEqual))\n    }\n  },\n  async validateProperties({ rootGetters, state, commit }, newPropertyBlocks: IBlock[]) {\n    const matchingProperties: IContactPropertyOption[] = []\n    const blocksMissingProperties = cloneDeep(state.blocksMissingProperties)\n    newPropertyBlocks.forEach((propertyBlock) => {\n      const propertyIdentifier = get(propertyBlock, 'config.set_contact_property.property_key')\n      if (propertyIdentifier) {\n        const matchingProperty = find(rootGetters.subscriberPropertyFields, (orgProperty) => isEqual(orgProperty.name, propertyIdentifier))\n        if (!matchingProperty) {\n          // Unlike the others we don't reset this.\n          // A previously unmatched property can only be fixed by updating or adding a language\n          //\n          // Name is all we can get when there isn't a match\n          // ...as the block sidebar gets the actual displayLabel by matching\n          if (!get(blocksMissingProperties, propertyIdentifier)) {\n            blocksMissingProperties[propertyIdentifier] = []\n          }\n          blocksMissingProperties[propertyIdentifier].push(propertyBlock.uuid)\n        } else {\n          matchingProperties.push(matchingProperty)\n        }\n      }\n    })\n    commit('setBlocksMissingProperties', blocksMissingProperties)\n\n    commit('setMissingProperties', keys(state.blocksMissingProperties).map((propertyIdentifier) => ({ name: propertyIdentifier, blockIds: state.blocksMissingProperties[propertyIdentifier] })))\n    commit('setMatchingProperties', matchingProperties)\n    // Update the languages so we use the org settings for things like id and orgId\n    commit('setExistingPropertiesWithoutMatch', differenceWith(rootGetters.subscriberPropertyFields, state.matchingProperties, isEqual))\n  },\n\n  async validateGroups({ rootGetters, state, commit }, newGroupBlocks: IBlock[]) {\n    const matchingGroups: IGroupOption[] = []\n    const blocksMissingGroups = cloneDeep(state.blocksMissingGroups)\n    newGroupBlocks.forEach((groupBlock) => {\n      const groupIdentifier = get(groupBlock, 'config.group_key')\n      const groupName = get(groupBlock, 'config.group_name')\n      if (groupIdentifier) {\n        const matchingGroup = find(rootGetters.groups, (orgGroup) => (isEqual(orgGroup.id, groupIdentifier)\n            && isEqual(orgGroup.name, groupName)))\n        if (!matchingGroup) {\n          // Unlike the others we don't reset this.\n          // A previously unmatched group can only be fixed by updating or adding a language\n          if (!get(blocksMissingGroups, groupIdentifier)) {\n            blocksMissingGroups[groupIdentifier] = { group_name: groupName, blockIds: [] }\n          }\n          blocksMissingGroups[groupIdentifier].blockIds.push(groupBlock.uuid)\n        } else {\n          matchingGroups.push(matchingGroup)\n        }\n      }\n    })\n    commit('setBlocksMissingGroups', blocksMissingGroups)\n\n    commit('setMissingGroups', keys(state.blocksMissingGroups).map((groupIdentifier) => ({ id: groupIdentifier, ...state.blocksMissingGroups[groupIdentifier] })))\n    commit('setMatchingGroups', matchingGroups)\n    // Update the languages so we use the org settings for things like id and orgId\n    commit('setExistingGroupsWithoutMatch', differenceWith(rootGetters.groups, state.matchingGroups, isEqual))\n  },\n  matchLanguage({ commit, state, dispatch }, { oldLanguage, matchingNewLanguage }) {\n    commit('addFlowLanguage', matchingNewLanguage)\n    commit('setFlowResources', updateResourcesForLanguageMatch(get(state.flowContainer, 'resources', []), oldLanguage.id, matchingNewLanguage.id))\n    commit('setFlowJsonText', JSON.stringify(state.flowContainer, null, 2))\n    commit('setMissingLanguages', reject(state.missingLanguages, (language) => isEqual(language, oldLanguage)))\n    dispatch('validateLanguages', state.flowContainer)\n  },\n  matchProperty({ commit, state, dispatch }, { oldProperty, matchingNewProperty }) {\n    const blocks = cloneDeep(get(state.flowContainer, 'flows[0].blocks'))\n    if (!blocks) return\n    oldProperty.blockIds.forEach((blockId: string) => {\n      const blockIndex = findIndex(blocks, (block: IBlock) => block.uuid === blockId)\n      if (blockIndex < 0) return\n      set(blocks, `${blockIndex}.config.set_contact_property.property_key`, matchingNewProperty.name)\n    })\n    commit('setFlowContainerBlocks', blocks)\n    commit('setFlowJsonText', JSON.stringify(state.flowContainer, null, 2))\n    // missingProperties gets updated again when we validate below\n    const newBlocksMissingProperties: {[key: string]: string[]} = {}\n    commit('setBlocksMissingProperties', keys(state.blocksMissingProperties).reduce((newBlocksMissingProperties, propertyIdentifier) => {\n      if (oldProperty.name !== propertyIdentifier) {\n        newBlocksMissingProperties[propertyIdentifier] = state.blocksMissingProperties[propertyIdentifier]\n      }\n      return newBlocksMissingProperties\n    }, newBlocksMissingProperties))\n    commit('setPropertyBlocks', getPropertyBlocks(state.flowContainer as IContext))\n    dispatch('validateProperties', state.propertyBlocks)\n  },\n  matchGroup({ commit, state, dispatch }, { oldGroup, matchingNewGroup }) {\n    const blocks = cloneDeep(get(state.flowContainer, 'flows[0].blocks'))\n    if (!blocks) return\n    oldGroup.blockIds.forEach((blockId: string) => {\n      const blockIndex = findIndex(blocks, (block: IBlock) => block.uuid === blockId)\n      if (blockIndex < 0) return\n      set(blocks, `${blockIndex}.config.group_key`, matchingNewGroup.id)\n      set(blocks, `${blockIndex}.config.group_name`, matchingNewGroup.name)\n    })\n    commit('setFlowContainerBlocks', blocks)\n    commit('setFlowJsonText', JSON.stringify(state.flowContainer, null, 2))\n    // missingGroups gets updated again when we validate below\n    const newBlocksMissingGroups: {[key: string]: {group_name: string; blockIds: string[]}} = {}\n    commit('setBlocksMissingGroups', keys(state.blocksMissingGroups).reduce((newBlocksMissingGroups, groupIdentifier) => {\n      if (oldGroup.id !== groupIdentifier) {\n        newBlocksMissingGroups[groupIdentifier] = state.blocksMissingGroups[groupIdentifier]\n      }\n      return newBlocksMissingGroups\n    }, newBlocksMissingGroups))\n    commit('setGroupBlocks', getGroupBlocks(state.flowContainer as IContext))\n    dispatch('validateGroups', state.groupBlocks)\n  },\n}\n\nexport interface IImportState {\n  matchingLanguages: ILanguage[]\n  missingLanguages: ILanguage[]\n  existingLanguagesWithoutMatch: ILanguage[]\n  blocksMissingProperties: {[key: string]: string[]}\n  missingProperties: {name: string; blockIds: string[]}[]\n  matchingProperties: IContactPropertyOption[]\n  existingPropertiesWithoutMatch: IContactPropertyOption[]\n  blocksMissingGroups: {[key: string]: {group_name: string; blockIds: string[]}}\n  missingGroups: {id: string; group_name: string; blockIds: string[]}[]\n  matchingGroups: IGroupOption[]\n  existingGroupsWithoutMatch: IGroupOption[]\n  flowContainer: IContext | null\n  flowJsonText: string\n  flowError: string\n  propertyBlocks: IBlock[]\n  groupBlocks: IBlock[]\n  updating: boolean\n}\n\nexport const stateFactory = (): IImportState => ({\n  matchingLanguages: [],\n  missingLanguages: [],\n  existingLanguagesWithoutMatch: [],\n  blocksMissingProperties: {},\n  missingProperties: [],\n  matchingProperties: [],\n  existingPropertiesWithoutMatch: [],\n  blocksMissingGroups: {},\n  missingGroups: [],\n  matchingGroups: [],\n  existingGroupsWithoutMatch: [],\n  flowContainer: null,\n  flowJsonText: '',\n  flowError: '',\n  propertyBlocks: [],\n  groupBlocks: [],\n  updating: false,\n})\n\nexport default {\n  namespaced: true,\n  state: stateFactory,\n  getters,\n  mutations,\n  actions,\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport lang from '@/lib/filters/lang'\nimport Routes from '@/lib/mixins/Routes'\nimport { Component, Prop } from 'vue-property-decorator'\nimport Vue from 'vue'\nimport { Getter, Mutation, namespace } from 'vuex-class'\nimport {\n  forEach,\n  isEmpty,\n  get,\n  debounce,\n} from 'lodash'\nimport { store } from '@/store'\nimport { IContext } from '@floip/flow-runner'\n\nimport TextEditor from '@/components/common/TextEditor.vue'\nimport ErrorHandler from '@/components/interaction-designer/flow-editors/import/ErrorHandler.vue'\nimport ImportStore from '@/store/flow/views/import'\n\nconst flowVuexNamespace = namespace('flow')\nconst importVuexNamespace = namespace('flow/import')\n\n@Component(\n  {\n    components: {\n      TextEditor,\n      ErrorHandler,\n    },\n    mixins: [lang, Routes],\n  },\n)\nclass ImportFlow extends Vue {\n  @Prop({ default: () => ({}) }) readonly appConfig!: object\n\n  @Prop({ default: () => ({}) }) readonly builderConfig!: object\n\n  uploadOrPasteSetting = 'upload'\n\n  fileName = ''\n\n  async created() {\n    const { $store } = this\n\n    forEach(store.modules, (v, k) => !$store.hasModule(k) && $store.registerModule(k, v))\n\n    $store.hasModule(['flow', 'import'])\n      || $store.registerModule(['flow', 'import'], ImportStore)\n\n    if ((!isEmpty(this.appConfig) && !isEmpty(this.builderConfig)) || !this.isConfigured) {\n      this.configure({ appConfig: this.appConfig, builderConfig: this.builderConfig })\n    }\n  }\n\n  reset() {\n    this.fileName = ''\n    this.baseReset()\n    this.resetLanguageMatching()\n    this.resetPropertyMatching()\n    this.resetGroupMatching()\n  }\n\n  get uploadOrPaste() {\n    return this.uploadOrPasteSetting\n  }\n\n  set uploadOrPaste(value) {\n    if (value !== this.uploadOrPasteSetting) {\n      this.reset()\n    }\n    this.uploadOrPasteSetting = value\n  }\n\n  get flowJson() {\n    return this.flowJsonText\n  }\n\n  set flowJson(value) {\n    this.setFlowJson(value)\n  }\n\n  setUpdatingAndHandleFlowJsonTextChange(value: string) {\n    this.setUpdating(true)\n    this.debounceHandleFlowJsonTextChange(value)\n  }\n\n  // In case someone is editing a language, let's give them a second to finish before we tell them it doesn't match\n  debounceHandleFlowJsonTextChange = debounce(this.handleFlowJsonTextChange, 2000)\n\n  async handleFlowJsonTextChange(value: string) {\n    this.flowJson = value\n    this.setUpdating(false)\n  }\n\n  get disableContinue() {\n    return !this.flowUUID\n      || this.flowError\n      || this.languagesMissing\n      || this.propertiesMissing\n      || this.groupsMissing\n      || this.hasUnsupportedBlockClasses\n  }\n\n  get flowUUID() {\n    return get(this.flowContainer, 'flows[0].uuid')\n  }\n\n  chooseFile() {\n    const fileInput: any = this.$refs.file\n    fileInput.click()\n  }\n\n  async handleFileUpload(event: any) {\n    this.reset()\n\n    const selectedFile = event.target.files[0]\n    this.fileName = selectedFile.name\n    event.target.value = ''\n\n    const reader = new FileReader()\n\n    reader.onload = (readEvent: any) => {\n      this.flowJson = readEvent.target.result.toString()\n    }\n\n    const contents = reader.readAsText(selectedFile, 'UTF-8')\n  }\n\n  async handleImportFlow(route: string) {\n    const flowContainer = await this.flow_import({\n      // @ts-ignore - Would need to switch mixins to class components to fix this - https://class-component.vuejs.org/guide/extend-and-mixins.html#mixins\n      persistRoute: this.route('flows.persistFlow', { flowId: this.flowContainer.uuid }),\n      flowContainer: this.flowContainer,\n    })\n    if (flowContainer) {\n      this.reset()\n      this.$router.push(route)\n    } else {\n      this.setFlowError('flow-builder.problem-importing-flow')\n      // TODO - hook into validation system when we have it to display any errors? Or should we have caught any errors already?\n    }\n  }\n\n  @flowVuexNamespace.Action flow_import!: ({ persistRoute, flowContainer }: { persistRoute: string; flowContainer: IContext }) => Promise<IContext>\n\n  @Mutation configure!: ({ appConfig, builderConfig }: { appConfig: object; builderConfig: object }) => void\n\n  @Getter isConfigured!: boolean\n\n  @importVuexNamespace.Getter hasUnsupportedBlockClasses!: boolean\n\n  @importVuexNamespace.Getter languagesMissing!: boolean\n\n  @importVuexNamespace.Getter groupsMissing!: boolean\n\n  @importVuexNamespace.Getter propertiesMissing!: boolean\n\n  @importVuexNamespace.Action setFlowJson!: (value: string) => Promise<void>\n\n  @importVuexNamespace.Mutation baseReset!: () => void\n\n  @importVuexNamespace.Mutation resetLanguageMatching!: () => void\n\n  @importVuexNamespace.Mutation resetGroupMatching!: () => void\n\n  @importVuexNamespace.Mutation resetPropertyMatching!: () => void\n\n  @importVuexNamespace.Mutation setFlowError!: (text: string) => void\n\n  @importVuexNamespace.Mutation setUpdating!: (updatingStatus: boolean) => void\n\n  @importVuexNamespace.State flowError!: string\n\n  @importVuexNamespace.State flowJsonText!: string\n\n  @importVuexNamespace.State flowContainer!: IContext\n}\n\nexport default ImportFlow\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImportFlow.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImportFlow.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ImportFlow.vue?vue&type=template&id=1d5f4d77&\"\nimport script from \"./ImportFlow.vue?vue&type=script&lang=ts&\"\nexport * from \"./ImportFlow.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ImportFlow.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/vue-style-loader/index.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImportFlow.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImportFlow.vue?vue&type=style&index=0&lang=scss&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".tall-text textarea{min-height:200px}.one-line{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImportFlow.vue?vue&type=style&index=0&lang=scss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"4affecbc\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".full-width{width:100%}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImportMatcher.vue?vue&type=style&index=0&lang=scss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"000fd584\", content, true, {\"sourceMap\":false,\"shadowMode\":false});"],"sourceRoot":""}