{"version":3,"sources":["webpack://flow-builder/./src/components/interaction-designer/block-types lazy ^\\.\\/.*Block\\.vue$ namespace object","webpack://flow-builder/./src/store/trees/10-trees-model.js","webpack://flow-builder/./src/components/interaction-designer/flow-editors/FlowEditor.vue?e474","webpack://flow-builder/./src/components/interaction-designer/flow-editors/NameEditor.vue?dcb5","webpack://flow-builder/./src/components/interaction-designer/flow-editors/NameEditor.vue?9311","webpack://flow-builder/./src/components/interaction-designer/flow-editors/NameEditor.vue?4e0c","webpack://flow-builder/./src/components/interaction-designer/flow-editors/NameEditor.vue","webpack://flow-builder/./src/components/interaction-designer/flow-editors/LabelEditor.vue?34e8","webpack://flow-builder/./src/components/interaction-designer/flow-editors/LabelEditor.vue?85e9","webpack://flow-builder/./src/components/interaction-designer/flow-editors/LabelEditor.vue?b4d0","webpack://flow-builder/./src/components/interaction-designer/flow-editors/LabelEditor.vue","webpack://flow-builder/./src/components/interaction-designer/flow-editors/InteractionTimeoutEditor.vue?86c6","webpack://flow-builder/./src/components/interaction-designer/flow-editors/InteractionTimeoutEditor.vue?c75e","webpack://flow-builder/./src/components/interaction-designer/flow-editors/InteractionTimeoutEditor.vue?0fd3","webpack://flow-builder/./src/components/interaction-designer/flow-editors/InteractionTimeoutEditor.vue","webpack://flow-builder/./src/components/interaction-designer/flow-editors/LanguagesEditor.vue?d1e5","webpack://flow-builder/./src/components/interaction-designer/flow-editors/LanguagesEditor.vue?a587","webpack://flow-builder/./src/components/interaction-designer/flow-editors/LanguagesEditor.vue?d77a","webpack://flow-builder/./src/components/interaction-designer/flow-editors/LanguagesEditor.vue","webpack://flow-builder/./src/components/interaction-designer/flow-editors/ModesEditor.vue?db06","webpack://flow-builder/./src/components/interaction-designer/flow-editors/ModesEditor.vue?7550","webpack://flow-builder/./src/components/interaction-designer/flow-editors/ModesEditor.vue?21fa","webpack://flow-builder/./src/components/interaction-designer/flow-editors/ModesEditor.vue","webpack://flow-builder/./src/components/interaction-designer/flow-editors/FlowEditor.vue?7cea","webpack://flow-builder/./src/components/interaction-designer/flow-editors/FlowEditor.vue?f5c7","webpack://flow-builder/./src/components/interaction-designer/flow-editors/FlowEditor.vue","webpack://flow-builder/./src/components/common/NumericEditor.vue?9471","webpack://flow-builder/src/components/common/NumericEditor.vue","webpack://flow-builder/./src/components/common/NumericEditor.vue?b00e","webpack://flow-builder/./src/components/common/NumericEditor.vue","webpack://flow-builder/./src/views/InteractionDesigner.vue?7023","webpack://flow-builder/./src/store/flow/resource.ts","webpack://flow-builder/./src/lib/filters/lang.js","webpack://flow-builder/./src/components/interaction-designer/toolbar/TreeBuilderToolbar.vue?4db6","webpack://flow-builder/./node_modules/moment/locale sync ^\\.\\/.*$","webpack://flow-builder/./src/store/trees/index.js","webpack://flow-builder/./src/components/interaction-designer/Block.vue?1cb5","webpack://flow-builder/./src/components/interaction-designer/BuilderCanvas.vue?8c9e","webpack://flow-builder/src/views/InteractionDesigner.vue","webpack://flow-builder/./src/store/common/flight-monitor.js","webpack://flow-builder/./src/store/trees/trees.js","webpack://flow-builder/./src/store/flow/block.ts","webpack://flow-builder/./src/store/flow/flow.ts","webpack://flow-builder/./src/store/flow/index.ts","webpack://flow-builder/./src/store/trees/bootstrap-legacy-global-dependencies.js","webpack://flow-builder/./src/store/builder/index.ts","webpack://flow-builder/./src/store/flow/utils/listBuilder.ts","webpack://flow-builder/./src/components/interaction-designer/BuilderCanvas.vue?9828","webpack://flow-builder/./src/components/interaction-designer/Block.vue?a33c","webpack://flow-builder/./src/components/common/PlainDraggable.vue?f99a","webpack://flow-builder/src/components/common/PlainDraggable.vue","webpack://flow-builder/./src/components/common/PlainDraggable.vue?034f","webpack://flow-builder/./src/components/common/PlainDraggable.vue","webpack://flow-builder/./src/components/interaction-designer/Connection.vue?bbb6","webpack://flow-builder/src/components/interaction-designer/Connection.vue","webpack://flow-builder/./src/components/interaction-designer/Connection.vue?5856","webpack://flow-builder/./src/components/interaction-designer/Connection.vue","webpack://flow-builder/src/components/interaction-designer/Block.vue","webpack://flow-builder/./src/components/interaction-designer/Block.vue?ad58","webpack://flow-builder/./src/components/interaction-designer/Block.vue","webpack://flow-builder/./src/components/interaction-designer/BuilderCanvas.vue?f035","webpack://flow-builder/./src/components/interaction-designer/BuilderCanvas.vue?ce72","webpack://flow-builder/./src/components/interaction-designer/BuilderCanvas.vue","webpack://flow-builder/./src/store/trees/12-trees-helpers.js","webpack://flow-builder/./src/components/common/TextEditor.vue?8b4f","webpack://flow-builder/src/components/common/TextEditor.vue","webpack://flow-builder/./src/components/common/TextEditor.vue?241d","webpack://flow-builder/./src/components/common/TextEditor.vue","webpack://flow-builder/./src/lib/mixins/Routes.js","webpack://flow-builder/./src/views/InteractionDesigner.vue?29db","webpack://flow-builder/./src/views/InteractionDesigner.vue?7ce4","webpack://flow-builder/./src/views/InteractionDesigner.vue","webpack://flow-builder/./src/components/interaction-designer/toolbar/TreeBuilderToolbar.vue?be56","webpack://flow-builder/./src/lib/mixins/Permissions.js","webpack://flow-builder/./src/store/flow/utils/DataObjectPropertyNameCaseConverter.ts","webpack://flow-builder/./src/components/interaction-designer/toolbar/TreeBuilderToolbar.vue?988d","webpack://flow-builder/./src/components/interaction-designer/toolbar/TreeBuilderToolbar.vue?9b71","webpack://flow-builder/./src/components/interaction-designer/toolbar/TreeBuilderToolbar.vue"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","all","slice","keys","Object","module","exports","window","app","Tree","attrs","this","attributes","prototype","get","attr","toJSON","options","_","clone","defaults","floipSyncedAt","details","title","description","enabledLanguages","syncedLanguage","startingBlockKey","exitBlockKey","hasVoice","hasSms","hasUssd","hasSocial","hasClipboard","floipPushUrl","floipPushApiKey","blocks","connections","_defaultReviewedState","upgrade","console","debug","time","fixArrayBlocks","defaultEnabledLanguages","defaultSyncedLanguage","inflateDefaultReviewedStateOnAll","inflateDefaultTagsOnAll","inflateDefaultLabelOnAll","upgradeLanguageSelectorBlocks","inflateDefaultSocialContentOnAll","inflateDefaultClipboardContentOnAll","upgradeSubscriberPropertyFieldSelections","upgradeMsmcqBranchingToFalse","upgradeSubscriberPropertyBlocks","upgradeSubscriberBranchBlocks","timeEnd","cacheDefaultReviewedState","getEnabledLanguages","zipObject","fill","Array","length","forEach","inflateDefaultReviewedStateOnto","bind","block","customData","reviewed","approved","tags","label","filter","type","languageSelectorBlock","addExitForNoResponse","socialContent","clipboardContent","propertyFieldId","property","ui","findSubscriberPropertyField","display_label","customDataCategory","branching","uiData","numChoices","numConnections","outputNames","push","action","propertyDateMethod","startDateMethod","propertyDateAbsoluteDate","startDateAbsoluteDate","propertyDateRelativeNumber","startDateRelativeNumber","propertyDateTimespanType","startDateTimespanType","propertyDateNumericBlockKey","startDateNumericBlockKey","propertyField","name","upgradedFromStartDate","builder","$set","startDateReference","neededFixing","fixedCount","each","index","arrayKeys","key","isArray","log","change","doesBlockLabelExist","comparatorKey","chain","find","jsKey","value","addBlock","blockData","makeUniqueId","setStartingBlock","getBlockByNumericIndex","blockKey","editBlockByNumericIndex","blockNumericIndex","arrayKey","extend","set","getBlock","findWhere","editBlock","thisBlock","setBlockPosition","positionData","getBlockPosition","getBlockNumConnections","filterBlockConnectionsAboveMax","maxConnections","where","startBlockKey","nodeNumber","outputKey","tree","removeConnection","setBlockAudioFile","languageId","audioData","isPlainObject","removeBlockAudioFile","getBlockKeys","getNextBlockKey","lastKey","parseInt","last","deleteBlock","without","clearStartingBlockIfIs","clearExitBlockIfIs","handleDeleteNumericQuestionBlockAssociations","selectedBlockKey","newBlock","assign","_getAmendmentsForNumericBranchBlock","_getAmendmentsForIdValidationBlock","outputs","reduce","newOutputs","output","newConditions","condition","newCondition","conditions","prefix","now","random","getMcqChoiceName","choiceId","choices","getBlockTitle","generateBlockTitle","limit","isNumber","treeTitles","destinationTreeId","Lang","trans","treeSetTitles","destinationTreeSetId","groupNames","groupId","displayLabel","comparator","comparatorString","languageNames","languageValue","S","truncate","s","addConnection","endBlockKey","connection","difference","addEnabledLanguage","languageKey","newEnabledLanguages","toString","intersection","pluck","languages","removeEnabledLanguage","enableVoice","disableVoice","enableSms","disableSms","enableUssd","disableUssd","enableSocial","disableSocial","enableClipboard","disableClipboard","validateLanguageAndContentTypes","missingLanguageIdsAudioFiles","missingLanguageIdsSmsContent","missingLanguageIdsUssdContent","missingLanguageIdsSocialContent","missingLanguageIdsClipboardContent","blockClasses","hasContent","audioFiles","smsContent","ussdContent","validateContent","updateFloipAlert","$","html","val","getEndBlockPosition","topOrBottom","returnBlockKey","offset","tallestYPosition","tallestBlockKey","thisYPosition","getTallestBlockPosition","getShortestBlockPosition","getTallestBlockKey","getShortestBlockKey","_blockIdPrefixMatcher","_validateNonExistentBlockReferences","keysToVerifiedMap","keysToExistsMap","validateKey","contains","conn","i","extractedKey","exec","values","_mergeAndSanitizeImportedInto","treeJson","importJson","smsAutogenLangs","ussdAutogenLangs","socialAutogenLangs","clipboardAutogenLangs","importedEnabledLanguages","validLanguages","invalidLanguages","blockContentsToReview","contentPath","content","sanitizedContent","omit","orgContentBlockTypeKeys","has","validateTreeData","json","schema","Ajv","ValidationError","message","validate","coerceTypes","compile","errors","keyword","dataPath","createJsonSchemaFor","blockTypes","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","_f","flow","on","updateFlowLanguages","updateFlowModes","staticRenderFns","isEditable","model","callback","$$v","expression","flowVuexNamespace","flow_setName","flowId","uuid","default","Mutation","components","TextEditor","mixins","lang","component","flow_setLabel","interactionTimeout","_n","flow_setInteractionTimeout","NumericEditor","_l","language","directives","rawName","domProps","flowSelectedLanguages","_i","$event","$$a","$$el","target","$$c","checked","$$i","concat","$store","state","trees","$emit","mode","flowSelectedModes","availableModes","supportedModes","flow_setLanguages","flow_setSupportedMode","FlowNameEditor","FlowLabelEditor","FlowInteractionTimeoutEditor","FlowLanguagesEditor","FlowModesEditor","placeholder","filterNumeric","_t","getters","resourcesByUuid","resources","mutations","resource_add","resource","resource_delete","resourceId","resourceIndex","splice","resource_createVariant","variant","findResourceWith","resource_setValue","findResourceVariantOverModesWith","resource_setModes","modes","actions","resource_createWith","dispatch","props","resource_setOrCreateValueModeSpecific","commit","resource_setValueModeSpecific","findResourceVariantOverModesOn","keysForComparison","filterWithComparatorKeys","v","JSON","stringify","findOrGenerateStubbedVariantOn","discoverContentTypesFor","TEXT","AUDIO","IMAGE","VIDEO","defaultModeMappings","IVR","SMS","USSD","OFFLINE","RICH_MESSAGING","contentTypeOverrides","resourceMode","contentType","proxy","args","global","apply","createProxy","arguments","filters","choice","methods","translation","webpackContext","webpackContextResolve","modules","Statuses","PENDING","UNINITIALIZED","SUCCESS","FAILURE","namespaced","flights","create","promise","cancellation","Vue","status","progress","error","cancel","lodash","invoke","previousFlight","flight","uniqueId","response","createCancellableXhr","config","CancelToken","source","token","axios","request","paramsSerializer","p","qs","arrayFormat","cancelToken","onUploadProgress","onDownloadProgress","headers","resetStatus","cancelAll","hasPendingFlight","f","every","_every","convert","cap","validationResults","bootstrapLegacyGlobalDependencies","audio","__AUDIO__","__TREES_UI__","library","recording","recorders","defaultsDeep","callCenterQueues","previousTreeJson","originalTreeJson","originalValidationResults","originalTreeJsonValidationResults","selectedBlock","designerWorkspaceHeight","currentZoom","batchMatchAudio","results","isFailure","isPending","isComplete","treeUpdateConflict","enabledFeatures","isFeatureCallCenterQueuesEnabled","feature","isFeatureCallToRecordEnabled","isFeatureMultimediaUploadEnabled","isFeatureTreesBatchLinkAudioEnabled","isFeatureAddSubscriberPropertyFieldEnabled","isFeatureFloipPushEnabled","isFeatureTreeSaveEnabled","isFeatureTreeSendEnabled","isFeatureTreeDuplicateEnabled","isFeatureTreeViewVersionsEnabled","isFeatureTreeDuplicateOfEnabled","isFeatureUpdateInteractionTotalsEnabled","isFeatureAudioUploadEnabled","isFeatureViewResultsEnabled","rootState","subscriberPropertyFields","interactiveBlockClasses","pickBy","is_interactive","interactiveBlocksInTree","b","includes","hasChanges","hasIssues","validationResultsFromPageLoad","hasSavedSinceLoad","isEmpty","isTreeSaving","saveCurrentlyInProgress","isSelectedBlockSupportedForSummary","canSelectedBlockSetSubscriberProperty","languageSelectors","isBlockAvailableByBlockClass","mapValues","blockClass","contentTypesToEnabledStatus","isEnabled","startCase","isTreeValid","jsonValidationResults","treeTitle","availableAudio","treeCreatedAt","createdAt","date","treeEditedAt","editedAt","treeUpdatedAt","updatedAt","setWorkingTree","treeData","setDesignerWorkspaceHeight","height","setSelectedBlock","deselectBlocks","updateTreeDetailsWith","updateBlockCustomDataFor","updateBlockCustomDataWithNestedKeyFor","nestedKey","cloneDeep","updateBlockUiDataFor","updateMaxNumericDigits","updateBlockContentFor","langId","updateBlockFileContentFor","fileUrl","fileId","fileType","mimeType","undefined","updateBlockFileContentForAllLanguages","initBlockAutoGenStateFor","updateBlockAutoGenStateFor","enable","indexOf","absent","updateAudioFileFor","updateReviewedStateFor","data","setBatchMatchAudioResultsTo","matchesByLang","flatten","updateIsEditable","setContentTypeEnabled","upperFirst","addSubscriberPropertyField","setTreeUpdateConflictStatus","setInteractionTotals","interactionTotals","initializeTreeModel","isTreeImport","require","initializeTreeModelFromOriginalTreeJson","initializeTreeModelFromImport","importTreeJson","validation","attemptImportPersistence","hasImportValidationErrors","upgradeTreeModel","discoverTallestBlockForDesignerWorkspaceHeight","buffer","aboveTallest","initialHeight","minHeight","Math","max","uiChanged","context","msg","attemptSaveTree","info","dataControl","_setValidationResultsForUI","saveTree","send","validateTree","__TREE_FEATURES__","validateFloipFlow","setDefaultBlockRepeatValues","updateTextContent","disableAutoGen","setContentFromQuestionText","isFirst","maxDigits","generatedText","grammar","EN","starter","connector","separator","conclusion","numericStart","numericEndPlural","numericEndSingular","validationCode","setBlockNumConnections","newNumConnections","isFinite","lockConnections","range","setMcqOutputNames","isOutputBranchingEnabled","langJs","isNoResponseExitEnabled","setMcqSidebarFieldLabels","isMCQBlock","fieldLabels","isVoiceEnabled","isTextChannelEnabled","hasChoiceKeypresses","choiceKeypresses","getChoiceKeyPressesFor","times","constant","batchMatchAudioTriggered","treeId","pattern","replaceExisting","post","routeFrom","routes","matches","catch","status_description","commitAllBatchMatchAudioFiles","byLang","commitBatchMatchAudioFile","audioFile","hasSelection","isMulti","match","unchanged","dataType","c","payload","fetchInteractionTotals","startDate","endDate","url","params","keypresses","block_popFirstExitWithoutTest","blockId","exits","block_popExitsByLabel","exitLabel","item","block_setName","block_setLabel","block_setSemanticLabel","semanticLabel","block_setExitTest","exitId","exit","test","block_pushNewExit","newExit","block_updateConfig","newConfig","block_updateConfigByKey","currentConfig","block_setBlockExitDestinationBlockId","destinationBlockId","destinationBlock","block_createBlockDefaultExitWith","block_createBlockExitWith","generate","tag","block_updateBlockExitWith","block_swapBlockExitDestinationBlockIds","first","second","firstBlock","secondBlock","firstDestinationBlockId","secondDestinationBlockId","activeFlow","flows","hasTextMode","some","hasVoiceMode","flow_addBlock","firstFlowId","firstBlockId","flow_removeBlock","exitBlockId","exitsTowardUs","activeBlockId","flow_setExitBlockId","flow_setFirstBlockId","flow_addBlankFlow","IdGeneratorUuidV4","flow_add","flow_addBlankBlockByType","root","flow_addBlankResource","flow_addBlankResourceForEnabledModesAndLangs","modeOverrides","memo","blankResource","flow_createWith","orgId","lastModified","format","platformMetadata","DEFAULT_MODES","stateFactory","nestedFlowBlockInteractionIdStack","store","__APP__","__CONTEXT__","merge","ImportedLang","setMessages","setLocale","locale","defaultLocale","moment","ImportedMoment","getLocale","jQuery","ImportedJquery","exported","fn","datetimepicker","OperationKind","operations","CONNECTION_SOURCE_RELOCATE","kind","CONNECTION_CREATE","BLOCK_RELOCATE","activeBlock","blocksById","rootGetters","nodeLabelsById","exitLabelsById","activateBlock","setOperation","operation","setBlockPositionTo","position","x","y","platform_metadata","io_viamo","xPosition","yPosition","removeConnectionFrom","initializeConnectionSourceRelocateWith","from","to","setConnectionSourceRelocateValue","setConnectionSourceRelocateValueToNullFrom","applyConnectionSourceRelocate","initializeConnectionCreateWith","setConnectionCreateTargetBlock","setConnectionCreateTargetBlockToNullFrom","applyConnectionCreate","importFlowsAndResources","flowState","defaultSupportedMode","hasOwnProperty","Number","MAX_SAFE_INTEGER","loadFlow","flowContext","createDefaultBlockTypeInstallerFor","blockType","storeForBlockType","hasModule","registerModule","generateConnectionLayoutKeyFor","allItemsHaveValue","list","someItemsHaveValue","twoItemsBlank","blankNumber","popFirstEmptyItem","exitToRemove","_e","_obj","class","active","isBlockActivated","onMoved","selectBlock","isConnectionCreateActive","activateBlockAsDropZone","deactivateBlockAsDropZone","isConnectionSourceRelocateActive","isExitActivatedForRelocate","activateExitAsDropZone","deactivateExitAsDropZone","handleDraggableInitializedFor","onCreateExitDragStarted","onCreateExitDragged","onCreateExitDragEnded","isExitActivatedForCreate","livePosition","category","onMoveExitDragStarted","onMoveExitDragged","onMoveExitDragEnded","repositionHook","Block","computed","mounted","changes","saveTimer","removeClassPrefix","blockClassName","substr","textNotification","noChange","changeLock","search","outputData","treeUpdatedConflict","audioChoice","setTopUpdatesBar","requestData","done","modal","show","backdrop","validation_results","fail","tree_id","responseJSON","always","finally","exportOptionsModal","initialize","exportOptionsTemplate","template","JST","append","handleInput","focus","select","pickTime","currentTarget","trigger","open","hide","buildUrl","isApiUrl","location","protocol","host","serialize","apiKey","shareableLinkModal","shareableLinkTemplate","sendRequest","switchView","publicId","setUrl","view","requestType","errorMessage","shareableLinkSetsModal","defaultLocales","orgEnabledLanguages","is","prop","initializeLinksList","shareableLinkListTemplate","switchToDeleteView","shareableLinkHash","switchAwayFromDeleteView","shareableLinkId","listElement","hasClass","addClass","children","removeClass","setLabelValues","startDateLabel","endDateLabel","channelLabel","labels","channel","blocksLabel","versionFiltersEnabled","noValidDateRange","text","versionsSelected","versionsTotal","public_hash","channelFilter","includedBlocks","excludedBlocks","blockKeys","hiddenDirectorySelectionFields","lockDateRange","resultsLocale","showKeyMetrics","showBlockType","shouldShowResultsFromIncompleteEngagements","shouldOnlyShowLatestResultPerSession","shouldUseSimpleDatePicker","shouldUseCustomBlockOrdering","enabledTabs","el","tagFilter","directorySelectionFieldFilter","blockChoiceFilter","filterDisplayThreshold","toArray","versions","tree_version_set_id","shareableLinks","unshift","csvExportsModal","csvExportTemplate","sendCreateRequest","setToDefault","recipeHumanReadable","recipeMachineReadable","recipeUserCustomised","getUserOptionsRecipe","fhd","fcc","vcq","vms","click","eq","queueInProgress","sendStatusRequest","ajax","success","csvExports","order","formatHeadings","cellContents","messageBlockPercent","formatMCQResponses","treeVersionIds","mergeOption","useLocalTimezone","useExcelFormat","treeVersionSetId","thenAfter5s","add","delay","duration","diff","delayInMilliseconds","asMilliseconds","firstExportInProgress","upload_status","isFunction","sendStatusRequestDebounced","debounce","blockResultsLoader","load","nextBlockKeyToLoad","loadBlock","assignButtons","parentElement","targetType","continueLoading","shareableLink","pathname","htmlOutput","chartJsHelper","createCharts","blockResultsLoaderV2","loadKeyMetrics","filterSet","viamo","keymetrics","loadDonutChart","finishedDeliveryLogCount","deliveryLogCount","completedDeliveryLogCount","uniqueSubscriberCount","firstTimeSubscriberCount","completedQuestionCount","loadAvgCallDurations","parse","responseText","keymetricName","chartNumerator","chartTotal","chartDenominator","chartDataSets","datasets","backgroundColor","hoverBackgroundColor","borderColor","updateTreeDoughnutChart","formatLargeNumber","parent","durations","durationAvg","toPrecision","completedDurationAvg","css","loadBlocksInteractionsChart","barchartLabelsTruncated","barchartLabels","totalInteractionsBarchartData","completedInteractionsBarchartData","orderedCompletedInteractionsBarchartData","totalInteractionsOrderedBarchartData","colorIndexes","orderedColorIndexes","orderedBarchartLabelsTruncated","orderedBarchartLabels","resultsData","blockResult","truncatedBlockTitle","resultIndex","colorIndex","totalInteractions","completedInteractions","colorValue","blockTitle","substring","getChartChoiceColorsArray","acc","outputKeyTotals","sortedIndex","updateTreeBlocksInteractionsChart","fullLabels","borderWidth","hidden","$buttonClicked","barchartTarget","siblings","barchartDatasetTarget","listingChart","chartObjects","popularityChart","listingDatasets","popularityDatasets","isEnteredSelected","isCompletedSelected","update","tabTarget","tabLabel","closest","targetElement","chartTarget","doNormalize","combinedVersions","rightPosition","width","right","toggle","stopPropagation","remove","input","submit","PATH_PARAM_DISCOVERER","routeKey","interpolateRouteWith","mapState","route","raiseFor","path","isPathComplete","replace","m","captured","isOptional","param","trim","nativeOn","handleCanvasSelected","composing","isImporterVisible","toggleImportExport","treeViewUrl","resourceViewUrl","handleResourceViewerSelected","viewResultsUrl","editOrViewTreeJsUrl","duplicateTreeLink","classDetails","className","shouldDisplayDividerBefore","rootBlockClassesToDisplay","preventDefault","handleAddBlockByTypeSelected","translateTreeClassName","rootDropdownClassesToDisplay","advancedDropdownClassesToDisplay","handleRemoveActivatedBlockTriggered","saveButtonText","can","publishVersionUrl","sendOutgoingCallUrl","userPermissions","permissionOrPermissions","requireAll","requestedPermission","permission","permissions","EXCLUDED_DATA_HIERARCHIES_BY_KEY","convertKeysCase","caseType","exclusions","currentKey","Permissions","Routes","isResourceEditorEnabled","editTreeUrl","editTreeRoute","viewResultsSetUrl","treeSetId","downloadAudioUrl","hasClassDetail","canViewResultsTotals","removeNilValues","attribute","isNil","shouldShowDividerBeforeBlock","$el","scrollIntoView","obj","identity"],"mappings":"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","file":"flow-builder.umd.min.chunk-builder.js","sourcesContent":["var map = {\n\t\"./ConsoleIO_PrintBlock.vue\": [\n\t\t\"d81e\",\n\t\t1,\n\t\t0,\n\t\t12\n\t],\n\t\"./ConsoleIO_ReadBlock.vue\": [\n\t\t\"b6b9\",\n\t\t1,\n\t\t0,\n\t\t13\n\t],\n\t\"./Core_CaseBlock.vue\": [\n\t\t\"cf2c\",\n\t\t6\n\t],\n\t\"./Core_LogBlock.vue\": [\n\t\t\"41bd\",\n\t\t1,\n\t\t0,\n\t\t14\n\t],\n\t\"./Core_OutputBlock.vue\": [\n\t\t\"5dcb\",\n\t\t7\n\t],\n\t\"./Core_RunFlowBlock.vue\": [\n\t\t\"cab8\",\n\t\t8\n\t],\n\t\"./MobilePrimitives_MessageBlock.vue\": [\n\t\t\"c600\",\n\t\t1,\n\t\t0,\n\t\t15\n\t],\n\t\"./MobilePrimitives_NumericResponseBlock.vue\": [\n\t\t\"2d61\",\n\t\t1,\n\t\t0,\n\t\t16\n\t],\n\t\"./MobilePrimitives_OpenResponseBlock.vue\": [\n\t\t\"64bb\",\n\t\t1,\n\t\t0,\n\t\t17\n\t],\n\t\"./MobilePrimitives_SelectManyResponseBlock.vue\": [\n\t\t\"03d5\",\n\t\t1,\n\t\t0,\n\t\t10\n\t],\n\t\"./MobilePrimitives_SelectOneResponseBlock.vue\": [\n\t\t\"5c47\",\n\t\t1,\n\t\t0,\n\t\t11\n\t],\n\t\"./SmartDevices_LocationResponseBlock.vue\": [\n\t\t\"59c3\",\n\t\t1,\n\t\t0,\n\t\t18\n\t],\n\t\"./SmartDevices_PhotoResponseBlock.vue\": [\n\t\t\"2b44\",\n\t\t9\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = \"0e11\";\nmodule.exports = webpackAsyncContext;","// Backbone Model for Trees\n\n// Much thanks to\n// http://todomvc.com/architecture-examples/backbone/\n\n// Also helpful\n// http://adrianmejia.com/blog/2012/09/11/backbone-dot-js-for-absolute-beginners-getting-started/\n\n// For commentary!\n// http://www.reddit.com/r/javascript/comments/1npiet/backbonejs_is_opinionated_or_why_is_using_nested/\n\n// For relational links\n// http://backbonerelational.org/\n// (not used)\n\n// And for nested Backbone models! (in use!)\n// https://github.com/afeld/backbone-nested\n\n/*global Backbone */\nwindow.app = window.app || {};\n\n;(function() {\n\n\t// Tree Model\n\t// ----------\n\n\tapp.Tree = function (attrs) {\n\t\tthis.attributes = attrs;\n\t};\n\n\tapp.Tree.prototype = {\n\t\tget(attr) {\n\t\t\treturn this.attributes[attr]\n\t\t},\n\n\t\ttoJSON(options) {\n\t\t\treturn _.clone(this.attributes)\n\t\t},\n\n\t\t// Default attributes for the todo\n\t\t// and ensure that each todo created has `title` and `completed` keys.\n\t\tdefaults: {\n\t\t\tid: 0,\n\t\t\tfloipSyncedAt: '',\n\t\t\tdetails: {\n\t\t\t\ttitle: '',\n\t\t\t\tdescription: '',\n\t\t\t\tenabledLanguages: [],\n        syncedLanguage: '',\n\t\t\t\tstartingBlockKey: '',\n        exitBlockKey: '',\n\t\t\t\thasVoice: 0,\n\t\t\t\thasSms: 0,\n\t\t\t\thasUssd: 0,\n\t\t\t\thasSocial: 0,\n\t\t\t\thasClipboard: 0,\n\t\t\t\tfloipPushUrl: '',\n\t\t\t\tfloipPushApiKey: '',\n\t\t\t},\n\t\t\tblocks: [],\n\t\t\tconnections: []\n\t\t},\n\n\t\t_defaultReviewedState: {},\n\n    upgrade: function () {\n      // todo: port this to use something like `lodash.defaultsDeep()`\n      console.debug('Tree upgrade: started');\n      console.time('Tree upgrade');\n\n      // Temporary fix for blocks that have [] arrays instead of {} objects\n      // Likely caused by browser quirks (possibly old versions of IE)\n      // Added 2016-08-08 (Sean)\n      this.fixArrayBlocks()\n\n      this.defaultEnabledLanguages();\n      this.defaultSyncedLanguage();\n      // auto-inflate reviewed dictionaries based upon enabled languages\n      this.inflateDefaultReviewedStateOnAll();\n      this.inflateDefaultTagsOnAll();\n      this.inflateDefaultLabelOnAll();\n      this.upgradeLanguageSelectorBlocks();\n      this.inflateDefaultSocialContentOnAll();\n      this.inflateDefaultClipboardContentOnAll();\n      this.upgradeSubscriberPropertyFieldSelections();\n      this.upgradeMsmcqBranchingToFalse();\n      this.upgradeSubscriberPropertyBlocks();\n      this.upgradeSubscriberBranchBlocks();\n\n      console.timeEnd('Tree upgrade');\n    },\n\n\t\tcacheDefaultReviewedState: function () {\n\t\t\tvar enabledLanguages = this.getEnabledLanguages();\n\t\t\tthis._defaultReviewedState = _.zipObject(\n\t\t\t\t\tenabledLanguages,\n\t\t\t\t\t_.fill(new Array(enabledLanguages.length), false));\n\t\t},\n\n    defaultEnabledLanguages: function () {\n      var details = this.get('details')\n      details.enabledLanguages = details.enabledLanguages || []\n    },\n\n    defaultSyncedLanguage: function () {\n      var details = this.get('details')\n      details.syncedLanguage = details.syncedLanguage || ''\n    },\n\n\t\tinflateDefaultReviewedStateOnAll: function () {\n\t\t\tthis.cacheDefaultReviewedState();\n\t\t\tthis.get('blocks').forEach(this.inflateDefaultReviewedStateOnto.bind(this));\n\t\t},\n\n\t\tinflateDefaultReviewedStateOnto: function (block) {\n\t\t\tblock.customData.reviewed = block.customData.reviewed || block.customData.approved || {};\n\t\t\tdelete block.customData.approved; // todo: remove these two references to `approved` once deployed\n\t\t\t_.defaults(block.customData.reviewed, this._defaultReviewedState);\n\t\t},\n\n\t\tinflateDefaultTagsOnAll: function () {\n\t\t\tthis.get('blocks').forEach(function (block) {\n\t\t\t\t!block.customData.tags && (block.customData.tags = []);\n\t\t\t});\n\t\t},\n\n\t\tinflateDefaultLabelOnAll: function () {\n\t\t\tthis.get('blocks').forEach(function (block) {\n\t\t\t\t!block.customData.label && (block.customData.label = '');\n\t\t\t});\n\t\t},\n\n\t\tupgradeLanguageSelectorBlocks: function () {\n\t\t\tthis.get('blocks')\n\t\t\t\t\t.filter(function (block) {\n\t\t\t\t\t\treturn block.type === \"LanguageSelectorBlock\";\n\t\t\t\t\t})\n\t\t\t\t\t.forEach(function (languageSelectorBlock) {\n\t\t\t\t\t\tif (!languageSelectorBlock.customData.addExitForNoResponse) {\n\t\t\t\t\t\t\tlanguageSelectorBlock.customData.addExitForNoResponse = 0\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t},\n\n\t\tinflateDefaultSocialContentOnAll: function () {\n\t\t\tthis.get('blocks').forEach(function (block) {\n\t\t\t\t!block.socialContent && (block.socialContent = {})\n\t\t\t})\n\t\t},\n\n\t\tinflateDefaultClipboardContentOnAll: function () {\n\t\t\tthis.get('blocks').forEach(function (block) {\n\t\t\t\t!block.clipboardContent && (block.clipboardContent = {})\n\t\t\t})\n\t\t},\n\n\t\tupgradeSubscriberPropertyFieldSelections: function () {\n\t\t\tthis.get('blocks').forEach(function (block) {\n\t\t\t\tif (!block.customData.propertyFieldId) {\n\t\t\t\t\tvar property = app.ui.findSubscriberPropertyField({display_label: block.customData.customDataCategory})\n\t\t\t\t\tblock.customData.propertyFieldId = _.get(property, 'id', null)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n    upgradeMsmcqBranchingToFalse: function () {\n      this.get('blocks')\n          .filter(function (block) {return block.type === \"MultipleSelectMultipleChoiceQuestionBlock\"})\n          .filter(function (block) {return block.customData.branching === 1})\n          .forEach(function (block) {\n            var customData = block.customData;\n            var uiData = block.uiData;\n\n            customData.branching = false\n            customData.numChoices = 1\n            uiData.numChoices = 1\n            uiData.numConnections = 1\n            uiData.outputNames = [1]\n            if (customData.addExitForNoResponse) {\n              uiData.outputNames.push('trees.output-exit')\n            }\n          })\n    },\n\n\t\t/**\n\t\t * For existing blocks that have their action set to startDate, set the action to customData instead,\n\t\t * preserving all settings that calculate the date, and attempting to pre-select the \"start_date\" property for the\n\t\t * user.\n\t\t *\n\t\t * This is because we are removing the startDate action and rather switching to using subscriber properties\n\t\t */\n\t\tupgradeSubscriberPropertyBlocks: function () {\n\t\t\tthis.get('blocks')\n\t\t\t\t.filter(function (block) {return block.type === \"SubscriberPropertyBlock\"})\n\t\t\t\t.filter(function (block) {return block.customData.action === 'startDate'})\n\t\t\t\t.forEach(function (block) {\n\t\t\t\t\tvar customData = block.customData\n\t\t\t\t\tcustomData.action = 'customData'\n\t\t\t\t\tcustomData.propertyDateMethod = customData.startDateMethod\n\t\t\t\t\tcustomData.propertyDateAbsoluteDate = customData.startDateAbsoluteDate\n\t\t\t\t\tcustomData.propertyDateRelativeNumber = customData.startDateRelativeNumber\n\t\t\t\t\tcustomData.propertyDateTimespanType = customData.startDateTimespanType\n\t\t\t\t\tcustomData.propertyDateNumericBlockKey = customData.startDateNumericBlockKey\n\t\t\t\t\tvar propertyField = app.ui.findSubscriberPropertyField({name: 'start_date'})\n\t\t\t\t\tif (propertyField) {\n\t\t\t\t\t\tcustomData.propertyFieldId = propertyField.id\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcustomData.propertyFieldId = null\n\t\t\t\t\t}\n\t\t\t\t\tcustomData.upgradedFromStartDate = true\n\t\t\t\t})\n\t\t},\n\n\t\t/**\n\t\t * For existing blocks that have their criteria set to startDate, set the criteria to customData instead,\n\t\t * preserving all settings, and attempting to pre-select the \"start_date\" property for the\n\t\t * user.\n\t\t *\n\t\t * This is because we are removing the startDate action and rather switching to using subscriber properties\n\t\t */\n\t\tupgradeSubscriberBranchBlocks: function () {\n\t\t\tthis.get('blocks')\n\t\t\t\t\t.filter(function (block) {return block.type === 'SubscriberBranchBlock'})\n\t\t\t\t\t.filter(function (block) {return  block.customData.action === 'startDate'})\n\t\t\t\t\t.forEach(function (block) {\n\t\t\t\t\t\tbuilder.$set(block.customData, 'action', 'customData')\n\t\t\t\t\t\tbuilder.$set(block.customData, 'customDataMethod', block.customData.startDateMethod)\n\t\t\t\t\t\tbuilder.$set(block.customData, 'customDataValue', block.customData.startDateReference)\n\n\t\t\t\t\t\tvar propertyField = app.ui.findSubscriberPropertyField({name: 'start_date'})\n\n\t\t\t\t\t\t// $set won't work on something that is already a property\n\t\t\t\t\t\t// make sure it does not exist on the object before $set-ing it\n\t\t\t\t\t\tdelete block.customData.propertyFieldId\n\n\t\t\t\t\t\tif (propertyField) {\n\t\t\t\t\t\t\tbuilder.$set(block.customData, 'propertyFieldId', propertyField.id)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tbuilder.$set(block.customData, 'propertyFieldId', null)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbuilder.$set(block.customData, 'upgradedFromStartDate', true)\n\t\t\t\t\t})\n\t\t},\n\n    // This function loops through all of the blocks in a tree, and checks for blocks that have empty subkeys (eg. customData) that are in [] array format rather than {} object format.\n    // The array issue causes other crashes later, when trying to retrieve or update data. So far, the issue comes up sporadically which seems to indicate that it's a browser quirk (possibly with older versions of IE).\n    // This issue fixes the empty arrays (by replacing them with empty objects) when the function is called, and we've added it to trees-views' initializeAll() function to call it on initial page load.\n    // For trees without the issue, it marginally increases the load on the browser when the tree is first loaded, but otherwise causes no other changes.\n\t\t/** @moved from 12-trees-helpers.js */\n    fixArrayBlocks: function () {\n      var neededFixing = 0;\n      var fixedCount = 0;\n\n      _.each(this.get('blocks'), function (block, index) {\n        var arrayKeys = [\n          'customData',\n          'uiData',\n          'audioFiles',\n          'smsContent',\n          'ussdContent',\n          'socialContent',\n          'clipboardContent',];\n\n        _.each(arrayKeys, function (key) {\n          if (_.isArray(block[key])) {\n            neededFixing = 1;\n            fixedCount++;\n\n            // Repair the array by changing it to object syntax:\n            block[key] = {};\n\n            console.log('Fixing ' + block.type + '[' + index + '] ' + key);\n          }\n        });\n      });\n\n      if (neededFixing == 1) {\n        console.log('Fixed ' + fixedCount + ' blocks.');\n        app.ui.change('Array issue blocks fixed.');\n      }\n      // else {\n      // \tconsole.log('All blocks loaded without array issues.');\n      // }\n    },\n\n\t\t// Block-related functions\n\t\tdoesBlockLabelExist: function (label, comparatorKey) {\n\t\t\tif (!label) {return}\n\n\t\t\treturn !!_(this.get('blocks')).chain()\n\t\t\t\t\t.find(function (block) {\n\t\t\t\t\t\treturn block.jsKey !== comparatorKey && block.customData.label === label\n\t\t\t\t\t})\n\t\t\t\t\t.value()\n\t\t},\n\n\t\taddBlock: function(blockData) {\n\t\t\t// This doesn't seem to persist across deletes\n\t\t\t// Will make new, non-unique IDs.\n\t\t\t// blockData.jsKey = _.uniqueId('block_');\n\t\t\tblockData.jsKey = this.makeUniqueId('block_');\n\n\t\t\tthis.inflateDefaultReviewedStateOnto(blockData);\n\n\t\t\tthis.get('blocks').push(blockData);\n\n\t\t\tif (this.get('blocks').length == 1) {\n\t\t\t\t// Only one block, eg. the first one,\n\t\t\t\t// so set the tree's Starting Block ID to this\n\t\t\t\tthis.setStartingBlock(blockData.jsKey);\n\t\t\t}\n\n\t\t\t// Return the new key\n\t\t\treturn this.get('blocks').length - 1;\n\t\t},\n\n\t\tgetBlockByNumericIndex: function(blockKey) {\n\t\t\tvar blocks = this.get('blocks');\n\t\t\tif (blocks[blockKey]) {\n\t\t\t\treturn blocks[blockKey];\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t},\n\n\t\t// app.tree.editBlock(0, {type:'newType'})\n\t\teditBlockByNumericIndex: function(blockNumericIndex, blockData, arrayKey) {\n\t\t\tvar blocks = this.get('blocks');\n\t\t\tvar blockArrayKey;\n\t\t\t// Update that particular block in the array with new data.\n\t\t\tif (blocks[blockNumericIndex]) {\n\n\t\t\t\t// Can provide an array key value (eg. smsContent) to just update that array\n\t\t\t\tif (typeof arrayKey !== 'undefined') {\n\t\t\t\t\tblocks[blockNumericIndex][arrayKey] = blockData;\n\t\t\t\t}\n\n\t\t\t\telse {\n\t\t\t\t\t// Persist existing data (eg. jsKey and other unchanged arrays)\n\t\t\t\t\tblockData = _.extend(blocks[blockNumericIndex], blockData);\n\t\t\t\t\tblocks[blockNumericIndex] = blockData;\n\t\t\t\t}\n\n\n\n\t\t\t\tthis.set('blocks', blocks);\n\n\t\t\t\t// Return that block data just for fun\n\t\t\t\treturn blocks[blockNumericIndex];\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\n\t\tgetBlock: function(blockKey) {\n\t\t\t// Passes back the block *by reference* which allows for direct editing.\n\t\t\treturn _.findWhere(this.get('blocks'), {jsKey: blockKey});\n\t\t},\n\n\t\teditBlock: function(blockKey, blockData, arrayKey) {\n\n\t\t\tvar thisBlock = this.getBlock(blockKey);\n\t\t\t// thisBlock is returned by reference, so can be edited directly (i think)\n\n\t\t\tif (thisBlock) {\n\n\t\t\t\t// Can provide an array key value (eg. smsContent) to just update that array\n\t\t\t\tif (typeof arrayKey !== 'undefined') {\n\t\t\t\t\tthisBlock[arrayKey] = blockData;\n\t\t\t\t}\n\n\t\t\t\telse {\n\t\t\t\t\t// Persist existing data (eg. jsKey and other unchanged arrays)\n\t\t\t\t\tthisBlock = _.extend(thisBlock, blockData);\n\t\t\t\t\t// blocks[blockNumericIndex] = blockData;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t},\n\n\t\tsetBlockPosition: function(blockKey, positionData) {\n\t\t\tvar thisBlock = this.getBlock(blockKey);\n\n\t\t\tif (thisBlock) {\n\n\t\t\t\tthisBlock['uiData']['xPosition'] = positionData[0];\n\t\t\t\tthisBlock['uiData']['yPosition'] = positionData[1];\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\n\t\tgetBlockPosition: function(blockKey) {\n\t\t\tvar thisBlock = this.getBlock(blockKey);\n\n\t\t\tvar positionData = [];\n\n\t\t\tif (thisBlock) {\n\n\t\t\t\tpositionData[0] = thisBlock['uiData']['xPosition'];\n\t\t\t\tpositionData[1] = thisBlock['uiData']['yPosition'];\n\n\t\t\t\treturn positionData;\n\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\n\t\tgetBlockNumConnections: function(blockKey) {\n\t\t\tvar thisBlock = this.getBlock(blockKey);\n\n\t\t\treturn thisBlock['uiData']['numConnections'];\n\t\t},\n\n\t\tfilterBlockConnectionsAboveMax: function(blockKey) {\n\n\t\t\tvar thisBlock = this.getBlock(blockKey);\n\t\t\tvar connections = this.get('connections');\n\n\t\t\tvar maxConnections = thisBlock['uiData']['numConnections'];\n\n\t\t\t_.each(_.where(connections, {startBlockKey: blockKey}), function(e) {\n\n\t\t\t\tvar nodeNumber = e.outputKey.slice(-1);\n\n\t\t\t\tif (nodeNumber > maxConnections) {\n\t\t\t\t\tapp.tree.removeConnection(blockKey, e.outputKey);\n\t\t\t\t}\n\n\t\t\t});\n\n\n\t\t},\n\n\t\tsetBlockAudioFile: function(blockKey, languageId, audioData) {\n\t\t\tvar thisBlock = this.getBlock(blockKey);\n\n\t\t\t// audioData = {\n\t\t\t// \tid: 75,\n\t\t\t// \tfilename: '536105d15bbd94.30453403',\n\t\t\t// \tdescription: 'Uploaded file: survey-c.wav',\n\t\t\t// \tduration_seconds: 2.12,\n\t\t\t// \tcreated_at: '2013-04-12 16:32'\n\t\t\t// };\n\n\t\t\t// console.log('blockKey', blockKey);\n\t\t\t// console.log('languageId', languageId);\n\t\t\t// console.log('audioData', audioData);\n\n\t\t\tif (thisBlock) {\n\n\t\t\t\t// Special handling for any mystery cases\n\t\t\t\t// where the audioFiles object becomes an array\n\t\t\t\t// which could lead to really giant amounts of null values\n\t\t\t\tif (_.isPlainObject(thisBlock['audioFiles']) === false) {\n\t\t\t\t\tconsole.log('Alert - special handling for audioFiles as array taking place');\n\t\t\t\t\tthisBlock['audioFiles'] = {};\n\t\t\t\t}\n\n\t\t\t\tthisBlock['audioFiles'][languageId] = audioData;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\n\t\tremoveBlockAudioFile: function(blockKey, languageId) {\n\n\t\t\tvar thisBlock = this.getBlock(blockKey);\n\n\t\t\t// Works by reference.\n\t\t\tdelete thisBlock['audioFiles'][languageId];\n\n\t\t},\n\n\t\t// Existing block keys\n\t\tgetBlockKeys: function() {\n\t\t\treturn _.keys(app.tree.get('blocks'));\n\n\t\t},\n\n\t\t// Get next index\n\t\t// This isn't really useful since we aren't tracking by array key anymore.\n\t\tgetNextBlockKey: function() {\n\t\t\tvar lastKey = parseInt(_.last(app.tree.getBlockKeys()), 10);\n\t\t\treturn lastKey + 1;\n\n\t\t},\n\n\n\t\tdeleteBlock: function(blockKey) {\n\n\t\t\tvar blocks;\n\t\t\tblocks = this.get('blocks');\n\t\t\tblocks = _.without(blocks, _.findWhere(blocks, {jsKey: blockKey}));\n\n\t\t\tthis.set('blocks', blocks);\n\n\t\t\t// If the indicated block was also the tree's starting block,\n\t\t\t// Set it to blank.\n\t\t\tthis.clearStartingBlockIfIs(blockKey);\n      this.clearExitBlockIfIs(blockKey);\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\thandleDeleteNumericQuestionBlockAssociations: function(selectedBlockKey) {\n\t\t\t\tthis.set({\n\t\t\t\t\tblocks: this.get('blocks').map(function(block) {\n\t\t\t\t\t\tvar newBlock = block;\n\t\t\t\t\t\tif(block['type'] == 'NumericBranchBlock') {\n\t\t\t\t\t\t\tnewBlock = Object.assign({}, block, {customData: this._getAmendmentsForNumericBranchBlock(block['customData'], selectedBlockKey)});\n\t\t\t\t\t\t} else if(block['type'] == 'IdValidationBlock') {\n\t\t\t\t\t\t\tnewBlock = Object.assign({}, block, {customData: this._getAmendmentsForIdValidationBlock(block['customData'], selectedBlockKey)});\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn newBlock;\n\t\t\t\t\t}.bind(this)\n\t\t\t\t)});\n\t\t},\n\t\t//works but must save twice to trigger validation and disable send\n\t\t_getAmendmentsForNumericBranchBlock: function(customData, selectedBlockKey) {\n\t\t\treturn Object.assign({}, customData, {\n\t\t\t\toutputs: _.reduce(customData['outputs'], function(newOutputs, output) {\n\t\t\t\t\tvar newConditions = _.reduce(output['conditions'], function(newConditions, condition) {\n\t\t\t\t\t\tvar newCondition = Object.assign({}, condition);\n\t\t\t\t\t\tif(condition['jsKey'] == selectedBlockKey) {\n\t\t\t\t\t\t\tnewCondition['jsKey'] = '';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnewConditions.push(newCondition);\n\t\t\t\t\t\treturn newConditions;\n\t\t\t\t\t}.bind(this), []);\n\n\t\t\t\t\t//I think this will never be the case but just to be sure\n\t\t\t\t\tif(newConditions) {\n\t\t\t\t\t\tnewOutputs.push(Object.assign({}, output, {conditions: newConditions}));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn newOutputs;\n\t\t\t\t}.bind(this),\n\t\t\t\t[])\n\t\t\t});\n\t\t},\n\t\t_getAmendmentsForIdValidationBlock: function(customData, selectedBlockKey) {\n\n\t\t\tif(customData['numericQuestionBlockJsKey'] == selectedBlockKey) {\n\t\t\t\tcustomData = Object.assign({}, customData, {\n\t\t\t\t\t'numericQuestionBlockJsKey': ''\n\t\t\t\t})\n\t\t\t}\n\t\t\treturn customData;\n\t\t},\n\n\t\tmakeUniqueId: function(prefix) {\n\t\t\treturn prefix + _.now() + '_' + _.random(10, 99);\n\n\t\t},\n\n\t\tgetMcqChoiceName: function(blockKey, choiceId) {\n\n\t\t\tvar block = this.getBlock(blockKey);\n\t\t\tif (block && block.customData && block.customData.choices) {\n\t\t\t\treturn block.customData.choices[choiceId - 1];\n\t\t\t}\n\n\t\t},\n\n\t\tgetBlockTitle: function(blockKey) {\n\n\t\t\tvar block = this.getBlock(blockKey);\n\t\t\tif (block && block.customData && block.customData.title) {\n\t\t\t\treturn block.customData.title;\n\t\t\t}\n\n\t\t},\n\n\t\tgenerateBlockTitle: function(customData, type, limit) {\n\n\t\t\tvar output = '';\n\t\t\tif (_.isNumber(limit) == false) {\n\t\t\t\tlimit = 0;\n\t\t\t}\n\n\t\t\tif (type === 'RunTreeBlock') {\n\t\t\t\tif (_.get(customData, 'destinationTreeId')) {\n\t\t\t\t\toutput = _.get(app.ui.treeTitles, customData.destinationTreeId);\n\t\t\t\t}\n\t\t\t\telse if (_.get(customData, 'destinationTreeSetId')) {\n\t\t\t\t\toutput = Lang.trans('trees.most-recent-version-of') + ' ' + _.get(app.ui.treeSetTitles, customData.destinationTreeSetId);\n\t\t\t\t}\n\n\t\t\t}\n\t\t\telse if (type === 'GroupBranchBlock') {\n\t\t\t\tif (_.get(customData, 'groupId')) {\n\t\t\t\t\tif (_.parseInt(_.get(customData, 'in')) == 0) {\n\t\t\t\t\t\toutput = Lang.trans('trees.if-not-in') +' \"';\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\toutput = Lang.trans('trees.if-in')+' \"';\n\t\t\t\t\t}\n\t\t\t\t\toutput += _.get(app.ui.groupNames, customData.groupId) + '\"';\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (type === 'GroupSizeBranchBlock') {\n\t\t\t\tif (_.get(customData, 'groupId')) {\n\t\t\t\t\toutput = Lang.trans('trees.if')+' \"' + _.get(app.ui.groupNames, customData.groupId) + '\" '+ Lang.trans('trees.exceeds') + ' ' + _.get(customData, 'quotaThreshold', 100);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (type === 'SubscriberBranchBlock') {\n\t\t\t\t\tif (_.get(customData, 'action') == 'customData') {\n\t\t\t\t\t  var property = app.ui.findSubscriberPropertyField({id: _.get(customData, 'propertyFieldId')})\n\t\t\t\t\t\tvar displayLabel = _.get(property, 'display_label', '')\n\t\t\t\t\t\tvar comparator = _.get(customData, 'customDataMethod', 'Equal')\n\n\t\t\t\t\t\tvar comparatorString = ''\n\t\t\t\t\t\tif (comparator === 'NotEqual') {\n\t\t\t\t\t\t\tcomparatorString = Lang.trans('trees.not')\n\t\t\t\t\t\t} else if (comparator === 'LessThan') {\n\t\t\t\t\t\t\tcomparatorString = '<'\n\t\t\t\t\t\t} else if (comparator === 'GreaterThan') {\n\t\t\t\t\t\t\tcomparatorString = '>'\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\toutput = Lang.trans('trees.if-subscriber-custom-data') + ' \"' + displayLabel + '\" ' + Lang.trans('trees.is') + ' ' + comparatorString + ' \"' + _.get(customData, 'customDataValue', '') + '\"';\n\t\t\t\t\t}\n\t\t\t\t\telse if (_.get(customData, 'action') == 'language') {\n\t\t\t\t\t\tif (_.get(customData, 'languageValue') == '') {\n\t\t\t\t\t\t\toutput = Lang.trans('trees.if-subscriber-language-is-unknown')\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\toutput = Lang.trans('trees.if-subscriber-language-is')+ ' \"' + _.get(app.ui.languageNames, customData.languageValue) + '\"';\n\t\t\t\t\t        }\n\t\t\t\t\t}\n\t\t\t}\n\n\t\t\telse {\n\t\t\t\toutput = _.get(customData, 'title');\n\t\t\t}\n\n\t\t\tif (output && output.length > 0 && limit > 0) {\n\t\t\t\toutput = S(output).truncate(limit).s;\n\t\t\t}\n\t\t\treturn output;\n\t\t},\n\n\n\t\t// Connection-related functions\n\n\t\taddConnection: function(startBlockKey, outputKey, endBlockKey) {\n\n\t\t\tvar connections;\n\n\t\t\t// Need to remove any existing connections with the same startBlockKey and outputKey - since one output key on a block can only go to one other endBlock.\n\t\t\tthis.removeConnection(startBlockKey, outputKey);\n\n\t\t\t// Need to load this *after* the appropriate entries are removed first.\n\t\t\tconnections = this.get('connections');\n\n\t\t\t// If this works, it'll be so weird.\n\t\t\tvar connection = {\n\t\t\t\tstartBlockKey: startBlockKey,\n\t\t\t\toutputKey: outputKey,\n\t\t\t\tendBlockKey: endBlockKey\n\t\t\t};\n\n\t\t\tconnections.push(connection);\n\n\t\t\tthis.set('connections', connections);\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tremoveConnection: function(startBlockKey, outputKey) {\n\t\t\t// outputKey is optional\n\t\t\tvar connections = this.get('connections');\n\n\t\t\tif (startBlockKey && typeof outputKey !== 'undefined') {\n\n\t\t\t\t// Massive thanks to\n\t\t\t\t// http://stackoverflow.com/a/16994286\n\t\t\t\tconnections = _.without(connections, _.findWhere(connections, {startBlockKey: startBlockKey, outputKey: outputKey}));\n\n\t\t\t}\n\t\t\telse if (startBlockKey) {\n\n\t\t\t\t// Filter literally everything with that starting block key\n\t\t\t\tconnections = _.difference(connections, _.where(connections, {startBlockKey: startBlockKey}));\n\n\t\t\t}\n\n\n\n\t\t\tthis.set('connections', connections);\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\taddEnabledLanguage: function(languageKey) {\n\n\t\t\tvar enabledLanguages = app.tree.get('details')['enabledLanguages'];\n\n\t\t\tvar newEnabledLanguages = [];\n\n\t\t\tenabledLanguages.push(languageKey.toString());\n\n\t\t\t// Order according to the original app.ui.languages order\n\t\t\tnewEnabledLanguages = _.intersection(_.pluck(app.ui.languages, 'id'), app.tree.get('details')['enabledLanguages']);\n\n\t\t\tapp.tree.get('details').enabledLanguages = newEnabledLanguages;\n\n\t\t\tthis.inflateDefaultReviewedStateOnAll();\n\t\t},\n\n\t\tremoveEnabledLanguage: function(languageKey) {\n\n\t\t\tvar enabledLanguages = app.tree.get('details')['enabledLanguages'];\n\n\t\t\tlanguageKey = languageKey.toString();\n\n\t\t\t// This loses the pass-by-reference, so need to save it back to the model after.\n\t\t\tenabledLanguages = _.without(enabledLanguages, languageKey);\n\n      app.tree.get('details').enabledLanguages = enabledLanguages;\n\n\t\t\tthis.cacheDefaultReviewedState();\n\t\t},\n\n\t\tgetEnabledLanguages: function() {\n\t\t\treturn app.tree.get('details')['enabledLanguages'];\n\t\t},\n\n\t\tsetStartingBlock: function(startingBlockKey) {\n      app.tree.get('details').startingBlockKey = startingBlockKey;\n\t\t},\n\n\t\tclearStartingBlockIfIs: function(blockKey) {\n\t\t\tif (app.tree.get('details').startingBlockKey == blockKey) {\n        app.tree.get('details').startingBlockKey = '';\n\t\t\t}\n\n\t\t},\n\n    clearExitBlockIfIs: function(blockKey) {\n      if (app.tree.get('details').exitBlockKey == blockKey) {\n        app.tree.get('details').exitBlockKey = '';\n      }\n    },\n\n\n\n\t\tenableVoice: function() {\n\t\t\tapp.tree.get('details').hasVoice = 1;\n\t\t},\n\t\tdisableVoice: function() {\n      app.tree.get('details').hasVoice = 0;\n\t\t},\n\t\tenableSms: function() {\n      app.tree.get('details').hasSms = 1;\n\t\t},\n\t\tdisableSms: function() {\n      app.tree.get('details').hasSms = 0;\n\t\t},\n\t\tenableUssd: function() {\n      app.tree.get('details').hasUssd = 1;\n\t\t},\n\t\tdisableUssd: function() {\n      app.tree.get('details').hasUssd = 0;\n\t\t},\n\t\tenableSocial: function() {\n\t\t\tapp.tree.get('details').hasSocial = 1;\n\t\t},\n\t\tdisableSocial: function() {\n\t\t\tapp.tree.get('details').hasSocial = 0;\n\t\t},\n\t\tenableClipboard: function() {\n\t\t\tapp.tree.get('details').hasClipboard = 1;\n\t\t},\n\t\tdisableClipboard: function() {\n\t\t\tapp.tree.get('details').hasClipboard = 0;\n\t\t},\n\n\t\tvalidateLanguageAndContentTypes: function(tree, blocks) {\n\n\t\t\tvar missingLanguageIdsAudioFiles = [],\n\t\t\t\t\tmissingLanguageIdsSmsContent = [],\n\t\t\t\t\tmissingLanguageIdsUssdContent = [],\n\t\t\t\t\tmissingLanguageIdsSocialContent = [],\n\t\t\t\t\tmissingLanguageIdsClipboardContent = [],\n\t\t\t\t\tjsKey = {};\n\n\t\t\t_.forEach(blocks, function(block) {\n\n\t\t\t\tmissingLanguageIdsAudioFiles = [];\n\t\t\t\tmissingLanguageIdsSmsContent = [];\n\t\t\t\tmissingLanguageIdsUssdContent = [];\n\t\t\t\tmissingLanguageIdsSocialContent = [];\n\t\t\t\tmissingLanguageIdsClipboardContent = [];\n\n\t\t\t\tif(app.ui.blockClasses[block.type].hasContent == 1){\n\n\t\t\t\t\tif(app.tree.get('details').hasVoice && _.keys(block.audioFiles).length < tree.enabledLanguages.length) {\n\t\t\t\t\tmissingLanguageIdsAudioFiles = _.difference(tree.enabledLanguages, _.keys(block.audioFiles));\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif(app.tree.get('details').hasSms && _.keys(block.smsContent).length < tree.enabledLanguages.length) {\n\t\t\t\t\t\tif (block.type !== \"RandomOrderMultipleChoiceQuestionBlock\")\n\t\t\t\t\t\tmissingLanguageIdsSmsContent = _.difference(tree.enabledLanguages, _.keys(block.smsContent));\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif(app.tree.get('details').hasUssd && _.keys(block.ussdContent).length < tree.enabledLanguages.length) {\n\t\t\t\t\t\tif (block.type !== \"RandomOrderMultipleChoiceQuestionBlock\")\n\t\t\t\t\t\tmissingLanguageIdsUssdContent = _.difference(tree.enabledLanguages, _.keys(block.ussdContent));\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif(app.tree.get('details').hasSocial && _.keys(block.socialContent).length < tree.enabledLanguages.length) {\n\t\t\t\t\t\tif (block.type !== \"RandomOrderMultipleChoiceQuestionBlock\")\n\t\t\t\t\t\t\tmissingLanguageIdsSocialContent = _.difference(tree.enabledLanguages, _.keys(block.socialContent));\n\t\t\t\t\t}\n\n\t\t\t\t\tif(app.tree.get('details').hasClipboard && _.keys(block.clipboardContent).length < tree.enabledLanguages.length) {\n\t\t\t\t\t\tif (block.type !== \"RandomOrderMultipleChoiceQuestionBlock\")\n\t\t\t\t\t\t\tmissingLanguageIdsClipboardContent = _.difference(tree.enabledLanguages, _.keys(block.clipboardContent));\n\t\t\t\t\t}\n\n\t\t\t\t\tif(missingLanguageIdsAudioFiles.length || missingLanguageIdsSmsContent.length || missingLanguageIdsUssdContent.length || missingLanguageIdsSocialContent.length || missingLanguageIdsClipboardContent.length) {\n\t\t\t\t\t\tjsKey[block.jsKey] = {\n\t\t\t\t\t\t\t\t'sms': missingLanguageIdsSmsContent,\n\t\t\t\t\t\t\t\t'voice': missingLanguageIdsAudioFiles,\n\t\t\t\t\t\t\t\t'ussd' : missingLanguageIdsUssdContent,\n\t\t\t\t\t\t\t\t'social' : missingLanguageIdsSocialContent,\n\t\t\t\t\t\t\t\t'clipboard' : missingLanguageIdsClipboardContent,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t/*\n\t\t\t\t//if block is a multiple choice question, check if user has set multiple digit options\n\t\t\t\tif (block.type === \"MultipleChoiceQuestionBlock\"){\n\t\t\t\t\tvar choiceKeyPresses = block.customData.choiceKeypresses;\n\t\t\t\t\t//check if there are any duplicate in the choices\n\n\t\t\t\t\tif ((new Set(_.values(choiceKeyPresses))).size !== (_.values(choiceKeyPresses).length)){\n\t\t\t\t\t\tvar uniqN = [];\n\t\t\t\t\t\tvar duplicates = [];\n\t\t\t\t\t\t$.each(choiceKeyPresses, function(i, el){\n\t\t\t\t\t\t\tif (uniqN.lastIndexOf(el) === -1) {\n\t\t\t\t\t\t\t\tuniqN.push(el);\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tduplicates.push(el);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tjsKey[block.jsKey]['duplicateChoicePresses'] = duplicates;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tjsKey[block.jsKey]['duplicateChoicePresses'] = [];\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif (block.type === \"GroupBranchBlock\"){\n\t\t\t\t\t//check if this block has a group set\n\t\t\t\t\tif (!block.customData.hasOwnProperty('groupId') || (block.customData.groupId === \"\")) {\n\t\t\t\t\t\tjsKey[block.jsKey] = {'noGroup' : \"NoGroupSelected\"};\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (block.type === \"RunTreeBlock\"){\n\n\t\t\t\t\tif (!block.customData.hasOwnProperty('destinationTreeSetId') || (block.customData.destinationTreeSetId === \"\")) {\n\t\t\t\t\t\tjsKey[block.jsKey] = {'noRunTree':'NoTreeSelected'};\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (block.type === \"GroupSizeBranchBlock\") {\n\n\t\t\t\t\tif (!block.customData.hasOwnProperty('groupId') || (block.customData.groupId === \"\")){\n\t\t\t\t\t\tjsKey[block.jsKey] = {\n\t\t\t\t\t\t\t\t\t\t\t\t'noGroup':\"NoGroupSelected\"\n\t\t\t\t\t\t\t\t\t\t\t };\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif (block.type === \"LanguageSelectorBlock\"){\n\t\t\t\t\tif (!block.customData.hasOwnProperty('languageSelectorId') || (block.customData.languageSelectorId === \"\")){\n\t\t\t\t\t\tjsKey[block.jsKey] = {\n\t\t\t\t\t\t\t\t\t\t\t'noLanguageSelector' : 'NoLanguageSelectorSelected'\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t*/\n\n\n\t\t\t});\n\n\t\t\treturn jsKey;\n\n\t\t},\n\n\t\tvalidateContent: function() {\n\n\t\t\tvar tree = this.get('details'), blocks = this.get('blocks');\n\n\t\t\treturn this.validateLanguageAndContentTypes(tree, blocks);\n\t\t},\n\n\t\tupdateFloipAlert: function() {\n\t\t\tif (app.tree.floipSyncedAt) {\n\t\t\t\t$('.push-flow-package-alert-message').html('<div class=\"alert alert-success\">' + Lang.trans('trees.floip-sync-success') + '</div>');\n\t\t\t} else if ($('.floip-push-url-input').val()) {\n\t\t\t\t$('.push-flow-package-alert-message').html('<div class=\"alert alert-warning\">' + Lang.trans('trees.floip-sync-warning') + '</div>');\n\t\t\t}\n\t\t},\n\n    getEndBlockPosition: function(topOrBottom, returnBlockKey, offset) {\n      var tallestYPosition = 0;\n      var tallestBlockKey = '';\n\n      if (topOrBottom != 'bottom') {\n        // TODO:\n        if (app.tree.get('blocks')[0]) {\n          tallestYPosition = app.tree.get('blocks')[0]['uiData']['yPosition'];\n          tallestBlockKey = app.tree.get('blocks')[0]['jsKey'];\n          // Seed this initially, otherwise the \"0\" value will stay shortest.\n        }\n      }\n\n      _.each(app.tree.get('blocks'), function(block) {\n        var thisYPosition = block['uiData']['yPosition'];\n\n        if (topOrBottom == 'bottom') {\n          if (thisYPosition > tallestYPosition) {\n            tallestYPosition = thisYPosition;\n            tallestBlockKey = block['jsKey'];\n          }\n        }\n        else {\n          if (thisYPosition < tallestYPosition) {\n            tallestYPosition = thisYPosition;\n            tallestBlockKey = block['jsKey'];\n          }\n        }\n\n      }, this);\n\n      if (typeof offset !== 'undefined') {\n        if (topOrBottom == 'bottom') {\n          tallestYPosition += offset;\n        }\n        else {\n          tallestYPosition -= offset;\n        }\n\n      }\n\n      if (returnBlockKey == 1) {\n        return tallestBlockKey;\n      }\n      else {\n        return tallestYPosition;\n      }\n\n    },\n\n    getTallestBlockPosition: function(offset) {\n      return this.getEndBlockPosition('bottom', 0, offset);\n    },\n    getShortestBlockPosition: function(offset) {\n      return this.getEndBlockPosition('top', 0, offset);\n    },\n    getTallestBlockKey: function() {\n      return this.getEndBlockPosition('bottom', 1);\n    },\n    getShortestBlockKey: function() {\n      return this.getEndBlockPosition('top', 1);\n    },\n\n  };\n\n  app.Tree._blockIdPrefixMatcher = /^(block_\\d+_\\d+).*/; // eg. \"block_1492643090294_28_node_3\"\n  app.Tree._validateNonExistentBlockReferences = function (blocks, connections) {\n\t\t// todo: also validate .blocks.items.properties.customData.outputs.conditions.jsKey === \"block_1450273012962_38\"\n\t\t// todo: also validate .details.startingBlockKey === \"block_1450273012962_38\"\n\n    var keysToVerifiedMap = {},\n        keysToExistsMap = {},\n        keys = _.pluck(blocks, 'jsKey'),\n        validateKey = function (key) {\n          keysToVerifiedMap[key] = true\n          keysToExistsMap[key] = _.contains(keys, key)\n        };\n\n    _.forEach(connections, function (conn, i) {\n      validateKey(conn.endBlockKey);\n      validateKey(conn.startBlockKey);\n\n      var extractedKey = _.get(this._blockIdPrefixMatcher.exec(conn.outputKey), 1);\n      extractedKey && validateKey(extractedKey);\n    }, this);\n\n    return _.contains(_.values(keysToExistsMap), 0);\n  }\n\n\tapp.Tree._mergeAndSanitizeImportedInto = function (treeJson, importJson) {\n\t\tif (!importJson) {\n\t\t\treturn; // validator handles `null`ed json in a particular way\n\t\t}\n\n\t\t//1- Remove contents - based on selected channels\n\t\t_.forEach(_.get(importJson, 'blocks'), function (block, i) {\n\t\t\tif (!_.get(treeJson, 'details.hasVoice', false)){\n\t\t\t\tblock.audioFiles = {};\n\t\t\t}\n\t\t\tif (!_.get(treeJson, 'details.hasSms', false)){\n\t\t\t\tblock.smsContent = {};\n\t\t\t\tblock.smsAutogenLangs = [];\n\t\t\t}\n\t\t\tif (!_.get(treeJson, 'details.hasUssd', false)){\n\t\t\t\tblock.ussdContent = {};\n\t\t\t\tblock.ussdAutogenLangs = [];\n\t\t\t}\n\t\t\tif (!_.get(treeJson, 'details.hasSocial', false)){\n\t\t\t\tblock.socialContent = {};\n\t\t\t\tblock.socialAutogenLangs = [];\n\t\t\t}\n\t\t\tif (!_.get(treeJson, 'details.hasClipboard', false)){\n\t\t\t\tblock.clipboardContent = {};\n\t\t\t\tblock.clipboardAutogenLangs = [];\n\t\t\t}\n\t\t});\n\n\t\t//2- Remove contents - based on selected languages\n\t\tvar importedEnabledLanguages = _.get(importJson, 'details.enabledLanguages', []);\n\t\tvar validLanguages = _.get(treeJson, 'details.enabledLanguages', []);\n\t\tvar invalidLanguages = _.difference(importedEnabledLanguages, validLanguages);\n\n\t\tif (invalidLanguages.length > 0){\n\t\t\tvar blockContentsToReview = [\n\t\t\t\t'customData.reviewed',\n\t\t\t\t'audioFiles',\n\t\t\t\t'smsContent',\n\t\t\t\t'ussdContent',\n\t\t\t\t'socialContent',\n\t\t\t\t'clipboardContent',\n\t\t\t\t'smsAutogenLangs',\n\t\t\t\t'ussdAutogenLangs',\n\t\t\t\t'socialAutogenLangs',\n\t\t\t\t'clipboardAutogenLangs'\n\t\t\t];\n\n\t\t\t_.forEach(_.get(importJson, 'blocks'), function (block, i) {\n\t\t\t\t_.forEach(blockContentsToReview, function (contentPath, i) {\n\t\t\t\t\tvar content = _.get(block, contentPath, {});\n\t\t\t\t\tvar sanitizedContent = [];\n\t\t\t\t\tif (_.isArray(content)) {//AutogenLangs\n\t\t\t\t\t\tsanitizedContent = _.difference(content, invalidLanguages);//remove by value\n\t\t\t\t\t}else{//Contents & others\n\t\t\t\t\t\tsanitizedContent = _.omit(content, invalidLanguages);//remove by prop\n\t\t\t\t\t}\n\t\t\t\t\t_.set(block, contentPath, sanitizedContent);\n\t\t\t\t})\n\t\t\t});\n\t\t}\n\n\t\t// 3- Fix non object contents & Strip out customData from some block types\n\t\t// Block Type KeyValues to strip out\n\t\tvar orgContentBlockTypeKeys = {\n\t\t  \"SubscriberBranchBlock\": ['customDataCategory', 'customDataValue', 'propertyFieldId'],\n\t\t  \"GroupBranchBlock\": ['groupId'],\n\t\t  \"GroupSizeBranchBlock\": ['groupId'],\n\t\t  \"SubscriberPropertyBlock\": ['customDataCategory', 'customDataValue', 'newLanguage', 'propertyFieldId'],\n\t\t  \"GroupPropertyBlock\": ['groupId'],\n\t\t  \"BillSubscriberBlock\": ['apiUrlDestination', 'apiUsername', 'apiPassword', 'apiProductCode', 'apiStockCode', 'apiDeductionAmount', 'apiOperationId', 'apiOperationType' ],\n\t\t  \"TriggerOutgoingCallBlock\": ['recipientType', 'scheduleType', 'messageVersionSetId', 'messageId', 'surveyVersionSetId', 'surveyId', 'treeVersionSetId', 'treeId', 'languageSelectorId', 'subscribers'],\n\t\t  \"LanguageSelectorBlock\": ['languageSelectorId'],\n\t\t  \"CallHistoryBranchBlock\": ['mode', 'rangeDays', 'rangeStartDate', 'rangeEndDate'],\n\t\t\t\"DirectorySelectionBlock\": ['setSubscriberPropertyConfiguration'],\n\t\t\t\"OpenQuestionBlock\": ['setSubscriberPropertyConfiguration'],\n\t\t\t\"RandomOrderMultipleChoiceQuestionBlock\": ['setSubscriberPropertyConfiguration'],\n\t\t\t\"MultipleChoiceQuestionBlock\": ['setSubscriberPropertyConfiguration'],\n\t\t\t\"NumericQuestionBlock\": ['setSubscriberPropertyConfiguration'],\n\t\t\t\"CollaborativeFilteringRatingBlock\": ['candidateBlocks'],\n\t\t\t\"CollaborativeFilteringRatioBranchBlock\": ['candidateBlock'],\n\t\t}\n\n\t\t_.forEach(_.get(importJson, 'blocks'), function (block, i) {\n\t\t\tblock.audioFiles = Array.isArray(block.audioFiles) ? {} : block.audioFiles;\n\t\t\tblock.smsContent = Array.isArray(block.smsContent) ? {} : block.smsContent;\n\t\t\tblock.ussdContent = Array.isArray(block.ussdContent) ? {} : block.ussdContent;\n\t\t\tblock.socialContent = Array.isArray(block.socialContent) ? {} : block.socialContent;\n\t\t\tblock.clipboardContent = Array.isArray(block.clipboardContent) ? {} : block.clipboardContent;\n\t\t\tblock.customData = Array.isArray(block.customData) ? {} : block.customData;\n\n\t\t\tif(_.has(orgContentBlockTypeKeys, block.type)) {\n\t\t\t\t// For each key within the Block Type\n\t\t\t\t_.forEach(orgContentBlockTypeKeys[block.type], function (key, i) {\n\t\t\t\t\tdelete block.customData[key];\n\t\t\t\t})\n\t\t\t}\n\n\t\t});\n\n\t\treturn _.extend({}, treeJson, {\n\t\t\tdetails: _.assign({}, _.get(importJson, 'details'), treeJson.details),\n\t\t\tblocks: _.get(importJson, 'blocks', []),\n\t\t\tconnections: _.get(importJson, 'connections', [])\n\t\t});\n\t}\n\n  app.Tree.validateTreeData = function (json, schema) {\n    // Usage:\n    // schema = app.Tree.createJsonSchemaFor(\n    //    _.pluck(app.ui.languages, 'id'),\n    //    _.keys(app.ui.blockClasses))\n    // app.tree = app.Tree.validateAndCreateFrom(json, schema)\n\n    if (!json) { // json was invalid at some point along the way\n        throw _.extend(new Ajv.ValidationError([]), {message: 'Tree validation failed!'});\n    }\n\n    var validate = new Ajv({coerceTypes: true}).compile(schema);\n\n    if (!validate(json)) {\n      // validate.errors are a list like:\n      // [{\"keyword\":\"type\",\"dataPath\":\".details.title\",\"schemaPath\":\"#/properties/details/properties/title/type\",\"params\":{\"type\":\"string\"},\"message\":\"should be string\"}]\n      throw _.extend(\n          new Ajv.ValidationError(validate.errors),\n          {message: 'Tree validation failed!'});\n    }\n\n    if (this._validateNonExistentBlockReferences(json.blocks, json.connections)) {\n      throw _.extend(new Ajv.ValidationError([{\n        keyword: 'reference',\n        dataPath: '.connections.items.properties',\n        message: \"should reference existing jsKey properties\"\n      }]), {message: 'Tree validation failed!'});\n    }\n  }\n\n  app.Tree.createJsonSchemaFor = function (languages, blockTypes) {\n    // todo: fix enum for language\n    // todo: fix enum for block classes\n    // todo: add enum for `connection.startBlockKey` and `connection.endBlockKey`\n    // todo: add enum for `connection.endBlockKey`\n    // todo: add enum for `details.startingBlockKey`\n\n    // Reference: http://epoberezkin.github.io/ajv/keywords.html\n    return {\n      \"properties\": {\n        \"id\": {\"type\": \"integer\"},\n        \"details\": {\n          \"type\": \"object\",\n          \"properties\": {\n            \"title\": {\"type\": \"string\"},\n            \"description\": {\"type\": \"string\"},\n            \"hasVoice\": {\"type\": \"boolean\"},\n            \"enabledLanguages\": {\n              \"type\": \"array\",\n              \"items\": {\n                \"type\": \"string\",\n                \"enum\": languages\n              }\n            },\n            \"hasSms\": {\"type\": \"boolean\"},\n            \"hasUssd\": {\"type\": \"boolean\"},\n            \"hasSocial\": {\"type\": \"boolean\"},\n            \"startingBlockKey\": {\"type\": \"string\"}\n          }\n        },\n        \"blocks\": {\n          \"type\": \"array\",\n          \"items\": {\n            \"type\": \"object\",\n            \"properties\": {\n              \"type\": {\n                \"type\": \"string\",\n                \"enum\": blockTypes\n              },\n              \"customData\": {\n                \"type\": \"object\",\n                \"properties\": {\n                  \"title\": {\"type\": \"string\"},\n                  \"repeatKey\": {\"type\": \"integer\"},\n                  \"repeatMax\": {\"type\": \"integer\"},\n                  \"repeatDelay\": {\"type\": \"integer\"},\n                  \"repeat\": {\"type\": \"boolean\"}\n                }\n              },\n              \"uiData\": {\n                \"type\": \"object\",\n                \"properties\": {\n                  \"xPosition\": {\"type\": \"integer\"},\n                  \"yPosition\": {\"type\": \"integer\"},\n                  \"numConnections\": {\"type\": \"integer\"},\n                }\n              },\n              \"audioFiles\": {\"type\": \"object\"},\n              \"smsContent\": {\"type\": \"object\"},\n              \"ussdContent\": {\"type\": \"object\"},\n              \"socialContent\": {\"type\": \"object\"},\n              \"clipboardContent\": {\"type\": \"object\"},\n              \"smsAutogenLangs\": {\"type\": \"array\"},\n              \"ussdAutogenLangs\": {\"type\": \"array\"},\n              \"socialAutogenLangs\": {\"type\": \"array\"},\n              \"clipboardAutogenLangs\": {\"type\": \"array\"},\n              \"jsKey\": {\"type\": \"string\"}\n            }\n          }\n        },\n        \"connections\": {\n          \"type\": \"array\",\n          \"items\": {\n            \"type\": \"object\",\n            \"properties\": {\n              \"startBlockKey\": {\"type\": \"string\"},\n              \"outputKey\": {\"type\": \"string\"},\n              \"endBlockKey\": {\"type\": \"string\"}\n            }\n          }\n        }\n      }\n    }\n  }\n\n\n})();\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h3',{staticClass:\"no-room-above\"},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.edit-flow'))+\" \")]),_c('flow-name-editor',{attrs:{\"flow\":_vm.flow}}),_c('flow-label-editor',{attrs:{\"flow\":_vm.flow}}),_c('flow-interaction-timeout-editor',{attrs:{\"flow\":_vm.flow}}),_c('flow-languages-editor',{attrs:{\"flow\":_vm.flow},on:{\"commitFlowLanguagesChange\":_vm.updateFlowLanguages}}),_c('flow-modes-editor',{attrs:{\"flow\":_vm.flow},on:{\"commitFlowModesChange\":_vm.updateFlowModes}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"form-group flow-label\"},[_c('text-editor',{attrs:{\"is-editable\":_vm.isEditable,\"label\":_vm._f(\"trans\")('flow-builder.flow-name'),\"placeholder\":_vm._f(\"trans\")('flow-builder.enter-flow-name')},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport TextEditor from '@/components/common/TextEditor.vue'\nimport {Component, Prop} from 'vue-property-decorator'\nimport {IFlow} from '@floip/flow-runner'\nimport {namespace} from 'vuex-class'\nimport lang from '@/lib/filters/lang'\n\nconst flowVuexNamespace = namespace('flow')\n\n@Component<any>(\n  {\n    components: {\n      TextEditor,\n    },\n    mixins: [lang],\n  }\n)\nclass FlowNameEditor extends Vue {\n  @Prop({default: true}) readonly isEditable!: boolean\n  @Prop()readonly flow!: IFlow\n\n  get name(): string {\n    return this.flow.name || \"\"\n  }\n\n  set name(value: string) {\n    this.flow_setName({flowId:this.flow.uuid, value})\n  }\n\n  @flowVuexNamespace.Mutation flow_setName!: ({flowId, value}: {flowId: string, value: string}) => void\n}\n\nexport default FlowNameEditor\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NameEditor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NameEditor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./NameEditor.vue?vue&type=template&id=a9aa38fa&\"\nimport script from \"./NameEditor.vue?vue&type=script&lang=ts&\"\nexport * from \"./NameEditor.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"form-group flow-name\"},[_c('text-editor',{attrs:{\"is-editable\":_vm.isEditable,\"label\":_vm._f(\"trans\")('flow-builder.flow-label'),\"placeholder\":_vm._f(\"trans\")('flow-builder.enter-flow-label')},model:{value:(_vm.label),callback:function ($$v) {_vm.label=$$v},expression:\"label\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport TextEditor from '@/components/common/TextEditor.vue'\nimport {Component, Prop} from 'vue-property-decorator'\nimport {IFlow} from '@floip/flow-runner'\nimport {namespace} from 'vuex-class'\nimport lang from '@/lib/filters/lang'\n\nconst flowVuexNamespace = namespace('flow')\n@Component<any>(\n  {\n    components: {\n      TextEditor,\n    },\n    mixins: [lang],\n  }\n)\nclass FlowLabelEditor extends Vue {\n  @Prop({default: true}) readonly isEditable!: boolean\n  @Prop() readonly flow!: IFlow\n\n  get label(): string {\n    return this.flow.label || \"\"\n  }\n\n  set label(value: string) {\n    this.flow_setLabel({flowId:this.flow.uuid, value})\n  }\n\n  @flowVuexNamespace.Mutation flow_setLabel\n}\n\nexport default FlowLabelEditor\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LabelEditor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LabelEditor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./LabelEditor.vue?vue&type=template&id=63d28d50&\"\nimport script from \"./LabelEditor.vue?vue&type=script&lang=ts&\"\nexport * from \"./LabelEditor.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"form-group flow-interaction-timeout\"},[_c('numeric-editor',{attrs:{\"is-editable\":_vm.isEditable,\"label\":_vm._f(\"trans\")('flow-builder.Interaction-timeout'),\"placeholder\":_vm._f(\"trans\")('flow-builder.enter-value')},model:{value:(_vm.interactionTimeout),callback:function ($$v) {_vm.interactionTimeout=_vm._n($$v)},expression:\"interactionTimeout\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport {Component, Prop} from 'vue-property-decorator'\nimport {IFlow} from '@floip/flow-runner'\nimport NumericEditor from '@/components/common/NumericEditor.vue'\nimport {namespace} from 'vuex-class'\nimport lang from '@/lib/filters/lang'\n\nconst flowVuexNamespace = namespace('flow')\n\n@Component<any>({\n  components: {\n    NumericEditor,\n  },\n  mixins: [lang],\n})\nclass InteractionTimeoutEditor extends Vue {\n  @Prop({default: true}) readonly isEditable!: boolean\n  @Prop() readonly flow!: IFlow\n\n  get interactionTimeout(): number {\n    //30 comes from src/store/flow/flow.ts\n    return this.flow.interactionTimeout || 30 \n  }\n\n  set interactionTimeout(value: number) {\n    this.flow_setInteractionTimeout({flowId:this.flow.uuid, value})\n  }\n\n  @flowVuexNamespace.Mutation flow_setInteractionTimeout\n}\n\nexport default InteractionTimeoutEditor\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InteractionTimeoutEditor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InteractionTimeoutEditor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./InteractionTimeoutEditor.vue?vue&type=template&id=780f3a90&\"\nimport script from \"./InteractionTimeoutEditor.vue?vue&type=script&lang=ts&\"\nexport * from \"./InteractionTimeoutEditor.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"form-group flow-languages\"},[_c('label',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.languages')))]),_vm._l((_vm.languages),function(language){return _c('div',{key:language.id,staticClass:\"checkbox\"},[_c('label',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.flowSelectedLanguages),expression:\"flowSelectedLanguages\"}],staticClass:\"flow-language-toggle-checkbox\",attrs:{\"type\":\"checkbox\"},domProps:{\"value\":language,\"checked\":Array.isArray(_vm.flowSelectedLanguages)?_vm._i(_vm.flowSelectedLanguages,language)>-1:(_vm.flowSelectedLanguages)},on:{\"change\":function($event){var $$a=_vm.flowSelectedLanguages,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=language,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.flowSelectedLanguages=$$a.concat([$$v]))}else{$$i>-1&&(_vm.flowSelectedLanguages=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.flowSelectedLanguages=$$c}}}}),_vm._v(\" \"+_vm._s(language.name)+\" \")])])})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport {Component, Prop} from 'vue-property-decorator'\nimport {IFlow} from '@floip/flow-runner'\nimport NumericEditor from '@/components/common/NumericEditor.vue'\nimport ILanguage from '@floip/flow-runner/dist/flow-spec/ILanguage'\nimport lang from '@/lib/filters/lang'\n\n@Component<any>({\n  components: {\n    NumericEditor,\n  },\n  mixins: [lang],\n})\nclass LanguagesEditor extends Vue {\n  @Prop({default: true}) readonly isEditable!: boolean\n  @Prop() readonly flow!: IFlow\n\n  get languages(): ILanguage[] {\n    return this.$store.state.trees.ui.languages\n  }\n\n  get flowSelectedLanguages(): ILanguage[] {\n    return this.flow.languages || []\n  }\n\n  set flowSelectedLanguages(value: ILanguage[]) {\n    this.$emit('commitFlowLanguagesChange', value)\n  }\n}\n\nexport default LanguagesEditor\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LanguagesEditor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LanguagesEditor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./LanguagesEditor.vue?vue&type=template&id=5041fc1c&\"\nimport script from \"./LanguagesEditor.vue?vue&type=script&lang=ts&\"\nexport * from \"./LanguagesEditor.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"form-group flow-modes\"},[_c('label',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.modes')))]),_vm._l((_vm.availableModes),function(mode){return _c('div',{key:mode,staticClass:\"checkbox\"},[_c('label',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.flowSelectedModes),expression:\"flowSelectedModes\"}],staticClass:\"flow-mode-toggle-checkbox\",attrs:{\"type\":\"checkbox\"},domProps:{\"value\":mode,\"checked\":Array.isArray(_vm.flowSelectedModes)?_vm._i(_vm.flowSelectedModes,mode)>-1:(_vm.flowSelectedModes)},on:{\"change\":function($event){var $$a=_vm.flowSelectedModes,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=mode,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.flowSelectedModes=$$a.concat([$$v]))}else{$$i>-1&&(_vm.flowSelectedModes=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.flowSelectedModes=$$c}}}}),_vm._v(\" \"+_vm._s(mode)+\" \")])])})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport {Component, Prop} from 'vue-property-decorator'\nimport {IFlow} from '@floip/flow-runner'\nimport NumericEditor from '@/components/common/NumericEditor.vue'\nimport {SupportedMode} from '@floip/flow-runner'\nimport lang from '@/lib/filters/lang'\n\n@Component<any>({\n  components: {\n    NumericEditor,\n  },\n  mixins: [lang]\n})\nclass ModeEditor extends Vue {\n  @Prop({default: true}) readonly isEditable!: boolean\n  @Prop() readonly flow!: IFlow\n\n  private availableModes = Object.values(SupportedMode)\n\n  get flowSelectedModes(): SupportedMode[] {\n    return this.flow.supportedModes\n  }\n\n  set flowSelectedModes(value: SupportedMode[]) {\n    this.$emit('commitFlowModesChange', value)\n  }\n}\n\nexport default ModeEditor\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModesEditor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModesEditor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ModesEditor.vue?vue&type=template&id=eec9a104&\"\nimport script from \"./ModesEditor.vue?vue&type=script&lang=ts&\"\nexport * from \"./ModesEditor.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport {Component, Prop} from 'vue-property-decorator'\nimport {IFlow} from '@floip/flow-runner'\nimport FlowNameEditor from './NameEditor.vue'\nimport FlowLabelEditor from './LabelEditor.vue'\nimport FlowInteractionTimeoutEditor from './InteractionTimeoutEditor.vue'\nimport FlowLanguagesEditor from './LanguagesEditor.vue'\nimport FlowModesEditor from './ModesEditor.vue'\nimport {namespace} from 'vuex-class'\nimport lang from '@/lib/filters/lang'\n\nconst flowVuexNamespace = namespace('flow')\n\n@Component<any>({\n    components: {\n      FlowNameEditor,\n      FlowLabelEditor,\n      FlowInteractionTimeoutEditor,\n      FlowLanguagesEditor,\n      FlowModesEditor\n    },\n    mixins: [lang],\n  }\n)\nclass FlowEditor extends Vue {\n  @Prop() readonly flow!: IFlow\n\n  updateFlowLanguages(value) {\n    this.flow_setLanguages({flowId: this.flow.uuid, value})\n  }\n\n  updateFlowModes(value) {\n    this.flow_setSupportedMode({flowId: this.flow.uuid, value})\n  }\n\n  @flowVuexNamespace.Mutation flow_setLanguages\n  @flowVuexNamespace.Mutation flow_setSupportedMode\n}\n\nexport default FlowEditor\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FlowEditor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FlowEditor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./FlowEditor.vue?vue&type=template&id=427f7bb2&\"\nimport script from \"./FlowEditor.vue?vue&type=script&lang=ts&\"\nexport * from \"./FlowEditor.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"number-editor\"},[_c('label',[_vm._v(_vm._s(_vm.label))]),(_vm.isEditable)?_c('div',[_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"number\",\"min\":\"0\",\"placeholder\":_vm.placeholder},domProps:{\"value\":_vm.value},on:{\"keypress\":_vm.filterNumeric,\"keydown\":function($event){return _vm.$emit('keydown', $event)},\"input\":function($event){return _vm.$emit('input', $event.target.value)}}})]):_c('p',[_vm._v(\" \"+_vm._s(_vm.value)+\" \")]),_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"number-editor\">\n    <label>{{label}}</label>\n    <div v-if=\"isEditable\">\n      <input\n          type=\"number\"\n          min=\"0\"\n          class=\"form-control\"\n          :placeholder=\"placeholder\"\n          :value=\"value\"\n          @keypress=\"filterNumeric\"\n          @keydown=\"$emit('keydown', $event)\"\n          @input=\"$emit('input', $event.target.value)\"\n      />\n    </div>\n\n    <p v-else>\n      {{value}}\n    </p>\n    <slot/>\n  </div>\n</template>\n\n<script>\n  import { mapMutations } from 'vuex';\n\n  export default {\n    props: {\n      isEditable: {\n        default: true,\n        type: Boolean,\n      },\n      label: {\n        type: [String, Number],\n        required: true,\n      },\n      placeholder: {\n        type: String,\n        default: '',\n      },\n      value: {\n        type: [String, Number],\n        required: true,\n      },\n    },\n    methods: {\n      filterNumeric(e) {\n        if (!e.key.match(/[0-9\\-]/g)) {\n          e.preventDefault()\n        }\n      },\n    },\n  }\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NumericEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NumericEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NumericEditor.vue?vue&type=template&id=c30e135a&\"\nimport script from \"./NumericEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./NumericEditor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InteractionDesigner.vue?vue&type=style&index=2&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InteractionDesigner.vue?vue&type=style&index=2&lang=scss&\"","import {\n  IContext,\n  IResourceDefinition,\n  IResourceDefinitionContentTypeSpecific as IResourceDefinitionVariantOverModes,\n  SupportedContentType,\n  SupportedMode\n} from '@floip/flow-runner'\nimport ValidationException from '@floip/flow-runner/src/domain/exceptions/ValidationException'\nimport {cloneDeep, defaults, difference, find, first, findIndex, isEmpty, isEqual, keyBy, map, pick, without} from 'lodash'\nimport {ActionTree, GetterTree, MutationTree} from 'vuex'\nimport {IFlowsState} from '@/store/flow/index'\nimport {IRootState} from '@/store'\n\n\nexport const getters: GetterTree<IFlowsState, IRootState> = {\n  resourcesByUuid: ({resources}) => keyBy(resources, 'uuid')\n}\n\nexport const mutations: MutationTree<IFlowsState> = {\n  resource_add({resources}, {resource}: {resource: IResourceDefinition}) {\n    resources.push(resource)\n  },\n\n  //currently unused - see todo\n  resource_delete({resources}, {resourceId}: {resourceId: string}) {\n    //TODO - we need an action that can clean resources and then call this to actuall remove. We need logic to truly check resources are unused\n    const resourceIndex = findIndex(resources, (resource) => resource.uuid === resourceId)\n    resources.splice(resourceIndex, 1)\n  },\n\n  resource_createVariant(state, {resourceId, variant}: {resourceId: string, variant: IResourceDefinitionVariantOverModes}) {\n    // append to resource\n    findResourceWith(resourceId, state as unknown as IContext)\n        .values\n        .push(cloneDeep(variant))\n  },\n\n  resource_setValue(state, {resourceId, filter, value}: {resourceId: string, filter: IResourceDefinitionVariantOverModesFilter, value: string}) {\n    findResourceVariantOverModesWith(resourceId, filter, state as unknown as IContext)\n        .value = value || ''\n  },\n\n  // @note -- modes in this case does not tighten filter, but rather exists solely for update operation\n  resource_setModes(state,\n                     {resourceId, filter, modes}:\n                         {resourceId: string, filter: IResourceDefinitionVariantOverModesFilter} & {modes: SupportedMode[]}) {\n\n    if (isEmpty(modes)) {\n      // todo: create type that requires both resourceId & modes with (N>1) entries\n      throw new ValidationException('`mode` is required to assign mode on `IResourceDefinitionVariantOverModes`.')\n    }\n\n    // todo: this should likely validate whether or not we're intersecting with other variants with this operation\n    //       eg. variants: [{modes: [a, b]}, {modes: [c]}] => variants[0].modes = [c]\n\n    findResourceVariantOverModesWith(resourceId, filter, state as unknown as IContext)\n        .modes = modes\n  },\n}\n\nexport const actions: ActionTree<IFlowsState, IRootState> = {\n  async resource_createWith({dispatch}, {props}: {props: {uuid: string} & Partial<IResourceDefinition>}): Promise<IResourceDefinition> {\n    return {\n      ...defaults(\n        props,\n        {values: []}),\n    }\n  },\n\n  resource_setOrCreateValueModeSpecific(\n      {commit, dispatch, state},\n      {resourceId, filter, value}: {resourceId: string, filter: IResourceDefinitionVariantOverModes, value: string}) {\n\n    try {\n      // @note - `find()` raises when absent; this verifies its presence\n      findResourceVariantOverModesWith(resourceId, filter, state as unknown as IContext)\n      dispatch('resource_setValueModeSpecific', {resourceId, filter, value})\n    } catch (e) {\n      if (!(e instanceof ValidationException)) {\n        throw e\n      }\n\n      commit('resource_createVariant', {resourceId, variant: Object.assign(cloneDeep(filter), {value})})\n    }\n  },\n\n  resource_setValueModeSpecific(\n      {commit, dispatch, state},\n      {resourceId, filter, value}: {resourceId: string, filter: IResourceDefinitionVariantOverModes} & {value: string, mode: SupportedMode}) {\n\n    // find resource variant over modes\n    const\n        mode = first(filter.modes),\n        variant = findResourceVariantOverModesWith(resourceId, filter, state as unknown as IContext)\n\n    if (variant.modes.length > 1) { // need to disambiguate b/c value is spread over multiple modes\n      // remove mode from existing variant\n      commit('resource_setModes', {\n        resourceId,\n        filter: variant,\n        modes: without(variant.modes, mode)})\n\n      // // generate new variant-over-modes with single targeted mode\n      commit('resource_createVariant', {\n        resourceId,\n        variant: Object.assign(\n            cloneDeep(variant),\n            {modes: [mode], value})\n      })\n\n      return // specialized case, we're done here\n    }\n\n    commit('resource_setValue', {resourceId, filter: variant, value})\n  },\n}\n\nexport type IResourceDefinitionVariantOverModesFilter = Partial<IResourceDefinitionVariantOverModes>\nexport type IResourceDefinitionVariantOverModesFilterAsKey = Omit<IResourceDefinitionVariantOverModes, 'value'>\n\nexport type IResourceDefinitionVariantOverModesFilterWithResourceId =\n    Partial<IResourceDefinitionVariantOverModes> & {resourceId: string}\n\nexport function findResourceWith(uuid: string, {resources}: IContext): IResourceDefinition {\n  const resource = find(resources, {uuid})\n  if (resource == null) {\n    throw new ValidationException(`Unable to find resource on context: ${uuid} in ${map(resources, 'uuid')}`)\n  }\n\n  return resource\n}\n\nexport function findResourceVariantOverModesWith(\n    uuid: string,\n    filter: IResourceDefinitionVariantOverModesFilter,\n    {resources}: IContext): IResourceDefinitionVariantOverModes {\n\n  return findResourceVariantOverModesOn(\n      findResourceWith(uuid, {resources} as IContext),\n      filter)\n}\n\nexport function findResourceVariantOverModesOn(\n    resource: IResourceDefinition,\n    filter: IResourceDefinitionVariantOverModesFilter) {\n\n  const\n      keysForComparison = without(Object.keys(filter), 'modes'), // b/c we do explicit partial matching on modes\n      filterWithComparatorKeys = pick(filter, keysForComparison),\n      variant = find<IResourceDefinitionVariantOverModes>(\n          resource.values,\n          v => isEqual(filterWithComparatorKeys, pick(v, keysForComparison))\n              && difference(filter.modes, v.modes).length === 0)\n\n  if (variant == null) {\n    throw new ValidationException(`Unable to find resource variant (over modes) on context: (\n      ${resource.uuid},\n      ${JSON.stringify(filter)}) in\n        ${JSON.stringify(map(resource.values, v => pick(v, keysForComparison)))}`)\n  }\n\n  return variant\n}\n\n\nexport function findOrGenerateStubbedVariantFor(\n    resourceId: string,\n    filter: IResourceDefinitionVariantOverModesFilterAsKey,\n    {resources}: IContext): IResourceDefinitionVariantOverModes {\n\n  return findOrGenerateStubbedVariantOn(\n      findResourceWith(resourceId, {resources} as unknown as IContext),\n      filter)\n}\n\nexport function findOrGenerateStubbedVariantOn(\n    resource: IResourceDefinition,\n    filter: IResourceDefinitionVariantOverModesFilterAsKey): IResourceDefinitionVariantOverModes {\n\n  try {\n    return findResourceVariantOverModesOn(resource, filter)\n  } catch (e) {\n    if (!(e instanceof ValidationException)) {\n      throw e\n    }\n\n    return Object.assign(cloneDeep(filter), {value: ''})\n  }\n}\n\nexport function discoverContentTypesFor(mode: SupportedMode, resource?: IResourceDefinition): SupportedContentType[] {\n\n  const\n      TEXT = SupportedContentType.TEXT,\n      AUDIO = SupportedContentType.AUDIO,\n      IMAGE = SupportedContentType.IMAGE,\n      VIDEO = SupportedContentType.VIDEO\n\n  const defaultModeMappings = { // @note -- contentType order inadvertently determines render order on UI.\n    [SupportedMode.IVR]: [AUDIO], // voice\n    [SupportedMode.SMS]: [TEXT],\n    [SupportedMode.USSD]: [TEXT],\n    [SupportedMode.OFFLINE]: [TEXT, IMAGE, VIDEO], // clipboard\n    [SupportedMode.RICH_MESSAGING]: [TEXT, IMAGE, VIDEO], // social\n  }\n\n  if (!resource || !resource.values.length) {\n    return defaultModeMappings[mode]\n  }\n\n  let contentTypeOverrides: {[key in SupportedMode]?: string[]} = {}\n\n  //TODO - think harder about this - what happens when a mode has a non standard content type - e.g. ivr on a log block\n  //What happens in a future localised resource world on things like LogBlock? Do we need a log resource value for every language?\n  contentTypeOverrides = resource.values.reduce((contentTypeOverrides, value) => {\n    value.modes.reduce((contentTypeOverrides, resourceMode) => {\n      if (!contentTypeOverrides[resourceMode]) {\n        contentTypeOverrides[resourceMode] = []\n      }\n      contentTypeOverrides[resourceMode]!.push(value.contentType)\n      return contentTypeOverrides\n    }, contentTypeOverrides)\n    return contentTypeOverrides\n  }, contentTypeOverrides)\n\n  return Object.assign(defaultModeMappings, contentTypeOverrides)[mode]\n}\n","const proxy = (name, args) => global.Lang\n  ? global.Lang[name].apply(global.Lang, args)\n  : args[0]\nconst createProxy = name => function () {\n  return proxy(name, arguments)\n}\n\nexport default {\n  filters: {\n    trans: createProxy('trans'),\n    choice: createProxy('choice'),\n  },\n  methods: {\n    trans(translation) {\n      return global.Lang.trans(translation)\n    },\n  },\n}\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TreeBuilderToolbar.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TreeBuilderToolbar.vue?vue&type=style&index=0&lang=scss&\"","var map = {\n\t\"./af\": \"2bfb\",\n\t\"./af.js\": \"2bfb\",\n\t\"./ar\": \"8e73\",\n\t\"./ar-dz\": \"a356\",\n\t\"./ar-dz.js\": \"a356\",\n\t\"./ar-kw\": \"423e\",\n\t\"./ar-kw.js\": \"423e\",\n\t\"./ar-ly\": \"1cfd\",\n\t\"./ar-ly.js\": \"1cfd\",\n\t\"./ar-ma\": \"0a84\",\n\t\"./ar-ma.js\": \"0a84\",\n\t\"./ar-sa\": \"8230\",\n\t\"./ar-sa.js\": \"8230\",\n\t\"./ar-tn\": \"6d83\",\n\t\"./ar-tn.js\": \"6d83\",\n\t\"./ar.js\": \"8e73\",\n\t\"./az\": \"485c\",\n\t\"./az.js\": \"485c\",\n\t\"./be\": \"1fc1\",\n\t\"./be.js\": \"1fc1\",\n\t\"./bg\": \"84aa\",\n\t\"./bg.js\": \"84aa\",\n\t\"./bm\": \"a7fa\",\n\t\"./bm.js\": \"a7fa\",\n\t\"./bn\": \"9043\",\n\t\"./bn.js\": \"9043\",\n\t\"./bo\": \"d26a\",\n\t\"./bo.js\": \"d26a\",\n\t\"./br\": \"6887\",\n\t\"./br.js\": \"6887\",\n\t\"./bs\": \"2554\",\n\t\"./bs.js\": \"2554\",\n\t\"./ca\": \"d716\",\n\t\"./ca.js\": \"d716\",\n\t\"./cs\": \"3c0d\",\n\t\"./cs.js\": \"3c0d\",\n\t\"./cv\": \"03ec\",\n\t\"./cv.js\": \"03ec\",\n\t\"./cy\": \"9797\",\n\t\"./cy.js\": \"9797\",\n\t\"./da\": \"0f14\",\n\t\"./da.js\": \"0f14\",\n\t\"./de\": \"b469\",\n\t\"./de-at\": \"b3eb\",\n\t\"./de-at.js\": \"b3eb\",\n\t\"./de-ch\": \"bb71\",\n\t\"./de-ch.js\": \"bb71\",\n\t\"./de.js\": \"b469\",\n\t\"./dv\": \"598a\",\n\t\"./dv.js\": \"598a\",\n\t\"./el\": \"8d47\",\n\t\"./el.js\": \"8d47\",\n\t\"./en-au\": \"0e6b\",\n\t\"./en-au.js\": \"0e6b\",\n\t\"./en-ca\": \"3886\",\n\t\"./en-ca.js\": \"3886\",\n\t\"./en-gb\": \"39a6\",\n\t\"./en-gb.js\": \"39a6\",\n\t\"./en-ie\": \"e1d3\",\n\t\"./en-ie.js\": \"e1d3\",\n\t\"./en-il\": \"7333\",\n\t\"./en-il.js\": \"7333\",\n\t\"./en-in\": \"ec2e\",\n\t\"./en-in.js\": \"ec2e\",\n\t\"./en-nz\": \"6f50\",\n\t\"./en-nz.js\": \"6f50\",\n\t\"./en-sg\": \"b7e9\",\n\t\"./en-sg.js\": \"b7e9\",\n\t\"./eo\": \"65db\",\n\t\"./eo.js\": \"65db\",\n\t\"./es\": \"898b\",\n\t\"./es-do\": \"0a3c\",\n\t\"./es-do.js\": \"0a3c\",\n\t\"./es-us\": \"55c9\",\n\t\"./es-us.js\": \"55c9\",\n\t\"./es.js\": \"898b\",\n\t\"./et\": \"ec18\",\n\t\"./et.js\": \"ec18\",\n\t\"./eu\": \"0ff2\",\n\t\"./eu.js\": \"0ff2\",\n\t\"./fa\": \"8df4\",\n\t\"./fa.js\": \"8df4\",\n\t\"./fi\": \"81e9\",\n\t\"./fi.js\": \"81e9\",\n\t\"./fil\": \"d69a\",\n\t\"./fil.js\": \"d69a\",\n\t\"./fo\": \"0721\",\n\t\"./fo.js\": \"0721\",\n\t\"./fr\": \"9f26\",\n\t\"./fr-ca\": \"d9f8\",\n\t\"./fr-ca.js\": \"d9f8\",\n\t\"./fr-ch\": \"0e49\",\n\t\"./fr-ch.js\": \"0e49\",\n\t\"./fr.js\": \"9f26\",\n\t\"./fy\": \"7118\",\n\t\"./fy.js\": \"7118\",\n\t\"./ga\": \"5120\",\n\t\"./ga.js\": \"5120\",\n\t\"./gd\": \"f6b4\",\n\t\"./gd.js\": \"f6b4\",\n\t\"./gl\": \"8840\",\n\t\"./gl.js\": \"8840\",\n\t\"./gom-deva\": \"aaf2\",\n\t\"./gom-deva.js\": \"aaf2\",\n\t\"./gom-latn\": \"0caa\",\n\t\"./gom-latn.js\": \"0caa\",\n\t\"./gu\": \"e0c5\",\n\t\"./gu.js\": \"e0c5\",\n\t\"./he\": \"c7aa\",\n\t\"./he.js\": \"c7aa\",\n\t\"./hi\": \"dc4d\",\n\t\"./hi.js\": \"dc4d\",\n\t\"./hr\": \"4ba9\",\n\t\"./hr.js\": \"4ba9\",\n\t\"./hu\": \"5b14\",\n\t\"./hu.js\": \"5b14\",\n\t\"./hy-am\": \"d6b6\",\n\t\"./hy-am.js\": \"d6b6\",\n\t\"./id\": \"5038\",\n\t\"./id.js\": \"5038\",\n\t\"./is\": \"0558\",\n\t\"./is.js\": \"0558\",\n\t\"./it\": \"6e98\",\n\t\"./it-ch\": \"6f12\",\n\t\"./it-ch.js\": \"6f12\",\n\t\"./it.js\": \"6e98\",\n\t\"./ja\": \"079e\",\n\t\"./ja.js\": \"079e\",\n\t\"./jv\": \"b540\",\n\t\"./jv.js\": \"b540\",\n\t\"./ka\": \"201b\",\n\t\"./ka.js\": \"201b\",\n\t\"./kk\": \"6d79\",\n\t\"./kk.js\": \"6d79\",\n\t\"./km\": \"e81d\",\n\t\"./km.js\": \"e81d\",\n\t\"./kn\": \"3e92\",\n\t\"./kn.js\": \"3e92\",\n\t\"./ko\": \"22f8\",\n\t\"./ko.js\": \"22f8\",\n\t\"./ku\": \"2421\",\n\t\"./ku.js\": \"2421\",\n\t\"./ky\": \"9609\",\n\t\"./ky.js\": \"9609\",\n\t\"./lb\": \"440c\",\n\t\"./lb.js\": \"440c\",\n\t\"./lo\": \"b29d\",\n\t\"./lo.js\": \"b29d\",\n\t\"./lt\": \"26f9\",\n\t\"./lt.js\": \"26f9\",\n\t\"./lv\": \"b97c\",\n\t\"./lv.js\": \"b97c\",\n\t\"./me\": \"293c\",\n\t\"./me.js\": \"293c\",\n\t\"./mi\": \"688b\",\n\t\"./mi.js\": \"688b\",\n\t\"./mk\": \"6909\",\n\t\"./mk.js\": \"6909\",\n\t\"./ml\": \"02fb\",\n\t\"./ml.js\": \"02fb\",\n\t\"./mn\": \"958b\",\n\t\"./mn.js\": \"958b\",\n\t\"./mr\": \"39bd\",\n\t\"./mr.js\": \"39bd\",\n\t\"./ms\": \"ebe4\",\n\t\"./ms-my\": \"6403\",\n\t\"./ms-my.js\": \"6403\",\n\t\"./ms.js\": \"ebe4\",\n\t\"./mt\": \"1b45\",\n\t\"./mt.js\": \"1b45\",\n\t\"./my\": \"8689\",\n\t\"./my.js\": \"8689\",\n\t\"./nb\": \"6ce3\",\n\t\"./nb.js\": \"6ce3\",\n\t\"./ne\": \"3a39\",\n\t\"./ne.js\": \"3a39\",\n\t\"./nl\": \"facd\",\n\t\"./nl-be\": \"db29\",\n\t\"./nl-be.js\": \"db29\",\n\t\"./nl.js\": \"facd\",\n\t\"./nn\": \"b84c\",\n\t\"./nn.js\": \"b84c\",\n\t\"./oc-lnc\": \"167b\",\n\t\"./oc-lnc.js\": \"167b\",\n\t\"./pa-in\": \"f3ff\",\n\t\"./pa-in.js\": \"f3ff\",\n\t\"./pl\": \"8d57\",\n\t\"./pl.js\": \"8d57\",\n\t\"./pt\": \"f260\",\n\t\"./pt-br\": \"d2d4\",\n\t\"./pt-br.js\": \"d2d4\",\n\t\"./pt.js\": \"f260\",\n\t\"./ro\": \"972c\",\n\t\"./ro.js\": \"972c\",\n\t\"./ru\": \"957c\",\n\t\"./ru.js\": \"957c\",\n\t\"./sd\": \"6784\",\n\t\"./sd.js\": \"6784\",\n\t\"./se\": \"ffff\",\n\t\"./se.js\": \"ffff\",\n\t\"./si\": \"eda5\",\n\t\"./si.js\": \"eda5\",\n\t\"./sk\": \"7be6\",\n\t\"./sk.js\": \"7be6\",\n\t\"./sl\": \"8155\",\n\t\"./sl.js\": \"8155\",\n\t\"./sq\": \"c8f3\",\n\t\"./sq.js\": \"c8f3\",\n\t\"./sr\": \"cf1e\",\n\t\"./sr-cyrl\": \"13e9\",\n\t\"./sr-cyrl.js\": \"13e9\",\n\t\"./sr.js\": \"cf1e\",\n\t\"./ss\": \"52bd\",\n\t\"./ss.js\": \"52bd\",\n\t\"./sv\": \"5fbd\",\n\t\"./sv.js\": \"5fbd\",\n\t\"./sw\": \"74dc\",\n\t\"./sw.js\": \"74dc\",\n\t\"./ta\": \"3de5\",\n\t\"./ta.js\": \"3de5\",\n\t\"./te\": \"5cbb\",\n\t\"./te.js\": \"5cbb\",\n\t\"./tet\": \"576c\",\n\t\"./tet.js\": \"576c\",\n\t\"./tg\": \"3b1b\",\n\t\"./tg.js\": \"3b1b\",\n\t\"./th\": \"10e8\",\n\t\"./th.js\": \"10e8\",\n\t\"./tk\": \"5aff\",\n\t\"./tk.js\": \"5aff\",\n\t\"./tl-ph\": \"0f38\",\n\t\"./tl-ph.js\": \"0f38\",\n\t\"./tlh\": \"cf75\",\n\t\"./tlh.js\": \"cf75\",\n\t\"./tr\": \"0e81\",\n\t\"./tr.js\": \"0e81\",\n\t\"./tzl\": \"cf51\",\n\t\"./tzl.js\": \"cf51\",\n\t\"./tzm\": \"c109\",\n\t\"./tzm-latn\": \"b53d\",\n\t\"./tzm-latn.js\": \"b53d\",\n\t\"./tzm.js\": \"c109\",\n\t\"./ug-cn\": \"6117\",\n\t\"./ug-cn.js\": \"6117\",\n\t\"./uk\": \"ada2\",\n\t\"./uk.js\": \"ada2\",\n\t\"./ur\": \"5294\",\n\t\"./ur.js\": \"5294\",\n\t\"./uz\": \"2e8c\",\n\t\"./uz-latn\": \"010e\",\n\t\"./uz-latn.js\": \"010e\",\n\t\"./uz.js\": \"2e8c\",\n\t\"./vi\": \"2921\",\n\t\"./vi.js\": \"2921\",\n\t\"./x-pseudo\": \"fd7e\",\n\t\"./x-pseudo.js\": \"fd7e\",\n\t\"./yo\": \"7f33\",\n\t\"./yo.js\": \"7f33\",\n\t\"./zh-cn\": \"5c3a\",\n\t\"./zh-cn.js\": \"5c3a\",\n\t\"./zh-hk\": \"49ab\",\n\t\"./zh-hk.js\": \"49ab\",\n\t\"./zh-mo\": \"3a6c\",\n\t\"./zh-mo.js\": \"3a6c\",\n\t\"./zh-tw\": \"90ea\",\n\t\"./zh-tw.js\": \"90ea\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"4678\";","// import audio from './audio'\n// import multimediaUpload from './multimediaUpload'\nimport trees from './trees'\n\nexport default {\n  modules: {\n    // audio,\n    // multimediaUpload,\n    trees, // actions isolated to vuej app\n  },\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Block.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Block.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BuilderCanvas.vue?vue&type=style&index=0&id=4cc35a95&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BuilderCanvas.vue?vue&type=style&index=0&id=4cc35a95&scoped=true&lang=css&\"","<template>\n  <div class=\"interaction-designer-contents\">\n    <tree-builder-toolbar/>\n\n    <div class=\"tree-sidebar-container\">\n      <div v-if=\"activeBlock\" class=\"tree-sidebar\"\n           :class=\"[`category-${blockClasses[activeBlock.type].category}`]\">\n        <div class=\"tree-sidebar-edit-block\"\n             :data-block-type=\"activeBlock && activeBlock.type\"\n             :data-for-block-id=\"activeBlock && activeBlock.uuid\">\n\n          <div v-if=\"activeBlock\"\n               :is=\"`Flow${activeBlock.type.replace(/\\\\/g, '')}`\"\n               :block=\"activeBlock\"\n               :flow=\"activeFlow\" />\n\n        </div>\n\n\n<!--        <tree-editor v-if=\"sidebarType === 'TreeEditor'\"-->\n<!--                     :jsonValidationResults=\"jsonValidationResults\"-->\n<!--                     :isTreeValid=\"isTreeValid\"/>-->\n\n<!--        <tree-viewer v-if=\"sidebarType === 'TreeViewer'\"/>-->\n\n<!--        <block-viewer-->\n<!--          :key=\"jsKey\"-->\n<!--          v-if=\"sidebarType === 'BlockViewer'\"-->\n<!--          :data-for-block-id=\"jsKey\" />-->\n\n      </div>\n      <div v-else class=\"tree-sidebar\">\n        <div class=\"tree-sidebar-edit-block\">\n          <flow-editor :flow=\"activeFlow\" />\n        </div>\n      </div>\n    </div>\n\n    <div class=\"tree-contents\"\n         :x-style=\"{'min-height': `${designerWorkspaceHeight}px`}\">\n      <builder-canvas @click.native=\"handleCanvasSelected\" />\n    </div>\n  </div>\n</template>\n\n<script>\n  import lang from '@/lib/filters/lang'\n  import lodash, {forEach, invoke} from 'lodash'\n  import Vue from 'vue'\n  import {mapActions, mapGetters, mapMutations, mapState} from 'vuex'\n  // import {affix as Affix} from 'vue-strap'\n  // import {SelectOneResponseBlock} from '../components/interaction-designer/block-types/MobilePrimitives_SelectOneResponseBlock.vue'\n\n  // import * as BlockTypes from './block-types'\n  // import JsPlumbBlock from './JsPlumbBlock'\n\n  import treesStore from '@/store/trees' // needs to be registered separately because it doesn't currently support namespacing\n  import flowStore from '@/store/flow'\n  import builderStore from '@/store/builder'\n\n\n  // import TreeEditor from './TreeEditor'\n  // import TreeViewer from './TreeViewer'\n  // import LegacyInteractionDesigner from './InteractionDesigner.legacy'\n  // import TreeUpdateConflictModal from './TreeUpdateConflictModal';\n  import TreeBuilderToolbar from '@/components/interaction-designer/toolbar/TreeBuilderToolbar.vue'\n  import FlowEditor from '@/components/interaction-designer/flow-editors/FlowEditor.vue'\n  import {BuilderCanvas} from '@/components/interaction-designer/BuilderCanvas'\n\n  // import '../TreeDiffLogger'\n\n  export default {\n    props: ['id', 'mode'],\n\n    mixins: [lang],\n\n    components: {\n      // ...BlockTypes,\n      // Affix,\n      // JsPlumbBlock,\n      // TreeEditor,\n      // TreeViewer,\n      TreeBuilderToolbar,\n      BuilderCanvas,\n      FlowEditor,\n      // TreeUpdateConflictModal,\n    },\n\n    data() {\n      return {\n        pureVuejsBlocks: [ // todo: move this to BlockClassDetails spec // an inversion can be \"legacy types\"\n          'CallBackWithCallCenterBlock',\n          'CollaborativeFilteringQuestionBlock',\n          'CollaborativeFilteringRatingBlock',\n          'CollaborativeFilteringRatioBranchBlock',\n          'CreateSubscriberBlock',\n          'CurrentTimeBranchBlock',\n          'DirectorySelectionBlock',\n          'EntitySelectionBlock',\n          'GenerateCodeBlock',\n          'GroupPropertyBlock',\n          'SubscriberPropertiesSnapshotBlock',\n          'SubscriberPropertyBlock',\n          'SummaryBlock',\n          'ValidateCodeBlock',\n          'WebhookBlock',\n          'WebhookContentBlock',\n          'RecordGroupMessageBlock',\n          'PlayGroupMessageBlock',\n        ]}\n    },\n\n    computed: {\n      ...mapGetters([\n        'selectedBlock',\n        'isEditable',\n        'hasChanges',\n        'hasIssues',\n        'isTreeSaving',\n        'isTreeValid',\n        'jsonValidationResults',\n        'validationResults',\n      ]),\n      ...mapState({\n\n        // todo: we'll need to do width as well and use margin-right:365 to allow for sidebar\n        designerWorkspaceHeight: ({trees: {tree, ui}}) => ui.designerWorkspaceHeight,\n\n\n\n        tree: ({trees: {tree, ui}}) => tree,\n        validationResultsEmptyTree: ({trees: {tree, ui}}) => !tree.blocks.length,\n        hasVoice: ({trees: {tree}}) => tree.details.hasVoice,\n        hasSms: ({trees: {tree}}) => tree.details.hasSms,\n        hasUssd: ({trees: {tree}}) => tree.details.hasUssd,\n        hasSocial: ({trees: {tree}}) => tree.details.hasSocial,\n        hasClipboard: ({trees: {tree}}) => tree.details.hasClipboard,\n        blockClasses:  ({trees: {ui}}) => ui.blockClasses,\n      }),\n\n      ...mapGetters('flow', ['activeFlow']),\n      ...mapGetters('builder', ['activeBlock']),\n\n      jsKey() {\n        return lodash.get(this.selectedBlock, 'jsKey')\n      },\n\n      isPureVueBlock() { // pure vuejs block types handle readonly mode on their own\n        return _.includes(this.pureVuejsBlocks, lodash.get(this.selectedBlock, 'type'))\n      },\n\n      sidebarType() {\n        const\n            blockType = lodash.get(this.selectedBlock, 'type'),\n            blockViewerType = blockType && (this.isPureVueBlock ? blockType : 'BlockViewer')\n\n        return this.isEditable\n            ? blockType || 'TreeEditor'\n            : blockViewerType || 'TreeViewer'\n      },\n    },\n\n    created() {\n      const {$store} = this\n      const modules = {\n        // `treesStore` was originally implemented globally, expecting it's state at root\n        ...treesStore.modules,\n        flow: flowStore,\n        builder: builderStore}\n\n      forEach(modules, (v, k) =>\n        !$store.hasModule(k) && $store.registerModule(k, v))\n\n      global.builder = this // initialize global reference for legacy + debugging\n\n      this.registerBlockTypes()\n\n      this.initializeTreeModel()\n      this.updateIsEditableFromParams(this.mode) // `this.mode` comes from captured param in js-routes\n    },\n\n    activated() {\n      this.deselectBlocks() // todo: remove once we have jsKey in our js-route\n    },\n\n    /** @note - mixin's mount() is called _before_ local mount() (eg. InteractionDesigner.legacy::mount() is 1st) */\n    mounted() {\n      this.hoistResourceViewerToPushState.bind(this, this.$route.hash)\n      this.deselectBlocks()\n      this.discoverTallestBlockForDesignerWorkspaceHeight({aboveTallest: true})\n\n      console.debug('Vuej tree interaction designer mounted!')\n\t\t},\n\n    methods: {\n        ...mapMutations(['deselectBlocks']),\n        ...mapMutations('builder', ['activateBlock']),\n\n        ...mapActions([\n          'attemptSaveTree',\n          'discoverTallestBlockForDesignerWorkspaceHeight',\n          'initializeTreeModel']),\n\n      async registerBlockTypes() {\n        const {blockClasses} = this\n\n        forEach(blockClasses, async ({type}) => {\n          const normalizedType = type.replace('\\\\', '_')\n          const typeWithoutSeparators = type.replace(/\\\\/g, '')\n          const exported = await import(\n            `../components/interaction-designer/block-types/${normalizedType}Block.vue`)\n\n          invoke(exported, 'install', this)\n          Vue.component(`Flow${typeWithoutSeparators}`, exported.default)\n        })\n      },\n\n      handleCanvasSelected({target}) {\n        if (!target.classList.contains('builder-canvas')) {\n          console.debug('InteractionDesigner', 'Non-canvas selection mitigated')\n          return\n        }\n\n        this.activateBlock({blockId: null})\n      },\n\n      updateIsEditableFromParams(mode) {\n        const isEditable = +this.discoverIsEditableFrom(mode, this.$route.hash, !!app.ui.isEditableLocked)\n        this.$store.commit('updateIsEditable', {value: isEditable})\n      },\n\n      /** --------------------------------| has-editable-locked | not-editable-locked |\n       | mode-is-absent+view-url-suffix   |        0            |     0               |\n       | mode-is-absent+edit-url-suffix   |        0 (r=>view)  |     1               |\n       | mode-is-absent+absent-url-suffix |        0 (r=>view)  |     0 (r=>view)     | <- Equivalent to /view\n       | mode-is-view                     |        0            |     0               |\n       | mode-is-view+edit-url-suffix     |        0            |     0               |\n       | mode-is-edit                     |        0 (r=>view)  |     1               |\n       | mode-is-edit+view-url-suffix     |        0 (r=>view)  |     1               |\n       ------------------------------------------------------------------------------ */\n      discoverIsEditableFrom(mode, hash, isEditableLocked) {\n        if (isEditableLocked) {\n          return false\n        }\n\n        return !isEditableLocked && mode === 'edit'|| !mode && lodash.endsWith(hash, '/edit')\n      },\n\n\t\t  hoistResourceViewerToPushState(hash) {\n        if (!_.endsWith(hash, '/resource-viewer')) {\n          return\n        }\n\n        this.$router.history.replace(`/trees/${this.id}/resource-viewer`)\n      },\n    },\n\t}\n</script>\n\n<style src=\"bootstrap/dist/css/bootstrap.css\"></style>\n<style src=\"bootstrap/dist/css/bootstrap-theme.css\"></style>\n<!--<style src=\"../css/voto3.css\"></style>-->\n<!--<style src=\"../css/InteractionDesigner.css\"></style>-->\n\n<style lang=\"scss\">\n  // Colors + dimensions\n  $dot-size: 1px;\n  $dot-space: 22px;\n  $dot-color: #333;\n  $bg-color: #fcfcfc;\n\n  $toolbar-height: 56px;\n  $sidebar-width: 365px;\n\n  body {\n    background:\n      linear-gradient(90deg, $bg-color ($dot-space - $dot-size), transparent 1%) center,\n      linear-gradient($bg-color ($dot-space - $dot-size), transparent 1%) center, $dot-color;\n    background-size: $dot-space $dot-space;\n  }\n\n  .tree-sidebar-container {\n    position: fixed;\n    right: 0;\n    top: 0;\n    z-index: 2*10;\n\n    height: 100vh;\n    width: $sidebar-width;\n    overflow-y: scroll;\n\n    padding: 1em;\n    padding-top: $toolbar-height;\n    transition: right 200ms ease-in-out;\n\n    .tree-sidebar {\n      background-color: #eee;\n      border: 1px solid lightgray;\n      border-radius: 0;\n      box-shadow: 0 3px 6px #CACACA;\n\n      padding: 1em;\n      margin-top: 1em;\n\n      transition:\n        200ms background-color ease-in-out,\n        200ms border-color ease-in-out,\n        200ms border-radius ease-in-out;\n    }\n\n    &.slide-out {\n      right: -$sidebar-width;\n    }\n  }\n\n  .tree-builder-toolbar {\n    position: fixed;\n    z-index: 3*10;\n    left: 0;\n    top: 0;\n\n    width: 100vw;\n\n    border-bottom: 1px solid darkgrey;\n    background: #eee;\n\n    box-shadow: 0 3px 6px #CACACA;\n  }\n\n\n  // color categorizations\n  $category-0-faint: #fbfdfb;\n  $category-0-light: #97BD8A;\n  $category-0-dark: #38542f;\n  $category-1-faint: #fdfdfe;\n  $category-1-light: #6897BB;\n  $category-1-dark: #30516a;\n  $category-2-faint: #fdfbf8;\n  $category-2-light: #C69557;\n  $category-2-dark: #6e4e25;\n\n  .tree-sidebar-container {\n    .tree-sidebar {\n      &.category-0 {\n        border-color: $category-0-light;\n        background-color: $category-0-faint;\n        border-radius: 0.3em;\n\n        h3 {\n          color: $category-0-dark;\n        }\n      }\n\n      &.category-1 {\n        border-color: $category-1-light;\n        background-color: $category-1-faint;\n        border-radius: 0.3em;\n\n        h3 {\n          color: $category-1-dark;\n        }\n      }\n\n      &.category-2 {\n        border-color: $category-2-light;\n        background-color: $category-2-faint;\n        border-radius: 0.3em;\n\n        h3 {\n          color: $category-2-dark;\n        }\n      }\n    }\n  }\n\n  .block {\n    @mixin block-category($i, $faint, $light, $dark) {\n      &.category-#{$i} {\n        border-color: $light;\n\n        .block-type {\n          color: $light;\n        }\n\n        .block-exits .block-exit {\n          .block-exit-tag {\n            background-color: $light;\n          }\n\n          &.activated {\n            border-color: $light;\n          }\n        }\n\n        .block-target:hover {\n          border: 1px dashed $light;\n        }\n\n        &.active {\n          background-color: $faint;\n        }\n      }\n    }\n\n    @include block-category(0, $category-0-faint, $category-0-light, $category-0-dark);\n    @include block-category(1, $category-1-faint, $category-1-light, $category-1-dark);\n    @include block-category(2, $category-2-faint, $category-2-light, $category-2-dark);\n  }\n\n  // @note - these styles have been extracted so the output can be reused between storybook and voto5\n  /*@import \"resources/assets/js/trees/components/InteractionDesigner.scss\";*/\n</style>\n","import axios, {CancelToken} from 'axios'\nimport lodash from 'lodash'\nimport qs from 'qs'\nimport Vue from 'vue'\n\n\nexport const Statuses = { // todo: are these values odd?\n  PENDING: -1,\n  UNINITIALIZED: 0,\n  SUCCESS: 1,\n  FAILURE: 2\n}\n\nexport const FlightStatusToNameMap = {\n  [Statuses.PENDING]: 'pending',\n  [Statuses.UNINITIALIZED]: 'uninitialized',\n  [Statuses.SUCCESS]: 'success',\n  [Statuses.FAILURE]: 'failure'\n}\n\nexport default {\n  namespaced: true,\n\n  state() {\n    return {flights: {}}\n  },\n\n  mutations: {\n    create({flights}, {key, promise, cancellation}) {\n      Vue.set(flights, key, {\n        status: Statuses.PENDING,\n        progress: 0,\n        error: null,\n        promise,\n        cancel: cancellation})\n    },\n\n    cancel({flights}, {key}) {\n      lodash.invoke(flights, `${key}.cancel`)\n    },\n  },\n\n  actions: {\n    async create({commit, dispatch, state: {flights}}, {key, promise, cancellation}) {\n      // todo: figure out queuing + streaming\n      // todo: convert to .push() + flights.invoke('cancel')\n\n      const previousFlight = flights[key]\n      if (previousFlight && cancellation) {\n        previousFlight.cancel()\n      }\n\n      commit('create', {key, promise, cancellation})\n      const flight = flights[key]\n      flight.id = `flight-${lodash.uniqueId()}`\n\n      try {\n        const response = await promise\n        Object.assign(flight, {status: Statuses.SUCCESS, progress: 100})\n\n        return response // surface response to next promises\n      } catch (e) { // failed request\n        flight.error = e\n        flight.status = Statuses.FAILURE\n        return null\n      }\n    },\n\n    createCancellableXhr({commit, dispatch, state}, config) {\n      const\n          {key} = config,\n          {token, cancel: cancellation} = CancelToken.source(),\n          promise = axios.request({\n            paramsSerializer: p => qs.stringify(p, {arrayFormat: 'bracket'}),\n            cancelToken: token,\n            onUploadProgress: null, // todo: migrate file upload to use this flights api\n            onDownloadProgress: null,\n            headers: {'X-Requested-With': 'XMLHttpRequest'},\n            ...config})\n\n      return dispatch('create', {key, promise, cancellation})\n    },\n\n    resetStatus({commit, dispatch, state: {flights}}, {key}) {\n      if (!flights[key]) {\n        return\n      }\n      flights[key].status = Statuses.UNINITIALIZED\n      commit('cancel', {key})\n\n\n      // should rather be a m reset mutation to reset other values as well as cancel()\n      // eg. (value, error, progress, status, cancel-token), the whole shebang!\n\n    },\n\n    cancelAll({commit, dispatch, state: {flights}}) {\n      for (const key of Object.keys(flights)) {\n       commit('cancel', {key})\n      }\n    },\n  },\n  getters: {\n    hasPendingFlight(state) {\n      return Object.values(state.flights).find(f => f.status === Statuses.PENDING)\n    },\n  },\n}\n","import axios from 'axios'\nimport lodash from 'lodash'\nimport {get, set} from 'lodash'\nimport Vue from 'vue'\n\nimport {routeFrom} from '@/lib/mixins/Routes'\nimport flights from 'store/common/flight-monitor'\n\nimport flow from 'lodash/fp/flow'\nimport pickBy from 'lodash/fp/pickBy'\nimport _every from 'lodash/fp/every'\nimport {bootstrapLegacyGlobalDependencies} from './bootstrap-legacy-global-dependencies'\n\nconst every = _every.convert({cap: false})\n\nclass ValidationError extends Error {\n  constructor(validationResults) {\n    super()\n    this.validationResults = validationResults\n  }\n}\n\nexport default {\n  modules: {flights},\n\n  state() {\n    const {\n      app,\n      __AUDIO__: audio,\n      __TREES_UI__: ui,\n    } = bootstrapLegacyGlobalDependencies()\n\n    // todo: audio recording feature is likely to be unavailable for standalone app - How do we want to isolate these?\n    set(app, 'audioChoice.audioLibrary', audio.library)\n    set(app, 'audioChoice.recorderList', audio.recording.recorders)\n\n    lodash.defaultsDeep(ui, {\n      audioFiles: audio.library,\n      callCenterQueues: null,\n      previousTreeJson: JSON.stringify(ui.originalTreeJson),\n      /** @note - `validationResults` has two states:\n       *            (1) `null` - indicating we have yet to save the tree since loading the page\n       *            (2) non-null or `[]` - indicating the tree has been saved and has gone through server-side validation */\n      validationResults: ui.originalValidationResults, // todo: this is an empty list on page load, and shouldn't be?\n      originalTreeJsonValidationResults: null,\n      selectedBlock: null,\n      designerWorkspaceHeight: 1400,\n      currentZoom: 1,\n      batchMatchAudio: {\n        results: null,\n        status: 0,\n        message: null,\n        isFailure: false,\n        isPending: false,\n        isComplete: false\n      },\n      treeUpdateConflict: null,\n      enabledFeatures: [\n          /** @see \\Voto5\\Http\\Controllers\\V3TreesController::get_editTree */\n      ],\n    })\n    return {\n      tree: null,\n      ui,\n    }\n  },\n\n  getters: {\n\n    isFeatureCallCenterQueuesEnabled: ({ui}) => lodash.find(ui.enabledFeatures, feature => feature === 'callCenterQueues'),\n    isFeatureCallToRecordEnabled: ({ui}) => lodash.find(ui.enabledFeatures, feature => feature === 'callToRecord'),\n    isFeatureMultimediaUploadEnabled: ({ui}) => lodash.find(ui.enabledFeatures, feature => feature === 'multimediaUpload'),\n    isFeatureTreesBatchLinkAudioEnabled: ({ui}) => lodash.find(ui.enabledFeatures, feature => feature === 'treesBatchLinkAudio'),\n    isFeatureAddSubscriberPropertyFieldEnabled: ({ui}) => lodash.find(ui.enabledFeatures, feature => feature === 'addSubscriberPropertyField'),\n    isFeatureFloipPushEnabled: ({ui}) => lodash.find(ui.enabledFeatures, feature => feature === 'floipPush'),\n    isFeatureTreeSaveEnabled: ({ui}) => lodash.find(ui.enabledFeatures, feature => feature === 'treeSave'),\n    isFeatureTreeSendEnabled: ({ui}) => lodash.find(ui.enabledFeatures, feature => feature === 'treeSend'),\n    isFeatureTreeDuplicateEnabled: ({ui}) => lodash.find(ui.enabledFeatures, feature => feature === 'treeDuplicate'),\n    isFeatureTreeViewVersionsEnabled: ({ui}) => lodash.find(ui.enabledFeatures, feature => feature === 'treeViewVersions'),\n    isFeatureTreeDuplicateOfEnabled: ({ui}) => lodash.find(ui.enabledFeatures, feature => feature === 'treeDuplicateOf'),\n    isFeatureUpdateInteractionTotalsEnabled: ({ui}) => lodash.find(ui.enabledFeatures, feature => feature === 'updateInteractionTotals'),\n    isFeatureAudioUploadEnabled: ({ui}) => lodash.find(ui.enabledFeatures, feature => feature === 'audioUpload'),\n    isFeatureViewResultsEnabled: ({ui}) => lodash.find(ui.enabledFeatures, feature => feature === 'viewResults'),\n\n\t\tselectedBlock: ({tree, ui}, getters, rootState) => lodash.find(get(tree, 'blocks', []), {jsKey: ui.selectedBlock}),\n\n    subscriberPropertyFields: ({ui}) => lodash.get(ui, \"subscriberPropertyFields\"),\n\n\t\tinteractiveBlockClasses: ({ui}, getters, rootState) => lodash.pickBy(ui.blockClasses, (value, key) => value.is_interactive),\n\n\t\tinteractiveBlocksInTree: ({tree}, {interactiveBlockClasses}, rootState) =>\n\t\t\t\tlodash.filter(tree.blocks, b =>\n\t\t\t\t\t\tlodash.includes(Object.keys(interactiveBlockClasses), b.type)\n\t\t\t\t),\n\n    isEditable: ({ui}) => !!ui.isEditable,\n\n    // todo: trip a debounced version of this (for larger trees)\n    // todo: which is faster lodash deep isEqual or JSON.stringify() ?\n    hasChanges: ({tree, ui}) => ui.previousTreeJson !== JSON.stringify(tree),\n\n    hasIssues({tree, ui}) {\n      const {\n        validationResults,\n        originalValidationResults: validationResultsFromPageLoad,\n        validationResults: hasSavedSinceLoad,\n      } = ui\n\n      return (hasSavedSinceLoad && !_.isEmpty(validationResults))\n          || (!hasSavedSinceLoad && !_.isEmpty(validationResultsFromPageLoad))\n          || !tree.blocks.length\n    },\n\n    isTreeSaving(state) {\n      return state.ui.saveCurrentlyInProgress\n    },\n\n    hasClipboard: ({tree}) => tree.details.hasClipboard,\n\n    isSelectedBlockSupportedForSummary({ui}, getters) {\n      if (!getters.selectedBlock) {\n        return false\n      }\n      return lodash.get(ui.blockClasses[getters.selectedBlock.type], 'isSummarizable', false)\n    },\n\n    canSelectedBlockSetSubscriberProperty({ui}, getters) {\n      if (!getters.selectedBlock) {\n        return false\n      }\n      return lodash.get(ui.blockClasses[getters.selectedBlock.type], 'canSetSubscriberProperty', false)\n    },\n\n    languageSelectors: ({ui}) => ui.languageSelectors,\n\n    isBlockAvailableByBlockClass(state) {\n      return lodash.mapValues(state.ui.blockClasses, (blockClass) => {\n        const contentTypesToEnabledStatus = lodash.get(blockClass, 'isEnabledForContentType', [])\n\n        return flow(\n            pickBy((isEnabled, contentType) => state.tree.details[`has${lodash.startCase(contentType)}`]),\n            every((isEnabled, contentType) => contentTypesToEnabledStatus[contentType]),\n        )(contentTypesToEnabledStatus)\n      })\n    },\n\n    // todo: is this an accurate inverse of trees::hasIssues from ResourceViewer ?\n    isTreeValid(state) {\n      return state.tree.blocks.length\n          && !state.ui.originalTreeJsonValidationResults\n          && lodash.isEmpty(state.ui.validationResults)\n    },\n\n    jsonValidationResults(state) {\n      return state.ui.originalTreeJsonValidationResults\n    },\n\n    // Duplicating \\Voto\\Core\\Trees\\Tree::getTitle\n    treeTitle: ({tree}) => tree.title || 'Untitled Tree',\n\n    languages: ({ui}) => ui.languages || [],\n    availableAudio: ({ui}) => ui.audioFiles || [],\n\n\n    validationResults: ({ui}) => ui.validationResults,\n\n    treeCreatedAt: ({tree}) => tree.createdAt.date,\n    treeEditedAt: ({tree}) => tree.editedAt.date,\n    treeUpdatedAt: ({tree}) => tree.updatedAt.date,\n  },\n\n  mutations: {\n    setWorkingTree(state, {tree: treeData}) {\n      const tree = new app.Tree(treeData)\n      /** @property app.tree\n       *  @deprecated We'll only need this until we've eradicated references in legacy. */\n      app.tree = tree\n      state.tree = tree.attributes\n    },\n\n    setDesignerWorkspaceHeight({tree, ui}, {height}) {\n      ui.designerWorkspaceHeight = height\n    },\n\n    setSelectedBlock({tree, ui}, {jsKey}) {\n      ui.selectedBlock = jsKey || ''\n    },\n\n    deselectBlocks({tree, ui}) {\n      ui.selectedBlock = ''\n    },\n\n    updateTreeDetailsWith({tree, ui}, {key, value}) {\n      tree.details[key] = value\n    },\n\n    updateBlockCustomDataFor({tree, ui}, {jsKey, key, value}) {\n      const block = lodash.find(tree.blocks, {jsKey})\n      Vue.set(block.customData, key, value)\n    },\n\n    updateBlockCustomDataWithNestedKeyFor({tree, ui}, {jsKey, nestedKey, value}) {\n      const block = lodash.find(tree.blocks, {jsKey})\n      let customData = lodash.cloneDeep(block.customData)\n      lodash.set(customData, nestedKey, value)\n      block.customData = customData\n    },\n\n\t\tupdateBlockUiDataFor({tree, ui}, {jsKey, key, value}) {\n      const block = lodash.find(tree.blocks, {jsKey})\n      Vue.set(block.uiData, key, value)\n    },\n\n\t\tupdateMaxNumericDigits({tree, ui}, {value}) {\n\t\t\tconst selectedBlock = lodash.find(tree.blocks, {jsKey: ui.selectedBlock})\n\t\t\tVue.set(selectedBlock, 'customData.maxNumericDigits', value)\n\t\t},\n\n\t\tupdateBlockContentFor({tree, ui}, {type, langId, jsKey, value}) {\n\t\t\tconst block = lodash.find(tree.blocks, {jsKey})\n\t\t\tif (type === 'social') { //social has nested text content\n\t\t\t\tif (!block.socialContent[langId]) {\n\t\t\t\t\tVue.set(block.socialContent, langId, {})\n\t\t\t\t}\n\t\t\t\tVue.set(block.socialContent[langId], 'text', value)\n\t\t\t} else {\n\t\t\t\tblock[`${type}Content`] = {\n\t\t\t\t\t...block[`${type}Content`],\n\t\t\t\t\t...{[langId]: value}}\n\t\t\t}\n\t\t},\n\n    updateBlockFileContentFor({tree, ui}, {langId, jsKey, fileUrl, fileId, fileType, mimeType, contentType}) {\n\t\t\tconst block = lodash.find(tree.blocks, {jsKey})\n\n\n      let content = lodash.get(block, contentType + 'Content')\n\t\t\tif (content[langId] === undefined) {\n\t\t\t\tVue.set(content, langId, {})\n\t\t\t}\n\t\t\tVue.set(content[langId], 'fileUrl', fileUrl)\n      Vue.set(content[langId], 'fileId', fileId)\n\t\t\tVue.set(content[langId], 'fileType', fileType)\n\t\t\tVue.set(content[langId], 'mimeType', mimeType)\n\t\t},\n\n\t\tupdateBlockFileContentForAllLanguages({tree, ui}, {jsKey, fileUrl, fileId, fileType, mimeType, contentType}) {\n\t\t\tconst block = lodash.find(tree.blocks, {jsKey})\n\n\n      let content = lodash.get(block, contentType + 'Content')\n\n      Vue.set(content, 'allLanguagesFileUrl', fileUrl)\n      Vue.set(content, 'allLanguagesFileId', fileId)\n\t\t\tVue.set(content, 'allLanguagesFileType', fileType)\n\t\t\tVue.set(content, 'allLanguagesMimeType', mimeType)\n\t\t},\n\n\t\tinitBlockAutoGenStateFor({tree, ui}, {type, jsKey}) {\n\t\t\tconst block = lodash.find(tree.blocks, {jsKey})\n\t\t\tVue.set(block, `${type}AutogenLangs`, [])\n\t\t},\n\n\t\tupdateBlockAutoGenStateFor({tree, ui}, {type, langId, jsKey, value: enable}) {\n\t\t\tconst block = lodash.find(tree.blocks, {jsKey}),\n\t\t\t\t\ti = block[`${type}AutogenLangs`].indexOf(+langId),\n\t\t\t\t\tabsent = i === -1\n\n\t\t\tif (enable) {\n\t\t\t\tabsent && block[`${type}AutogenLangs`].push(+langId)\n\t\t\t} else {\n\t\t\t\t!absent && block[`${type}AutogenLangs`].splice(i, 1)\n\t\t\t}\n\t\t},\n\n\t\tupdateAudioFileFor({tree, ui}, {langId, jsKey, value}) {\n\t\t\tconst block = lodash.find(tree.blocks, {jsKey})\n\n\t\t\tblock.audioFiles = { // schedules a redraw\n\t\t\t\t...block.audioFiles,\n\t\t\t\t...{[langId]: value}}\n\n\t\t\t// using delete because we depend on audioFile key presence in legacy\n\t\t\t!value && delete block.audioFiles[langId]\n\t\t},\n\n\t\tupdateReviewedStateFor({tree, ui}, {langId, jsKey, value}) {\n\t\t\tconst {customData: data} = lodash.find(tree.blocks, {jsKey})\n\t\t\tdata.reviewed[langId] = value\n\t\t},\n\n\t\tsetBatchMatchAudioResultsTo({tree, ui}, {value, status, message}) {\n\t\t\t// ui.batchMatchAudioStatus = value\n\t\t\tlodash.extend(ui.batchMatchAudio, {\n\t\t\t\tresults: value,\n\t\t\t\tstatus: status,\n\t\t\t\tmessage: message,\n\t\t\t\tisEmpty: lodash.chain(value) // isEmpty === {\"block_1504124559063_84\":{\"7\":null,\"8\":null,\"9\":null}\n\t\t\t\t\t\t.values()\n\t\t\t\t\t\t.map((matchesByLang) => lodash.values(matchesByLang))\n\t\t\t\t\t\t.flatten()\n\t\t\t\t\t\t.filter()\n\t\t\t\t\t\t.isEmpty()\n\t\t\t\t\t\t.value(),\n\t\t\t\tisFailure: status === 0,\n\t\t\t\tisPending: status === -1,\n\t\t\t\tisComplete: status === 1})\n\t\t},\n\n\t\tupdateIsEditable({ui}, {value}) {\n    \tui.isEditable = value\n\t\t},\n\n\t\tsetContentTypeEnabled({tree}, {contentType, isEnabled}) {\n\t\t\ttree[`has${lodash.upperFirst(contentType)}`] = +isEnabled\n    },\n\n    addSubscriberPropertyField({ui}, {property}) {\n      ui.subscriberPropertyFields.push(property)\n    },\n\n    setTreeUpdateConflictStatus(state, {treeUpdateConflict}) {\n      state.ui.treeUpdateConflict =  treeUpdateConflict;\n    },\n\n    setInteractionTotals(state, {interactionTotals}) {\n      Vue.set(state.ui, 'interactionTotals', interactionTotals)\n    },\n  },\n\n\tactions: {\n    initializeTreeModel({dispatch, state: {ui: {isTreeImport}}}) {\n      require('./10-trees-model')\n      // todo: this is also included via `../public/dist/js/legacy/trees` on tree-builder\n      //       but we don't include that beast in storybook b/c of global dependency hierarchy\n      //       global lodash is the only dependency, and they magically attach themselves onto\n      //       root self regardless of whether or not it's being managed by module loader.\n      //       Odd behaviour, but works out in this case.\n      require('./12-trees-helpers')\n\n      isTreeImport\n          ? dispatch('initializeTreeModelFromImport')\n          : dispatch('initializeTreeModelFromOriginalTreeJson')\n    },\n\n    // @note - these are the only actions that are outside the realm of an existing tree.\n    initializeTreeModelFromOriginalTreeJson({commit, dispatch, state: {ui}}) {\n      commit('setWorkingTree', {tree: ui.originalTreeJson})\n      dispatch('upgradeTreeModel') // => this kinda sucks, because now we're dispatching vuex notifications for all these upgrades\n    },\n\n    initializeTreeModelFromImport({commit, dispatch, state: {ui}}) {\n      const schema = app.Tree.createJsonSchemaFor(\n          _.pluck(ui.languages, 'id'),\n          _.keys(ui.blockClasses)),\n          tree = app.Tree._mergeAndSanitizeImportedInto(ui.originalTreeJson, ui.importTreeJson)\n\n      try {\n        app.Tree.validateTreeData(tree, schema)\n        console.debug('Tree validation succeeded!')\n\n        commit('setWorkingTree', {tree})\n        dispatch('upgradeTreeModel') // todo: this kinda sucks, because now we're dispatching vuex notifications for all these upgrades\n        dispatch('attemptImportPersistence')\n      } catch (validation) {\n        console.error('Tree validation failed!', validation)\n        ui.originalTreeJsonValidationResults = validation\n        // default initialization solely because a tree is prerequisite to continuation\n        dispatch('initializeTreeModelFromOriginalTreeJson')\n      }\n    },\n\n    async attemptImportPersistence({commit, dispatch, state: {tree, ui, ui: {\n      isTreeImport,\n      originalTreeJsonValidationResults\n    }}}) {\n      const hasImportValidationErrors = !!originalTreeJsonValidationResults\n      if (!isTreeImport || hasImportValidationErrors) {\n        return\n      }\n\n      // persist imported tree with valid json\n      const validationResults = await dispatch('attemptSaveTree')\n      console.debug('Tree import save validation results', validationResults)\n      // hook into validation rendering that happens once view is initialized\n      ui.originalValidationResults = validationResults\n    },\n\n    // Hoist data to adhere to latest expectations\n    upgradeTreeModel() {\n      app.tree.upgrade()\n    },\n\n    discoverTallestBlockForDesignerWorkspaceHeight({commit, dispatch, state}, {buffer=350, aboveTallest}) {\n      const\n          initialHeight = aboveTallest ? app.tree.getTallestBlockPosition() : 0,\n          minHeight = 1000,\n          height = Math.max(buffer + initialHeight, minHeight);\n\n      commit('setDesignerWorkspaceHeight', {height})\n    },\n\n    uiChanged(context, {msg}) {\n      console.log('app.ui.change [via vuex.trees.uiChanged]', msg)\n    },\n\n    async attemptSaveTree({dispatch, getters: {hasChanges, isFeatureTreeSaveEnabled}, state: {ui}}) {\n      if (!ui.isEditable || !hasChanges) {\n        console.info('trees', 'Decided against unnecessary tree save!')\n        return // non-promise response implies no in-flight request -- aka no-op.\n      }\n\n      if (!isFeatureTreeSaveEnabled) {\n        console.info('Feature `treeSave` is disabled')\n        return\n      }\n\n      /*\n       * todo: we can't double-chain our jQuery adapter, unless we put more time into it -- then-ing off jQuery adapted\n       *    results in another raw jQuery promise :P\n       * todo: debounce this?\n       */\n      const {app} = global\n\n      try {\n        await dispatch('validateTree')\n        dispatch('saveTree')\n      } catch (error) {\n        if (error instanceof ValidationError) {\n          app.dataControl._setValidationResultsForUI(error.validationResults)\n        } else {\n          throw error\n        }\n      }\n    },\n\n    async saveTree() {\n      // todo: we still need a timer for this on data change -- can this be done on a watcher rather than polling?\n      const {app} = global\n      await app.dataControl.send()\n    },\n\n    /**\n     * Calls the supplied/injected validation function from __TREE_FEATURES__.validation.validate(), and returns the\n     * array of validation results. This function is a pure function, and does not make changes to external data.\n     *\n     * @param dispatch\n     * @param tree\n     * @throws ValidationError If the validation fails, ValidationError will be thrown, which contains the\n     *            ValidationResults\n     * @returns {Promise<array>} a Promise that will return an array of the validation results.\n     */\n    async validateTree({dispatch, state: {tree}}) {\n      const validate = lodash.get(global.__TREE_FEATURES__, 'validation.validate')\n      if (validate) {\n        await validate(tree)\n      } else {\n        await dispatch('validateFloipFlow')\n      }\n    },\n\n    /**\n     * Default Floip validation. If you want Floip Core validation to be run, your\n     * __TREE_FEATURES__.validation.validate() function should call this one and add it's results to the value\n     * returned from __TREE_FEATURES__.validation.validate(). This function is a pure function, and does not make\n     * changes to external data.\n     *\n     * @throws ValidationError If the validation fails, ValidationError will be thrown, which contains the\n     *            ValidationResults\n     * @returns {Promise<array>} a Promise that will return an array of the validation results.\n     */\n    async validateFloipFlow() {\n      /* TODO: (https://viamoinc.atlassian.net/browse/VMO-685) Create default FLOIP CORE Flow validation here and\n       *   uncomment the below line after adding an implementation */\n      // throw new ValidationError([])\n    },\n\n    setDefaultBlockRepeatValues({commit, dispatch, state: {tree}}, {jsKey, values: defaults}) {\n      const block = lodash.find(tree.blocks, {jsKey})\n\n      for (let key in defaults) {\n        !(key in block.customData) && commit('updateBlockCustomDataFor', {jsKey, key, value: defaults[key]})\n      }\n    },\n\n    updateTextContent({commit}, {type, jsKey, langId, value, disableAutoGen}) {\n      commit('updateBlockContentFor', {type, jsKey, langId, value})\n      commit('updateBlockAutoGenStateFor', {type, jsKey, langId, value: !disableAutoGen})\n      commit('updateReviewedStateFor', {jsKey, langId, value: false})\n    },\n\n    setContentFromQuestionText({commit, dispatch, state: {tree}}, {jsKey}) {\n      const block = lodash.find(tree.blocks, {jsKey})\n\n      var generatedText = block.customData.title\n      var isFirst\n      var maxDigits\n\n      // todo: Let's not hand-roll pluralization — https://laravel.com/docs/5.4/localization#pluralization\n      var grammar = {\n        EN: {\n          starter: 'Reply ',\n          connector: ' for ',\n          separator: ', ',\n          conclusion: '.',\n          numericStart: 'Reply with up to ',\n          numericEndPlural: ' digits.',\n          numericEndSingular: ' digit.',\n          validationCode: 'Please reply with your unique code',\n        }\n      }\n\n      if (tree.details.hasSms || tree.details.hasUssd || tree.details.hasSocial || tree.details.hasClipboard) {\n\n\t\t\t\t// todo: push these customizations into custom handlers on particular block types\n        if (block.type == 'MultipleChoiceQuestionBlock' || block.type == 'CollaborativeFilteringRatingBlock') {\n\n          generatedText += ' ' + grammar.EN.starter\n          isFirst = 1\n\n          block.customData.choices.forEach(function(choice, index) { // choices values\n            if (isFirst != 1) {\n              generatedText += grammar.EN.separator\n            }\n            generatedText += _.parseInt(index + 1) + grammar.EN.connector + choice\n            isFirst = 0\n          })\n\n          generatedText += grammar.EN.conclusion\n\n        } else if (block.type == 'LocationBlock') {\n          generatedText += ' ' + grammar.EN.starter\n          isFirst = 1\n\n          block.customData.choices.forEach(function(choice, index) { // this is likely choice's name prop\n            // choiceResponse = $('#' + $(e).attr('id') + '_primaryoption').val()\n            if (isFirst != 1) {\n              generatedText += grammar.EN.separator\n            }\n\n            generatedText += _.parseInt(index + 1) + grammar.EN.connector + choice.name\n            isFirst = 0\n          })\n\n          generatedText += grammar.EN.conclusion\n\n        } else if (block.type == 'NumericQuestionBlock') {\n          maxDigits = lodash.get(block ,'customData.maxNumericDigits')\n          if (!maxDigits) {\n            maxDigits = 3\n          }\n\n          if (maxDigits == '1') {\n            generatedText += ' ' + grammar.EN.numericStart + maxDigits + grammar.EN.numericEndSingular\n          }\n          else {\n            generatedText += ' ' + grammar.EN.numericStart + maxDigits + grammar.EN.numericEndPlural\n          }\n        } else if (block.type == \"IdValidationBlock\") {\n          generatedText = grammar.EN.validationCode\n        }\n\n        lodash.forEach(['sms', 'ussd', 'social', 'clipboard'], contentType => {\n          if (tree.details[`has${lodash.upperFirst(contentType)}`] && block[`${contentType}AutogenLangs`].length) {\n            _.each(block[`${contentType}AutogenLangs`], function (languageId) {\n              dispatch('updateTextContent', {\n                type: contentType,\n                jsKey: block.jsKey,\n                langId: languageId,\n                value: generatedText,\n              })\n\n              dispatch('uiChanged', `Updated ${contentType} Content with auto-gen text: ${generatedText}`)\n            })\n          }\n        })\n      }\n    },\n\n    setBlockNumConnections({commit, dispatch, state}, {value: newNumConnections, jsKey}) {\n      console.debug('vuex.trees', 'setBlockNumConnections', newNumConnections, jsKey)\n\n      // Remove any connection elements connected to the block\n      // Remove the block from the UI\n      // Change the data number of connections\n      // Re-add the block to the UI\n      // Re-display the connections going to it\n\n      newNumConnections = _.parseInt(newNumConnections);\n\n      // Make sure the new number of connections is a number\n      if (!_.isFinite(newNumConnections)) {\n        newNumConnections = 1;\n      }\n      // Enforce appropriate limits on the number of connections:\n      if (newNumConnections < 1) {\n        newNumConnections = 1;\n      }\n\n\n\n      var selectedBlockKey = jsKey || app.ui.selectedBlock;\n      var selectedBlock = app.tree.getBlock(selectedBlockKey);\n\n      var numConnections = selectedBlock['uiData']['numConnections'];\n\n      if (newNumConnections == numConnections) {\n        // If there's no change, skip the intensive process of rebuilding all those connections\n        console.log('No change in the number of connections.');\n        return true;\n      }\n\n      // Otherwise: change the connections!\n\n      app.ui.lockConnections = 1;\n\n      // Remove the connections from each of the nodes at the bottom of the block\n      _.each(_.range(1, numConnections + 1), function(index) {\n        console.debug('Removing connections at', index, 'for', selectedBlockKey)\n        // app.jsPlumb.detachAllConnections(selectedBlockKey + '_node_' + index);\n\n      });\n\n      // Remove any connections connected to the \"target\" / top of the block\n      // Fortunately these call the jsPlumb binding for removing a connection\n      // which in turn is set to remove the entry from the app.tree.get('connections') array. Yay!\n      // app.jsPlumb.detachAllConnections(selectedBlockKey + '_target');\n\n      // Update the actual block data to use the new number:\n      selectedBlock['uiData']['numConnections'] = newNumConnections;\n\n      // Remove any connections that are higher in outputKey (node) number than the new maximum numConnections:\n      app.tree.filterBlockConnectionsAboveMax(selectedBlockKey);\n\n      // Re-add disappeared connections?\n\n      app.ui.lockConnections = 0;\n\n      // once in vuejs, can we'll be able to just do a [dis]connect via connections diff\n      const handleDragStop = dispatch.bind(null, 'discoverTallestBlockForDesignerWorkspaceHeight', {aboveTallest: true})\n      // app.jsPlumb.resetBindings(app.tree.get('connections'), true, selectedBlockKey, handleDragStop)\n\n      app.ui.change('Changed number of block connections.');\n    },\n\n    setMcqOutputNames({commit, dispatch, state: {tree}}, {jsKey}) {\n      console.debug('vuex.trees', 'setMcqOutputNames', jsKey)\n\n      const block = lodash.find(tree.blocks, {jsKey})\n      if (!block) {\n        console.log('AppView::generateMcqOutputNamesFor()', 'Unable to find specified block.')\n        return\n      }\n\n      let isOutputBranchingEnabled = !!block.customData.branching,\n          outputNames\n\n      if (isOutputBranchingEnabled) {\n        if (block.type === \"SummaryBlock\") {\n          outputNames = [langJs.trans(\"trees.confirm\"), langJs.trans(\"trees.reject\")]\n        } else {\n          outputNames = lodash.clone(lodash.get(block, 'customData.choices', lodash.range(1, block.customData.numChoices + 1)))\n        }\n      } else {\n        outputNames = [1]\n      }\n\n      commit('updateBlockCustomDataFor', {jsKey, key: 'numChoices', value: outputNames.length})\n\n      let isNoResponseExitEnabled = block.customData.addExitForNoResponse\n      isNoResponseExitEnabled && outputNames.push('trees.output-exit')\n\n      commit('updateBlockUiDataFor', {jsKey, key: 'outputNames', value: outputNames})\n      dispatch('setBlockNumConnections', {jsKey, value: outputNames.length})\n    },\n\n    setMcqSidebarFieldLabels({commit, dispatch, state: {tree}}, {jsKey}) {\n      const block = lodash.find(tree.blocks, {jsKey})\n\n      if (!block || !isMCQBlock(block)) {\n        console.log('AppView::generateMcqOutputNamesFor()', 'Wrong block type')\n        return\n      }\n\n      let isVoiceEnabled = tree.details.hasVoice,\n          isTextChannelEnabled = tree.details.hasSms || tree.details.hasUssd || tree.details.hasSocial || tree.details.hasClipboard,\n          hasChoiceKeypresses = !lodash.isEmpty(block.customData.choiceKeypresses),\n          fieldLabels\n\n      if (isVoiceEnabled && !isTextChannelEnabled && hasChoiceKeypresses) {\n        fieldLabels = getChoiceKeyPressesFor(block)\n      } else if (isVoiceEnabled && isTextChannelEnabled && hasChoiceKeypresses) {\n        fieldLabels = lodash.times(block.customData.numChoices, lodash.constant('•'))\n      } else {\n        fieldLabels = lodash.range(1, block.customData.numChoices + 1)\n      }\n\n      commit('updateBlockUiDataFor', {jsKey, key: 'fieldLabels', value: fieldLabels})\n    },\n\n\t\tbatchMatchAudioTriggered({commit, dispatch, state}, {treeId, pattern, replaceExisting}) {\n\t\t\tcommit('setBatchMatchAudioResultsTo', {status: -1})\n\n\t\t\treturn axios.post(routeFrom('trees.treesBatchLinkAudio', {treeId}, state.ui.routes), {pattern})\n\t\t\t\t\t.then(({data: {matches: value}}) => {\n\t\t\t\t\t\tcommit('setBatchMatchAudioResultsTo', {status: 1, value})\n\t\t\t\t\t\tdispatch('commitAllBatchMatchAudioFiles', {replaceExisting})\n\t\t\t\t\t})\n\t\t\t\t\t.catch(({response: {data: {status_description: message}}}) => commit('setBatchMatchAudioResultsTo', {\n\t\t\t\t\t\tstatus: 0,\n\t\t\t\t\t\tmessage\n\t\t\t\t\t}))\n\t\t},\n\n\t\tcommitAllBatchMatchAudioFiles(\n\t\t\t\t{commit, dispatch, state: {\n\t\t\t\t\tui: {\n\t\t\t\t\t\tbatchMatchAudio: {\n\t\t\t\t\t\t\tisEmpty,\n\t\t\t\t\t\t\tresults}}}},\n\t\t\t\t{replaceExisting}) {\n\n\t\t\tif (isEmpty) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tlodash.forEach(results, (byLang, jsKey) => {\n\t\t\t\tlodash.forEach(byLang, (matches, langId) => {\n\t\t\t\t\tdispatch('commitBatchMatchAudioFile', {jsKey, langId, matches, replaceExisting})\n\t\t\t\t})\n\t\t\t})\n\n\t\t\tdispatch('attemptSaveTree')\n\t\t},\n\n\t\t/** ------------------ | has-selection | no-selection | unchanged |\n\t\t | null   + no-replace | 0             | 1            | 0         |\n\t\t | single + no-replace | 0             | 1            | 0         |\n\t\t | multi  + no-replace | 0             | 0            | 0         |\n\t\t | null   + replace    | 1             | 1            | 0         |\n\t\t | single + replace    | 1             | 1            | 0         |\n\t\t | multi  + replace    | 0             | 0            | 0         |\n\t\t ---------------------------------------------------------------- */\n\t\tcommitBatchMatchAudioFile(\n\t\t\t\t{commit, dispatch, state: {tree: {blocks}}},\n\t\t\t\t{jsKey, langId, matches, replaceExisting}) {\n\n\t\t\tconst {audioFiles: {[langId]: audioFile}} = lodash.find(blocks, {jsKey}),\n\t\t\t\t\thasSelection = !!audioFile,\n\t\t\t\t\tisMulti = lodash.get(matches, 'length', 0) > 1,\n\t\t\t\t\tmatch = lodash.get(matches, 0, null),\n\t\t\t\t\tunchanged = lodash.get(audioFile, 'id') === lodash.get(match, 'id')\n\n\t\t\tif (unchanged || isMulti || (hasSelection && !replaceExisting)) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tcommit('updateAudioFileFor', {jsKey, langId, value: match})\n\t\t\tcommit('updateReviewedStateFor', {jsKey, langId, value: false})\n\t\t},\n\n    addSubscriberPropertyField({commit, dispatch, state}, {displayLabel, dataType, choices}) {\n      return axios.post(routeFrom('trees.addSubscriberPropertyField', null, state.ui.routes), {displayLabel, dataType, choices})\n          .then(response => {\n            const filteredChoices = lodash.filter(choices, c => !!c.value)\n            commit('addSubscriberPropertyField', {property: response.data.data})\n            return response\n          })\n    },\n\n    setTreeUpdateConflictStatus({commit}, payload) {\n\t\t  commit('setTreeUpdateConflictStatus', payload);\n    },\n\n    async fetchInteractionTotals({state, commit, dispatch, getters}, {startDate, endDate}) {\n      if (!getters.isFeatureUpdateInteractionTotalsEnabled) {\n        console.info('Feature `updateInteractionTotals` is disabled')\n        return\n      }\n      const key = 'interaction-totals'\n      const url = routeFrom('trees.ajaxTotalInteractions', {treeId: state.tree.id}, state.ui.routes)\n      const params = {startDate, endDate}\n\n      const response = await dispatch('flights/createCancellableXhr', {key, url, params})\n      if (response) {\n        commit('setInteractionTotals', {interactionTotals: response.data})\n      }\n    },\n  },\n}\n\nconst getChoiceKeyPressesFor = (block) => {\n  const keypresses = block.customData.choiceKeypresses\n  return lodash.range(1, block.customData.numChoices + 1)\n      .map(i => keypresses[i] || i)\n}\n\nconst isMCQBlock = (block) => {\n  return block.type === 'MultipleChoiceQuestionBlock'\n      || block.type === 'CollaborativeFilteringRatingBlock'\n      || block.type === 'RandomOrderMultipleChoiceQuestionBlock'\n\n}\n","import {\n  IContext,\n  IBlock,\n  IBlockExit,\n  IResourceDefinition,\n  findBlockExitWith,\n  ValidationException,\n  findBlockOnActiveFlowWith,\n} from '@floip/flow-runner'\nimport {ActionTree, GetterTree, MutationTree} from 'vuex'\nimport {IFlowsState} from '.'\nimport {IRootState} from '@/store'\nimport {defaults, without} from 'lodash'\nimport IdGeneratorUuidV4 from '@floip/flow-runner/dist/domain/IdGeneratorUuidV4'\nimport {popFirstEmptyItem} from './utils/listBuilder'\n\nexport const getters: GetterTree<IFlowsState, IRootState> = {\n  // todo: do we do all bocks in all blocks, or all blocks in [!! active flow !!]  ?\n  //       the interesting bit is that resources are _all_ resources... so we could follow suit here? :shrug:\n  // blocksByUuid: ({flows}) => map(resources, 'uuid')\n}\n\nexport const mutations: MutationTree<IFlowsState> = {\n  block_popFirstExitWithoutTest(state, {blockId}: {blockId: string}) {\n    //TODO - this shouldn't be necessary\n    // @ts-ignore - TS2339: Property 'flow' does not exist on type\n    const block = findBlockOnActiveFlowWith(blockId, this.state.flow as unknown as IContext)\n    block.exits = popFirstEmptyItem(block.exits, \"test\")\n  },\n  block_popExitsByLabel(state, {blockId, exitLabel}: {blockId: string, exitLabel: string}) {\n    //TODO - this shouldn't be necessary\n    // @ts-ignore - TS2339: Property 'flow' does not exist on type\n    const block = findBlockOnActiveFlowWith(blockId, this.state.flow as unknown as IContext)\n    block.exits = block.exits.filter((item: IBlockExit) => {\n      return item.label !== exitLabel\n    })\n  },\n  block_setName(state, {blockId, value}) {\n    findBlockOnActiveFlowWith(blockId, state as unknown as IContext)\n      .name = value\n  },\n  block_setLabel(state, {blockId, value}) {\n    findBlockOnActiveFlowWith(blockId, state as unknown as IContext)\n      .label = value\n  },\n  block_setSemanticLabel(state, {blockId, value}) {\n    findBlockOnActiveFlowWith(blockId, state as unknown as IContext)\n      .semanticLabel = value\n  },\n  block_setExitTest(state, {exitId, blockId, value}: {exitId: string, blockId: string, value: string}) {\n    const exits = findBlockOnActiveFlowWith(blockId, state as unknown as IContext).exits\n    const exit = exits.find(exit => exit.uuid === exitId) || null;\n    if (exit) {\n      exit.test = value\n    }\n  },\n  block_pushNewExit(state, { blockId, newExit }: {blockId: string, newExit: IBlockExit}) {\n    const block = findBlockOnActiveFlowWith(blockId, state as unknown as IContext)\n    block.exits.push(newExit)\n  },\n  block_updateConfig(state, {blockId, newConfig}: {blockId: string, newConfig: object}) {\n    findBlockOnActiveFlowWith(blockId, state as unknown as IContext)\n      .config = newConfig\n  },\n  block_updateConfigByKey(state, {blockId, key, value}: {blockId: string, key: string, value: object}) { // note that the {key} could be undefined inside `config` at block creation (eg: optional config)\n    let currentConfig: {[key: string]: any} = findBlockOnActiveFlowWith(blockId, state as unknown as IContext).config\n    currentConfig[key] = value\n    findBlockOnActiveFlowWith(blockId, state as unknown as IContext).config = {...currentConfig}\n  },\n  block_setBlockExitDestinationBlockId(state, {blockId, exitId, destinationBlockId}) {\n    const block = findBlockOnActiveFlowWith(blockId, state as unknown as IContext)\n    findBlockExitWith(exitId, block)\n      .destinationBlock = destinationBlockId\n  },\n}\n\nexport const actions: ActionTree<IFlowsState, IRootState> = {\n  async block_createBlockDefaultExitWith({dispatch, commit, state}, {props}: {props: {uuid: string} & Partial<IBlockExit>}): Promise<IBlockExit> {\n    return await dispatch('block_createBlockExitWith', {\n      props: {\n        ...props,\n        default: true}})\n  },\n\n  async block_createBlockExitWith({dispatch, commit, state}, {props}: {props: {uuid: string} & Partial<IBlockExit>}): Promise<IBlockExit> {\n    const resource: IResourceDefinition = await dispatch('resource_createWith', {\n      props: {uuid: (new IdGeneratorUuidV4).generate()}})\n\n    commit('resource_add', {resource})\n\n    return {\n      ...defaults(props, {\n        label: resource.uuid,\n        tag: '',\n        config: {},\n      }),\n    }\n  },\n  async block_updateBlockExitWith({dispatch, commit, state}, {blockId, exitId, value}: {blockId: string, exitId: string, value: string}) {\n    //TODO - handle other props apart from test\n    commit('block_setExitTest', {blockId, exitId, value})\n  },\n\n  async block_swapBlockExitDestinationBlockIds(\n    {commit, state},\n    {first, second}: {first: IDeepBlockExitIdWithinFlow, second: IDeepBlockExitIdWithinFlow}) {\n\n    if (!first || !second) {\n      throw new ValidationException(`Unable to swap destinationBlockId on null: ${JSON.stringify({first, second})}`)\n    }\n\n    const firstBlock = findBlockOnActiveFlowWith(first.blockId, state as unknown as IContext)\n    const secondBlock = findBlockOnActiveFlowWith(second.blockId, state as unknown as IContext)\n\n    const {destinationBlock: firstDestinationBlockId} = findBlockExitWith(first.exitId, firstBlock)\n    const {destinationBlock: secondDestinationBlockId} = findBlockExitWith(second.exitId, secondBlock)\n\n\n\n\n    // todo: this works only when the exit we're targetting is empty\n    // todo: blah --- a repaint from HMR redraws it correctly -- why?!\n    // todo: blah --- a repaint from HMR also draws an additional exit :( Is there a cache break on connection key we need to leverage here?\n\n\n\n    commit('block_setBlockExitDestinationBlockId', {\n      blockId: second.blockId,\n      exitId: second.exitId,\n      destinationBlockId: firstDestinationBlockId})\n\n    commit('block_setBlockExitDestinationBlockId', {\n      blockId: first.blockId,\n      exitId: first.exitId,\n      destinationBlockId: secondDestinationBlockId})\n  },\n}\n\nexport interface IDeepBlockExitIdWithinFlow {\n  blockId: IBlock['uuid'],\n  exitId: IBlockExit['uuid'],\n}\n","import Vue from 'vue'\nimport {\n  findBlockWith,\n  findFlowWith,\n  getActiveFlowFrom,\n  SupportedMode,\n  SupportedContentType,\n  IBlock,\n  IContext,\n  IFlow,\n  IResourceDefinition,\n  ValidationException,\n} from '@floip/flow-runner'\nimport {IdGeneratorUuidV4} from '@floip/flow-runner/dist/domain/IdGeneratorUuidV4'\nimport moment from 'moment'\nimport {ActionTree, GetterTree, MutationTree} from 'vuex'\nimport {IFlowsState} from '.'\nimport {IRootState} from '@/store'\nimport {defaults, includes, forEach} from 'lodash'\nimport {discoverContentTypesFor} from '@/store/flow/resource'\n\nexport const getters: GetterTree<IFlowsState, IRootState> = {\n  activeFlow: state => state.flows.length && getActiveFlowFrom(state as unknown as IContext),\n\n  hasTextMode: (state, getters) => [SupportedMode.USSD, SupportedMode.SMS].some(mode => includes(getters.activeFlow.supportedModes || [], mode)),\n  hasVoiceMode: (state, getters) => includes(getters.activeFlow.supportedModes || [], SupportedMode.IVR)\n}\n\nexport const mutations: MutationTree<IFlowsState> = {\n  flow_addBlock(state, {flowId, block}: {flowId: string, block: IBlock}) {\n    if (block == null) {\n      throw new ValidationException('Unable to add null block to flow')\n    }\n\n    const flow = findFlowWith(flowId || state.firstFlowId || '', state as unknown as IContext)\n    const length = flow.blocks.push(block)\n\n    if (length === 1) {\n      flow.firstBlockId = block.uuid\n    }\n  },\n\n  flow_removeBlock(state, {flowId, blockId}: {flowId: string, blockId: IBlock['uuid']}) {\n    const flow = findFlowWith(flowId || state.firstFlowId || '', state as unknown as IContext)\n    const block: IBlock = findBlockWith(blockId, flow)  // @throws ValidationException when block absent\n\n    if (block == null) {\n      throw new ValidationException('Unable to delete block absent from flow')\n    }\n\n    const {blocks} = flow\n    blocks.splice(\n      blocks.indexOf(block),\n      1)\n\n    // clean up stale references\n    // 1. flow.firstBlockId\n    // 2. flow.exitBlockId\n    // 3. flow.blocks.*.exits.*.destinationBlock\n    // 4. activeBlockId (we should likely trail a ghost of previous selection and select that one next)\n\n    // todo: convert this whole operation to an ActionTree member\n    // todo: use mutations for these:\n    if (flow.firstBlockId === blockId) {\n      flow.firstBlockId = '' // todo: make this optional for builder\n    }\n\n    if (flow.exitBlockId === blockId) {\n      flow.exitBlockId = undefined\n    }\n\n\n    forEach(blocks, ({exits}) => {\n      const exitsTowardUs = exits.filter(e => e.destinationBlock === blockId)\n      forEach(exitsTowardUs, e => e.destinationBlock = undefined)\n    })\n\n    this.state.builder.activeBlockId = null\n  },\n\n  flow_setExitBlockId(state, {flowId, blockId}) {\n    const flow: IFlow = findFlowWith(flowId, state as unknown as IContext)\n    const block: IBlock = findBlockWith(blockId, flow)  // @throws ValidationException when block absent\n    flow.exitBlockId = block.uuid\n  },\n\n  flow_setFirstBlockId(state, {flowId, blockId}) {\n    const flow: IFlow = findFlowWith(flowId, state as unknown as IContext)\n    const block: IBlock = findBlockWith(blockId, flow)  // @throws ValidationException when block absent\n    Vue.set(flow, 'firstBlockId', block.uuid)\n  },\n  flow_setName(state, {flowId, value}) {\n    findFlowWith(flowId, state as unknown as IContext).name = value\n  },\n\n  flow_setLabel(state, {flowId, value}) {\n    findFlowWith(flowId, state as unknown as IContext).label = value\n  },\n\n  flow_setInteractionTimeout(state, {flowId, value}) {\n    findFlowWith(flowId, state as unknown as IContext).interactionTimeout = value\n  },\n\n  flow_setSupportedMode(state, {flowId, value}) {\n    const flow: IFlow = findFlowWith(flowId, state as unknown as IContext)\n    flow.supportedModes = Array.isArray(value) ? value : [value]\n  },\n\n  flow_setLanguages(state, {flowId, value}) {\n    const flow: IFlow = findFlowWith(flowId, state as unknown as IContext)\n    flow.languages = Array.isArray(value) ? value : [value]\n  },\n}\n\nexport const actions: ActionTree<IFlowsState, IRootState> = {\n  // todo: this `flow_` prefix doesn't follow suit\n  //       because it's actually a method on the root state // IContext-ish type\n  //       (same as mutation: `flow_activateBlock` and `flow_add`\n  async flow_addBlankFlow({dispatch, commit, state}): Promise<IFlow> {\n    const flow = await dispatch('flow_createWith', {\n      props: {uuid: (new IdGeneratorUuidV4).generate()}})\n\n    return await dispatch('flow_add', {flow})\n  },\n\n  async flow_add({state}, {flow}): Promise<IFlow> {\n    const length = state.flows.push(flow) // mutating here, because we need to define a root-level scope for this type of action\n    if (length === 1) {\n      state.firstFlowId = flow.uuid\n    }\n\n    return flow\n  },\n\n  async flow_addBlankBlockByType({commit, dispatch, state}, {type, ...props}: Partial<IBlock>): Promise<IBlock> {\n    // if (!state[type]) {\n      // todo: for some reason {snakeCase} from 'lodash' doesn't work?\n      // todo: for some reason dynamic imports aren't working w/ storybook build\n      // const modulePath = `./block-types/${type.replace('\\\\', '_')}BlockStore.ts`\n      // const store = await import(modulePath)\n\n      // this.registerModule(['flow', BLOCK_TYPE], store)\n    // }\n\n    const block = await dispatch(`flow/${type}/createWith`, { // standardize this for each block type\n      props: {\n        uuid: (new IdGeneratorUuidV4).generate(),\n        ...props,\n      }\n    }, {root: true})\n\n    defaults(block, { // a key is prerequisite for reactivity, even optional params\n      label: undefined,\n      semanticLabel: undefined})\n\n    commit('flow_addBlock', {block})\n\n    return block\n  },\n\n  async flow_addBlankResource({dispatch, commit}): Promise<IResourceDefinition> {\n    const resource = await dispatch('resource_createWith', {\n      props: {uuid: (new IdGeneratorUuidV4).generate()}})\n\n    commit('resource_add', {resource})\n\n    return resource\n  },\n  async flow_addBlankResourceForEnabledModesAndLangs({getters, dispatch, commit}, modeOverrides?: {[key in SupportedMode]: SupportedContentType}): Promise<IResourceDefinition> {\n    //TODO - figure out of there should only be one value here at first? How would the resource editor change this?\n    //TODO - is this right for setup of languages?\n    //TODO - How will we add more blank values as supported languages are changed in the flow? We should probably also do this for modes rather than doing all possible modes here.\n    const values = getters['activeFlow'].languages.reduce((memo: object[], language: {id: string, name: string}) => {\n      //Let's just create all the modes. We might need them but if they are switched off they just don't get used\n      Object.values(SupportedMode).forEach((mode: SupportedMode) => {\n        memo.push({\n          languageId: language.id,\n          value: '',\n          //We can't always get it from the Mode - LogBlock for example has text content for the IVR mode.\n          contentType: modeOverrides ? modeOverrides[mode] : discoverContentTypesFor(mode),\n          modes: [\n            mode\n          ],\n        })\n      })\n      return memo\n    }, [])\n    const blankResource = await dispatch('resource_createWith', {\n      props: {\n        uuid: (new IdGeneratorUuidV4()).generate(),\n        values: values,\n      },\n    })\n    commit('resource_add', {resource: blankResource})\n\n    return blankResource\n  },\n\n  async flow_createWith({dispatch, commit, state}, {props}: {props: {uuid: string} & Partial<IFlow>}): Promise<IFlow> {\n    return {\n      ...defaults(props, {\n        orgId: '', // awful default value, but we've typed it to string\n        name: '',\n        label: '', // TODO: Remove this optional attribute once the findFlowWith( ) is able to mutate state when setting non existing key.\n        lastModified: moment().format('c'),\n        interactionTimeout: 30,\n        platformMetadata: {},\n\n        supportedModes: DEFAULT_MODES,\n        languages: [],\n        blocks: [],\n\n        firstBlockId: '',\n      }),\n    }\n  }\n}\n\nexport const DEFAULT_MODES = [\n  SupportedMode.SMS,\n  SupportedMode.USSD,\n  SupportedMode.IVR]\n","import {IFlow, IResourceDefinition} from '@floip/flow-runner'\nimport {ActionTree, GetterTree, Module, MutationTree} from 'vuex'\nimport {IRootState} from '..' // todo: create factory with generics so that IRootState is DI'd\nimport {\n  getters as blockGetters,\n  mutations as blockMutations,\n  actions as blockActions} from './block'\nimport {\n  actions as flowActions,\n  getters as flowGetters,\n  mutations as flowMutations} from './flow'\nimport {\n  actions as resourceActions,\n  getters as resourceGetters,\n  mutations as resourceMutations} from './resource'\n\n\n// type IFlowsState = Pick<IContext, 'flows' | 'firstFlowId' | 'resources' | 'nestedFlowBlockInteractionIdStack'>\n\nexport interface IFlowsState {\n  flows: IFlow[],\n  resources: IResourceDefinition[],\n\n  firstFlowId: string | null,\n  // @note - for exciting future\n  nestedFlowBlockInteractionIdStack: string[],\n\n  // activeBlock: string | null, // this is actually a getter over IContext\n}\n\nexport const stateFactory = (): IFlowsState => ({\n  flows: [],\n  resources: [],\n\n  firstFlowId: null,\n  nestedFlowBlockInteractionIdStack: [], // todo: not quite right -- pulled from IContext\n\n  // activeBlock: null,\n})\n\nexport const getters: GetterTree<IFlowsState, IRootState> = {\n  ...flowGetters,\n  ...blockGetters,\n  ...resourceGetters,\n}\n\nexport const mutations: MutationTree<IFlowsState> = {\n  ...flowMutations,\n  ...blockMutations,\n  ...resourceMutations,\n}\n\nexport const actions: ActionTree<IFlowsState, IRootState> = {\n  ...flowActions,\n  ...blockActions,\n  ...resourceActions,\n}\n\nexport const store: Module<IFlowsState, IRootState> = {\n  namespaced: true,\n  state: stateFactory,\n  getters,\n  mutations,\n  actions,\n}\n\nexport default store\n","import ImportedLang from 'lang.js'\nimport ImportedMoment from 'moment'\nimport ImportedJquery from 'jquery'\nimport {merge} from 'lodash'\nimport source from '../../assets/messages.json';\n\nexport function bootstrapLegacyGlobalDependencies() {\n  // initialize configuration sources\n  const __APP__ = require('../../../app.config')\n  const __CONTEXT__ = require('../../../builder.config')\n\n  // todo: the remaining legacy code still expects the ability to mutate data directly on `app.ui.*` rather than using trees store\n  //      for now, we'll need to ensure app.ui === __TREES_UI__ */\n  const app = merge(global.app || {}, __CONTEXT__)\n  const __TREES_UI__ = app.ui\n  const __AUDIO__ = app.audio\n\n  // configure libraries\n  const Lang = new ImportedLang\n  Lang.setMessages(source)\n  Lang.setLocale(__APP__.locale)\n  Lang.defaultLocale = 'en'\n\n  const moment = ImportedMoment\n  moment.locale(Lang.getLocale())\n\n  const jQuery = ImportedJquery\n  const $ = ImportedJquery\n\n  // export as globals (overwrites pre-existing)\n  const exported = {\n    Lang,\n    moment,\n    $,\n    jQuery,\n\n    __APP__,\n    __CONTEXT__,\n    __TREES_UI__,\n    __AUDIO__,\n\n    app,\n  }\n  Object.assign(global, exported)\n\n  // required inline due to front-loading of imports and having jQuery dependency\n  require('bootstrap')\n  require('bootstrap-datetimepicker/src/js/bootstrap-datetimepicker')\n  $.fn.datetimepicker.defaults.locale = Lang.getLocale()\n\n  return exported\n}\n\nexport default bootstrapLegacyGlobalDependencies\n","import {flatMap, isEqual, keyBy, map, mapValues} from 'lodash'\nimport Vue from 'vue'\nimport {ActionTree, GetterTree, Module, MutationTree} from \"vuex\"\nimport {IRootState} from \"@/store\"\nimport {IBlock, SupportedMode, ValidationException} from \"@floip/flow-runner\"\nimport {IDeepBlockExitIdWithinFlow} from \"@/store/flow/block\"\n\n\nexport enum OperationKind { // todo migrate these to flight-monitor\n  CONNECTION_SOURCE_RELOCATE = 'CONNECTION_SOURCE_RELOCATE',\n  CONNECTION_CREATE = 'CONNECTION_CREATE',\n  BLOCK_RELOCATE = 'BLOCK_RELOCATE', // todo: we can now skip updating vuex on-the-fly and rather await a drop\n}\n\nexport interface IConnectionSourceRelocateOperation {\n  kind: OperationKind.CONNECTION_SOURCE_RELOCATE,\n  data: null | {\n    from: IDeepBlockExitIdWithinFlow,\n    position: IPosition, // todo: rename to startingPosition\n    to: IDeepBlockExitIdWithinFlow | null,\n  }\n}\n\nexport interface IConnectionCreateOperation {\n  kind: OperationKind.CONNECTION_CREATE,\n  data: null | {\n    source: IDeepBlockExitIdWithinFlow,\n    position: IPosition, // todo: rename to startingPosition\n    target: IBlock['uuid'] | null,\n  }\n}\n\nexport type SupportedOperation = IConnectionSourceRelocateOperation | IConnectionCreateOperation\n\ninterface IPosition {\n  x: number,\n  y: number,\n}\n\n\n\nexport interface IBuilderState {\n  activeBlockId: IBlock['uuid'] | null,\n\n  operations: {\n    [OperationKind.CONNECTION_SOURCE_RELOCATE]: IConnectionSourceRelocateOperation,\n    [OperationKind.CONNECTION_CREATE]: IConnectionCreateOperation,\n    [OperationKind.BLOCK_RELOCATE]: null,\n  }\n}\n\nexport const stateFactory = (): IBuilderState => ({\n  activeBlockId: null,\n\n  operations: {\n    [OperationKind.CONNECTION_SOURCE_RELOCATE]: {\n      kind: OperationKind.CONNECTION_SOURCE_RELOCATE,\n      data: null},\n    [OperationKind.CONNECTION_CREATE]: {\n      kind: OperationKind.CONNECTION_CREATE,\n      data: null},\n    [OperationKind.BLOCK_RELOCATE]: null,\n  }\n})\n\nexport const getters: GetterTree<IBuilderState, IRootState> = {\n  activeBlock: ({activeBlockId}, {blocksById}) => activeBlockId ? blocksById[activeBlockId] : null,\n\n  blocksById: (state, getters, rootState, rootGetters) => {\n    const {blocks} = rootGetters['flow/activeFlow']\n    return keyBy(blocks, 'uuid')\n  },\n\n  nodeLabelsById: (state, getters, {flow: {flows}}, rootGetters) =>\n      mapValues(keyBy(flows[0].blocks, 'uuid'), 'label'),\n\n  exitLabelsById: (state, getters, {flow: {flows}}, rootGetters) =>\n      mapValues(keyBy(flatMap(flows[0].blocks, 'exits'), 'uuid'), 'label'),\n}\n\nexport const mutations: MutationTree<IBuilderState> = {\n  activateBlock(state, {blockId}: {blockId: IBlock['uuid']}) {\n    state.activeBlockId = blockId\n\n    // simulate engaging with specified block\n    // FlowRunner.prototype.navigateTo(block, state as unknown as IContext)\n  },\n\n  setOperation({operations}, {operation}: {operation: SupportedOperation}) {\n    //TODO - type checking - remove this ignore and fix these errors - they seem to be quite serious but I'm not sure how to resolve them\n    //@ts-ignore\n    operations[operation.kind] = operation\n  },\n\n  setBlockPositionTo(state, {position: {x, y}, block}) {\n    // todo: ensure our platform_metadata.io_viamo is always instantiated with builder // uiData props\n    // if (!block.platform_metadata.io_viamo.uiData) {\n    //   defaultsDeep(block, {platform_metadata: {io_viamo: {uiData: {xPosition: 0, yPosition: 0}}}})\n    //   Vue.observable(block.platform_metadata.io_viamo.uiData)\n    // }\n\n    block.platform_metadata.io_viamo.uiData.xPosition = x\n    block.platform_metadata.io_viamo.uiData.yPosition = y\n  },\n}\n\nexport const actions: ActionTree<IBuilderState, IRootState> = {\n  removeConnectionFrom({commit}, {block: {uuid: blockId}, exit: {uuid: exitId}}) {\n    commit('flow/block_setBlockExitDestinationBlockId', {\n      blockId,\n      exitId,\n      destinationBlockId: undefined\n    }, {root: true})\n  },\n\n\n  // @note: multiple connections can lead to same node, so it doesn't make sense to do a swap here; we'll be \"appending\"\n  // when moving connection target: setExitDestination(exitId, destinationId)\n\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  // [OperationKind.CONNECTION_SOURCE_RELOCATE] //////////////////////////////////////////////////////////////\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  // todo: do operations warrant their own store? Maybe a generic store that handles a common behaviour\n\n  initializeConnectionSourceRelocateWith({commit}, {\n    block: {uuid: blockId},\n    exit: {uuid: exitId},\n    position}) {\n\n    // this would be a flight-monitor create(key)\n    const operation: IConnectionSourceRelocateOperation = {\n      kind: OperationKind.CONNECTION_SOURCE_RELOCATE,\n      data: {from: {blockId, exitId}, position, to: {blockId, exitId}}}\n    commit('setOperation', {operation})\n  },\n\n  setConnectionSourceRelocateValue({commit, state}, {block: {uuid: blockId}, exit: {uuid: exitId}}) {\n    const data = state.operations[OperationKind.CONNECTION_SOURCE_RELOCATE].data\n    if (!data) {\n      throw new ValidationException(`Unable to modify uninitialized operation: ${JSON.stringify(data)}`)\n    }\n\n    const {from, position} = data\n    const operation: IConnectionSourceRelocateOperation = {\n      kind: OperationKind.CONNECTION_SOURCE_RELOCATE,\n      data: {from, position, to: {blockId, exitId}}}\n    commit('setOperation', {operation})\n  },\n\n  setConnectionSourceRelocateValueToNullFrom({commit, state}, {block: {uuid: blockId}, exit: {uuid: exitId}}) {\n    const data = state.operations[OperationKind.CONNECTION_SOURCE_RELOCATE].data\n    if (!data) {\n      throw new ValidationException(`Unable to modify uninitialized operation: ${JSON.stringify(data)}`)\n    }\n\n    const {from, to, position} = data\n    if (!isEqual(to, {blockId, exitId})) {\n      throw new ValidationException('Unable to nullify exit relocation from different exit.')\n    }\n\n    const operation: IConnectionSourceRelocateOperation = {\n      kind: OperationKind.CONNECTION_SOURCE_RELOCATE,\n      data: {from, position, to: null}}\n    commit('setOperation', {operation})\n  },\n\n  applyConnectionSourceRelocate({dispatch, commit, state: {operations}}) {\n    const data = operations[OperationKind.CONNECTION_SOURCE_RELOCATE].data\n    if (!data) {\n      throw new ValidationException(`Unable to complete uninitialized operation: ${JSON.stringify(data)}`)\n    }\n\n    const {from: first, to: second} = data\n    dispatch('flow/block_swapBlockExitDestinationBlockIds', {first, second}, {root: true})\n\n    const operation: IConnectionSourceRelocateOperation = {\n      kind: OperationKind.CONNECTION_SOURCE_RELOCATE,\n      data: null}\n    commit('setOperation', {operation})\n  },\n\n  ///////////////////////////////////////////////////////////////////////////////////////////////////\n  // [OperationKind.CONNECTION_CREATE] //////////////////////////////////////////////////////////////\n  ///////////////////////////////////////////////////////////////////////////////////////////////////\n\n  initializeConnectionCreateWith({commit}, {\n    block: {uuid: blockId},\n    exit: {uuid: exitId},\n    position}) {\n\n    if (!blockId || !exitId) {\n      throw new ValidationException(`Unable to create connection without source: ${JSON.stringify({blockId, exitId})}`)\n    }\n\n    const operation: IConnectionCreateOperation = {\n      kind: OperationKind.CONNECTION_CREATE,\n      data: {source: {blockId, exitId}, position, target: null}}\n\n    commit('setOperation', {operation}) // this would be a flight-monitor create(key)\n  },\n\n  setConnectionCreateTargetBlock({commit, state}, {block}) {\n    const data = state.operations[OperationKind.CONNECTION_CREATE].data\n    if (!data) {\n      throw new ValidationException(`Unable to modify uninitialized operation: ${JSON.stringify(data)}`)\n    }\n\n    const {source, position} = data\n    const operation: IConnectionCreateOperation = {\n      kind: OperationKind.CONNECTION_CREATE,\n      data: {source, position, target: block.uuid}}\n\n    commit('setOperation', {operation})\n  },\n\n  setConnectionCreateTargetBlockToNullFrom({commit, state}, {block}) {\n    const data = state.operations[OperationKind.CONNECTION_CREATE].data\n    if (!data) {\n      throw new ValidationException(`Unable to modify uninitialized operation: ${JSON.stringify(data)}`)\n    }\n\n    const {source, target, position} = data\n    if (!isEqual(target, block.uuid)) {\n      throw new ValidationException('Unable to nullify exit relocation from different exit.')\n    }\n\n    const operation: IConnectionCreateOperation = {\n      kind: OperationKind.CONNECTION_CREATE,\n      data: {source, position, target: null}}\n\n    commit('setOperation', {operation})\n  },\n\n  applyConnectionCreate({dispatch, commit, state: {operations}}) {\n    const data = operations[OperationKind.CONNECTION_CREATE].data\n    if (!data) {\n      throw new ValidationException(`Unable to complete uninitialized operation: ${JSON.stringify(data)}`)\n    }\n\n    const {\n      source: {blockId, exitId},\n      target: destinationBlockId} = data\n\n    commit('flow/block_setBlockExitDestinationBlockId', {blockId, exitId, destinationBlockId}, {root: true})\n\n    const operation: IConnectionCreateOperation = {kind: OperationKind.CONNECTION_CREATE, data: null}\n    commit('setOperation', {operation})\n  },\n\n  /**\n   * Import Flows And Resources from importer tool\n   *\n   * The imported JSON should be compatible with IFlowsState\n   * {\n   *  flows: [\n   *    { uuid: 'xxxx', name: 'flow1', ...},\n   *    { uuid: 'yyyy', name: 'flow2', ...}]\n   *  ],\n   *  resources: [\n   *    { uuid: 'xxxx-flow1-resource1', values: [...]},\n   *    { uuid: 'xxxx-flow1-resource2', values: [...]},\n   *    { uuid: 'xxxx-flow2-resource1', values: [...]},\n   *    ...\n   *  ]\n   * }\n   * @param dispatch\n   * @param commit\n   * @param state\n   * @param rootState\n   * @param flows\n   */\n  async importFlowsAndResources({dispatch, commit, state, rootState}, {flows, resources}) {\n    console.debug('importing flows & resources ...')\n    console.log({flows, resources})\n    const {flow: flowState} = rootState\n    const defaultSupportedMode = [\n      SupportedMode.IVR,\n      SupportedMode.SMS,\n      SupportedMode.USSD,\n    ]\n\n    // add default activated modes if not set yet\n    for(let key in flows) {\n      if (!flows[key].hasOwnProperty('supportedModes') || !flows[key].supportedModes.length) {\n        flows[key].supportedModes = defaultSupportedMode\n      }\n    }\n\n    // Update flow state\n    flowState.flows.splice(0, Number.MAX_SAFE_INTEGER, ...flows)\n    flowState.firstFlowId = flows[0].uuid\n    flowState.resources.splice(0, Number.MAX_SAFE_INTEGER, ...resources)\n\n    // make sure we use the same languages ids on both UI & Flows\n    // TODO - type checking - remove this and resolve the error\n    //@ts-ignore\n    rootState.trees.ui.languages = flows[0].languages\n  },\n\n  async loadFlow({dispatch, commit, state}) {\n    console.debug('loading flow...')\n\n    // todo: we need something like: set context\n    const flowContext = require('./2019-10-10-shortcut-flow.json')\n    const flow = flowContext.flows[0]\n\n    flowContext.resources.map(resource => commit('flow/resource_add', {resource}, {root: true}))\n    await dispatch('flow/flow_add', {flow}, {root: true})\n  },\n}\n\nexport const store: Module<IBuilderState, IRootState> = {\n  namespaced: true,\n  state: stateFactory,\n  getters,\n  mutations,\n  actions,\n}\n\nexport default store\n\nexport function createDefaultBlockTypeInstallerFor(\n    blockType: IBlock['type'],\n    storeForBlockType: Module<any, IRootState>) {\n\n  return (builder: Vue) =>\n    builder.$store.hasModule(['flow', blockType])\n    || builder.$store.registerModule(['flow', blockType], storeForBlockType)\n}\n\nexport function generateConnectionLayoutKeyFor(source: IBlock, target: IBlock) {\n  console.debug('store/builder', 'generateConnectionLayoutKeyFor', source.uuid, target.uuid)\n  return [\n    // coords\n    // TODO - type checking - remove this and resolve the error\n    //@ts-ignore\n    [source.platform_metadata.io_viamo.uiData.xPosition, source.platform_metadata.io_viamo.uiData.yPosition],\n    // TODO - type checking - remove this and resolve the error\n    //@ts-ignore\n    [target.platform_metadata.io_viamo.uiData.xPosition, target.platform_metadata.io_viamo.uiData.yPosition],\n\n    // block titles\n    source.label,\n    target.label,\n\n    // other exit titles // todo: this needs to be a computed prop // possibly on store as getter by blockId ?\n    ...map(source.exits, 'tag'),\n    ...map(target.exits, 'tag'),\n  ]\n}\n","import {get, find, without} from 'lodash'\n\nexport const allItemsHaveValue = function (list: object[], key: string): boolean {\n  return list.every((item: object) => !!get(item, key))\n}\n\nexport const someItemsHaveValue = function (list: object[], key: string): boolean {\n  return list.some((item: object) => !!get(item, key))\n}\n\nexport const twoItemsBlank = function (list: object[], key: string): boolean {\n  let blankNumber = 0\n\n  return list.some((item: object) => {\n    if (!get(item, key)) {\n      blankNumber += 1\n    }\n\n    if (blankNumber > 1) {\n      return true\n    }\n\n    return false\n  })\n}\n\nexport const popFirstEmptyItem = function <T>(list: T[], key: string): T[] {\n    const exitToRemove = find(list, (item: T) => !get(item, key))\n    if (exitToRemove) {\n      list = without(list, exitToRemove)\n    }\n    return list\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.flows.length)?_c('div',{staticClass:\"builder-canvas no-select\"},_vm._l((_vm.flows[0].blocks),function(block){return _c('block',{key:block.uuid,attrs:{\"id\":(\"block/\" + (block.uuid)),\"block\":block,\"x\":block.platform_metadata.io_viamo.uiData.xPosition,\"y\":block.platform_metadata.io_viamo.uiData.yPosition}})}),1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {\nvar _obj;\nvar _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.hasLayout)?_c('plain-draggable',{staticClass:\"block\",class:( _obj = {\n      active: _vm.isBlockActivated\n    }, _obj[(\"category-\" + (_vm.blockClasses[_vm.block.type].category))] = true, _obj ),attrs:{\"startX\":_vm.x,\"startY\":_vm.y},on:{\"dragged\":_vm.onMoved,\"dragStarted\":_vm.selectBlock}},[_c('header',{staticClass:\"block-target draggable-handle\",class:{\n           'initial': false,\n           'pending': _vm.isConnectionCreateActive,\n           'fulfilled': false,\n           'rejected': false,\n           'activated': _vm.isBlockActivated,\n         },attrs:{\"id\":(\"block/\" + (_vm.block.uuid) + \"/handle\")},on:{\"mouseenter\":function($event){_vm.isConnectionCreateActive && _vm.activateBlockAsDropZone($event)},\"mouseleave\":function($event){_vm.isConnectionCreateActive && _vm.deactivateBlockAsDropZone($event)}}},[_c('p',{staticClass:\"block-type text-muted\"},[_vm._v(\" \"+_vm._s(_vm.trans((\"flow-builder.\" + (_vm.block.type))))+\" \")]),_c('h3',{staticClass:\"block-label\",class:{'empty': !_vm.block.label}},[_vm._v(\" \"+_vm._s(_vm.block.label || 'Untitled block')+\" \")])]),_c('div',{staticClass:\"block-exits\"},_vm._l((_vm.block.exits),function(exit){return _c('div',{key:exit.uuid,staticClass:\"block-exit\",class:{\n           'initial': false,\n           'pending': _vm.isConnectionSourceRelocateActive,\n           'fulfilled': false,\n           'rejected': false,\n           'activated': _vm.isExitActivatedForRelocate(exit),\n         },on:{\"mouseenter\":function($event){_vm.isConnectionSourceRelocateActive && _vm.activateExitAsDropZone($event, exit)},\"mouseleave\":function($event){_vm.isConnectionSourceRelocateActive && _vm.deactivateExitAsDropZone($event, exit)}}},[_c('div',{staticClass:\"total-label-container\"},[_c('span',{staticClass:\"label label-primary tree-block-item-label tree-block-item-output-subscribers-1\"})]),_c('h3',{staticClass:\"block-exit-tag label label-warning\"},[_vm._v(_vm._s(exit.tag))]),(exit.destinationBlock == null)?[_c('plain-draggable',{key:(\"exit/\" + (exit.uuid) + \"/pseudo-block-handle\"),staticClass:\"handle-create-link btn btn-default btn-xs btn-flat\",class:{\n                             'btn-info': exit.destinationBlock != null,\n                         },attrs:{\"id\":(\"exit/\" + (exit.uuid) + \"/pseudo-block-handle\")},on:{\"initialized\":function($event){return _vm.handleDraggableInitializedFor(exit, $event)},\"dragStarted\":function($event){return _vm.onCreateExitDragStarted($event, exit)},\"dragged\":function($event){return _vm.onCreateExitDragged($event)},\"dragEnded\":function($event){return _vm.onCreateExitDragEnded($event, exit)}}},[_c('i',{staticClass:\"glyphicon glyphicon-move\"})]),(_vm.isConnectionCreateActive && _vm.isExitActivatedForCreate(exit) && _vm.livePosition)?[_c('div',{staticClass:\"handle-move-link btn btn-default btn-xs\",class:{\n                             'btn-info': exit.destinationBlock != null,\n                         },attrs:{\"id\":(\"exit/\" + (exit.uuid) + \"/handle\")}},[_c('i',{staticClass:\"glyphicon glyphicon-move\"})]),_c('connection',{key:(\"exit/\" + (exit.uuid) + \"/line-for-draft\"),attrs:{\"repaint-cache-key-generator\":_vm.generateConnectionLayoutKeyFor,\"source\":_vm.block,\"target\":_vm.blocksById[exit.destinationBlock],\"exit\":exit,\"position\":_vm.livePosition,\"color-category\":_vm.blockClasses[_vm.block.type].category}})]:_vm._e()]:_vm._e(),(exit.destinationBlock != null)?[_c('plain-draggable',{key:(\"exit/\" + (exit.uuid) + \"/handle\"),staticClass:\"block-exit-move-handle handle-move-link btn btn-default btn-xs btn-flat\",class:{\n                             // 'btn-default': exit.destinationBlock != null,\n                         },attrs:{\"id\":(\"exit/\" + (exit.uuid) + \"/handle\")},on:{\"initialized\":function($event){return _vm.handleDraggableInitializedFor(exit, $event)},\"dragStarted\":function($event){return _vm.onMoveExitDragStarted($event, exit)},\"dragged\":function($event){return _vm.onMoveExitDragged($event)},\"dragEnded\":function($event){return _vm.onMoveExitDragEnded($event, exit)}}},[_c('i',{staticClass:\"glyphicon glyphicon-move\"})]),_c('div',{staticClass:\"block-exit-remove btn btn-danger btn-xs\",attrs:{\"title\":\"Click to remove this connection\"},on:{\"click\":function($event){return _vm.removeConnectionFrom(exit)}}},[_c('span',{staticClass:\"glyphicon glyphicon-remove\"})]),_c('connection',{key:(\"exit/\" + (exit.uuid) + \"/line\"),attrs:{\"repaint-cache-key-generator\":_vm.generateConnectionLayoutKeyFor,\"source\":_vm.livePosition ? null : _vm.block,\"target\":_vm.blocksById[exit.destinationBlock],\"exit\":exit,\"position\":_vm.livePosition,\"color-category\":_vm.blockClasses[_vm.block.type].category}})]:_vm._e()],2)}),0)]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div><slot></slot></div>\n</template>\n<script>\n  import PlainDraggable from 'plain-draggable'\n\n  export default {\n    data() {\n      return {\n        // draggable: null // no need to set up observers over these\n      }\n    },\n\n    props: {\n      startX: Number,\n      startY: Number,\n      handleDomId: String,\n    },\n\n    // todo: also set `handle` from props onPropsChanged()\n\n    methods: {\n      handleInitialized() {\n        const {draggable} = this\n        // `draggable` reference to reposition if changed externally like:\n        // https://www.npmjs.com/package/plain-draggable#position\n        this.$emit('initialized', {draggable})\n      },\n\n      handleDragged(position) {\n        // eslint-disable-next-line no-debugger\n        // debugger\n\n        const {draggable} = this\n        this.$emit('dragged', {draggable, position})\n      },\n\n      handleDragStarted(position) {\n        const {draggable} = this\n        this.$emit('dragStarted', {draggable, position})\n      },\n\n      handleDragEnded(position) {\n        const {draggable} = this\n        this.$emit('dragEnded', {draggable, position})\n      },\n\n      handleMoved(position) {\n        // eslint-disable-next-line no-debugger\n        // debugger\n\n        const {draggable} = this\n        this.$emit('moved', {draggable, position})\n      }\n    },\n\n    mounted() {\n      // todo: modify this to instantiate blank draggable onCreate, then set options when props change\n      console.debug('PlainDraggable.vue', 'mounted')\n\n      // this.$nextTick(() => {\n      const handle = this.$el.querySelectorAll('.draggable-handle')[0]\n\n      this.draggable = new PlainDraggable(this.$el, {\n        containment: document.querySelector('.builder-canvas'),\n        autoScroll: true,\n\n        // prevent css translate() animations for move\n        // they don't seem to be throttled enough for leaderline to follow tightly\n        leftTop: false,\n\n        onDrag: this.handleDragged,\n        onDragStart: this.handleDragStarted,\n        onDragEnd: this.handleDragEnded,\n        // onMove: this.handleMoved,\n\n        left: this.startX,\n        top: this.startY,\n\n        handle,\n      })\n\n      // draggable.rect.{left,top,x,y,...}\n\n\n      // this.draggable.snap = {x: 50, y: 50, width: 50, height: 50} // todo: why this doesn't work?\n      // this.draggable.snap = {step: 21}\n\n\n      this.handleInitialized()\n      // })\n    },\n\n    destroyed() {\n      this.draggable.remove()\n    }\n  }\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlainDraggable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlainDraggable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PlainDraggable.vue?vue&type=template&id=3b61d02a&\"\nimport script from \"./PlainDraggable.vue?vue&type=script&lang=js&\"\nexport * from \"./PlainDraggable.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"connection\",attrs:{\"reposition-hook\":_vm.repositionHook}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <span class=\"connection\"\n        :reposition-hook=\"repositionHook\" />\n</template>\n\n<script>\n  // import LeaderLine from 'leader-line'\n  const {LeaderLine} = window\n  import {set} from 'lodash'\n  import {mapGetters} from 'vuex'\n\n  export default {\n    props: {\n      exit: Object,\n\n      repaintCacheKeyGenerator: Function,\n      source: Object,\n      target: Object,\n      position: Object,\n\n      colorCategory: Number,\n    },\n\n    data() {\n      return {\n        // line: null, // no need to set up observers over this\n      }\n    },\n\n    computed: {\n      ...mapGetters('builder', ['blocksById']),\n\n      sourceId: ({exit}) => `exit/${exit.uuid}/handle`,\n      targetId: ({exit}) => exit.destinationBlock\n          ? `block/${exit.destinationBlock}/handle`\n          : `exit/${exit.uuid}/pseudo-block-handle`,\n\n      // todo: externalize as `positionCacheKey` + deprecate `position` prop\n      //       but rather include that in `positionCacheKey`'s domain definition\n      repositionHook() {\n        if (!this.repaintCacheKeyGenerator) {\n          return null\n        }\n\n        // @note - intentional side-effect; todo: move this into vuex responding to data changes\n        this.$nextTick(this.reposition) // todo: we only want this called if something changes.\n\n          // generate drafts while 'between exits' or 'source/destination unknown'\n        // todo: push these out into ?block?\n        const source = this.source || {\n          ...set({}, 'platform_metadata.io_viamo.uiData.xPosition', this.position.x),\n          ...set({}, 'platform_metadata.io_viamo.uiData.yPosition', this.position.y)}\n\n        const target = this.target || {\n          ...set({}, 'platform_metadata.io_viamo.uiData.xPosition', this.position.x),\n          ...set({}, 'platform_metadata.io_viamo.uiData.yPosition', this.position.y)}\n\n        return this.repaintCacheKeyGenerator(source, target)\n          .join('\\n')\n      },\n    },\n\n    methods: {\n      reposition() {\n        if (!this.line) {\n          return\n        }\n\n        const position = this.line.position()\n\n        console.debug('connection', 'repositioning', {\n          source: this.source?.uuid,\n          target: this.target?.uuid,\n          position,\n          x: this.line.top,\n          y: this.line.left,\n        })\n      }\n    },\n\n    beforeDestroy() {\n      this.line.remove()\n    },\n\n    mounted() {\n      // todo: add an invisible centered dot on a node header\n      // if (!this.datum.source || !this.datum.target) {\n      //   return\n      // }\n\n      // todo: I think we can do something like this instead; will this prevent all the hairy business if we use pointAnchors?\n      //       See: https://github.com/anseki/leader-line#element\n      //       What I'm thinking is that we can just leverage these x/y's? How do we then update them?\n      // new LeaderLine(element1, LeaderLine.pointAnchor(element3, {x: 10, y: 30}));\n\n      const categoryColorMappings = {\n        'category-0-faint': '#fbfdfb',\n        'category-0-light': '#97BD8A',\n        'category-0-dark': '#38542f',\n        'category-1-faint': '#fdfdfe',\n        'category-1-light': '#6897BB',\n        'category-1-dark': '#30516a',\n        'category-2-faint': '#fdfbf8',\n        'category-2-light': '#C69557',\n        'category-2-dark': '#6e4e25',\n      }\n\n\n\n      const options = {\n        startPlug: 'square',\n\n        startPlugColor: categoryColorMappings[`category-${this.colorCategory}-light`],\n        endPlugColor: categoryColorMappings[`category-${this.colorCategory}-dark`],\n        gradient: true,\n\n        startSocket: 'bottom',\n        endSocket: 'top',\n\n        size: 3,\n        outline: true,\n        outlineColor: '#ffffff',\n        // outlineSize: 0.08,\n\n        path: 'grid',\n        // path: 'fluid',\n        // path: 'arc',\n        // path: 'magnet',\n\n        middleLabel: LeaderLine.captionLabel(this.exit.tag, {\n          color: categoryColorMappings[`category-${this.colorCategory}-dark`],\n          fontSize: 12,\n          // lineOffset: 65,\n        }),\n\n      }\n\n      // const {sourcePosition, targetPosition} = this\n      // this.line = new LeaderLine(\n      //     LeaderLine.pointAnchor(document.body, sourcePosition),\n      //     LeaderLine.pointAnchor(document.body, targetPosition), options)\n\n\n      const blockPaddingOffset = {x: 34, y: -7}\n      const start = document.getElementById(this.sourceId);\n      const end = this.position\n        ? document.getElementById(this.targetId)\n        : LeaderLine.pointAnchor(document.getElementById(this.targetId), blockPaddingOffset)\n\n      this.line = new LeaderLine(start, end, options)\n\n      // stop listening to scroll and window resize hooks\n      // LeaderLine.positionByWindowResize = false\n      // this.line.positionByWindowResize = false\n    }\n  }\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Connection.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Connection.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Connection.vue?vue&type=template&id=a2fa48ca&\"\nimport script from \"./Connection.vue?vue&type=script&lang=js&\"\nexport * from \"./Connection.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <plain-draggable\n      v-if=\"hasLayout\"\n      class=\"block\"\n      :class=\"{\n        active: isBlockActivated,\n        [`category-${blockClasses[block.type].category}`]: true,\n      }\"\n      :startX=\"x\"\n      :startY=\"y\"\n      @dragged=\"onMoved\"\n      @dragStarted=\"selectBlock\">\n\n    <header\n        :id=\"`block/${block.uuid}/handle`\"\n        class=\"block-target draggable-handle\"\n        :class=\"{\n             'initial': false,\n             'pending': isConnectionCreateActive,\n             'fulfilled': false,\n             'rejected': false,\n             'activated': isBlockActivated,\n           }\"\n        @mouseenter=\"isConnectionCreateActive && activateBlockAsDropZone($event)\"\n        @mouseleave=\"isConnectionCreateActive && deactivateBlockAsDropZone($event)\">\n\n      <p class=\"block-type text-muted\">\n        {{trans(`flow-builder.${block.type}`)}}\n      </p>\n\n      <h3 class=\"block-label\"\n          :class=\"{'empty': !block.label}\">\n        {{block.label || 'Untitled block'}}\n      </h3>\n    </header>\n\n    <div class=\"block-exits\">\n      <div v-for=\"exit in block.exits\"\n           :key=\"exit.uuid\"\n           class=\"block-exit\"\n           :class=\"{\n             'initial': false,\n             'pending': isConnectionSourceRelocateActive,\n             'fulfilled': false,\n             'rejected': false,\n             'activated': isExitActivatedForRelocate(exit),\n           }\"\n           @mouseenter=\"isConnectionSourceRelocateActive && activateExitAsDropZone($event, exit)\"\n           @mouseleave=\"isConnectionSourceRelocateActive && deactivateExitAsDropZone($event, exit)\">\n\n        <div class=\"total-label-container\">\n          <span class=\"label label-primary tree-block-item-label tree-block-item-output-subscribers-1\"></span>\n        </div>\n\n        <h3 class=\"block-exit-tag label label-warning\">{{exit.tag}}</h3>\n\n        <template v-if=\"exit.destinationBlock == null\">\n          <plain-draggable class=\"handle-create-link btn btn-default btn-xs btn-flat\"\n                           :class=\"{\n                               'btn-info': exit.destinationBlock != null,\n                           }\"\n                           :id=\"`exit/${exit.uuid}/pseudo-block-handle`\"\n                           :key=\"`exit/${exit.uuid}/pseudo-block-handle`\"\n                           @initialized=\"handleDraggableInitializedFor(exit, $event)\"\n                           @dragStarted=\"onCreateExitDragStarted($event, exit)\"\n                           @dragged=\"onCreateExitDragged($event)\"\n                           @dragEnded=\"onCreateExitDragEnded($event, exit)\">\n            <i class=\"glyphicon glyphicon-move\"></i>\n          </plain-draggable>\n\n          <template v-if=\"isConnectionCreateActive && isExitActivatedForCreate(exit) && livePosition\">\n            <div class=\"handle-move-link btn btn-default btn-xs\"\n                 :class=\"{\n                               'btn-info': exit.destinationBlock != null,\n                           }\"\n                 :id=\"`exit/${exit.uuid}/handle`\">\n              <i class=\"glyphicon glyphicon-move\"></i>\n            </div>\n\n            <connection :key=\"`exit/${exit.uuid}/line-for-draft`\"\n                        :repaint-cache-key-generator=\"generateConnectionLayoutKeyFor\"\n                        :source=\"block\"\n                        :target=\"blocksById[exit.destinationBlock]\"\n                        :exit=\"exit\"\n                        :position=\"livePosition\"\n                        :color-category=\"blockClasses[block.type].category\" />\n          </template>\n        </template>\n\n        <template v-if=\"exit.destinationBlock != null\">\n          <plain-draggable class=\"block-exit-move-handle handle-move-link btn btn-default btn-xs btn-flat\"\n                           :class=\"{\n                               // 'btn-default': exit.destinationBlock != null,\n                           }\"\n                           :id=\"`exit/${exit.uuid}/handle`\"\n                           :key=\"`exit/${exit.uuid}/handle`\"\n                           @initialized=\"handleDraggableInitializedFor(exit, $event)\"\n                           @dragStarted=\"onMoveExitDragStarted($event, exit)\"\n                           @dragged=\"onMoveExitDragged($event)\"\n                           @dragEnded=\"onMoveExitDragEnded($event, exit)\">\n            <i class=\"glyphicon glyphicon-move\"></i>\n          </plain-draggable>\n\n          <div class=\"block-exit-remove btn btn-danger btn-xs\"\n               title=\"Click to remove this connection\"\n               @click=\"removeConnectionFrom(exit)\">\n            <span class=\"glyphicon glyphicon-remove\"></span>\n          </div>\n\n          <connection :key=\"`exit/${exit.uuid}/line`\"\n                      :repaint-cache-key-generator=\"generateConnectionLayoutKeyFor\"\n                      :source=\"livePosition ? null : block\"\n                      :target=\"blocksById[exit.destinationBlock]\"\n                      :exit=\"exit\"\n                      :position=\"livePosition\"\n                      :color-category=\"blockClasses[block.type].category\" />\n        </template>\n\n      </div>\n    </div>\n  </plain-draggable>\n</template>\n\n<script>\n  import {isNumber, forEach} from 'lodash'\n  import {mapActions, mapGetters, mapMutations, mapState} from 'vuex'\n  import PlainDraggable from '@/components/common/PlainDraggable.vue'\n  import {ResourceResolver, SupportedMode} from '@floip/flow-runner'\n  import {OperationKind, generateConnectionLayoutKeyFor} from '@/store/builder'\n  import Connection from '@/components/interaction-designer/Connection.vue'\n  import lang from '@/lib/filters/lang'\n\n  export default {\n    props: ['block', 'x', 'y'],\n    mixins: [lang],\n    components: {\n      Connection,\n      PlainDraggable,\n    },\n\n    created() {\n      this.draggablesByExitId = {} // todo: these need to be (better) lifecycle-managed (eg. mcq add/remove exit).\n    },\n\n    data() {\n      return {\n        livePosition: null,\n        // draggablesByExitId: {}, // no need to vuejs-observe these\n      }\n    },\n\n    computed: {\n      ...mapState('flow', ['resources']),\n      ...mapState('builder', ['activeBlockId', 'operations']),\n      ...mapState({\n        blockClasses: ({trees: {ui}}) => ui.blockClasses,\n      }),\n\n      ...mapGetters('builder', ['blocksById']),\n\n      hasLayout() {\n        return isNumber(this.x) && isNumber(this.y)\n      },\n\n      // todo: does this component know too much, what out of the above mapped state can be mapped?\n      // todo: We should likely also proxy our resource resolving so that as to mitigate the need to see all resources and generate a context\n\n      isConnectionSourceRelocateActive: ({operations}) => !!operations[OperationKind.CONNECTION_SOURCE_RELOCATE].data,\n      isConnectionCreateActive: ({operations}) => !!operations[OperationKind.CONNECTION_CREATE].data,\n      isBlockActivated: ({activeBlockId, block, operations}) => {\n        if (activeBlockId && activeBlockId === block.uuid) {\n          return true\n        }\n\n        const data = operations[OperationKind.CONNECTION_CREATE].data\n        return data && data.target === block.uuid\n      },\n    },\n\n    methods: {\n      // todo: how do we decide whether or not this should be an action or a vanilla domain function?\n      ...{\n        generateConnectionLayoutKeyFor,\n      },\n\n      ...mapMutations('builder', ['setBlockPositionTo']),\n\n      ...mapActions('builder', {\n        _removeConnectionFrom: 'removeConnectionFrom'\n      }),\n\n      ...mapActions('builder', [\n        // ConnectionSourceRelocate\n        'initializeConnectionSourceRelocateWith',\n        'setConnectionSourceRelocateValue',\n        'setConnectionSourceRelocateValueToNullFrom',\n        'applyConnectionSourceRelocate',\n\n        // ConnectionCreate\n        'initializeConnectionCreateWith',\n        'setConnectionCreateTargetBlock',\n        'setConnectionCreateTargetBlockToNullFrom',\n        'applyConnectionCreate',\n      ]),\n\n      ...mapMutations('builder', ['activateBlock']),\n\n      resolveTextResource(uuid) {\n        const {resources} = this\n        const context = {\n          resources,\n          languageId: '22',\n          mode: SupportedMode.SMS}\n        const resource = new ResourceResolver(context)// as IContext) // this isn't ts\n            .resolve(uuid);\n\n        return resource.hasText()\n            ? resource.getText()\n            : uuid\n      },\n\n      // todo: push NodeExit into it's own vue component\n      isExitActivatedForRelocate(exit) {\n        const data = this.operations[OperationKind.CONNECTION_SOURCE_RELOCATE].data\n        return data\n            && data.to\n            && data.to.exitId === exit.uuid\n      },\n\n      isExitActivatedForCreate(exit) {\n        const data = this.operations[OperationKind.CONNECTION_CREATE].data\n        return data\n            && data.source\n            && data.source.exitId === exit.uuid\n      },\n\n      activateExitAsDropZone(e, exit) {\n        const {block} = this\n        this.setConnectionSourceRelocateValue({block, exit})\n      },\n\n      deactivateExitAsDropZone(e, exit) {\n        const {block} = this\n        this.setConnectionSourceRelocateValueToNullFrom({block, exit})\n      },\n\n      // eslint-disable-next-line no-unused-vars\n      activateBlockAsDropZone(e) {\n        const {block} = this\n        this.setConnectionCreateTargetBlock({block})\n      },\n\n      // eslint-disable-next-line no-unused-vars\n      deactivateBlockAsDropZone(e) {\n        const {block} = this\n        this.setConnectionCreateTargetBlockToNullFrom({block})\n      },\n\n      onMoved({position: {left: x, top: y}}) {\n        // todo: try this the vuejs way where we push the change into state, then return false + modify draggable w/in store ?\n\n        const {block} = this\n        this.$nextTick(() => {\n          this.setBlockPositionTo({position: {x, y}, block})\n\n          forEach(this.draggablesByExitId, draggable =>\n            draggable.position())\n\n          console.debug('Block', 'onMoved', 'positioned all of', this.draggablesByExitId)\n        })\n      },\n\n      removeConnectionFrom(exit) {\n        const {block} = this\n        this._removeConnectionFrom({block, exit})\n      },\n\n      handleDraggableInitializedFor({uuid}, {draggable}) {\n        this.draggablesByExitId[uuid] = draggable\n\n        const {left, top} = draggable\n        const {uuid: blockId} = this.block\n\n\n        console.debug('Block', 'handleDraggableInitializedFor', {blockId, exitId: uuid, coords: {left, top}})\n      },\n\n      onCreateExitDragStarted({draggable}, exit) {\n        const {block} = this\n        const {left: x, top: y} = draggable\n\n        this.initializeConnectionCreateWith({\n          block,\n          exit,\n          position: {x, y}})\n\n        // since mouseenter + mouseleave will not occur when draggable is below cursor\n        // we simply snap the draggable out from under the cursor during this operation\n        draggable.left += 30\n        draggable.top += 25\n      },\n\n      onCreateExitDragged({position: {left: x, top: y}}) {\n        this.livePosition = {x, y}\n      },\n\n      onCreateExitDragEnded({draggable}) {\n        const {x: left, y: top} = this.operations[OperationKind.CONNECTION_CREATE].data.position\n\n        console.debug('Block', 'onCreateExitDragEnded', 'operation.data.position', {left, top})\n        console.debug('Block', 'onCreateExitDragEnded', 'reset', {left: draggable.left, top: draggable.top})\n\n        Object.assign(draggable, {left, top})\n\n        this.applyConnectionCreate()\n\n        this.livePosition = null\n      },\n\n      onMoveExitDragStarted({draggable}, exit) {\n        const {block} = this\n        const {left: x, top: y} = draggable\n\n        this.initializeConnectionSourceRelocateWith({\n          block,\n          exit,\n          position: {x, y}})\n\n        // since mouseenter + mouseleave will not occur when draggable is below cursor\n        // we simply snap the draggable out from under the cursor during this operation\n        draggable.left += 30\n        draggable.top += 25\n\n      },\n\n      onMoveExitDragged({position: {left: x, top: y}}) {\n        this.livePosition = {x, y}\n      },\n\n      // todo: store the leaderlines in vuex and manip there --- aka the leaderline itself would simply _produce_ the\n      //       domain object which we thenceforth manip in vuex ?\n\n      onMoveExitDragEnded({draggable}) {\n        const {x: left, y: top} = this.operations[OperationKind.CONNECTION_SOURCE_RELOCATE].data.position\n\n        console.debug('Block', 'onMoveExitDragEnded', 'operation.data.position', {left, top})\n        console.debug('Block', 'onMoveExitDragEnded', 'reset', {left: draggable.left, top: draggable.top})\n\n        Object.assign(draggable, {left, top})\n\n        this.applyConnectionSourceRelocate()\n        this.livePosition = null\n      },\n\n      selectBlock() {\n        const {block: {uuid: blockId}} = this\n        this.activateBlock({blockId})\n      },\n    },\n  }\n</script>\n\n<style lang=\"scss\">\n  .btn-default.btn-flat {\n    @extend .btn-default;\n    background: transparent;\n  }\n\n  .block {\n    position: absolute;\n    left: 0;\n    top: 0;\n    z-index: 1*10;\n\n    min-width: 122px;\n    padding: 0.4em;\n    padding-bottom: 0.25em;\n    scroll-margin: 35px;\n    scroll-margin-top: 100px;\n\n    background-color: white;\n    color: #575757;\n    border: 1px solid #5b5b5b;\n\n    border-radius: 0.3em;\n    box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n    opacity: 0.9;\n\n    transition:\n      opacity 200ms ease-in-out,\n      background-color 200ms ease-in-out;\n\n    .block-label {\n      font-size: 14px;\n      font-weight: normal;\n\n      &.empty {\n        color: #aaa;\n      }\n    }\n\n    .block-type {\n      font-size: 11px;\n      font-weight: bolder;\n      margin-right: 1em;\n      margin-bottom: 0.4em;\n    }\n\n    .block-target {\n      min-height: 6em;\n      border: 1px dashed transparent;\n      border-bottom: 1px solid #eee;\n      padding: 0.1em;\n\n      transition: border-radius 200ms ease-in-out;\n\n      &:hover {\n        border-radius: 0.3em;\n        border-color: #5b5b5b;\n      }\n    }\n\n    .block-exits {\n      display: flex;\n      white-space: nowrap;\n      position: relative;\n      top: 0em;\n      margin-top: 0.25em;\n\n      .block-exit {\n        display: inline-block;\n        border: 1px dashed transparent;\n        transition: border-radius 200ms ease-in-out;\n\n        /*flex: auto;*/\n        min-width: 6em;\n        max-width: 140px;\n\n        padding: 0.25em 1em;\n        text-align: center;\n\n        .block-exit-tag  {\n          display: block;\n\n          min-width: 6em;\n          max-width: 140px;\n\n          margin: 0 0 0.5em 0;\n          padding: 0.4em;\n\n          background-color: #5b5b5b;\n          border: none;\n\n          font-weight: normal;\n          font-size: 12px;\n\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          overflow: hidden;\n        }\n\n        .block-exit-move-handle {\n          margin-right: 0.5em;\n        }\n\n        .block-exit-remove {\n          background-image: none;\n          opacity: 0;\n          transition: opacity 200ms ease-in-out;\n        }\n\n        &.activated {\n          border-radius: 0.3em;\n          border-color: #333333;\n        }\n      }\n\n    }\n\n    // state mutations\n\n    &.active {\n      border-width: 2px;\n      box-shadow: 0 3px 6px #CACACA;\n    }\n\n    &:hover {\n      opacity: 1;\n    }\n\n    &.active,\n    &:hover {\n      .block-exit .block-exit-remove {\n        opacity: 1;\n      }\n    }\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Block.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Block.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Block.vue?vue&type=template&id=2d7b1c6e&\"\nimport script from \"./Block.vue?vue&type=script&lang=js&\"\nexport * from \"./Block.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Block.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {mapState} from 'vuex'\nimport {Component, Vue} from 'vue-property-decorator'\nimport Block from \"@/components/interaction-designer/Block.vue\"\n\n@Component({\n  components: {\n    Block,\n  },\n\n  computed: {\n    ...mapState('flow', ['flows']),\n  },\n\n  mounted() {\n    this.$store.dispatch('builder/loadFlow')\n  },\n})\nexport default class BuilderCanvas extends Vue {\n}\n\nexport {BuilderCanvas}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BuilderCanvas.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BuilderCanvas.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./BuilderCanvas.vue?vue&type=template&id=4cc35a95&scoped=true&\"\nimport script from \"./BuilderCanvas.vue?vue&type=script&lang=ts&\"\nexport * from \"./BuilderCanvas.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./BuilderCanvas.vue?vue&type=style&index=0&id=4cc35a95&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4cc35a95\",\n  null\n  \n)\n\nexport default component.exports","\n/*global Backbone */\nwindow.app = window.app || {};\n\n\n(function($) {\n\n\tapp.ui = app.ui || {};\n\tapp.ui.changes = 0;\n\n\tapp.ui.saveTimer = app.ui.saveTimer || 60;\n\tapp.ui.saveCurrentlyInProgress = 0;\n\n\tapp.ui.removeClassPrefix = function(blockClassName) {\n\n\t\treturn blockClassName.substr(11);\n\n\t};\n\n\tapp.ui.change = function(textNotification) {\n    console.log('app.ui.change', textNotification);\n\n    var selectedBlock = builder.$store.getters.selectedBlock\n\n    if (!selectedBlock) {return}\n\n    // Temporary legacy fix for when some customData properties are not reactive by default\n    // because they don't yet exist in `15-trees-block-defaults.js`\n    selectedBlock.customData = _.extend({}, selectedBlock.customData)\n  };\n\n\tapp.ui.noChange = function() {\n    console.log('app.ui.nochange');\n  };\n\n\tapp.ui.changeLock = function() {\n\t\tapp.ui.changes = -1;\n\t};\n\n\tapp.ui.findSubscriberPropertyField = function(search) {\n\t\treturn _.find(app.ui.subscriberPropertyFields, search) || null\n\t};\n\n\tapp.dataControl = {};\n\tapp.dataControl.send = function () {\n    if (!builder.$store.getters.isFeatureTreeSaveEnabled) {\n      console.info('Feature `treeSave` is disabled')\n      return\n    }\n\n    var outputData = JSON.stringify(app.tree);\n\n\t\tvar treeId = app.tree.get('id');\n\t\tif (app.ui.saveCurrentlyInProgress == 1) {\n\t\t\tconsole.log('Save currently in progress');\n\t\t\treturn;\n\t\t}\n\n\t\tvar treeUpdatedConflict = builder.$store.state.trees.ui.treeUpdateConflict;\n\t\tapp.ui.saveCurrentlyInProgress = 1;\n\n\t\tapp.audioChoice.setTopUpdatesBar(Lang.trans('trees.saving-tree'));\n\t\tapp.dataControl._setValidationResultsForUI([]);\n\n    var requestData = {\n    \tdata: outputData,\n\t\t};\n    if (treeUpdatedConflict !== null) {\n\t\t\tconsole.log('Update not currently possible');\n\t\t\treturn false;\n\t\t}\n\n\t\tvar promise = $.post('/ajax/trees/save/' + treeId, requestData)\n\t\t\t.done(function (response) {\n        app.audioChoice.setTopUpdatesBar(Lang.trans('trees.tree-saved'), 1);\n        //the person has been logged out\n        if (typeof (response) != \"object\") {\n          //spawn the modal\n          $(\"#myModal\").modal({show: true, backdrop: 'static'});\n        }\n\n        app.ui.saveCurrentlyInProgress = 0;\n\t\t\t\tapp.dataControl._setValidationResultsForUI(response.validation_results);\n\n        app.ui.previousTreeJson = outputData; // used to detect changes in vuejs\n        app.ui.noChange();\n\n        app.tree.updateFloipAlert();\n      })\n\t\t\t.fail(function (response) {\n\t\t\t\tif (response.status === 409) {\n\t\t\t\t\t// Dispatch an action to prevent further tree update until page is refreshed\n\t\t\t\t\tvar payload = {\n\t\t\t\t\t\ttreeUpdateConflict: {\n\t\t\t\t\t\t\ttree_id: treeId,\n\t\t\t\t\t\t\tmessage: response.responseJSON.message,\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tbuilder.$store.dispatch('setTreeUpdateConflictStatus', payload);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error(response)\n\t\t\t\t\tapp.audioChoice.setTopUpdatesBar(Lang.trans('trees.error-while-saving-tree'), 1);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.always(function () {\n\t\t\t\tapp.ui.saveCurrentlyInProgress = 0;\n\t\t\t});\n\n\t\t// Create Adapter from jQuery-promise-api to ES6-promise-api\n\t\t// so that it can be chained into vuex actions\n\t\treturn _.defaults(promise, {\n\t\t\tthen: promise.done,\n\t\t\tcatch: promise.fail,\n\t\t\tfinally: promise.always,\n\t\t})\n\t};\n\n\tapp.dataControl._setValidationResultsForUI = function(validationResults) {\n    app.ui.validationResults = validationResults || [];\n  };\n\n  app.exportOptionsModal = {}\n  app.exportOptionsModal.initialize = function () {\n    var exportOptionsTemplate = _.template(JST[\"legacy/templates/export-options-template.html\"])\n\n    $('body').append(exportOptionsTemplate())\n\n    $('.tree-export-options-input').change(function (e) {\n      app.exportOptionsModal.handleInput(e)\n    })\n\n    // Select the URL box text if clicked\n    $('.tree-export-options-download-api-url').focus(function () {\n      this.select()\n    })\n\n    // Add datepickers for the time boxes\n    $('.tree-export-options-input-datepicker').datetimepicker({\n      pickTime: false\n    })\n    $('.tree-export-options-input-datepicker').on('dp.change', function (e) {\n      $(e.currentTarget).trigger('change')\n    })\n\n    // Kickoff the process to build the link URL!\n    $('.tree-export-options-input').first().trigger('change')\n  }\n\n  app.exportOptionsModal.open = function () {\n    if ($('#export-options-modal').length == 0) {\n      app.exportOptionsModal.initialize()\n    }\n\n    // Show the modal.\n    $('#export-options-modal').modal()\n  }\n\n  app.exportOptionsModal.handleInput = function (e) {\n    var value = $(e.currentTarget).val()\n    var key = $(e.currentTarget).attr('data-export-options-key')\n\n    if (key == 'dateFilter') {\n      if (value == '1') {\n        $('.export-options-date-filter-container').show()\n      } else {\n        $('.export-options-date-filter-container').hide()\n\n        // Reset the values so they don't get serialized if hidden\n        $('.tree-export-options-input[data-export-options-key=callsAfter]').val('')\n        $('.tree-export-options-input[data-export-options-key=callsBefore]').val('')\n      }\n    }\n\n    $('.tree-export-options-download-link').attr('href', app.exportOptionsModal.buildUrl())\n    $('.tree-export-options-download-api-url').val(app.exportOptionsModal.buildUrl(1))\n  }\n\n  app.exportOptionsModal.buildUrl = function (isApiUrl) {\n    var url = \"/trees/\" + app.ui.treeId + \"/exportcsv?\";\n\n    if (isApiUrl) {\n      url = window.location.protocol + \"//\" + window.location.host + \"/api/v1/trees/\" + app.ui.treeId + \"/csvexport/direct?\";\n    }\n\n    url += $('.tree-export-options-input').serialize()\n\n    if (isApiUrl) {\n      url += \"&api_key=\" + app.ui.apiKey;\n    }\n\n    return url\n  }\n\n  // Initial version of the shareable link modal,\n  // for a specific single tree:\n  app.shareableLinkModal = {}\n  app.shareableLinkModal.initialize = function () {\n    var shareableLinkTemplate = _.template(JST[\"legacy/templates/shareable-link-template.html\"])\n\n    $('body').append(shareableLinkTemplate())\n\n    // Select the URL box text if clicked\n    $('.tree-shareable-link-url').focus(function () {\n      this.select()\n    })\n\n    // Assign button clicks\n    $('.tree-shareable-link-generate-button').on('click', function (e) {\n      app.shareableLinkModal.sendRequest('create')\n    })\n    $('.tree-shareable-link-delete-button').on('click', function (e) {\n      app.shareableLinkModal.switchView('delete')\n    })\n    $('.tree-shareable-link-delete-confirm-button').on('click', function (e) {\n      app.shareableLinkModal.sendRequest('delete')\n    })\n    $('.tree-shareable-link-delete-cancel-button').on('click', function (e) {\n      app.shareableLinkModal.switchView('edit')\n    })\n\n    if (app.ui.publicId) {\n      // If there's already a public ID, then show the \"edit\" view\n      app.shareableLinkModal.setUrl()\n      app.shareableLinkModal.switchView('edit')\n    } else {\n      app.shareableLinkModal.switchView('new')\n    }\n  }\n\n  app.shareableLinkModal.switchView = function (view) {\n    $('.shareable-link-delete').hide()\n    $('.shareable-link-edit').hide()\n    $('.shareable-link-new').hide()\n    $(\".shareable-link-\" + view).show()\n  }\n\n  app.shareableLinkModal.open = function (e) {\n    if ($('#shareable-link-modal').length == 0) {\n      app.shareableLinkModal.initialize()\n    }\n\n    // Show the modal.\n    $('#shareable-link-modal').modal()\n  }\n\n  app.shareableLinkModal.buildUrl = function () {\n    var url = ''\n    if (app.ui.publicId) {\n      url = window.location.protocol + \"//\" + window.location.host + \"/share/a/trees/\" + app.ui.publicId;\n    }\n    return url\n  }\n\n  app.shareableLinkModal.setUrl = function () {\n    var url = app.shareableLinkModal.buildUrl()\n    $('.tree-shareable-link-url').val(url)\n    $('.tree-shareable-link-url-link').attr('href', url)\n  }\n\n  app.shareableLinkModal.sendRequest = function (requestType) {\n    $.post(\"/ajax/trees/updateshareablelink/\" + app.ui.treeId, {type: requestType})\n        .done(function (response) {\n          if (response) {\n            // New one!\n            app.ui.publicId = response\n\n            app.shareableLinkModal.setUrl()\n            app.shareableLinkModal.switchView('edit')\n          } else {\n            app.ui.publicId = ''\n            app.shareableLinkModal.switchView('new')\n          }\n\n          return true\n        })\n        .fail(function (response) {\n          var errorMessage = response.responseJSON || 'Error while updating shareable link...'\n          app.audioChoice.setTopUpdatesBar(errorMessage, 1)\n        })\n  }\n\n  // Updated version of the shareable link modal,\n  // for tree sets rather than specific trees!\n\n  app.shareableLinkSetsModal = {}\n  app.shareableLinkSetsModal.initialize = function () {\n    var shareableLinkTemplate = _.template(JST[\"legacy/templates/shareable-link-sets-template.html\"])\n\n    $('body').append(shareableLinkTemplate({\n      defaultLocales: builder.$store.state.defaultLocales,\n      orgEnabledLanguages: builder.$store.state.orgEnabledLanguages,\n    }))\n\n    // Assign button clicks\n    $('.tree-shareable-link-sets-generate-button').on('click', function (e) {\n      app.shareableLinkSetsModal.sendRequest('create')\n    })\n\n    $('input[name=shouldUseCustomBlockOrdering]').on('click', function () {\n      if ($(this).is(':checked')) {\n        $('.block-ordinal').prop('disabled', false)\n      } else {\n        $('.block-ordinal').prop('disabled', true)\n      }\n    })\n\n    $(\"select[name='lockDateRange']\").on('change', function () {\n      if (this.value === '1') {\n        $(\".hide-on-lockDateRange\").hide()\n      } else {\n        $(\".hide-on-lockDateRange\").show()\n      }\n    })\n\n    // Initialize the second half with the list of existing links:\n    app.shareableLinkSetsModal.initializeLinksList()\n  }\n\n  app.shareableLinkSetsModal.initializeLinksList = function () {\n    var shareableLinkListTemplate = _.template(JST[\"legacy/templates/shareable-link-sets-list-template.html\"])\n    $('.shareable-link-sets-list-container').html(shareableLinkListTemplate)\n\n    $('.tree-shareable-link-sets-delete-button').on('click', function (e) {\n      app.shareableLinkSetsModal.switchToDeleteView(e)\n    })\n    $('.tree-shareable-link-sets-delete-confirm-button').on('click', function (e) {\n      var shareableLinkHash = $(e.currentTarget).attr('data-link-hash')\n      app.shareableLinkSetsModal.sendRequest('delete', shareableLinkHash)\n    })\n    $('.tree-shareable-link-sets-delete-cancel-button').on('click', function (e) {\n      app.shareableLinkSetsModal.switchAwayFromDeleteView(e)\n    })\n  }\n\n  app.shareableLinkSetsModal.switchToDeleteView = function (e) {\n    var shareableLinkId = $(e.currentTarget).attr('data-link-id')\n    var listElement = $(\".shareable-link-item-div[data-link-id=\" + shareableLinkId + \"]\")\n\n    if ($(listElement).hasClass('list-group-item-danger')) {\n      app.shareableLinkSetsModal.switchAwayFromDeleteView(e)\n    } else {\n      $(listElement).addClass('list-group-item-danger')\n      $(listElement).children('.shareable-link-item-div-delete').show()\n    }\n\n  }\n\n  app.shareableLinkSetsModal.switchAwayFromDeleteView = function (e) {\n    var shareableLinkId = $(e.currentTarget).attr('data-link-id')\n    var listElement = $(\".shareable-link-item-div[data-link-id=\" + shareableLinkId + \"]\")\n\n    $(listElement).removeClass('list-group-item-danger')\n    $(listElement).children('.shareable-link-item-div-delete').hide()\n  }\n\n  app.shareableLinkSetsModal.open = function (e) {\n    if ($('#shareable-link-sets-modal').length == 0) {\n      app.shareableLinkSetsModal.initialize()\n    }\n\n    // Re-set the labels\n    app.shareableLinkSetsModal.setLabelValues()\n\n    // Show the modal.\n    $('#shareable-link-sets-modal').modal()\n  }\n\n  app.shareableLinkSetsModal.setLabelValues = function () {\n    // TODO - use another mini-template for these guys rather than updating text values with jQuery.\n    var startDateLabel = app.startDate.format('MMMM D, YYYY')\n    var endDateLabel = app.endDate.format('MMMM D, YYYY')\n    var channelLabel = app.labels.channel\n    var blocksLabel = app.labels.blocks\n\n    if (app.params.versionFiltersEnabled) {\n      $('.shareable-link-sets-versions-label').show()\n    } else {\n      $('.shareable-link-sets-versions-label').hide()\n    }\n\n    if (app.params.noValidDateRange) {\n      $('.shareable-link-sets-date-range-labels').hide()\n      $('.shareable-link-sets-date-range-all-time-label').show()\n    } else {\n      $('span.sl-label-start-date').text(startDateLabel)\n      $('span.sl-label-end-date').text(endDateLabel)\n    }\n\n    $('span.sl-label-channel').text(channelLabel)\n    $('span.sl-label-blocks').text(blocksLabel)\n\n    $('span.sl-label-versions').text(app.labels.versionsSelected + \" of \" + app.labels.versionsTotal)\n  }\n\n  app.shareableLinkSetsModal.buildUrl = function (public_hash) {\n    var url = ''\n    if (public_hash) {\n      url = window.location.protocol + \"//\" + window.location.host + \"/share/a/trees/\" + public_hash;\n    }\n    return url\n  }\n\n  app.shareableLinkSetsModal.sendRequest = function (requestType, shareableLinkHash) {\n    if (requestType == 'delete') {\n      var sendRequest = {\n        requestType: requestType,\n        shareableLinkHash: shareableLinkHash\n      }\n    } else {\n      var sendRequest = {\n        requestType: requestType,\n        channelFilter: app.params.channelFilter,\n        includedBlocks: app.params.includedBlocks,\n        excludedBlocks: app.params.excludedBlocks,\n        blockKeys: app.blockKeys,\n        hiddenDirectorySelectionFields: app.params.hiddenDirectorySelectionFields,\n        lockDateRange: _.parseInt($('.shareable-link-sets-input[name=lockDateRange]').val()),\n        resultsLocale: $('.shareable-link-sets-input[name=resultsLocale]').val(),\n        showKeyMetrics: $('.shareable-link-sets-input[name=showKeyMetrics]').is(':checked') ? '1' : '0',\n        showBlockType: $('.shareable-link-sets-input[name=showBlockType]').is(':checked') ? '1' : '0',\n\t\t\t\tshouldShowResultsFromIncompleteEngagements: $('.shareable-link-sets-input[name=shouldShowResultsFromIncompleteEngagements]').is(':checked') ? '1' : '0',\n\t\t\t\tshouldOnlyShowLatestResultPerSession: $('.shareable-link-sets-input[name=shouldOnlyShowLatestResultPerSession]').is(':checked') ? '1' : '0',\n\t\t\t\tshouldUseSimpleDatePicker: $('.shareable-link-sets-input[name=shouldUseSimpleDatePicker]').is(':checked') ? '1' : '0',\n\t\t\t\tshouldUseCustomBlockOrdering: $('.shareable-link-sets-input[name=shouldUseCustomBlockOrdering]').is(':checked') ? '1' : '0',\n        enabledTabs: $('input[name=enabledTabs]:checked')\n            .map(function (i, el) {\n              return $(el).val()\n            })\n            .get(),\n        tagFilter: $('input[name=tagFilter]:checked')\n            .map(function (i, el) {\n              return $(el).val()\n            })\n            .get(),\n        directorySelectionFieldFilter: $('input[name=directorySelectionFieldFilter]:checked')\n            .map(function (i, el) {\n              return $(el).val()\n            })\n            .get(),\n        blockChoiceFilter: $('input[name=blockChoiceFilter]:checked')\n            .map(function (i, el) {\n              return $(el).val()\n            })\n            .get(),\n        filterDisplayThreshold: $('input[name=filterDisplayThreshold]').val(),\n      }\n\n      if ($('.shareable-link-sets-input[name=shouldUseCustomBlockOrdering]').is(':checked')) {\n        sendRequest['customBlockOrder'] = _.reduce($('.block-ordinal').toArray(),\n            function (memo, el) {\n              memo[$(el).data('js-key')] = $(el).val()\n              return memo\n            },\n            {})\n      }\n\n      if (app.params.noValidDateRange == false) {\n        sendRequest.startDate = app.startDate.format('YYYY-MM-DD')\n        sendRequest.endDate = app.endDate.format('YYYY-MM-DD')\n      }\n\n      if (app.params.versionFiltersEnabled) {\n        sendRequest.versions = app.params.versions\n      }\n    }\n\n    $.post(\"/ajax/treeversionsets/updateshareablelink/\" + app.tree_version_set_id, {data: sendRequest})\n        .done(function (response) {\n          if (requestType == 'delete') {\n            if (response == 1) {\n              // Remove the entry with that hash from the local JS list\n              app.shareableLinks = _.without(app.shareableLinks,\n                  _.findWhere(app.shareableLinks, {public_hash: shareableLinkHash}))\n              // Initialize the second half with the list of existing links:\n              app.shareableLinkSetsModal.initializeLinksList()\n            }\n          } else {\n\n            // Add the new response to the start of the shareable links array:\n            app.shareableLinks.unshift(response)\n\n            // Initialize the second half with the list of existing links:\n            app.shareableLinkSetsModal.initializeLinksList()\n          }\n          return true\n        })\n        .fail(function (response) {\n          var errorMessage = response.responseJSON || 'Error while updating shareable link...'\n          app.audioChoice.setTopUpdatesBar(errorMessage, 1)\n        })\n  }\n\n  // csvExports modal helper functions\n  app.csvExportsModal = {}\n  app.csvExportsModal.initialize = function () {\n    var csvExportTemplate = _.template(JST[\"legacy/templates/combined-csv-export-template.html\"])\n\n    $('body').append(csvExportTemplate())\n\n    // Assign button clicks\n    $('.tree-csv-exports-generate-button').on('click', function (e) {\n      app.csvExportsModal.sendCreateRequest()\n    })\n\n    // var to check when default\n    var setToDefault = true\n    // set recipes – a string of values of customisable fields\n    // headings-cells-mcq-messages\n    var recipeHumanReadable = '0000'\n    var recipeMachineReadable = '1112'\n    var recipeUserCustomised = null\n\n    // get selected options for export from users\n    function getUserOptionsRecipe() {\n      var fhd = ($(\".csv-exports-option-format-headings\").val()) ? $(\".csv-exports-option-format-headings\").val() : '0'\n      var fcc = ($(\".csv-exports-option-format-cells\").val()) ? $(\".csv-exports-option-format-cells\").val() : '0'\n      var vcq = ($(\".csv-exports-option-values-mcq\").val()) ? $(\".csv-exports-option-values-mcq\").val() : '0'\n      var vms = ($(\".csv-exports-option-values-messages\").val()) ? $(\".csv-exports-option-values-messages\").val() : '0'\n\n      return fhd + fcc + vcq + vms\n    }\n\n    // remove active class from all\n    $(\"[class*=csv-exports-btn-format-]\").click(function () {\n      $(\"[class*=csv-exports-btn-format-]\").removeClass('btn-primary active').addClass('btn-default')\n    })\n\n    // when human-readable is selected\n    $(\".csv-exports-btn-format-human\").click(function () {\n      setToDefault = false\n      $(this).addClass('btn-primary active').removeClass('btn-default')\n      $(\".csv-exports-option-format-headings option\").eq('0').prop('selected', 'selected')\n      $(\".csv-exports-option-format-cells option\").eq('0').prop('selected', 'selected')\n      $(\".csv-exports-option-values-mcq option\").eq('0').prop('selected', 'selected')\n      $(\".csv-exports-option-values-messages option\").eq('0').prop('selected', 'selected')\n    })\n\n    // when machine-readable is selected\n    $(\".csv-exports-btn-format-machine\").click(function () {\n      setToDefault = false\n      $(this).addClass('btn-primary active').removeClass('btn-default')\n      $(\".csv-exports-option-format-headings option\").eq('1').prop('selected', 'selected')\n      $(\".csv-exports-option-format-cells option\").eq('1').prop('selected', 'selected')\n      $(\".csv-exports-option-values-mcq option\").eq('1').prop('selected', 'selected')\n      $(\".csv-exports-option-values-messages option\").eq('2').prop('selected', 'selected')\n    })\n\n    // when custom is selected\n    $(\".csv-exports-btn-format-custom\").click(function () {\n      setToDefault = false\n      $(this).addClass('btn-primary active').removeClass('btn-default')\n    })\n\n    // when we are to use default – use human-readable\n    if (setToDefault) {\n      $(\".csv-exports-btn-format-human\").trigger('click')\n    }\n\n    // on change check what options have been selected\n    $(\"[class*=csv-exports-option-]\").change(function () {\n      setToDefault = false\n      recipeUserCustomised = getUserOptionsRecipe()\n\n      // if customRecipe is neither machine-readable NOR human-readable then it is custom\n      if (recipeUserCustomised) {\n        if (recipeUserCustomised == recipeHumanReadable) {\n          $(\".csv-exports-btn-format-human\").trigger('click')\n        } else if (recipeUserCustomised == recipeMachineReadable) {\n          $(\".csv-exports-btn-format-machine\").trigger('click')\n        } else {\n          setToDefault = false\n          $(\"[class*=csv-exports-btn-format-]\").removeClass('btn-primary active').addClass('btn-default')\n          $(\".csv-exports-btn-format-custom\").addClass('btn-primary active').removeClass('btn-default')\n        }\n      }\n    })\n\n    // Initialize the second half with the list of existing links:\n    app.csvExportsModal.initializeLinksList()\n  }\n\n  app.csvExportsModal.initializeLinksList = function () {\n    if (typeof app.csvExportsModal.shareableLinkListTemplate == 'undefined') {\n      app.csvExportsModal.shareableLinkListTemplate = _.template(JST[\"legacy/templates/combined-csv-export-list-template.html\"])\n    }\n    $('.csv-exports-list-container').html(app.csvExportsModal.shareableLinkListTemplate())\n    app.csvExportsModal.queueInProgress()\n  }\n\n  app.csvExportsModal.open = function (e) {\n    if ($('#combined-csv-export-modal').length == 0) {\n      app.csvExportsModal.initialize()\n    }\n\n    app.csvExportsModal.setLabelValues()\n    $('#combined-csv-export-modal').modal()\n  }\n\n  app.csvExportsModal.setLabelValues = function () {\n    // TODO - use another mini-template for these guys, rather than updating text values with jQuery.\n    var startDateLabel = app.startDate.format('MMMM D, YYYY')\n    var endDateLabel = app.endDate.format('MMMM D, YYYY')\n    var channelLabel = app.labels.channel\n    var blocksLabel = app.labels.blocks\n\n    if (app.params.versionFiltersEnabled) {\n      $('.export-version-sets-versions-label').show()\n    } else {\n      $('.export-version-sets-versions-label').hide()\n    }\n\n    if (app.params.noValidDateRange) {\n      $('.csv-exports-date-range-labels').hide()\n      $('.csv-exports-date-range-all-time-label').show()\n    } else {\n      $('span.sl-label-start-date').text(startDateLabel)\n      $('span.sl-label-end-date').text(endDateLabel)\n    }\n\n    $('span.sl-label-channel').text(channelLabel)\n    $('span.sl-label-blocks').text(blocksLabel)\n\n    $('span.sl-label-versions').text(app.labels.versionsSelected + \" of \" + app.labels.versionsTotal)\n  }\n\n  app.csvExportsModal.sendStatusRequest = function () {\n    $.ajax({\n      url: \"/ajax/treeversionsets/csvexportstatus/\" + app.tree_version_set_id,\n      type: 'GET',\n      dataType: 'json',\n      success: function (response) {\n        app.csvExports = response\n        app.csvExportsModal.initializeLinksList()\n      }\n    })\n  }\n\n  app.csvExportsModal.sendCreateRequest = function () {\n    var sendRequest = {\n      channelFilter: app.params.channelFilter,\n      includedBlocks: app.params.includedBlocks,\n      excludedBlocks: app.params.excludedBlocks,\n      blockKeys: app.blockKeys,\n      order: $('.csv-exports-input[name=order]').val(),\n      formatHeadings: $('.csv-exports-input[name=formatHeadings]').val(),\n      cellContents: $('.csv-exports-input[name=cellContents]').val(),\n      messageBlockPercent: $('.csv-exports-input[name=messageBlockPercent]').val(),\n      formatMCQResponses: $('.csv-exports-input[name=formatMCQResponses]').val(),\n      treeVersionIds: app.params.versions,\n      mergeOption: $('.csv-exports-input[name=mergeOption]').val(),\n      useLocalTimezone: $('.csv-exports-input[name=useLocalTimezone]').val(),\n      useExcelFormat: $('.csv-exports-input[name=useExcelFormat]').val()\n    }\n\n    if (app.params.noValidDateRange == false) {\n      sendRequest.startDate = app.startDate.format('YYYY-MM-DD')\n      sendRequest.endDate = app.endDate.format('YYYY-MM-DD')\n    }\n\n    var treeVersionSetId = app.tree_version_set_id\n\n    var then = moment(); // time of export click\n    var thenAfter5s = then.clone().add(5, 'seconds') // Re-enable time will be after 5s\n    $('.tree-csv-exports-generate-button').prop( \"disabled\", true)\n    $.post(\"/ajax/treeversionsets/csvexportstart/\" + treeVersionSetId, {data: sendRequest})\n        .done(function (response) {\n          app.csvExports = response\n          app.csvExportsModal.initializeLinksList()\n          return true\n        })\n        .fail(function (response) {\n          console.error(response)\n          app.audioChoice.setTopUpdatesBar('Error while sending CSV request...', 1)\n        })\n        .always(function (response) {\n          // Re-enable the export button\n          // Estimate the right delay in case the request has been processed in less than 5s\n          var delay = moment.duration(thenAfter5s.diff(moment()))\n          var delayInMilliseconds = delay > 0 ? delay.asMilliseconds() : 0\n          _.delay(function() {\n            $('.tree-csv-exports-generate-button').prop( \"disabled\", false)\n          }, delayInMilliseconds);\n        })\n  }\n\n  app.csvExportsModal.queueInProgress = function () {\n    var firstExportInProgress = _.find(app.csvExports, {upload_status: 0})\n\n    // If necessary, create a de-bounced version of the Ajax status check function\n    if (_.isFunction(app.csvExportsModal.sendStatusRequestDebounced) == false) {\n      app.csvExportsModal.sendStatusRequestDebounced = _.debounce(app.csvExportsModal.sendStatusRequest, 1000)\n    }\n\n    if (firstExportInProgress) {\n      _.delay(app.csvExportsModal.sendStatusRequestDebounced, 0.5 * 1000)\n    }\n  }\n\n  app.blockResultsLoader = {}\n  app.blockResultsLoader.load = function () {\n    var nextBlockKeyToLoad = $('.tree-results-block-container[data-is-loaded=0]').first().attr('id')\n\n    $('.tree-results-loading-indicators').show()\n\n    if (nextBlockKeyToLoad) {\n      app.blockResultsLoader.loadBlock(nextBlockKeyToLoad, 1)\n    } else {\n      $('.tree-results-loading-indicators').hide()\n    }\n  }\n\n  app.blockResultsLoader.assignButtons = function (parentElement) {\n    $(parentElement).find('.result-view-control-tab').on('click', function (e) {\n      var targetType = $(e.currentTarget).attr('data-tab-option')\n      $(parentElement).find('.tree-results-item-tabs').hide()\n      $(parentElement).find(\".tree-results-item-\" + targetType).show()\n    })\n    $(parentElement).find('.result-view-control-tab').first().trigger('click')\n  }\n\n  app.blockResultsLoader.loadBlock = function (blockKey, continueLoading) {\n    var url\n    if (app.shareableLink) {\n      url = window.location.pathname\n\n      // Check if there's already a query string\n      if (window.location.search) {\n        url += window.location.search + '&blockKey=' + blockKey\n      } else {\n        url += '?blockKey=' + blockKey\n      }\n    } else {\n      url = '/ajax/trees/set/' + app.tree_version_set_id + '/results/' + blockKey + window.location.search\n    }\n\n    $.ajax({\n      url: url,\n      type: 'GET',\n      dataType: 'json',\n      success: function (data) {\n        if (data.htmlOutput) {\n          // Place the HTML output into the container DIV\n          // TODO - this should actually use client-side templates, once the item results template is converted back.\n          _.each(data.htmlOutput, function (value, key) {\n            $('#' + key).attr('data-is-loaded', 1).html(value)\n\n            // Assign buttons for tab switching:\n            app.blockResultsLoader.assignButtons($('#' + key))\n          })\n\n          // Generate Chart.js-based charts:\n          app.chartJsHelper.createCharts()\n\n          if (continueLoading) {\n            // Check if there are more blocks to load!\n            app.blockResultsLoader.load()\n          }\n        }\n      }\n    })\n  }\n\n  app.blockResultsLoaderV2 = {}\n  app.blockResultsLoaderV2.loadKeyMetrics = function () {\n    var url\n\n    if (app.shareableLink) {\n      // Check if there's already a query string\n      url = window.location.search\n          ? window.location.pathname + window.location.search + \"&keymetrics=1\"\n          : window.location.pathname + '?keymetrics=1'\n    } else {\n      url = '/ajax/trees/set/' + app.tree_version_set_id + '/results/keymetrics' + window.location.search\n    }\n\n    $.post(url, {filterSet: _.get(viamo, '$store.state.publicApp.filterSet', [])})\n        .done(function (keymetrics) {\n          if (keymetrics) {\n\n            app.blockResultsLoaderV2.loadDonutChart('connected',\n                keymetrics.finishedDeliveryLogCount,\n                keymetrics.deliveryLogCount)\n            $(\"#print-connected-values\").html(keymetrics.finishedDeliveryLogCount + \" Connected of \" + keymetrics.deliveryLogCount + \" Calls\")\n\n            app.blockResultsLoaderV2.loadDonutChart('completed',\n                keymetrics.completedDeliveryLogCount,\n                keymetrics.deliveryLogCount)\n            $(\"#print-completed-values\").html(keymetrics.completedDeliveryLogCount + \" Completed of \" + keymetrics.deliveryLogCount + \" Calls\")\n\n            app.blockResultsLoaderV2.loadDonutChart('unique',\n                keymetrics.uniqueSubscriberCount,\n                keymetrics.deliveryLogCount)\n            $(\"#print-unique-value\").html(keymetrics.uniqueSubscriberCount + \" Unique Subscribers\")\n\n            app.blockResultsLoaderV2.loadDonutChart('firsttime',\n                keymetrics.firstTimeSubscriberCount,\n                keymetrics.uniqueSubscriberCount)\n            $(\"#print-firsttime-value\").html(keymetrics.firstTimeSubscriberCount + \" First Time Subscribers\")\n\n            app.blockResultsLoaderV2.loadDonutChart('answered', keymetrics.completedQuestionCount, 0)\n            $(\"#print-answered-value\").html(keymetrics.completedQuestionCount + \" Question Responses\")\n\n            if ($('#tree-results-keymetrics-durations').length > 0) {\n              app.blockResultsLoaderV2.loadAvgCallDurations(keymetrics)\n            }\n          }\n        })\n        .fail(function (response) {\n          console.error(response)\n          $(\".doughnut-charts-row\").html('<h4 class=\"text-danger text-center\">' + JSON.parse(response.responseText) + '</h4>')\n        })\n  }\n\n  app.blockResultsLoaderV2.loadDonutChart = function (keymetricName, chartNumerator, chartTotal) {\n    var chartDenominator = (chartTotal === 0) ? 0 : chartTotal - chartNumerator\n\n    var chartDataSets = {\n      labels: [\n        \"\",\n        \"\"\n      ],\n      datasets: [\n        {\n          data: [\n            chartNumerator,\n            chartDenominator\n          ],\n          backgroundColor: [\n            \"#333\",\n            \"#999\"\n          ],\n          hoverBackgroundColor: [\n            \"#333\",\n            \"#999\"\n          ],\n          borderColor: [\n            \"#333\",\n            \"#999\"\n          ],\n        }\n      ]\n    }\n\n    $('#tree-results-loading-indicator-doughnut-' + keymetricName).hide()\n\n    app.chartJsHelper.updateTreeDoughnutChart('v-chart-tree-doughnut-' + keymetricName, chartDataSets)\n\n    // Set Chart's dynamic label as visible and set its span html with the value\n    if (chartTotal >= 0) {\n      $('#tree-doughnut-total-' + keymetricName).html(formatLargeNumber(chartTotal)).parent().removeClass('hidden')\n    }\n  }\n\n  app.blockResultsLoaderV2.loadAvgCallDurations = function (durations) {\n    if (durations) {\n      // TODO what iv durationAvg or completedDurationAvg = 0 or don't exist?\n      $('#tree-results-duration-all').html((durations.durationAvg / 60).toPrecision(2) + \" minutes\")\n      $('#tree-results-duration-completed').html((durations.completedDurationAvg / 60).toPrecision(2) + ' minutes')\n      $('#tree-results-keymetrics-duration').show()\n    }\n\n    $('#tree-results-loading-indicator-durations').hide()\n    $('.tree-results-duration-item').css('visibility', 'visible')\n  }\n\n  app.blockResultsLoaderV2.loadBlocksInteractionsChart = function () {\n    var barchartLabelsTruncated = [],\n        barchartLabels = [],\n        totalInteractionsBarchartData = [],\n        completedInteractionsBarchartData = [],\n        orderedCompletedInteractionsBarchartData = [],\n        totalInteractionsOrderedBarchartData = [],\n        colorIndexes = [],\n        orderedColorIndexes = []\n    var orderedBarchartLabelsTruncated = [],\n        orderedBarchartLabels = [],\n        totalInteractionsOrderedBarchartData = []\n\n    _.each(app.resultsData, function (blockResult, key) {\n      var truncatedBlockTitle, resultIndex, colorIndex, totalInteractions, completedInteractions, colorValue\n      var blockTitle = _.get(blockResult, 'details.title') || _.get(blockResult, 'classDetails.name') || ''\n\n      truncatedBlockTitle = blockTitle.length < 9 ? blockTitle : blockTitle.substring(0, 9) + \"...\"\n      colorIndex = blockResult[\"colorIndex\"]\n      colorValue = app.chartJsHelper.getChartChoiceColorsArray(colorIndex)[0]\n      totalInteractions = blockResult[\"totalInteractions\"]\n\n      // outputKeys is either an empty array, or has one or more objects.\n      completedInteractions = blockResult[\"outputKeys\"].reduce(function (acc, val) {\n        return acc + val.outputKeyTotals\n      }, 0)\n\n      // Listing-ordered arrays\n      barchartLabels.push(blockTitle)\n      barchartLabelsTruncated.push(truncatedBlockTitle)\n      colorIndexes.push(colorValue)\n      totalInteractionsBarchartData.push(totalInteractions)\n      completedInteractionsBarchartData.push(completedInteractions)\n\n      // Popularity-ordered arrays. Callback fn applies descending order.\n      resultIndex = _.sortedIndex(orderedCompletedInteractionsBarchartData, completedInteractions, function (i) {\n        return -i\n      })\n      orderedBarchartLabels.splice(resultIndex, 0, blockTitle)\n      orderedBarchartLabelsTruncated.splice(resultIndex, 0, truncatedBlockTitle)\n      orderedColorIndexes.splice(resultIndex, 0, colorValue)\n      orderedCompletedInteractionsBarchartData.splice(resultIndex, 0, completedInteractions)\n      totalInteractionsOrderedBarchartData.splice(resultIndex, 0, totalInteractions)\n\n    })\n\n    app.chartJsHelper.updateTreeBlocksInteractionsChart('v-chart-tree-blocks-popularity', {\n      labels: orderedBarchartLabelsTruncated,\n      fullLabels: orderedBarchartLabels,\n      datasets: [\n        {\n          data: orderedCompletedInteractionsBarchartData,\n          backgroundColor: orderedColorIndexes,\n          borderColor: orderedColorIndexes,\n          borderWidth: 1,\n        },\n        {\n          hidden: true,\n          data: totalInteractionsOrderedBarchartData,\n          backgroundColor: orderedColorIndexes,\n          borderColor: orderedColorIndexes,\n          borderWidth: 1,\n        }\n      ]\n    })\n\n    app.chartJsHelper.updateTreeBlocksInteractionsChart('v-chart-tree-blocks-listing', {\n      labels: barchartLabelsTruncated,\n      fullLabels: barchartLabels,\n      datasets: [\n        {\n          data: completedInteractionsBarchartData,\n          backgroundColor: colorIndexes,\n          borderColor: colorIndexes,\n          borderWidth: 1,\n        },\n        {\n          hidden: true,\n          data: totalInteractionsBarchartData,\n          backgroundColor: colorIndexes,\n          borderColor: colorIndexes,\n          borderWidth: 1,\n        }\n      ]\n    })\n\n    app.blockResultsLoaderV2.assignButtons($('#tree-summary-container'))\n  }\n\n  app.blockResultsLoaderV2.assignButtons = function (parentElement) {\n    $(parentElement).find('.tree-interactions-barcharts-toggle-button').on('click', function (e) {\n      var $buttonClicked = $(e.currentTarget)\n      var barchartTarget = $buttonClicked.attr('data-section-option')\n\n      if ($buttonClicked.hasClass('active')) {\n        return\n      }\n\n      $buttonClicked.siblings().removeClass('active')\n      $buttonClicked.addClass('active')\n\n      // Hide and show the relevant Bar Chart\n      $(\"canvas[id^='v-chart-tree-blocks-']\").hide()\n      $(\"#v-chart-tree-blocks-\" + barchartTarget).show()\n\n      $('#order-by-active-label-print').html('Order By: ' + $buttonClicked.attr('aria-label'))\n\n      // Render any charts that haven't been rendered yet. Checks if data-generated==0 attribute.\n      app.chartJsHelper.createCharts()\n      $('#v-chart-tree-blocks-listing').removeClass('hidden')\n    })\n\n    $(parentElement).find('input[name=\"barchart-dataset-toggle\"]').on('click', function (e) {\n      var barchartDatasetTarget = $(e.currentTarget).attr('value')\n\n      // Note that the barchart-dataset-toggle Buttons are not specific to one Chart\n      var listingChart = app.chartJsHelper.chartObjects['v-chart-tree-blocks-listing']\n      var popularityChart = app.chartJsHelper.chartObjects['v-chart-tree-blocks-popularity']\n\n      var listingDatasets = listingChart.config.data.datasets\n      var popularityDatasets = popularityChart.config.data.datasets\n      var isEnteredSelected = barchartDatasetTarget == 'entered',\n          isCompletedSelected = barchartDatasetTarget == 'completed'\n\n      if (isCompletedSelected) {\n        $('#tree-summary-barchart-title').html('Completed Interactions per Block')\n      } else {\n        $('#tree-summary-barchart-title').html('Entered Interactions per Block')\n      }\n\n      listingDatasets[0].hidden = isEnteredSelected\n      listingDatasets[1].hidden = isCompletedSelected\n      popularityDatasets[0].hidden = isEnteredSelected\n      popularityDatasets[1].hidden = isCompletedSelected\n\n      listingChart.update()\n      popularityChart.update()\n    })\n    $(parentElement).find('.result-view-section-button').on('click', function (e) {\n      var tabTarget = $(e.currentTarget).attr('data-section-option')\n      var tabLabel = $(e.currentTarget).text()\n\n      $(e.currentTarget).closest(\".result-view-section-control-container\").find(\".sub-report-type-title\").html(tabLabel == \"╳\"\n          ? \"Timeline: Total Interactions\"\n          : \"Timeline: \" + tabLabel)\n\n      if ($(e.currentTarget).hasClass('active')) {\n        console.log(\"Already on the \" + tabLabel + \" section\")\n        return\n      }\n      $(e.currentTarget).siblings().removeClass('active')\n      $(e.currentTarget).addClass('active')\n\n      // Hide and show the relevant section\n      $(parentElement).find('.tree-results-item-tab-section').hide()\n      $(parentElement).find('.tree-results-item-tab-section[data-section-id=' + tabTarget + ']').show()\n\n      // Render any charts that haven't been rendered yet\n      app.chartJsHelper.createCharts()\n    })\n\n    $(parentElement).find('.result-normalize-cb').on('click', function (e) {\n\n      var chartTarget = $(e.currentTarget).attr('data-chart-type')\n      var doNormalize = 0\n      var targetElement\n\n      if ($(e.currentTarget).is(':checked')) {\n        doNormalize = 1\n      }\n\n      // Hide and show the relevant section\n      targetElement = $(parentElement).find('canvas[data-chart-type=' + chartTarget + ']')\n\n      // Set normalize to the new value, and set is-generated to 0, to queue up a re-rendering of the chart:\n      $(targetElement).attr('data-normalize', doNormalize).attr('data-generated', 0)\n\n      // Render any charts that haven't been rendered yet\n      app.chartJsHelper.createCharts()\n    })\n  }\n\n\tapp.combinedVersions = {};\n\tapp.combinedVersions.assignButtons = function() {\n\n\t\t$('.tree-results-versions-select-button').on('click', function(e) {\n\n\t\t\t// Make sure the element lines up underneath the \"Versions\" button\n\t\t\t// This is a bit awkward, since we're right aligned and not in\n\t\t\t// a position:absolute setting, so we'll actually add in the\n\t\t\t// width of the (variable) daterangepicker to a fixed value:\n\t\t\tvar rightPosition = _.parseInt($('#reportrange').width() + $('.tree-results-gear-menu').width() - $('.tree-results-versions-select-button').width() / 2) - 4;\n\t\t\t$('.tree-results-versions-selector').css({right: rightPosition});\n\n\t\t\t$('.tree-results-versions-selector').toggle();\n\n\t\t\t// Prevent clicks on the body element that would re-hide it.\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\t$('.tree-results-versions-selector').on('click', function(e) {\n\t\t\t// Prevent clicks on the body element that would re-hide it.\n\t\t\t// This also protects clicks on the other elements within the dropdown.\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\t$('.tree-results-versions-select-all-link').on('click', function(e) {\n\t\t\t// $('.tree-results-versions-selector').toggle();\n\t\t\t$('.tree-results-versions-selector input[type=checkbox]').prop('checked', true).trigger('change');\n\t\t});\n\t\t$('.tree-results-versions-select-none-link').on('click', function(e) {\n\t\t\t// $('.tree-results-versions-selector').toggle();\n\t\t\t$('.tree-results-versions-selector input[type=checkbox]').prop('checked', false).trigger('change');\n\t\t});\n\n\t\t$('.tree-results-versions-selector input[type=checkbox]').on('change', function(e) {\n\t\t\t$('.tree-results-versions-apply-button').prop('disabled', false);\n\t\t});\n\n\t\t$('.tree-results-versions-apply-button').on('click', function(e) {\n\n\t\t\t// Delete any existing version entries in the filter form, before adding the selected ones:\n\t\t\t$('#filter-form input[name^=versions]').remove();\n\n\t\t\t// With thanks to\n\t\t\t// http://stackoverflow.com/questions/2530635/jquery-add-additional-parameters-on-submit-not-ajax#comment22923873_2531379\n\t\t\t$('.tree-results-versions-selector input[type=checkbox]:checked').each(function() {\n\t\t\t\t// return $(this).val()\n\t\t\t\tvar input = $('<input>', {\n\t\t\t\t\ttype: 'hidden',\n\t\t\t\t\tname: 'versions[]',\n\t\t\t\t\tvalue: $(this).val()\n\t\t\t\t});\n\t\t\t\t$('#filter-form').append($(input));\n\t\t\t});\n\n\t\t\t$('#filter-form').submit();\n\n\t\t});\n\n\t\t// If the selector is open, hide it by clicking on the open space,\n\t\t// just like for dropdown menus.\n\t\t$('body').on('click', function(e) {\n\t\t\t$('.tree-results-versions-selector').hide();\n\t\t});\n\n    $('.tree-results-versions-selector').hide();\n\t};\n\n \tapp.combinedVersions = _.assign({}, app.combinedVersions, window.combinedVersions);\n\n})(window.jQuery);\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"form-group\"},[_c('label',[_vm._v(_vm._s(_vm.label))]),(_vm.isEditable)?_c('textarea',{staticClass:\"form-control\",attrs:{\"placeholder\":_vm.placeholder},domProps:{\"value\":_vm.value},on:{\"keydown\":function($event){return _vm.$emit('keydown', $event)},\"input\":function($event){return _vm.$emit('input', $event.target.value)}}}):_c('p',[_vm._v(\" \"+_vm._s(_vm.value)+\" \")]),_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"form-group\">\n    <label>{{label}}</label>\n    <textarea v-if=\"isEditable\"\n        class=\"form-control\"\n        :placeholder=\"placeholder\"\n        :value=\"value\"\n        @keydown=\"$emit('keydown', $event)\"\n        @input=\"$emit('input', $event.target.value)\"/>\n\n    <p v-else>\n      {{value}}\n    </p>\n    <slot/>\n  </div>\n</template>\n\n<script>\n  export default {\n    props: {\n      isEditable: {\n        default: true,\n        type: Boolean,\n      },\n      label: {\n        type: [String, Number],\n        required: true,\n      },\n      placeholder: {\n        type: String,\n        required: true,\n      },\n      value: {\n        type: String,\n        required: true,\n      },\n    },\n  }\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TextEditor.vue?vue&type=template&id=4ab294e6&\"\nimport script from \"./TextEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./TextEditor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import {get, isEmpty} from 'lodash'\nimport {mapState} from 'vuex'\n\nconst PATH_PARAM_DISCOVERER = /(\\/){(.*?)(\\?)?}/g\n\n// todo: we'll want route() to also be importable/accessible anywhere!\nexport default {\n  computed: {\n    ...mapState({\n      routes: s => s.trees.ui.routes,\n    }),\n  },\n\n  methods: {\n    route(routeKey, context) {\n      return routeFrom(routeKey, context, this.routes)\n    }\n  }\n}\n\nexport function routeFrom(routeKey, context, routes) {\n  return interpolateRouteWith(context, get(routes, routeKey))\n}\n\nconst raiseFor = p => {throw new Error(`InvalidContextError - Missing param: ${p}`)}\n\nexport function interpolateRouteWith(context, route) {\n  if (!route) {\n    return null\n  }\n\n  context = context || {}\n\n  const {id, path, params, methods} = route\n  const isPathComplete = isEmpty(params)\n\n  if (isPathComplete) {\n    return path\n  }\n\n  return path.replace(PATH_PARAM_DISCOVERER, (m, prefix='', captured, isOptional) => {\n    const param = captured.trim()\n    const absent = !(param in context)\n\n    if (absent && !isOptional) {\n      raiseFor(param)\n    }\n\n    if (absent && isOptional) {\n      return ''\n    }\n\n    return `${prefix}${context[param]}`\n  })\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"interaction-designer-contents\"},[_c('tree-builder-toolbar'),_c('div',{staticClass:\"tree-sidebar-container\"},[(_vm.activeBlock)?_c('div',{staticClass:\"tree-sidebar\",class:[(\"category-\" + (_vm.blockClasses[_vm.activeBlock.type].category))]},[_c('div',{staticClass:\"tree-sidebar-edit-block\",attrs:{\"data-block-type\":_vm.activeBlock && _vm.activeBlock.type,\"data-for-block-id\":_vm.activeBlock && _vm.activeBlock.uuid}},[(_vm.activeBlock)?_c((\"Flow\" + (_vm.activeBlock.type.replace(/\\\\/g, ''))),{tag:\"div\",attrs:{\"block\":_vm.activeBlock,\"flow\":_vm.activeFlow}}):_vm._e()],1)]):_c('div',{staticClass:\"tree-sidebar\"},[_c('div',{staticClass:\"tree-sidebar-edit-block\"},[_c('flow-editor',{attrs:{\"flow\":_vm.activeFlow}})],1)])]),_c('div',{staticClass:\"tree-contents\",attrs:{\"x-style\":{'min-height': (_vm.designerWorkspaceHeight + \"px\")}}},[_c('builder-canvas',{nativeOn:{\"click\":function($event){return _vm.handleCanvasSelected($event)}}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InteractionDesigner.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InteractionDesigner.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./InteractionDesigner.vue?vue&type=template&id=8e85b462&\"\nimport script from \"./InteractionDesigner.vue?vue&type=script&lang=js&\"\nexport * from \"./InteractionDesigner.vue?vue&type=script&lang=js&\"\nimport style0 from \"bootstrap/dist/css/bootstrap.css?vue&type=style&index=0&lang=css&\"\nimport style1 from \"bootstrap/dist/css/bootstrap-theme.css?vue&type=style&index=1&lang=css&\"\nimport style2 from \"./InteractionDesigner.vue?vue&type=style&index=2&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tree-builder-toolbar\"},[(_vm.isImporterVisible)?_c('div',{staticClass:\"flows-importer alert alert-info\"},[_c('h3',[_vm._v(_vm._s(_vm.trans('flow-builder.flow-importer')))]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.flow),expression:\"flow\"}],staticClass:\"flow-importer\",attrs:{\"rows\":\"15\"},domProps:{\"value\":(_vm.flow)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.flow=$event.target.value}}})]):_vm._e(),_c('div',{staticClass:\"tree-workspace-panel-heading panel-heading\"},[_c('div',{staticClass:\"tree-workspace-panel-heading-contents\"},[_c('div',{staticClass:\"btn-toolbar\"},[_c('button',{staticClass:\"btn btn-default\",class:{active: _vm.isImporterVisible},on:{\"click\":_vm.toggleImportExport}},[_c('i',{staticClass:\"glyphicon glyphicon-chevron-up\"}),_vm._v(\" \"+_vm._s(_vm.trans('flow-builder.import-export'))+\" \")]),(_vm.isResourceEditorEnabled)?_c('div',{staticClass:\"btn-group\"},[_c('router-link',{staticClass:\"btn btn-default active\",attrs:{\"to\":_vm.treeViewUrl}},[_vm._v(\" \"+_vm._s(_vm.trans('flow-builder.flow-view'))+\" \")]),_c('router-link',{staticClass:\"btn btn-default\",attrs:{\"to\":_vm.resourceViewUrl},nativeOn:{\"click\":function($event){return _vm.handleResourceViewerSelected($event)}}},[_vm._v(\" \"+_vm._s(_vm.trans('flow-builder.resource-view'))+\" \")])],1):_vm._e(),(_vm.ui.isEditableLocked)?[(_vm.isFeatureViewResultsEnabled)?_c('a',{staticClass:\"btn btn-default\",attrs:{\"href\":_vm.viewResultsUrl,\"title\":_vm.trans('flow-builder.view-results')}},[_c('span',{staticClass:\"glyphicon glyphicon-signal\"})]):_vm._e()]:_c('a',{staticClass:\"btn btn-default\",class:{active: _vm.ui.isEditable},attrs:{\"href\":_vm.editOrViewTreeJsUrl,\"title\":_vm.trans('flow-builder.click-to-toggle-editing')},on:{\"click\":_vm.attemptSaveTree}},[_vm._v(\" \"+_vm._s(_vm.trans('flow-builder.edit-flow'))+\" \")]),(!_vm.ui.isEditable && _vm.isFeatureTreeDuplicateEnabled)?_c('a',{staticClass:\"btn btn-default\",attrs:{\"href\":_vm.duplicateTreeLink,\"title\":_vm.trans('flow-builder.duplicate-entire-flow')}},[_c('span',{staticClass:\"glyphicon glyphicon-tags\"})]):_vm._e(),(_vm.ui.isEditable)?_c('div',{staticClass:\"btn-group\"},[_c('button',{staticClass:\"btn btn-default dropdown-toggle\",attrs:{\"type\":\"button\",\"data-toggle\":\"dropdown\"}},[_vm._v(\" \"+_vm._s(_vm.trans('flow-builder.add-block'))+\" \"),_c('span',{staticClass:\"caret\"})]),_c('ul',{staticClass:\"dropdown-menu\",attrs:{\"role\":\"menu\"}},[_vm._l((_vm.rootBlockClassesToDisplay),function(classDetails,className){return [(_vm.shouldDisplayDividerBefore(_vm.rootBlockClassesToDisplay, className))?_c('li',{key:className + 'divider',staticClass:\"divider\"}):_vm._e(),_c('li',{key:className + 'item'},[(_vm.isBlockAvailableByBlockClass[className])?_c('a',{staticClass:\"tree-add-block\",attrs:{\"href\":\"#\",\"data-block-type\":className,\"data-default-num-connections\":classDetails['defaultConnections']},on:{\"click\":function($event){$event.preventDefault();return _vm.handleAddBlockByTypeSelected(classDetails)}}},[_vm._v(\" \"+_vm._s(_vm.translateTreeClassName(className))+\" \")]):_vm._e()])]}),(!_vm.isEmpty(_vm.rootDropdownClassesToDisplay))?[_c('li',{staticClass:\"divider\"}),_c('li',{staticClass:\"menu-item dropdown dropdown-submenu\"},[_c('a',{staticClass:\"dropdown-toggle\",attrs:{\"href\":\"#\",\"data-toggle\":\"dropdown\"}},[_vm._v(\" \"+_vm._s(_vm.trans('flow-builder.branching'))+\" \")]),_c('ul',{staticClass:\"dropdown-menu\"},[_vm._l((_vm.rootDropdownClassesToDisplay),function(classDetails,className){return [(_vm.shouldDisplayDividerBefore(_vm.rootDropdownClassesToDisplay, className))?_c('li',{key:className + 'divider',staticClass:\"divider\"}):_vm._e(),_c('li',{key:className + 'item'},[(_vm.isBlockAvailableByBlockClass[className])?_c('a',{staticClass:\"tree-add-block\",attrs:{\"href\":\"#\",\"data-block-type\":className,\"data-default-num-connections\":classDetails['defaultConnections']}},[_vm._v(\" \"+_vm._s(_vm.translateTreeClassName(className))+\" \")]):_vm._e()])]})],2)])]:_vm._e(),(!_vm.isEmpty(_vm.advancedDropdownClassesToDisplay))?[_c('li',{staticClass:\"divider\"}),_c('li',{staticClass:\"menu-item dropdown dropdown-submenu\"},[_c('a',{staticClass:\"dropdown-toggle\",attrs:{\"href\":\"#\",\"data-toggle\":\"dropdown\"}},[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.advanced'))+\" \")]),_c('ul',{staticClass:\"dropdown-menu\"},[_vm._l((_vm.advancedDropdownClassesToDisplay),function(classDetails,className){return [(_vm.shouldDisplayDividerBefore(_vm.advancedDropdownClassesToDisplay, className))?_c('li',{key:className + 'divider',staticClass:\"divider\"}):_vm._e(),_c('li',{key:className + 'item'},[(_vm.isBlockAvailableByBlockClass[className])?_c('a',{staticClass:\"tree-add-block\",attrs:{\"href\":\"#\",\"data-block-type\":className,\"data-default-num-connections\":classDetails['defaultConnections']}},[_vm._v(\" \"+_vm._s(_vm.translateTreeClassName(className))+\" \")]):_vm._e()])]})],2)])]:_vm._e()],2)]):_vm._e(),(_vm.ui.isEditable)?_c('button',{staticClass:\"btn btn-default tree-delete-block\",attrs:{\"type\":\"button\",\"disabled\":!_vm.activeBlockId},on:{\"click\":function($event){$event.preventDefault();return _vm.handleRemoveActivatedBlockTriggered($event)}}},[_vm._v(\" \"+_vm._s(_vm.trans('flow-builder.delete'))+\" \")]):_vm._e(),_c('div',{staticClass:\"btn-group pull-right\"},[(_vm.ui.isEditable && _vm.isFeatureTreeSaveEnabled)?_c('button',{staticClass:\"btn btn-primary tree-save-tree\",attrs:{\"type\":\"button\",\"title\":_vm.trans('flow-builder.save-changes-to-the-flow'),\"disabled\":_vm.isTreeSaving || !_vm.hasChanges},on:{\"click\":_vm.attemptSaveTree}},[_vm._v(\" \"+_vm._s(_vm.saveButtonText)+\" \")]):_vm._e(),(_vm.isFeatureTreeSendEnabled)?[(_vm.can('edit-content'))?_c('a',{staticClass:\"btn btn-success\",attrs:{\"href\":_vm.publishVersionUrl,\"disabled\":_vm.isTreeSaving || !_vm.isTreeValid,\"title\":_vm._f(\"trans\")(_vm.isTreeValid ? 'flow-builder.publish-this-version-of-the-flow' : 'flow-builder.fix-validation-errors-before-publishing')}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.publish'))+\" \")]):_vm._e(),(_vm.can('send-outgoing-call'))?_c('a',{staticClass:\"btn btn-success tree-send-tree-call\",attrs:{\"href\":_vm.sendOutgoingCallUrl,\"disabled\":_vm.isTreeSaving || !_vm.isTreeValid,\"title\":_vm.trans('flow-builder.schedule-and-send-an-outgoing-call')}},[_vm._v(\" \"+_vm._s(_vm.trans('flow-builder.send'))+\" \")]):_vm._e()]:_vm._e()],2)],2)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import {mapState} from 'vuex'\nimport lodash from 'lodash'\n\n\nexport function can(userPermissions, permissionOrPermissions, requireAll = false) {\n  if (lodash.isArray(permissionOrPermissions)) {\n    if (requireAll) {\n      return lodash.every(permissionOrPermissions, requestedPermission => userPermissions[requestedPermission])\n    } else {\n      return lodash.find(permissionOrPermissions, requestedPermission => userPermissions[requestedPermission])\n    }\n  } else {\n    return userPermissions[permissionOrPermissions]\n  }\n}\n\nexport default {\n  computed: {\n    ...mapState(['permissions'])\n  },\n\n  methods: {\n    /**\n     * @note This method can not be relied on for any real security measures, but solely provides the\n     * ability to hide and curb navigation to prohibited parts of the app. Authorization still needs to be handled\n     * on all endpoints and actions where necessitated. <3\n     *\n     * Implementation ported from:\n     *  https://github.com/Zizaco/entrust/blob/master/src/Entrust/Traits/EntrustUserTrait.php#L144\n     *\n     * @param permission\n     * @param requireAll\n     * @returns {boolean}  */\n    can(permission, requireAll = false) {\n      return can(this.permissions, permission, requireAll)\n    },\n  },\n}\n","// TODO:\n//  move this file into @floip to replace the convertKeysToCamelCase under '@floip/flow-runner/src/flow-spec/DataObjectPopertyNameCamelCaseConverter'\n//  and update convertKeysToCamelCase usage in @floip (tests, etc) to convertKeysCase\nimport {camelCase, snakeCase, includes, isArray, isObject, reduce} from 'lodash'\n\nexport const EXCLUDED_DATA_HIERARCHIES_BY_KEY = ['choices', 'platformMetadata', 'platform_metadata']\n\nexport default function convertKeysCase(x: any, caseType: string = 'CAMEL', exclusions = EXCLUDED_DATA_HIERARCHIES_BY_KEY): any {\n  if (isArray(x)) {\n    return x.map(_ => convertKeysCase(_, caseType, exclusions))\n  }\n\n  if (!isObject(x)) {\n    return x\n  }\n\n  return reduce(x, (memo: any, value: any, key: string) => {\n    let currentKey = caseType === 'CAMEL' ? camelCase(key) : snakeCase(key)\n    memo[includes(exclusions, key) ? key : currentKey] =\n        convertKeysCase(value, caseType, exclusions)\n\n    return memo\n  }, {})\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport lang from '@/lib/filters/lang'\nimport Permissions from '@/lib/mixins/Permissions'\nimport Routes from '@/lib/mixins/Routes'\nimport {mapActions, mapGetters, mapMutations, mapState} from 'vuex'\nimport lodash, {isEmpty} from 'lodash'\nimport flow from 'lodash/fp/flow'\nimport pickBy from 'lodash/fp/pickBy'\n// import {affix as Affix} from 'vue-strap'\n// import TreeUpdateConflictModal from '../TreeUpdateConflictModal'\n// import InteractionTotalsDateRangeConfiguration from './InteractionTotalsDateRangeConfiguration'\nimport convertKeysCase from '@/store/flow/utils/DataObjectPropertyNameCaseConverter'\n\nexport default {\n  components: {\n    // Affix,\n    // TreeUpdateConflictModal,\n    // InteractionTotalsDateRangeConfiguration\n  },\n  mixins: [\n    lang,\n    Permissions,\n    Routes,\n  ],\n  data() {\n    return {\n      isImporterVisible: false,\n    }\n  },\n  computed: {\n    ...mapState({\n      tree: ({trees: {tree}}) => tree,\n      ui: ({trees: {ui}}) => ui,\n    }),\n\n    ...mapGetters('flow', ['activeFlow']),\n    ...mapState('flow', ['flows', 'resources']),\n    ...mapState('builder', ['activeBlockId']),\n\n    ...mapGetters([\n      'isEditable',\n      'isTreeSaving',\n      'isBlockAvailableByBlockClass',\n      'hasChanges',\n      'isTreeValid',\n      'selectedBlock',\n      'isFeatureTreeSaveEnabled',\n      'isFeatureTreeSendEnabled',\n      'isFeatureTreeDuplicateEnabled',\n      'isFeatureViewResultsEnabled',\n      'isFeatureUpdateInteractionTotalsEnabled',\n    ]),\n\n    flow: {\n      get() {\n        const {flows, resources} = this\n          return JSON.stringify(\n              convertKeysCase({flows, resources},\n              'SNAKE',\n              ['platformMetadata', 'ioViamo']),\n              null,\n              2)\n      },\n\n      set(value) {\n          this.importFlowsAndResources(convertKeysCase(\n              JSON.parse(value),\n              'CAMEL',\n              ['platform_metadata', 'io_viamo']\n          ))\n      }\n    },\n\n    isResourceEditorEnabled() {\n      return false\n    },\n\n    jsKey() { // deprecate\n      return lodash.get(this.selectedBlock, 'jsKey')\n    },\n    editTreeUrl() {\n      return this.editTreeRoute()\n    },\n    treeViewUrl() {\n      return this.editTreeRoute({\n        component: 'interaction-designer',\n      })\n    },\n    resourceViewUrl() {\n      return this.editTreeRoute({\n        component: 'resource-viewer',\n      })\n    },\n    viewResultsUrl() {\n      return this.isFeatureViewResultsEnabled ? this.editTreeRoute({component: 'results'}) : ''\n    },\n    viewResultsSetUrl() {\n      return this.isFeatureViewResultsEnabled\n          ? this.route('trees.viewTreeSetResults', {treeSetId: this.tree.treeSetId})\n          : ''\n    },\n    downloadAudioUrl() {\n      return this.editTreeRoute({\n        component: 'downloadaudio',\n      })\n    },\n    sendOutgoingCallUrl() {\n      return this.isTreeValid ? `/outgoing/new?tree=${this.tree.id}` : ''\n    },\n    publishVersionUrl() {\n      return this.isTreeValid ? `/trees/${this.tree.id}/publishversion` : ''\n    },\n    editOrViewTreeJsUrl() {\n      if (this.ui.isEditable) {\n        return this.editTreeRoute({\n          component: 'interaction-designer',\n          mode: 'view',\n        })\n      } else {\n        return this.editTreeRoute({\n          component: 'interaction-designer',\n          mode: 'edit',\n        })\n      }\n    },\n    duplicateTreeLink() {\n      return this.isFeatureTreeDuplicateEnabled\n          ? this.route('trees.duplicateTreeAndContinue', {treeId: this.tree.id})\n          : ''\n    },\n\n    saveButtonText() {\n      if (this.hasChanges) {\n        return this.trans('flow-builder.save')\n      } else {\n        return this.trans('flow-builder.saved')\n      }\n    },\n\n    rootBlockClassesToDisplay() {\n      return flow(\n          pickBy(classDetails => !this.hasClassDetail(classDetails, 'hiddenInMenu')),\n          pickBy(classDetails => !this.hasClassDetail(classDetails, 'advancedMenu')),\n          pickBy(classDetails => !this.hasClassDetail(classDetails, 'branchingMenu')),\n      )(this.ui.blockClasses)\n    },\n\n    rootDropdownClassesToDisplay() {\n      return flow(\n          pickBy(classDetails => !this.hasClassDetail(classDetails, 'hiddenInMenu')),\n          pickBy(classDetails => this.hasClassDetail(classDetails, 'branchingMenu')),\n      )(this.ui.blockClasses)\n    },\n\n    advancedDropdownClassesToDisplay() {\n      return flow(\n          pickBy(classDetails => !this.hasClassDetail(classDetails, 'hiddenInMenu')),\n          pickBy(classDetails => this.hasClassDetail(classDetails, 'advancedMenu')),\n      )(this.ui.blockClasses)\n    },\n    canViewResultsTotals() {\n      return (this.can('view-result-totals') && this.isFeatureViewResultsEnabled)\n    },\n  },\n  methods: {\n    isEmpty,\n\n    ...mapActions(['attemptSaveTree']),\n    ...mapMutations('flow', ['flow_removeBlock']),\n    ...mapActions('flow', ['flow_addBlankBlockByType']),\n    ...mapActions('builder', ['importFlowsAndResources']),\n\n    handleAddBlockByTypeSelected({type}) {\n      const {uuid: blockId} = this.flow_addBlankBlockByType({type, platform_metadata: {\n          io_viamo: {\n            uiData: {xPosition: 150, yPosition: 255}, // todo: selected block + (80,80)\n          }}}) // todo push out to intx-designer\n      // activateBlock({blockId})\n    },\n\n    handleRemoveActivatedBlockTriggered() {\n      const {activeBlockId: blockId} = this\n      this.flow_removeBlock({blockId})\n    },\n\n    toggleImportExport() {\n      this.isImporterVisible = !this.isImporterVisible\n    },\n\n    editTreeRoute({component = null, mode = null} = {}) {\n      const context = this.removeNilValues({\n        treeId: this.tree.id,\n        component,\n        mode,\n      })\n      return this.route('trees.editTree', context)\n    },\n    hasClassDetail(classDetails, attribute) {\n      return !lodash.isNil(classDetails[attribute]) && classDetails[attribute]\n    },\n    translateTreeClassName(className) {\n      return this.trans(`flow-builder.${className}`)\n    },\n    shouldDisplayDividerBefore(blockClasses, className) {\n      const shouldShowDividerBeforeBlock = lodash.pickBy(\n          blockClasses,\n          classDetails => this.hasClassDetail(classDetails, 'dividerBefore'),\n      )[className]\n      return shouldShowDividerBeforeBlock && this.isBlockAvailableByBlockClass[className]\n    },\n    handleResourceViewerSelected() {\n      this.$el.scrollIntoView(true)\n    },\n\n    // This could be extracted to a helper mixin of some sort so it can be used in other places\n    removeNilValues(obj) {\n      return lodash.pickBy(obj, lodash.identity)\n    },\n  },\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TreeBuilderToolbar.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TreeBuilderToolbar.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TreeBuilderToolbar.vue?vue&type=template&id=28699d40&\"\nimport script from \"./TreeBuilderToolbar.vue?vue&type=script&lang=ts&\"\nexport * from \"./TreeBuilderToolbar.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./TreeBuilderToolbar.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}