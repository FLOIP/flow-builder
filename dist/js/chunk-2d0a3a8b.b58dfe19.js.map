{"version":3,"sources":["webpack:///./src/components/interaction-designer/block-types/Core_SetGroupMembershipBlock.vue?545d","webpack:///./src/components/interaction-designer/block-editors/GroupSelector.vue?858d","webpack:///./src/components/interaction-designer/block-editors/GroupSelector.vue?6cb0","webpack:///./src/components/interaction-designer/block-editors/GroupSelector.vue?5a8a","webpack:///./src/components/interaction-designer/block-editors/GroupSelector.vue","webpack:///./src/store/flow/block-types/Core_SetGroupMembershipStore.ts","webpack:///./src/components/interaction-designer/block-types/Core_SetGroupMembershipBlock.vue?459c","webpack:///./src/components/interaction-designer/block-types/Core_SetGroupMembershipBlock.vue?ac45","webpack:///./src/components/interaction-designer/block-types/Core_SetGroupMembershipBlock.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","_f","block_type","trans","block","attrs","isEditable","actionsList","model","value","callback","$$v","selectedAction","expression","_t","flow","uuid","staticRenderFns","groups","selectedGroup","flowVuexNamespace","group_key","config","groupOption","id","block_updateConfigByPath","blockId","path","name","Mutation","components","VueMultiselect","component","ADD_KEY","REMOVE_KEY","BLOCK_TYPE","getters","mutations","actions","createWith","dispatch","props","IdGeneratorUuidV4","generate","tag","label","root","exits","type","semantic_label","group_name","is_member","setIsMember","action","commit","rootGetters","activeBlock","isMember","isMemberBoolean","toString","namespaced","blockVuexNamespace","builderVuexNamespace","Action","Getter","BlockNameEditor","BlockLabelEditor","BlockSemanticLabelEditor","FirstBlockEditorButton","BlockId","GroupSelector","install"],"mappings":"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","file":"js/chunk-2d0a3a8b.b58dfe19.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"core-set-group-membership-block\"},[_c('h3',{staticClass:\"no-room-above\"},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.edit-block-type',{ block_type: _vm.trans((\"flow-builder.\" + (_vm.block.type))) }))+\" \")]),_c('fieldset',{attrs:{\"disabled\":!_vm.isEditable}},[_c('block-name-editor',{attrs:{\"block\":_vm.block}}),_c('block-label-editor',{attrs:{\"block\":_vm.block}}),_c('block-semantic-label-editor',{attrs:{\"block\":_vm.block}}),_c('div',{staticClass:\"form-group\"},[_c('label',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.action-label')))]),_c('vue-multiselect',{attrs:{\"track-by\":\"id\",\"label\":\"name\",\"placeholder\":_vm._f(\"trans\")('flow-builder.action-placeholder'),\"options\":_vm.actionsList,\"allow-empty\":true,\"show-labels\":false,\"searchable\":false},model:{value:(_vm.selectedAction),callback:function ($$v) {_vm.selectedAction=$$v},expression:\"selectedAction\"}})],1),_c('group-selector',{attrs:{\"block\":_vm.block}}),_vm._t(\"extras\"),_c('first-block-editor-button',{attrs:{\"flow\":_vm.flow,\"block-id\":_vm.block.uuid}})],2),_c('block-id',{attrs:{\"block\":_vm.block}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"block-group form-group\"},[_c('label',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.group-label')))]),_c('vue-multiselect',{attrs:{\"track-by\":\"id\",\"label\":\"name\",\"placeholder\":_vm._f(\"trans\")('flow-builder.group-selector-placeholder'),\"options\":_vm.groups,\"allow-empty\":false,\"show-labels\":false,\"searchable\":true},model:{value:(_vm.selectedGroup),callback:function ($$v) {_vm.selectedGroup=$$v},expression:\"selectedGroup\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport VueMultiselect from 'vue-multiselect'\nimport { IBlock, ISetGroupMembershipBlockConfig } from '@floip/flow-runner'\nimport { Component, Prop } from 'vue-property-decorator'\nimport { namespace, Getter } from 'vuex-class'\nimport Lang from '@/lib/filters/lang'\nimport { find } from 'lodash'\nimport { mixins } from \"vue-class-component\";\n\nconst flowVuexNamespace = namespace('flow')\n\ninterface IGroupOption {\n  id: string;\n  name: string;\n}\n\n@Component<any>({\n  components: {\n    VueMultiselect,\n  },\n})\nclass GroupSelector extends mixins(Lang) {\n  @Prop() readonly block!: IBlock\n\n  get selectedGroup() {\n    const { group_key } = this.block.config as ISetGroupMembershipBlockConfig\n    if (!group_key) {\n      return {} as IGroupOption\n    }\n\n    const groupOption = find(this.groups, { id: group_key }) as IGroupOption\n    if (!groupOption) {\n      return {} as IGroupOption\n    }\n\n    return groupOption\n  }\n\n  set selectedGroup(value: IGroupOption) {\n    this.block_updateConfigByPath({\n      blockId: this.block.uuid,\n      path: 'group_key',\n      value: value.id,\n    })\n    this.block_updateConfigByPath({\n      blockId: this.block.uuid,\n      path: 'group_name',\n      value: value.name,\n    })\n  }\n\n  @flowVuexNamespace.Mutation block_updateConfigByPath!: ({ blockId, path, value }: { blockId: string, path: string, value: object | string }) => void\n  @Getter groups!: object[]\n}\n\nexport default GroupSelector\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GroupSelector.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GroupSelector.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./GroupSelector.vue?vue&type=template&id=0c80b44c&\"\nimport script from \"./GroupSelector.vue?vue&type=script&lang=ts&\"\nexport * from \"./GroupSelector.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { ActionTree, GetterTree, MutationTree } from 'vuex'\nimport { IRootState } from '@/store'\nimport {\n  IBlockExit,\n  ISetGroupMembershipBlockConfig,\n} from '@floip/flow-runner'\nimport { IdGeneratorUuidV4 } from '@floip/flow-runner/dist/domain/IdGeneratorUuidV4'\nimport { defaultsDeep } from 'lodash'\nimport { IFlowsState } from '../index'\n\nexport const ADD_KEY = 'add'\nexport const REMOVE_KEY = 'remove'\n\nexport const BLOCK_TYPE = 'Core.SetGroupMembership'\n\nexport const getters: GetterTree<IFlowsState, IRootState> = {}\n\nexport const mutations: MutationTree<IFlowsState> = {}\n\nexport const actions: ActionTree<IFlowsState, IRootState> = {\n  async createWith({ dispatch }, { props }: { props: { uuid: string } & Partial<ISetGroupMembershipBlockConfig> }) {\n    const exits: IBlockExit[] = [\n      await dispatch('flow/block_createBlockDefaultExitWith', {\n        props: ({\n          uuid: await (new IdGeneratorUuidV4()).generate(),\n          tag: 'Default',\n          label: 'Default',\n        }) as IBlockExit,\n      }, { root: true }),\n    ]\n\n    return defaultsDeep(props, {\n      type: BLOCK_TYPE,\n      name: '',\n      label: '',\n      semantic_label: '',\n      config: {\n        group_key: '',\n        group_name: '',\n        is_member: null,\n      },\n      exits,\n    })\n  },\n\n  async setIsMember({ commit, rootGetters }, action) {\n    const activeBlock = rootGetters['builder/activeBlock']\n    let isMember = ''\n    if(action) {\n      const isMemberBoolean = action.id === ADD_KEY\n      isMember = isMemberBoolean.toString() // is_member is an expression, that's why it's a string\n    }\n\n    commit('flow/block_updateConfigByPath', {\n      blockId: activeBlock.uuid,\n      path: 'is_member',\n      value: isMember,\n    }, { root: true })\n  },\n}\n\nexport default {\n  namespaced: true,\n  getters,\n  mutations,\n  actions,\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { namespace } from 'vuex-class'\nimport { Component, Prop } from 'vue-property-decorator'\n\nimport {\n  IFlow,\n  IBlock,\n  ISetGroupMembershipBlockConfig,\n} from '@floip/flow-runner'\nimport BlockNameEditor from '../block-editors/NameEditor.vue'\nimport BlockLabelEditor from '../block-editors/LabelEditor.vue'\nimport BlockSemanticLabelEditor from '../block-editors/SemanticLabelEditor.vue'\nimport FirstBlockEditorButton from '../flow-editors/FirstBlockEditorButton.vue'\nimport BlockId from '../block-editors/BlockId.vue'\nimport GroupSelector from '@/components/interaction-designer/block-editors/GroupSelector.vue'\nimport VueMultiselect from 'vue-multiselect'\n\nimport SetGroupMembershipStore, { BLOCK_TYPE, ADD_KEY, REMOVE_KEY } from '@/store/flow/block-types/Core_SetGroupMembershipStore'\nimport Lang from '@/lib/filters/lang'\nimport { createDefaultBlockTypeInstallerFor } from '@/store/builder'\nimport { find } from 'lodash'\nimport { mixins } from \"vue-class-component\";\n\nconst blockVuexNamespace = namespace(`flow/${BLOCK_TYPE}`)\nconst flowVuexNamespace = namespace('flow')\nconst builderVuexNamespace = namespace('builder')\n\ninterface IGroupActionOption {\n  id: string;\n  name: string;\n}\n\n@Component({\n  components: {\n    BlockNameEditor,\n    BlockLabelEditor,\n    BlockSemanticLabelEditor,\n    FirstBlockEditorButton,\n    BlockId,\n    GroupSelector,\n    VueMultiselect,\n  },\n})\nclass Core_SetGroupMembershipBlock extends mixins(Lang) {\n  @Prop() readonly block!: IBlock\n  @Prop() readonly flow!: IFlow\n\n  actionsList: IGroupActionOption[] = [\n    {\n      id: ADD_KEY,\n      name: this.trans('flow-builder.add'),\n    },\n    {\n      id: REMOVE_KEY,\n      name: this.trans('flow-builder.remove'),\n    },\n  ]\n\n  get selectedAction() {\n    const { is_member } = this.block.config as ISetGroupMembershipBlockConfig\n    if (is_member === 'false') {\n      return find(this.actionsList, { id: REMOVE_KEY }) || {} as IGroupActionOption\n    }\n\n    if (is_member === 'true') {\n      return find(this.actionsList, { id: ADD_KEY }) || {} as IGroupActionOption\n    }\n\n    return {} as IGroupActionOption\n  }\n\n  set selectedAction(action: IGroupActionOption) {\n    this.setIsMember(action)\n  }\n\n  @blockVuexNamespace.Action setIsMember!: (action: IGroupActionOption) => Promise<any>\n\n  @builderVuexNamespace.Getter isEditable!: boolean\n\n  @flowVuexNamespace.Mutation block_updateConfigByPath!: ({ blockId, path, value }: { blockId: string, path: string, value: object | string }) => void\n}\n\nexport default Core_SetGroupMembershipBlock\nexport const install = createDefaultBlockTypeInstallerFor(BLOCK_TYPE, SetGroupMembershipStore)\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Core_SetGroupMembershipBlock.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Core_SetGroupMembershipBlock.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Core_SetGroupMembershipBlock.vue?vue&type=template&id=532c40b8&\"\nimport script from \"./Core_SetGroupMembershipBlock.vue?vue&type=script&lang=ts&\"\nexport * from \"./Core_SetGroupMembershipBlock.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}