(function(e){function t(t){for(var i,a,n=t[0],c=t[1],l=t[2],d=0,u=[];d<n.length;d++)a=n[d],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&u.push(s[a][0]),s[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);b&&b(t);while(u.length)u.shift()();return r.push.apply(r,l||[]),o()}function o(){for(var e,t=0;t<r.length;t++){for(var o=r[t],i=!0,a=1;a<o.length;a++){var n=o[a];0!==s[n]&&(i=!1)}i&&(r.splice(t--,1),e=c(c.s=o[0]))}return e}var i={},a={app:0},s={app:0},r=[];function n(e){return c.p+"js/"+({"chunk-builder":"chunk-builder"}[e]||e)+"."+{"chunk-builder":"86f66659"}[e]+".js"}function c(t){if(i[t])return i[t].exports;var o=i[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,c),o.l=!0,o.exports}c.e=function(e){var t=[],o={"chunk-builder":1};a[e]?t.push(a[e]):0!==a[e]&&o[e]&&t.push(a[e]=new Promise((function(t,o){for(var i="css/"+({"chunk-builder":"chunk-builder"}[e]||e)+"."+{"chunk-builder":"078e0250"}[e]+".css",s=c.p+i,r=document.getElementsByTagName("link"),n=0;n<r.length;n++){var l=r[n],d=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(d===i||d===s))return t()}var u=document.getElementsByTagName("style");for(n=0;n<u.length;n++){l=u[n],d=l.getAttribute("data-href");if(d===i||d===s)return t()}var b=document.createElement("link");b.rel="stylesheet",b.type="text/css",b.onload=t,b.onerror=function(t){var i=t&&t.target&&t.target.src||s,r=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=i,delete a[e],b.parentNode.removeChild(b),o(r)},b.href=s;var p=document.getElementsByTagName("head")[0];p.appendChild(b)})).then((function(){a[e]=0})));var i=s[e];if(0!==i)if(i)t.push(i[2]);else{var r=new Promise((function(t,o){i=s[e]=[t,o]}));t.push(i[2]=r);var l,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=n(e);var u=new Error;l=function(t){d.onerror=d.onload=null,clearTimeout(b);var o=s[e];if(0!==o){if(o){var i=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",u.name="ChunkLoadError",u.type=i,u.request=a,o[1](u)}s[e]=void 0}};var b=setTimeout((function(){l({type:"timeout",target:d})}),12e4);d.onerror=d.onload=l,document.head.appendChild(d)}return Promise.all(t)},c.m=e,c.c=i,c.d=function(e,t,o){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(c.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)c.d(o,i,function(t){return e[t]}.bind(null,i));return o},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var b=d;r.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("cd49")},"0224":function(e,t,o){},"026c":function(e,t,o){},"02b5":function(e,t,o){"use strict";o.r(t),o.d(t,"Core_SetGroupMembershipBlock",(function(){return k})),o.d(t,"install",(function(){return O}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"core-set-group-membership-block"},[t("base-block",{attrs:{block:e.block,"show-semantic-label":!1,"uses-default-contact-props-editor":e.usesDefaultContactPropsEditor,"uses-default-branching-editor":e.usesDefaultBranchingEditor},on:{handleBranchingTypeChangedToUnified:function(t){return e.handleBranchingTypeChangedToUnified({block:e.block})}}},[e._t("description",null,{slot:"description"}),e._t("resource-editors",null,{slot:"resource-editors"}),e._t("extras",(function(){return[t("group-membership-editor",{attrs:{block:e.block,"available-groups":e.availableGroups,"has-groups-loading":e.hasGroupsLoading}})]}),{slot:"extras"}),e._t("vendor-extras",null,{slot:"vendor-extras"}),e._t("branching",null,{slot:"branching"}),e._t("contact-props",null,{slot:"contact-props"}),e._t("vendor",null,{slot:"vendor"})],2)],1)},a=[],s=o("2fe6"),r=o("9ab4"),n=o("1b40"),c=o("4bb5"),l=o("4a51"),d=o("af98"),u=o("2ef0"),b=o("4004");const p="add",h="Core.SetGroupMembership",f={...b["a"],async createWith({getters:e,dispatch:t},{props:o}){return o.type=h,o.config={is_member:!0,groups:[],clear:!1},b["a"].createWith({getters:e,dispatch:t},{props:o})},async setIsMember({commit:e,rootGetters:t},o){const i=t["builder/activeBlock"];let a=!1;!0===o&&(a=o.id===p),e("flow/block_updateConfigByPath",{blockId:i.uuid,path:"is_member",value:a},{root:!0})},async validateWithProgrammaticLogic(e,{block:t}){console.debug("floip/SetGroupMembership/validateWithProgrammaticLogic()",""+t.type);const o=[],{groups:i,is_member:a}=t.config;return void 0!==a&&0===(null===i||void 0===i?void 0:i.length)&&o.push(["/config/groups","set-group-membership-groups-required"]),o}},v={...Object(u["cloneDeep"])(b["b"]),actions:f};var _=v,g=o("2fe1");const m=Object(c["e"])("flow/"+h);let k=class extends(Object(g["c"])(l["a"])){constructor(...e){super(...e),Object(s["a"])(this,"block",void 0),Object(s["a"])(this,"usesDefaultBranchingEditor",void 0),Object(s["a"])(this,"usesDefaultContactPropsEditor",void 0),Object(s["a"])(this,"availableGroups",void 0),Object(s["a"])(this,"hasGroupsLoading",void 0),Object(s["a"])(this,"handleBranchingTypeChangedToUnified",void 0)}};Object(r["__decorate"])([Object(n["b"])()],k.prototype,"block",void 0),Object(r["__decorate"])([Object(n["b"])({default:!0})],k.prototype,"usesDefaultBranchingEditor",void 0),Object(r["__decorate"])([Object(n["b"])({default:!1})],k.prototype,"usesDefaultContactPropsEditor",void 0),Object(r["__decorate"])([Object(n["b"])()],k.prototype,"availableGroups",void 0),Object(r["__decorate"])([Object(n["b"])()],k.prototype,"hasGroupsLoading",void 0),Object(r["__decorate"])([m.Action],k.prototype,"handleBranchingTypeChangedToUnified",void 0),k=Object(r["__decorate"])([Object(n["a"])({})],k);var j=k;const O=Object(d["c"])(h,_);var y=j,w=(o("419a"),o("2877")),C=Object(w["a"])(y,i,a,!1,null,"26d93bd6",null);t["default"]=C.exports},"02be":function(e,t,o){"use strict";o.d(t,"g",(function(){return r})),o.d(t,"f",(function(){return n})),o.d(t,"d",(function(){return l})),o.d(t,"e",(function(){return d})),o.d(t,"b",(function(){return u})),o.d(t,"a",(function(){return b})),o.d(t,"c",(function(){return p}));o("13d5");var i=o("9300"),a=o("2ef0"),s=o("44e8");function r(e,{resources:t}){const o=Object(a["find"])(t,{uuid:e});if(null==o)throw new s["a"](`Unable to find resource on context: ${e} in ${Object(a["map"])(t,"uuid")}`);return o}function n(e,t,o){return c(r(e,o),t)}function c(e,t){const o=Object(a["without"])(Object.keys(t),"modes"),i=Object(a["pick"])(t,o),r=Object(a["find"])(e.values,e=>Object(a["isEqual"])(i,Object(a["pick"])(e,o))&&0===Object(a["difference"])(t.modes,e.modes).length);if(null==r)throw new s["a"](`Unable to find resource variant (over modes) on context: (\n      ${e.uuid},\n      ${JSON.stringify(t)}) in\n        ${JSON.stringify(Object(a["map"])(e.values,e=>Object(a["pick"])(e,o)))}`);return r}function l(e,t){const o=Object(a["without"])(Object.keys(t),"modes"),i=Object(a["pick"])(t,o);return e.values.findIndex(e=>Object(a["isEqual"])(i,Object(a["pick"])(e,o))&&0===Object(a["difference"])(t.modes,e.modes).length)}function d(e,t){try{return c(e,t)}catch(o){if(!(o instanceof s["a"]))throw o;return Object.assign(Object(a["cloneDeep"])(t),{value:""})}}function u(e,t){const{TEXT:o,AUDIO:a,IMAGE:s,VIDEO:r}=i["SupportedContentType"],n={[i["SupportedMode"].IVR]:[a],[i["SupportedMode"].SMS]:[o],[i["SupportedMode"].TEXT]:[o],[i["SupportedMode"].USSD]:[o],[i["SupportedMode"].OFFLINE]:[o,s,r],[i["SupportedMode"].RICH_MESSAGING]:[o,s,r]};if(!t||!t.values.length)return n[e];let c={};return c=t.values.reduce((e,t)=>(t.modes.reduce((e,o)=>(e[o]||(e[o]=[]),e[o].push(t.content_type),e),e),e),c),Object.assign(n,c)[e]}function b(e,t){return{...e,flows:e.flows.map(e=>({...e,resources:e.resources.map(o=>({...o,values:o.values.filter(o=>{const i=o.mime_type===t,a=e.supported_modes.some(e=>o.modes.includes(e)),s=e.languages.some(e=>o.language_id===e.id);return i||a&&s})})).filter(e=>!Object(a["isEmpty"])(e.values))}))}}function p({block:e}){var t,o,i;const a=[];return void 0!==(null===(t=e.config)||void 0===t?void 0:t.prompt)&&a.push(e.config.prompt),null===(o=e.config)||void 0===o||null===(i=o.choices)||void 0===i||i.forEach(e=>{a.push(e.prompt)}),a}},"03d5":function(e,t,o){"use strict";o.r(t),o.d(t,"MobilePrimitives_SelectManyResponseBlock",(function(){return p})),o.d(t,"install",(function(){return f}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"mobile-primitive-select-many-response-block"},[t("base-block",{attrs:{block:e.block,"show-semantic-label":!1,"uses-default-contact-props-editor":e.usesDefaultContactPropsEditor,"uses-default-branching-editor":e.usesDefaultBranchingEditor},on:{handleBranchingTypeChangedToUnified:function(t){return e.handleBranchingTypeChangedToUnified({block:e.block})}}},[e._t("description",null,{slot:"description"}),e._t("resource-editors",(function(){return[t("per-language-resource-editor",{attrs:{block:e.block}})]}),{slot:"resource-editors"}),e._t("extras",(function(){return[t("choices-builder",{attrs:{block:e.block},on:{choiceChanged:e.handleChoiceChanged}}),t("hr"),t("minimum-choices-editor",{attrs:{block:e.block}}),t("maximum-choices-editor",{attrs:{block:e.block}})]}),{slot:"extras"}),e._t("vendor-extras",null,{slot:"vendor-extras"}),e._t("branching",(function(){return[t("block-output-branching-config",{attrs:{block:e.block,"has-exit-per-choice":!1,"label-class":""},on:{branchingTypeChanged:function(t){return e.reflowExitsWhenSwitchingToBranchingTypeNotUnified()}}})]}),{slot:"branching"}),e._t("contact-props",null,{slot:"contact-props"}),e._t("vendor",null,{slot:"vendor"})],2)],1)},a=[],s=o("9ab4"),r=o("1b40"),n=o("5801"),c=o("4bb5"),l=o("af98"),d=o("5c47");const u=Object(c["e"])("flow/"+n["a"]),b=Object(c["e"])("builder");let p=class extends d["default"]{};Object(s["__decorate"])([b.Getter],p.prototype,"isEditable",void 0),Object(s["__decorate"])([u.Action],p.prototype,"handleBranchingTypeChangedToUnified",void 0),p=Object(s["__decorate"])([Object(r["a"])({})],p);var h=p;const f=Object(l["c"])(n["a"],n["b"]);var v=h,_=o("2877"),g=Object(_["a"])(v,i,a,!1,null,null,null);t["default"]=g.exports},"0402":function(e,t,o){"use strict";o.r(t);var i=o("a026"),a=o("ad3d"),s=o("ecee"),r=o("c074"),n=o("b702");const c={prefix:"fac",iconName:"audio",icon:[14,14,[],"e001","M4.96802 2.635C5.24464 2.23831 5.71033 2.00004 6.20901 2.00004H7.0313C7.85503 2.00004 8.52279 2.63844 8.52279 3.42596V11.5741C8.52279 12.3616 7.85503 13 7.0313 13H6.95819C6.56262 13 6.18326 12.8498 5.90355 12.5824L3.84596 10.6152C3.80601 10.577 3.75181 10.5556 3.6953 10.5556H1.49149C0.667762 10.5556 0 9.91716 0 9.12964V5.87039C0 5.08288 0.667762 4.44447 1.49149 4.44447H3.5922C3.66344 4.44447 3.72997 4.41043 3.76948 4.35376L4.96802 2.635ZM6.20901 3.22226C6.13777 3.22226 6.07124 3.25629 6.03173 3.31296L4.83319 5.03173C4.55657 5.42842 4.09088 5.66669 3.5922 5.66669H1.49149C1.37381 5.66669 1.27842 5.75789 1.27842 5.87039V9.12964C1.27842 9.24214 1.37381 9.33334 1.49149 9.33334H3.6953C4.09087 9.33334 4.47023 9.48357 4.74994 9.75099L6.80753 11.7181C6.84748 11.7563 6.90168 11.7778 6.95819 11.7778H7.0313C7.14898 11.7778 7.24437 11.6866 7.24437 11.5741V3.42596C7.24437 3.31346 7.14898 3.22226 7.0313 3.22226H6.20901Z M10.3337 4.71804C10.5287 4.43669 10.9253 4.35973 11.2196 4.54615C11.9644 5.01793 12.8617 5.9752 13.1309 7.14458C13.2692 7.74562 13.2409 8.40541 12.9334 9.06324C12.6278 9.71697 12.0676 10.3241 11.2196 10.8613C10.9253 11.0477 10.5287 10.9707 10.3337 10.6894C10.1387 10.408 10.2192 10.0288 10.5135 9.84242C11.2091 9.40181 11.5814 8.9599 11.7662 8.56456C11.9491 8.17332 11.9691 7.78404 11.8823 7.4073C11.7013 6.62113 11.055 5.90804 10.5135 5.56501C10.2192 5.37859 10.1387 4.99939 10.3337 4.71804Z M13.0384 2.12334C13.3202 1.92004 13.721 1.97363 13.9336 2.24304C14.6116 3.10201 15.6372 4.7263 15.9236 6.65002C16.2158 8.61342 15.7293 10.8603 13.4249 12.8431C13.1625 13.0689 12.7583 13.0486 12.5221 12.7977C12.286 12.5468 12.3073 12.1604 12.5697 11.9347C14.5266 10.2508 14.8963 8.42364 14.6579 6.82224C14.4136 5.18115 13.5215 3.7499 12.9132 2.97925C12.7005 2.70984 12.7566 2.32664 13.0384 2.12334Z"]},l={prefix:"fac",iconName:"enter",icon:[17,20,[],"e002","M1 9C0.447715 9 0 9.44772 0 10C0 10.5523 0.447715 11 1 11V9ZM11 11H12V9H11V11ZM7.99929 4.62347C7.63354 4.20965 7.00157 4.17068 6.58775 4.53643C6.17393 4.90218 6.13497 5.53414 6.50071 5.94796L7.99929 4.62347ZM11.4167 10L12.166 10.6622L12.7513 10L12.166 9.33775L11.4167 10ZM6.50071 14.052C6.13497 14.4659 6.17393 15.0978 6.58775 15.4636C7.00157 15.8293 7.63354 15.7904 7.99929 15.3765L6.50071 14.052ZM3.33333 3.14286C3.33333 3.69514 3.78105 4.14286 4.33333 4.14286C4.88562 4.14286 5.33333 3.69514 5.33333 3.14286H3.33333ZM5.33333 16.8571C5.33333 16.3049 4.88562 15.8571 4.33333 15.8571C3.78105 15.8571 3.33333 16.3049 3.33333 16.8571H5.33333ZM1 11H11V9H1V11ZM5.33333 3.14286V2H3.33333V3.14286H5.33333ZM5.33333 2H15V0H5.33333V2ZM15 2V18H17V2H15ZM15 18H5.33333V20H15V18ZM5.33333 18V16.8571H3.33333V18H5.33333ZM10.6674 9.33775L8.58405 11.6949L10.0826 13.0194L12.166 10.6622L10.6674 9.33775ZM8.58405 11.6949L6.50071 14.052L7.99929 15.3765L10.0826 13.0194L8.58405 11.6949ZM6.50071 5.94796L8.58405 8.3051L10.0826 6.98061L7.99929 4.62347L6.50071 5.94796ZM8.58405 8.3051L10.6674 10.6622L12.166 9.33775L10.0826 6.98061L8.58405 8.3051ZM5.33333 18H5.33333H3.33333C3.33333 19.1046 4.22877 20 5.33333 20V18ZM15 18V20C16.1046 20 17 19.1046 17 18H15ZM15 2H15H17C17 0.89543 16.1046 0 15 0V2ZM5.33333 2L5.33333 2V0C4.22876 0 3.33333 0.895431 3.33333 2H5.33333Z"]},d={prefix:"fac",iconName:"record-audio",icon:[32,32,[],"e003","M7.99805 13.9376C7.9636 13.3864 7.48883 12.9675 6.93762 13.0019C6.38641 13.0364 5.9675 13.5112 6.00195 14.0624L7.99805 13.9376ZM25.9981 14.0624C26.0325 13.5112 25.6136 13.0364 25.0624 13.0019C24.5112 12.9675 24.0364 13.3864 24.0019 13.9376L25.9981 14.0624ZM15 28C15 28.5523 15.4477 29 16 29C16.5523 29 17 28.5523 17 28H15ZM8 27C7.44772 27 7 27.4477 7 28C7 28.5523 7.44772 29 8 29V27ZM24 29C24.5523 29 25 28.5523 25 28C25 27.4477 24.5523 27 24 27V29ZM20 8V13H22V8H20ZM12 13V8H10V13H12ZM16 17C13.7909 17 12 15.2091 12 13H10C10 16.3137 12.6863 19 16 19V17ZM20 13C20 15.2091 18.2091 17 16 17V19C19.3137 19 22 16.3137 22 13H20ZM16 4C18.2091 4 20 5.79086 20 8H22C22 4.68629 19.3137 2 16 2V4ZM16 2C12.6863 2 10 4.68629 10 8H12C12 5.79086 13.7909 4 16 4V2ZM6.00195 14.0624C6.09611 15.5689 6.7059 17.7811 8.24207 19.6375C9.81064 21.5331 12.3011 23 16 23V21C12.8989 21 10.9727 19.8003 9.78293 18.3625C8.56077 16.8855 8.07056 15.0977 7.99805 13.9376L6.00195 14.0624ZM16 23C19.6989 23 22.1894 21.5331 23.7579 19.6375C25.2941 17.7811 25.9039 15.5689 25.9981 14.0624L24.0019 13.9376C23.9294 15.0977 23.4392 16.8855 22.2171 18.3625C21.0273 19.8003 19.1011 21 16 21V23ZM17 28V22H15V28H17ZM8 29H24V27H8V29Z"]},u={prefix:"fac",iconName:"settings",icon:[16,16,[],"e004","M14.9757 7.00154L13.2241 5.81525L13.6254 3.73557C13.7015 3.34893 13.5785 2.95057 13.3002 2.66938C13.019 2.39111 12.6207 2.26809 12.2399 2.34424L10.1632 2.74553L8.97979 0.990993C8.53749 0.3378 7.45958 0.3378 7.01728 0.990993L5.83392 2.74553L3.76011 2.34424C3.37053 2.27102 2.9751 2.39111 2.69684 2.67231C2.41857 2.9535 2.29555 3.34893 2.3717 3.73557L2.77299 5.81525L1.02138 7.00154C0.693322 7.22415 0.5 7.59029 0.5 7.98572C0.5 8.38115 0.696251 8.74729 1.02138 8.96697L2.77299 10.1533L2.3717 12.2329C2.29555 12.6196 2.41857 13.0179 2.69684 13.2962C2.9751 13.5745 3.3676 13.6975 3.76011 13.6213L5.83392 13.2201L7.01728 14.9746C7.23697 15.3027 7.60603 15.4989 7.99854 15.4989C8.39104 15.4989 8.76011 15.3027 8.97979 14.9775L10.1632 13.223L12.2399 13.6243C12.6324 13.7034 13.0249 13.5774 13.3032 13.2991C13.5814 13.0209 13.7015 12.6225 13.6283 12.2359L13.227 10.1562L14.9786 8.9699C15.3037 8.75022 15.5 8.38115 15.5 7.98865C15.4971 7.59029 15.3037 7.22415 14.9757 7.00154ZM11.6687 9.50886L12.1842 12.1802L9.51875 11.6647L7.99854 13.9172L6.47832 11.6618L3.81576 12.1773L4.33128 9.50593L2.08172 7.98279L4.33128 6.45965L3.81576 3.7883L6.48125 4.30382L7.99854 2.05426L9.51875 4.30675L12.1842 3.79123L11.6687 6.45965L13.9183 7.98279L11.6687 9.50886ZM7.99854 4.95409C6.32015 4.95409 4.95226 6.32198 4.95226 8.00037C4.95226 9.67875 6.32015 11.0466 7.99854 11.0466C9.67692 11.0466 11.0448 9.67875 11.0448 8.00037C11.0448 6.32198 9.67692 4.95409 7.99854 4.95409ZM7.99854 9.64067C7.09344 9.64067 6.35823 8.90546 6.35823 8.00037C6.35823 7.09527 7.09344 6.36006 7.99854 6.36006C8.90363 6.36006 9.63884 7.09527 9.63884 8.00037C9.63884 8.90546 8.90363 9.64067 7.99854 9.64067Z"]},b={prefix:"fac",iconName:"upload",icon:[32,32,[],"e005","M15.3415 5.24742C15.7185 4.91753 16.2815 4.91753 16.6585 5.24742L24.6585 12.2474C25.0741 12.6111 25.1163 13.2429 24.7526 13.6585C24.3889 14.0741 23.7571 14.1163 23.3415 13.7526L17 8.20377V19C17 19.5523 16.5523 20 16 20C15.4477 20 15 19.5523 15 19V8.20377L8.6585 13.7526C8.24287 14.1163 7.61111 14.0741 7.24742 13.6585C6.88374 13.2429 6.92586 12.6111 7.3415 12.2474L15.3415 5.24742ZM7 20C7.55228 20 8 20.4477 8 21V26H24V21C24 20.4477 24.4477 20 25 20C25.5523 20 26 20.4477 26 21V27C26 27.5523 25.5523 28 25 28H7C6.44772 28 6 27.5523 6 27V21C6 20.4477 6.44772 20 7 20Z"]},p={prefix:"fac",iconName:"ussd",icon:[32,32,[],"e006","M18 23h11v-20h-26v20h9.541l0.607 3.639 4.852-3.639zM11.79 31.408c-0.36 0.27-0.878 0.062-0.952-0.381l-0.838-5.026h-8c-1.105 0-2-0.895-2-2v-22c0-1.105 0.895-2 2-2h28c1.105 0 2 0.895 2 2v22c0 1.105-0.895 2-2 2h-11l-7.21 5.408z M11.052 10l-0.331 3.077 3.014-0.872 0.265 2.103-2.749 0.205 1.805 2.479-1.838 1.009-1.259-2.615-1.11 2.598-1.905-0.991 1.789-2.479-2.733-0.222 0.315-2.085 2.948 0.872-0.331-3.077h2.12z M24.193 13.377l-0.306 1.268h1.674v1.133h-1.927l-0.505 2.222h-1.422l0.505-2.222h-1.262l-0.492 2.222h-1.395l0.478-2.222h-1.542v-1.133h1.794l0.306-1.268h-1.634v-1.144h1.874l0.505-2.233h1.422l-0.505 2.233h1.289l0.505-2.233h1.395l-0.505 2.233h1.555v1.144h-1.807zM21.203 14.645h1.276l0.306-1.268h-1.276l-0.306 1.268z"]},h={prefix:"fac",iconName:"copy",icon:[32,32,[],"e007","M14.667 13.333c-.737 0-1.334.597-1.334 1.334v12c0 .736.597 1.333 1.334 1.333h12c.736 0 1.333-.597 1.333-1.333v-12c0-.737-.597-1.334-1.333-1.334h-12zm-4 1.334a4 4 0 0 1 4-4h12a4 4 0 0 1 4 4v12a4 4 0 0 1-4 4h-12a4 4 0 0 1-4-4v-12z M5.333 4A1.333 1.333 0 0 0 4 5.333v12a1.333 1.333 0 0 0 1.333 1.334h1.334a1.333 1.333 0 1 1 0 2.666H5.333a4 4 0 0 1-4-4v-12a4 4 0 0 1 4-4h12a4 4 0 0 1 4 4v1.334a1.333 1.333 0 1 1-2.666 0V5.333A1.334 1.334 0 0 0 17.333 4h-12z"]},f={prefix:"fac",iconName:"expand",icon:[32,32,[],"e008","M13.432 27.9a1.333 1.333 0 0 1-1.304 1.36l-7.998.172a1.333 1.333 0 0 1-1.362-1.304l-.171-7.999a1.333 1.333 0 0 1 2.666-.057l.142 6.665 6.666-.142a1.333 1.333 0 0 1 1.361 1.304zM28.201 13.123a1.333 1.333 0 0 1-1.39-1.273l-.294-6.66-6.66.293a1.333 1.333 0 1 1-.118-2.664l7.992-.352a1.333 1.333 0 0 1 1.39 1.273l.353 7.992a1.333 1.333 0 0 1-1.273 1.391z M17.977 14.518a1.333 1.333 0 0 1-.084-1.884L26.806 2.9a1.333 1.333 0 0 1 1.967 1.8l-8.913 9.736c-.497.543-1.34.58-1.883.083zM3.179 29.062a1.333 1.333 0 0 1-.04-1.886l9.13-9.53a1.333 1.333 0 0 1 1.926 1.844l-9.131 9.531c-.51.532-1.354.55-1.885.04z"]},v={prefix:"fac",iconName:"minimize",icon:[32,32,[],"e009","M4 18.667c0-.737.597-1.334 1.333-1.334h8c.737 0 1.334.597 1.334 1.334v8a1.333 1.333 0 0 1-2.667 0V20H5.333A1.333 1.333 0 0 1 4 18.667zM18.667 4C19.403 4 20 4.597 20 5.333V12h6.667a1.333 1.333 0 1 1 0 2.667h-8a1.333 1.333 0 0 1-1.334-1.334v-8c0-.736.597-1.333 1.334-1.333z M28.943 3.057c.52.52.52 1.365 0 1.886l-9.334 9.333a1.333 1.333 0 1 1-1.885-1.886l9.333-9.333c.52-.52 1.365-.52 1.886 0zM14.276 17.724c.52.52.52 1.365 0 1.886l-9.333 9.333a1.333 1.333 0 0 1-1.886-1.886l9.333-9.333c.521-.52 1.365-.52 1.886 0z"]},_={prefix:"fac",iconName:"single-exit",icon:[32,32,[],"e010","M21 8H11V14H21V8ZM10 7V15H15.5V19H12V25H20V19H16.5V15H22V7H10ZM13 20H19V24H13V20Z"]},g={prefix:"fac",iconName:"advanced-exit",icon:[32,32,[],"e011","M11 8H21V14H11V8ZM10 7H22V15H16.5V19H25V25H7V19H15.5V15H10V7ZM24 20H8V24H24V20ZM13 22C13 22.5523 12.5523 23 12 23C11.4477 23 11 22.5523 11 22C11 21.4477 11.4477 21 12 21C12.5523 21 13 21.4477 13 22ZM16 23C16.5523 23 17 22.5523 17 22C17 21.4477 16.5523 21 16 21C15.4477 21 15 21.4477 15 22C15 22.5523 15.4477 23 16 23ZM21 22C21 22.5523 20.5523 23 20 23C19.4477 23 19 22.5523 19 22C19 21.4477 19.4477 21 20 21C20.5523 21 21 21.4477 21 22Z"]},m={prefix:"fac",iconName:"one-exit-per-choice",icon:[32,32,[],"e012","M21 8H11V14H21V8ZM10 7V15H15.5V18.5H11.5V21H9V25H14V21H12.5V19.5H19.5V21H18V25H23V21H20.5V18.5H16.5V15H22V7H10ZM10 24V22H13V24H10ZM22 24V22H19V24H22Z"]},k={prefix:"fac",iconName:"home",icon:[24,24,[],"e013","M9.38843 22.559V15.3539H14.6058V22.559C14.6058 23.3515 15.1927 24 15.9101 24H19.8231C20.5405 24 21.1275 23.3515 21.1275 22.559V12.4719H23.3448C23.9448 12.4719 24.2318 11.6506 23.7753 11.2183L12.871 0.367457C12.3754 -0.122486 11.6188 -0.122486 11.1232 0.367457L0.218936 11.2183C-0.224539 11.6506 0.0493717 12.4719 0.649367 12.4719H2.86674V22.559C2.86674 23.3515 3.45369 24 4.17108 24H8.08409C8.80148 24 9.38843 23.3515 9.38843 22.559Z"]},j={prefix:"fac",iconName:"content",icon:[32,32,[],"e014","M23 4v0c0.552 0 1 0.448 1 1v23c0 0.552-0.448 1-1 1h-14c-0.552 0-1-0.448-1-1v-23c0-0.552 0.448-1 1-1h14zM9 3c-1.105 0-2 0.895-2 2v0 23c0 1.105 0.895 2 2 2v0h14c1.105 0 2-0.895 2-2v0-23c0-1.105-0.895-2-2-2v0h-14z M19.7 7v0c0.552 0 1 0.448 1 1v13c0 0.552-0.448 1-1 1h-7.2c-0.552 0-1-0.448-1-1v-13c0-0.552 0.448-1 1-1h7.2zM12.5 6c-1.105 0-2 0.895-2 2v0 13c0 1.105 0.895 2 2 2v0h7.2c1.105 0 2-0.895 2-2v0-13c0-1.105-0.895-2-2-2v0h-7.2zM16 27v0c-0.552 0-1-0.448-1-1s0.448-1 1-1v0c0.552 0 1 0.448 1 1s-0.448 1-1 1zM16 28c1.105 0 2-0.895 2-2s-0.895-2-2-2v0c-1.105 0-2 0.895-2 2s0.895 2 2 2v0z"]},O={prefix:"fac",iconName:"contact",icon:[32,32,[],"e015","M16 13v0c-2.761 0-5-2.239-5-5s2.239-5 5-5v0c2.761 0 5 2.239 5 5s-2.239 5-5 5zM16 14c3.314 0 6-2.686 6-6s-2.686-6-6-6v0c-3.314 0-6 2.686-6 6s2.686 6 6 6v0zM9 15.89h14c1.105 0 2 0.895 2 2v10.443h-18v-10.444c0-1.105 0.895-2 2-2zM26 17.889c0-1.657-1.343-3-3-3v0h-14c-1.657 0-3 1.343-3 3v0 11.444h20v-11.443z"]},y={prefix:"fac",iconName:"branching",icon:[32,32,[],"e016","M12 4v4h-10v-4h10zM2 3c-0.552 0-1 0.448-1 1v0 4c0 0.552 0.448 1 1 1v0h10c0.552 0 1-0.448 1-1v0-4c0-0.552-0.448-1-1-1v0h-10zM26 4v4h-10v-4h10zM16 3c-0.552 0-1 0.448-1 1v0 4c0 0.552 0.448 1 1 1v0h10c0.552 0 1-0.448 1-1v0-4c0-0.552-0.448-1-1-1v0h-10zM20 14v4h-10v-4h10zM10 13c-0.552 0-1 0.448-1 1v0 4c0 0.552 0.448 1 1 1v0h10c0.552 0 1-0.448 1-1v0-4c0-0.552-0.448-1-1-1v0h-10zM30 24v4h-10v-4h10zM20 23c-0.552 0-1 0.448-1 1v0 4c0 0.552 0.448 1 1 1v0h10c0.552 0 1-0.448 1-1v0-4c0-0.552-0.448-1-1-1v0h-10z M15 6.5h-2.5v-1h2.5v1zM28.5 6.5h-2v-1h3v11.5h-8.5v-1h7.5v-9.5zM14.5 19h1v7h3.5v1h-4.5v-8z"]},w={prefix:"fac",iconName:"weather",icon:[32,32,[],"e017","M9.294 7.97c-2.196-0.082-4.117 1.822-4.194 4.36-0.002 0.053-0.003 0.116-0.003 0.179 0 1.041 0.329 2.005 0.889 2.793l-0.010-0.015-0.812 0.578c-0.668-0.936-1.068-2.103-1.068-3.364 0-0.073 0.001-0.146 0.004-0.219l-0 0.010c0.092-2.998 2.39-5.429 5.225-5.323 1.29 0.048 2.444 0.618 3.304 1.505l-0.715 0.694c-0.696-0.717-1.611-1.162-2.62-1.2z M10 16.1c0-3.415 2.506-6.1 5.5-6.1 2.21 0 4.146 1.454 5.017 3.597l0.205 0.504 0.485-0.247c0.699-0.356 1.475-0.554 2.293-0.554 2.994 0 5.5 2.685 5.5 6.1s-2.506 6.1-5.5 6.1h-14.721l-0.219-0.027c-1.965-0.239-3.56-2.093-3.56-4.423 0-2.504 1.835-4.45 4-4.45h0c0.155 0 0.308 0.010 0.44 0.027l0.561 0.068-0.001-0.595zM9.016 15.6h-0.016c-2.805 0-5 2.486-5 5.45 0 2.603 1.688 4.831 4 5.341v0.109h15.5c3.634 0 6.5-3.225 6.5-7.1s-2.866-7.1-6.5-7.1c-0.799 0-1.564 0.157-2.27 0.445-1.088-2.212-3.23-3.745-5.73-3.745-3.476 0-6.25 2.951-6.484 6.6zM13.928 5.91l-1 1.65-0.856-0.52 1-1.65 0.856 0.52zM7.488 3.89l0.5 2.2-0.976 0.22-0.5-2.2 0.976-0.22zM2.24 8.511l2 1.1-0.482 0.876-2-1.1 0.482-0.876zM2.129 16.863l1.5-1.65 0.74 0.672-1.5 1.65-0.74-0.672z"]},C={prefix:"fac",iconName:"developer",icon:[32,32,[],"e018","M11.052 12.934c0-0 0-0 0-0 0-0.25-0.202-0.452-0.452-0.452-0.061 0-0.12 0.012-0.173 0.034l0.003-0.001-7.958 3.23c-0.279 0.116-0.471 0.386-0.471 0.701s0.192 0.585 0.466 0.699l0.005 0.002 7.958 3.23c0.050 0.021 0.108 0.033 0.169 0.033 0.25 0 0.452-0.203 0.452-0.452 0-0.189-0.116-0.351-0.28-0.418l-0.003-0.001-7.746-3.092 7.746-3.093c0.168-0.069 0.284-0.23 0.284-0.42 0-0 0-0 0-0v0zM12.319 25.385c-0.017 0.046-0.026 0.098-0.026 0.153 0 0.255 0.207 0.462 0.462 0.462 0.2 0 0.371-0.128 0.435-0.306l0.001-0.003 6.704-19.076c0.017-0.046 0.026-0.098 0.026-0.153 0-0.255-0.207-0.462-0.462-0.462-0.2 0-0.371 0.128-0.435 0.306l-0.001 0.003-6.704 19.076zM21.57 12.515c-0.053-0.024-0.116-0.038-0.181-0.038-0.25 0-0.452 0.202-0.452 0.452 0 0.193 0.122 0.358 0.292 0.423l0.003 0.001 7.746 3.093-7.746 3.092c-0.174 0.066-0.296 0.231-0.296 0.424 0 0.25 0.202 0.452 0.452 0.452 0.066 0 0.128-0.014 0.184-0.039l-0.003 0.001 7.958-3.229c0.279-0.116 0.471-0.386 0.471-0.701s-0.192-0.585-0.466-0.699l-0.005-0.002-7.958-3.23z"]},x={prefix:"fac",iconName:"text",icon:[32,32,[],"e019","M3.5 6.115a1.5 1.5 0 0 0-1.5 1.5v15.87a1.5 1.5 0 0 0 1.5 1.5h7.112l1.588 3.177c.622 1.245 2.459 1.044 2.796-.307l.718-2.87h8.594a1.5 1.5 0 0 0 1.5-1.5V7.115h-.588v-1H5.469v2h18.34v14.87h-8.486a1.5 1.5 0 0 0-1.455 1.137l-.484 1.936-1.122-2.243a1.5 1.5 0 0 0-1.341-.83H4V8.115h1.469v-2H3.5z M5.469 13.698c0-.454.368-.822.823-.822h7.818a.823.823 0 1 1 0 1.646H6.292a.823.823 0 0 1-.823-.824zM5.469 18.636c0-.454.368-.823.823-.823h11.933a.823.823 0 1 1 0 1.646H6.292a.823.823 0 0 1-.823-.823z M29.335 9.584a6.584 6.584 0 1 1-13.168 0 6.584 6.584 0 0 1 13.168 0z M22.751 14.521a4.938 4.938 0 1 0 0-9.875 4.938 4.938 0 0 0 0 9.875zm0 1.646a6.584 6.584 0 1 0 0-13.167 6.584 6.584 0 0 0 0 13.167z M23.74 12.298a.578.578 0 0 1-1.155 0V8.13h-.972a.508.508 0 0 1 0-1.017h3.099a.508.508 0 1 1 0 1.017h-.972v4.167z"]},E={prefix:"fac",iconName:"message",icon:[32,32,[],"e020","M28 7h-24c-0.552 0-1 0.448-1 1v16c0 0.552 0.448 1 1 1h24c0.552 0 1-0.448 1-1v-16c0-0.552-0.448-1-1-1zM4 4h24c2.209 0 4 1.791 4 4v16c0 2.209-1.791 4-4 4h-24c-2.209 0-4-1.791-4-4v-16c0-2.209 1.791-4 4-4z M13.722 22.023l-12.698-10.884 1.952-2.278 12.698 10.884c0.187 0.16 0.464 0.16 0.651 0l12.698-10.884 1.952 2.278-12.698 10.884c-1.311 1.124-3.245 1.124-4.556 0z"]};var B=[c,l,d,u,b,p,h,f,v,_,g,m,k,j,O,y,w,C,x,E];s["c"].add(r["c"],n["a"],r["d"],r["e"],n["b"],n["c"],n["d"],n["e"],n["f"],n["g"],r["h"],r["i"],n["h"],r["j"],n["i"],r["g"],r["f"],r["a"],r["b"],...B),i["default"].component("FontAwesomeIcon",a["a"])},"04b9":function(e,t,o){"use strict";o("453a")},"0b1e":function(e,t,o){},"0ddd":function(e,t,o){},"0de0":function(e,t,o){var i={"./1.0.0-rc1/IAdvancedSelectOneBlock.json":"467b","./1.0.0-rc1/ICaseBlock.json":"24dc","./1.0.0-rc1/ILocationResponseBlock.json":"b194","./1.0.0-rc1/ILogBlock.json":"7074","./1.0.0-rc1/IMessageBlock.json":"aa41","./1.0.0-rc1/INumericResponseBlock.json":"e0ae","./1.0.0-rc1/IOpenResponseBlock.json":"5831","./1.0.0-rc1/IOutputBlock.json":"5663","./1.0.0-rc1/IPhotoResponseBlock.json":"a0ef","./1.0.0-rc1/IPrintBlock.json":"79a9","./1.0.0-rc1/IReadBlock.json":"27e7","./1.0.0-rc1/IRunFlowBlock.json":"bf9a","./1.0.0-rc1/ISelectManyResponseBlock.json":"44db","./1.0.0-rc1/ISelectOneResponseBlock.json":"5149","./1.0.0-rc1/ISetContactPropertyBlock.json":"f37b","./1.0.0-rc1/ISetGroupMembershipBlock.json":"45d5","./1.0.0-rc2/IAdvancedSelectOneBlock.json":"5c3b","./1.0.0-rc2/ICaseBlock.json":"fabe","./1.0.0-rc2/ILocationResponseBlock.json":"24e6","./1.0.0-rc2/ILogBlock.json":"025b","./1.0.0-rc2/IMessageBlock.json":"5402","./1.0.0-rc2/INumericResponseBlock.json":"0999","./1.0.0-rc2/IOpenResponseBlock.json":"6612","./1.0.0-rc2/IOutputBlock.json":"c3a9","./1.0.0-rc2/IPhotoResponseBlock.json":"42f5","./1.0.0-rc2/IPrintBlock.json":"3d43","./1.0.0-rc2/IReadBlock.json":"56d3","./1.0.0-rc2/IRunFlowBlock.json":"4377","./1.0.0-rc2/ISelectManyResponseBlock.json":"468a","./1.0.0-rc2/ISelectOneResponseBlock.json":"897a","./1.0.0-rc2/ISetContactPropertyBlock.json":"9744","./1.0.0-rc2/ISetGroupMembershipBlock.json":"f2ae","./1.0.0-rc3/IAdvancedSelectOneBlock.json":"ebe9","./1.0.0-rc3/ICaseBlock.json":"df71","./1.0.0-rc3/ILocationResponseBlock.json":"4b5a","./1.0.0-rc3/ILogBlock.json":"5c92","./1.0.0-rc3/IMessageBlock.json":"9f75","./1.0.0-rc3/INumericResponseBlock.json":"ca51","./1.0.0-rc3/IOpenResponseBlock.json":"284f","./1.0.0-rc3/IOutputBlock.json":"bf9b","./1.0.0-rc3/IPhotoResponseBlock.json":"3da6","./1.0.0-rc3/IPrintBlock.json":"b781","./1.0.0-rc3/IReadBlock.json":"5bbb","./1.0.0-rc3/IRunFlowBlock.json":"84e0","./1.0.0-rc3/ISelectManyResponseBlock.json":"347b","./1.0.0-rc3/ISelectOneResponseBlock.json":"8832","./1.0.0-rc3/ISetContactPropertyBlock.json":"9b07","./1.0.0-rc3/ISetGroupMembershipBlock.json":"e4a3","./1.0.0-rc4/IAdvancedSelectOneBlock.json":"171d","./1.0.0-rc4/ICaseBlock.json":"35a7","./1.0.0-rc4/ILocationResponseBlock.json":"c6df","./1.0.0-rc4/ILogBlock.json":"0468","./1.0.0-rc4/IMessageBlock.json":"6faa","./1.0.0-rc4/INumericResponseBlock.json":"d6b7","./1.0.0-rc4/IOpenResponseBlock.json":"6897","./1.0.0-rc4/IOutputBlock.json":"ee9c","./1.0.0-rc4/IPhotoResponseBlock.json":"fdc7","./1.0.0-rc4/IPrintBlock.json":"3897","./1.0.0-rc4/IReadBlock.json":"74af","./1.0.0-rc4/IRunFlowBlock.json":"a629","./1.0.0-rc4/ISelectManyResponseBlock.json":"bcf6","./1.0.0-rc4/ISelectOneResponseBlock.json":"fea9","./1.0.0-rc4/ISetContactPropertyBlock.json":"7464","./1.0.0-rc4/ISetGroupMembershipBlock.json":"f47e","./current/IAdvancedSelectOneBlock.json":"9e25","./current/ICaseBlock.json":"0e0e","./current/ILocationResponseBlock.json":"24e9","./current/ILogBlock.json":"8b9f","./current/IMessageBlock.json":"1010","./current/INumericResponseBlock.json":"5cb6","./current/IOpenResponseBlock.json":"30f6","./current/IOutputBlock.json":"858c","./current/IPhotoResponseBlock.json":"768e","./current/IPrintBlock.json":"7cfe","./current/IReadBlock.json":"65d3","./current/IRunFlowBlock.json":"2ced","./current/ISelectManyResponseBlock.json":"d713","./current/ISelectOneResponseBlock.json":"d76c","./current/ISetContactPropertyBlock.json":"41c5","./current/ISetGroupMembershipBlock.json":"44b3"};function a(e){var t=s(e);return o(t)}function s(e){if(!o.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=s,e.exports=a,a.id="0de0"},1102:function(e,t,o){"use strict";o("8429")},"1fd2":function(e,t,o){},"23d6":function(e,t,o){},"244b":function(e,t,o){"use strict";o.d(t,"f",(function(){return n})),o.d(t,"e",(function(){return c})),o.d(t,"b",(function(){return l})),o.d(t,"a",(function(){return d})),o.d(t,"c",(function(){return u})),o.d(t,"g",(function(){return b})),o.d(t,"d",(function(){return p}));var i=o("a026"),a=o("2ef0"),s=o("9300");function r(e,t){const o=Object(a["toPath"])(t);let s=e;while(1!==o.length){const e=o.shift();"undefined"===typeof s[e]&&i["default"].set(s,e,{}),s=s[e]}return[s,o.shift()]}function n(e,t,o,a){const n=Object(s["findBlockOnActiveFlowWith"])(t,e),[c,l]=r(n,o);i["default"].set(c,l,a)}function c(e,t,o,a,n){const c=Object(s["findBlockOnActiveFlowWith"])(t,e),l=Object(s["findBlockExitWith"])(o,c),[d,u]=r(l,a);i["default"].set(d,u,n)}function l(e,t,o,a){const n=Object(s["findBlockOnActiveFlowWith"])(t,e),c=Object(s["findBlockExitWith"])(o,n),[l,d]=r(c,a);i["default"].delete(l,d)}function d(e,t,o){const[a,s]=r(t,o);i["default"].delete(a,s)}function u(e,t,o){const a=Object(s["findBlockOnActiveFlowWith"])(t,e),[n,c]=r(a,o);i["default"].delete(n,c)}function b(e,t,o,a){const n=Object(s["findFlowWith"])(t,e),[c,l]=r(n,o);i["default"].set(c,l,a)}function p(e,t,o){const a=Object(s["findFlowWith"])(t,e),[n,c]=r(a,o);i["default"].delete(n,c)}},"27d6":function(e,t,o){},2930:function(e,t,o){
/**
 * @license MIT
 */
(function(e,t,o){function i(e){if(this.version="2.0.0-beta2",this.support="undefined"!==typeof File&&"undefined"!==typeof Blob&&"undefined"!==typeof FileList&&(!!Blob.prototype.slice||!!Blob.prototype.webkitSlice||!!Blob.prototype.mozSlice||!1),!this.support)return;this.files=[],this.defaults={chunkSize:1048576,forceChunkSize:!1,simultaneousUploads:3,singleFile:!1,fileParameterName:"file",progressCallbacksInterval:500,speedSmoothingFactor:.1,query:{},headers:{},withCredentials:!1,preprocess:null,method:"multipart",prioritizeFirstAndLastChunk:!1,target:"/",testChunks:!0,generateUniqueIdentifier:null,maxChunkRetries:0,chunkRetryInterval:null,permanentErrors:[404,415,500,501]},this.opts={},this.events=[];const t=this;this.onDrop=function(e){e.stopPropagation(),e.preventDefault();const o=e.dataTransfer;o.items&&o.items[0].webkitGetAsEntry?t.webkitReadDataTransfer(e):t.addFiles(o.files,e)},this.preventEvent=function(e){e.preventDefault()},this.opts=i.extend({},this.defaults,e||{})}function a(e,t){this.flowObj=e,this.file=t,this.name=t.fileName||t.name,this.size=t.size,this.relativePath=t.relativePath||t.webkitRelativePath||this.name,this.uniqueIdentifier=e.generateUniqueIdentifier(t),this.chunks=[],this.paused=!1,this.error=!1,this.averageSpeed=0,this.currentSpeed=0,this._lastProgressCallback=Date.now(),this._prevUploadedSize=0,this._prevProgress=0,this.bootstrap()}function s(e,t,o){this.flowObj=e,this.fileObj=t,this.fileObjSize=t.size,this.offset=o,this.tested=!1,this.retries=0,this.pendingRetry=!1,this.preprocessState=0,this.loaded=0,this.total=0;const i=this.flowObj.opts.chunkSize;this.startByte=this.offset*i,this.endByte=Math.min(this.fileObjSize,(this.offset+1)*i),this.xhr=null,this.fileObjSize-this.endByte<i&&!this.flowObj.opts.forceChunkSize&&(this.endByte=this.fileObjSize);const a=this;this.progressHandler=function(e){e.lengthComputable&&(a.loaded=e.loaded,a.total=e.total),a.fileObj.chunkEvent("progress")},this.testHandler=function(e){const t=a.status();"success"===t?(a.tested=!0,a.fileObj.chunkEvent(t,a.message()),a.flowObj.uploadNextChunk()):a.fileObj.paused||(a.tested=!0,a.send())},this.doneHandler=function(e){const t=a.status();if("success"===t||"error"===t)a.fileObj.chunkEvent(t,a.message()),a.flowObj.uploadNextChunk();else{a.fileObj.chunkEvent("retry",a.message()),a.pendingRetry=!0,a.abort(),a.retries++;const e=a.flowObj.opts.chunkRetryInterval;null!==e?setTimeout(()=>{a.send()},e):a.send()}}}function r(e,t){return n(arguments,t=>{t!==e&&n(t,(t,o)=>{e[o]=t})}),e}function n(e,t,o){if(!e)return;let i;if("undefined"!==typeof e.length){for(i=0;i<e.length;i++)if(!1===t.call(o,e[i],i))return}else for(i in e)if(e.hasOwnProperty(i)&&!1===t.call(o,e[i],i))return}i.prototype={on(e,t){this.events.push(e.toLowerCase(),t)},fire(e,t){t=Array.prototype.slice.call(arguments),e=e.toLowerCase();let o=!1;for(let i=0;i<=this.events.length;i+=2)this.events[i]===e&&(o=!1===this.events[i+1].apply(this,t.slice(1))||o),"catchall"===this.events[i]&&(o=!1===this.events[i+1].apply(null,t)||o);return!o},webkitReadDataTransfer(e){const t=this;let o=e.dataTransfer.items.length;const i=[];function a(e){o+=e.length,n(e,e=>{if(e.isFile){const t=e.fullPath;e.file(e=>{s(e,t)},r)}else e.isDirectory&&e.createReader().readEntries(a,r)}),c()}function s(e,t){e.relativePath=t.substring(1),i.push(e),c()}function r(e){throw e}function c(){0==--o&&t.addFiles(i,e)}n(e.dataTransfer.items,e=>{const t=e.webkitGetAsEntry();t&&(t.isFile?s(e.getAsFile(),t.fullPath):t.createReader().readEntries(a,r))})},generateUniqueIdentifier(e){const t=this.opts.generateUniqueIdentifier;if("function"===typeof t)return t(e);const o=e.relativePath||e.webkitRelativePath||e.fileName||e.name;return`${e.size}-${o.replace(/[^0-9a-zA-Z_-]/gim,"")}`},uploadNextChunk(e){let t=!1;if(this.opts.prioritizeFirstAndLastChunk&&(n(this.files,e=>!e.paused&&e.chunks.length&&"pending"===e.chunks[0].status()&&0===e.chunks[0].preprocessState?(e.chunks[0].send(),t=!0,!1):!e.paused&&e.chunks.length>1&&"pending"===e.chunks[e.chunks.length-1].status()&&0===e.chunks[0].preprocessState?(e.chunks[e.chunks.length-1].send(),t=!0,!1):void 0),t))return t;if(n(this.files,e=>{if(e.paused||n(e.chunks,e=>{if("pending"===e.status()&&0===e.preprocessState)return e.send(),t=!0,!1}),t)return!1}),t)return!0;let o=!1;return n(this.files,e=>{if(!e.isComplete())return o=!0,!1}),o||e||this.fire("complete"),!1},assignBrowse(e,o,i){"undefined"===typeof e.length&&(e=[e]),n(e,(function(e){let a;"INPUT"===e.tagName&&"file"===e.type?a=e:(a=t.createElement("input"),a.setAttribute("type","file"),r(e.style,{display:"block",position:"relative",overflow:"hidden",verticalAlign:"top"}),r(a.style,{position:"absolute",top:0,right:0,fontFamily:"Arial",fontSize:"118px",margin:0,padding:0,opacity:0,cursor:"pointer"}),e.appendChild(a)),this.opts.singleFile||i||a.setAttribute("multiple","multiple"),o&&a.setAttribute("webkitdirectory","webkitdirectory");const s=this;a.addEventListener("change",e=>{s.addFiles(e.target.files,e),e.target.value=""},!1)}),this)},assignDrop(e){"undefined"===typeof e.length&&(e=[e]),n(e,(function(e){e.addEventListener("dragover",this.preventEvent,!1),e.addEventListener("dragenter",this.preventEvent,!1),e.addEventListener("drop",this.onDrop,!1)}),this)},unAssignDrop(e){"undefined"===typeof e.length&&(e=[e]),n(e,(function(e){e.removeEventListener("dragover",this.preventEvent),e.removeEventListener("dragenter",this.preventEvent),e.removeEventListener("drop",this.onDrop)}),this)},isUploading(){let e=!1;return n(this.files,t=>{if(t.isUploading())return e=!0,!1}),e},upload(){if(this.isUploading())return;this.fire("uploadStart");let e=!1;for(let t=1;t<=this.opts.simultaneousUploads;t++)e=this.uploadNextChunk(!0)||e;e||this.fire("complete")},resume(){n(this.files,e=>{e.resume()})},pause(){n(this.files,e=>{e.pause()})},cancel(){for(let e=this.files.length-1;e>=0;e--)this.files[e].cancel()},progress(){let e=0,t=0;return n(this.files,o=>{e+=o.progress()*o.size,t+=o.size}),t>0?e/t:0},addFile(e,t){this.addFiles([e],t)},addFiles(e,t){const o=[];n(e,(function(e){if((e.size%4096!==0||"."!==e.name&&"."!==e.fileName)&&!this.getFromUniqueIdentifier(this.generateUniqueIdentifier(e))){const i=new a(this,e);this.fire("fileAdded",i,t)&&o.push(i)}}),this),this.fire("filesAdded",o,t)&&n(o,(function(e){this.opts.singleFile&&this.files.length>0&&this.removeFile(this.files[0]),this.files.push(e)}),this),this.fire("filesSubmitted",o,t)},removeFile(e){for(let t=this.files.length-1;t>=0;t--)this.files[t]===e&&(this.files.splice(t,1),e.abort())},getFromUniqueIdentifier(e){let t=!1;return n(this.files,o=>{o.uniqueIdentifier===e&&(t=o)}),t},getSize(){let e=0;return n(this.files,t=>{e+=t.size}),e}},a.prototype={measureSpeed(){const e=this.flowObj.opts.speedSmoothingFactor,t=Date.now()-this._lastProgressCallback,o=this.sizeUploaded();this.currentSpeed=Math.max((o-this._prevUploadedSize)/t*1e3,0),this.averageSpeed=e*this.currentSpeed+(1-e)*this.averageSpeed,this._prevUploadedSize=o},chunkEvent(e,t){switch(e){case"progress":if(Date.now()-this._lastProgressCallback<this.flowObj.opts.progressCallbacksInterval)break;this.measureSpeed(),this.flowObj.fire("fileProgress",this),this.flowObj.fire("progress"),this._lastProgressCallback=Date.now();break;case"error":this.error=!0,this.abort(!0),this.flowObj.fire("fileError",this,t),this.flowObj.fire("error",t,this);break;case"success":if(this.error)return;this.flowObj.fire("fileProgress",this),this.flowObj.fire("progress"),this.isComplete()&&this.flowObj.fire("fileSuccess",this,t);break;case"retry":this.flowObj.fire("fileRetry",this);break}},pause(){this.paused=!0,this.abort()},resume(){this.paused=!1,this.flowObj.upload()},abort(e){this.currentSpeed=0,this.averageSpeed=0;const t=this.chunks;e&&(this.chunks=[]),n(t,(function(e){"uploading"===e.status()&&(e.abort(),this.flowObj.uploadNextChunk())}),this)},cancel(){this.flowObj.removeFile(this)},retry(){this.bootstrap(),this.flowObj.upload()},bootstrap(){this.abort(!0),this.error=!1,this._prevProgress=0;const e=this.flowObj.opts.forceChunkSize?Math.ceil:Math.floor,t=Math.max(e(this.file.size/this.flowObj.opts.chunkSize),1);for(let o=0;o<t;o++)this.chunks.push(new s(this.flowObj,this,o))},progress(){if(this.error)return 1;if(1===this.chunks.length)return this._prevProgress=Math.max(this._prevProgress,this.chunks[0].progress()),this._prevProgress;let e=0;n(this.chunks,t=>{e+=t.progress()*(t.endByte-t.startByte)});const t=e/this.size;return this._prevProgress=Math.max(this._prevProgress,t>.999?1:t),this._prevProgress},isUploading(){let e=!1;return n(this.chunks,t=>{if("uploading"===t.status())return e=!0,!1}),e},isComplete(){let e=!1;return n(this.chunks,t=>{const o=t.status();if("pending"===o||"uploading"===o||1===t.preprocessState)return e=!0,!1}),!e},sizeUploaded(){let e=0;return n(this.chunks,t=>{"success"===t.status()?e+=t.endByte-t.startByte:e+=t.loaded}),e},timeRemaining(){return this.averageSpeed?Math.floor(Math.max(this.size-this.sizeUploaded(),0)/this.averageSpeed):0},getType(){return this.file.type&&this.file.type.split("/")[1]},getExtension(){return this.name.substr(2+(~-this.name.lastIndexOf(".")>>>0)).toLowerCase()}},s.prototype={getParams(){return{flowChunkNumber:this.offset+1,flowChunkSize:this.flowObj.opts.chunkSize,flowCurrentChunkSize:this.endByte-this.startByte,flowTotalSize:this.fileObjSize,flowIdentifier:this.fileObj.uniqueIdentifier,flowFilename:this.fileObj.name,flowRelativePath:this.fileObj.relativePath,flowTotalChunks:this.fileObj.chunks.length}},getTarget(e){let t=this.flowObj.opts.target;return t.indexOf("?")<0?t+="?":t+="&",t+e.join("&")},test(){this.xhr=new XMLHttpRequest,this.xhr.addEventListener("load",this.testHandler,!1),this.xhr.addEventListener("error",this.testHandler,!1);const e=this.prepareXhrRequest("GET");this.xhr.send(e)},preprocessFinished(){this.preprocessState=2,this.send()},send(){const e=this.flowObj.opts.preprocess;if("function"===typeof e)switch(this.preprocessState){case 0:return e(this),void(this.preprocessState=1);case 1:return;case 2:break}if(this.flowObj.opts.testChunks&&!this.tested)return void this.test();this.loaded=0,this.total=0,this.pendingRetry=!1;const t=this.fileObj.file.slice?"slice":this.fileObj.file.mozSlice?"mozSlice":this.fileObj.file.webkitSlice?"webkitSlice":"slice",o=this.fileObj.file[t](this.startByte,this.endByte);this.xhr=new XMLHttpRequest,this.xhr.upload.addEventListener("progress",this.progressHandler,!1),this.xhr.addEventListener("load",this.doneHandler,!1),this.xhr.addEventListener("error",this.doneHandler,!1);const i=this.prepareXhrRequest("POST",this.flowObj.opts.method,o);this.xhr.send(i)},abort(){const e=this.xhr;this.xhr=null,e&&e.abort()},status(){return this.pendingRetry?"uploading":this.xhr?this.xhr.readyState<4?"uploading":200==this.xhr.status?"success":this.flowObj.opts.permanentErrors.indexOf(this.xhr.status)>-1||this.retries>=this.flowObj.opts.maxChunkRetries?"error":(this.abort(),"pending"):"pending"},message(){return this.xhr?this.xhr.responseText:""},progress(){if(this.pendingRetry)return 0;const e=this.status();return"success"===e||"error"===e?1:"pending"===e?0:this.total>0?this.loaded/this.total:0},prepareXhrRequest(e,t,o){let i=this.flowObj.opts.query;"function"===typeof i&&(i=i(this.fileObj,this)),i=r(this.getParams(),i);let a=this.flowObj.opts.target,s=null;if("GET"===e||"octet"===t){const e=[];n(i,(t,o)=>{e.push([encodeURIComponent(o),encodeURIComponent(t)].join("="))}),a=this.getTarget(e),s=o||null}else s=new FormData,n(i,(e,t)=>{s.append(t,e)}),s.append(this.flowObj.opts.fileParameterName,o);return this.xhr.open(e,a),this.xhr.withCredentials=this.flowObj.opts.withCredentials,n(this.flowObj.opts.headers,(function(e,t){this.xhr.setRequestHeader(t,e)}),this),s}},i.extend=r,i.each=n,i.FlowFile=a,i.FlowChunk=s,e.Flow=i})(window,document),e.exports=window.Flow},"2b44":function(e,t,o){"use strict";o.r(t),o.d(t,"SmartDevices_PhotoResponseBlock",(function(){return k})),o.d(t,"install",(function(){return O}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"smart-devices-photo-response-block"},[t("base-block",{attrs:{block:e.block,"show-semantic-label":!1,"uses-default-contact-props-editor":e.usesDefaultContactPropsEditor,"uses-default-branching-editor":e.usesDefaultBranchingEditor},on:{handleBranchingTypeChangedToUnified:function(t){return e.handleBranchingTypeChangedToUnified({block:e.block})}}},[e._t("description",null,{slot:"description"}),e._t("resource-editors",(function(){return[t("per-language-resource-editor",{attrs:{block:e.block}})]}),{slot:"resource-editors"}),e._t("extras",null,{slot:"extras"}),e._t("vendor-extras",null,{slot:"vendor-extras"}),e._t("branching",null,{slot:"branching"}),e._t("contact-props",null,{slot:"contact-props"}),e._t("vendor",null,{slot:"vendor"})],2)],1)},a=[],s=o("2fe6"),r=o("9ab4"),n=o("4bb5"),c=o("1b40"),l=o("2ef0"),d=o("4004");const u="SmartDevices.PhotoResponse",b={...d["a"],async createWith({getters:e,dispatch:t},{props:o}){o.type=u;const i=await t("flow/flow_addBlankResourceForEnabledModesAndLangs",null,{root:!0});return o.config={prompt:i.uuid},d["a"].createWith({getters:e,dispatch:t},{props:o})}},p={...Object(l["cloneDeep"])(d["b"]),actions:b};var h=p,f=o("4a51"),v=o("af98"),_=o("2fe1");Object(n["e"])("flow");const g=Object(n["e"])("builder"),m=Object(n["e"])("flow/"+u);let k=class extends(Object(_["c"])(f["a"])){constructor(...e){super(...e),Object(s["a"])(this,"block",void 0),Object(s["a"])(this,"usesDefaultBranchingEditor",void 0),Object(s["a"])(this,"usesDefaultContactPropsEditor",void 0),Object(s["a"])(this,"isEditable",void 0),Object(s["a"])(this,"handleBranchingTypeChangedToUnified",void 0)}};Object(r["__decorate"])([Object(c["b"])()],k.prototype,"block",void 0),Object(r["__decorate"])([Object(c["b"])({default:!0})],k.prototype,"usesDefaultBranchingEditor",void 0),Object(r["__decorate"])([Object(c["b"])({default:!0})],k.prototype,"usesDefaultContactPropsEditor",void 0),Object(r["__decorate"])([g.Getter],k.prototype,"isEditable",void 0),Object(r["__decorate"])([m.Action],k.prototype,"handleBranchingTypeChangedToUnified",void 0),k=Object(r["__decorate"])([Object(c["a"])({})],k);var j=k;const O=Object(v["c"])(u,h);var y=j,w=o("2877"),C=Object(w["a"])(y,i,a,!1,null,null,null);t["default"]=C.exports},"2d61":function(e,t,o){"use strict";o.r(t),o.d(t,"MobilePrimitives_NumericResponseBlock",(function(){return O})),o.d(t,"install",(function(){return w}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"mobile-primitive-numeric-response-block"},[t("base-block",{attrs:{block:e.block,"show-semantic-label":!1,"uses-default-contact-props-editor":e.usesDefaultContactPropsEditor,"uses-default-branching-editor":e.usesDefaultBranchingEditor},on:{handleBranchingTypeChangedToUnified:function(t){return e.handleBranchingTypeChangedToUnified({block:e.block})}}},[e._t("description",null,{slot:"description"}),e._t("resource-editors",(function(){return[t("per-language-resource-editor",{attrs:{block:e.block}})]}),{slot:"resource-editors"}),e._t("extras",(function(){return[t("minimum-numeric-editor",{attrs:{block:e.block},on:{commitValidationMinimumChange:e.updateValidationMin}}),t("maximum-numeric-editor",{attrs:{block:e.block},on:{commitValidationMaximumChange:e.updateValidationMax}}),t("max-digit-editor",{attrs:{block:e.block,"has-ivr":e.hasVoiceMode},on:{commitMaxDigitsChange:e.updateMaxDigits}})]}),{slot:"extras"}),e._t("vendor-extras",null,{slot:"vendor-extras"}),e._t("branching",null,{slot:"branching"}),e._t("contact-props",null,{slot:"contact-props"}),e._t("vendor",null,{slot:"vendor"})],2)],1)},a=[],s=o("2fe6"),r=o("9ab4"),n=o("4bb5"),c=o("1b40"),l=o("2ef0"),d=o("4004");const u="MobilePrimitives.NumericResponse",b={...d["a"],async setValidationMinimum({commit:e},{blockId:t,value:o}){const i=""===o?void 0:o;return e("flow/block_updateConfigByKey",{blockId:t,key:"validation_minimum",value:i},{root:!0}),i},async setValidationMaximum({commit:e},{blockId:t,value:o}){const i=""===o?void 0:o;return e("flow/block_updateConfigByKey",{blockId:t,key:"validation_maximum",value:i},{root:!0}),i},async setMaxDigits({commit:e},{blockId:t,value:o}){const i=""===o?void 0:o;return e("flow/block_updateConfigByKey",{blockId:t,key:"ivr",value:{max_digits:i}},{root:!0}),i},async createWith({getters:e,dispatch:t,commit:o},{props:i}){i.type=u;const a=await t("flow/flow_addBlankResourceForEnabledModesAndLangs",null,{root:!0});return i.config={prompt:a.uuid,validation_minimum:void 0,validation_maximum:void 0},d["a"].createWith({getters:e,dispatch:t},{props:i})},async validateWithProgrammaticLogic({rootGetters:e},{block:t}){var o,i,a,s;console.debug("floip/NumericResponse/validateWithProgrammaticLogic()",""+t.type);const r=e["flow/hasVoiceMode"],n=[],[c,l]=p(null===(o=t.config)||void 0===o||null===(i=o.ivr)||void 0===i?void 0:i.max_digits),[d,u]=p(null===(a=t.config)||void 0===a?void 0:a.validation_maximum),[b,h]=p(null===(s=t.config)||void 0===s?void 0:s.validation_minimum),f=u&&h,v=f&&b>d,_=h&&!u,g="/config/validation_minimum",m="/config/validation_maximum",k="/config/ivr/max_digits";if((v||_)&&(n.push([g,"numeric-block-min-value-must-be-lower-than-max-value"]),n.push([m,"numeric-block-max-value-must-be-greater-than-min-value"])),!0===r&&(u||l||(n.push([k,"numeric-block-missing-max-value-and-max-digits"]),n.push([m,"numeric-block-missing-max-value-and-max-digits"])),l)){const e=10**c-1;h&&b>e&&(n.push([k,"numeric-block-min-value-must-be-lower-than-implied-max-digits"]),n.push([g,"numeric-block-min-value-must-be-lower-than-implied-max-digits"])),u&&d>e&&(n.push([k,"numeric-block-max-value-must-be-lower-than-implied-max-digits"]),n.push([m,"numeric-block-max-value-must-be-lower-than-implied-max-digits"]))}return n}};function p(e){let t=0,o=!1;return void 0!==e&&null!==e&&(o=!0,t="number"===typeof e?e:parseInt(e,10)),[t,o]}const h={...Object(l["cloneDeep"])(d["b"]),actions:b};var f=h,v=o("4a51"),_=o("af98"),g=o("2fe1");const m=Object(n["e"])("flow"),k=Object(n["e"])("flow/"+u),j=Object(n["e"])("builder");let O=class extends(Object(g["c"])(v["a"])){constructor(...e){super(...e),Object(s["a"])(this,"block",void 0),Object(s["a"])(this,"usesDefaultBranchingEditor",void 0),Object(s["a"])(this,"usesDefaultContactPropsEditor",void 0),Object(s["a"])(this,"hasVoiceMode",void 0),Object(s["a"])(this,"setValidationMinimum",void 0),Object(s["a"])(this,"setValidationMaximum",void 0),Object(s["a"])(this,"setMaxDigits",void 0),Object(s["a"])(this,"handleBranchingTypeChangedToUnified",void 0),Object(s["a"])(this,"isEditable",void 0)}updateValidationMin(e){this.setValidationMinimum({blockId:this.block.uuid,value:e})}updateValidationMax(e){this.setValidationMaximum({blockId:this.block.uuid,value:e})}updateMaxDigits(e){this.setMaxDigits({blockId:this.block.uuid,value:e})}};Object(r["__decorate"])([Object(c["b"])()],O.prototype,"block",void 0),Object(r["__decorate"])([Object(c["b"])({default:!0})],O.prototype,"usesDefaultBranchingEditor",void 0),Object(r["__decorate"])([Object(c["b"])({default:!0})],O.prototype,"usesDefaultContactPropsEditor",void 0),Object(r["__decorate"])([m.Getter],O.prototype,"hasVoiceMode",void 0),Object(r["__decorate"])([k.Action],O.prototype,"setValidationMinimum",void 0),Object(r["__decorate"])([k.Action],O.prototype,"setValidationMaximum",void 0),Object(r["__decorate"])([k.Action],O.prototype,"setMaxDigits",void 0),Object(r["__decorate"])([k.Action],O.prototype,"handleBranchingTypeChangedToUnified",void 0),Object(r["__decorate"])([j.Getter],O.prototype,"isEditable",void 0),O=Object(r["__decorate"])([Object(c["a"])({})],O);var y=O;const w=Object(_["c"])(u,f);var C=y,x=o("2877"),E=Object(x["a"])(C,i,a,!1,null,null,null);t["default"]=E.exports},"3005d":function(e,t,o){},3284:function(e,t,o){"use strict";o("0ddd")},"33da":function(e,t,o){"use strict";o("9a15")},"34c1":function(e,t,o){var i={"./1.0.0-rc1/flowSpecJsonSchema.json":"fc41","./1.0.0-rc2/flowSpecJsonSchema.json":"5a2e","./1.0.0-rc3/flowSpecJsonSchema.json":"29d3","./1.0.0-rc4/flowSpecJsonSchema.json":"9b2d","./current/flowSpecJsonSchema.json":"0eaa"};function a(e){var t=s(e);return o(t)}function s(e){if(!o.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=s,e.exports=a,a.id="34c1"},"3ef7":function(e,t,o){"use strict";o.r(t),o.d(t,"BaseBlock",(function(){return b}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"base-block"},[t("div",{staticClass:"block-editor-header remove-margin-left-right"},[t("h3",{staticClass:"put-back-margin-left-right"},[e._v(" "+e._s(e.trans("flow-builder."+e.block.type))+" ")])]),e._t("description"),t("fieldset",{attrs:{disabled:!e.isEditable}},[t("label-editor",{attrs:{block:e.block},on:{gearClicked:function(t){e.showSemanticLabel=!e.showSemanticLabel}}}),e.showSemanticLabel?t("semantic-label-editor",{attrs:{block:e.block}}):e._e(),t("name-editor",{attrs:{block:e.block}}),e._t("resource-editors"),t("hr"),e._t("extras"),e._t("vendor-extras"),e._t("branching",(function(){return[e.usesDefaultBranchingEditor?t("block-output-branching-config",{attrs:{block:e.block,"has-exit-per-choice":!1},on:{branchingTypeChangedToUnified:e.handleBranchingTypeChangedToUnified}}):e._e()]})),t("categorization",{attrs:{block:e.block}}),e._t("contact-props",(function(){return[e.usesDefaultContactPropsEditor?t("generic-contact-property-editor",{attrs:{block:e.block}}):e._e()]})),e._t("vendor"),t("hr"),t("first-block-editor-button",{attrs:{"block-id":e.block.uuid}})],2),t("block-id",{attrs:{block:e.block}})],2)},a=[],s=o("2fe6"),r=o("9ab4"),n=o("4bb5"),c=o("1b40"),l=o("4a51"),d=o("2fe1");const u=Object(n["e"])("builder");let b=class extends(Object(d["c"])(l["a"])){constructor(...e){super(...e),Object(s["a"])(this,"block",void 0),Object(s["a"])(this,"usesDefaultBranchingEditor",void 0),Object(s["a"])(this,"usesDefaultContactPropsEditor",void 0),Object(s["a"])(this,"showSemanticLabel",void 0),Object(s["a"])(this,"isEditable",void 0)}handleBranchingTypeChangedToUnified(){this.$emit("handleBranchingTypeChangedToUnified")}};Object(r["__decorate"])([Object(c["b"])()],b.prototype,"block",void 0),Object(r["__decorate"])([Object(c["b"])({default:!0})],b.prototype,"usesDefaultBranchingEditor",void 0),Object(r["__decorate"])([Object(c["b"])({default:!0})],b.prototype,"usesDefaultContactPropsEditor",void 0),Object(r["__decorate"])([Object(c["b"])({default:!1})],b.prototype,"showSemanticLabel",void 0),Object(r["__decorate"])([u.Getter],b.prototype,"isEditable",void 0),b=Object(r["__decorate"])([Object(c["a"])({})],b);var p=b,h=p,f=o("2877"),v=Object(f["a"])(h,i,a,!1,null,null,null);t["default"]=v.exports},4004:function(e,t,o){"use strict";o.d(t,"c",(function(){return r})),o.d(t,"d",(function(){return n})),o.d(t,"a",(function(){return c}));var i=o("2ef0"),a=o("d3a4"),s=o("4a51");const r={primaryExitTest:()=>e=>{}},n={},c={async createWith({getters:e,dispatch:t},{props:o}){const a={vendor_metadata:await t("initiateExtraVendorConfig")},s={type:"",name:"",label:"",semantic_label:"",config:{},tags:[],vendor_metadata:{floip:{ui_metadata:{branching_type:"UNIFIED",should_auto_update_name:!0}}}},r=Object(i["defaultsDeep"])({},a,o,s);return void 0===(null===o||void 0===o?void 0:o.exits)&&(r.exits=await Promise.all((await t("flow/block_generateExitsBasedOnUiConfig",{blockType:o.type,primaryExitTest:e.primaryExitTest(r)},{root:!0})).map(async e=>({...e,vendor_metadata:await t("initiateExtraVendorExitMetadata",{exit:e})})))),r},async handleBranchingTypeChangedToUnified({dispatch:e,getters:t,rootGetters:o},{block:i}){!0===o["flow/block_shouldHave2Exits"](i.type)?await e("flow/block_resetBranchingExitsByCollapsingNonDefault",{blockId:i.uuid,primaryExitTest:t.primaryExitTest(i)},{root:!0}):await e("flow/block_resetBranchingExitsToDefaultOnly",{blockId:i.uuid},{root:!0})},async initiateExtraVendorConfig(e){return{}},async initiateExtraVendorExitMetadata(e,{exit:t}){return{}},async validateBlockWithCustomJsonSchema(e,{block:t,schemaVersion:o}){return console.debug("floip/BaseBlockStore/validateBlockWithCustomJsonSchema()",""+t.type),Object(a["a"])({block:t,schemaVersion:o})},async validateWithProgrammaticLogic(e,{block:t}){return console.debug("floip/BaseBlockStore/validateWithProgrammaticLogic()",""+t.type),[]},async validate({dispatch:e},{block:t,schemaVersion:o}){var i,a,r;console.debug("floip/BaseBlockStore/validate()",""+t.type);const n=await e("validateBlockWithCustomJsonSchema",{block:t,schemaVersion:o}),c=new Set(null===(i=n.ajvErrors)||void 0===i?void 0:i.map(e=>e.dataPath)),l=await e("validateWithProgrammaticLogic",{block:t});return l.forEach(([e,t])=>{c.has(e)||(c.add(e),n.ajvErrors=n.ajvErrors||[],n.ajvErrors.push({dataPath:e,message:s["a"].trans("flow-builder-validation."+t)}))}),(null!==(a=null===(r=n.ajvErrors)||void 0===r?void 0:r.length)&&void 0!==a?a:0)>0&&(n.isValid=!1),n},async maybeHandleAnotherBlockChange(e,{thisBlock:t,oldBlock:o,newBlock:i}){}},l={namespaced:!0,getters:r,mutations:n,actions:c};t["b"]=l},"419a":function(e,t,o){"use strict";o("1fd2")},"41bd":function(e,t,o){"use strict";o.r(t),o.d(t,"Core_LogBlock",(function(){return k})),o.d(t,"install",(function(){return O}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"core-log-block"},[t("base-block",{attrs:{block:e.block,"show-semantic-label":!1,"uses-default-contact-props-editor":e.usesDefaultContactPropsEditor,"uses-default-branching-editor":e.usesDefaultBranchingEditor},on:{handleBranchingTypeChangedToUnified:function(t){return e.handleBranchingTypeChangedToUnified({block:e.block})}}},[e._t("description",null,{slot:"description"}),e._t("resource-editors",null,{slot:"resource-editors"}),e._t("extras",(function(){return[t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/config/message`},scopedSlots:e._u([{key:"input-control",fn:function({isValid:o}){return[t("expression-input",{attrs:{label:e._f("trans")("flow-builder.log-message"),placeholder:e._f("trans")("flow-builder.enter-message"),"current-expression":e.value,"valid-state":o},on:{commitExpressionChange:e.commitMessageChange}})]}}])})]}),{slot:"extras"}),e._t("vendor-extras",null,{slot:"vendor-extras"}),e._t("branching",null,{slot:"branching"}),e._t("contact-props",null,{slot:"contact-props"}),e._t("vendor",null,{slot:"vendor"})],2)],1)},a=[],s=o("2fe6"),r=o("9ab4"),n=o("4bb5"),c=o("1b40"),l=o("2ef0"),d=o("4004");const u="Core.Log",b={...d["a"],async editMessage({commit:e},{blockId:t,message:o}){return e("flow/block_updateConfigByKey",{blockId:t,key:"message",value:o},{root:!0}),o},async createWith({getters:e,dispatch:t},{props:o}){return o.type=u,o.config={message:""},d["a"].createWith({getters:e,dispatch:t},{props:o})}},p={...Object(l["cloneDeep"])(d["b"]),actions:b};var h=p,f=o("af98"),v=o("4a51"),_=o("2fe1");const g=Object(n["e"])("flow/"+u),m=Object(n["e"])("builder");let k=class extends(Object(_["c"])(v["a"])){constructor(...e){super(...e),Object(s["a"])(this,"block",void 0),Object(s["a"])(this,"usesDefaultBranchingEditor",void 0),Object(s["a"])(this,"usesDefaultContactPropsEditor",void 0),Object(s["a"])(this,"editMessage",void 0),Object(s["a"])(this,"handleBranchingTypeChangedToUnified",void 0),Object(s["a"])(this,"isEditable",void 0)}get value(){return this.block.config.message||""}commitMessageChange(e){return this.editMessage({blockId:this.block.uuid,message:e})}};Object(r["__decorate"])([Object(c["b"])()],k.prototype,"block",void 0),Object(r["__decorate"])([Object(c["b"])({default:!0})],k.prototype,"usesDefaultBranchingEditor",void 0),Object(r["__decorate"])([Object(c["b"])({default:!1})],k.prototype,"usesDefaultContactPropsEditor",void 0),Object(r["__decorate"])([g.Action],k.prototype,"editMessage",void 0),Object(r["__decorate"])([g.Action],k.prototype,"handleBranchingTypeChangedToUnified",void 0),Object(r["__decorate"])([m.Getter],k.prototype,"isEditable",void 0),k=Object(r["__decorate"])([Object(c["a"])({})],k);var j=k;const O=Object(f["c"])(u,h);var y=j,w=o("2877"),C=Object(w["a"])(y,i,a,!1,null,null,null);t["default"]=C.exports},"453a":function(e,t,o){},4678:function(e,t,o){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf755","./tlh.js":"cf755","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(e){var t=s(e);return o(t)}function s(e){if(!o.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=s,e.exports=a,a.id="4678"},"4a51":function(e,t,o){"use strict";(function(e){o.d(t,"b",(function(){return d}));var i=o("9ab4"),a=o("a026"),s=o("1b40");const r=e,n=(e,t)=>r.Lang?r.Lang[e].apply(r.Lang,t):t[0],c=e=>function(){return n(e,arguments)};let l=class extends a["default"]{trans(e,t){return r.Lang.trans(e,t)}static trans(e,t){return r.Lang.trans(e,t)}transIf(e,t){return e?this.trans(t):""}};l=Object(i["__decorate"])([Object(s["a"])({filters:{trans:c("trans"),choice:c("choice")}})],l),t["a"]=l;const d=l}).call(this,o("c8ba"))},"4aa1":function(e,t,o){},"4f90":function(e,t,o){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tech-error-notification"},e._l(e.validationErrors,(function(o,i){return t("div",{key:i},[t("h6",[t("b",[e._v("#"+e._s(i+1)+" ")]),t("b",[e._v(e._s(e.trans("flow-builder.location")))]),e._v(": "+e._s(o.dataPath)+", "),t("b",[e._v(e._s(e.trans("flow-builder.message")))]),e._v(": "+e._s(o.message)+" "),t("a",{attrs:{"aria-controls":`collapse_${e.errorType}_${i}`,href:`#collapse_${e.errorType}_${i}`,"aria-expanded":"false","data-toggle":"collapse",role:"button"}},[e._v(" See details ")])]),t("div",{staticClass:"collapse",attrs:{id:`collapse_${e.errorType}_${i}`}},[t("div",{staticClass:"card card-body"},[e._v(" "+e._s(o)+" ")])])])})),0)},a=[],s=o("4a51"),r={name:"TechErrorNotifications",props:{validationErrors:{type:Array,required:!0},errorType:{type:String,required:!0}},mixins:[s["a"]]},n=r,c=o("2877"),l=Object(c["a"])(n,i,a,!1,null,"272df386",null);t["a"]=l.exports},5108:function(e,t,o){"use strict";o("6fe9")},5157:function(e,t,o){"use strict";o.d(t,"b",(function(){return f})),o.d(t,"c",(function(){return v})),o.d(t,"a",(function(){return _})),o.d(t,"d",(function(){return g})),o.d(t,"e",(function(){return m}));var i=o("a026"),a=o("bc3a"),s=o.n(a),r=o("9300"),n=o("31aa"),c=o("c1df"),l=o.n(c),d=o("2ef0"),u=o("02be"),b=o("af98"),p=o("244b"),h=o("90d2");const f={activeFlow:e=>{var t;if(null!==(t=e.flows)&&void 0!==t&&t.length)try{return Object(r["getActiveFlowFrom"])(e)}catch(o){return}},blockUuidsOnActiveFlow:(e,t)=>{var o;return null===(o=t.activeFlow)||void 0===o?void 0:o.blocks},isActiveFlowValid:(e,t,o)=>{const i=Object(d["get"])(o.validation.validationStatuses,"flow/"+t.activeFlow.uuid);return!(i&&!i.isValid)&&Object(d["every"])(t.activeFlow.blocks,e=>{const t=Object(d["get"])(o.validation.validationStatuses,"block/"+e.uuid);return null==t||t.isValid})},isActiveFlowConsideredValidOnCreationForm:(e,t,o)=>{var i;const a=Object(d["get"])(o.validation.validationStatuses,"flow/"+t.activeFlow.uuid);return Boolean(t.isActiveFlowValid)||Boolean(a)&&1===(null===(i=a.ajvErrors)||void 0===i?void 0:i.length)},activeFlowContainer:e=>({isCreated:e.isCreated,specification_version:e.specification_version,uuid:e.container_uuid,name:"TODO",description:"TODO",vendor_metadata:{},flows:e.flows}),hasTextMode:(e,t)=>[r["SupportedMode"].USSD,r["SupportedMode"].SMS].some(e=>Object(d["includes"])(t.activeFlow.supported_modes||[],e)),hasVoiceMode:(e,t)=>Object(d["includes"])(t.activeFlow.supported_modes||[],r["SupportedMode"].IVR),hasOfflineMode:(e,t)=>Object(d["includes"])(t.activeFlow.supported_modes||[],r["SupportedMode"].OFFLINE),currentFlowsState:e=>e},v={flow_setFlowContainer(e,t){const o=t;e.isCreated=o.isCreated,e.flows=o.flows},flow_updateCreatedState(e,t){e.isCreated=t},flow_setActiveFlowId(e,{flowId:t}){e.first_flow_id=t},flow_addBlock(e,{flowId:t,block:o}){if(null==o)throw new r["ValidationException"]("Unable to add null block to flow");const i=Object(r["findFlowWith"])(t||e.first_flow_id||"",e),a=i.blocks.push(o);1===a&&(i.first_block_id=o.uuid)},flow_setExitBlockId(e,{flowId:t,blockId:o}){const i=Object(r["findFlowWith"])(t,e),a=Object(r["findBlockWith"])(o,i);i.exit_block_id=a.uuid},flow_setFirstBlockId(e,{flowId:t,blockId:o}){const a=Object(r["findFlowWith"])(t,e),s=Object(r["findBlockWith"])(o,a);i["default"].set(a,"first_block_id",s.uuid)},flow_setNameFromLabel(e,{flowId:t,label:o}){Object(r["findFlowWith"])(t,e).name=o.replace(/\W+/g,"")},flow_setLabel(e,{flowId:t,label:o}){Object(r["findFlowWith"])(t,e).label=o},flow_setInteractionTimeout(e,{flowId:t,value:o}){Object(r["findFlowWith"])(t,e).interaction_timeout=o},flow_setSupportedMode(e,{flowId:t,value:o}){const i=Object(r["findFlowWith"])(t,e);i.supported_modes=Object(d["castArray"])(o)},flow_setLanguages(e,{flowId:t,value:o}){const i=Object(r["findFlowWith"])(t,e);i.languages=Object(d["castArray"])(o)},flow_updateVendorMetadataByPath(e,{flowId:t,path:o,value:i}){Object(p["g"])(e,t,"vendor_metadata."+o,i)},flow_removeVendorMetadataByPath(e,{flowId:t,path:o}){Object(p["d"])(e,t,"vendor_metadata."+o)}},_={async flow_persistImport({getters:e,commit:t,dispatch:o},{persistRoute:i,flowContainer:a}){a=Object(h["f"])(Object(d["cloneDeep"])(e.activeFlowContainer),a);const r=a.isCreated?"put":"post",n=a.isCreated;if(!i)return console.info("Flow persistence route not configured correctly in builder.config.json. Falling back to vuex store"),t("flow_setFlowContainer",a),e.activeFlowContainer;try{const{data:{data:n}}=await s.a[r](i,{data:Object(d["omit"])(a,["isCreated"])});return t("flow_setFlowContainer",n),t("flow_updateCreatedState",!0),await o("validation/validate_allBlocksFromBackend",null,{root:!0}),e.activeFlowContainer}catch(u){var c,l;return console.error("Server error persisting flow:",u),t("flow_updateCreatedState",n),t("validation/pushAjvErrorToValidationStatuses",{key:"container_import",ajvError:{dataPath:"/container",keyword:"backend_error",message:null!==(c=null===(l=u.response.data)||void 0===l?void 0:l.error)&&void 0!==c?c:u.response.data}},{root:!0}),null}},async flow_persist({getters:e,rootGetters:t,commit:o,dispatch:i},{persistRoute:a,flowContainer:r}){const n=r.isCreated?"put":"post",c=r.isCreated;if(!a)return console.info("Flow persistence route not configured correctly in builder.config.json. Falling back to vuex store"),o("flow_setFlowContainer",r),e.activeFlowContainer;i("flow_removeOrphanedResourcesAndRelatedValidationsOnActiveFlow");try{const{data:{data:c}}=await s.a[n](a,{data:Object(d["omit"])(Object(u["a"])(r,t["validation/choiceMimeType"]),["isCreated"])});return o("flow_setFlowContainer",c),o("flow_updateCreatedState",!0),await i("validation/validate_allBlocksFromBackend",null,{root:!0}),e.activeFlowContainer}catch(l){return o("flow_updateCreatedState",c),console.error(`Server error persisting flow: "${Object(d["get"])(l,"response.data")}". Status: ${l.response.status}`),null}},async flow_fetch({getters:e,commit:t,dispatch:o},{fetchRoute:i}){if(!i)return console.info("Flow fetch route not configured correctly in builder.config.json. Falling back to vuex store"),e.activeFlow;try{const{data:{data:e}}=await s.a.get(i);return t("flow_setFlowContainer",e),t("flow_updateCreatedState",!0),await o("validation/validate_allBlocksFromBackend",null,{root:!0}),e}catch(a){return console.info(`Server error fetching flow: "${Object(d["get"])(a,"response.data")}". Status: ${a.response.status}`),null}},async flow_addBlankFlow({dispatch:e}){const t=await e("flow_createWith",{props:{uuid:await(new n["IdGeneratorUuidV4"]).generate()}});return e("flow_add",{flow:t})},async flow_add({state:e},{flow:t}){return e.flows.push(t),e.first_flow_id=t.uuid,t},flow_removeBlock({state:e,commit:t,dispatch:o},{flowId:i,blockId:a}){const s=Object(r["findFlowWith"])(i||e.first_flow_id||"",e),n=Object(r["findBlockWith"])(a,s);if(null==n)throw new r["ValidationException"]("Unable to delete block absent from flow");const{blocks:c}=s;c.splice(c.indexOf(n),1),t("validation/removeValidationStatusesFor",{key:"block/"+n.uuid},{root:!0}),o("flow_removeOrphanedResourcesAndRelatedValidationsOnActiveFlow"),s.first_block_id===a&&(s.first_block_id=c.length?c[0].uuid:""),s.exit_block_id===a&&(s.exit_block_id=void 0),Object(d["forEach"])(c,({exits:e})=>{const t=e.filter(e=>e.destination_block===a);Object(d["forEach"])(t,e=>{e.destination_block=void 0})}),t("builder/activateBlock",{blockId:null},{root:!0})},async flow_removeResourcesAndRelatedValidationsOnActiveFlow({commit:e,getters:t},{resourceUuids:o}){console.debug("trying to clean those resources:",o);const i=t.activeFlow;i.resources=i.resources.filter(e=>!o.includes(e.uuid)),o.forEach(t=>e("validation/removeValidationStatusesFor",{key:"resource/"+t},{root:!0}))},async flow_removeOrphanedResourcesAndRelatedValidationsOnActiveFlow({dispatch:e,getters:t}){await e("flow_removeResourcesAndRelatedValidationsOnActiveFlow",{resourceUuids:t.orphanResourceUuidsOnActiveFlow})},async flow_addBlankBlockByType({commit:e,dispatch:t},{type:o,...i}){const a=await t(`flow/${o}/createWith`,{props:{uuid:await(new n["IdGeneratorUuidV4"]).generate(),...i}},{root:!0});return Object(d["defaults"])(a,{label:void 0,semantic_label:void 0}),e("flow_addBlock",{block:a}),a},async flow_addBlankResource({dispatch:e}){const t=await e("resource_createWith",{props:{uuid:await(new n["IdGeneratorUuidV4"]).generate()}});return e("resource_add",{resource:t}),t},async flow_addBlankResourceForEnabledModesAndLangs({dispatch:e}){const t=await e("flow_createBlankResource");return e("resource_add",{resource:t}),t},async flow_createBlankResource({getters:e,dispatch:t}){const o=e.activeFlow,i=o.supported_modes,a=o.languages.map(e=>e.id),s=[];return a.forEach(e=>{i.forEach(t=>{var o;null===(o=Object(u["b"])(t))||void 0===o||o.forEach(o=>{s.push({language_id:e,value:"",content_type:o,modes:[t]})})})}),t("resource_createWith",{props:{uuid:await(new n["IdGeneratorUuidV4"]).generate(),values:s}})},async flow_updateResourceValues({getters:e,rootGetters:t,dispatch:o}){const i=e.activeFlow,a=i.resources,s=i.supported_modes,r=i.languages.map(e=>e.id),n=[];a.forEach(e=>{const t=e.values.filter(e=>{const t=!r.includes(e.language_id),o=0===Object(d["intersection"])(e.modes,s).length;return t||o});n.push(o("resource_removeVariants",{resourceId:e.uuid,variants:t}))}),a.filter(e=>e.values.every(e=>e.mime_type!==t["validation/choiceMimeType"])).forEach(e=>{s.forEach(t=>{r.forEach(i=>{const a=e.values.find(e=>e.language_id===i&&e.modes.includes(t));var s;void 0===a&&(console.warn(`Adding missing variant: lang ${i}, mode: ${t} for resource ${e.uuid}`),null===(s=Object(u["b"])(t))||void 0===s||s.forEach(a=>{n.push(o("resource_createVariant",{resourceId:e.uuid,variant:{content_type:a,language_id:i,modes:[t],value:""}}))}))})})}),await Promise.all(n)},async flow_createWith({rootState:e},{props:t}){return{...Object(d["defaults"])(t,{name:"",label:"",last_modified:l()().toISOString(),interaction_timeout:e.trees.ui.appWideInteractionTimeout,vendor_metadata:{},supported_modes:e.trees.ui.defaultModes,languages:[],blocks:[],first_block_id:"",resources:[]})}},async flow_duplicateBlock({commit:e,state:t,getters:o,dispatch:a},{flowId:s,blockId:c}){const l=Object(r["findFlowWith"])(s||t.first_flow_id||"",t),u=Object(r["findBlockWith"])(c,l),p=Object(d["cloneDeep"])(u);if(p.uuid=await(new n["IdGeneratorUuidV4"]).generate(),await Promise.all(p.exits.map(async e=>{e.uuid=await(new n["IdGeneratorUuidV4"]).generate(),delete e.destination_block})),Object(d["has"])(p.config,"prompt")){const e=p.config.prompt,t=await(new n["IdGeneratorUuidV4"]).generate(),s=Object(d["cloneDeep"])(o.resourcesByUuidOnActiveFlow[e]);s.uuid=t,a("resource_add",{resource:s}),i["default"].set(p.config,"prompt",t)}return Object(d["merge"])(p.ui_metadata,{canvas_coordinates:Object(b["b"])(u)}),e("flow_addBlock",{block:p}),p},async flow_clearMultiSelection({state:e,dispatch:t}){Object(d["forEach"])(e.selectedBlocks,e=>{t("block_deselect",{blockId:e})})},async flow_removeAllSelectedBlocks({state:e,dispatch:t}){Object(d["forEach"])(e.selectedBlocks,e=>{t("flow_removeBlock",{blockId:e})}),e.selectedBlocks=[]},async flow_duplicateAllSelectedBlocks({state:e,dispatch:t}){const o=[];Object(d["forEach"])(e.selectedBlocks,async e=>{const i=await t("flow_duplicateBlock",{blockId:e});o.push(i.uuid)}),e.selectedBlocks=o},async flow_updateModes({state:e,getters:t,commit:o,dispatch:i},{flowId:a,newModes:s}){const n=Object(r["findFlowWith"])(a,e);o("flow_setSupportedMode",{flowId:a,value:s}),await i("flow_updateResourceValues"),await i("validation/validate_allBlocksWithinFlow",null,{root:!0}),await i("validation/validate_resourcesOnSupportedValues",{resources:n.resources,supportedModes:n.supported_modes,supportedLanguages:n.languages},{root:!0})},async flow_updateLanguages({state:e,getters:t,commit:o,dispatch:i},{flowId:a,newLanguages:s}){const n=Object(r["findFlowWith"])(a,e),c=Object(d["clone"])(n.languages);o("flow_setLanguages",{flowId:a,value:s}),await i("flow_updateResourceValues"),await i("block_updateBlocksAfterLanguagesChange",{addedLanguageIds:Object(d["difference"])(s,c).map(e=>e.id),removedLanguageIds:Object(d["difference"])(c,s).map(e=>e.id)}),await i("validation/validate_allBlocksWithinFlow",null,{root:!0}),await i("validation/validate_resourcesOnSupportedValues",{resources:n.resources,supportedModes:n.supported_modes,supportedLanguages:n.languages},{root:!0})}};function g(e){return Object(d["sortBy"])(e,["label"])}function m(e){const t=[r["SupportedMode"].IVR,r["SupportedMode"].SMS,r["SupportedMode"].USSD,r["SupportedMode"].TEXT,r["SupportedMode"].RICH_MESSAGING,r["SupportedMode"].OFFLINE];return Object(d["sortBy"])(e,e=>t.indexOf(e))}},"52e6":function(e,t,o){"use strict";o("4aa1")},5379:function(e,t,o){},5599:function(e,t,o){},5801:function(e,t,o){"use strict";o.d(t,"a",(function(){return c}));var i=o("9300"),a=o("2ef0"),s=o("963c"),r=o("4004"),n=o("ecef");const c="MobilePrimitives.SelectManyResponse",l={...r["c"],primaryExitTest:()=>e=>{}},d={...r["a"],setMinChoices({commit:e,dispatch:t,rootGetters:o},{blockId:r,value:n}){const c=Object(i["findBlockWith"])(r,o["flow/activeFlow"]);e("flow/block_updateConfigByKey",{blockId:c.uuid,key:"minimum_choices",value:Object(a["isNumber"])(n)?n:void 0},{root:!0});const{vendor_metadata:l}=c,{UNIFIED:d}=s["a"];l.floip.ui_metadata.branching_type===d&&t("handleBranchingTypeChangedToUnified",{block:c})},setMaxChoices({commit:e,dispatch:t,rootGetters:o},{blockId:r,value:n}){const c=Object(i["findBlockWith"])(r,o["flow/activeFlow"]);e("flow/block_updateConfigByKey",{blockId:c.uuid,key:"maximum_choices",value:Object(a["isNumber"])(n)?n:void 0},{root:!0});const{vendor_metadata:l}=c,{UNIFIED:d}=s["a"];l.floip.ui_metadata.branching_type===d&&t("handleBranchingTypeChangedToUnified",{block:c})},async createWith({getters:e,dispatch:t},{props:o}){o.type=c;const i=await t("flow/flow_addBlankResourceForEnabledModesAndLangs",null,{root:!0});return o.config={prompt:i.uuid,choices:[],minimum_choices:void 0,maximum_choices:void 0},o.vendor_metadata={floip:{ui_metadata:{branching_type:s["a"].EXIT_PER_CHOICE,choices:{}}}},r["a"].createWith({getters:e,dispatch:t},{props:o})}},u={...Object(a["cloneDeep"])(n["b"]),actions:d,getters:l};t["b"]=u},"582b":function(e,t,o){"use strict";o("e955")},"59c3":function(e,t,o){"use strict";o.r(t),o.d(t,"SmartDevices_LocationResponseBlock",(function(){return k})),o.d(t,"install",(function(){return O}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"smart-devices-location-response-block"},[t("base-block",{attrs:{block:e.block,"show-semantic-label":!1,"uses-default-contact-props-editor":e.usesDefaultContactPropsEditor,"uses-default-branching-editor":e.usesDefaultBranchingEditor},on:{handleBranchingTypeChangedToUnified:function(t){return e.handleBranchingTypeChangedToUnified({block:e.block})}}},[e._t("description",null,{slot:"description"}),e._t("resource-editors",(function(){return[t("per-language-resource-editor",{attrs:{block:e.block}})]}),{slot:"resource-editors"}),e._t("extras",(function(){return[t("threshold-editor",{attrs:{block:e.block},on:{commitAccuracyThresholdMetersChange:e.updateThreshold}}),t("timeout-editor",{attrs:{block:e.block},on:{commitAccuracyTimeoutSecondsChange:e.updateTimeout}})]}),{slot:"extras"}),e._t("vendor-extras",null,{slot:"vendor-extras"}),e._t("branching",null,{slot:"branching"}),e._t("contact-props",null,{slot:"contact-props"}),e._t("vendor",null,{slot:"vendor"})],2)],1)},a=[],s=o("2fe6"),r=o("9ab4"),n=o("4bb5"),c=o("1b40"),l=o("2ef0"),d=o("4004");const u="SmartDevices.LocationResponse",b={...d["a"],async setAccuracyThreshold({commit:e},{blockId:t,value:o}){return e("flow/block_updateConfigByKey",{blockId:t,key:"accuracy_threshold_meters",value:o},{root:!0}),o},async setAccuracyTimeout({commit:e},{blockId:t,value:o}){return e("flow/block_updateConfigByKey",{blockId:t,key:"accuracy_timeout_seconds",value:o},{root:!0}),o},async createWith({getters:e,dispatch:t},{props:o}){o.type=u;const i=await t("flow/flow_addBlankResourceForEnabledModesAndLangs",null,{root:!0});return o.config={prompt:i.uuid,accuracy_threshold_meters:5,accuracy_timeout_seconds:120},d["a"].createWith({getters:e,dispatch:t},{props:o})}},p={...Object(l["cloneDeep"])(d["b"]),actions:b};var h=p,f=o("4a51"),v=o("af98"),_=o("2fe1");Object(n["e"])("flow");const g=Object(n["e"])("flow/"+u),m=Object(n["e"])("builder");let k=class extends(Object(_["c"])(f["a"])){constructor(...e){super(...e),Object(s["a"])(this,"block",void 0),Object(s["a"])(this,"usesDefaultBranchingEditor",void 0),Object(s["a"])(this,"usesDefaultContactPropsEditor",void 0),Object(s["a"])(this,"setAccuracyThreshold",void 0),Object(s["a"])(this,"setAccuracyTimeout",void 0),Object(s["a"])(this,"handleBranchingTypeChangedToUnified",void 0),Object(s["a"])(this,"isEditable",void 0)}updateThreshold(e){this.setAccuracyThreshold({blockId:this.block.uuid,value:e})}updateTimeout(e){this.setAccuracyTimeout({blockId:this.block.uuid,value:e})}};Object(r["__decorate"])([Object(c["b"])()],k.prototype,"block",void 0),Object(r["__decorate"])([Object(c["b"])({default:!0})],k.prototype,"usesDefaultBranchingEditor",void 0),Object(r["__decorate"])([Object(c["b"])({default:!0})],k.prototype,"usesDefaultContactPropsEditor",void 0),Object(r["__decorate"])([g.Action],k.prototype,"setAccuracyThreshold",void 0),Object(r["__decorate"])([g.Action],k.prototype,"setAccuracyTimeout",void 0),Object(r["__decorate"])([g.Action],k.prototype,"handleBranchingTypeChangedToUnified",void 0),Object(r["__decorate"])([m.Getter],k.prototype,"isEditable",void 0),k=Object(r["__decorate"])([Object(c["a"])({})],k);var j=k;const O=Object(v["c"])(u,h);var y=j,w=o("2877"),C=Object(w["a"])(y,i,a,!1,null,null,null);t["default"]=C.exports},"5ac5":function(e,t,o){},"5b86":function(e,t,o){},"5c47":function(e,t,o){"use strict";o.r(t),o.d(t,"MobilePrimitives_SelectOneResponseBlock",(function(){return g})),o.d(t,"install",(function(){return k}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"mobile-primitives-select-one-response-block"},[t("base-block",{attrs:{block:e.block,"show-semantic-label":!1,"uses-default-contact-props-editor":e.usesDefaultContactPropsEditor,"uses-default-branching-editor":e.usesDefaultBranchingEditor},on:{handleBranchingTypeChangedToUnified:function(t){return e.handleBranchingTypeChangedToUnified({block:e.block})}}},[e._t("description",null,{slot:"description"}),e._t("resource-editors",(function(){return[t("per-language-resource-editor",{attrs:{block:e.block}})]}),{slot:"resource-editors"}),e._t("extras",(function(){return[t("choices-builder",{attrs:{block:e.block},on:{choiceChanged:e.handleChoiceChanged}})]}),{slot:"extras"}),e._t("vendor-extras",null,{slot:"vendor-extras"}),e._t("branching",(function(){return[t("block-output-branching-config",{attrs:{block:e.block,"has-exit-per-choice":!0,"label-class":""},on:{branchingTypeChanged:function(t){return e.reflowExitsWhenSwitchingToBranchingTypeNotUnified()}}})]}),{slot:"branching"}),e._t("contact-props",(function(){return[t("select-one-response-block-contact-property-editor",{attrs:{block:e.block}})]}),{slot:"contact-props"}),e._t("vendor",null,{slot:"vendor"})],2)],1)},a=[],s=o("2fe6"),r=o("9ab4"),n=o("9300"),c=o("4bb5"),l=o("1b40"),d=o("2ef0"),u=o("ecef"),b=o("4a51"),p=o("af98"),h=o("2fe1"),f=o("02be"),v=o("963c");Object(c["e"])("flow");const _=Object(c["e"])("flow/"+u["a"]);let g=class extends(Object(h["c"])(b["a"])){constructor(...e){super(...e),Object(s["a"])(this,"block",void 0),Object(s["a"])(this,"usesDefaultBranchingEditor",void 0),Object(s["a"])(this,"usesDefaultContactPropsEditor",void 0),Object(s["a"])(this,"SupportedMode",n["SupportedMode"]),Object(s["a"])(this,"findOrGenerateStubbedVariantOn",f["e"]),Object(s["a"])(this,"reflowExitsFromChoices",void 0),Object(s["a"])(this,"handleBranchingTypeChangedToUnified",void 0)}handleChoiceChanged(){const{uuid:e,vendor_metadata:{floip:{ui_metadata:{branching_type:t}}}}=this.block,{EXIT_PER_CHOICE:o,UNIFIED:i,ADVANCED:a}=v["a"];t===i?this.handleBranchingTypeChangedToUnified({block:this.block}):t===a||t===o?this.reflowExitsFromChoices({blockId:e}):console.error("handleChoiceChanged","cannot handle branching type "+t)}reflowExitsWhenSwitchingToBranchingTypeNotUnified(){const{uuid:e,vendor_metadata:t}=this.block,{EXIT_PER_CHOICE:o,ADVANCED:i}=v["a"],a=Object(d["includes"])([o,i],t.floip.ui_metadata.branching_type);a?this.reflowExitsFromChoices({blockId:e}):this.handleBranchingTypeChangedToUnified({block:this.block})}};Object(r["__decorate"])([Object(l["b"])()],g.prototype,"block",void 0),Object(r["__decorate"])([Object(l["b"])({default:!1})],g.prototype,"usesDefaultBranchingEditor",void 0),Object(r["__decorate"])([Object(l["b"])({default:!0})],g.prototype,"usesDefaultContactPropsEditor",void 0),Object(r["__decorate"])([_.Action],g.prototype,"reflowExitsFromChoices",void 0),Object(r["__decorate"])([_.Action],g.prototype,"handleBranchingTypeChangedToUnified",void 0),g=Object(r["__decorate"])([Object(l["a"])({})],g);var m=g;const k=Object(p["c"])(u["a"],u["b"]);var j=m,O=o("2877"),y=Object(O["a"])(j,i,a,!1,null,null,null);t["default"]=y.exports},"5dcb":function(e,t,o){"use strict";o.r(t),o.d(t,"Core_OutputBlock",(function(){return k})),o.d(t,"install",(function(){return O}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"core-output-block"},[t("base-block",{attrs:{block:e.block,"show-semantic-label":!1,"uses-default-contact-props-editor":e.usesDefaultContactPropsEditor,"uses-default-branching-editor":e.usesDefaultBranchingEditor},on:{handleBranchingTypeChangedToUnified:function(t){return e.handleBranchingTypeChangedToUnified({block:e.block})}}},[e._t("description",null,{slot:"description"}),e._t("resource-editors",null,{slot:"resource-editors"}),e._t("extras",(function(){return[t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/config/value`},scopedSlots:e._u([{key:"input-control",fn:function({isValid:o}){return[t("expression-input",{attrs:{label:e.trans("flow-builder.output-expression"),placeholder:e.trans("flow-builder.enter-expression"),"current-expression":e.value,"valid-state":o,rows:e.expressionEditorRows},on:{commitExpressionChange:e.commitExpressionChange}})]}}])})]}),{slot:"extras"}),e._t("vendor-extras",null,{slot:"vendor-extras"}),e._t("branching",null,{slot:"branching"}),e._t("contact-props",null,{slot:"contact-props"}),e._t("vendor",null,{slot:"vendor"})],2)],1)},a=[],s=o("2fe6"),r=o("9ab4"),n=o("4bb5"),c=o("1b40"),l=o("2ef0"),d=o("4004");const u="Core.Output",b={...d["a"],async editOutputExpression({commit:e},{blockId:t,value:o}){return e("flow/block_updateConfigByKey",{blockId:t,key:"value",value:o},{root:!0}),o},async createWith({getters:e,dispatch:t},{props:o}){return o.type=u,o.config={value:"@"},d["a"].createWith({getters:e,dispatch:t},{props:o})}},p={...Object(l["cloneDeep"])(d["b"]),actions:b};var h=p,f=o("4a51"),v=o("af98"),_=o("2fe1");const g=Object(n["e"])("flow/"+u),m=Object(n["e"])("builder");let k=class extends(Object(_["c"])(f["a"])){constructor(...e){super(...e),Object(s["a"])(this,"block",void 0),Object(s["a"])(this,"usesDefaultBranchingEditor",void 0),Object(s["a"])(this,"usesDefaultContactPropsEditor",void 0),Object(s["a"])(this,"expressionEditorRows",void 0),Object(s["a"])(this,"editOutputExpression",void 0),Object(s["a"])(this,"handleBranchingTypeChangedToUnified",void 0),Object(s["a"])(this,"isEditable",void 0)}get value(){return this.block.config.value||""}commitExpressionChange(e){return this.editOutputExpression({blockId:this.block.uuid,value:e})}};Object(r["__decorate"])([Object(c["b"])()],k.prototype,"block",void 0),Object(r["__decorate"])([Object(c["b"])({default:!0})],k.prototype,"usesDefaultBranchingEditor",void 0),Object(r["__decorate"])([Object(c["b"])({default:!0})],k.prototype,"usesDefaultContactPropsEditor",void 0),Object(r["__decorate"])([Object(c["b"])({type:Number,default:1})],k.prototype,"expressionEditorRows",void 0),Object(r["__decorate"])([g.Action],k.prototype,"editOutputExpression",void 0),Object(r["__decorate"])([g.Action],k.prototype,"handleBranchingTypeChangedToUnified",void 0),Object(r["__decorate"])([m.Getter],k.prototype,"isEditable",void 0),k=Object(r["__decorate"])([Object(c["a"])({})],k);var j=k;const O=Object(v["c"])(u,h);var y=j,w=o("2877"),C=Object(w["a"])(y,i,a,!1,null,null,null);t["default"]=C.exports},"5e0c":function(e,t,o){"use strict";o("7d18")},"5e0f":function(e,t,o){"use strict";o("0224")},"5e2b":function(e,t,o){"use strict";o("c9c6")},"5eb7":function(e,t,o){"use strict";o("8cf7")},"5f15":function(e,t,o){},"5fb3":function(e,t,o){"use strict";o("5f15")},"64bb":function(e,t,o){"use strict";o.r(t),o.d(t,"install",(function(){return y}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"mobile-primitive-open-response-block"},[t("base-block",{attrs:{block:e.block,"show-semantic-label":!1,"uses-default-contact-props-editor":e.usesDefaultContactPropsEditor,"uses-default-branching-editor":e.usesDefaultBranchingEditor},on:{handleBranchingTypeChangedToUnified:function(t){return e.handleBranchingTypeChangedToUnified({block:e.block})}}},[e._t("description",null,{slot:"description"}),e._t("resource-editors",(function(){return[t("per-language-resource-editor",{attrs:{block:e.block}})]}),{slot:"resource-editors"}),e._t("extras",(function(){return[t("max-duration-seconds-editor",{attrs:{block:e.block,"has-ivr":e.hasVoiceMode},on:{commitMaxDurationChange:e.setMaxDurationSeconds}}),t("end-recording-digits-editor",{attrs:{block:e.block,"has-ivr":e.hasVoiceMode},on:{commitEndRecordingDigitsChange:e.setEndRecordingDigits}})]}),{slot:"extras"}),e._t("vendor-extras",null,{slot:"vendor-extras"}),e._t("branching",null,{slot:"branching"}),e._t("contact-props",null,{slot:"contact-props"}),e._t("vendor",null,{slot:"vendor"})],2)],1)},a=[],s=o("2fe6"),r=o("9ab4"),n=o("4bb5"),c=o("1b40"),l=o("2ef0"),d=o("4004");const u="MobilePrimitives.OpenResponse",b={...d["a"],async setMaxDurationSeconds({commit:e,rootGetters:t},o){const i=t["builder/activeBlock"];e("flow/block_updateConfigByPath",{blockId:i.uuid,path:"ivr.max_duration_seconds",value:o},{root:!0})},async setEndRecordingDigits({commit:e,rootGetters:t},o){const i=t["builder/activeBlock"];e("flow/block_updateConfigByPath",{blockId:i.uuid,path:"ivr.end_recording_digits",value:o},{root:!0})},async createWith({getters:e,dispatch:t,commit:o},{props:i}){i.type=u;const a=await t("flow/flow_addBlankResourceForEnabledModesAndLangs",null,{root:!0});return i.config={prompt:a.uuid},d["a"].createWith({getters:e,dispatch:t},{props:i})}},p={...Object(l["cloneDeep"])(d["b"]),actions:b};var h=p,f=o("4a51"),v=o("af98"),_=o("2fe1");const g=Object(n["e"])("flow"),m=Object(n["e"])("flow/"+u),k=Object(n["e"])("builder");let j=class extends(Object(_["c"])(f["a"])){constructor(...e){super(...e),Object(s["a"])(this,"block",void 0),Object(s["a"])(this,"usesDefaultBranchingEditor",void 0),Object(s["a"])(this,"usesDefaultContactPropsEditor",void 0),Object(s["a"])(this,"hasTextMode",void 0),Object(s["a"])(this,"hasVoiceMode",void 0),Object(s["a"])(this,"setMaxDurationSeconds",void 0),Object(s["a"])(this,"setEndRecordingDigits",void 0),Object(s["a"])(this,"handleBranchingTypeChangedToUnified",void 0),Object(s["a"])(this,"isEditable",void 0)}};Object(r["__decorate"])([Object(c["b"])()],j.prototype,"block",void 0),Object(r["__decorate"])([Object(c["b"])({default:!0})],j.prototype,"usesDefaultBranchingEditor",void 0),Object(r["__decorate"])([Object(c["b"])({default:!0})],j.prototype,"usesDefaultContactPropsEditor",void 0),Object(r["__decorate"])([g.Getter],j.prototype,"hasTextMode",void 0),Object(r["__decorate"])([g.Getter],j.prototype,"hasVoiceMode",void 0),Object(r["__decorate"])([m.Action],j.prototype,"setMaxDurationSeconds",void 0),Object(r["__decorate"])([m.Action],j.prototype,"setEndRecordingDigits",void 0),Object(r["__decorate"])([m.Action],j.prototype,"handleBranchingTypeChangedToUnified",void 0),Object(r["__decorate"])([k.Getter],j.prototype,"isEditable",void 0),j=Object(r["__decorate"])([Object(c["a"])({})],j);var O=j;const y=Object(v["c"])(u,h);var w=O,C=o("2877"),x=Object(C["a"])(w,i,a,!1,null,null,null);t["default"]=x.exports},"655a":function(e,t,o){"use strict";o("89e5")},"6a23":function(e,t,o){"use strict";o("23d6")},"6df9":function(e,t,o){"use strict";o.d(t,"b",(function(){return v})),o.d(t,"d",(function(){return _})),o.d(t,"a",(function(){return g})),o.d(t,"c",(function(){return m}));var i=o("a026"),a=o("9300"),s=o("2ef0"),r=o("31aa"),n=o("963c"),c=o("ecef"),l=o("5801"),d=o("b85b");o("ad9d");function u(e,t="_"){return null===e||void 0===e?e:e.replaceAll(" ",t).toLowerCase()}const b={block_getContactPropertyOnIndex:e=>({blockId:t,index:o})=>{var i,s;return null===(i=Object(a["findBlockOnActiveFlowWith"])(t,e).config)||void 0===i||null===(s=i.set_contact_property)||void 0===s?void 0:s[o]},block_getContactPropertyValueByKey:e=>({blockId:t,key:o})=>{var i,s;return null===(i=Object(a["findBlockOnActiveFlowWith"])(t,e).config.set_contact_property)||void 0===i||null===(s=i.find(({property_key:e})=>e===o))||void 0===s?void 0:s.property_value}},p={block_addContactProperty(e,{blockId:t,key:o,value:i}){const s=Object(a["findBlockOnActiveFlowWith"])(t,e);if(s.config.set_contact_property||(s.config.set_contact_property=[]),s.config.set_contact_property.find(({property_key:e})=>e===o))throw new Error(`set_contact_property[${o}] already exists`);s.config.set_contact_property.push({property_key:o,property_value:i})},block_removeContactProperty(e,{blockId:t,key:o}){var i;const s=Object(a["findBlockOnActiveFlowWith"])(t,e);s.config.set_contact_property=(null!==(i=s.config.set_contact_property)&&void 0!==i?i:[]).filter(({property_key:e})=>e!==o)},block_changeContactProperty(e,{blockId:t,key:o,value:i}){var s;const r=Object(a["findBlockOnActiveFlowWith"])(t,e);r.config.set_contact_property=(null!==(s=r.config.set_contact_property)&&void 0!==s?s:[]).map(({property_key:e,property_value:t})=>({property_key:e,property_value:e===o?i:t}))}},h={block_makeSureSetContactPropertyExistsAsArray({commit:e,state:t},{blockId:o}){var i;const s=Object(a["findBlockOnActiveFlowWith"])(o,t);void 0===(null===(i=s.config)||void 0===i?void 0:i.set_contact_property)&&e("block_updateConfigByPath",{blockId:o,path:"set_contact_property",value:[]})},block_setContactPropertyOnIndex({commit:e,state:t,dispatch:o},{blockId:i,index:a,propertyKey:s,propertyValue:r}){o("block_makeSureSetContactPropertyExistsAsArray",{blockId:i}),e("block_updateConfigByPath",{blockId:i,path:`set_contact_property.[${a}]`,value:{property_key:s,property_value:r}})},block_setContactPropertyKeyOnIndex({commit:e,state:t,dispatch:o},{blockId:i,index:a,propertyKey:s}){o("block_makeSureSetContactPropertyExistsAsArray",{blockId:i}),e("block_updateConfigByPath",{blockId:i,path:`set_contact_property.[${a}].property_key`,value:s})},block_setContactPropertyValueOnIndex({commit:e,state:t,dispatch:o},{blockId:i,index:a,propertyValue:s}){o("block_makeSureSetContactPropertyExistsAsArray",{blockId:i}),e("block_updateConfigByPath",{blockId:i,path:`set_contact_property.[${a}].property_value`,value:s})},block_setContactPropertyByKey({commit:e,getters:t},{blockId:o,key:i,value:a}){void 0===t.block_getContactPropertyValueByKey({blockId:o,key:i})?e("block_addContactProperty",{blockId:o,key:i,value:a}):e("block_changeContactProperty",{blockId:o,key:i,value:a})},block_deleteContactPropertyByKey({commit:e},{blockId:t,key:o}){e("block_removeContactProperty",{blockId:t,key:o})},block_updateContactPropertyAfterChoicesChange({state:e,commit:t,dispatch:o},{blockId:i}){var s,r,n,c;const l=Object(a["findBlockOnActiveFlowWith"])(i,e),u=null===(s=l.vendor_metadata)||void 0===s||null===(r=s.floip)||void 0===r||null===(n=r.ui_metadata)||void 0===n||null===(c=n.set_contact_property)||void 0===c?void 0:c.property_value_mapping;void 0!==u&&o("block_setContactPropertyValueOnIndex",{blockId:i,index:0,propertyValue:Object(d["b"])(l.config.choices,u)})},block_updateContactPropertyMetadataAfterNewChoiceAdded({state:e,commit:t,dispatch:o},{blockId:i,prompt:a}){t("block_updateVendorMetadataByPath",{blockId:i,path:"floip.ui_metadata.set_contact_property.property_value_mapping."+a,value:""})},block_resetContactPropertyMetadata({state:e,commit:t,dispatch:o},{blockId:i}){const{config:{choices:s}}=Object(a["findBlockOnActiveFlowWith"])(i,e);s.forEach(e=>{t("block_updateVendorMetadataByPath",{blockId:i,path:"floip.ui_metadata.set_contact_property.property_value_mapping."+e.prompt,value:""})})}};var f=o("244b");const v={...b,block_classesConfig(e,t,o){return o.trees.ui.blockClasses},block_shouldHave2Exits:(e,t)=>e=>{var o,i,a,s;const r=t.block_classesConfig[e],n=null===r||void 0===r||null===(o=r.exits)||void 0===o||null===(i=o.primary)||void 0===i?void 0:i.name,c=null===r||void 0===r||null===(a=r.exits)||void 0===a||null===(s=a.default)||void 0===s?void 0:s.name;return void 0!==n&&void 0!==c}},_={...p,block_setName(e,{blockId:t,value:o}){Object(a["findBlockOnActiveFlowWith"])(t,e).name=o},block_setLabel(e,{blockId:t,value:o}){Object(a["findBlockOnActiveFlowWith"])(t,e).label=o},block_setSemanticLabel(e,{blockId:t,value:o}){Object(a["findBlockOnActiveFlowWith"])(t,e).semantic_label=o},block_setTags(e,{blockId:t,value:o}){Object(a["findBlockOnActiveFlowWith"])(t,e).tags=o},block_addTag(e,{blockId:t,value:o}){const i=Object(a["findBlockOnActiveFlowWith"])(t,e);Object(s["isArray"])(i.tags)?i.tags.push(o):i.tags=[o]},block_setExitName(e,{exitId:t,blockId:o,value:i}){const s=Object(a["findBlockOnActiveFlowWith"])(o,e);Object(a["findBlockExitWith"])(t,s).name=i},block_setExitTest(e,{exitId:t,blockId:o,value:i}){const s=Object(a["findBlockOnActiveFlowWith"])(o,e);Object(a["findBlockExitWith"])(t,s).test=i},block_setExitSemanticLabel(e,{exitId:t,blockId:o,value:i}){const s=Object(a["findBlockOnActiveFlowWith"])(o,e);Object(a["findBlockExitWith"])(t,s).semantic_label=i},block_addExit(e,{blockId:t,exit:o,shouldAppend:i}){const s=Object(a["findBlockOnActiveFlowWith"])(t,e);i?s.exits.push(o):s.exits.splice(s.exits.length-1,0,o)},block_removeExit(e,{blockId:t,exit:o}){const i=Object(a["findBlockOnActiveFlowWith"])(t,e);i.exits=Object(s["reject"])(i.exits,e=>e.uuid===o.uuid)},block_updateExitVendorMetadata(e,{blockId:t,exitId:o,vendorMetadata:i}){const s=Object(a["findBlockOnActiveFlowWith"])(t,e),r=Object(a["findBlockExitWith"])(o,s);r.vendor_metadata=i},block_updateExitVendorMetadataByPath(e,{blockId:t,exitId:o,path:i,value:a}){Object(f["e"])(e,t,o,"vendor_metadata."+i,a)},block_removeExitVendorMetadataByPath(e,{blockId:t,exitId:o,path:i}){Object(f["b"])(e,t,o,"vendor_metadata."+i)},block_updateConfig(e,{blockId:t,newConfig:o}){Object(a["findBlockOnActiveFlowWith"])(t,e).config=o},block_updateConfigByKey(e,{blockId:t,key:o,value:i}){const s=Object(a["findBlockOnActiveFlowWith"])(t,e).config;s[o]=i,Object(a["findBlockOnActiveFlowWith"])(t,e).config={...s}},block_removeConfigByKey(e,{blockId:t,key:o}){Object(f["c"])(e,t,"config."+o)},block_updateConfigByPath(e,{blockId:t,path:o,value:i}){Object(f["f"])(e,t,"config."+o,i)},block_updateUIMetadataByPath(e,{blockId:t,path:o,value:s}){const r=o.split("."),n=Object(a["findBlockOnActiveFlowWith"])(t,e);n.ui_metadata||i["default"].set(n,"ui_metadata",{});const c=n.ui_metadata;let l=c;while(1!==r.length){const e=r.shift();"undefined"===typeof l[e]&&i["default"].set(l,e,{}),l=l[e]}i["default"].set(l,r[0],s)},block_setBlockExitDestinationBlockId(e,{blockId:t,exitId:o,destinationBlockId:i}){Object(s["isNil"])(i)&&(i=void 0);const r=Object(a["findBlockOnActiveFlowWith"])(t,e);Object(a["findBlockExitWith"])(o,r).destination_block=i},block_updateVendorMetadataByPath(e,{blockId:t,path:o,value:i}){Object(f["f"])(e,t,"vendor_metadata."+o,i)},block_removeVendorMetadataByPath(e,{blockId:t,path:o}){Object(f["c"])(e,t,"vendor_metadata."+o)},block_exitClearDestinationBlockFor(e,{blockExit:t}){t.destination_block=void 0}},g={...h,block_setLabel({commit:e,dispatch:t},{blockId:o,value:i}){e("block_setLabel",{blockId:o,value:i}),t("block_setName",{blockId:o,value:u(i)})},block_setName({commit:e,dispatch:t,state:o},{blockId:i,value:r,lockAutoUpdate:n=!1}){var c,l;const d=Object(a["findBlockOnActiveFlowWith"])(i,o);if(!0===(null===(c=d.vendor_metadata)||void 0===c||null===(l=c.floip.ui_metadata)||void 0===l?void 0:l.should_auto_update_name)||n){const o=Object(s["cloneDeep"])(d);e("block_setName",{blockId:i,value:r});const a=Object(s["cloneDeep"])(d);t("block_notifyOtherBlocksAboutBlockChange",{oldBlock:o,newBlock:a})}n&&e("block_updateVendorMetadataByPath",{blockId:i,path:"floip.ui_metadata.should_auto_update_name",value:!1})},block_notifyOtherBlocksAboutBlockChange({dispatch:e,rootGetters:t},{oldBlock:o,newBlock:i}){var a,s;return Promise.all(null!==(a=null===(s=t["flow/activeFlow"])||void 0===s?void 0:s.blocks.map(t=>e(`flow/${t.type}/maybeHandleAnotherBlockChange`,{thisBlock:t,oldBlock:o,newBlock:i},{root:!0})))&&void 0!==a?a:[])},block_resetName({commit:e,state:t},{blockId:o}){const i=Object(a["findBlockOnActiveFlowWith"])(o,t);e("block_setName",{blockId:o,value:u(i.label)}),e("block_updateVendorMetadataByPath",{blockId:o,path:"floip.ui_metadata.should_auto_update_name",value:!0})},async block_createBlockDefaultExitWith({dispatch:e},{props:t}){return e("block_createBlockExitWith",{props:Object(s["defaults"])(t,{name:"Default",default:!0,test:""})})},async block_createBlockExitWith({dispatch:e,commit:t},{props:o}){return{...Object(s["defaults"])(o,{name:"",vendor_metadata:{},destination_block:void 0,test:"",semantic_label:void 0})}},async block_generateExitsBasedOnUiConfig({state:e,dispatch:t,getters:o},{blockType:i,primaryExitTest:a}){var s,c,l,d,u;const b=o.block_classesConfig[i],p=null===b||void 0===b||null===(s=b.exits)||void 0===s||null===(c=s.primary)||void 0===c?void 0:c.name,h=null===b||void 0===b||null===(l=b.exits)||void 0===l||null===(d=l.default)||void 0===d?void 0:d.name,f=null===b||void 0===b||null===(u=b.exits)||void 0===u?void 0:u.default_branching_type;let v=[];var _;void 0===f&&!0===o.block_shouldHave2Exits(i)?v=[await t("block_createBlockExitWith",{props:{uuid:await(new r["IdGeneratorUuidV4"]).generate(),name:p,test:null!==a&&void 0!==a?a:null===b||void 0===b||null===(_=b.exits)||void 0===_?void 0:_.primary.test}}),await t("block_createBlockDefaultExitWith",{props:{uuid:await(new r["IdGeneratorUuidV4"]).generate(),name:h}})]:(v=[await t("block_createBlockDefaultExitWith",{props:{uuid:await(new r["IdGeneratorUuidV4"]).generate()}})],[n["a"].EXIT_PER_CHOICE,n["a"].ADVANCED,void 0].includes(f)||console.warn("block_generateExitsBasedOnUiConfig",`the default_branching_type ${f} is not recognized, this might cause an error.`));return v},async block_updateBlockExitWith({commit:e},{blockId:t,exitId:o,props:{test:i,name:a,semantic_label:s}}){e("block_setExitName",{blockId:t,exitId:o,value:a}),e("block_setExitTest",{blockId:t,exitId:o,value:i}),e("block_setExitSemanticLabel",{blockId:t,exitId:o,value:s})},async block_resetBranchingExitsByCollapsingNonDefault({state:e,getters:t,dispatch:o},{blockId:i,primaryExitTest:n}){var c,l;const d=Object(a["findBlockOnActiveFlowWith"])(i,e),u=t.block_classesConfig[d.type],b={uuid:await(new r["IdGeneratorUuidV4"]).generate(),name:null===u||void 0===u||null===(c=u.exits)||void 0===c?void 0:c.primary.name,test:null!==n&&void 0!==n?n:null===u||void 0===u||null===(l=u.exits)||void 0===l?void 0:l.primary.test};d.exits=[await o("block_createBlockExitWith",{props:b}),Object(s["last"])(d.exits)]},async block_resetBranchingExitsToDefaultOnly({state:e,dispatch:t},{blockId:o}){const i=Object(a["findBlockOnActiveFlowWith"])(o,e);i.exits=[Object(s["last"])(i.exits)]},async block_select({state:e,dispatch:t},{blockId:o}){e.selectedBlocks.push(o)},async block_deselect({state:e},{blockId:t}){e.selectedBlocks=e.selectedBlocks.filter(e=>e!==t)},block_updateBlocksAfterLanguagesChange({rootGetters:e,dispatch:t,getters:o},{addedLanguageIds:i,removedLanguageIds:a}){!1!==e["flow/hasTextMode"]&&o.activeFlow.blocks.filter(e=>e.type===c["a"]||e.type===l["a"]).forEach(e=>{e.config.choices.forEach(e=>{var t;e.text_tests=null===(t=e.text_tests)||void 0===t?void 0:t.filter(({language:e})=>void 0!==e&&!a.includes(e))}),e.config.choices.forEach(e=>{i.forEach(t=>{var o;null===(o=e.text_tests)||void 0===o||o.push({language:t,test_expression:`@block.response = '${Object(d["c"])(e.name)}'`})})})})}};function m(e){return Object(s["has"])(e.config,"prompt")}},"6fe9":function(e,t,o){},"74d7":function(e,t,o){"use strict";o("026c")},"7a08":function(e,t,o){"use strict";o("a05e")},"7d18":function(e,t,o){},"7ef8":function(e,t,o){"use strict";o("3005d")},8127:function(e,t,o){"use strict";o("d14e")},8429:function(e,t,o){},"84d1":function(e,t,o){"use strict";o.r(t),o.d(t,"Core_SetContactPropertyBlock",(function(){return m})),o.d(t,"install",(function(){return j}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"core-set-contact-property-block"},[t("base-block",{attrs:{block:e.block,"show-semantic-label":!1,"uses-default-contact-props-editor":e.usesDefaultContactPropsEditor,"uses-default-branching-editor":e.usesDefaultBranchingEditor},on:{handleBranchingTypeChangedToUnified:function(t){return e.handleBranchingTypeChangedToUnified({block:e.block})}}},[e._t("description",null,{slot:"description"}),e._t("resource-editors",null,{slot:"resource-editors"}),e._t("extras",(function(){return[t("contact-property-editor",{attrs:{block:e.block}})]}),{slot:"extras"}),e._t("vendor-extras",null,{slot:"vendor-extras"}),e._t("branching",null,{slot:"branching"}),e._t("contact-props",null,{slot:"contact-props"}),e._t("vendor",null,{slot:"vendor"})],2)],1)},a=[],s=o("2fe6"),r=o("9ab4"),n=o("4bb5"),c=o("1b40"),l=o("2ef0"),d=o("4004");const u="Core.SetContactProperty",b={...d["a"],async createWith({getters:e,dispatch:t},{props:o}){return o.type=u,o.config={set_contact_property:[]},d["a"].createWith({getters:e,dispatch:t},{props:o})}},p={...Object(l["cloneDeep"])(d["b"]),actions:b};var h=p,f=o("4a51"),v=o("af98"),_=o("2fe1");const g=Object(n["e"])("flow/"+u);let m=class extends(Object(_["c"])(f["a"])){constructor(...e){super(...e),Object(s["a"])(this,"block",void 0),Object(s["a"])(this,"usesDefaultBranchingEditor",void 0),Object(s["a"])(this,"usesDefaultContactPropsEditor",void 0),Object(s["a"])(this,"handleBranchingTypeChangedToUnified",void 0)}};Object(r["__decorate"])([Object(c["b"])()],m.prototype,"block",void 0),Object(r["__decorate"])([Object(c["b"])({default:!0})],m.prototype,"usesDefaultBranchingEditor",void 0),Object(r["__decorate"])([Object(c["b"])({default:!1})],m.prototype,"usesDefaultContactPropsEditor",void 0),Object(r["__decorate"])([g.Action],m.prototype,"handleBranchingTypeChangedToUnified",void 0),m=Object(r["__decorate"])([Object(c["a"])({})],m);var k=m;const j=Object(v["c"])(u,h);var O=k,y=o("2877"),w=Object(y["a"])(O,i,a,!1,null,null,null);t["default"]=w.exports},8562:function(e,t,o){"use strict";o.d(t,"a",(function(){return n})),o.d(t,"c",(function(){return c})),o.d(t,"d",(function(){return l})),o.d(t,"b",(function(){return d}));var i=o("9300"),a=o("244b"),s=o("a026"),r=o("b85b");const n="block.response",c={choice_findChoice:(e,t,o,a)=>(e,t)=>{const o=Object(i["findBlockWith"])(e,a["flow/activeFlow"]),s=a["flow/resourcesByUuidOnActiveFlow"][t];if(null==s)throw new i["ValidationException"]("Unable to find resource for choice: "+t);return o.config.choices.find(e=>e.prompt===t)}},l={choice_deleteByPath(e,{choice:t,path:o}){Object(a["a"])(e,t,""+o)}},d={choice_create({rootGetters:e,dispatch:t},{blockId:o,resourceId:a,value:s}){const r=Object(i["findBlockWith"])(o,e["flow/activeFlow"]),{choices:c,set_contact_property:l}=r.config;t("choice_updateName",{blockId:o,resourceId:a,value:s}),t("choice_updateIvrTestExpression",{blockId:o,resourceId:a,value:`${n} = '${c.length<10?c.length:"*"}'`}),void 0!==l&&l.length>0&&t("flow/block_updateContactPropertyMetadataAfterNewChoiceAdded",{blockId:o,prompt:a},{root:!0})},choice_change({dispatch:e},t){e("choice_updateName",t)},choice_updateName({dispatch:e,getters:t},{blockId:o,resourceId:i,value:a}){var s;const r=null===(s=t.choice_findChoice(o,i))||void 0===s?void 0:s.name;e("choice_updateByPath",{blockId:o,resourceId:i,path:"name",value:a}),e("flow/block_updateContactPropertyAfterChoicesChange",{blockId:o},{root:!0}),e("choice_updateFirstSynonymForActiveLanguages",{blockId:o,resourceId:i,oldValue:r,value:a})},choice_updateIvrTestExpression({getters:e,rootGetters:t,dispatch:o},{blockId:i,resourceId:a,value:r}){const n=e.choice_findChoice(i,a);s["default"].set(n,"ivr_test",{}),s["default"].set(n.ivr_test,"test_expression",r)},choice_updateFirstSynonymForActiveLanguages({getters:e,rootGetters:t,dispatch:o,commit:i},{blockId:a,resourceId:s,value:n,oldValue:c}){const l=t["flow/activeFlow"],d=l.languages;d.forEach(({id:t})=>{var i,l;const d=e.choice_findChoice(a,s),u=null===(i=d.text_tests)||void 0===i||null===(l=i.find(e=>e.language===t))||void 0===l?void 0:l.test_expression,b=void 0===u,p=void 0!==c,h=p&&u===Object(r["a"])(c),f=b||!p||h;f&&o("choice_setSynonymForLanguage",{blockId:a,resourceId:s,language:t,index:0,value:n})})},choice_setSynonymForLanguage({getters:e,dispatch:t},{blockId:o,resourceId:i,language:a,index:n=Number.POSITIVE_INFINITY,value:c}){const l=e.choice_findChoice(o,i),d=Object(r["a"])(c);void 0===(null===l||void 0===l?void 0:l.text_tests)&&s["default"].set(l,"text_tests",[]);let u=0,b=-1;for(;u<l.text_tests.length;u+=1){const e=l.text_tests[u];if(e.language===a&&(b+=1,b===n))return void t("choice_updateByPath",{blockId:o,resourceId:l.prompt,path:`text_tests.[${u}].test_expression`,value:d})}b<n&&t("choice_updateByPath",{blockId:o,resourceId:l.prompt,path:`text_tests.[${l.text_tests.length}]`,value:{language:a,test_expression:d}})},choice_removeTextTestsExpressionOnIndex({commit:e},{choice:t,testIndex:o,value:i}){e("choice_deleteByPath",{choice:t,path:`text_tests.[${o}]`,value:i})},choice_updateByPath({commit:e,rootGetters:t},{blockId:o,resourceId:a,path:s,value:r}){const n=Object(i["findBlockWith"])(o,t["flow/activeFlow"]),c=n.config.choices,l=c.findIndex(e=>e.prompt===a);e("flow/block_updateConfigByPath",{blockId:o,path:`choices.[${l}].${s}`,value:r},{root:!0})}}},"88df":function(e,t,o){"use strict";o.d(t,"a",(function(){return p}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"import-matcher"},[t("label",[e._v(e._s(e._f("trans")(e.matchNotFoundText)))]),e._l(e.missingMatches,(function(o){return t("div",{key:e.getIdentifier(o)+"-missing"},[t("div",{staticClass:"row full-width ml-1 mt-2"},[t("div",{staticClass:"form-check form-check-inline full-width"},[t("div",{staticClass:"col-xl-2 col-md-3"},[t("label",{staticClass:"form-check-label full-width mt-2 mb-2"},[e._v(e._s(e.getLabel(o)))])]),t("div",{staticClass:"col-xl-8 col-md-6"},[t("select",{staticClass:"form-control full-width",on:{change:function(t){return e.updateMappings(o,t)}}},[t("option",{key:"default",attrs:{value:""},domProps:{selected:e.mappingsEmpty}},[e._v(" "+e._s(e._f("trans")("flow-builder.none-selected"))+" ")]),e._l(e.existingOptionsWithoutMatch,(function(o){return t("option",{key:e.getIdentifier(o)+"-option",domProps:{value:JSON.stringify(o)}},[e._v(" "+e._s(o)+" ")])}))],2)]),t("div",{staticClass:"col-xl-2 col-md-3"},[t("button",{staticClass:"btn btn-primary full-width",on:{click:function(t){return e.handleMatch(o)}}},[e._v(" "+e._s(e._f("trans")("flow-builder.update"))+" ")])])])]),"language"===e.type&&e.isFeatureAddLanguageOnImportEnabled?t("div",{staticClass:"row full-width mt-2"},[t("div",{staticClass:"col-12"},[t("language-adder",{on:{onLanguageAddition:e.onLanguageAddition}})],1)]):e._e()])}))],2)},a=[],s=o("2fe6"),r=o("9ab4"),n=o("4a51"),c=o("1b40"),l=o("2ef0"),d=o("2fe1"),u=o("4bb5");const b=Object(u["e"])("flow/import");let p=class extends(Object(d["c"])(n["a"])){constructor(...e){super(...e),Object(s["a"])(this,"matchNotFoundText",void 0),Object(s["a"])(this,"type",void 0),Object(s["a"])(this,"typeId",void 0),Object(s["a"])(this,"typeLabel",void 0),Object(s["a"])(this,"missingMatches",void 0),Object(s["a"])(this,"existingOptionsWithoutMatch",void 0),Object(s["a"])(this,"mappings",{}),Object(s["a"])(this,"tryToFixLanguages",void 0),Object(s["a"])(this,"isFeatureAddLanguageOnImportEnabled",void 0),Object(s["a"])(this,"flowContainer",void 0)}getLabel(e){return Object(l["get"])(e,this.typeLabel,"")}getIdentifier(e){return Object(l["get"])(e,this.typeId,"")}updateMappings(e,t){this.mappings[this.getIdentifier(e)]=t.target.value}get mappingsEmpty(){return Object(l["isEmpty"])(this.mappings)}handleMatch(e){const t=Object(l["get"])(this.mappings,this.getIdentifier(e));if(t){const o=JSON.parse(t);this.$emit("reactToMatch",e,o),this.mappings=Object(l["omit"])(this.mappings,this.getIdentifier(e))}}async onLanguageAddition(){await this.tryToFixLanguages(this.flowContainer)}};Object(r["__decorate"])([Object(c["b"])({default:""})],p.prototype,"matchNotFoundText",void 0),Object(r["__decorate"])([Object(c["b"])({required:!0})],p.prototype,"type",void 0),Object(r["__decorate"])([Object(c["b"])({required:!0})],p.prototype,"typeId",void 0),Object(r["__decorate"])([Object(c["b"])({required:!0})],p.prototype,"typeLabel",void 0),Object(r["__decorate"])([Object(c["b"])({required:!0})],p.prototype,"missingMatches",void 0),Object(r["__decorate"])([Object(c["b"])({required:!0})],p.prototype,"existingOptionsWithoutMatch",void 0),Object(r["__decorate"])([b.Action],p.prototype,"tryToFixLanguages",void 0),Object(r["__decorate"])([u["b"]],p.prototype,"isFeatureAddLanguageOnImportEnabled",void 0),Object(r["__decorate"])([b.State],p.prototype,"flowContainer",void 0),p=Object(r["__decorate"])([Object(c["a"])({})],p);var h=p,f=h,v=(o("74d7"),o("2877")),_=Object(v["a"])(f,i,a,!1,null,null,null);t["b"]=_.exports},"89e5":function(e,t,o){},"8a90":function(e,t,o){},"8cf7":function(e,t,o){},"8e9c":function(e,t,o){},9084:function(e,t,o){"use strict";var i=function(){var e=this,t=e._self._c;return e.hasSomethingToImport?t("div",{staticClass:"error-handler-v2"},[t("div",{staticClass:"mt-4 ml-4 mr-4 mb-4"},[t("h5",[e._v(e._s(e.trans("flow-builder.results")))]),e.isSafeToImport&&e.hasWarnings?t("div",{staticClass:"alert alert-success mt-3",attrs:{role:"alert"}},[t("font-awesome-icon",{attrs:{icon:["fa","exclamation-triangle"]}}),e._v(" "+e._s(e.trans("flow-builder.success-with-warnings"))+" ")],1):e._e(),e.isSafeToImport&&!e.hasWarnings?t("div",{staticClass:"alert alert-success mt-3",attrs:{role:"alert"}},[t("font-awesome-icon",{attrs:{icon:["far","check-circle"]}}),e._v(" "+e._s(e.trans("flow-builder.import-success"))+" ")],1):e._e(),e.isSafeToImport?e._e():t("div",[t("div",{staticClass:"alert alert-danger mt-3",attrs:{role:"alert"}},[t("i",{staticClass:"glyphicon glyphicon-exclamation-sign"}),e._v(" "+e._s(e.trans("flow-builder.failure"))+" ")]),t("h5",[e._v(e._s(e.trans("flow-builder.errors")))]),t("p",[e._v(e._s(e.trans("flow-builder.please-fix-errors-first")))]),t("full-import-matcher"),t("tech-error-notifications",{attrs:{"validation-errors":e.containerImportValidationTrueErrors,"error-type":"error"}})],1),e.hasWarnings?t("div",{staticClass:"mt-4"},[t("h5",[e._v(e._s(e.trans("flow-builder.warnings")))]),t("p",[e._v(e._s(e.trans("flow-builder.warnings-hint-on-import")))]),t("tech-error-notifications",{attrs:{"validation-errors":e.containerImportValidationWarningErrors,"error-type":"warning"}})],1):e._e()])]):e._e()},a=[],s=o("4f90"),r=o("ff9d"),n=o("2f62"),c=o("4a51"),l={name:"ErrorHandlerV2",components:{TechErrorNotifications:s["a"],FullImportMatcher:r["a"]},mixins:[c["a"]],computed:{...Object(n["e"])("flow/import",["missingLanguages","missingProperties","missingGroups"]),...Object(n["c"])("flow/import",["hasSomethingToImport","isSafeToImport","hasWarnings","containerImportValidationTrueErrors","containerImportValidationWarningErrors","containerImportValidationErrors","languagesMissing","propertiesMissing","groupsMissing"])}},d=l,u=o("2877"),b=Object(u["a"])(d,i,a,!1,null,"6a772eb3",null);t["a"]=b.exports},"90d2":function(e,t,o){"use strict";o.d(t,"g",(function(){return a})),o.d(t,"f",(function(){return s})),o.d(t,"b",(function(){return r})),o.d(t,"c",(function(){return n})),o.d(t,"a",(function(){return c})),o.d(t,"e",(function(){return l})),o.d(t,"d",(function(){return d}));var i=o("2ef0");function a(e,t,o){return e.map(e=>{const a=Object(i["cloneDeep"])(e);return a.values=e.values.map(e=>{const a=Object(i["cloneDeep"])(e);return e.language_id===t&&(a.language_id=o),a}),a})}function s(e,t){const o=Object(i["cloneDeep"])(e),a=Object(i["get"])(t,"flows[0]"),s=Object(i["get"])(t,"flows[0].uuid"),r=Object(i["findIndex"])(o.flows,e=>e.uuid===s);return r<0?o.flows.push(a):o.flows[r]=a,o}function r({flowContainer:e,oldFlowContainer:t}){return!Object(i["isEqual"])(Object(i["get"])(e,"flows[0].languages"),Object(i["get"])(t,"flows[0].languages"))}function n({newPropertyBlocks:e,oldPropertyBlocks:t}){return!Object(i["isEqual"])(e,t)}function c({newGroupBlocks:e,oldGroupBlocks:t}){return!Object(i["isEqual"])(e,t)}function l(e){return Object(i["filter"])(Object(i["get"])(e,"flows[0].blocks"),e=>"Core.SetContactProperty"===e.type)}function d(e){return Object(i["filter"])(Object(i["get"])(e,"flows[0].blocks"),e=>"Core.SetGroupMembership"===e.type)}},"917a":function(e,t,o){"use strict";o("8a90")},9291:function(e,t,o){"use strict";o("5379")},"963c":function(e,t,o){"use strict";var i;o.d(t,"a",(function(){return i})),function(e){e["UNIFIED"]="UNIFIED",e["EXIT_PER_CHOICE"]="EXIT_PER_CHOICE",e["ADVANCED"]="ADVANCED"}(i||(i={}))},"9a15":function(e,t,o){},a05e:function(e,t,o){},a56a:function(e,t,o){},a925:function(e,t,o){var i={"./af":"65d7","./af.js":"65d7","./ar":"87f4","./ar-dz":"a873","./ar-dz.js":"a873","./ar-kw":"1333","./ar-kw.js":"1333","./ar-ly":"9f58","./ar-ly.js":"9f58","./ar-ma":"2e78","./ar-ma.js":"2e78","./ar-sa":"7727","./ar-sa.js":"7727","./ar-tn":"2c75","./ar-tn.js":"2c75","./ar.js":"87f4","./az":"3f69","./az.js":"3f69","./be":"2e86","./be.js":"2e86","./bg":"f4c3","./bg.js":"f4c3","./bm":"d539","./bm.js":"d539","./bn":"772c","./bn-bd":"7612","./bn-bd.js":"7612","./bn.js":"772c","./bo":"7d2b","./bo.js":"7d2b","./br":"7e42","./br.js":"7e42","./bs":"1841","./bs.js":"1841","./ca":"a615","./ca.js":"a615","./cs":"a78e","./cs.js":"a78e","./cv":"8570","./cv.js":"8570","./cy":"9d4d","./cy.js":"9d4d","./da":"38ba","./da.js":"38ba","./de":"c3fe","./de-at":"9dc2","./de-at.js":"9dc2","./de-ch":"694b1","./de-ch.js":"694b1","./de.js":"c3fe","./dv":"8c17","./dv.js":"8c17","./el":"5c9d","./el.js":"5c9d","./en-au":"7213","./en-au.js":"7213","./en-ca":"09b1","./en-ca.js":"09b1","./en-gb":"a42a","./en-gb.js":"a42a","./en-ie":"8fd4","./en-ie.js":"8fd4","./en-il":"794e","./en-il.js":"794e","./en-in":"e734","./en-in.js":"e734","./en-nz":"6c36","./en-nz.js":"6c36","./en-sg":"939d","./en-sg.js":"939d","./eo":"372d","./eo.js":"372d","./es":"ca85","./es-do":"7a59","./es-do.js":"7a59","./es-mx":"287e","./es-mx.js":"287e","./es-us":"221d","./es-us.js":"221d","./es.js":"ca85","./et":"ac6e","./et.js":"ac6e","./eu":"acd5","./eu.js":"acd5","./fa":"4e16","./fa.js":"4e16","./fi":"2a06","./fi.js":"2a06","./fil":"64ae","./fil.js":"64ae","./fo":"3e12","./fo.js":"3e12","./fr":"0d66","./fr-ca":"0d57","./fr-ca.js":"0d57","./fr-ch":"798e","./fr-ch.js":"798e","./fr.js":"0d66","./fy":"bd4d","./fy.js":"bd4d","./ga":"0ff6","./ga.js":"0ff6","./gd":"c344","./gd.js":"c344","./gl":"7846","./gl.js":"7846","./gom-deva":"e29f","./gom-deva.js":"e29f","./gom-latn":"675b","./gom-latn.js":"675b","./gu":"538c","./gu.js":"538c","./he":"8df8e","./he.js":"8df8e","./hi":"ab57","./hi.js":"ab57","./hr":"807a","./hr.js":"807a","./hu":"3229","./hu.js":"3229","./hy-am":"ac77","./hy-am.js":"ac77","./id":"3500","./id.js":"3500","./is":"2330","./is.js":"2330","./it":"bf52","./it-ch":"42b7","./it-ch.js":"42b7","./it.js":"bf52","./ja":"c022","./ja.js":"c022","./jv":"6ac8","./jv.js":"6ac8","./ka":"56cf","./ka.js":"56cf","./kk":"6da0","./kk.js":"6da0","./km":"b5aa","./km.js":"b5aa","./kn":"bf53","./kn.js":"bf53","./ko":"315f","./ko.js":"315f","./ku":"09db","./ku.js":"09db","./ky":"bffd","./ky.js":"bffd","./lb":"c666","./lb.js":"c666","./lo":"0139","./lo.js":"0139","./lt":"57a4","./lt.js":"57a4","./lv":"4fdf","./lv.js":"4fdf","./me":"d087","./me.js":"d087","./mi":"bff4","./mi.js":"bff4","./mk":"7cff","./mk.js":"7cff","./ml":"cfd2","./ml.js":"cfd2","./mn":"d49a","./mn.js":"d49a","./mr":"afba","./mr.js":"afba","./ms":"ba94","./ms-my":"80d2","./ms-my.js":"80d2","./ms.js":"ba94","./mt":"236f","./mt.js":"236f","./my":"ceaa","./my.js":"ceaa","./nb":"cf62","./nb.js":"cf62","./ne":"6c11","./ne.js":"6c11","./nl":"8538","./nl-be":"18aa","./nl-be.js":"18aa","./nl.js":"8538","./nn":"5687","./nn.js":"5687","./oc-lnc":"7f9f","./oc-lnc.js":"7f9f","./pa-in":"f112","./pa-in.js":"f112","./pl":"a865","./pl.js":"a865","./pt":"3005","./pt-br":"d705","./pt-br.js":"d705","./pt.js":"3005","./ro":"c354","./ro.js":"c354","./ru":"b6f4","./ru.js":"b6f4","./sd":"6c64","./sd.js":"6c64","./se":"c2cd","./se.js":"c2cd","./si":"9a0c","./si.js":"9a0c","./sk":"91fd","./sk.js":"91fd","./sl":"800b","./sl.js":"800b","./sq":"8fc8","./sq.js":"8fc8","./sr":"58f6","./sr-cyrl":"7fa6","./sr-cyrl.js":"7fa6","./sr.js":"58f6","./ss":"ab05","./ss.js":"ab05","./sv":"489a","./sv.js":"489a","./sw":"f683","./sw.js":"f683","./ta":"30c0","./ta.js":"30c0","./te":"29e8","./te.js":"29e8","./tet":"80b7","./tet.js":"80b7","./tg":"9e71","./tg.js":"9e71","./th":"8575","./th.js":"8575","./tk":"929d","./tk.js":"929d","./tl-ph":"2935","./tl-ph.js":"2935","./tlh":"c80c","./tlh.js":"c80c","./tr":"6fa0","./tr.js":"6fa0","./tzl":"81a8","./tzl.js":"81a8","./tzm":"a30f","./tzm-latn":"083a","./tzm-latn.js":"083a","./tzm.js":"a30f","./ug-cn":"7994","./ug-cn.js":"7994","./uk":"660b","./uk.js":"660b","./ur":"a63f","./ur.js":"a63f","./uz":"62bb","./uz-latn":"4b8a","./uz-latn.js":"4b8a","./uz.js":"62bb","./vi":"0521","./vi.js":"0521","./x-pseudo":"b73e","./x-pseudo.js":"b73e","./yo":"f86c","./yo.js":"f86c","./zh-cn":"1f75","./zh-cn.js":"1f75","./zh-hk":"379a","./zh-hk.js":"379a","./zh-mo":"eee5","./zh-mo.js":"eee5","./zh-tw":"c840","./zh-tw.js":"c840"};function a(e){var t=s(e);return o(t)}function s(e){if(!o.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=s,e.exports=a,a.id="a925"},ab96:function(e,t,o){var i={"./af":"8872","./af.js":"8872","./ar":"bb32","./ar-dz":"f38b","./ar-dz.js":"f38b","./ar-kw":"8a87","./ar-kw.js":"8a87","./ar-ly":"119f","./ar-ly.js":"119f","./ar-ma":"de6a","./ar-ma.js":"de6a","./ar-sa":"ab35","./ar-sa.js":"ab35","./ar-tn":"7068","./ar-tn.js":"7068","./ar.js":"bb32","./az":"32c8","./az.js":"32c8","./be":"a569","./be.js":"a569","./bg":"911b","./bg.js":"911b","./bm":"cade","./bm.js":"cade","./bn":"b059","./bn-bd":"60a6","./bn-bd.js":"60a6","./bn.js":"b059","./bo":"0b7e","./bo.js":"0b7e","./br":"7beb","./br.js":"7beb","./bs":"44a7","./bs.js":"44a7","./ca":"5978","./ca.js":"5978","./cs":"3e30","./cs.js":"3e30","./cv":"90d4","./cv.js":"90d4","./cy":"893a","./cy.js":"893a","./da":"673f","./da.js":"673f","./de":"745c","./de-at":"beab","./de-at.js":"beab","./de-ch":"5939","./de-ch.js":"5939","./de.js":"745c","./dv":"4da0","./dv.js":"4da0","./el":"6f8c","./el.js":"6f8c","./en-au":"8a25","./en-au.js":"8a25","./en-ca":"2e5f","./en-ca.js":"2e5f","./en-gb":"0787","./en-gb.js":"0787","./en-ie":"a30f3","./en-ie.js":"a30f3","./en-il":"45c0","./en-il.js":"45c0","./en-in":"3c1e","./en-in.js":"3c1e","./en-nz":"ff2e","./en-nz.js":"ff2e","./en-sg":"f14d","./en-sg.js":"f14d","./eo":"69bc","./eo.js":"69bc","./es":"f88f","./es-do":"66dc","./es-do.js":"66dc","./es-mx":"10af","./es-mx.js":"10af","./es-us":"e89d","./es-us.js":"e89d","./es.js":"f88f","./et":"71be","./et.js":"71be","./eu":"7780","./eu.js":"7780","./fa":"0b63","./fa.js":"0b63","./fi":"a33d","./fi.js":"a33d","./fil":"3dbd","./fil.js":"3dbd","./fo":"fc63","./fo.js":"fc63","./fr":"9a51","./fr-ca":"cda8","./fr-ca.js":"cda8","./fr-ch":"4a7d","./fr-ch.js":"4a7d","./fr.js":"9a51","./fy":"854a","./fy.js":"854a","./ga":"4489","./ga.js":"4489","./gd":"c0d5","./gd.js":"c0d5","./gl":"4530","./gl.js":"4530","./gom-deva":"8967","./gom-deva.js":"8967","./gom-latn":"2ef4","./gom-latn.js":"2ef4","./gu":"cbd2","./gu.js":"cbd2","./he":"c2f9","./he.js":"c2f9","./hi":"77fe","./hi.js":"77fe","./hr":"a34a","./hr.js":"a34a","./hu":"8d44","./hu.js":"8d44","./hy-am":"c920","./hy-am.js":"c920","./id":"4197","./id.js":"4197","./is":"540c","./is.js":"540c","./it":"2f58","./it-ch":"a347","./it-ch.js":"a347","./it.js":"2f58","./ja":"f6f6","./ja.js":"f6f6","./jv":"99f1","./jv.js":"99f1","./ka":"60e4","./ka.js":"60e4","./kk":"17f2","./kk.js":"17f2","./km":"ec19","./km.js":"ec19","./kn":"2216","./kn.js":"2216","./ko":"dba2","./ko.js":"dba2","./ku":"917e","./ku.js":"917e","./ky":"3ad1","./ky.js":"3ad1","./lb":"cb9a","./lb.js":"cb9a","./lo":"786a","./lo.js":"786a","./lt":"0eeb","./lt.js":"0eeb","./lv":"0716","./lv.js":"0716","./me":"325a","./me.js":"325a","./mi":"7732","./mi.js":"7732","./mk":"2fde","./mk.js":"2fde","./ml":"9991","./ml.js":"9991","./mn":"fb02","./mn.js":"fb02","./mr":"623d","./mr.js":"623d","./ms":"a904","./ms-my":"d801","./ms-my.js":"d801","./ms.js":"a904","./mt":"ddbe","./mt.js":"ddbe","./my":"c740","./my.js":"c740","./nb":"8196","./nb.js":"8196","./ne":"1f2a","./ne.js":"1f2a","./nl":"e056","./nl-be":"325b","./nl-be.js":"325b","./nl.js":"e056","./nn":"b7b0","./nn.js":"b7b0","./oc-lnc":"57c8","./oc-lnc.js":"57c8","./pa-in":"99c7","./pa-in.js":"99c7","./pl":"5919","./pl.js":"5919","./pt":"d9ae","./pt-br":"d851","./pt-br.js":"d851","./pt.js":"d9ae","./ro":"ce90","./ro.js":"ce90","./ru":"87a5","./ru.js":"87a5","./sd":"235c","./sd.js":"235c","./se":"839b","./se.js":"839b","./si":"2dd2","./si.js":"2dd2","./sk":"8cd8","./sk.js":"8cd8","./sl":"2a76","./sl.js":"2a76","./sq":"4a4d","./sq.js":"4a4d","./sr":"1632","./sr-cyrl":"73fd","./sr-cyrl.js":"73fd","./sr.js":"1632","./ss":"052a","./ss.js":"052a","./sv":"cb84","./sv.js":"cb84","./sw":"b126","./sw.js":"b126","./ta":"f946","./ta.js":"f946","./te":"399d","./te.js":"399d","./tet":"8d77","./tet.js":"8d77","./tg":"6588","./tg.js":"6588","./th":"462a","./th.js":"462a","./tk":"7d6b","./tk.js":"7d6b","./tl-ph":"27ff","./tl-ph.js":"27ff","./tlh":"1239","./tlh.js":"1239","./tr":"09a0","./tr.js":"09a0","./tzl":"e9ca","./tzl.js":"e9ca","./tzm":"d954","./tzm-latn":"e577","./tzm-latn.js":"e577","./tzm.js":"d954","./ug-cn":"5756","./ug-cn.js":"5756","./uk":"7c79","./uk.js":"7c79","./ur":"fb86","./ur.js":"fb86","./uz":"e487","./uz-latn":"251a","./uz-latn.js":"251a","./uz.js":"e487","./vi":"9681","./vi.js":"9681","./x-pseudo":"8e0c","./x-pseudo.js":"8e0c","./yo":"5cf8","./yo.js":"5cf8","./zh-cn":"96ae","./zh-cn.js":"96ae","./zh-hk":"7e5c","./zh-hk.js":"7e5c","./zh-mo":"eb4b","./zh-mo.js":"eb4b","./zh-tw":"623f","./zh-tw.js":"623f"};function a(e){var t=s(e);return o(t)}function s(e){if(!o.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=s,e.exports=a,a.id="ab96"},ac85:function(e,t,o){"use strict";o("5b86")},af98:function(e,t,o){"use strict";o.d(t,"a",(function(){return n})),o.d(t,"e",(function(){return b})),o.d(t,"c",(function(){return p})),o.d(t,"d",(function(){return h})),o.d(t,"b",(function(){return f}));var i=o("2ef0"),a=o("9300"),s=o("d39e");const r=1e3;var n;(function(e){e["CONNECTION_CREATE"]="CONNECTION_CREATE",e["BLOCK_RELOCATE"]="BLOCK_RELOCATE"})(n||(n={}));const c=()=>({activeBlockId:null,isEditable:!0,activeMainComponent:void 0,hasFlowChanges:!1,activeConnectionsContext:[],operations:{[n.CONNECTION_CREATE]:{kind:n.CONNECTION_CREATE,data:null},[n.BLOCK_RELOCATE]:null},draggableForExitsByUuid:{},isBlockEditorOpen:!1,interactionDesignerHeaderBoundingClientRect:{},isConnectionCreationInProgress:!1}),l={activeBlock:({activeBlockId:e},{blocksById:t})=>e?t[e]:null,blocksById:(e,t,o,a)=>{const{blocks:s}=a["flow/activeFlow"]?a["flow/activeFlow"]:{blocks:[]};return Object(i["keyBy"])(s,"uuid")},nodeLabelsById:(e,t,{flow:{flows:o}})=>Object(i["mapValues"])(Object(i["keyBy"])(o[0].blocks,"uuid"),"label"),exitLabelsById:(e,t,{flow:{flows:o}})=>Object(i["mapValues"])(Object(i["keyBy"])(Object(i["flatMap"])(o[0].blocks,"exits"),"uuid"),"label"),isEditable:e=>e.isEditable,hasFlowChanges:e=>e.hasFlowChanges,interactionDesignerHeaderBoundingClientRect:e=>e.interactionDesignerHeaderBoundingClientRect,isBuilderCanvasEnabled:e=>"builder"===e.activeMainComponent,isResourceViewerCanvasEnabled:e=>"resource-viewer"===e.activeMainComponent},d={activateBlock(e,{blockId:t}){e.activeBlockId=t},activateConnection(e,{connectionContext:t}){e.activeConnectionsContext=Object(i["union"])([t],e.activeConnectionsContext)},setActiveMainComponent(e,{mainComponent:t}){e.activeMainComponent=t},deactivateConnection(e,{connectionContext:t}){e.activeConnectionsContext=Object(i["filter"])(e.activeConnectionsContext,e=>e!==t)},deactivateConnectionFromExitUuid(e,{exitUuid:t}){e.activeConnectionsContext=Object(i["reject"])(e.activeConnectionsContext,e=>e.exitId===t)},setIsConnectionCreationInProgress(e,{value:t}){e.isConnectionCreationInProgress=t},setOperation({operations:e},{operation:t}){e[t.kind]=t},setBlockPositionTo(e,{position:{x:t,y:o},block:i}){i.ui_metadata.canvas_coordinates.x=t,i.ui_metadata.canvas_coordinates.y=o},setIsEditable(e,t){e.isEditable=t},setHasFlowChanges(e,t){e.hasFlowChanges=t},initDraggableForExitsByUuid(e){e.draggableForExitsByUuid={}},setIsBlockEditorOpen(e,t){e.isBlockEditorOpen=t},setInteractionDesignerHeaderBoundingClientRect(e,t){e.interactionDesignerHeaderBoundingClientRect=t}},u={removeConnectionFrom({commit:e},{block:{uuid:t},exit:{uuid:o}}){e("flow/block_setBlockExitDestinationBlockId",{blockId:t,exitId:o,destinationBlockId:void 0},{root:!0})},initializeConnectionCreateWith({commit:e},{block:{uuid:t},exit:{uuid:o},position:i}){if(!t||!o)throw new a["ValidationException"]("Unable to create connection without source: "+JSON.stringify({blockId:t,exitId:o}));const s={kind:n.CONNECTION_CREATE,data:{source:{blockId:t,exitId:o},position:i,targetId:null}};e("setOperation",{operation:s})},setConnectionCreateTargetBlock({commit:e,state:t},{block:o}){const{data:i}=t.operations[n.CONNECTION_CREATE];if(!i)throw new a["ValidationException"]("Unable to modify uninitialized operation: "+JSON.stringify(i));const{source:s,position:r}=i,c={kind:n.CONNECTION_CREATE,data:{source:s,position:r,targetId:o.uuid}};e("setOperation",{operation:c})},setConnectionCreateTargetBlockToNullFrom({commit:e,state:t},{block:o}){const{data:s}=t.operations[n.CONNECTION_CREATE];if(!s)throw new a["ValidationException"]("Unable to modify uninitialized operation: "+JSON.stringify(s));const{source:r,targetId:c,position:l}=s;if(!Object(i["isEqual"])(c,o.uuid))throw new a["ValidationException"]("Unable to nullify exit relocation from different exit.");const d={kind:n.CONNECTION_CREATE,data:{source:r,position:l,targetId:null}};e("setOperation",{operation:d})},applyConnectionCreate({commit:e,state:{operations:t}}){const{data:o}=t[n.CONNECTION_CREATE];if(!o)throw new a["ValidationException"]("Unable to complete uninitialized operation: "+JSON.stringify(o));const{source:{blockId:i,exitId:s},targetId:r}=o;e("flow/block_setBlockExitDestinationBlockId",{blockId:i,exitId:s,destinationBlockId:r},{root:!0});const c={kind:n.CONNECTION_CREATE,data:null};e("setOperation",{operation:c})},setIsEditable({commit:e},t){const o=Boolean(t);e("setIsEditable",o)},setHasFlowChanges({commit:e},t){e("setHasFlowChanges",Boolean(t))},async persistFlowAndHandleUiState({dispatch:e,commit:t,state:o,rootGetters:i,rootState:a}){if(!1===i.isFeatureTreeSaveEnabled||!1===o.isEditable)return void console.debug("skipping persistFlowAndHandleUiState");t("setTreeSaving",!0,{root:!0});const n=await e("flow/flow_persist",{persistRoute:Object(s["b"])("flows.persistFlow",{},a.trees.ui.routes),flowContainer:i["flow/activeFlowContainer"]},{root:!0}),c=new Promise(e=>setTimeout(e,r)),[l]=await Promise.all([n,c]);return t("setTreeSaving",!1,{root:!0}),null!==l&&void 0!==l?l:void 0}},b={namespaced:!0,state:c,getters:l,mutations:d,actions:u};function p(e,t){return o=>(void 0!==t&&void 0!==e||console.error("createDefaultBlockTypeInstallerFor","something weird is happening: the store is undefined","which might cause",'"TypeError: rawModule is undefined"'),o.$store.hasModule(["flow",e])||o.$store.registerModule(["flow",e],t))}function h(e,t){var o,a,s,r,n,c,l,d;return console.debug("store/builder","generateConnectionLayoutKeyFor",e.uuid,t.uuid),[[null===e||void 0===e||null===(o=e.ui_metadata)||void 0===o||null===(a=o.canvas_coordinates)||void 0===a?void 0:a.x,null===e||void 0===e||null===(s=e.ui_metadata)||void 0===s||null===(r=s.canvas_coordinates)||void 0===r?void 0:r.y],[null===t||void 0===t||null===(n=t.ui_metadata)||void 0===n||null===(c=n.canvas_coordinates)||void 0===c?void 0:c.x,null===t||void 0===t||null===(l=t.ui_metadata)||void 0===l||null===(d=l.canvas_coordinates)||void 0===d?void 0:d.y],e.label,t.label,...Object(i["map"])(e.exits,"name"),...Object(i["map"])(t.exits,"name")]}function f(e){var t,o,i,a;const s=120,r=110;let n=null===e||void 0===e||null===(t=e.ui_metadata)||void 0===t||null===(o=t.canvas_coordinates)||void 0===o?void 0:o.x,c=null===e||void 0===e||null===(i=e.ui_metadata)||void 0===i||null===(a=i.canvas_coordinates)||void 0===a?void 0:a.y;if(null==n||null==c){const e=v();n=e.x,c=e.y}return{x:null!=n?n+s:s,y:null!=c?c+r:r}}function v(){const e=document.getElementsByClassName("builder-canvas")[0],t=document.getElementsByClassName("tree-sidebar-container")[0],o=e.getBoundingClientRect(),i=void 0!==t?t.clientWidth:0;return{x:Math.round(Math.abs(o.left)+(window.innerWidth-i)/2),y:Math.round(Math.abs(o.top)+window.innerHeight/2)}}},b107:function(e,t,o){},b221:function(e,t,o){var i={"./1.0.0-rc1/IAdvancedSelectOneBlock.json":"467b","./1.0.0-rc1/ICaseBlock.json":"24dc","./1.0.0-rc1/ILocationResponseBlock.json":"b194","./1.0.0-rc1/ILogBlock.json":"7074","./1.0.0-rc1/IMessageBlock.json":"aa41","./1.0.0-rc1/INumericResponseBlock.json":"e0ae","./1.0.0-rc1/IOpenResponseBlock.json":"5831","./1.0.0-rc1/IOutputBlock.json":"5663","./1.0.0-rc1/IPhotoResponseBlock.json":"a0ef","./1.0.0-rc1/IPrintBlock.json":"79a9","./1.0.0-rc1/IReadBlock.json":"27e7","./1.0.0-rc1/IRunFlowBlock.json":"bf9a","./1.0.0-rc1/ISelectManyResponseBlock.json":"44db","./1.0.0-rc1/ISelectOneResponseBlock.json":"5149","./1.0.0-rc1/ISetContactPropertyBlock.json":"f37b","./1.0.0-rc1/ISetGroupMembershipBlock.json":"45d5","./1.0.0-rc1/flowSpecJsonSchema.json":"fc41","./1.0.0-rc2/IAdvancedSelectOneBlock.json":"5c3b","./1.0.0-rc2/ICaseBlock.json":"fabe","./1.0.0-rc2/ILocationResponseBlock.json":"24e6","./1.0.0-rc2/ILogBlock.json":"025b","./1.0.0-rc2/IMessageBlock.json":"5402","./1.0.0-rc2/INumericResponseBlock.json":"0999","./1.0.0-rc2/IOpenResponseBlock.json":"6612","./1.0.0-rc2/IOutputBlock.json":"c3a9","./1.0.0-rc2/IPhotoResponseBlock.json":"42f5","./1.0.0-rc2/IPrintBlock.json":"3d43","./1.0.0-rc2/IReadBlock.json":"56d3","./1.0.0-rc2/IRunFlowBlock.json":"4377","./1.0.0-rc2/ISelectManyResponseBlock.json":"468a","./1.0.0-rc2/ISelectOneResponseBlock.json":"897a","./1.0.0-rc2/ISetContactPropertyBlock.json":"9744","./1.0.0-rc2/ISetGroupMembershipBlock.json":"f2ae","./1.0.0-rc2/flowSpecJsonSchema.json":"5a2e","./1.0.0-rc3/IAdvancedSelectOneBlock.json":"ebe9","./1.0.0-rc3/ICaseBlock.json":"df71","./1.0.0-rc3/ILocationResponseBlock.json":"4b5a","./1.0.0-rc3/ILogBlock.json":"5c92","./1.0.0-rc3/IMessageBlock.json":"9f75","./1.0.0-rc3/INumericResponseBlock.json":"ca51","./1.0.0-rc3/IOpenResponseBlock.json":"284f","./1.0.0-rc3/IOutputBlock.json":"bf9b","./1.0.0-rc3/IPhotoResponseBlock.json":"3da6","./1.0.0-rc3/IPrintBlock.json":"b781","./1.0.0-rc3/IReadBlock.json":"5bbb","./1.0.0-rc3/IRunFlowBlock.json":"84e0","./1.0.0-rc3/ISelectManyResponseBlock.json":"347b","./1.0.0-rc3/ISelectOneResponseBlock.json":"8832","./1.0.0-rc3/ISetContactPropertyBlock.json":"9b07","./1.0.0-rc3/ISetGroupMembershipBlock.json":"e4a3","./1.0.0-rc3/flowSpecJsonSchema.json":"29d3","./1.0.0-rc4/IAdvancedSelectOneBlock.json":"171d","./1.0.0-rc4/ICaseBlock.json":"35a7","./1.0.0-rc4/ILocationResponseBlock.json":"c6df","./1.0.0-rc4/ILogBlock.json":"0468","./1.0.0-rc4/IMessageBlock.json":"6faa","./1.0.0-rc4/INumericResponseBlock.json":"d6b7","./1.0.0-rc4/IOpenResponseBlock.json":"6897","./1.0.0-rc4/IOutputBlock.json":"ee9c","./1.0.0-rc4/IPhotoResponseBlock.json":"fdc7","./1.0.0-rc4/IPrintBlock.json":"3897","./1.0.0-rc4/IReadBlock.json":"74af","./1.0.0-rc4/IRunFlowBlock.json":"a629","./1.0.0-rc4/ISelectManyResponseBlock.json":"bcf6","./1.0.0-rc4/ISelectOneResponseBlock.json":"fea9","./1.0.0-rc4/ISetContactPropertyBlock.json":"7464","./1.0.0-rc4/ISetGroupMembershipBlock.json":"f47e","./1.0.0-rc4/flowSpecJsonSchema.json":"9b2d","./current/IAdvancedSelectOneBlock.json":"9e25","./current/ICaseBlock.json":"0e0e","./current/ILocationResponseBlock.json":"24e9","./current/ILogBlock.json":"8b9f","./current/IMessageBlock.json":"1010","./current/INumericResponseBlock.json":"5cb6","./current/IOpenResponseBlock.json":"30f6","./current/IOutputBlock.json":"858c","./current/IPhotoResponseBlock.json":"768e","./current/IPrintBlock.json":"7cfe","./current/IReadBlock.json":"65d3","./current/IRunFlowBlock.json":"2ced","./current/ISelectManyResponseBlock.json":"d713","./current/ISelectOneResponseBlock.json":"d76c","./current/ISetContactPropertyBlock.json":"41c5","./current/ISetGroupMembershipBlock.json":"44b3","./current/flowSpecJsonSchema.json":"0eaa"};function a(e){var t=s(e);return o(t)}function s(e){if(!o.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=s,e.exports=a,a.id="b221"},b85b:function(e,t,o){"use strict";function i(e){return e.replace(/(['"])/g,"\\$1")}function a(e){return e.replace(/\\(['"])/g,"$1")}function s(e,t){const o=Object.entries(t).map(([t,o])=>{const a=i(e.find(e=>e.prompt===t).name);return"string"===typeof o?`IF(block.value = '${a}', '${i(o)}', '')`:`IF(block.value = '${a}', ${o}, '')`});return`@CONCATENATE(${o.join(",")})`}function r(e){var t;const o=/^@block\.response = '(?<choice>.+)'$/,i=null===(t=o.exec(e))||void 0===t?void 0:t.groups;if(void 0!==i){const{choice:e}=i;return a(e)}return e}function n(e){return e.includes("@")?e:`@block.response = '${i(e)}'`}o.d(t,"c",(function(){return i})),o.d(t,"b",(function(){return s})),o.d(t,"d",(function(){return r})),o.d(t,"a",(function(){return n}))},bc78:function(e,t,o){"use strict";o.d(t,"a",(function(){return i})),o.d(t,"b",(function(){return a}));const i=e=>{if(e.params.field){const t=e.params.field,o=document.getElementById(t);o?o.scrollIntoView({behavior:"smooth",block:"center"}):console.debug("Deep linking: cannot scroll to ",t," as the DOM element is not found")}},a=e=>{const t=document.querySelector(`#block\\/${e} .plain-draggable`);t?(console.debug("Deep linking: scrolling to the block",e,"on the DOM",t),t.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})):console.debug("Deep linking: cannot scroll block",e,"on the DOM",t)}},bffb:function(e,t,o){},c600:function(e,t,o){"use strict";o.r(t),o.d(t,"install",(function(){return O}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"mobile-primitive-message-block"},[t("base-block",{attrs:{block:e.block,"show-semantic-label":!1,"uses-default-contact-props-editor":e.usesDefaultContactPropsEditor,"uses-default-branching-editor":e.usesDefaultBranchingEditor},on:{handleBranchingTypeChangedToUnified:function(t){return e.handleBranchingTypeChangedToUnified({block:e.block})}}},[e._t("description",null,{slot:"description"}),e._t("resource-editors",(function(){return[t("per-language-resource-editor",{attrs:{block:e.block}})]}),{slot:"resource-editors"}),e._t("extras",null,{slot:"extras"}),e._t("vendor-extras",null,{slot:"vendor-extras"}),e._t("branching",null,{slot:"branching"}),e._t("contact-props",null,{slot:"contact-props"}),e._t("vendor",null,{slot:"vendor"})],2)],1)},a=[],s=o("2fe6"),r=o("9ab4"),n=o("4bb5"),c=o("1b40"),l=o("2ef0"),d=o("4004");const u="MobilePrimitives.Message",b={...d["a"],async createWith({getters:e,dispatch:t},{props:o}){o.type=u;const i=await t("flow/flow_addBlankResourceForEnabledModesAndLangs",null,{root:!0});return o.config={prompt:i.uuid},d["a"].createWith({getters:e,dispatch:t},{props:o})}},p={...Object(l["cloneDeep"])(d["b"]),actions:b};var h=p,f=o("4a51"),v=o("af98"),_=o("2fe1");Object(n["e"])("flow");const g=Object(n["e"])("builder"),m=Object(n["e"])("flow/"+u);let k=class extends(Object(_["c"])(f["a"])){constructor(...e){super(...e),Object(s["a"])(this,"block",void 0),Object(s["a"])(this,"usesDefaultBranchingEditor",void 0),Object(s["a"])(this,"usesDefaultContactPropsEditor",void 0),Object(s["a"])(this,"isEditable",void 0),Object(s["a"])(this,"handleBranchingTypeChangedToUnified",void 0)}};Object(r["__decorate"])([Object(c["b"])()],k.prototype,"block",void 0),Object(r["__decorate"])([Object(c["b"])({default:!0})],k.prototype,"usesDefaultBranchingEditor",void 0),Object(r["__decorate"])([Object(c["b"])({default:!1})],k.prototype,"usesDefaultContactPropsEditor",void 0),Object(r["__decorate"])([g.Getter],k.prototype,"isEditable",void 0),Object(r["__decorate"])([m.Action],k.prototype,"handleBranchingTypeChangedToUnified",void 0),k=Object(r["__decorate"])([Object(c["a"])({})],k);var j=k;const O=Object(v["c"])(u,h);var y=j,w=o("2877"),C=Object(w["a"])(y,i,a,!1,null,null,null);t["default"]=C.exports},c9c6:function(e,t,o){},cab8:function(e,t,o){"use strict";o.r(t),o.d(t,"Core_RunAnotherFlowBlock",(function(){return j})),o.d(t,"install",(function(){return y}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"core-run-flow-block"},[t("base-block",{attrs:{block:e.block,"show-semantic-label":!1,"uses-default-contact-props-editor":e.usesDefaultContactPropsEditor,"uses-default-branching-editor":e.usesDefaultBranchingEditor},on:{handleBranchingTypeChangedToUnified:function(t){return e.handleBranchingTypeChangedToUnified({block:e.block})}}},[e._t("description",null,{slot:"description"}),e._t("resource-editors",null,{slot:"resource-editors"}),e._t("extras",(function(){return[t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/config/flow_id`},scopedSlots:e._u([{key:"input-control",fn:function({isValid:o}){return[t("div",{staticClass:"form-group"},[t("text-editor",{attrs:{label:e._f("trans")("flow-builder.destination-flow"),placeholder:e._f("trans")("flow-builder.enter-destination-flow-id"),"valid-state":o},model:{value:e.destinationFlowId,callback:function(t){e.destinationFlowId=t},expression:"destinationFlowId"}})],1)]}}])})]}),{slot:"extras"}),e._t("vendor-extras",null,{slot:"vendor-extras"}),e._t("branching",null,{slot:"branching"}),e._t("contact-props",null,{slot:"contact-props"}),e._t("vendor",null,{slot:"vendor"})],2)],1)},a=[],s=o("2fe6"),r=o("9ab4"),n=o("4bb5"),c=o("1b40"),l=o("2ef0"),d=o("4004");const u="Core.RunFlow",b={...d["c"],otherFlows:(e,t,o,i)=>o.flow.flows.filter(e=>e.uuid!==i["flow/activeFlow"].uuid)},p={...d["a"],async setDestinationFlowId({commit:e},{blockId:t,newDestinationFlowId:o}){return e("flow/block_updateConfig",{blockId:t,newConfig:{flow_id:o}},{root:!0}),o},async createWith({getters:e,dispatch:t},{props:o}){return o.type=u,o.config={flow_id:void 0},d["a"].createWith({getters:e,dispatch:t},{props:o})}},h={...Object(l["cloneDeep"])(d["b"]),getters:b,actions:p};var f=h,v=o("4a51"),_=o("af98"),g=o("2fe1");const m=Object(n["e"])("flow/"+u),k=Object(n["e"])("builder");let j=class extends(Object(g["c"])(v["a"])){constructor(...e){super(...e),Object(s["a"])(this,"block",void 0),Object(s["a"])(this,"usesDefaultBranchingEditor",void 0),Object(s["a"])(this,"usesDefaultContactPropsEditor",void 0),Object(s["a"])(this,"handleBranchingTypeChangedToUnified",void 0)}get destinationFlowId(){return this.block.config.flow_id}set destinationFlowId(e){""===e?this.setDestinationFlowId({blockId:this.block.uuid,newDestinationFlowId:void 0}):this.setDestinationFlowId({blockId:this.block.uuid,newDestinationFlowId:e})}};Object(r["__decorate"])([Object(c["b"])()],j.prototype,"block",void 0),Object(r["__decorate"])([Object(c["b"])({default:!0})],j.prototype,"usesDefaultBranchingEditor",void 0),Object(r["__decorate"])([Object(c["b"])({default:!1})],j.prototype,"usesDefaultContactPropsEditor",void 0),Object(r["__decorate"])([m.Action],j.prototype,"setDestinationFlowId",void 0),Object(r["__decorate"])([m.Action],j.prototype,"handleBranchingTypeChangedToUnified",void 0),Object(r["__decorate"])([k.Getter],j.prototype,"isEditable",void 0),j=Object(r["__decorate"])([Object(c["a"])({})],j);var O=j;const y=Object(_["c"])(u,f);var w=O,C=o("2877"),x=Object(C["a"])(w,i,a,!1,null,null,null);t["default"]=x.exports},cd49:function(e,t,o){"use strict";o.r(t);var i={};o.r(i),o.d(i,"AudioLibrarySearchField",(function(){return I})),o.d(i,"AudioLibrarySelection",(function(){return W})),o.d(i,"AudioLibrarySelector",(function(){return J})),o.d(i,"ExpressionInput",(function(){return Oe})),o.d(i,"FloatEditor",(function(){return Ie})),o.d(i,"KeypadDigitsSelector",(function(){return Le})),o.d(i,"MarkdownView",(function(){return Ke})),o.d(i,"NumericEditor",(function(){return tt})),o.d(i,"PlainDraggable",(function(){return ct})),o.d(i,"TextEditor",(function(){return ht})),o.d(i,"ValidationMessage",(function(){return Ot}));var a={};o.r(a),o.d(a,"BuilderCanvas",(function(){return Ft})),o.d(a,"colorStates",(function(){return Nt})),o.d(a,"Connection",(function(){return Ut})),o.d(a,"DEBOUNCE_FLOW_PERSIST_MS",(function(){return Kt})),o.d(a,"ResourceViewer",(function(){return eo}));var s={};o.r(s),o.d(s,"ChoicesBuilder",(function(){return si})),o.d(s,"SelectOneResponseBlockContactPropertyEditor",(function(){return bi}));var r={};o.r(r),o.d(r,"ChoicesBuilder",(function(){return si})),o.d(r,"SelectOneResponseBlockContactPropertyEditor",(function(){return bi})),o.d(r,"AdvancedExitEditor",(function(){return mi})),o.d(r,"AdvancedExitsBuilder",(function(){return xi})),o.d(r,"BlockEditor",(function(){return Ti})),o.d(r,"BlockId",(function(){return Hi})),o.d(r,"BlockOutputBranchingConfig",(function(){return ta})),o.d(r,"OutputBranchingType",(function(){return Gi["a"]})),o.d(r,"Categorization",(function(){return na})),o.d(r,"ContactPropertyEditor",(function(){return va})),o.d(r,"EndRecordingDigitsEditor",(function(){return Oa})),o.d(r,"ExitSemanticLabelEditor",(function(){return Ba})),o.d(r,"GenericContactPropertyEditor",(function(){return La})),o.d(r,"GroupMembershipEditor",(function(){return Ga})),o.d(r,"LabelEditor",(function(){return Qa})),o.d(r,"MaxDigitEditor",(function(){return ss})),o.d(r,"MaxDurationSecondsEditor",(function(){return us})),o.d(r,"MaximumChoicesEditor",(function(){return ms})),o.d(r,"MaximumNumericEditor",(function(){return Cs})),o.d(r,"MinimumChoicesEditor",(function(){return Ms})),o.d(r,"MinimumNumericEditor",(function(){return Ls})),o.d(r,"NameEditor",(function(){return zs})),o.d(r,"PhoneRecorder",(function(){return Js})),o.d(r,"PhoneRecordingRecorderSelector",(function(){return ir})),o.d(r,"SemanticLabelEditor",(function(){return dr})),o.d(r,"SimplifiedNameEditor",(function(){return _r})),o.d(r,"TagSelector",(function(){return Cr})),o.d(r,"ThresholdEditor",(function(){return Pr})),o.d(r,"TimeoutEditor",(function(){return Rr})),o.d(r,"UploadMonitor",(function(){return Zr}));var n={};o.r(n),o.d(n,"SmartDevices_PhotoResponseBlock",(function(){return Qr["default"]})),o.d(n,"photoResponseBlockIntstaller",(function(){return Qr["install"]})),o.d(n,"SmartDevices_LocationResponseBlock",(function(){return en["default"]})),o.d(n,"locationResponseBlockInstaller",(function(){return en["install"]})),o.d(n,"MobilePrimitives_SelectOneResponseBlock",(function(){return tn["default"]})),o.d(n,"selectOneResponseBlockInstaller",(function(){return tn["install"]})),o.d(n,"MobilePrimitives_SelectManyResponseBlock",(function(){return on["default"]})),o.d(n,"selectManyResponseBlockInstaller",(function(){return on["install"]})),o.d(n,"MobilePrimitives_OpenResponseBlock",(function(){return an["default"]})),o.d(n,"openResponseBlockInstaller",(function(){return an["install"]})),o.d(n,"MobilePrimitives_NumericResponseBlock",(function(){return sn["default"]})),o.d(n,"numericResponseBlockInstaller",(function(){return sn["install"]})),o.d(n,"MobilePrimitives_MessageBlock",(function(){return rn["default"]})),o.d(n,"messageBlockInstaller",(function(){return rn["install"]})),o.d(n,"Core_CaseBlock",(function(){return nn["default"]})),o.d(n,"caseBlockInstaller",(function(){return nn["install"]})),o.d(n,"Core_SetGroupMembershipBlock",(function(){return cn["default"]})),o.d(n,"setGroupMembershipBlockInstaller",(function(){return cn["install"]})),o.d(n,"Core_RunFlowBlock",(function(){return ln["default"]})),o.d(n,"runFlowBlockInstaller",(function(){return ln["install"]})),o.d(n,"Core_LogBlock",(function(){return dn["default"]})),o.d(n,"logBlockInstaller",(function(){return dn["install"]})),o.d(n,"Core_OutputBlock",(function(){return un["default"]})),o.d(n,"outputBlockInstaller",(function(){return un["install"]})),o.d(n,"Core_SetContactPropertyBlock",(function(){return bn["default"]})),o.d(n,"setContactPropertyBlockInstaller",(function(){return bn["install"]})),o.d(n,"BaseBlock",(function(){return pn["BaseBlock"]}));var c={};o.r(c),o.d(c,"ExitBlockEditorToggle",(function(){return _n})),o.d(c,"FirstBlockEditorButton",(function(){return wn})),o.d(c,"FlowEditor",(function(){return Pn})),o.d(c,"InteractionTimeoutEditor",(function(){return Ln})),o.d(c,"FlowLabelEditor",(function(){return zn})),o.d(c,"LanguagesEditor",(function(){return Qn})),o.d(c,"ModesEditor",(function(){return rc}));var l={};o.r(l),o.d(l,"ImportMatcher",(function(){return dc["a"]})),o.d(l,"LanguageAdder",(function(){return _c}));var d={};o.r(d),o.d(d,"BlockErrorsExpandable",(function(){return xc})),o.d(d,"ErrorNotifications",(function(){return Tc})),o.d(d,"SelectionBanner",(function(){return $c})),o.d(d,"TreeBuilderToolbar",(function(){return nl}));var u={};o.r(u),o.d(u,"BLOCK_RESET_CONNECTIONS",(function(){return vl})),o.d(u,"Block",(function(){return _l})),o.d(u,"BlockExit",(function(){return El})),o.d(u,"BlockToolbar",(function(){return Ml})),o.d(u,"BlockTitle",(function(){return $l}));var b={};o.r(b),o.d(b,"ResourceEditorCell",(function(){return td})),o.d(b,"PerLanguageResourceEditorRow",(function(){return ld})),o.d(b,"PerModeResourceEditorRow",(function(){return _d})),o.d(b,"PerLanguageResourceEditor",(function(){return xd})),o.d(b,"PerModeResourceEditor",(function(){return Td})),o.d(b,"ResourceVariantTextEditor",(function(){return Ld}));var p={};o.r(p),o.d(p,"ResourceViewerBlock",(function(){return qd}));var h=o("a026"),f=o("2f62"),v=(o("4989"),o("ab8b0"),o("2dd8"),o("e607"),o("b107"),function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"audio-library-search-field dropdown"},[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.rawQuery,expression:"rawQuery"}],staticClass:"form-control",attrs:{type:"text",placeholder:e._f("trans")("flow-builder.search-audio-library"),disabled:e.isEntireLibraryModeEnabled},domProps:{value:e.rawQuery},on:{focus:e.activate,blur:e.deactivate,input:[function(t){t.target.composing||(e.rawQuery=t.target.value)},e.resetPagination]}}),t("span",{staticClass:"input-group-append"},[t("button",{staticClass:"btn btn-primary dropdown-toggle",class:{active:e.isEntireLibraryModeEnabled},on:{click:function(t){return t.preventDefault(),e.toggleAudioLibrary.apply(null,arguments)}}},[t("i",{staticClass:"glyphicon glyphicon-search"})])])]),e.query||e.isAudioLibraryEmpty||e.isEntireLibraryModeEnabled?t("div",{staticClass:"dropdown-menu"},[e.isEntireLibraryModeEnabled?[t("a",{staticClass:"disabled dropdown-item",attrs:{href:"#"},on:{click:function(e){e.preventDefault()}}},[t("button",{staticClass:"close active",on:{click:e.toggleAudioLibrary}},[e._v("x ")]),t("i",{staticClass:"glyphicon glyphicon-info-sign"}),e._v(" "+e._s(e._f("trans")("flow-builder.showing-entire-audio-library"))+" ")]),t("div",{staticClass:"dropdown-divider",attrs:{role:"separator"}})]:e._e(),e.isAudioLibraryEmpty?e._e():[e._l(e.search(e.query).slice(e.offset*e.limit,(e.offset+1)*e.limit),(function(o){return t("a",{key:o.audio_uuid,staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.select(o)}}},[e._v(" "+e._s(o.description)+" ")])})),e.query.length>=3&&!e.search(e.query).length?t("a",{staticClass:"disabled dropdown-item",attrs:{href:"#"},on:{click:function(e){e.preventDefault()}}},[e._v(" "+e._s(e._f("trans")("flow-builder.no-audio-files-found-for-X"))+' "'),t("em",[e._v(e._s(e.query))]),e._v('". ')]):e._e(),e.query&&e.query.length<3?t("a",{staticClass:"disabled dropdown-item",attrs:{href:"#"},on:{click:function(e){e.preventDefault()}}},[e._v(" "+e._s(e._f("trans")("flow-builder.enter-at-least-three-chars"))+" ")]):e._e(),e.hasPrevious||e.hasNext?[t("div",{staticClass:"dropdown-divider",attrs:{role:"separator"}}),t("div",{staticClass:"pagers dropdown-item"},[t("a",{staticClass:"col-md-6",class:{disabled:!e.hasPrevious},attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.decrementPage.apply(null,arguments)}}},[t("i",{staticClass:"glyphicon glyphicon-chevron-left"}),e._v(" "+e._s(e._f("trans")("flow-builder.previous"))+" ")]),t("a",{staticClass:"col-md-6 text-right",class:{disabled:!e.hasNext},attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.incrementPage.apply(null,arguments)}}},[e._v(" "+e._s(e._f("trans")("flow-builder.next"))+" "),t("i",{staticClass:"glyphicon glyphicon-chevron-right"})])])]:e._e()],e.isAudioLibraryEmpty?t("a",{staticClass:"disabled dropdown-item",attrs:{href:"#"},on:{click:function(e){e.preventDefault()}}},[t("i",{staticClass:"glyphicon glyphicon-warning-sign"}),e._v(" "+e._s(e._f("trans")("flow-builder.audio-lib-empty-for-this-org"))+" ")]):e._e()],2):e._e()])}),g=[],m=o("2fe6"),k=o("9ab4"),j=o("6062"),O=o("2ef0"),y=o.n(O),w=o("f837"),C=o.n(w),x=o("2fe1"),E=o("1b40"),B=o("4a51");let I=class extends(Object(x["c"])(B["a"],C.a.mixin)){constructor(...e){super(...e),Object(m["a"])(this,"langId",void 0),Object(m["a"])(this,"audioFiles",void 0),Object(m["a"])(this,"isActive",!1),Object(m["a"])(this,"rawQuery",""),Object(m["a"])(this,"cache",{}),Object(m["a"])(this,"isEntireLibraryModeEnabled",!1),Object(m["a"])(this,"offset",0),Object(m["a"])(this,"limit",10)}get query(){return Object(O["trim"])(this.rawQuery)}get isAudioLibraryEmpty(){var e;return this.isActive&&0===(null===(e=this.audioFiles)||void 0===e?void 0:e.length)}get hasNext(){return this.search(this.query).length/(this.offset+1)>this.limit}get hasPrevious(){return this.offset>0}search(e){var t;if(this.isEntireLibraryModeEnabled)return null!==(t=this.audioFiles)&&void 0!==t?t:[];if(e.length<3)return[];if(console.debug("flow-builder.ResourceViewer.AudioLibrarySearchField","searching",e),e in this.cache)return console.debug("flow-builder.ResourceViewer.AudioLibrarySearchField","cache hit",e),this.cache[e];console.debug("flow-builder.ResourceViewer.AudioLibrarySearchField","cache miss",e);const o=["uri","description"];return this.cache[e]=new j["a"](this.audioFiles,{keys:o,fieldNormWeight:1}).search(e).map(e=>e.item),this.cache[e]}incrementPage(){this.hasNext&&(this.offset+=1)}decrementPage(){this.hasPrevious&&(this.offset-=1)}resetPagination(){this.offset=0}toggleAudioLibrary(){this.isEntireLibraryModeEnabled=!this.isEntireLibraryModeEnabled,this.resetPagination()}select(e){this.$emit("select",{value:e,langId:this.langId})}activate(){this.isActive=!0}deactivate(){this.isActive=!1}};Object(k["__decorate"])([Object(E["b"])()],I.prototype,"langId",void 0),Object(k["__decorate"])([Object(E["b"])({required:!0})],I.prototype,"audioFiles",void 0),I=Object(k["__decorate"])([Object(E["a"])({})],I);var S=I,P=S,M=(o("04b9"),o("2877")),F=Object(M["a"])(P,v,g,!1,null,"01cc8d75",null),T=(F.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"audio-library-selection well well-sm",class:{"tree-audio-control-text-container-selectable":e.selectable,"tree-audio-control-text-container-selected":!e.selectable},attrs:{"data-audio-file-container-language":e.langId}},[t("button",{staticClass:"audio-library-selection-clear-selection btn-ghost pull-right",on:{click:function(t){return t.preventDefault(),e.clear.apply(null,arguments)}}},[t("i",{staticClass:"glyphicon glyphicon-remove"})]),t("div",{staticClass:"btn-group audio-library-selection-download-dropdown"},[e._m(0),t("div",{staticClass:"dropdown-menu dropdown-menu-right"},[t("a",{staticClass:"dropdown-item",attrs:{href:e.audioFileUrl,target:"_blank"}},[e._v(" "+e._s(e._f("trans")("flow-builder.original-file"))+" ")])])]),t("p",{staticClass:"audio-file-description",attrs:{title:e.audioFileUrl}},[e._v(" "+e._s(e.audioFileDescription)+" ")]),t("div",{staticClass:"btn-toolbar"},[e.selectable?t("button",{staticClass:"btn btn-secondary btn-xs",on:{click:function(t){return t.preventDefault(),e.select.apply(null,arguments)}}},[t("i",{staticClass:"glyphicon glyphicon-ok"})]):e._e()])])}),A=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("button",{staticClass:"btn btn-ghost dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown"}},[t("span",{staticClass:"glyphicon glyphicon-download-alt",attrs:{"aria-hidden":"true"}}),t("span",{staticClass:"caret"})])}],V=o("c1df"),R=o.n(V);function L(e,t="llll"){return null===e||void 0===e?"":R.a.utc(e).format(t)}function D(e,t){return R.a.utc(e).fromNow(t)}function N(e,t="seconds",o){const i=R.a.locale();R.a.locale("en");const a=R.a.duration(e,t).humanize(o);return R.a.locale(i),a}function $(e,t,o="seconds",i){const a=R.a.locale();R.a.locale(t);const s=R.a.duration(e,o).humanize(i);return R.a.locale(a),s}let U=class extends E["c"]{};U=Object(k["__decorate"])([Object(E["a"])({filters:{formatDate:L,fromNow:D,formatDuration:N,formatDurationLocalized:$}})],U);var H=U;let W=class extends(Object(x["c"])(B["a"],H)){constructor(...e){super(...e),Object(m["a"])(this,"audioFile",void 0),Object(m["a"])(this,"selectable",void 0),Object(m["a"])(this,"langId",void 0)}get audioFileUrl(){var e;return null===(e=this.audioFile)||void 0===e?void 0:e.uri}get audioFileDescription(){var e;return null===(e=this.audioFile)||void 0===e?void 0:e.description}select(){this.$emit("select")}clear(){this.$emit("clear")}};Object(k["__decorate"])([Object(E["b"])({type:Object,required:!0})],W.prototype,"audioFile",void 0),Object(k["__decorate"])([Object(E["b"])()],W.prototype,"selectable",void 0),Object(k["__decorate"])([Object(E["b"])()],W.prototype,"langId",void 0),W=Object(k["__decorate"])([Object(E["a"])({})],W);var z=W,G=z,q=(o("5108"),Object(M["a"])(G,T,A,!1,null,null,null)),K=(q.exports,function(){var e=this,t=e._self._c;return t("div",{staticClass:"audio-library-selector"},[e.selectedAudioUri?t("audio-library-selection",{attrs:{"audio-file":e.selectedFile,"lang-id":e.langId},on:{clear:e.clearSelection}}):[t("audio-library-search-field",{attrs:{"lang-id":e.langId,"audio-files":e.audioFiles},on:{select:e.selectAudioFile}})]],2)}),Z=[],X=o("9300");const J={props:["alternateSelections","selectedAudioUri","langId","audioFiles","isPlaying","audioPlayerUrl","resourceId"],computed:{...Object(f["c"])(["availableAudiosByUri"]),selectedFile(){return this.availableAudiosByUri[this.selectedAudioUri]}},methods:{...Object(f["b"])("flow",["resource_setOrCreateValueModeSpecific"]),clearSelection(){this.resource_setOrCreateValueModeSpecific({resourceId:this.resourceId,filter:{language_id:this.langId,content_type:X["SupportedContentType"].AUDIO,modes:[X["SupportedMode"].IVR]},value:""}),this.$emit("change")},selectAudioFile({value:e,langId:t}){this.resource_setOrCreateValueModeSpecific({resourceId:this.resourceId,filter:{language_id:t,content_type:X["SupportedContentType"].AUDIO,modes:[X["SupportedMode"].IVR]},value:e.uri}),this.$emit("change")}}};var Y=J,Q=Y,ee=Object(M["a"])(Q,K,Z,!1,null,null,null),te=(ee.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"expression-input form-group"},[e.label?t("label",{class:e.labelClass},[e._v(e._s(e.label))]):e._e(),t("div",{staticClass:"input-group"},[e.prependText?t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[e._v(e._s(e.prependText))])]):e._e(),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.expression,expression:"expression"}],ref:"input",class:["form-control",{"is-invalid":e.isInvalid}],attrs:{disabled:e.disabled,rows:e.rows,placeholder:e.placeholder},domProps:{value:e.expression},on:{click:function(t){return e.handleClick()},input:[function(t){t.target.composing||(e.expression=t.target.value)},function(t){return e.$emit("input",t.target.value)}]}}),e._v(" "),t("div",{ref:"suggest",staticClass:"cloned-auto-suggest-content"})]),e._t("default")],2)}),oe=[],ie=o("4b17e"),ae=o.n(ie),se=(o("c6c1"),o("4bb5"));function re(){return[{trigger:"@",values:["@block"]},{trigger:"@block.",values:["@block.entered_at","@block.response","@block.value"]}]}const ne=["phone","urns","preferred_mode","preferred_urn","active_urn","created_at","timezone","language","groups","properties"];function ce(e){const t=e.subscriberPropertyFields,o={trigger:"@contact.",values:ne.map(e=>"@contact."+e)},i={trigger:"@contact.properties.",values:[]},a=[];return t.forEach(e=>{ne.includes(e.name)||(o.values.push("@contact."+e.name),a.push({trigger:`@contact.${e.name}.`,values:Object.keys(e).map(t=>`@contact.${e.name}.${t}`)})),i.values.push("@contact.properties."+e.name),a.push({trigger:`@contact.properties.${e.name}.`,values:Object.keys(e).map(t=>`@contact.properties.${e.name}.${t}`)})}),[{trigger:"@",values:["@contact"]},o,i,...a]}function le(e){const t=new Set(e.blocks.map(e=>["@flow."+e.uuid,"@flow."+e.name]).flat());return[{trigger:"@",values:["@flow"]},{trigger:"@flow.",values:[...t]}]}var de=o("20c7");function ue(){const e=new Map;for(const t of de["MethodNodeEvaluatorFactory"].defaultHandlers())for(const o of t.handles()){const t=o.substring(0,2),i=t.toUpperCase(),a=o.toUpperCase();e.has(t)?(e.set(t,[...e.get(t),o]),e.set(i,[...e.get(i),a])):(e.set(t,[o]),e.set(i,[a]))}return e}function be(){return Array.from(ue().entries()).map(([e,t])=>({trigger:e,values:t.map(e=>({value:e+"()",focusText:[-1,-1]}))}))}function pe(e,t){e.startsWith("@")&&t.forEach(t=>{const o="string"===typeof t?t:t.value;console.assert(o.startsWith("@"),`${o} for trigger ${e} does not start with @`)})}function he(e){const t=new Map;for(let i=0;i<e.length;i+=1){var o;const{trigger:a,values:s}=e[i];pe(a,s),t.set(a,Object(O["uniq"])([...null!==(o=t.get(a))&&void 0!==o?o:[],...s]))}return Array.from(t.entries()).map(([e,t])=>({trigger:e,values:t}))}function fe(e){var t;return null!==(t=e.blocks.map(e=>e.name).filter(Boolean))&&void 0!==t?t:[]}function ve(e,t){return e.flatMap(o=>[{trigger:t+".",values:e.map(e=>`${t}.${e}`)},{trigger:`${t}.${o}.`,values:[`${t}.${o}.entered_at`,`${t}.${o}.exited_at`,`${t}.${o}.response`,`${t}.${o}.value`,`${t}.${o}.block`,`${t}.${o}.exit`]},{trigger:`${t}.${o}.block.`,values:[`${t}.${o}.block.id`,`${t}.${o}.block.name`,`${t}.${o}.block.label`]},{trigger:`${t}.${o}.exit.`,values:[`${t}.${o}.exit.name`,`${t}.${o}.exit.id`]}])}function _e(e){return[{trigger:"@",values:["@results"]},...ve(fe(e),"@results")]}function ge(e){return[{trigger:e+".",values:[e+".language",e+".localization",e+".entered_at",e+".exited_at",e+".flow",e+".mode",e+".results",e+".parent",e+".child"]},{trigger:e+".language.",values:[e+".language.id",e+".language.label",e+".language.variant",e+".language.iso_639_3"]},{trigger:e+".flow.",values:[e+".flow.id",e+".flow.name"]}]}function me(e){const t=fe(e);return[{trigger:"@",values:["@run"]},...ge("@run"),...ve(t,"@run.results"),...ge("@run.parent"),...ge("@run.child"),{trigger:"@",values:["@parent","@child"]},...ge("@parent"),...ge("@child")]}function ke(e){return he([{trigger:"@",values:[{value:"@()",focusText:[-1,-1]}]},...re(),...ce(e),...le(e),...be(),...me(e),..._e(e)])}const je=Object(se["e"])("flow");let Oe=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"label",void 0),Object(m["a"])(this,"labelClass",void 0),Object(m["a"])(this,"placeholder",void 0),Object(m["a"])(this,"currentExpression",void 0),Object(m["a"])(this,"expressionIdentifier",void 0),Object(m["a"])(this,"rows",void 0),Object(m["a"])(this,"validState",void 0),Object(m["a"])(this,"prependText",void 0),Object(m["a"])(this,"disabled",void 0),Object(m["a"])(this,"disabledAutoComplete",void 0),Object(m["a"])(this,"suggest",{}),Object(m["a"])(this,"activeFlow",void 0),Object(m["a"])(this,"subscriberPropertyFields",void 0)}get autoSuggestDropdown(){var e;return null===(e=this.suggest.dropdown)||void 0===e?void 0:e.dropdown}get refAutoSuggestElement(){return this.$refs.suggest}get refInputElement(){return this.$refs.input}get isInvalid(){return!1===this.validState}get expression(){return this.currentExpression}set expression(e){void 0!==e&&(null===this.expressionIdentifier?this.$emit("commitExpressionChange",e):this.$emit("commitExpressionChange",{identifier:this.expressionIdentifier,value:e}))}get suggestions(){var e,t;return ke({blocks:null!==(e=null===(t=this.activeFlow)||void 0===t?void 0:t.blocks)&&void 0!==e?e:[],subscriberPropertyFields:this.subscriberPropertyFields})}portAutoSuggestContent(){var e;this.autoSuggestDropdown.style.left="0px",this.autoSuggestDropdown.style.top=this.refInputElement.clientHeight+"px",null===(e=this.refAutoSuggestElement)||void 0===e||e.appendChild(this.autoSuggestDropdown)}debounce_portAutoSuggestContent(){this.$nextTick(()=>{setTimeout(()=>{this.portAutoSuggestContent()},500)})}handleClick(){!1===this.disabledAutoComplete?this.debounce_portAutoSuggestContent():console.debug("ExpressionInput","handleClick","disabledAutoComplete is false")}mounted(){if(!1===this.disabledAutoComplete){const e=this.refInputElement;this.suggest=new ae.a({caseSensitive:!1,suggestions:this.suggestions,onChange:()=>e.dispatchEvent(new Event("input"))},e),this.debounce_portAutoSuggestContent()}else console.debug("ExpressionInput","mounted","disabledAutoComplete is false")}updated(){!1===this.disabledAutoComplete?this.debounce_portAutoSuggestContent():console.debug("ExpressionInput","updated","disabledAutoComplete is false")}focus(){this.refInputElement.focus()}};Object(k["__decorate"])([Object(E["b"])({type:[String,Number],required:!0})],Oe.prototype,"label",void 0),Object(k["__decorate"])([Object(E["b"])({type:String,default:"text-primary"})],Oe.prototype,"labelClass",void 0),Object(k["__decorate"])([Object(E["b"])({type:String,default:""})],Oe.prototype,"placeholder",void 0),Object(k["__decorate"])([Object(E["b"])({type:String})],Oe.prototype,"currentExpression",void 0),Object(k["__decorate"])([Object(E["b"])({type:[String,Number],default:null})],Oe.prototype,"expressionIdentifier",void 0),Object(k["__decorate"])([Object(E["b"])({type:Number,default:1})],Oe.prototype,"rows",void 0),Object(k["__decorate"])([Object(E["b"])({type:Boolean,default:null})],Oe.prototype,"validState",void 0),Object(k["__decorate"])([Object(E["b"])({type:String,default:""})],Oe.prototype,"prependText",void 0),Object(k["__decorate"])([Object(E["b"])({type:Boolean,default:!1})],Oe.prototype,"disabled",void 0),Object(k["__decorate"])([Object(E["b"])({type:Boolean,default:!1})],Oe.prototype,"disabledAutoComplete",void 0),Object(k["__decorate"])([je.Getter],Oe.prototype,"activeFlow",void 0),Object(k["__decorate"])([se["b"]],Oe.prototype,"subscriberPropertyFields",void 0),Oe=Object(k["__decorate"])([Object(E["a"])({})],Oe);var ye=Oe,we=ye,Ce=Object(M["a"])(we,te,oe,!1,null,null,null),xe=Ce.exports,Ee=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"float-editor"},[t("label",{staticClass:"text-primary"},[e._v(e._s(e.label))]),t("div",[t("input",{staticClass:"form-control",class:{"is-invalid":e.isInvalid},attrs:{type:"number",min:e.min,placeholder:e.placeholder,step:e.step},domProps:{value:e.value},on:{keypress:e.filterFloat,keydown:function(t){return e.$emit("keydown",t)},input:function(t){return e.$emit("input",t.target.value)}}})]),e._t("default")],2)},Be=[];let Ie=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"label",void 0),Object(m["a"])(this,"placeholder",void 0),Object(m["a"])(this,"step",void 0),Object(m["a"])(this,"value",void 0),Object(m["a"])(this,"min",void 0),Object(m["a"])(this,"regexFloatFiltering",void 0),Object(m["a"])(this,"validState",void 0)}get isInvalid(){return"boolean"===typeof this.validState&&!this.validState}filterFloat(e){null===new RegExp(this.regexFloatFiltering,"g").exec(e.key)&&e.preventDefault()}};Object(k["__decorate"])([Object(E["b"])({type:[String,Number],required:!0})],Ie.prototype,"label",void 0),Object(k["__decorate"])([Object(E["b"])({type:String,default:""})],Ie.prototype,"placeholder",void 0),Object(k["__decorate"])([Object(E["b"])({type:String,default:"0.1"})],Ie.prototype,"step",void 0),Object(k["__decorate"])([Object(E["b"])({type:[String,Number],required:!0})],Ie.prototype,"value",void 0),Object(k["__decorate"])([Object(E["b"])({type:[String,Number],required:!0,default:""})],Ie.prototype,"min",void 0),Object(k["__decorate"])([Object(E["b"])({type:String,default:"[0-9-.,]"})],Ie.prototype,"regexFloatFiltering",void 0),Object(k["__decorate"])([Object(E["b"])({type:Boolean})],Ie.prototype,"validState",void 0),Ie=Object(k["__decorate"])([Object(E["a"])({})],Ie);var Se=Ie,Pe=Se,Me=Object(M["a"])(Pe,Ee,Be,!1,null,null,null),Fe=(Me.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"keypad-digits-selector"},[t("label",{staticClass:"text-primary"},[e._v(e._s(e.label))]),t("vue-multiselect",{class:{invalid:!1===e.validState},attrs:{options:e.options,placeholder:e.placeholder,"show-labels":!1,"preselect-first":!0,"track-by":"name",label:"label"},model:{value:e.modelValue,callback:function(t){e.modelValue=t},expression:"modelValue"}}),e._t("default")],2)}),Te=[],Ae=o("8e5f"),Ve=o.n(Ae);const Re="1234567890#*";let Le=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"label",void 0),Object(m["a"])(this,"value",void 0),Object(m["a"])(this,"placeholder",void 0),Object(m["a"])(this,"validState",void 0)}get options(){return[{name:Re,label:this.trans("flow-builder.any-key")},...Re.split("").map(e=>({name:e,label:e}))]}get modelValue(){return this.options.find(e=>this.value.includes(e.name))}set modelValue(e){this.$emit("input",null===e||void 0===e?void 0:e.name)}};Object(k["__decorate"])([Object(E["b"])({type:String,required:!0})],Le.prototype,"label",void 0),Object(k["__decorate"])([Object(E["b"])({type:String,required:!0})],Le.prototype,"value",void 0),Object(k["__decorate"])([Object(E["b"])({type:String,default:""})],Le.prototype,"placeholder",void 0),Object(k["__decorate"])([Object(E["b"])({type:Boolean,default:!0})],Le.prototype,"validState",void 0),Le=Object(k["__decorate"])([Object(E["a"])({components:{VueMultiselect:Ve.a}})],Le);var De=Le,Ne=De,$e=(o("7ef8"),Object(M["a"])(Ne,Fe,Te,!1,null,"008079cd",null)),Ue=($e.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t(e.tag,{tag:"component",staticClass:"markdown-view",domProps:{innerHTML:e._s(e.html)}})}),He=[],We=o("7c5c"),ze=o("c0c4");const Ge=["b","i","strong","em"];function qe(e,t=Ge){return ze["sanitize"](We["marked"].parse(e),{ALLOWED_TAGS:t})}const Ke=Object(h["defineComponent"])({name:"MarkdownView",props:{tag:{type:String,default:"div"},markdown:{type:String,required:!0}},computed:{html(){return qe(this.markdown)}}});var Ze=Ke,Xe=Ze,Je=Object(M["a"])(Xe,Ue,He,!1,null,null,null),Ye=Je.exports,Qe=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"numeric-editor"},[t("label",{staticClass:"text-primary mb-0 d-flex justify-content-between"},[e._v(" "+e._s(e.label)+" "),e.tooltipHint?t("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.tooltipHint,expression:"tooltipHint",modifiers:{hover:!0}}],staticClass:"fa-btn text-primary",attrs:{icon:["fas","info-circle"]}}):e._e()],1),t("div",{staticClass:"small mb-2"},[e._v(" "+e._s(e.subTitle)+" ")]),t("div",[t("input",{staticClass:"form-control",class:{"is-invalid":e.isInvalid},attrs:{type:"number",min:"0",placeholder:e.placeholder},domProps:{value:e.value},on:{keypress:e.filterNumeric,keydown:function(t){return e.$emit("keydown",t)},input:function(t){return e.$emit("input",t.target.value)}}})]),e._t("default")],2)},et=[];let tt=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"validState",void 0),Object(m["a"])(this,"label",void 0),Object(m["a"])(this,"placeholder",void 0),Object(m["a"])(this,"value",void 0),Object(m["a"])(this,"regexNumericFiltering",void 0),Object(m["a"])(this,"subTitle",void 0),Object(m["a"])(this,"tooltipHint",void 0)}get isInvalid(){return"boolean"===typeof this.validState&&!this.validState}filterNumeric(e){null===new RegExp(this.regexNumericFiltering,"g").exec(e.key)&&e.preventDefault()}};Object(k["__decorate"])([Object(E["b"])({type:Boolean})],tt.prototype,"validState",void 0),Object(k["__decorate"])([Object(E["b"])({type:[String,Number],required:!0})],tt.prototype,"label",void 0),Object(k["__decorate"])([Object(E["b"])({type:String,default:""})],tt.prototype,"placeholder",void 0),Object(k["__decorate"])([Object(E["b"])({type:[String,Number]})],tt.prototype,"value",void 0),Object(k["__decorate"])([Object(E["b"])({type:String,default:"[0-9-]"})],tt.prototype,"regexNumericFiltering",void 0),Object(k["__decorate"])([Object(E["b"])({type:String,default:""})],tt.prototype,"subTitle",void 0),Object(k["__decorate"])([Object(E["b"])({type:String,default:""})],tt.prototype,"tooltipHint",void 0),tt=Object(k["__decorate"])([Object(E["a"])({})],tt);var ot=tt,it=ot,at=Object(M["a"])(it,Qe,et,!1,null,null,null),st=(at.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"plain-draggable"},[e._t("default")],2)}),rt=[],nt=o("3d6b");Object(se["e"])("builder");let ct=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"startX",void 0),Object(m["a"])(this,"startY",void 0),Object(m["a"])(this,"isEditable",void 0),Object(m["a"])(this,"dragHandleId",void 0),Object(m["a"])(this,"draggable",null)}onToggleEditable(e){this.draggable.disabled=!e}mounted(){console.debug("PlainDraggable.vue","mounted");const e=void 0!==this.dragHandleId?document.getElementById(this.dragHandleId):this.$el.querySelectorAll(".draggable-handle")[0];this.draggable=new nt["a"](this.$el,{containment:document.querySelector(".builder-canvas"),autoScroll:!0,leftTop:!1,disabled:!1,onDrag:this.handleDragged.bind(this),onDragStart:this.handleDragStarted.bind(this),onDragEnd:this.handleDragEnded.bind(this),left:this.startX,top:this.startY,handle:e}),this.handleInitialized()}destroyed(){var e;const{draggable:t}=this;this.$emit("destroyed",{draggable:t}),null===(e=this.draggable)||void 0===e||e.remove()}handleInitialized(){const{draggable:e}=this;this.$emit("initialized",{draggable:e})}handleDragged(e){const{draggable:t}=this;this.$emit("dragged",{draggable:t,position:e})}handleDragStarted(e){const{draggable:t}=this;this.$emit("dragStarted",{draggable:t,position:e})}handleDragEnded(e){const{draggable:t}=this;this.$emit("dragEnded",{draggable:t,position:e})}};Object(k["__decorate"])([Object(E["b"])(Number)],ct.prototype,"startX",void 0),Object(k["__decorate"])([Object(E["b"])(Number)],ct.prototype,"startY",void 0),Object(k["__decorate"])([Object(E["b"])({type:Boolean,required:!0})],ct.prototype,"isEditable",void 0),Object(k["__decorate"])([Object(E["b"])(String)],ct.prototype,"dragHandleId",void 0),Object(k["__decorate"])([Object(E["d"])("isEditable")],ct.prototype,"onToggleEditable",null),ct=Object(k["__decorate"])([Object(E["a"])({})],ct);var lt=ct,dt=lt,ut=Object(M["a"])(dt,st,rt,!1,null,null,null),bt=(ut.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"text-editor"},[e.label?t("label",{class:e.labelClass},[e._v(e._s(e.label))]):e._e(),t("textarea",{staticClass:"form-control",class:{"is-invalid":e.isInvalid},attrs:{placeholder:e.placeholder,rows:e.rows},domProps:{value:e.value},on:{keydown:function(t){return e.$emit("keydown",t)},input:function(t){return e.$emit("input",t.target.value)}}}),e._v(" "),e._t("default")],2)}),pt=[];let ht=class extends E["c"]{constructor(...e){super(...e),Object(m["a"])(this,"label",void 0),Object(m["a"])(this,"labelClass",void 0),Object(m["a"])(this,"placeholder",void 0),Object(m["a"])(this,"value",void 0),Object(m["a"])(this,"validState",void 0),Object(m["a"])(this,"rows",void 0)}get isInvalid(){return"boolean"===typeof this.validState&&!this.validState}};Object(k["__decorate"])([Object(E["b"])({type:[String,Number],required:!0})],ht.prototype,"label",void 0),Object(k["__decorate"])([Object(E["b"])({type:String,default:"text-primary"})],ht.prototype,"labelClass",void 0),Object(k["__decorate"])([Object(E["b"])({type:String,required:!0})],ht.prototype,"placeholder",void 0),Object(k["__decorate"])([Object(E["b"])({type:String,required:!1})],ht.prototype,"value",void 0),Object(k["__decorate"])([Object(E["b"])({type:Boolean})],ht.prototype,"validState",void 0),Object(k["__decorate"])([Object(E["b"])({type:Number,default:1})],ht.prototype,"rows",void 0),ht=Object(k["__decorate"])([Object(E["a"])({})],ht);var ft=ht,vt=ft,_t=Object(M["a"])(vt,bt,pt,!1,null,null,null),gt=(_t.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"validation-message form-group",attrs:{id:e.messageKey}},[e._t("input-control",null,{isValid:e.isValid}),e.shouldHideValidation?e._e():t("small",{staticClass:"text-danger"},[e._v(" "+e._s(e.errorMessage)+" ")])],2)}),mt=[],kt=(o("13d5"),o("5fda"));const jt=Object(se["e"])("validation");let Ot=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"messageKey",void 0),Object(m["a"])(this,"shouldHideValidation",void 0),Object(m["a"])(this,"overrides",void 0),Object(m["a"])(this,"flattenErrorMessages",void 0)}get errorMessage(){if(!Object.prototype.hasOwnProperty.call(this.flattenErrorMessages,this.messageKey))return"";const e=this.flattenErrorMessages[this.messageKey],t=this.messageOverrides.has(e)?this.messageOverrides.get(e):e;return t.trim().replace(/^(.)/,e=>e.toUpperCase())}get messageOverrides(){var e;return Object.entries(null!==(e=this.overrides)&&void 0!==e?e:{}).reduce((e,[t,o])=>(e.set(this.trans("flow-builder-validation."+t),this.trans("flow-builder-validation."+o)),e),new Map)}get isValid(){return!this.errorMessage}};Object(k["__decorate"])([Object(E["b"])()],Ot.prototype,"messageKey",void 0),Object(k["__decorate"])([Object(E["b"])({default:!1})],Ot.prototype,"shouldHideValidation",void 0),Object(k["__decorate"])([Object(E["b"])()],Ot.prototype,"overrides",void 0),Object(k["__decorate"])([jt.Getter],Ot.prototype,"flattenErrorMessages",void 0),Ot=Object(k["__decorate"])([Object(E["a"])({components:{BAlert:kt["a"]}})],Ot);var yt=Ot,wt=yt,Ct=Object(M["a"])(wt,gt,mt,!1,null,null,null),xt=(Ct.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return e.activeFlow?t("div",{staticClass:"builder-canvas no-select",style:{minWidth:e.canvasWidth+"px",minHeight:e.canvasHeight+"px"}},e._l(e.activeFlow.blocks,(function(e){return t("block",{key:e.uuid,attrs:{block:e,x:e.ui_metadata.canvas_coordinates.x,y:e.ui_metadata.canvas_coordinates.y}})})),1):e._e()}),Et=[];const Bt=Object(se["e"])("flow"),It=(Object(se["e"])("validation"),Object(se["e"])("builder")),St=-10,Pt=120,Mt=300;let Ft=class extends E["c"]{constructor(...e){super(...e),Object(m["a"])(this,"widthAdjustment",void 0),Object(m["a"])(this,"debounceVerticalScroll",Object(O["debounce"])((function(){window.scrollTo({top:this.canvasHeight})}),Mt)),Object(m["a"])(this,"debounceHorizontalScroll",Object(O["debounce"])((function(){window.scrollTo({left:this.canvasWidth})}),Mt)),Object(m["a"])(this,"flows",void 0),Object(m["a"])(this,"activeFlow",void 0),Object(m["a"])(this,"isBlockEditorOpen",void 0)}onCanvasHeightChanged(e){console.debug("canvas height changed to",e),this.debounceVerticalScroll()}onCanvasWidthChanged(e){console.debug("canvas width changed to",e),this.debounceHorizontalScroll()}get blockHeight(){var e;const t=this.$refs["block/"+(null===(e=this.blockAtTheLowestPosition)||void 0===e?void 0:e.uuid)];if(!t){var o;console.debug("Interaction Designer","Unable to find DOM element corresponding to lowest block id: ","block/"+(null===(o=this.blockAtTheLowestPosition)||void 0===o?void 0:o.uuid));const e=84;return e}return t[0].$refs.draggable.$el.offsetHeight}get blockWidth(){var e;const t=this.$refs["block/"+(null===(e=this.blockAtTheFurthestRightPosition)||void 0===e?void 0:e.uuid)];if(!t){var o;console.debug("Interaction Designer","Unable to find DOM element corresponding to furthest right block id: ","block/"+(null===(o=this.blockAtTheFurthestRightPosition)||void 0===o?void 0:o.uuid));const e=110;return e}return t[0].$refs.draggable.$el.offsetWidth}get blockAtTheLowestPosition(){return Object(O["maxBy"])(this.activeFlow.blocks,"ui_metadata.canvas_coordinates.y")}get blockAtTheFurthestRightPosition(){return Object(O["maxBy"])(this.activeFlow.blocks,"ui_metadata.canvas_coordinates.x")}get windowHeight(){return window.screen.availHeight}get windowWidth(){return window.screen.availWidth}get canvasHeight(){if(0===this.activeFlow.blocks.length)return this.windowHeight;if(!this.blockAtTheLowestPosition)return console.debug("Interaction Designer","Unable to find block at the lowest position"),this.windowHeight;const e=this.blockAtTheLowestPosition.ui_metadata.canvas_coordinates.y,t=e+St;return t<this.windowHeight?this.windowHeight:t}get canvasWidth(){if(0===this.activeFlow.blocks.length)return this.windowWidth-this.widthAdjustment;if(!this.blockAtTheFurthestRightPosition)return console.debug("Interaction Designer","Unable to find block at the furthest right position"),this.windowWidth-this.widthAdjustment;const e=this.blockAtTheFurthestRightPosition.ui_metadata.canvas_coordinates.x,t=e+this.blockWidth+Pt+this.visibleBlockEditorWidth;return t<this.windowWidth?this.windowWidth-this.widthAdjustment:t-this.widthAdjustment}get visibleBlockEditorWidth(){const e=365;return this.isBlockEditorOpen?e:0}};Object(k["__decorate"])([Object(E["b"])({default:0})],Ft.prototype,"widthAdjustment",void 0),Object(k["__decorate"])([Object(E["d"])("canvasHeight")],Ft.prototype,"onCanvasHeightChanged",null),Object(k["__decorate"])([Object(E["d"])("canvasWidth")],Ft.prototype,"onCanvasWidthChanged",null),Object(k["__decorate"])([Bt.State],Ft.prototype,"flows",void 0),Object(k["__decorate"])([Bt.Getter],Ft.prototype,"activeFlow",void 0),Object(k["__decorate"])([It.State],Ft.prototype,"isBlockEditorOpen",void 0),Ft=Object(k["__decorate"])([Object(E["a"])({})],Ft);var Tt=Ft,At=Tt,Vt=(o("5fb3"),Object(M["a"])(At,xt,Et,!1,null,"1ac702b3",null)),Rt=(Vt.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("span",{staticClass:"connection",attrs:{"reposition-hook":e.repositionHook}})}),Lt=[],Dt=o("e2dd");const Nt={ON_HOVER:"#A31E65",CONNECTING:"#10661E",DEFAULT:"#707070"},$t=Object(se["e"])("builder");let Ut=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"exit",void 0),Object(m["a"])(this,"repaintCacheKeyGenerator",void 0),Object(m["a"])(this,"source",void 0),Object(m["a"])(this,"target",void 0),Object(m["a"])(this,"position",void 0),Object(m["a"])(this,"color",void 0),Object(m["a"])(this,"line",void 0),Object(m["a"])(this,"isPermanentlyActive",!1),Object(m["a"])(this,"activateConnection",void 0),Object(m["a"])(this,"deactivateConnection",void 0),Object(m["a"])(this,"activateBlock",void 0)}get hasDestination(){return null!=this.exit.destination_block}get options(){return{startPlug:"square",color:this.color,startSocket:"bottom",endSocket:"top",size:4,path:"grid",endPlugSize:1}}get onHoverOptions(){return{color:Nt.ON_HOVER}}get connectionContext(){var e,t,o,i,a,s;return{sourceId:null!==(e=null===(t=this.source)||void 0===t?void 0:t.uuid)&&void 0!==e?e:"",targetId:null!==(o=null===(i=this.target)||void 0===i?void 0:i.uuid)&&void 0!==o?o:"",exitId:null!==(a=null===(s=this.exit)||void 0===s?void 0:s.uuid)&&void 0!==a?a:""}}get sourceElementId(){return"exit/"+this.exit.uuid}get targetElementId(){const{exit:e}=this;return e.destination_block?`block/${e.destination_block}/handle`:`exit/${e.uuid}/pseudo-block-handle`}get repositionHook(){var e,t,o,i;if(!this.repaintCacheKeyGenerator)return null;this.$nextTick(()=>{this.reposition()});const a=this.source||{...Object(O["set"])({},"ui_metadata.canvas_coordinates.x",null===(e=this.position)||void 0===e?void 0:e.x),...Object(O["set"])({},"ui_metadata.canvas_coordinates.y",null===(t=this.position)||void 0===t?void 0:t.y)},s=this.target||{...Object(O["set"])({},"ui_metadata.canvas_coordinates.x",null===(o=this.position)||void 0===o?void 0:o.x),...Object(O["set"])({},"ui_metadata.canvas_coordinates.y",null===(i=this.position)||void 0===i?void 0:i.y)};return this.repaintCacheKeyGenerator(a,s).join("\n")}mounted(){const e={x:"50%",y:-7},t=document.getElementById(this.sourceElementId),o=this.position?document.getElementById(this.targetElementId):Dt["a"].pointAnchor(document.getElementById(this.targetElementId),e);this.line=new Dt["a"](t,o,this.options);const i=document.querySelector("body>.leader-line:last-of-type");null!==i&&(i.addEventListener("click",this.clickHandler.bind(this),!1),document.addEventListener("click",this.clickAwayHandler.bind(this,i),!1),i.addEventListener("mouseover",this.mouseOverHandler.bind(this),!1),i.addEventListener("mouseout",this.mouseOutHandler.bind(this),!1))}beforeDestroy(){this.line.remove()}reposition(){var e,t;if(!this.line)return;const o=this.line.position();console.debug("connection","repositioning",{sourceId:null===(e=this.source)||void 0===e?void 0:e.uuid,targetId:null===(t=this.target)||void 0===t?void 0:t.uuid,position:o,y:this.line.top,x:this.line.left})}mouseOverHandler(){this.hasDestination&&(this.line.setOptions(this.onHoverOptions),this.activateConnection({connectionContext:this.connectionContext}),this.$emit("lineMouseIn"))}mouseOutHandler(){this.hasDestination&&(this.isPermanentlyActive||(this.line.setOptions(this.options),this.deactivateConnection({connectionContext:this.connectionContext})),this.$emit("lineMouseOut"))}clickHandler(){this.isPermanentlyActive=!0,this.activateConnection({connectionContext:this.connectionContext}),this.activateBlock({blockId:null}),this.$emit("lineMouseIn"),this.$emit("lineMouseClickedIn")}clickAwayHandler(e,t){try{var o;if(null===(o=this.line)||void 0===o||!o.end)return}catch(a){return}const i=e.contains(t.target);i||(this.isPermanentlyActive=!1,this.line.setOptions(this.options),this.deactivateConnection({connectionContext:this.connectionContext}),this.$emit("lineMouseClickedOut")),this.$emit("lineMouseOut")}};Object(k["__decorate"])([Object(E["b"])({type:Object,required:!0})],Ut.prototype,"exit",void 0),Object(k["__decorate"])([Object(E["b"])({type:Function,required:!0})],Ut.prototype,"repaintCacheKeyGenerator",void 0),Object(k["__decorate"])([Object(E["b"])({type:Object})],Ut.prototype,"source",void 0),Object(k["__decorate"])([Object(E["b"])({type:Object})],Ut.prototype,"target",void 0),Object(k["__decorate"])([Object(E["b"])({type:Object})],Ut.prototype,"position",void 0),Object(k["__decorate"])([Object(E["b"])({type:String})],Ut.prototype,"color",void 0),Object(k["__decorate"])([$t.Mutation],Ut.prototype,"activateConnection",void 0),Object(k["__decorate"])([$t.Mutation],Ut.prototype,"deactivateConnection",void 0),Object(k["__decorate"])([$t.Mutation],Ut.prototype,"activateBlock",void 0),Ut=Object(k["__decorate"])([Object(E["a"])({})],Ut);var Ht=Ut,Wt=Ht,zt=(o("655a"),Object(M["a"])(Wt,Rt,Lt,!1,null,null,null)),Gt=(zt.exports,function(){var e,t,o=this,i=o._self._c;return i("div",{staticClass:"resource-viewer"},[o._t("vendor-header"),i("div",{staticClass:"resource-viewer-contents"},o._l(null!==(e=null===(t=o.activeFlow)||void 0===t?void 0:t.blocks)&&void 0!==e?e:[],(function(e){return i("resource-viewer-block",{directives:[{name:"show",rawName:"v-show",value:o.visibleBlocks.includes(e.uuid),expression:"visibleBlocks.includes(block.uuid)"}],key:e.uuid,attrs:{id:"block/"+e.uuid,block:e},on:{change:o.debounce_persistFlow}})})),1),o._t("vendor-footer")],2)}),qt=[];const Kt=1500;var Zt,Xt,Jt={name:"ResourceViewer",mixins:[B["a"]],props:{visibleBlocks:{type:Array,default:()=>null}},computed:{...Object(f["c"])({activeFlow:"flow/activeFlow"}),id(){return this.$route.params.id}},mounted(){console.debug("VueJS flow resources viewer mounted!")},methods:{...Object(f["b"])("builder",["persistFlowAndHandleUiState"]),debounce_persistFlow:Object(O["debounce"])((function(){return this.persistFlowAndHandleUiState()}),Kt)}},Yt=Jt,Qt=(o("5eb7"),Object(M["a"])(Yt,Gt,qt,!1,null,null,null)),eo=Qt.exports,to=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"choices-builder form-group"},[t("label",{staticClass:"text-primary"},[e._v(e._s(e._f("trans")("flow-builder.choices")))]),e._l(e.choiceResourcesOrderedByResourcesList,(function(o,i){return[t("resource-variant-text-editor",{key:o.uuid,ref:"choices",refInFor:!0,staticClass:"choices-builder-item",attrs:{index:0,"prepend-text":(i+1).toString(),title:o.uuid,rows:1,placeholder:"Enter choice...","resource-id":o.uuid,"resource-variant":o.values[0],mode:e.SupportedMode.TEXT,"disabled-auto-complete":!0},on:{afterResourceVariantChanged:function(t){return e.handleExistingResourceVariantChangedFor({choiceIndex:i},t)}}})]})),e.draftResource?t("resource-variant-text-editor",{ref:"draftChoice",staticClass:"choices-builder-item",attrs:{"prepend-text":(e.choiceResourcesOrderedByResourcesList.length+1).toString(),rows:1,placeholder:"Enter choice...","resource-id":e.draftResource.uuid,"resource-variant":e.findOrGenerateStubbedVariantOn(e.draftResource,{language_id:e.activeFlow.languages[0].id,content_type:e.SupportedContentType.TEXT,mime_type:e.choiceMimeType,modes:[e.SupportedMode.TEXT]}),mode:e.SupportedMode.TEXT,"disabled-auto-complete":!0},on:{beforeResourceVariantChanged:e.addDraftResourceToChoices,afterResourceVariantChanged:e.handleNewChoiceChange}}):e._e(),t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/config/choices`},scopedSlots:e._u([{key:"input-control",fn:function({isValid:e}){}}])}),t("choice-mapping-modal",{attrs:{block:e.block}})],2)},oo=[],io=o("02be"),ao=o("ecef"),so=o("31aa"),ro=function(){var e=this,t=e._self._c;return t("div",{staticClass:"choice-mapping-modal"},[t("div",{staticClass:"form-group"},[t("button",{staticClass:"btn btn-primary btn-sm",attrs:{disabled:0===e.block.config.choices.length},on:{click:e.showModal}},[e._v(" "+e._s(e.trans("flow-builder.set-choice-options"))+" ")])]),t("b-modal",{ref:"edit-choice-mapping-modal",attrs:{"ok-title":e.trans("flow-builder.close"),title:e.trans("flow-builder.choice-options"),"ok-only":"",size:"lg"}},[e.shouldHaveTabs?t("div",{staticClass:"choice-mapping-navs"},[t("nav",[t("div",{staticClass:"nav nav-tabs",attrs:{id:"choice-options-nav-tab",role:"tablist"}},[e.hasVoiceMode?t("a",{staticClass:"nav-item nav-link",class:{active:e.hasVoiceMode},attrs:{id:"nav-voice-tab","aria-controls":"nav-home","aria-selected":"true","data-toggle":"tab",href:"#nav-voice",role:"tab"}},[e._v(" "+e._s(e.trans("flow-builder.voice"))+" ("+e._s(e.trans("flow-builder.all-languages"))+") ")]):e._e(),e.hasTextMode?e._l(e.textLanguages,(function({id:o,label:i},a){return t("a",{key:o,staticClass:"nav-item nav-link",class:{active:!e.hasVoiceMode&&e.hasTextMode&&0===a},attrs:{id:"nav-lang-tab-"+o,href:"#nav-lang-"+o,title:i||e.trans("flow-builder.unknown-language"),"aria-controls":"nav-profile","aria-selected":"false","data-toggle":"tab",role:"tab"}},[e._v(" "+e._s(e.trans("flow-builder.data-type-text"))+" ("+e._s(i||e.trans("flow-builder.unknown-language"))+") ")])})):e._e()],2)]),t("div",{staticClass:"tab-content",attrs:{id:"choice-options-nav-tab-content"}},[e.hasVoiceMode?t("div",{staticClass:"tab-pane fade",class:{"show active":e.hasVoiceMode},attrs:{id:"nav-voice","aria-labelledby":"nav-voice-tab",role:"tabpanel"}},[t("div",{staticClass:"mt-3"},[t("voice-mapping-table",{attrs:{block:e.block}})],1)]):e._e(),e.hasTextMode?e._l(e.textLanguages,(function({id:o,label:i},a){return t("div",{key:o,staticClass:"tab-pane fade",class:{"show active":!e.hasVoiceMode&&e.hasTextMode&&0===a},attrs:{id:"nav-lang-"+o,"aria-labelledby":"nav-lang-tab",role:"tabpanel"}},[t("div",{staticClass:"mt-3"},[t("text-mapping-table",{attrs:{block:e.block,"lang-id":o}})],1)])})):e._e()],2)]):t("div",[e._v(" "+e._s(e.trans("flow-builder.cannot-map-choices-hint"))+" ")])])],1)},no=[],co=o("6aac"),lo=function(){var e=this,t=e._self._c;return t("table",{staticClass:"voice-mapping-table table table-striped"},[t("thead",[t("tr",[t("th",{staticClass:"col-5 align-top"},[e._v(e._s(e.trans("flow-builder.choice-name")))]),t("th",{staticClass:"align-top"},[e._v(e._s(e.trans("flow-builder.voice-key-press")))]),t("th",{staticClass:"col-5 align-top"},[e._v(" "+e._s(e.trans("flow-builder.expressions"))+" "),t("h5",{staticClass:"small"},[e._v(e._s(e.trans("flow-builder.voice-choice-mapping-expression")))])])])]),t("tbody",e._l(e.block.config.choices,(function(o,i){return t("voice-mapping-row",{key:i,attrs:{block:e.block,"current-choice":o,index:i}})})),1)])},uo=[],bo=function(){var e=this,t=e._self._c;return t("tr",{staticClass:"voice-mapping-row"},[t("td",{staticClass:"d-flex"},[e._v(" "+e._s(e.currentChoice.name)+" "),t("div",{staticClass:"custom-control custom-checkbox ml-auto"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.shouldUseExpression,expression:"shouldUseExpression"}],staticClass:"custom-control-input",attrs:{id:"useExpression-"+e.index,name:"useExpression-"+e.index,type:"checkbox"},domProps:{checked:Array.isArray(e.shouldUseExpression)?e._i(e.shouldUseExpression,null)>-1:e.shouldUseExpression},on:{change:function(t){var o=e.shouldUseExpression,i=t.target,a=!!i.checked;if(Array.isArray(o)){var s=null,r=e._i(o,s);i.checked?r<0&&(e.shouldUseExpression=o.concat([s])):r>-1&&(e.shouldUseExpression=o.slice(0,r).concat(o.slice(r+1)))}else e.shouldUseExpression=a}}}),t("label",{staticClass:"custom-control-label font-weight-normal",attrs:{for:"useExpression-"+e.index}},[e._v(" "+e._s(e.trans("flow-builder.use-expressions"))+" ")])])]),t("td",[t("div",{staticClass:"d-flex justify-content-center"},[t("key-press-selector",{attrs:{block:e.block,"current-choice":e.currentChoice,disabled:e.shouldUseExpression,index:e.index}})],1)]),t("td",[t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/config/choices/${e.index}/ivr_test/test_expression`},scopedSlots:e._u([{key:"input-control",fn:function({isValid:o}){return[t("expression-input",{staticClass:"mb-1",attrs:{"current-expression":e.currentExpression,label:"",placeholder:e.trans("flow-builder.enter-expression"),"valid-state":o,disabled:!e.shouldUseExpression},on:{commitExpressionChange:e.updateCurrentExpression}})]}}])})],1)])},po=[],ho=function(){var e=this,t=e._self._c;return t("select",{directives:[{name:"model",rawName:"v-model",value:e.keypress,expression:"keypress"}],staticClass:"voice-key-press-selector",on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.keypress=t.target.multiple?o:o[0]}}},e._l(e.options,(function(o){return t("option",{key:o,attrs:{disabled:e.disabled},domProps:{value:o}},[e._v(" "+e._s(o)+" ")])})),0)},fo=[],vo=o("8562"),_o={props:{block:{type:X["ISelectOneResponseBlock"],required:!0},currentChoice:{type:X["IChoice"],required:!0},index:{type:Number,required:!0}},data(){return{options:["1","2","3","4","5","6","7","8","9","0","*"],BLOCK_RESPONSE_EXPRESSION:vo["a"]}},computed:{currentExpressionWithoutSpaces(){return void 0!==this.currentExpression?this.currentExpression.replace(/\s/g,""):void 0},currentExpression(){var e;return null===(e=this.currentChoice.ivr_test)||void 0===e?void 0:e.test_expression},isKeyPressIdentifiable(){var e,t;return!0===this.currentExpressionWithoutSpaces.endsWith("'")&&(!0===(null===(e=this.currentExpressionWithoutSpaces)||void 0===e?void 0:e.startsWith(vo["a"]+"='"))||!0===(null===(t=this.currentExpressionWithoutSpaces)||void 0===t?void 0:t.startsWith(`@${vo["a"]}='`)))&&!0===this.options.includes(this.estimatedKeyPress)},estimatedKeyPress(){var e,t;return String(null===(e=this.currentExpressionWithoutSpaces)||void 0===e||null===(t=e.split("'"))||void 0===t?void 0:t[1])},keypress:{get(){if(!0===this.isKeyPressIdentifiable)return this.estimatedKeyPress;const e=Number(this.index)+1;return e<=9?String(e):"*"},set(e){this.updateCurrentExpression(`${vo["a"]} = '${e}'`)}}},methods:{...Object(f["b"])("flow/"+ao["a"],["block_setChoiceIvrExpressionOnIndex"]),updateCurrentExpression(e){this.block_setChoiceIvrExpressionOnIndex({blockId:this.block.uuid,index:this.index,value:e})}}},go=_o,mo=Object(M["a"])(go,Zt,Xt,!1,null,null,null),ko=mo.exports,jo={extends:ko,props:{disabled:{type:Boolean,default:!1}}},Oo=jo,yo=(o("5e0f"),Object(M["a"])(Oo,ho,fo,!1,null,"156d9deb",null)),wo=yo.exports,Co={name:"VoiceMappingRow",components:{KeyPressSelector:wo},extends:ko,mixins:[B["a"]],created(){var e,t;!0===this.hasVoiceMode&&void 0===(null===(e=this.currentChoice)||void 0===e||null===(t=e.ivr_test)||void 0===t?void 0:t.test_expression)&&this.updateCurrentExpression(`${this.BLOCK_RESPONSE_EXPRESSION} = '${this.keypress}'`)},computed:{...Object(f["c"])("flow",["hasVoiceMode"]),shouldUseExpression:{get(){return!(!0===this.isKeyPressIdentifiable)},set(e){!0===e?this.updateCurrentExpression(""):this.updateCurrentExpression(`${this.BLOCK_RESPONSE_EXPRESSION} = '${this.keypress}'`)}}}},xo=Co,Eo=Object(M["a"])(xo,bo,po,!1,null,"38d7b64e",null),Bo=Eo.exports,Io={name:"VoiceMappingTable",components:{VoiceMappingRow:Bo},mixins:[B["a"]],props:{block:{type:X["ISelectOneResponseBlock"],required:!0}}},So=Io,Po=Object(M["a"])(So,lo,uo,!1,null,null,null),Mo=Po.exports,Fo=function(){var e=this,t=e._self._c;return t("table",{staticClass:"text-mapping-table table table-striped"},[t("thead",[t("tr",[t("th",{staticClass:"col-5 align-top"},[e._v(e._s(e.trans("flow-builder.choice-name")))]),t("th",{staticClass:"align-top"},[e._v(e._s(e.trans("flow-builder.synonyms"))+" / "+e._s(e.trans("flow-builder.text-expression")))])])]),t("tbody",e._l(e.block.config.choices,(function(o,i){return t("text-mapping-row",{key:i,attrs:{block:e.block,"current-choice":o,index:i,"lang-id":e.langId}})})),1)])},To=[],Ao=function(){var e=this,t=e._self._c;return t("tr",{staticClass:"text-mapping-row"},[t("td",[e._v(" "+e._s(e.currentChoice.name)+" ")]),t("td",[t("text-synonyms-editor",{attrs:{block:e.block,"current-choice":e.currentChoice,index:e.index,"lang-id":e.langId}})],1)])},Vo=[],Ro=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-synonyms-editor"},[e._l(e.synonymsForLanguage,(function({test_expression:o,visible_expression:i,globalIndex:a},s){return t("validation-message",{key:s,attrs:{"message-key":`block/${e.block.uuid}/config/choices/${e.index}/text_tests/${a}/test_expression`},scopedSlots:e._u([{key:"input-control",fn:function({isValid:a}){return[t("expression-input",{ref:"expressionInputs",refInFor:!0,staticClass:"mb-1",attrs:{"current-expression":i,title:o,label:"",placeholder:e.trans("flow-builder.enter-expression"),"valid-state":a},on:{commitExpressionChange:function(t){return e.updateCurrentExpression(s,t)}}})]}}],null,!0)})})),t("expression-input",{staticClass:"mb-1",attrs:{"current-expression":e.draftExpression,label:"",placeholder:e.trans("flow-builder.enter-expression")},on:{commitExpressionChange:e.addNewExpression}})],2)},Lo=[],Do=o("b85b"),No={name:"TextSynonymsEditor",mixins:[B["a"]],props:{block:{type:X["ISelectOneResponseBlock"],required:!0},currentChoice:{type:X["IChoice"],required:!0},index:{type:Number,required:!0},langId:{type:String,required:!0}},data(){return{draftExpression:""}},computed:{synonymsForLanguage(){return this.choiceTests.map((e,t)=>({...e,visible_expression:Object(Do["d"])(e.test_expression),globalIndex:t})).filter(({language:e})=>e===this.langId)},choiceTests(){return this.currentChoice.text_tests}},created(){var e,t,o;const i=0;void 0===(null===(e=this.currentChoice)||void 0===e||null===(t=e.text_tests)||void 0===t||null===(o=t[i])||void 0===o?void 0:o.test_expression)&&this.updateCurrentExpression(i,{value:this.currentChoice.name})},methods:{...Object(f["b"])("flow/"+ao["a"],["choice_setSynonymForLanguage","choice_removeTextTestsExpressionOnIndex"]),updateCurrentExpression(e,t){t>""?this.choice_setSynonymForLanguage({blockId:this.block.uuid,resourceId:this.currentChoice.prompt,language:this.langId,index:e,value:t}):(this.choice_removeTextTestsExpressionOnIndex({choice:this.currentChoice,testIndex:e}),this.draftExpression=t,this.$nextTick(()=>{this.draftExpression=""}))},addNewExpression(e){this.draftExpression=e,this.choice_setSynonymForLanguage({blockId:this.block.uuid,resourceId:this.currentChoice.prompt,language:this.langId,value:e}),this.$nextTick(()=>{this.draftExpression="",this.$refs.expressionInputs.at(-1).focus()})}}},$o=No,Uo=Object(M["a"])($o,Ro,Lo,!1,null,null,null),Ho=Uo.exports,Wo={name:"TextMappingRow",components:{TextSynonymsEditor:Ho},props:{block:{type:X["ISelectOneResponseBlock"],required:!0},currentChoice:{type:X["IChoice"],required:!0},index:{type:Number,required:!0},langId:{type:String,required:!0}},mixins:[B["a"]]},zo=Wo,Go=Object(M["a"])(zo,Ao,Vo,!1,null,"a3613528",null),qo=Go.exports,Ko={name:"TextMappingTable",components:{TextMappingRow:qo},mixins:[B["a"]],props:{block:{type:X["ISelectOneResponseBlock"],required:!0},langId:{type:String,required:!0}}},Zo=Ko,Xo=Object(M["a"])(Zo,Fo,To,!1,null,null,null),Jo=Xo.exports,Yo={name:"ChoiceMappingModal",components:{BModal:co["a"],VoiceMappingTable:Mo,TextMappingTable:Jo},mixins:[B["a"]],props:{block:{type:X["ISelectOneResponseBlock"],required:!0}},computed:{...Object(f["c"])("flow",["activeFlow","hasTextMode","hasVoiceMode"]),textLanguages(){return!0===this.hasTextMode?this.activeFlow.languages:[]},shouldHaveTabs(){return!0===this.hasVoiceMode||!0===this.hasTextMode&&this.activeFlow.languages.length>0}},methods:{showModal(){const e=this.$refs["edit-choice-mapping-modal"];void 0!==e?e.show():console.error("showModal","ref `edit-choice-mapping-modal` not found")},hideModal(){const e=this.$refs["edit-choice-mapping-modal"];void 0!==e?e.hide():console.error("hideModal","ref `edit-choice-mapping-modal` not found")}}},Qo=Yo,ei=(o("917a"),Object(M["a"])(Qo,ro,no,!1,null,"aea19712",null)),ti=ei.exports;const oi=Object(se["e"])("flow"),ii=Object(se["e"])("flow/"+ao["a"]),ai=Object(se["e"])("validation");let si=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"block",void 0),Object(m["a"])(this,"draftResource",null),Object(m["a"])(this,"SupportedContentType",X["SupportedContentType"]),Object(m["a"])(this,"SupportedMode",X["SupportedMode"]),Object(m["a"])(this,"findOrGenerateStubbedVariantOn",io["e"]),Object(m["a"])(this,"choice_create",void 0),Object(m["a"])(this,"choice_change",void 0),Object(m["a"])(this,"choiceMimeType",void 0),Object(m["a"])(this,"activeFlow",void 0),Object(m["a"])(this,"resource_add",void 0),Object(m["a"])(this,"resource_createWith",void 0),Object(m["a"])(this,"flow_removeResourcesAndRelatedValidationsOnActiveFlow",void 0),Object(m["a"])(this,"deleteChoiceByResourceIdFrom",void 0),Object(m["a"])(this,"block_setChoiceIvrExpressionOnIndex",void 0),Object(m["a"])(this,"addChoiceByResourceIdTo",void 0)}get choiceResourcesOrderedByResourcesList(){return Object(O["intersectionWith"])(this.activeFlow.resources,this.block.config.choices,(e,t)=>e.uuid===(null===t||void 0===t?void 0:t.prompt))}created(){this.generateDraftResource()}async generateDraftResource(){this.draftResource=await this.resource_createWith({props:{uuid:await(new so["IdGeneratorUuidV4"]).generate()}})}async addDraftResourceToChoices(){null!=this.draftResource?(this.resource_add({resource:this.draftResource}),this.addChoiceByResourceIdTo({blockId:this.block.uuid,resourceId:this.draftResource.uuid}),this.$nextTick(()=>this.focusInputElFor(Object(O["last"])(this.$refs.choices))),await this.generateDraftResource()):console.warn("interaction-designer/block-editors/ChoicesBuilder","Unable to add absent draft resource to block choices.",{block:this.block})}focusInputElFor(e){var t;e&&(null===(t=e.$el.querySelector("input, textarea"))||void 0===t||t.focus())}handleExistingResourceVariantChangedFor({choiceIndex:e},{variant:t,resourceId:o,value:i}){const a=e===this.choiceResourcesOrderedByResourcesList.length-1,s=Object(O["isEmpty"])(i);a&&s?(this.deleteLastAndPreviousChoicesIfEmpty(e),this.focusInputElFor(this.$refs.draftChoice)):this.choice_change({blockId:this.block.uuid,resourceId:o,value:i}),this.$emit("choiceChanged",{resourceId:o})}deleteLastAndPreviousChoicesIfEmpty(e){let t=e,o=this.block.config.choices[t];do{console.debug("delete previous empty choice at index",t),this.deleteChoiceByResourceIdFrom({blockId:this.block.uuid,resourceId:o.prompt}),this.flow_removeResourcesAndRelatedValidationsOnActiveFlow({resourceUuids:[o.prompt]}),t-=1,o=this.block.config.choices[t]}while(t>=0&&""===o.name)}handleNewChoiceChange({variant:e,resourceId:t,value:o}){this.choice_create({blockId:this.block.uuid,resourceId:t,value:o}),this.$emit("choiceChanged",{resourceId:t})}};Object(k["__decorate"])([Object(E["b"])()],si.prototype,"block",void 0),Object(k["__decorate"])([ii.Action],si.prototype,"choice_create",void 0),Object(k["__decorate"])([ii.Action],si.prototype,"choice_change",void 0),Object(k["__decorate"])([ai.Getter],si.prototype,"choiceMimeType",void 0),Object(k["__decorate"])([oi.Getter],si.prototype,"activeFlow",void 0),Object(k["__decorate"])([oi.Action],si.prototype,"resource_add",void 0),Object(k["__decorate"])([oi.Action],si.prototype,"resource_createWith",void 0),Object(k["__decorate"])([oi.Action],si.prototype,"flow_removeResourcesAndRelatedValidationsOnActiveFlow",void 0),Object(k["__decorate"])([ii.Action],si.prototype,"deleteChoiceByResourceIdFrom",void 0),Object(k["__decorate"])([ii.Action],si.prototype,"block_setChoiceIvrExpressionOnIndex",void 0),Object(k["__decorate"])([ii.Action],si.prototype,"addChoiceByResourceIdTo",void 0),si=Object(k["__decorate"])([Object(E["a"])({components:{ChoiceMappingModal:ti}})],si);var ri=si,ni=ri,ci=Object(M["a"])(ni,to,oo,!1,null,null,null),li=(ci.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"select-one-response-block-contact-property-editor"},[t("generic-contact-property-editor",{attrs:{block:e.block,"disable-expression-input":!0},on:{toggleSetContactProperty:e.onSetContactPropertyToggle,changeContactPropertyType:e.resetMapping,updateShouldUseCurrentBlockResponse:e.onShouldUseCurrentBlockResponseUpdate}},[t("template",{slot:"entry-from-this-block"},[t("div",{staticClass:"mt-2 mb-2"},[0===e.choices.length?t("div",{staticClass:"mt-2 mb-2 text-danger"},[e._v(" "+e._s(e.trans("flow-builder.enter-at-least-one-choice-above"))+" ")]):[e.isMultipleChoiceProperty?t("div",[e._v(" "+e._s(e.trans("flow-builder.select-value-for-choices-for-selected-property"))+" ")]):t("div",[e._v(" "+e._s(e.trans("flow-builder.enter-value-for-choices-for-selected-property"))+" ")]),e._l(e.choices,(function({prompt:o,name:i}){return t("div",{key:o,staticClass:"mt-2"},[t("label",[e._v(e._s(e.trans("flow-builder.choice"))+": "+e._s(i))]),e.isTextProperty?t("input",{staticClass:"form-control",attrs:{type:"text",placeholder:e.trans("flow-builder.enter-value")},domProps:{value:e.getChoiceValue(o)},on:{input:function(t){return e.setChoiceValue(t.target.value,o)}}}):e._e(),e.isNumberProperty?t("input",{staticClass:"form-control",attrs:{type:"number",placeholder:e.trans("flow-builder.enter-value")},domProps:{value:e.getChoiceValue(o)},on:{input:function(t){e.setChoiceValue(Number(t.target.value),o)}}}):e._e(),e.isBooleanProperty?t("vue-multiselect",{attrs:{value:e.getBooleanChoiceValueOption(o),options:e.booleanChoiceValueOptions,"show-labels":!1,placeholder:e.trans("flow-builder.select-a-value"),"preselect-first":!0,"track-by":"value",label:"description"},on:{input:function(t){return e.setBooleanChoiceValueOption(t,o)}}}):e._e(),e.isMultipleChoiceProperty?t("vue-multiselect",{attrs:{value:e.getChoiceValueOption(o),options:e.choiceValueOptions,"show-labels":!1,placeholder:e.trans("flow-builder.select-a-value"),"preselect-first":!0,"track-by":"value",label:"description"},on:{input:function(t){return e.setChoiceValueOption(t,o)}}}):e._e()],1)}))]],2)])],2)],1)}),di=[];const ui="NULL",bi={components:{VueMultiselect:Ve.a},mixins:[B["b"]],props:{block:{type:Object,required:!0}},computed:{...Object(f["c"])(["subscriberPropertyFields"]),contactPropertyName(){var e;return null===(e=this.block.config.set_contact_property)||void 0===e?void 0:e[0].property_key},contactProperty(){var e;return null!==(e=Object(O["find"])(this.subscriberPropertyFields,e=>e.name===this.contactPropertyName))&&void 0!==e?e:null},isTextProperty(){var e;return"text"===(null===(e=this.contactProperty)||void 0===e?void 0:e.data_type)},isNumberProperty(){var e;return"number"===(null===(e=this.contactProperty)||void 0===e?void 0:e.data_type)},isBooleanProperty(){var e;return"boolean"===(null===(e=this.contactProperty)||void 0===e?void 0:e.data_type)},choices(){return this.block.config.choices},isMultipleChoiceProperty(){var e;return"multiple_choice"===(null===(e=this.contactProperty)||void 0===e?void 0:e.data_type)},choiceValueOptions(){var e,t;return[{value:ui,description:this.trans("flow-builder.no-value")},...(null!==(e=null===(t=this.contactProperty)||void 0===t?void 0:t.choices)&&void 0!==e?e:[]).map(({value:e,description:t})=>({value:e,description:null!==t&&void 0!==t?t:e}))]},booleanChoiceValueOptions(){return[{value:ui,description:this.trans("flow-builder.no-value")},{value:"TRUE",description:this.trans("flow-builder.true")},{value:"FALSE",description:this.trans("flow-builder.false")}]}},methods:{...Object(f["d"])("flow",["block_updateVendorMetadataByPath","block_removeVendorMetadataByPath","block_updateConfigByPath"]),...Object(f["b"])("flow",["block_resetContactPropertyMetadata"]),getChoiceValue(e){var t,o,i,a,s;return null===(t=this.block.vendor_metadata)||void 0===t||null===(o=t.floip)||void 0===o||null===(i=o.ui_metadata)||void 0===i||null===(a=i.set_contact_property)||void 0===a||null===(s=a.property_value_mapping)||void 0===s?void 0:s[e]},setChoiceValue(e,t){var o,i,a,s,r;this.block_updateVendorMetadataByPath({blockId:this.block.uuid,path:"floip.ui_metadata.set_contact_property.property_value_mapping."+t,value:e}),this.block_updateConfigByPath({blockId:this.block.uuid,path:"set_contact_property[0].property_value",value:Object(Do["b"])(this.block.config.choices,null!==(o=null===(i=this.block.vendor_metadata)||void 0===i||null===(a=i.floip)||void 0===a||null===(s=a.ui_metadata)||void 0===s||null===(r=s.set_contact_property)||void 0===r?void 0:r.property_value_mapping)&&void 0!==o?o:{})})},onSetContactPropertyToggle(e){e?this.resetMapping():this.removeMapping()},onShouldUseCurrentBlockResponseUpdate(e){e?this.resetMapping():this.removeMapping()},resetMapping(){this.block_resetContactPropertyMetadata({blockId:this.block.uuid})},removeMapping(){this.block_removeVendorMetadataByPath({blockId:this.block.uuid,path:"floip.ui_metadata.set_contact_property"})},getChoiceValueOption(e){const t=this.getChoiceValue(e);return this.choiceValueOptions.find(e=>e.value===t)},setChoiceValueOption(e,t){this.setChoiceValue(e.value,t)},getBooleanChoiceValueOption(e){const t=this.getChoiceValue(e);return this.booleanChoiceValueOptions.find(e=>e.value===t)},setBooleanChoiceValueOption(e,t){var o;this.setChoiceValue(null!==(o=null===e||void 0===e?void 0:e.value)&&void 0!==o?o:"",t)}}};var pi=bi,hi=pi,fi=Object(M["a"])(hi,li,di,!1,null,null,null),vi=(fi.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"advanced-exit-editor remove-margin-left-right"},[t("div",{staticClass:"put-back-margin-left-right"},[t("div",{staticClass:"input-group"},[t("div",{staticClass:"input-group-prepend bg-grey"},[t("span",{staticClass:"input-group-text"},[e._v(" "+e._s(e.label)+" ")])]),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],ref:"name",staticClass:"form-control",attrs:{placeholder:e.trans("flow-builder.advanced-exit-name-placeholder"),rows:"1"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),e._v(" "),t("button",{staticClass:"btn btn-outline-primary ml-3",on:{click:function(t){return e.$emit("deleteExit",e.exit)}}},[t("font-awesome-icon",{attrs:{icon:["far","trash-alt"]}})],1)]),t("h6",{staticClass:"mt-2"},[e._v(" "+e._s(e.trans("flow-builder.test-expression"))+" ")]),t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/exits/${e.index}/test`},scopedSlots:e._u([{key:"input-control",fn:function(){return[t("expression-input",{ref:"testExpressionInput",attrs:{label:"",placeholder:e.trans("flow-builder.advanced-exit-expression-placeholder"),"current-expression":e.test,rows:1},on:{commitExpressionChange:e.commitExpressionChange}})]},proxy:!0}])})],1)])}),_i=[];const gi=Object(se["e"])("flow");let mi=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"block",void 0),Object(m["a"])(this,"exit",void 0),Object(m["a"])(this,"label",void 0),Object(m["a"])(this,"block_setExitTest",void 0),Object(m["a"])(this,"block_setExitName",void 0)}get index(){var e;return null===(e=this.block.exits)||void 0===e?void 0:e.findIndex(({uuid:e})=>e===this.exit.uuid)}get test(){return this.exit.test}get name(){return this.exit.name}set name(e){const{uuid:t}=this.block,{uuid:o}=this.exit;this.$emit("beforeExitNameChanged",{blockId:t,exitId:o,value:e}),this.block_setExitName({blockId:t,exitId:o,value:e}),this.$emit("afterExitNameChanged",{blockId:t,exitId:o,value:e})}async commitExpressionChange(e){this.$emit("beforeExitTestChanged",{exitId:this.exit.uuid,blockId:this.block.uuid,value:e}),this.block_setExitTest({exitId:this.exit.uuid,blockId:this.block.uuid,value:e}),this.$emit("afterExitTestChanged",{exitId:this.exit.uuid,blockId:this.block.uuid,value:e})}};Object(k["__decorate"])([Object(E["b"])()],mi.prototype,"block",void 0),Object(k["__decorate"])([Object(E["b"])()],mi.prototype,"exit",void 0),Object(k["__decorate"])([Object(E["b"])()],mi.prototype,"label",void 0),Object(k["__decorate"])([gi.Mutation],mi.prototype,"block_setExitTest",void 0),Object(k["__decorate"])([gi.Mutation],mi.prototype,"block_setExitName",void 0),mi=Object(k["__decorate"])([Object(E["a"])({})],mi);var ki=mi,ji=ki,Oi=Object(M["a"])(ji,vi,_i,!1,null,null,null),yi=(Oi.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"advanced-exits-builder"},[t("h6",[e._v(e._s(e.trans("flow-builder.hint-to-set-advance-exit")))]),e._l(e.block.exits,(function(o,i){return[t("div",{key:o.uuid},[i>0?t("hr"):e._e(),o.default?e._e():t("advanced-exit-editor",{ref:"exitEditors",refInFor:!0,staticClass:"advanced-block-exit-builder-item mb-2",attrs:{block:e.block,exit:o,label:(i+1).toString()},on:{deleteExit:e.handleDeleteExit}})],1)]})),t("input",{staticClass:"btn btn-outline-primary btn-sm w-100",attrs:{type:"button",value:e.trans("flow-builder.btn-add-exit")},on:{click:e.addDraftExitToBlock}})],2)}),wi=[];const Ci=Object(se["e"])("flow");let xi=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"block",void 0),Object(m["a"])(this,"block_addExit",void 0),Object(m["a"])(this,"block_removeExit",void 0),Object(m["a"])(this,"block_createBlockExitWith",void 0)}async addDraftExitToBlock(){const e=await(new so["IdGeneratorUuidV4"]).generate();this.block_addExit({blockId:this.block.uuid,exit:await this.block_createBlockExitWith({props:{uuid:e}})}),this.$nextTick(()=>{var t,o;null===(t=this.$refs.exitEditors.find(t=>t.$props.exit.uuid===e))||void 0===t||null===(o=t.$refs.name)||void 0===o||o.focus()})}handleDeleteExit(e){this.block_removeExit({blockId:this.block.uuid,exit:e})}};Object(k["__decorate"])([Object(E["b"])()],xi.prototype,"block",void 0),Object(k["__decorate"])([Ci.Mutation],xi.prototype,"block_addExit",void 0),Object(k["__decorate"])([Ci.Mutation],xi.prototype,"block_removeExit",void 0),Object(k["__decorate"])([Ci.Action],xi.prototype,"block_createBlockExitWith",void 0),xi=Object(k["__decorate"])([Object(E["a"])({})],xi);var Ei=xi,Bi=Ei,Ii=Object(M["a"])(Bi,yi,wi,!1,null,null,null),Si=(Ii.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"block-editor",style:{top:e.topPosition}},[e.activeBlock?t("div",[t("div",{staticClass:"tree-sidebar-edit-block",attrs:{"data-block-type":e.activeBlock&&e.activeBlock.type,"data-for-block-id":e.activeBlock&&e.activeBlock.uuid}},[e.activeBlock?t("Flow"+e.activeBlock.type.replace(".",""),{tag:"component",attrs:{block:e.activeBlock,flow:e.activeFlow}}):e._e()],1)]):e._e()])}),Pi=[];const Mi=Object(se["e"])("builder"),Fi=Object(se["e"])("flow");let Ti=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"activeBlock",void 0),Object(m["a"])(this,"interactionDesignerHeaderBoundingClientRect",void 0),Object(m["a"])(this,"activeFlow",void 0)}get topPosition(){const e=5;return this.interactionDesignerHeaderBoundingClientRect.top+this.interactionDesignerHeaderBoundingClientRect.height+e+"px"}};Object(k["__decorate"])([Mi.Getter],Ti.prototype,"activeBlock",void 0),Object(k["__decorate"])([Mi.Getter],Ti.prototype,"interactionDesignerHeaderBoundingClientRect",void 0),Object(k["__decorate"])([Fi.Getter],Ti.prototype,"activeFlow",void 0),Ti=Object(k["__decorate"])([Object(E["a"])({})],Ti);var Ai=Ti,Vi=Ai,Ri=(o("ef87"),Object(M["a"])(Vi,Si,Pi,!1,null,null,null)),Li=(Ri.exports,function(){var e=this,t=e._self._c,o=e._self._setupProxy;return t("div",{staticClass:"block-id text-right"},[t("small",{staticClass:"text-muted"},[e._v(e._s(o.trans("flow-builder.block-id"))+": "),t("em",[e._v(e._s(o.blockId))])])])}),Di=[],Ni=Object(h["defineComponent"])({__name:"BlockId",props:{block:Object},setup(e){const t=e,o=Object(h["computed"])(()=>void 0!==t.block.uuid?t.block.uuid:""),{trans:i}=B["a"];return{__sfc:!0,props:t,blockId:o,trans:i}}}),$i=Ni,Ui=Object(M["a"])($i,Li,Di,!1,null,null,null),Hi=Ui.exports,Wi=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"block-output-branching-config"},[t("div",{staticClass:"form-group"},[t("label",{class:e.labelClass},[e._v(e._s(e._f("trans")("flow-builder.output-branching")))]),t("div",{staticClass:"btn-group d-block"},[e.hasExitPerChoice?t("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:e.trans("flow-builder.multiple-choice-mode"),expression:"trans('flow-builder.multiple-choice-mode')",modifiers:{hover:!0,bottom:!0}}],staticClass:"btn btn-sm",class:{active:e.isBranchingTypeExitPerChoice,"btn-primary":e.isBranchingTypeExitPerChoice,"btn-outline-primary":!e.isBranchingTypeExitPerChoice},on:{click:function(t){e.selectedBranchingType=e.OutputBranchingType.EXIT_PER_CHOICE}}},[t("font-awesome-icon",{staticClass:"exit-type-icons",attrs:{icon:["fac","one-exit-per-choice"]}})],1):e._e(),e.hasUnifiedExit?t("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:e.trans("flow-builder.standard-mode"),expression:"trans('flow-builder.standard-mode')",modifiers:{hover:!0,bottom:!0}}],staticClass:"btn btn-sm",class:{active:e.isBranchingTypeUnified,"btn-primary":e.isBranchingTypeUnified,"btn-outline-primary":!e.isBranchingTypeUnified},on:{click:function(t){e.selectedBranchingType=e.OutputBranchingType.UNIFIED}}},[t("font-awesome-icon",{staticClass:"exit-type-icons",attrs:{icon:["fac","single-exit"]}})],1):e._e(),t("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:e.trans("flow-builder.advanced-mode"),expression:"trans('flow-builder.advanced-mode')",modifiers:{hover:!0,bottom:!0}}],staticClass:"btn btn-sm",class:{active:e.isBranchingTypeAdvanced,"btn-primary":e.isBranchingTypeAdvanced,"btn-outline-primary":!e.isBranchingTypeAdvanced},attrs:{disabled:!e.hasUnifiedExit&&!e.hasExitPerChoice},on:{click:function(t){e.selectedBranchingType=e.OutputBranchingType.ADVANCED}}},[t("font-awesome-icon",{staticClass:"exit-type-icons",attrs:{icon:["fac","advanced-exit"]}})],1)])]),t("block-output-branching-explanations",{attrs:{"block-type":e.block.type,"branching-type":e.selectedBranchingType}}),e.isBranchingTypeAdvanced?t("advanced-exits-builder",{attrs:{block:e.block}}):e._e()],1)},zi=[],Gi=o("963c"),qi=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.definitions?t("dl",{staticClass:"block-output-branching-explanations"},[e._l(e.definitions,(function(o,i){return[t("dt",{key:i+"-dt"},[e._v(" "+e._s(o.title)+" ")]),t("dd",{key:i+"-dd"},[t("markdown-view",{attrs:{markdown:o.description}})],1)]}))],2):e._e()},Ki=[];const Zi=Object(h["defineComponent"])({name:"BlockOutputBranchingExplanations",components:{MarkdownView:Ye},props:{blockType:{type:String,required:!0},branchingType:{type:String,required:!0}},computed:{blockClasses(){return this.$store.state.trees.ui.blockClasses},blockClass(){return this.blockClasses[this.blockType]},explanatoryTexts(){var e;return null!==(e=this.blockClass.explanatory_texts)&&void 0!==e?e:[]},definitions(){const e=[];for(let t=0;t<this.explanatoryTexts.length;t+=1){const o=this.explanatoryTexts[t];(void 0===o.show_for_branching_types||o.show_for_branching_types.includes(this.branchingType))&&e.push({title:B["b"].trans(o.title),description:B["b"].trans(o.description)})}return e}}});var Xi=Zi,Ji=Xi,Yi=Object(M["a"])(Ji,qi,Ki,!1,null,null,null),Qi=Yi.exports;const ea=Object(se["e"])("flow");let ta=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"block",void 0),Object(m["a"])(this,"hasExitPerChoice",void 0),Object(m["a"])(this,"hasUnifiedExit",void 0),Object(m["a"])(this,"labelClass",void 0),Object(m["a"])(this,"OutputBranchingType",Gi["a"]),Object(m["a"])(this,"block_updateVendorMetadataByPath",void 0),Object(m["a"])(this,"block_exitClearDestinationBlockFor",void 0)}mounted(){Object(O["isEmpty"])(this.selectedBranchingType)&&(this.selectedBranchingType=Gi["a"].UNIFIED)}get selectedBranchingType(){return Object(O["get"])(this.block.vendor_metadata,"floip.ui_metadata.branching_type")}set selectedBranchingType(e){const{uuid:t}=this.block;switch(this.block_updateVendorMetadataByPath({blockId:t,path:"floip.ui_metadata.branching_type",value:e}),e){case Gi["a"].UNIFIED:this.$emit("branchingTypeChangedToUnified");break;case Gi["a"].EXIT_PER_CHOICE:break;case Gi["a"].ADVANCED:break;default:console.warn("block-editors/BlockOutputBranchingConfig","Unknown branching type received.",{branching_type:e})}this.$emit("branchingTypeChanged",{branching_type:e})}get isBranchingTypeExitPerChoice(){return this.selectedBranchingType===Gi["a"].EXIT_PER_CHOICE}get isBranchingTypeUnified(){return this.selectedBranchingType===Gi["a"].UNIFIED}get isBranchingTypeAdvanced(){return this.selectedBranchingType===Gi["a"].ADVANCED}};Object(k["__decorate"])([Object(E["b"])()],ta.prototype,"block",void 0),Object(k["__decorate"])([Object(E["b"])()],ta.prototype,"hasExitPerChoice",void 0),Object(k["__decorate"])([Object(E["b"])({default:!0})],ta.prototype,"hasUnifiedExit",void 0),Object(k["__decorate"])([Object(E["b"])({default:"text-primary"})],ta.prototype,"labelClass",void 0),Object(k["__decorate"])([ea.Mutation],ta.prototype,"block_updateVendorMetadataByPath",void 0),Object(k["__decorate"])([ea.Mutation],ta.prototype,"block_exitClearDestinationBlockFor",void 0),ta=Object(k["__decorate"])([Object(E["a"])({components:{BlockOutputBranchingExplanations:Qi}})],ta);var oa=ta,ia=oa,aa=(o("5e0c"),Object(M["a"])(ia,Wi,zi,!1,null,"44fefc4d",null)),sa=(aa.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"categorization"},[t("hr"),t("label",{staticClass:"text-primary"},[e._v(e._s(e._f("trans")("flow-builder.categorization")))]),t("tag-selector",{attrs:{block:e.block}})],1)}),ra=[];let na=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"block",void 0)}};Object(k["__decorate"])([Object(E["b"])()],na.prototype,"block",void 0),na=Object(k["__decorate"])([Object(E["a"])({})],na);var ca=na,la=ca,da=Object(M["a"])(la,sa,ra,!1,null,null,null),ua=(da.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"contact-property-editor"},[t("div",{staticClass:"form-group"},[t("label",{staticClass:"text-primary"},[e._v(e._s(e._f("trans")("flow-builder.action-label")))]),t("p",[e._v(e._s(e._f("trans")("flow-builder.contact-property-action-hint")))]),t("div",{staticClass:"form-group"},[t("div",{staticClass:"custom-control custom-radio"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.propertyAction,expression:"propertyAction"}],staticClass:"custom-control-input",attrs:{id:"setProp",type:"radio",name:"contactPropAction"},domProps:{value:e.PROPERTY_ACTION.SET,checked:e._q(e.propertyAction,e.PROPERTY_ACTION.SET)},on:{change:function(t){e.propertyAction=e.PROPERTY_ACTION.SET}}}),t("label",{staticClass:"custom-control-label font-weight-normal",attrs:{for:"setProp"}},[e._v(" "+e._s(e._f("trans")("flow-builder.set-contact-property"))+" ")])]),t("div",{staticClass:"custom-control custom-radio"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.propertyAction,expression:"propertyAction"}],staticClass:"custom-control-input",attrs:{id:"clearProp",type:"radio",name:"contactPropAction"},domProps:{value:e.PROPERTY_ACTION.CLEAR,checked:e._q(e.propertyAction,e.PROPERTY_ACTION.CLEAR)},on:{change:function(t){e.propertyAction=e.PROPERTY_ACTION.CLEAR}}}),t("label",{staticClass:"custom-control-label font-weight-normal",attrs:{for:"clearProp"}},[e._v(" "+e._s(e._f("trans")("flow-builder.clear-contact-property"))+" ")])])]),t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/config/set_contact_property/0/property_key`},scopedSlots:e._u([{key:"input-control",fn:function({isValid:o}){return[t("div",{staticClass:"block-contact-property-key"},[t("text-editor",{attrs:{label:e._f("trans")("flow-builder.contact-property-label"),"label-class":"font-weight-bold",placeholder:e._f("trans")("flow-builder.enter-contact-property-label"),"valid-state":o},model:{value:e.propertyKey,callback:function(t){e.propertyKey=t},expression:"propertyKey"}})],1)]}}])}),e.propertyAction===e.PROPERTY_ACTION.SET?t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/config/set_contact_property/0/property_value`},scopedSlots:e._u([{key:"input-control",fn:function({isValid:o}){return[t("expression-input",{attrs:{label:e._f("trans")("flow-builder.value-expression"),placeholder:e._f("trans")("flow-builder.enter-expression"),"label-class":"font-weight-bold","current-expression":e.propertyValue,"valid-state":o},on:{commitExpressionChange:e.updatePropertyValue}})]}}],null,!1,3462627979)}):e._e()],1)])}),ba=[];const pa=Object(se["e"])("flow"),ha="@(null)",fa="";let va=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"block",void 0),Object(m["a"])(this,"PROPERTY_ACTION",{SET:"set",CLEAR:"clear"}),Object(m["a"])(this,"block_setContactPropertyKeyOnIndex",void 0),Object(m["a"])(this,"block_updateConfigByPath",void 0),Object(m["a"])(this,"block_setContactPropertyValueOnIndex",void 0)}created(){void 0===this.propertyKey&&(this.propertyKey=null)}get propertyAction(){return this.propertyValue===ha?this.PROPERTY_ACTION.CLEAR:this.PROPERTY_ACTION.SET}set propertyAction(e){e===this.PROPERTY_ACTION.CLEAR?this.updatePropertyValue(ha):this.updatePropertyValue(fa)}get firstProperty(){return Object(O["first"])(this.block.config.set_contact_property)}get propertyKey(){var e;return null===(e=this.firstProperty)||void 0===e?void 0:e.property_key}get propertyValue(){var e,t;return null!==(e=null===(t=this.firstProperty)||void 0===t?void 0:t.property_value)&&void 0!==e?e:fa}updatePropertyValue(e){this.block_setContactPropertyValueOnIndex({blockId:this.block.uuid,index:0,propertyValue:e})}set propertyKey(e){this.block_setContactPropertyKeyOnIndex({blockId:this.block.uuid,index:0,propertyKey:""===e||void 0===e?null:e})}};Object(k["__decorate"])([Object(E["b"])()],va.prototype,"block",void 0),Object(k["__decorate"])([pa.Action],va.prototype,"block_setContactPropertyKeyOnIndex",void 0),Object(k["__decorate"])([pa.Mutation],va.prototype,"block_updateConfigByPath",void 0),Object(k["__decorate"])([pa.Action],va.prototype,"block_setContactPropertyValueOnIndex",void 0),va=Object(k["__decorate"])([Object(E["a"])({})],va);var _a=va,ga=_a,ma=Object(M["a"])(ga,ua,ba,!1,null,null,null),ka=(ma.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return e.hasIvr?t("div",{staticClass:"end-recording-digits-editor"},[t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/config/ivr/end_recording_digits`},scopedSlots:e._u([{key:"input-control",fn:function({isValid:o}){return[t("keypad-digits-selector",{attrs:{label:e._f("trans")("flow-builder.end-recording-by-pressing"),placeholder:e._f("trans")("flow-builder.enter-value"),"valid-state":o},model:{value:e.endRecordingDigits,callback:function(t){e.endRecordingDigits=t},expression:"endRecordingDigits"}})]}}],null,!1,1793263103)})],1):e._e()}),ja=[];let Oa=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"hasIvr",void 0),Object(m["a"])(this,"block",void 0)}get endRecordingDigits(){var e,t,o,i;return null!==(e=null===(t=this.block)||void 0===t||null===(o=t.config)||void 0===o||null===(i=o.ivr)||void 0===i?void 0:i.end_recording_digits)&&void 0!==e?e:""}set endRecordingDigits(e){this.$emit("commitEndRecordingDigitsChange",e)}};Object(k["__decorate"])([Object(E["b"])({type:Boolean,default:!0})],Oa.prototype,"hasIvr",void 0),Object(k["__decorate"])([Object(E["b"])({type:Object,required:!0})],Oa.prototype,"block",void 0),Oa=Object(k["__decorate"])([Object(E["a"])({})],Oa);var ya=Oa,wa=ya,Ca=Object(M["a"])(wa,ka,ja,!1,null,null,null),xa=(Ca.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"exit-semantic-label-editor"},[t("text-editor",{attrs:{"is-editable":e.isEditable,label:e._f("trans")("flow-builder.block-exit-semantic-label"),placeholder:e._f("trans")("flow-builder.enter-block-exit-semantic-label")},model:{value:e.semanticLabel,callback:function(t){e.semanticLabel=t},expression:"semanticLabel"}})],1)}),Ea=[];let Ba=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"isEditable",void 0),Object(m["a"])(this,"exit",void 0)}get semanticLabel(){var e;return null!==(e=this.exit.semantic_label)&&void 0!==e?e:""}set semanticLabel(e){this.exit.semantic_label=e,this.$emit("commitSemanticLabel",e)}};Object(k["__decorate"])([Object(E["b"])({type:Boolean,default:!0})],Ba.prototype,"isEditable",void 0),Object(k["__decorate"])([Object(E["b"])({type:Object,required:!0})],Ba.prototype,"exit",void 0),Ba=Object(k["__decorate"])([Object(E["a"])({})],Ba);var Ia=Ba,Sa=Ia,Pa=Object(M["a"])(Sa,xa,Ea,!1,null,null,null),Ma=(Pa.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"generic-contact-property-editor"},[t("hr"),t("label",{staticClass:"text-primary"},[e._v(e._s(e._f("trans")("flow-builder.contact-properties")))]),t("div",{staticClass:"custom-control custom-checkbox"},[t("input",{staticClass:"custom-control-input",attrs:{id:"setContactProperty",type:"checkbox",name:"setContactProperty"},domProps:{value:e.shouldSetContactProperty,checked:e.shouldSetContactProperty},on:{change:e.toggleSetContactProperty}}),t("label",{staticClass:"custom-control-label font-weight-normal",attrs:{for:"setContactProperty"}},[e._v(" "+e._s(e._f("trans")("flow-builder.set-contact-property-with-response"))+" ")])]),e.shouldSetContactProperty?t("div",{staticClass:"form-group"},[t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/config/set_contact_property/0/property_key`},scopedSlots:e._u([{key:"input-control",fn:function({isValid:o}){return[t("div",{staticClass:"block-contact-property-key"},[e.hasSubscriberPropertyFields?t("div",[t("label",{attrs:{for:"contact-property-selector"}},[e._v(e._s(e.trans("flow-builder.property")))]),t("vue-multiselect",{attrs:{id:"contact-property-selector","track-by":"id",label:"display_label",placeholder:e._f("trans")("flow-builder.select-a-property"),options:e.subscriberPropertyFieldsForSelector,multiple:!1,"show-labels":!1,searchable:!0},model:{value:e.flowSelectedContactPropertyField,callback:function(t){e.flowSelectedContactPropertyField=t},expression:"flowSelectedContactPropertyField"}})],1):t("text-editor",{attrs:{value:e.propertyKey,label:e._f("trans")("flow-builder.property"),"label-class":"",placeholder:e._f("trans")("flow-builder.enter-contact-property-label"),"valid-state":o},on:{input:e.updateFirstContactPropertyKey}})],1)]}}],null,!1,1783061412)}),null!==e.flowSelectedContactPropertyField?[t("label",[e._v(e._s(e._f("trans")("flow-builder.value")))]),e.isBlockInteractive(e.block)?t("div",{staticClass:"form-group"},[e.disableExpressionInput?e._e():t("div",{staticClass:"custom-control custom-radio"},[t("input",{staticClass:"custom-control-input",attrs:{id:"setProp",type:"radio",name:"contactPropAction"},domProps:{checked:e.propertyValueAction===e.PROPERTY_VALUE_ACTION.FROM_CURRENT_BLOCK_RESPONSE,value:e.PROPERTY_VALUE_ACTION.FROM_CURRENT_BLOCK_RESPONSE},on:{change:e.updatePropertyValueAction}}),t("label",{staticClass:"custom-control-label font-weight-normal",attrs:{for:"setProp"}},[e._v(" "+e._s(e._f("trans")("flow-builder.entry-from-this-block"))+" ")])]),e.propertyValueAction===e.PROPERTY_VALUE_ACTION.FROM_CURRENT_BLOCK_RESPONSE?e._t("entry-from-this-block"):e._e(),e.disableExpressionInput?e._e():t("div",{staticClass:"custom-control custom-radio"},[t("input",{staticClass:"custom-control-input",attrs:{id:"clearProp",type:"radio",name:"contactPropAction"},domProps:{checked:e.propertyValueAction===e.PROPERTY_VALUE_ACTION.OPEN_EXPRESSION,value:e.PROPERTY_VALUE_ACTION.OPEN_EXPRESSION},on:{change:e.updatePropertyValueAction}}),t("label",{staticClass:"custom-control-label font-weight-normal",attrs:{for:"clearProp"}},[e._v(" "+e._s(e._f("trans")("flow-builder.expression"))+" ")])])],2):e._e(),e.shouldUseOpenExpression?t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/config/set_contact_property/property_value`},scopedSlots:e._u([{key:"input-control",fn:function({isValid:o}){return[t("expression-input",{staticClass:"mb-1",attrs:{label:"",placeholder:e._f("trans")("flow-builder.enter-expression"),"current-expression":e.propertyValue,"valid-state":o},on:{commitExpressionChange:e.updateFirstContactPropertyValue}}),t("div",{staticClass:"small"},[e._v(" "+e._s(e.trans("flow-builder.hint-to-set-contact-prop-by-expression"))+" ")])]}}],null,!1,1230193825)}):e._e()]:e._e()],2):e._e()])}),Fa=[],Ta=o("6df9");const Aa=Object(se["e"])("flow"),Va="",Ra="@block.value";let La=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"block",void 0),Object(m["a"])(this,"disableExpressionInput",void 0),Object(m["a"])(this,"shouldSetContactProperty",!1),Object(m["a"])(this,"PROPERTY_VALUE_ACTION",{OPEN_EXPRESSION:"openExpression",FROM_CURRENT_BLOCK_RESPONSE:"fromCurrentBlockResponse"}),Object(m["a"])(this,"propertyValueAction",""),Object(m["a"])(this,"propertyKey",null),Object(m["a"])(this,"propertyValue",""),Object(m["a"])(this,"block_updateConfigByPath",void 0),Object(m["a"])(this,"block_updateVendorMetadataByPath",void 0),Object(m["a"])(this,"block_removeConfigByKey",void 0),Object(m["a"])(this,"block_setContactPropertyKeyOnIndex",void 0),Object(m["a"])(this,"block_setContactPropertyValueOnIndex",void 0),Object(m["a"])(this,"block_setContactPropertyOnIndex",void 0),Object(m["a"])(this,"subscriberPropertyFields",void 0),Object(m["a"])(this,"subscriberPropertyFieldDataTypesMapping",void 0)}created(){this.shouldSetContactProperty=Object(O["has"])(this.block.config,"set_contact_property"),this.propertyKey=this.firstContactPropertyKey,this.propertyValue=this.firstContactPropertyValue,void 0===this.propertyValue&&(this.isBlockInteractive(this.block)?this.propertyValue=Ra:this.propertyValue=Va),this.initPropertyValueAction()}isBlockInteractive(e){return Object(Ta["c"])(e)}toggleSetContactProperty(){this.$emit("toggleSetContactProperty",!this.shouldSetContactProperty),this.shouldSetContactProperty=!this.shouldSetContactProperty,this.shouldSetContactProperty?this.block_setContactPropertyOnIndex({blockId:this.block.uuid,index:0,propertyKey:this.propertyKey,propertyValue:this.shouldUseOpenExpression?Va:this.propertyValue}):this.block_removeConfigByKey({blockId:this.block.uuid,key:"set_contact_property"})}initPropertyValueAction(){this.disableExpressionInput||this.propertyValue===Ra?this.propertyValueAction=this.PROPERTY_VALUE_ACTION.FROM_CURRENT_BLOCK_RESPONSE:this.propertyValueAction=this.PROPERTY_VALUE_ACTION.OPEN_EXPRESSION}updatePropertyValueAction({target:{value:e}}){this.propertyValueAction=e,e===this.PROPERTY_VALUE_ACTION.FROM_CURRENT_BLOCK_RESPONSE?(this.$emit("updateShouldUseCurrentBlockResponse",!0),this.updateFirstContactPropertyValue(Ra)):(this.$emit("updateShouldUseCurrentBlockResponse",!1),this.updateFirstContactPropertyValue(Va))}get shouldUseOpenExpression(){return this.propertyValueAction===this.PROPERTY_VALUE_ACTION.OPEN_EXPRESSION}updateFirstContactPropertyKey(e){this.propertyKey=e,this.block_setContactPropertyKeyOnIndex({blockId:this.block.uuid,index:0,propertyKey:e})}updateFirstContactPropertyValue(e){this.propertyValue=e,this.block_setContactPropertyValueOnIndex({blockId:this.block.uuid,index:0,propertyValue:e})}get firstContactPropertyKey(){var e,t;return null!==(e=null===(t=this.block.config.set_contact_property)||void 0===t?void 0:t[0].property_key)&&void 0!==e?e:null}get firstContactPropertyValue(){var e,t;return null!==(e=null===(t=this.block.config.set_contact_property)||void 0===t?void 0:t[0].property_value)&&void 0!==e?e:null}get flowSelectedContactPropertyField(){const e=Object(O["find"])(this.subscriberPropertyFields,e=>e.name===this.firstContactPropertyKey);return null!==e&&void 0!==e?e:null}set flowSelectedContactPropertyField(e){var t;(null===(t=this.flowSelectedContactPropertyField)||void 0===t?void 0:t.data_type)!==(null===e||void 0===e?void 0:e.data_type)&&this.$emit("changeContactPropertyType"),this.updateFirstContactPropertyKey(null===e||void 0===e?void 0:e.name)}get hasSubscriberPropertyFields(){return!Object(O["isEmpty"])(this.subscriberPropertyFields)}get subscriberPropertyFieldsForSelector(){return Object(O["map"])(this.subscriberPropertyFields,e=>{let t;return t=""===this.firstContactPropertyValue||this.subscriberPropertyFieldDataTypesMapping[e.data_type].includes(this.block.type),{...e,$isDisabled:!t}})}};Object(k["__decorate"])([Object(E["b"])()],La.prototype,"block",void 0),Object(k["__decorate"])([Object(E["b"])({default:!1})],La.prototype,"disableExpressionInput",void 0),Object(k["__decorate"])([Aa.Mutation],La.prototype,"block_updateConfigByPath",void 0),Object(k["__decorate"])([Aa.Mutation],La.prototype,"block_updateVendorMetadataByPath",void 0),Object(k["__decorate"])([Aa.Mutation],La.prototype,"block_removeConfigByKey",void 0),Object(k["__decorate"])([Aa.Action],La.prototype,"block_setContactPropertyKeyOnIndex",void 0),Object(k["__decorate"])([Aa.Action],La.prototype,"block_setContactPropertyValueOnIndex",void 0),Object(k["__decorate"])([Aa.Action],La.prototype,"block_setContactPropertyOnIndex",void 0),Object(k["__decorate"])([se["b"]],La.prototype,"subscriberPropertyFields",void 0),Object(k["__decorate"])([se["b"]],La.prototype,"subscriberPropertyFieldDataTypesMapping",void 0),La=Object(k["__decorate"])([Object(E["a"])({components:{VueMultiselect:Ve.a}})],La);var Da=La,Na=Da,$a=Object(M["a"])(Na,Ma,Fa,!1,null,null,null),Ua=($a.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"group-membership-editor"},[t("div",{staticClass:"form-group"},[t("label",{staticClass:"text-primary"},[e._v(e._s(e.trans("flow-builder.action-label")))]),t("p",[e._v(e._s(e.trans("flow-builder.group-membership-action-hint")))]),t("div",{staticClass:"form-group"},e._l(e.availableMembershipActions,(function(o){return t("div",{key:o.id,staticClass:"custom-control custom-radio"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.membershipAction,expression:"membershipAction"}],staticClass:"custom-control-input",attrs:{id:o.id,type:"radio",name:"groupMembershipAction"},domProps:{value:o.value,checked:e._q(e.membershipAction,o.value)},on:{change:function(t){e.membershipAction=o.value}}}),t("label",{staticClass:"custom-control-label font-weight-normal",attrs:{for:o.id}},[e._v(" "+e._s(o.label)+" ")])])})),0),t("ValidationMessage",{attrs:{"message-key":`block/${e.block.uuid}/config/groups`},scopedSlots:e._u([{key:"input-control",fn:function({isValid:o}){return[e.isGroupListVisible?t("vue-multiselect",{class:{invalid:!1===o},attrs:{"is-loading":e.hasGroupsLoading,options:e.groupOptions,taggable:!e.availableGroups,multiple:!0,"track-by":"group_key",label:"group_name"},on:{"seach-change":e.onSearchChange,tag:e.onGroupAdd},model:{value:e.selectedGroups,callback:function(t){e.selectedGroups=t},expression:"selectedGroups"}}):e._e()]}}])})],1)])}),Ha=[];const Wa=Object(se["e"])("flow");var za;(function(e){e["ADD"]="add",e["REMOVE"]="remove",e["CLEAR"]="clear"})(za||(za={}));let Ga=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"block",void 0),Object(m["a"])(this,"availableGroups",void 0),Object(m["a"])(this,"hasGroupsLoading",void 0),Object(m["a"])(this,"userAddedGroups",[]),Object(m["a"])(this,"block_updateConfigByPath",void 0)}get groupOptions(){var e;return null!==(e=this.availableGroups)&&void 0!==e?e:this.userAddedGroups}get availableMembershipActions(){return[{id:"addGroup",label:this.trans("flow-builder.set-group-membership"),value:za.ADD},{id:"removeGroup",label:this.trans("flow-builder.remove-group-membership"),value:za.REMOVE},{id:"clearGroup",label:this.trans("flow-builder.clear-group-membership"),value:za.CLEAR}]}get membershipAction(){const{clear:e,is_member:t}=this.block.config;return!0===e?za.CLEAR:!0===t?za.ADD:za.REMOVE}set membershipAction(e){if(e===za.CLEAR)this.updateBlockConfig({clear:!0,is_member:void 0});else{if(e!==za.ADD&&e!==za.REMOVE)throw new Error("Unknown membership action "+e);this.updateBlockConfig({clear:!1,is_member:e===za.ADD})}}get isGroupListVisible(){return this.membershipAction!==za.CLEAR}get selectedGroups(){var e,t;return null!==(e=null===(t=this.block.config)||void 0===t?void 0:t.groups)&&void 0!==e?e:[]}set selectedGroups(e){this.updateBlockConfig({groups:e})}updateBlockConfig(e){Object.entries(e).forEach(([e,t])=>{this.block_updateConfigByPath({blockId:this.block.uuid,path:e,value:t})})}onSearchChange(e){this.$emit("group-search",e)}onGroupAdd(e){const t={group_key:e,group_name:e};this.userAddedGroups.push(t),this.selectedGroups=[...this.selectedGroups,t]}};Object(k["__decorate"])([Object(E["b"])()],Ga.prototype,"block",void 0),Object(k["__decorate"])([Object(E["b"])()],Ga.prototype,"availableGroups",void 0),Object(k["__decorate"])([Object(E["b"])({type:Boolean,default:!1})],Ga.prototype,"hasGroupsLoading",void 0),Object(k["__decorate"])([Wa.Mutation],Ga.prototype,"block_updateConfigByPath",void 0),Ga=Object(k["__decorate"])([Object(E["a"])({components:{VueMultiselect:Ve.a}})],Ga);var qa=Ga,Ka=qa,Za=(o("582b"),Object(M["a"])(Ka,Ua,Ha,!1,null,"065bddf2",null)),Xa=(Za.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"label-editor"},[t("section",{staticClass:"mb-3"},[t("label",{staticClass:"text-primary"},[e._v(e._s(e._f("trans")("flow-builder.title")))]),t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/label`},scopedSlots:e._u([{key:"input-control",fn:function({isValid:o}){return[t("div",{staticClass:"d-flex"},[t("text-editor",{staticClass:"w-100",attrs:{label:"",placeholder:e._f("trans")("flow-builder.enter-title"),"valid-state":o},model:{value:e.blockLabel,callback:function(t){e.blockLabel=t},expression:"blockLabel"}}),t("span",{staticClass:"btn btn-outline-primary btn-xs align-self-center ml-2",on:{click:e.emitGearClickedEvent}},[t("font-awesome-icon",{staticClass:"fa-btn",attrs:{icon:["fac","settings"]}})],1)],1)]}}])})],1)])}),Ja=[];const Ya=Object(se["e"])("flow");let Qa=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"block",void 0),Object(m["a"])(this,"block_setLabel",void 0)}get blockLabel(){return this.block.label}set blockLabel(e){this.block_setLabel({blockId:this.block.uuid,value:e})}emitGearClickedEvent(){this.$emit("gearClicked")}};Object(k["__decorate"])([Object(E["b"])()],Qa.prototype,"block",void 0),Object(k["__decorate"])([Ya.Action],Qa.prototype,"block_setLabel",void 0),Qa=Object(k["__decorate"])([E["a"]],Qa);var es=Qa,ts=es,os=Object(M["a"])(ts,Xa,Ja,!1,null,null,null),is=(os.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return e.hasIvr?t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/config/ivr/max_digits`},scopedSlots:e._u([{key:"input-control",fn:function({isValid:o}){return[t("div",{staticClass:"max-digit-editor"},[t("numeric-editor",{attrs:{"regex-numeric-filtering":"[0-9]",label:e._f("trans")("flow-builder.maximum-digits"),placeholder:e._f("trans")("flow-builder.enter-value"),"tooltip-hint":e._f("trans")("flow-builder.max-digits-help-text"),"valid-state":o},model:{value:e.maxDigits,callback:function(t){e.maxDigits=e._n(t)},expression:"maxDigits"}})],1)]}}],null,!1,2263409743)}):e._e()}),as=[];let ss=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"block",void 0),Object(m["a"])(this,"hasIvr",void 0)}get maxDigits(){return Object(O["get"])(this.block,"config.ivr.max_digits","")}set maxDigits(e){this.$emit("commitMaxDigitsChange",e)}};Object(k["__decorate"])([Object(E["b"])({type:Object,required:!0})],ss.prototype,"block",void 0),Object(k["__decorate"])([Object(E["b"])({type:Boolean,default:!0})],ss.prototype,"hasIvr",void 0),ss=Object(k["__decorate"])([Object(E["a"])({})],ss);var rs=ss,ns=rs,cs=Object(M["a"])(ns,is,as,!1,null,null,null),ls=(cs.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return e.hasIvr?t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/config/ivr/max_duration_seconds`},scopedSlots:e._u([{key:"input-control",fn:function({isValid:o}){return[t("numeric-editor",{staticClass:"max-duration-seconds-editor",attrs:{"regex-numeric-filtering":"[0-9]",label:e.trans("flow-builder.max-duration-in-seconds"),placeholder:e.trans("flow-builder.enter-value"),"valid-state":o},model:{value:e.duration,callback:function(t){e.duration=e._n(t)},expression:"duration"}})]}}],null,!1,3755351396)}):e._e()}),ds=[];let us=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"block",void 0),Object(m["a"])(this,"hasIvr",void 0),Object(m["a"])(this,"defaultMaxDuration",60)}get duration(){return Object(O["get"])(this.block,"config.ivr.max_duration_seconds","")}set duration(e){this.$emit("commitMaxDurationChange",e)}created(){this.duration||(this.duration=this.defaultMaxDuration)}};Object(k["__decorate"])([Object(E["b"])({type:Object,required:!0})],us.prototype,"block",void 0),Object(k["__decorate"])([Object(E["b"])({type:Boolean,default:!0})],us.prototype,"hasIvr",void 0),us=Object(k["__decorate"])([Object(E["a"])({})],us);var bs=us,ps=bs,hs=Object(M["a"])(ps,ls,ds,!1,null,null,null),fs=(hs.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/config/maximum_choices`},scopedSlots:e._u([{key:"input-control",fn:function({isValid:o}){return[t("div",{staticClass:"maximum-choices-editor"},[t("numeric-editor",{attrs:{"regex-numeric-filtering":"[0-9]",label:e._f("trans")("flow-builder.maximum-choices"),placeholder:e._f("trans")("flow-builder.enter-value"),"valid-state":o},model:{value:e.maxChoices,callback:function(t){e.maxChoices=e._n(t)},expression:"maxChoices"}})],1)]}}])})}),vs=[],_s=o("5801");const gs=Object(se["e"])("flow/"+_s["a"]);Object(se["e"])("builder");let ms=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"block",void 0),Object(m["a"])(this,"setMaxChoices",void 0)}mounted(){}get maxChoices(){const e=this.block.config.maximum_choices;return Object(O["isNumber"])(e)?e:""}set maxChoices(e){const{uuid:t}=this.block;this.setMaxChoices({blockId:t,value:Object(O["isNumber"])(e)?e:void 0})}};Object(k["__decorate"])([Object(E["b"])()],ms.prototype,"block",void 0),Object(k["__decorate"])([gs.Action],ms.prototype,"setMaxChoices",void 0),ms=Object(k["__decorate"])([Object(E["a"])({})],ms);var ks=ms,js=ks,Os=Object(M["a"])(js,fs,vs,!1,null,null,null),ys=(Os.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/config/validation_maximum`},scopedSlots:e._u([{key:"input-control",fn:function({isValid:o}){return[t("div",{staticClass:"maximum-numeric-editor"},[t("numeric-editor",{attrs:{"regex-numeric-filtering":"[0-9]",label:e._f("trans")("flow-builder.maximum-value-(inclusive)"),placeholder:e._f("trans")("flow-builder.enter-value"),"valid-state":o},model:{value:e.maxValue,callback:function(t){e.maxValue=e._n(t)},expression:"maxValue"}})],1)]}}])})}),ws=[];let Cs=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"block",void 0)}get maxValue(){return this.block.config.validation_maximum}set maxValue(e){this.$emit("commitValidationMaximumChange",e)}};Object(k["__decorate"])([Object(E["b"])()],Cs.prototype,"block",void 0),Cs=Object(k["__decorate"])([Object(x["b"])({})],Cs);var xs=Cs,Es=xs,Bs=Object(M["a"])(Es,ys,ws,!1,null,null,null),Is=(Bs.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/config/minimum_choices`},scopedSlots:e._u([{key:"input-control",fn:function({isValid:o}){return[t("div",{staticClass:"minimum-choices-editor"},[t("numeric-editor",{attrs:{"regex-numeric-filtering":"[0-9]",label:e._f("trans")("flow-builder.minimum-choices"),placeholder:e._f("trans")("flow-builder.enter-value"),"valid-state":o},model:{value:e.minChoices,callback:function(t){e.minChoices=e._n(t)},expression:"minChoices"}})],1)]}}])})}),Ss=[];const Ps=Object(se["e"])("flow/"+_s["a"]);Object(se["e"])("builder");let Ms=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"block",void 0),Object(m["a"])(this,"setMinChoices",void 0)}mounted(){}get minChoices(){const e=this.block.config.minimum_choices;return Object(O["isNumber"])(e)?e:""}set minChoices(e){const{uuid:t}=this.block;this.setMinChoices({blockId:t,value:Object(O["isNumber"])(e)?e:void 0})}};Object(k["__decorate"])([Object(E["b"])()],Ms.prototype,"block",void 0),Object(k["__decorate"])([Ps.Action],Ms.prototype,"setMinChoices",void 0),Ms=Object(k["__decorate"])([Object(E["a"])({})],Ms);var Fs=Ms,Ts=Fs,As=Object(M["a"])(Ts,Is,Ss,!1,null,null,null),Vs=(As.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/config/validation_minimum`},scopedSlots:e._u([{key:"input-control",fn:function({isValid:o}){return[t("div",{staticClass:"minimum-numeric-editor"},[t("numeric-editor",{attrs:{"regex-numeric-filtering":"[0-9]",label:e._f("trans")("flow-builder.minimum-value-(inclusive)"),placeholder:e._f("trans")("flow-builder.enter-value"),"valid-state":o},model:{value:e.minValue,callback:function(t){e.minValue=e._n(t)},expression:"minValue"}})],1)]}}])})}),Rs=[];let Ls=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"block",void 0)}get minValue(){return this.block.config.validation_minimum}set minValue(e){this.$emit("commitValidationMinimumChange",e)}};Object(k["__decorate"])([Object(E["b"])()],Ls.prototype,"block",void 0),Ls=Object(k["__decorate"])([Object(x["b"])({})],Ls);var Ds=Ls,Ns=Ds,$s=Object(M["a"])(Ns,Vs,Rs,!1,null,null,null),Us=($s.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"name-editor mt-3"},[t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/name`},scopedSlots:e._u([{key:"input-control",fn:function({isValid:o}){return[e.editBlockName||!1===o?t("div",[t("h6",[e._v(e._s(e.trans("flow-builder.edit-block-code")))]),t("div",{staticClass:"d-flex"},[t("text-editor",{staticClass:"w-100",attrs:{label:"",placeholder:e.trans("flow-builder.enter-block-code"),"valid-state":o},on:{keydown:e.filterName},model:{value:e.blockName,callback:function(t){e.blockName=t},expression:"blockName"}}),t("span",{staticClass:"btn btn-primary btn-xs align-self-center ml-2",on:{click:e.handleCompleteEditing}},[t("font-awesome-icon",{staticClass:"fa-btn",attrs:{icon:["fas","check"]}})],1)],1)]):t("div",{staticClass:"d-flex justify-content-between"},[t("div",{staticClass:"block-code align-self-center"},[t("h6",{staticClass:"d-inline"},[e._v(" "+e._s(e.trans("flow-builder.code"))+": ")]),t("span",[e._v(" "+e._s(e.blockName)+" ")])]),t("span",{staticClass:"btn btn-primary btn-xs align-self-baseline ml-2",on:{click:function(t){e.editBlockName=!0}}},[t("font-awesome-icon",{staticClass:"fa-btn",attrs:{icon:["far","edit"]}})],1)])]}}])})],1)}),Hs=[];const Ws=Object(se["e"])("flow");let zs=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"editBlockName",!1),Object(m["a"])(this,"block",void 0),Object(m["a"])(this,"block_setName",void 0),Object(m["a"])(this,"block_resetName",void 0)}get blockName(){return this.block.name}set blockName(e){this.block_setName({blockId:this.block.uuid,value:e,lockAutoUpdate:!0})}filterName(e){this.editBlockName=!0,e.key.match(/\W+|Enter/g)&&e.preventDefault()}handleCompleteEditing(){this.editBlockName=!1,""===this.blockName&&this.block_resetName({blockId:this.block.uuid})}};Object(k["__decorate"])([Object(E["b"])()],zs.prototype,"block",void 0),Object(k["__decorate"])([Ws.Action],zs.prototype,"block_setName",void 0),Object(k["__decorate"])([Ws.Action],zs.prototype,"block_resetName",void 0),zs=Object(k["__decorate"])([Object(E["a"])({})],zs);var Gs=zs,qs=Gs,Ks=(o("7a08"),Object(M["a"])(qs,Us,Hs,!1,null,"11c954ab",null)),Zs=(Ks.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return e.isFeatureCallToRecordEnabled?t("div",{staticClass:"phone-recorder"},[t("phone-recording-recorder-selector",{attrs:{"is-modal-visible":e.isRecorderSelectorVisible},on:{input:e.handleRecorderSelectionChanged},model:{value:e.callConfig,callback:function(t){e.callConfig=t},expression:"callConfig"}})],1):e._e()}),Xs=[];let Js=class extends E["c"]{constructor(...e){super(...e),Object(m["a"])(this,"recordingKey",void 0),Object(m["a"])(this,"callConfig",{}),Object(m["a"])(this,"isRecorderSelectorVisible",void 0),Object(m["a"])(this,"isFeatureCallToRecordEnabled",void 0)}handleRecorderSelectionChanged(){if(this.$store.commit("setAudioRecordingConfigVisibilityForSelectedBlock",{isVisible:!1}),null===this.callConfig.recorder)return;const e={key:this.recordingKey,description:this.callConfig.description,...this.callConfig.recorder};this.$store.dispatch("startAudioRecordingFor",e).finally(()=>this.$emit("finish"))}};Object(k["__decorate"])([Object(E["b"])({type:String,required:!0})],Js.prototype,"recordingKey",void 0),Object(k["__decorate"])([Object(se["d"])(({audio:{recording:{isRecorderSelectorVisible:e}}})=>e)],Js.prototype,"isRecorderSelectorVisible",void 0),Object(k["__decorate"])([se["b"]],Js.prototype,"isFeatureCallToRecordEnabled",void 0),Js=Object(k["__decorate"])([Object(E["a"])({})],Js);var Ys=Js,Qs=Ys,er=Object(M["a"])(Qs,Zs,Xs,!1,null,null,null),tr=(er.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("b-modal",{staticClass:"phone-recording-recorder-selector",attrs:{size:"lg","no-close-on-backdrop":"","no-close-on-esc":"",title:e._f("trans")("flow-builder.select-a-caller-from-the-list-below"),visible:e.isModalVisible,"ok-title":e._f("trans")("flow-builder.call-this-phone-number"),"cancel-title":e._f("trans")("flow-builder.close")},on:{ok:e.handleModalClosed,cancel:e.handleModalCancelled,close:e.handleModalCancelled}},[t("div",{staticClass:"call-to-record-modal-table-container"},[t("table",{staticClass:"table table-striped"},[t("thead",[t("tr",[t("th",{staticClass:"recorder-selector-field"}),t("th",[e._v(e._s(e._f("trans")("flow-builder.name")))]),t("th",[e._v(e._s(e._f("trans")("flow-builder.phone-number")))])])]),t("tbody",{attrs:{id:"call-to-record-modal-list"}},e._l(e.recorders,(function(o,i){return t("tr",{key:i,staticClass:"call-to-record-item"},[t("td",{staticClass:"recorder-selector-field"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedRecorder,expression:"selectedRecorder"}],attrs:{id:"call-to-record-caller-"+o.id,type:"radio","x-name":"calltorecord_caller_select"},domProps:{value:o,checked:e._q(e.selectedRecorder,o)},on:{change:function(t){e.selectedRecorder=o}}})]),t("td",[t("label",{attrs:{for:"call-to-record-caller-"+o.id},on:{click:function(t){return e.setSelectedRecorder(o)}}},[e._v(e._s(o.name))])]),t("td",[t("label",{attrs:{for:"call-to-record-caller-"+o.id},on:{click:function(t){return e.setSelectedRecorder(o)}}},[e._v(e._s(o.phone))])])])})),0)]),t("h4",[e._v(e._s(e._f("trans")("flow-builder.add-a-description-to-this-recording")))]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],staticClass:"form-control",attrs:{type:"text",rows:"2",placeholder:e._f("trans")("flow-builder.optional-description")},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}}),t("h4",[e._v(e._s(e._f("trans")("flow-builder.add-a-new-recorder")))]),t("table",{staticClass:"table"},[t("tbody",[t("tr",[t("td",{staticClass:"recorder-selector-field"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedRecorder,expression:"selectedRecorder"}],attrs:{id:"new_recorder_radio",type:"radio",name:"calltorecord_caller_select"},domProps:{value:e.draft,checked:e._q(e.selectedRecorder,e.draft)},on:{change:function(t){e.selectedRecorder=e.draft}}})]),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.draft.name,expression:"draft.name"}],staticClass:"form-control",attrs:{type:"text",placeholder:e._f("trans")("flow-builder.name")},domProps:{value:e.draft.name},on:{click:e.selectNewRecorder,input:function(t){t.target.composing||e.$set(e.draft,"name",t.target.value)}}})]),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.draft.phone,expression:"draft.phone"}],staticClass:"form-control",attrs:{type:"text",placeholder:e._f("trans")("flow-builder.phone-number")},domProps:{value:e.draft.phone},on:{click:e.selectNewRecorder,input:function(t){t.target.composing||e.$set(e.draft,"phone",t.target.value)}}})])])])])])])}),or=[];let ir=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"isModalVisible",void 0),Object(m["a"])(this,"description",null),Object(m["a"])(this,"draft",null),Object(m["a"])(this,"selectedRecorder",null),Object(m["a"])(this,"recorders",void 0)}created(){this.reset()}selectNewRecorder(){this.draft.isNew=!0,this.selectedRecorder=this.draft}setSelectedRecorder(e){this.selectedRecorder=e}reset(){this.draft={name:null,phone:null,isNew:!0},this.description=null,this.selectedRecorder=null}handleModalClosed(){const{description:e}=this,t=Object(O["clone"])(this.selectedRecorder);this.reset(),this.$emit("input",{value:t,recorder:t,description:e})}handleModalCancelled(){this.reset();const{description:e}=this,t=Object(O["clone"])(this.selectedRecorder);this.$emit("input",{value:t,recorder:t,description:e})}};Object(k["__decorate"])([Object(E["b"])({type:Boolean,required:!0})],ir.prototype,"isModalVisible",void 0),Object(k["__decorate"])([Object(se["d"])(({audio:{recording:{recorders:e}}})=>e)],ir.prototype,"recorders",void 0),ir=Object(k["__decorate"])([Object(E["a"])({components:{BModal:co["a"]}})],ir);var ar=ir,sr=ar,rr=(o("f4bd"),Object(M["a"])(sr,tr,or,!1,null,"0ed07710",null)),nr=(rr.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/semantic_label`},scopedSlots:e._u([{key:"input-control",fn:function({isValid:o}){return[t("div",{staticClass:"semantic-label-editor"},[t("text-editor",{attrs:{label:e._f("trans")("flow-builder.block-exit-semantic-label"),placeholder:e._f("trans")("flow-builder.enter-block-semantic-label"),"valid-state":o},model:{value:e.semanticLabel,callback:function(t){e.semanticLabel=t},expression:"semanticLabel"}})],1)]}}])})}),cr=[];const lr=Object(se["e"])("flow");let dr=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"block",void 0),Object(m["a"])(this,"block_setSemanticLabel",void 0)}get semanticLabel(){var e;return null!==(e=this.block.semantic_label)&&void 0!==e?e:""}set semanticLabel(e){this.block_setSemanticLabel({blockId:this.block.uuid,value:e})}};Object(k["__decorate"])([Object(E["b"])({type:Object,required:!0})],dr.prototype,"block",void 0),Object(k["__decorate"])([lr.Mutation],dr.prototype,"block_setSemanticLabel",void 0),dr=Object(k["__decorate"])([Object(E["a"])({})],dr);var ur=dr,br=ur,pr=Object(M["a"])(br,nr,cr,!1,null,null,null),hr=(pr.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"simplified-name-editor"},[t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/name`},scopedSlots:e._u([{key:"input-control",fn:function({isValid:o}){return[e.editBlockName||!1===o?t("div",[t("text-editor",{attrs:{label:"",placeholder:e.trans("flow-builder.enter-block-code"),"valid-state":o},on:{keydown:e.filterName},nativeOn:{mouseleave:function(t){return e.handleCompleteEditing.apply(null,arguments)}},model:{value:e.blockName,callback:function(t){e.blockName=t},expression:"blockName"}})],1):t("div",{staticClass:"block-code"},[t("div",{on:{mouseenter:e.activateEditing}},[e._v(" "+e._s(e.blockName)+" ")])])]}}])})],1)}),fr=[];const vr=Object(se["e"])("flow");let _r=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"editBlockName",!1),Object(m["a"])(this,"block",void 0),Object(m["a"])(this,"block_setName",void 0),Object(m["a"])(this,"block_resetName",void 0)}get blockName(){return this.block.name}set blockName(e){this.block_setName({blockId:this.block.uuid,value:e,lockAutoUpdate:!0}),this.$emit("change")}updated(){""===this.blockName&&(this.editBlockName=!0)}filterName(e){this.activateEditing(),e.key.match(/\W+|Enter/g)&&e.preventDefault()}activateEditing(){this.editBlockName=!0}handleCompleteEditing(){this.editBlockName=!1,""===this.blockName&&this.block_resetName({blockId:this.block.uuid}),this.$emit("change")}};Object(k["__decorate"])([Object(E["b"])()],_r.prototype,"block",void 0),Object(k["__decorate"])([vr.Action],_r.prototype,"block_setName",void 0),Object(k["__decorate"])([vr.Action],_r.prototype,"block_resetName",void 0),_r=Object(k["__decorate"])([Object(E["a"])({})],_r);var gr=_r,mr=gr,kr=(o("52e6"),Object(M["a"])(mr,hr,fr,!1,null,"29774d49",null)),jr=(kr.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/tags`},scopedSlots:e._u([{key:"input-control",fn:function({isValid:o}){return[t("div",{staticClass:"tag-selector"},[e.noLabel?e._e():t("label",[e._v(e._s(e._f("trans")("flow-builder.tags-label")))]),t("vue-multiselect",{class:{invalid:!1===o},attrs:{"track-by":"name",label:"name",multiple:!0,placeholder:e._f("trans")("flow-builder.tags-selector-placeholder"),options:e.availableTagOptions,searchable:!0,"show-labels":!1,"close-on-select":!1,taggable:e.taggable,"tag-placeholder":e.taggable?e.trans("flow-builder.create-a-tag-prompt"):"",disabled:!e.isEditable},on:{tag:e.addTag},scopedSlots:e._u([{key:"clear",fn:function(){return[e.selectedTags.length?t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.trans("flow-builder.clear-all"),expression:"trans('flow-builder.clear-all')",modifiers:{hover:!0}}],staticClass:"multiselect__clear-all",on:{click:function(t){return e.clearAll()}}},[t("font-awesome-icon",{attrs:{icon:["fas","times-circle"]}})],1):e._e()]},proxy:!0},{key:"tag",fn:function({remove:t,option:o,search:i}){return[e._t("tag",null,{remove:t,option:o,search:i})]}}],null,!0),model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}})],1)]}}])})}),Or=[];const yr=Object(se["e"])("flow"),wr=Object(se["e"])("builder");let Cr=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"block",void 0),Object(m["a"])(this,"taggable",void 0),Object(m["a"])(this,"noLabel",void 0),Object(m["a"])(this,"isEditable",void 0),Object(m["a"])(this,"block_setTags",void 0),Object(m["a"])(this,"block_addTag",void 0),Object(m["a"])(this,"blockTags",void 0)}get selectedTags(){return this.stringListToOptions(this.block.tags||[])}set selectedTags(e){this.block_setTags({blockId:this.block.uuid,value:Object(O["map"])(e,"name")})}get availableTagOptions(){return this.stringListToOptions(this.blockTags)}stringListToOptions(e){return Object(O["map"])(Object(O["uniq"])(e),e=>({id:e,name:e}))}addTag(e){this.blockTags.push(e),this.block_addTag({blockId:this.block.uuid,value:e})}clearAll(){this.selectedTags=[]}};Object(k["__decorate"])([Object(E["b"])()],Cr.prototype,"block",void 0),Object(k["__decorate"])([Object(E["b"])({default:!0})],Cr.prototype,"taggable",void 0),Object(k["__decorate"])([Object(E["b"])({default:!1})],Cr.prototype,"noLabel",void 0),Object(k["__decorate"])([wr.Getter],Cr.prototype,"isEditable",void 0),Object(k["__decorate"])([yr.Mutation],Cr.prototype,"block_setTags",void 0),Object(k["__decorate"])([yr.Mutation],Cr.prototype,"block_addTag",void 0),Object(k["__decorate"])([Object(se["d"])(({trees:{ui:{blockTags:e}}})=>e)],Cr.prototype,"blockTags",void 0),Cr=Object(k["__decorate"])([Object(E["a"])({components:{VueMultiselect:Ve.a}})],Cr);var xr=Cr,Er=xr,Br=(o("3284"),Object(M["a"])(Er,jr,Or,!1,null,"ab24e5b0",null)),Ir=(Br.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("ValidationMessage",{attrs:{"message-key":`block/${e.block.uuid}/config/accuracy_threshold_meters`},scopedSlots:e._u([{key:"input-control",fn:function({isValid:o}){return[t("div",{staticClass:"threshold-editor"},[t("float-editor",{attrs:{min:0,"regex-float-filtering":"[0-9.,]",label:e._f("trans")("flow-builder.accuracy-threshold-in-meters"),placeholder:e._f("trans")("flow-builder.enter-value"),"valid-state":o},model:{value:e.threshold,callback:function(t){e.threshold=e._n(t)},expression:"threshold"}})],1)]}}])})}),Sr=[];let Pr=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"block",void 0),Object(m["a"])(this,"defaultValue",5)}get threshold(){return Object(O["get"])(this.block,"config.accuracy_threshold_meters",this.defaultValue)}set threshold(e){this.$emit("commitAccuracyThresholdMetersChange",e)}};Object(k["__decorate"])([Object(E["b"])({type:Object,required:!0})],Pr.prototype,"block",void 0),Pr=Object(k["__decorate"])([Object(E["a"])({})],Pr);var Mr=Pr,Fr=Mr,Tr=Object(M["a"])(Fr,Ir,Sr,!1,null,null,null),Ar=(Tr.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("validation-message",{attrs:{"message-key":`block/${e.block.uuid}/config/accuracy_timeout_seconds`},scopedSlots:e._u([{key:"input-control",fn:function({isValid:o}){return[t("div",{staticClass:"timeout-editor"},[t("numeric-editor",{attrs:{"regex-numeric-filtering":"[0-9]",label:e._f("trans")("flow-builder.accuracy-timeout-in-seconds"),placeholder:e._f("trans")("flow-builder.enter-value"),"valid-state":o},model:{value:e.timeout,callback:function(t){e.timeout=e._n(t)},expression:"timeout"}})],1)]}}])})}),Vr=[];let Rr=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"block",void 0),Object(m["a"])(this,"defaultValue",120)}get timeout(){return Object(O["get"])(this.block,"config.accuracy_timeout_seconds",this.defaultValue)}set timeout(e){this.$emit("commitAccuracyTimeoutSecondsChange",e)}};Object(k["__decorate"])([Object(E["b"])({type:Object,required:!0})],Rr.prototype,"block",void 0),Rr=Object(k["__decorate"])([Object(E["a"])({})],Rr);var Lr=Rr,Dr=Lr,Nr=Object(M["a"])(Dr,Ar,Vr,!1,null,null,null),$r=(Nr.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"upload-monitor"},[e.hasProgress?t("div",{staticClass:"upload-monitor-progress"},[t("h6",[e._v(e._s(e._f("trans")("flow-builder.uploading"))+" "+e._s(e.upload.file.name))]),t("div",{staticClass:"progress"},[t("b-progress",{staticClass:"mb-3",attrs:{value:1*e.progress,"show-value":"",animated:""}})],1)]):e._e(),e.isFailure?t("p",{staticClass:"text-danger small"},[e._v(" "+e._s(e._f("trans")("flow-builder.error-uploading-file-try-again"))+" "),e.upload.message?t("span",{staticClass:"details"},[e._v("("+e._s(e.upload.message)+")")]):e._e()]):e._e(),e.hasProgress?e._e():e._t("default")],2)}),Ur=[],Hr=o("49f5"),Wr=o("bc3a"),zr=o.n(Wr);const Gr={UPLOADING:-1,UNINITIALIZED:0,SUCCESS:1,FAILURE:2};Gr.UPLOADING,Gr.UNINITIALIZED,Gr.SUCCESS,Gr.FAILURE;var qr={namespaced:!0,state:{uploadProgressByKey:{},errorMessageByKey:{},uploadsById:{},uploadIdsByKey:{}},mutations:{setErrorMessage({errorMessageByKey:e},{key:t,errorMessage:o}){h["default"].set(e,t,o)},setUploadProgress({uploadProgressByKey:e},{key:t,uploadProgress:o}){h["default"].set(e,t,o)},setUploadStatusFor({uploadsById:e,uploadIdsByKey:t},{file:o,key:i,status:a,progress:s,message:r,cancel:n}){const c=y.a.pick(o,["averageSpeed","currentSpeed","error","name","paused","relativePath","size","uniqueIdentifier"]);h["default"].set(e,c.uniqueIdentifier,{key:i,status:a,progress:s,message:r,cancel:n,file:c}),h["default"].set(t,i,c.uniqueIdentifier)}},actions:{uploadFile({commit:e},{key:t,uploadUrl:o,formDataFields:i,onSuccess:a,onError:s}){if(!o)return e("setUploadProgress",{key:t,uploadProgress:null}),void s(new Error("url was "+o));const r=new FormData;y.a.forEach(i,(e,t)=>{r.set(t,e)});const n={onUploadProgress:o=>{e("setUploadProgress",{key:t,uploadProgress:Math.floor(100*o.loaded/o.total)})}};zr.a.post(o,r,n).then(o=>{e("setUploadProgress",{key:t,uploadProgress:null}),a(o)}).catch(o=>{e("setUploadProgress",{key:t,uploadProgress:null}),s(o)})},uploadFiles({commit:e,dispatch:t,state:o},{key:i,files:a,uploader:s}){const r=e=>s.cancel();a.forEach(t=>e("setUploadStatusFor",{file:t,key:i,progress:0,status:Gr.UNINITIALIZED,message:null,cancel:r})),s.on("fileProgress",(t,o)=>{console.debug(`Upload in progress... ${_.parseInt(100*t.progress())}%`),e("setUploadStatusFor",{file:t,key:i,progress:t.progress(),status:Gr.UPLOADING,message:null,cancel:r})}),s.on("fileSuccess",(t,o)=>{console.debug("Upload successful!"),e("setUploadStatusFor",{file:t,key:i,progress:1,status:Gr.SUCCESS,message:null,cancel:r})}),s.on("error",(t,o)=>{const{status_description:a}=JSON.parse(t)||{};console.debug("Upload has error "+a),e("setUploadStatusFor",{file:o,key:i,status:Gr.FAILURE,message:a,cancel:r})}),s.upload(),console.debug("Upload in progress...")}}};const Kr=Object(se["e"])("multimediaUpload");let Zr=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"uploadKey",void 0),Object(m["a"])(this,"uploadsById",void 0),Object(m["a"])(this,"uploadIdsByKey",void 0)}get upload(){var e;return null!==(e=this.uploadsById[this.uploadIdsByKey[this.uploadKey]])&&void 0!==e?e:null}get hasProgress(){return null!==this.upload&&this.upload.status!==Gr.SUCCESS&&this.upload.status!==Gr.FAILURE}get isFailure(){return null!==this.upload&&this.upload.status===Gr.FAILURE}get progress(){return 100*Object(O["get"])(this.upload,"progress",0)}created(){const e=this.$store,t="multimediaUpload";e.hasModule(t)||e.registerModule(t,qr)}};Object(k["__decorate"])([Object(E["b"])({type:String,required:!0})],Zr.prototype,"uploadKey",void 0),Object(k["__decorate"])([Kr.State],Zr.prototype,"uploadsById",void 0),Object(k["__decorate"])([Kr.State],Zr.prototype,"uploadIdsByKey",void 0),Zr=Object(k["__decorate"])([Object(E["a"])({components:{BProgress:Hr["a"]}})],Zr);var Xr=Zr,Jr=Xr,Yr=(o("e131"),Object(M["a"])(Jr,$r,Ur,!1,null,null,null)),Qr=(Yr.exports,o("2b44")),en=o("59c3"),tn=o("5c47"),on=o("03d5"),an=o("64bb"),sn=o("2d61"),rn=o("c600"),nn=o("cf2c"),cn=o("02b5"),ln=o("cab8"),dn=o("41bd"),un=o("5dcb"),bn=o("84d1"),pn=o("3ef7"),hn=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"exit-block-editor-toggle"},[e.isEditable&&e.hasClipboard?[t("div",{staticClass:"form-group"},[t("button",{staticClass:"btn btn-secondary btn-sm",class:{active:e.isExitBlock},attrs:{type:"button"},on:{click:e.toggleExitBlock}},[e.isExitBlock?[e._v(" "+e._s(e._f("trans")("flow-builder.unset-as-exit-block"))+" ")]:[e._v(" "+e._s(e._f("trans")("flow-builder.set-as-exit-block"))+" ")]],2)])]:e._e()],2)},fn=[];const vn=Object(se["e"])("flow");let _n=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"flow",void 0),Object(m["a"])(this,"blockId",void 0),Object(m["a"])(this,"isEditable",void 0),Object(m["a"])(this,"hasClipboard",void 0),Object(m["a"])(this,"flow_setExitBlockId",void 0)}get isExitBlock(){return this.blockId===this.flow.exit_block_id}toggleExitBlock(){this.flow_setExitBlockId({flowId:this.flow.uuid,blockId:this.isExitBlock?"":this.blockId})}};Object(k["__decorate"])([Object(E["b"])({type:Object,required:!0})],_n.prototype,"flow",void 0),Object(k["__decorate"])([Object(E["b"])({type:String,default:""})],_n.prototype,"blockId",void 0),Object(k["__decorate"])([Object(E["b"])({type:Boolean,default:!0})],_n.prototype,"isEditable",void 0),Object(k["__decorate"])([Object(E["b"])({type:Boolean,default:!1})],_n.prototype,"hasClipboard",void 0),Object(k["__decorate"])([vn.Mutation],_n.prototype,"flow_setExitBlockId",void 0),_n=Object(k["__decorate"])([Object(E["a"])({})],_n);var gn=_n,mn=gn,kn=Object(M["a"])(mn,hn,fn,!1,null,null,null),jn=(kn.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"first-block-editor-button"},[e.isEditable?[t("div",{staticClass:"form-group"},[t("button",{staticClass:"btn btn-sm w-100",class:{"btn-outline-primary":!e.isStartBlock,"btn-primary":e.isStartBlock},attrs:{type:"button",disabled:e.isStartBlock},on:{click:function(t){return e.setStartBlock(t)}}},[t("font-awesome-icon",{staticClass:"fa-btn",attrs:{icon:["fac","enter"]}}),e.isStartBlock?[e._v(" "+e._s(e._f("trans")("flow-builder.currently-set-as-starting-block"))+" ")]:[e._v(" "+e._s(e._f("trans")("flow-builder.set-as-starting-block"))+" ")]],2)])]:e._e()],2)}),On=[];const yn=Object(se["e"])("flow");let wn=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"isEditable",void 0),Object(m["a"])(this,"blockId",void 0),Object(m["a"])(this,"activeFlow",void 0),Object(m["a"])(this,"flow_setFirstBlockId",void 0)}setStartBlock(e){this.flow_setFirstBlockId({flowId:this.activeFlow.uuid,blockId:this.blockId})}get isStartBlock(){return this.blockId===this.activeFlow.first_block_id}};Object(k["__decorate"])([Object(E["b"])({default:!0})],wn.prototype,"isEditable",void 0),Object(k["__decorate"])([Object(E["b"])()],wn.prototype,"blockId",void 0),Object(k["__decorate"])([yn.Getter],wn.prototype,"activeFlow",void 0),Object(k["__decorate"])([yn.Mutation],wn.prototype,"flow_setFirstBlockId",void 0),wn=Object(k["__decorate"])([Object(E["a"])({})],wn);var Cn=wn,xn=Cn,En=Object(M["a"])(xn,jn,On,!1,null,null,null),Bn=(En.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"flow-editor"},[e.flowHeader?t("h3",{staticClass:"no-room-above"},[e._v(" "+e._s(e._f("trans")(e.flowHeader))+" ")]):e._e(),t("fieldset",{attrs:{disabled:!e.isEditable&&e.isOnSmallContainer}},[t("div",{staticClass:"row"},[t("validation-message",{class:e.firstRowClass,attrs:{"message-key":`flow/${e.flow.uuid}/name`,"should-hide-validation":!e.didUserSubmit},scopedSlots:e._u([{key:"input-control",fn:function({isValid:o}){return[t("flow-label-editor",{attrs:{flow:e.flow,"valid-state":o}})]}}])}),e.hasDefaultInteractionTimeout?e._e():t("validation-message",{class:e.firstRowClass,attrs:{"message-key":`flow/${e.flow.uuid}/interaction_timeout`,"should-hide-validation":!e.didUserSubmit},scopedSlots:e._u([{key:"input-control",fn:function({isValid:o}){return[t("interaction-timeout-editor",{attrs:{flow:e.flow,"valid-state":o}})]}}],null,!1,2325893480)})],1),t("div",{staticClass:"row"},[t("validation-message",{class:e.otherRowsClass,attrs:{"message-key":`flow/${e.flow.uuid}/languages`,"should-hide-validation":!e.didUserSubmit},scopedSlots:e._u([{key:"input-control",fn:function({isValid:o}){return[t("languages-editor",{attrs:{flow:e.flow}})]}}])}),t("validation-message",{class:e.otherRowsClass,attrs:{"message-key":`flow/${e.flow.uuid}/supported_modes`,"should-hide-validation":!e.didUserSubmit},scopedSlots:e._u([{key:"input-control",fn:function({isValid:o}){return[t("modes-editor",{attrs:{flow:e.flow}})]}}])})],1),e._t("vendor-extras")],2)])}),In=[];Object(se["e"])("flow");const Sn=Object(se["e"])("builder");Object(se["e"])("validation");let Pn=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"flow",void 0),Object(m["a"])(this,"flowHeader",void 0),Object(m["a"])(this,"isOnSmallContainer",void 0),Object(m["a"])(this,"didUserSubmit",void 0),Object(m["a"])(this,"ui",void 0),Object(m["a"])(this,"isEditable",void 0)}get hasDefaultInteractionTimeout(){return Boolean(this.ui.appWideInteractionTimeout)}get firstRowClass(){return this.isOnSmallContainer||this.hasDefaultInteractionTimeout?"col-12":"col-xl-6 col-lg-6 col-md-12 col-sm-12"}get otherRowsClass(){return this.isOnSmallContainer?"col-12":"col-xl-6 col-lg-6 col-md-12 col-sm-12"}};Object(k["__decorate"])([Object(E["b"])()],Pn.prototype,"flow",void 0),Object(k["__decorate"])([Object(E["b"])({default:""})],Pn.prototype,"flowHeader",void 0),Object(k["__decorate"])([Object(E["b"])({default:!0})],Pn.prototype,"isOnSmallContainer",void 0),Object(k["__decorate"])([Object(E["b"])({default:!1})],Pn.prototype,"didUserSubmit",void 0),Object(k["__decorate"])([Object(se["d"])(({trees:{ui:e}})=>e)],Pn.prototype,"ui",void 0),Object(k["__decorate"])([Sn.Getter],Pn.prototype,"isEditable",void 0),Pn=Object(k["__decorate"])([Object(E["a"])({})],Pn);var Mn=Pn,Fn=Mn,Tn=Object(M["a"])(Fn,Bn,In,!1,null,null,null),An=(Tn.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"interaction-timeout-editor form-group"},[t("numeric-editor",{attrs:{"regex-numeric-filtering":"[0-9]",label:e._f("trans")("flow-builder.Interaction-timeout"),placeholder:e._f("trans")("flow-builder.enter-value"),"valid-state":e.validState},model:{value:e.interactionTimeout,callback:function(t){e.interactionTimeout=e._n(t)},expression:"interactionTimeout"}})],1)}),Vn=[];const Rn=Object(se["e"])("flow");let Ln=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"flow",void 0),Object(m["a"])(this,"validState",void 0),Object(m["a"])(this,"flow_setInteractionTimeout",void 0)}get interactionTimeout(){return this.flow.interaction_timeout}set interactionTimeout(e){this.flow_setInteractionTimeout({flowId:this.flow.uuid,value:e})}};Object(k["__decorate"])([Object(E["b"])()],Ln.prototype,"flow",void 0),Object(k["__decorate"])([Object(E["b"])()],Ln.prototype,"validState",void 0),Object(k["__decorate"])([Rn.Mutation],Ln.prototype,"flow_setInteractionTimeout",void 0),Ln=Object(k["__decorate"])([Object(E["a"])({})],Ln);var Dn=Ln,Nn=Dn,$n=Object(M["a"])(Nn,An,Vn,!1,null,null,null),Un=($n.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"flow-label-editor form-group"},[t("text-editor",{class:{"is-invalid":e.isInvalid},attrs:{"valid-state":e.validState,label:e._f("trans")("flow-builder.flow-label"),placeholder:e._f("trans")("flow-builder.enter-flow-label")},model:{value:e.label,callback:function(t){e.label=t},expression:"label"}})],1)}),Hn=[];const Wn=Object(se["e"])("flow");let zn=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"flow",void 0),Object(m["a"])(this,"validState",void 0),Object(m["a"])(this,"flow_setLabel",void 0),Object(m["a"])(this,"flow_setNameFromLabel",void 0)}get isInvalid(){return!1===this.validState}get label(){var e;return null!==(e=this.flow.label)&&void 0!==e?e:""}set label(e){this.flow_setLabel({flowId:this.flow.uuid,label:e}),this.flow_setNameFromLabel({flowId:this.flow.uuid,label:e})}};Object(k["__decorate"])([Object(E["b"])()],zn.prototype,"flow",void 0),Object(k["__decorate"])([Object(E["b"])()],zn.prototype,"validState",void 0),Object(k["__decorate"])([Wn.Mutation],zn.prototype,"flow_setLabel",void 0),Object(k["__decorate"])([Wn.Mutation],zn.prototype,"flow_setNameFromLabel",void 0),zn=Object(k["__decorate"])([E["a"]],zn);var Gn=zn,qn=Gn,Kn=Object(M["a"])(qn,Un,Hn,!1,null,null,null),Zn=(Kn.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"languages-editor form-group"},[t("label",{staticClass:"text-primary"},[e._v(e._s(e._f("trans")("flow-builder.languages")))]),t("vue-multiselect",{attrs:{"track-by":"id",label:"label",placeholder:e._f("trans")("flow-builder.select-languages"),options:e.allLanguages,multiple:!0,"show-labels":!1,searchable:!0},model:{value:e.selectedLanguages,callback:function(t){e.selectedLanguages=t},expression:"selectedLanguages"}})],1)}),Xn=[],Jn=o("5157");const Yn=Object(se["e"])("flow");let Qn=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"flow",void 0),Object(m["a"])(this,"availableLanguages",void 0),Object(m["a"])(this,"flow_updateLanguages",void 0)}get allLanguages(){var e;return Object(Jn["d"])(null!==(e=this.availableLanguages)&&void 0!==e?e:[])}get selectedLanguages(){var e;return Object(Jn["d"])(null!==(e=this.flow.languages)&&void 0!==e?e:[])}set selectedLanguages(e){this.flow_updateLanguages({flowId:this.flow.uuid,newLanguages:e})}};Object(k["__decorate"])([Object(E["b"])()],Qn.prototype,"flow",void 0),Object(k["__decorate"])([Object(se["d"])(e=>e.trees.ui.languages)],Qn.prototype,"availableLanguages",void 0),Object(k["__decorate"])([Yn.Action],Qn.prototype,"flow_updateLanguages",void 0),Qn=Object(k["__decorate"])([Object(E["a"])({components:{VueMultiselect:Ve.a}})],Qn);var ec=Qn,tc=ec,oc=Object(M["a"])(tc,Zn,Xn,!1,null,null,null),ic=(oc.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"modes-editor form-group"},[t("label",{staticClass:"text-primary"},[e._v(e._s(e._f("trans")("flow-builder.modes")))]),t("vue-multiselect",{attrs:{placeholder:e._f("trans")("flow-builder.select-modes"),options:e.allModes,multiple:!0,"show-labels":!1,searchable:!0},model:{value:e.selectedModes,callback:function(t){e.selectedModes=t},expression:"selectedModes"}})],1)}),ac=[];const sc=Object(se["e"])("flow");let rc=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"flow",void 0),Object(m["a"])(this,"availableModes",void 0),Object(m["a"])(this,"flow_updateModes",void 0)}get allModes(){var e;return Object(Jn["e"])(null!==(e=this.availableModes)&&void 0!==e?e:[])}get selectedModes(){var e;return Object(Jn["e"])(null!==(e=this.flow.supported_modes)&&void 0!==e?e:[])}set selectedModes(e){this.flow_updateModes({flowId:this.flow.uuid,newModes:e})}};Object(k["__decorate"])([Object(E["b"])()],rc.prototype,"flow",void 0),Object(k["__decorate"])([Object(se["d"])(e=>e.trees.ui.supportedModes)],rc.prototype,"availableModes",void 0),Object(k["__decorate"])([sc.Action],rc.prototype,"flow_updateModes",void 0),rc=Object(k["__decorate"])([Object(E["a"])({components:{VueMultiselect:Ve.a}})],rc);var nc=rc,cc=nc,lc=Object(M["a"])(cc,ic,ac,!1,null,null,null),dc=(lc.exports,o("88df")),uc=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"language-adder"},[e._t("default",(function(){return[t("button",{staticClass:"btn btn-primary",on:{click:e.showAddLanguageModal}},[e._v(" "+e._s(e._f("trans")("flow-builder.add-language"))+" ")])]}),{showAddLanguageModal:e.showAddLanguageModal}),t("b-modal",{ref:"add-language-modal",attrs:{title:e._f("trans")("flow-builder.add-language"),"ok-title":e._f("trans")("flow-builder.create"),"cancel-title":e._f("trans")("flow-builder.cancel")},on:{ok:function(t){return t.preventDefault(),e.handleCreateLanguage.apply(null,arguments)}}},[t("div",{staticClass:"form-group"},[t("validation-message",{attrs:{"message-key":"language/new_language/label"},scopedSlots:e._u([{key:"input-control",fn:function({isValid:o}){return[t("text-editor",{attrs:{placeholder:e._f("trans")("flow-builder.enter-label"),label:e._f("trans")("flow-builder.label"),"valid-state":o},model:{value:e.newLanguage.label,callback:function(t){e.$set(e.newLanguage,"label",t)},expression:"newLanguage.label"}})]}}])})],1),t("div",{staticClass:"form-group"},[t("validation-message",{attrs:{"message-key":"language/new_language/iso_639_3"},scopedSlots:e._u([{key:"input-control",fn:function({isValid:o}){return[t("label",{staticClass:"text-primary"},[e._v(e._s(e._f("trans")("flow-builder.iso-639-3-label")))]),t("vue-multiselect",{class:{invalid:!1===o},attrs:{placeholder:e._f("trans")("flow-builder.language-tag-selector-placeholder"),options:e.iso_639_3Tags,"allow-empty":!1,"custom-label":e.customLanguageLabel,"track-by":"iso6393",searchable:!0},model:{value:e.iso_639_3,callback:function(t){e.iso_639_3=t},expression:"iso_639_3"}})]}}])})],1),t("div",{staticClass:"form-group"},[t("validation-message",{attrs:{"message-key":"language/new_language/variant"},scopedSlots:e._u([{key:"input-control",fn:function({isValid:o}){return[t("text-editor",{attrs:{placeholder:e._f("trans")("flow-builder.enter-variant"),label:e._f("trans")("flow-builder.language-variant"),"valid-state":o},on:{keydown:e.filterVariant},model:{value:e.variant,callback:function(t){e.variant=t},expression:"variant"}})]}}])})],1),t("div",{staticClass:"form-group"},[t("label",{staticClass:"text-primary"},[e._v(e._s(e._f("trans")("flow-builder.iso-3166-1-label")))]),t("vue-multiselect",{attrs:{placeholder:e._f("trans")("flow-builder.language-locale-selector-placeholder"),options:e.iso_3166_1Locales(),"allow-empty":!1,"track-by":"locale","custom-label":e.customLocaleLabel,searchable:!0},model:{value:e.iso_3166_1,callback:function(t){e.iso_3166_1=t},expression:"iso_3166_1"}})],1),t("div",{staticClass:"form-group"},[t("label",{staticClass:"text-primary"},[e._v(e._s(e._f("trans")("flow-builder.bcp-47-label")))]),t("validation-message",{attrs:{"message-key":"language/new_language/bcp_47"},scopedSlots:e._u([{key:"input-control",fn:function({isValid:o}){return[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newLanguage.bcp_47,expression:"newLanguage.bcp_47"}],staticClass:"form-control",attrs:{name:"bcp_47",type:"text",disabled:""},domProps:{value:e.newLanguage.bcp_47},on:{input:function(t){t.target.composing||e.$set(e.newLanguage,"bcp_47",t.target.value)}}})]}}])})],1)])],2)},bc=[],pc=o("d39e"),hc=o("943c");const fc=o("2e18");fc.registerLocale(o("d13c")),fc.registerLocale(o("20fc"));Object(se["e"])("flow/import");const vc=Object(se["e"])("validation");let _c=class extends(Object(x["c"])(B["a"],pc["a"])){constructor(...e){super(...e),Object(m["a"])(this,"newLanguage",{id:"",label:"",iso_639_3:"",variant:"",bcp_47:""}),Object(m["a"])(this,"selected_iso_639_3",{}),Object(m["a"])(this,"selected_iso_3166_1",{}),Object(m["a"])(this,"iso_639_3Tags",hc["a"]),Object(m["a"])(this,"validateAndAddOrgLanguage",void 0),Object(m["a"])(this,"locale",void 0),Object(m["a"])(this,"validation_removeNewLanguageValidation",void 0)}resetLanguage(){this.newLanguage={id:"",label:"",iso_639_3:"",variant:"",bcp_47:""},this.selected_iso_639_3={},this.selected_iso_3166_1={},this.validation_removeNewLanguageValidation()}showAddLanguageModal(){this.resetLanguage();const e=this.$refs["add-language-modal"];e.show()}customLanguageLabel(e){return Object(O["isEmpty"])(e)?"":`${e.name} - ${e.iso6393}`}customLocaleLabel(e){return Object(O["isEmpty"])(e)?"":`${e.country} - ${e.locale}`}iso_3166_1Locales(){const e=fc.getNames(this.locale,{select:"official"});return Object(O["map"])(Object(O["keys"])(e),t=>({locale:t,country:e[t]}))}set iso_639_3(e){this.selected_iso_639_3=e,Object(O["isEmpty"])(e)||(this.newLanguage.iso_639_3=e.iso6393,this.updateBCP47())}get iso_639_3(){return this.selected_iso_639_3}set iso_3166_1(e){this.selected_iso_3166_1=e,Object(O["isEmpty"])(e)||this.updateBCP47()}get iso_3166_1(){return this.selected_iso_3166_1}set variant(e){this.newLanguage.variant=e,Object(O["isEmpty"])(e)||this.updateBCP47()}get variant(){return void 0!==this.newLanguage.variant?this.newLanguage.variant:""}filterVariant(e){if(e.key.match(/[^a-z_]/g)&&8!==e.keyCode&&46!==e.keyCode&&e.preventDefault(),void 0!==this.newLanguage.variant&&!Object(O["isEmpty"])(this.newLanguage.variant)){const t=this.newLanguage.variant[this.newLanguage.variant.length-1];"_"===t&&e.key.match(/_/g)&&e.preventDefault()}}updateBCP47(){if(!Object(O["isEmpty"])(this.selected_iso_639_3)){let e=""+this.newLanguage.iso_639_3;Object(O["isEmpty"])(this.selected_iso_3166_1)||(e+="-"+this.selected_iso_3166_1.locale),void 0===this.newLanguage.variant||Object(O["isEmpty"])(this.newLanguage.variant)||(e+="-"+this.newLanguage.variant),this.newLanguage.bcp_47=e}}async handleCreateLanguage(){this.newLanguage.id=await(new so["IdGeneratorUuidV4"]).generate();const e=this.route("languages.persistLanguage",{}),t=await this.validateAndAddOrgLanguage({language:this.newLanguage,persistRoute:e});if(!t)return;this.$emit("onLanguageAddition");const o=this.$refs["add-language-modal"];o.hide()}};Object(k["__decorate"])([se["a"]],_c.prototype,"validateAndAddOrgLanguage",void 0),Object(k["__decorate"])([se["d"]],_c.prototype,"locale",void 0),Object(k["__decorate"])([vc.Action],_c.prototype,"validation_removeNewLanguageValidation",void 0),_c=Object(k["__decorate"])([Object(E["a"])({components:{BModal:co["a"],VueMultiselect:Ve.a}})],_c);var gc=_c,mc=gc,kc=Object(M["a"])(mc,uc,bc,!1,null,null,null),jc=(kc.exports,o("4f90"),o("9084"),o("ff9d"),function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"block-errors-expandable card w-100"},[t("div",{staticClass:"card-title m-0 px-2 pt-1 menu-bg-color"},[e._v(" "+e._s(e.trans("flow-builder."+e.block.type))+" "),t("div",{staticClass:"text-secondary"},[t("small",[e._v(e._s(e.blockLabel))])])]),e._l(e.errorsToShow,(function(o){return t("div",{key:o.dataPath,staticClass:"card-body d-flex justify-content-between px-2 py-0 highlight-on-hover menu-bg-color"},[t("span",{staticClass:"text-danger align-self-center"},[e._v(e._s(o.message))]),t("button",{staticClass:"btn btn-link btn-link-text",attrs:{type:"button"},on:{click:function(t){return e.$emit("fixBlockError",e.block.uuid,o.dataPath)}}},[e._v(" "+e._s(e._f("trans")("flow-builder.fix-issue"))+" ")])])})),e.isListLong?t("div",{staticClass:"btn btn-link text-left px-2 m-0 border-0 text-center menu-bg-color",attrs:{type:"button"},on:{click:function(t){return t.stopPropagation(),e.toggleList.apply(null,arguments)}}},[e.isExpanded?t("font-awesome-icon",{attrs:{icon:["fas","chevron-up"],"aria-label":e._f("trans")("flow-builder.show-less")}}):t("font-awesome-icon",{attrs:{icon:["fas","chevron-down"],"aria-label":e._f("trans")("flow-builder.show-more")}})],1):e._e()],2)}),Oc=[];const yc=Object(se["e"])("flow"),wc=Object(se["e"])("validation"),Cc=3;let xc=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"block",void 0),Object(m["a"])(this,"isExpanded",!1),Object(m["a"])(this,"validationStatuses",void 0),Object(m["a"])(this,"activeFlow",void 0)}get errorsToShow(){var e,t,o;return this.isExpanded?null!==(e=this.allErrors)&&void 0!==e?e:[]:null!==(t=null===(o=this.allErrors)||void 0===o?void 0:o.slice(0,Cc))&&void 0!==t?t:[]}get allErrors(){return[...this.blockValidationStatusesForCurrentBlock,...this.resourceValidationStatusesForCurrentBlock,...this.backendBlockValidationStatusesForCurrentBlock,...this.backendResourceValidationStatusesForCurrentBlock].filter(Boolean)}get isListLong(){return this.allErrors.length>Cc}get blockLabel(){var e;return null!==(e=this.block.label)&&void 0!==e?e:this.trans("flow-builder.untitled-block")}get currentBlockResourceUuids(){var e,t;const o=void 0!==(null===(e=this.block.config)||void 0===e?void 0:e.choices)?Object(O["map"])(this.block.config.choices,"prompt"):[];return[null===(t=this.block.config)||void 0===t?void 0:t.prompt,...o]}get resourceValidationStatusesForCurrentBlock(){return this.currentBlockResourceUuids.map(e=>this.getAjvErrorsFor("resource",e)).flat()}get backendResourceValidationStatusesForCurrentBlock(){return this.currentBlockResourceUuids.map(e=>this.getAjvErrorsFor("backend/resource",e)).flat()}get backendBlockValidationStatusesForCurrentBlock(){return this.getAjvErrorsFor("backend/block",this.block.uuid)}get blockValidationStatusesForCurrentBlock(){return this.getAjvErrorsFor("block",this.block.uuid)}getAjvErrorsFor(e,t){const o=Object(O["get"])(this.validationStatuses,`${e}/${t}`);return void 0!==o&&o.ajvErrors?o.ajvErrors.map(o=>({...o,dataPath:`${e}/${t}${o.dataPath}`})):[]}toggleList(){this.isExpanded=!this.isExpanded}};Object(k["__decorate"])([Object(E["b"])({required:!0})],xc.prototype,"block",void 0),Object(k["__decorate"])([wc.State],xc.prototype,"validationStatuses",void 0),Object(k["__decorate"])([yc.Getter],xc.prototype,"activeFlow",void 0),xc=Object(k["__decorate"])([Object(x["b"])({})],xc);var Ec=xc,Bc=Ec,Ic=(o("ac85"),Object(M["a"])(Bc,jc,Oc,!1,null,"4ebcba7e",null)),Sc=(Ic.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("main",{staticClass:"error-notifications"},[e.flowValidationErrors.length>0?t("section",{staticClass:"alert alert-danger d-flex mb-0 py-sm-1 px-2",attrs:{role:"alert"}},[t("span",{staticClass:"align-self-center ml-2"},[e._v(" "+e._s(e._f("trans")("flow-builder.flow-error-message"))+" ")]),t("div",{staticClass:"dropdown"},[t("button",{staticClass:"btn btn-link btn-link-text dropdown-toggle",attrs:{id:"flowErrorsDropdown",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"}},[e._v(" "+e._s(e._f("trans")("flow-builder.show-issues"))+" "),t("span",{staticClass:"caret"})]),t("ul",{staticClass:"notification dropdown-menu",attrs:{"aria-labelledby":"flowErrorsDropdown"}},e._l(e.flowValidationErrors,(function(o){return t("li",{key:o.dataPath},[t("div",{staticClass:"d-flex justify-content-between px-2 py-0 highlight-on-hover"},[t("span",{staticClass:"text-danger align-self-center"},[e._v(e._s(o.message))]),"/first_block_id"!==o.dataPath?t("button",{staticClass:"btn btn-link btn-link-text",attrs:{type:"button"},on:{click:function(t){return e.fixFlowError()}}},[e._v(" "+e._s(e._f("trans")("flow-builder.fix-issue"))+" ")]):e._e()])])})),0)])]):e._e(),e.numberOfBlocksWithErrors>0?t("section",{staticClass:"alert alert-danger d-flex py-sm-1 px-2 mb-1",attrs:{role:"alert"}},[t("span",{staticClass:"align-self-center ml-2"},[e._v(" "+e._s(e._f("trans")("flow-builder.block-error-message",{block_count:e.numberOfBlocksWithErrors}))+" ")]),t("div",{staticClass:"dropdown"},[t("button",{staticClass:"btn btn-link btn-link-text dropdown-toggle",attrs:{id:"blockErrorsDropdown",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"}},[e._v(" "+e._s(e._f("trans")("flow-builder.locate-block-issue"))+" "),t("span",{staticClass:"caret"})]),t("ul",{staticClass:"notification dropdown-menu",attrs:{"aria-labelledby":"blockErrorsDropdown"}},e._l(e.invalidBlocksInActiveFlow,(function(o,i){return t("li",{key:i},[t("block-errors-expandable",{attrs:{block:o},on:{fixBlockError:e.fixBlockError}})],1)})),0)])]):e._e()])}),Pc=[];const Mc=Object(se["e"])("flow"),Fc=Object(se["e"])("validation");let Tc=class extends(Object(x["c"])(pc["a"],B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"validationStatuses",void 0),Object(m["a"])(this,"activeFlow",void 0),Object(m["a"])(this,"resourceUuidsOnActiveFlow",void 0)}updated(){this.$emit("updated")}get flowValidationErrors(){var e,t,o,i;const a="flow/"+(null===(e=this.activeFlow)||void 0===e?void 0:e.uuid),s="backend/flow/"+(null===(t=this.activeFlow)||void 0===t?void 0:t.uuid);return Object(O["union"])((null===(o=this.validationStatuses[a])||void 0===o?void 0:o.ajvErrors)||[],(null===(i=this.validationStatuses[s])||void 0===i?void 0:i.ajvErrors)||[])}get blockValidationStatuses(){var e;const t=null===(e=this.activeFlow)||void 0===e?void 0:e.blocks.reduce((e,t)=>(e["block/"+t.uuid]=!0,e["backend/block/"+t.uuid]=!0,e),{});return t&&0!==Object(O["size"])(t)?Object(O["pickBy"])(this.validationStatuses,(e,o)=>o.includes("block/")&&t[o]):{}}hasBlockValidationErrors(e){const t=Object(O["get"])(this.blockValidationStatuses,"block/"+e),o=Object(O["get"])(this.blockValidationStatuses,"backend/block/"+e);return(void 0!==t||void 0!==o)&&(!0!==(null===t||void 0===t?void 0:t.isValid)&&void 0!==(null===t||void 0===t?void 0:t.isValid)||!0!==(null===o||void 0===o?void 0:o.isValid)&&void 0!==(null===o||void 0===o?void 0:o.isValid))}hasResourceValidationErrors(e){const t=Object(O["castArray"])(e);return t.some(e=>{var t,o;const i=null===(t=this.validationStatuses["resource/"+e])||void 0===t?void 0:t.isValid,a=null===(o=this.activeFlow)||void 0===o?void 0:o.resources.some(t=>t.uuid===e);return!1===i&&a},this)}isBlockInvalid(e){return this.hasBlockValidationErrors(e.uuid)||this.hasResourceValidationErrors(e.config.prompt)||this.hasResourceValidationErrors(e.config.choices)}get invalidBlocksInActiveFlow(){var e;return Object(O["filter"])(null===(e=this.activeFlow)||void 0===e?void 0:e.blocks,this.isBlockInvalid.bind(this))}get numberOfBlocksWithErrors(){return Object(O["size"])(this.invalidBlocksInActiveFlow)}async fixFlowError(){try{await this.$router.push({name:"flow-details"})}catch(e){"NavigationDuplicated"!==e.name&&console.error(e)}}async fixBlockError(e,t){try{await this.$router.push({name:"block-scroll-to-anchor",params:{blockId:e,field:t}})}catch(o){"NavigationDuplicated"!==o.name&&console.error(o)}}};Object(k["__decorate"])([Fc.State],Tc.prototype,"validationStatuses",void 0),Object(k["__decorate"])([Mc.Getter],Tc.prototype,"activeFlow",void 0),Object(k["__decorate"])([Mc.Getter],Tc.prototype,"resourceUuidsOnActiveFlow",void 0),Tc=Object(k["__decorate"])([Object(x["b"])({})],Tc);var Ac=Tc,Vc=Ac,Rc=(o("8127"),Object(M["a"])(Vc,Sc,Pc,!1,null,"1bf8eedc",null)),Lc=(Rc.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return e.countSelectedBlocks?t("div",{staticClass:"selection-banner"},[t("div",{staticClass:"alert alert-primary mb-0 d-flex py-sm-2 px-3",attrs:{role:"alert"}},[t("div",{staticClass:"mr-3"},[e._v(" "+e._s(e._f("trans")("flow-builder.selected-x-blocks",{x:e.countSelectedBlocks}))+". ")]),e.deleting?e._e():t("div",[t("button",{staticClass:"btn btn-danger btn-sm mr-2",on:{click:function(t){e.deleting=!0}}},[t("font-awesome-icon",{attrs:{icon:["far","trash-alt"]}}),e._v(" "+e._s(e._f("trans")("flow-builder.delete"))+" ")],1),t("button",{staticClass:"btn btn-outline-dark btn-sm mr-2",on:{click:function(t){return t.preventDefault(),e.handleMultipleDuplicate.apply(null,arguments)}}},[t("font-awesome-icon",{attrs:{icon:["fac","copy"]}}),e._v(" "+e._s(e._f("trans")("flow-builder.duplicate"))+" ")],1),t("button",{staticClass:"btn btn-outline-dark btn-sm ml-4",on:{click:e.flow_clearMultiSelection}},[e._v(" "+e._s(e._f("trans")("flow-builder.clear-selection"))+" ")])]),e.deleting?t("div",[t("b",{staticClass:"mr-3"},[e._v(e._s(e._f("trans")("flow-builder.confirmation-for-delete-selection")))]),t("button",{staticClass:"btn btn-outline-dark btn-sm mr-2",on:{click:function(t){e.deleting=!1}}},[e._v(" "+e._s(e._f("trans")("flow-builder.no-cancel"))+" ")]),t("button",{staticClass:"btn btn-danger btn-sm mr-2",on:{click:e.confirmMultipleDeletion}},[e._v(" "+e._s(e._f("trans")("flow-builder.yes-delete"))+" ")])]):e._e()])]):e._e()}),Dc=[];const Nc=Object(se["e"])("flow");let $c=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"deleting",!1),Object(m["a"])(this,"selectedBlocks",void 0),Object(m["a"])(this,"flow_clearMultiSelection",void 0),Object(m["a"])(this,"flow_removeAllSelectedBlocks",void 0),Object(m["a"])(this,"flow_duplicateAllSelectedBlocks",void 0)}updated(){this.$emit("updated")}get countSelectedBlocks(){return Object(O["size"])(this.selectedBlocks)}async confirmMultipleDeletion(){await this.flow_removeAllSelectedBlocks(),this.deleting=!1}async handleMultipleDuplicate(){await this.flow_duplicateAllSelectedBlocks(),await this.flow_clearMultiSelection()}};Object(k["__decorate"])([Nc.State],$c.prototype,"selectedBlocks",void 0),Object(k["__decorate"])([Nc.Action],$c.prototype,"flow_clearMultiSelection",void 0),Object(k["__decorate"])([Nc.Action],$c.prototype,"flow_removeAllSelectedBlocks",void 0),Object(k["__decorate"])([Nc.Action],$c.prototype,"flow_duplicateAllSelectedBlocks",void 0),$c=Object(k["__decorate"])([Object(x["b"])({})],$c);var Uc=$c,Hc=Uc,Wc=Object(M["a"])(Hc,Lc,Dc,!1,null,null,null),zc=(Wc.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{ref:"builder-toolbar",staticClass:"tree-builder-toolbar d-flex flex-column"},[t("div",{staticClass:"tree-builder-toolbar-main-menu d-flex flex-column"},[e.isExportVisible?t("div",{staticClass:"flows-exporter alert alert-info"},[t("h3",[e._v(e._s(e.trans("flow-builder.flow-exporter")))]),t("textarea",{staticClass:"flow-exporter",attrs:{rows:"15",disabled:""},domProps:{value:e.flow}})]):e._e(),t("div",{staticClass:"tree-workspace-panel-heading panel-heading w-100"},[t("div",{staticClass:"tree-workspace-panel-heading-contents"},[t("div",{staticClass:"btn-toolbar"},[e.hasToolbarFlowTitle?t("h4",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.activeFlow.label,expression:"activeFlow.label",modifiers:{hover:!0}}],staticClass:"text-primary mr-4 mb-0 flow-label"},[e._v(" "+e._s(e.activeFlow.label)+" ")]):e._e(),t("div",[e.hasToolbarHomeButton?t("router-link",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.trans("flow-builder.home"),expression:"trans('flow-builder.home')",modifiers:{hover:!0}}],staticClass:"mr-2",attrs:{to:e.route("flows.home")}},[t("font-awesome-icon",{staticClass:"fa-btn",attrs:{icon:["fac","home"]}})],1):e._e(),e.hasToolbarNewFlowButton?t("router-link",{staticClass:"btn btn-primary btn-sm mr-2",attrs:{to:e.route("flows.newFlow")}},[e._v(" "+e._s(e.trans("flow-builder.new-flow"))+" ")]):e._e(),t("button",{staticClass:"btn btn-sm",class:{"btn-outline-primary":e.hasToolbarNewFlowButton,"btn-primary":!e.hasToolbarNewFlowButton},on:{click:e.showOrHideEditFlowModal}},[e._v(" "+e._s(e._f("trans")("flow-builder.flow-details"))+" ")]),t("b-modal",{ref:"edit-flow-modal",attrs:{"ok-only":"","ok-title":e._f("trans")("flow-builder.done")},on:{ok:e.showOrHideEditFlowModal}},[t("template",{slot:"modal-header"},[t("h2",{staticClass:"mb-0"},[e._v(" "+e._s(e._f("trans")("flow-builder.flow-details"))+" ")]),t("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:e.showOrHideEditFlowModal}},[e._v("  ")])]),t("flow-editor",{attrs:{flow:e.activeFlow,"did-user-submit":!0,"flow-header":""}})],2),t("div",{staticClass:"vertical-divider"}),e.isResourceViewerEnabled?t("div",{staticClass:"btn-group mr-3"},[t("router-link",{staticClass:"btn btn-outline-primary btn-sm",class:{active:e.isBuilderCanvasEnabled,disabled:e.isTreeSaving},attrs:{to:e.treeUrl},nativeOn:{click:function(t){return t.preventDefault(),e.handleFlowViewMenu.apply(null,arguments)}}},[e._v(" "+e._s(e.trans("flow-builder.flow-view"))+" ")]),t("router-link",{staticClass:"btn btn-outline-primary btn-sm",class:{active:e.isResourceViewerCanvasEnabled,disabled:e.isTreeSaving},attrs:{to:e.resourceUrl},nativeOn:{click:function(t){return t.preventDefault(),e.handleResourceViewMenu.apply(null,arguments)}}},[e._v(" "+e._s(e.trans("flow-builder.resource-view"))+" ")])],1):e._e(),e.ui.isEditableLocked||e.isResourceViewerCanvasEnabled?e._e():t("div",{staticClass:"btn-group"},[t("router-link",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.trans("flow-builder.click-to-toggle-editing"),expression:"trans('flow-builder.click-to-toggle-editing')",modifiers:{hover:!0}}],staticClass:"btn btn-outline-primary btn-sm",class:{active:!e.isEditable,disabled:e.isTreeSaving},attrs:{to:e.viewModeUrl,event:"","aria-disabled":e.isTreeSaving,tabindex:e.isTreeSaving?-1:void 0},nativeOn:{click:function(t){return t.preventDefault(),e.handlePersistFlow(e.viewModeUrl)}}},[e._v(" "+e._s(e.trans("flow-builder.view-mode"))+" ")]),t("router-link",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.trans("flow-builder.click-to-toggle-editing"),expression:"trans('flow-builder.click-to-toggle-editing')",modifiers:{hover:!0}}],staticClass:"btn btn-outline-primary btn-sm",class:{active:e.isEditable,disabled:e.isTreeSaving},attrs:{to:e.editModeUrl,event:"","aria-disabled":e.isTreeSaving,tabindex:e.isTreeSaving?-1:void 0},nativeOn:{click:function(t){return t.preventDefault(),e.handlePersistFlow(e.editModeUrl)}}},[e._v(" "+e._s(e.trans("flow-builder.edit-mode"))+" ")])],1),e._t("extra-buttons")],2),t("div",{staticClass:"ml-auto"},[e.isBuilderCanvasEnabled&&e.hasSimulator?t("button",{staticClass:"btn btn-outline-primary btn-sm",attrs:{type:"button"},on:{click:function(t){return e.setSimulatorActive(!0)}}},[e._v(" "+e._s(e.trans("flow-builder.show-clipboard-simulator"))+" ")]):e._e(),t("div",{staticClass:"btn-group"},[e._t("right-grouped-buttons")],2),e.isBuilderCanvasEnabled&&e.hasToolbarExportButton?t("button",{staticClass:"btn btn-outline-primary btn-sm",class:{active:e.isExportVisible},on:{click:e.toggleExportVisibility}},[e._v(" "+e._s(e.trans("flow-builder.export"))+" ")]):e._e(),e.isBuilderCanvasEnabled&&e.isEditable&&e.isFeatureTreeSaveEnabled?t("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.trans("flow-builder.save-changes-to-the-flow"),expression:"trans('flow-builder.save-changes-to-the-flow')",modifiers:{hover:!0}}],staticClass:"btn btn-outline-primary btn-sm ml-4 save-button",attrs:{type:"button",disabled:e.isSavingDisabled},on:{click:function(t){return e.handlePersistFlow()}}},[e._v(" "+e._s(e.saveButtonText)+" "),e.isTreeSaving?t("font-awesome-icon",{staticClass:"fa-btn fa-spin",attrs:{icon:["fas","spinner"]}}):e._e()],1):e._e()])])])]),e.isBuilderCanvasEnabled&&e.isEditable?t("div",{staticClass:"tree-workspace-panel-heading panel-heading w-100 bg-white d-flex justify-content-start pt-0 pb-0"},[t("div",{staticClass:"tree-workspace-panel-heading-contents"},[t("ul",{staticClass:"nav"},[e.isEmpty(e.blockClassesForContentCategory)?e._e():t("li",{staticClass:"nav-item dropdown nav"},[t("a",{staticClass:"nav-link dropdown-toggle",attrs:{"data-toggle":"dropdown",href:"#",role:"button","aria-haspopup":"true","aria-expanded":"false"},on:{mouseover:function(t){return e.openDropdownMenu(t.target)}}},[t("span",{staticClass:"nav-link-text"},[e._v(e._s(e._f("trans")("flow-builder.content")))])]),t("div",{staticClass:"dropdown-menu mt-0"},[e._l(e.blockClassesForContentCategory,(function(o,i){return[e.shouldDisplayDividerBefore(e.blockClassesForContentCategory,i)?t("div",{key:i+"divider",staticClass:"dropdown-divider"}):e._e(),e.isBlockAvailableByBlockClass[i]?t("a",{key:i+"item",staticClass:"dropdown-item",attrs:{href:"#","data-block-type":i,"data-default-num-connections":o["defaultConnections"]},on:{click:function(t){return t.preventDefault(),e.handleAddBlockByTypeSelected(o)}}},[e._v(" "+e._s(e.translateTreeClassName(i))+" ")]):e._e()]})),e._t("extra-dropdown-items-for-category1")],2)]),e.isEmpty(e.blockClassesForContactCategory)?e._e():t("li",{staticClass:"nav-item dropdown"},[t("a",{staticClass:"nav-link dropdown-toggle",attrs:{"data-toggle":"dropdown",href:"#",role:"button","aria-haspopup":"true","aria-expanded":"false"},on:{mouseover:function(t){return e.openDropdownMenu(t.target)}}},[t("span",{staticClass:"nav-link-text"},[e._v(e._s(e._f("trans")("flow-builder.contact")))])]),t("div",{staticClass:"dropdown-menu mt-0"},[e._l(e.blockClassesForContactCategory,(function(o,i){return[e.shouldDisplayDividerBefore(e.blockClassesForContactCategory,i)?t("div",{key:i+"divider",staticClass:"dropdown-divider"}):e._e(),e.isBlockAvailableByBlockClass[i]?t("a",{key:i+"item",staticClass:"dropdown-item",attrs:{href:"#","data-block-type":i,"data-default-num-connections":o["defaultConnections"]},on:{click:function(t){return t.preventDefault(),e.handleAddBlockByTypeSelected(o)}}},[e._v(" "+e._s(e.translateTreeClassName(i))+" ")]):e._e()]})),e._t("extra-dropdown-items-for-category2")],2)]),e.isEmpty(e.blockClassesForBranchingCategory)?e._e():[1===Object.keys(e.blockClassesForBranchingCategory).length?t("li",{staticClass:"nav-item"},e._l(e.blockClassesForBranchingCategory,(function(o,i){return t("a",{key:i+"item",staticClass:"nav-link single-menu",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.handleAddBlockByTypeSelected(o)}}},[e._v(" "+e._s(e._f("trans")("flow-builder.branching"))+" ")])})),0):t("li",{staticClass:"nav-item dropdown"},[t("a",{staticClass:"nav-link dropdown-toggle",attrs:{"data-toggle":"dropdown",href:"#",role:"button","aria-haspopup":"true","aria-expanded":"false"},on:{mouseover:function(t){return e.openDropdownMenu(t.target)}}},[t("span",{staticClass:"nav-link-text"},[e._v(e._s(e._f("trans")("flow-builder.branching")))])]),t("div",{staticClass:"dropdown-menu mt-0"},[e._l(e.blockClassesForBranchingCategory,(function(o,i){return[e.shouldDisplayDividerBefore(e.blockClassesForBranchingCategory,i)?t("div",{key:i+"divider",staticClass:"dropdown-divider"}):e._e(),e.isBlockAvailableByBlockClass[i]?t("a",{key:i+"item",staticClass:"dropdown-item",attrs:{href:"#","data-block-type":i,"data-default-num-connections":o["defaultConnections"]},on:{click:function(t){return t.preventDefault(),e.handleAddBlockByTypeSelected(o)}}},[e._v(" "+e._s(e.translateTreeClassName(i))+" ")]):e._e()]})),e._t("extra-dropdown-items-for-category3")],2)])],e.isEmpty(e.blockClassesForDeveloperCategory)?e._e():t("li",{staticClass:"nav-item dropdown"},[t("a",{staticClass:"nav-link dropdown-toggle",attrs:{"data-toggle":"dropdown",href:"#",role:"button","aria-haspopup":"true","aria-expanded":"false"},on:{mouseover:function(t){return e.openDropdownMenu(t.target)}}},[t("span",{staticClass:"nav-link-text"},[e._v(e._s(e._f("trans")("flow-builder.advanced")))])]),t("div",{staticClass:"dropdown-menu mt-0"},[e._l(e.blockClassesForDeveloperCategory,(function(o,i){return[e.shouldDisplayDividerBefore(e.blockClassesForDeveloperCategory,i)?t("div",{key:i+"divider",staticClass:"dropdown-divider"}):e._e(),e.isBlockAvailableByBlockClass[i]?t("a",{key:i+"item",staticClass:"dropdown-item",attrs:{href:"#","data-block-type":i,"data-default-num-connections":o["defaultConnections"]},on:{click:function(t){return t.preventDefault(),e.handleAddBlockByTypeSelected(o)}}},[e._v(" "+e._s(e.translateTreeClassName(i))+" ")]):e._e()]})),e._t("extra-dropdown-items-for-category5")],2)])],2)])]):e._e()]),e.isBuilderCanvasEnabled?t("div",{staticClass:"tree-builder-toolbar-alerts w-100"},[e.isEditable?t("selection-banner",{on:{updated:e.handleHeightChangeFromDOM}}):e._e(),t("error-notifications",{on:{updated:e.handleHeightChangeFromDOM}}),e.isBlockEditorOpen?t("block-editor"):e._e()],1):e._e()])}),Gc=[],qc=o("5f5b"),Kc=o("b4ae");function Zc(e,t,o=!1){return Object(O["isArray"])(t)?o?Object(O["every"])(t,t=>e[t]):Object(O["find"])(t,t=>e[t]):e[t]}let Xc=class extends h["default"]{constructor(...e){super(...e),Object(m["a"])(this,"permissions",void 0)}can(e,t=!1){return Zc(this.permissions,e,t)}};Object(k["__decorate"])([se["d"]],Xc.prototype,"permissions",void 0),Xc=Object(k["__decorate"])([x["b"]],Xc);var Jc=Xc,Yc=o("b429"),Qc=o.n(Yc),el=o("512d"),tl=o.n(el),ol=o("af98");h["default"].use(qc["a"]),h["default"].component("BTooltip",Kc["a"]);const il=Object(se["e"])("flow"),al=Object(se["e"])("builder"),sl=Object(se["e"])("clipboard"),rl=Object(se["e"])("validation");let nl=class extends(Object(x["c"])(pc["a"],Jc,B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"isExportVisible",!1),Object(m["a"])(this,"height",102),Object(m["a"])(this,"activeMainComponent",void 0),Object(m["a"])(this,"tree",void 0),Object(m["a"])(this,"ui",void 0),Object(m["a"])(this,"hasToolbarFlowTitle",void 0),Object(m["a"])(this,"hasToolbarHomeButton",void 0),Object(m["a"])(this,"hasToolbarNewFlowButton",void 0),Object(m["a"])(this,"hasToolbarExportButton",void 0),Object(m["a"])(this,"isTreeSaving",void 0),Object(m["a"])(this,"isBlockAvailableByBlockClass",void 0),Object(m["a"])(this,"hasChanges",void 0),Object(m["a"])(this,"isTreeValid",void 0),Object(m["a"])(this,"selectedBlock",void 0),Object(m["a"])(this,"isFeatureTreeSaveEnabled",void 0),Object(m["a"])(this,"isFeatureTreeSendEnabled",void 0),Object(m["a"])(this,"isFeatureTreeDuplicateEnabled",void 0),Object(m["a"])(this,"isFeatureViewResultsEnabled",void 0),Object(m["a"])(this,"isFeatureSimulatorEnabled",void 0),Object(m["a"])(this,"isFeatureUpdateInteractionTotalsEnabled",void 0),Object(m["a"])(this,"isResourceViewerEnabled",void 0),Object(m["a"])(this,"setTreeSaving",void 0),Object(m["a"])(this,"attemptSaveTree",void 0),Object(m["a"])(this,"activeFlow",void 0),Object(m["a"])(this,"activeFlowContainer",void 0),Object(m["a"])(this,"hasOfflineMode",void 0),Object(m["a"])(this,"isActiveFlowValid",void 0),Object(m["a"])(this,"flows",void 0),Object(m["a"])(this,"resources",void 0),Object(m["a"])(this,"flow_removeBlock",void 0),Object(m["a"])(this,"flow_addBlankBlockByType",void 0),Object(m["a"])(this,"flow_duplicateBlock",void 0),Object(m["a"])(this,"isEditable",void 0),Object(m["a"])(this,"hasFlowChanges",void 0),Object(m["a"])(this,"activeBlockId",void 0),Object(m["a"])(this,"isBlockEditorOpen",void 0),Object(m["a"])(this,"activeBlock",void 0),Object(m["a"])(this,"isBuilderCanvasEnabled",void 0),Object(m["a"])(this,"isResourceViewerCanvasEnabled",void 0),Object(m["a"])(this,"activateBlock",void 0),Object(m["a"])(this,"persistFlowAndHandleUiState",void 0),Object(m["a"])(this,"setSimulatorActive",void 0),Object(m["a"])(this,"remove_block_validation",void 0)}async mounted(){const e=this.$route.meta?this.$route.meta:{};this.onMetaChanged(e);const t=this.$refs["edit-flow-modal"];t?(t.$on("shown",()=>{const e=this.$route.meta;e&&!0===e.isFlowEditorShown||this.$router.replace({name:"flow-details"})}),t.$on("hidden",()=>{const e=this.$route.meta;e&&!0===e.isFlowEditorShown&&this.$router.replace({name:"flow-canvas"})})):console.debug("Builder Toolbar","Unable to find the edit flow modal on mount - deep linking may not work")}onMetaChanged(e){const t=this.$refs["edit-flow-modal"];t&&(e.isFlowEditorShown?t.show():t.hide())}isEmpty(e){return Object(O["isEmpty"])(e)}get flow(){return JSON.stringify(Object(O["omit"])(this.activeFlowContainer,"isCreated"),null,2)}get resourceUrl(){return this.editTreeRoute({component:"resource-viewer",mode:this.isEditable?"edit":"view"})}get downloadAudioUrl(){return this.editTreeRoute({component:"downloadaudio"})}get treeUrl(){return this.editTreeRoute({component:"builder",mode:this.isEditable?"edit":"view"})}get editModeUrl(){return this.editTreeRoute({component:this.activeMainComponent,mode:"edit"})}get saveButtonText(){return this.isTreeSaving?this.trans("flow-builder.saving"):this.hasFlowChanges?this.trans("flow-builder.save"):this.trans("flow-builder.saved")}get isSavingDisabled(){return!0===this.isTreeSaving}get blockClassesForContentCategory(){return Qc()(tl()(e=>!this.hasClassDetail(e,"hidden_in_menu")),tl()(e=>this.hasMenuCategory(e,1)))(this.ui.blockClasses)}get blockClassesForContactCategory(){return Qc()(tl()(e=>!this.hasClassDetail(e,"hidden_in_menu")),tl()(e=>this.hasMenuCategory(e,2)))(this.ui.blockClasses)}get blockClassesForBranchingCategory(){return Qc()(tl()(e=>!this.hasClassDetail(e,"hidden_in_menu")),tl()(e=>this.hasMenuCategory(e,3)||this.hasClassDetail(e,"branchingMenu")))(this.ui.blockClasses)}get blockClassesForDeveloperCategory(){return Qc()(tl()(e=>!this.hasClassDetail(e,"hidden_in_menu")),tl()(e=>this.hasMenuCategory(e,5)))(this.ui.blockClasses)}get canViewResultsTotals(){return this.can("view-result-totals")&&this.isFeatureViewResultsEnabled}get hasSimulator(){return!0===this.hasOfflineMode&&!0===this.isFeatureSimulatorEnabled}async handleAddBlockByTypeSelected({type:e}){const{uuid:t}=await this.flow_addBlankBlockByType({type:e,ui_metadata:{canvas_coordinates:Object(ol["b"])(this.activeBlock)}});this.activateBlock({blockId:t}),await this.$router.push({name:"block-selected-details",params:{blockId:t}})}async handlePersistFlow(e){if(this.$route.path!==e){if(this.isEditable){await this.persistFlowAndHandleUiState()}e&&await this.$router.push(e)}}showOrHideEditFlowModal(){const e=this.$refs["edit-flow-modal"];e&&e.toggle()}openDropdownMenu(e){e.hasAttribute("aria-expanded")&&"true"!==e.getAttribute("aria-expanded")&&e.click()}toggleExportVisibility(){this.isExportVisible=!this.isExportVisible}editTreeRoute({component:e=null,mode:t=null}={}){var o;const i=this.removeNilValues({flowId:null===(o=this.activeFlow)||void 0===o?void 0:o.uuid,component:e,mode:t});return this.route("flows.editFlow",i)}hasClassDetail(e,t){return!Object(O["isNil"])(e[t])&&e[t]}hasMenuCategory(e,t){return this.hasClassDetail(e,"menu_category")&&e.menu_category===t}translateTreeClassName(e){return this.trans("flow-builder."+e)}shouldDisplayDividerBefore(e,t){const o=Object(O["pickBy"])(e,e=>this.hasClassDetail(e,"divider_before"))[t];return o&&this.isBlockAvailableByBlockClass[t]}removeNilValues(e){return Object(O["pickBy"])(e,O["identity"])}handleHeightChangeFromDOM(){const e=this.$refs["builder-toolbar"];e||console.debug("Interaction Designer","Unable to find DOM element corresponding to builder-toolbar");const t=Object(O["reduce"])(e.childNodes,(e,t)=>e+t.offsetHeight,0);t>0&&(this.height=t,this.$emit("height-updated",this.height))}handleFlowViewMenu(){this.handlePersistFlow(this.treeUrl)}handleResourceViewMenu(){this.handlePersistFlow(this.resourceUrl),window.scrollTo(0,0)}get viewModeUrl(){return this.editTreeRoute({component:this.activeMainComponent,mode:"view"})}};Object(k["__decorate"])([Object(E["d"])("$route.meta",{immediate:!0,deep:!0})],nl.prototype,"onMetaChanged",null),Object(k["__decorate"])([al.State],nl.prototype,"activeMainComponent",void 0),Object(k["__decorate"])([Object(se["d"])(({trees:{tree:e}})=>e)],nl.prototype,"tree",void 0),Object(k["__decorate"])([Object(se["d"])(({trees:{ui:e}})=>e)],nl.prototype,"ui",void 0),Object(k["__decorate"])([se["b"]],nl.prototype,"hasToolbarFlowTitle",void 0),Object(k["__decorate"])([se["b"]],nl.prototype,"hasToolbarHomeButton",void 0),Object(k["__decorate"])([se["b"]],nl.prototype,"hasToolbarNewFlowButton",void 0),Object(k["__decorate"])([se["b"]],nl.prototype,"hasToolbarExportButton",void 0),Object(k["__decorate"])([se["b"]],nl.prototype,"isTreeSaving",void 0),Object(k["__decorate"])([se["b"]],nl.prototype,"isBlockAvailableByBlockClass",void 0),Object(k["__decorate"])([se["b"]],nl.prototype,"hasChanges",void 0),Object(k["__decorate"])([se["b"]],nl.prototype,"isTreeValid",void 0),Object(k["__decorate"])([se["b"]],nl.prototype,"selectedBlock",void 0),Object(k["__decorate"])([se["b"]],nl.prototype,"isFeatureTreeSaveEnabled",void 0),Object(k["__decorate"])([se["b"]],nl.prototype,"isFeatureTreeSendEnabled",void 0),Object(k["__decorate"])([se["b"]],nl.prototype,"isFeatureTreeDuplicateEnabled",void 0),Object(k["__decorate"])([se["b"]],nl.prototype,"isFeatureViewResultsEnabled",void 0),Object(k["__decorate"])([se["b"]],nl.prototype,"isFeatureSimulatorEnabled",void 0),Object(k["__decorate"])([se["b"]],nl.prototype,"isFeatureUpdateInteractionTotalsEnabled",void 0),Object(k["__decorate"])([se["b"]],nl.prototype,"isResourceViewerEnabled",void 0),Object(k["__decorate"])([se["c"]],nl.prototype,"setTreeSaving",void 0),Object(k["__decorate"])([se["a"]],nl.prototype,"attemptSaveTree",void 0),Object(k["__decorate"])([il.Getter],nl.prototype,"activeFlow",void 0),Object(k["__decorate"])([il.Getter],nl.prototype,"activeFlowContainer",void 0),Object(k["__decorate"])([il.Getter],nl.prototype,"hasOfflineMode",void 0),Object(k["__decorate"])([il.Getter],nl.prototype,"isActiveFlowValid",void 0),Object(k["__decorate"])([il.State],nl.prototype,"flows",void 0),Object(k["__decorate"])([il.State],nl.prototype,"resources",void 0),Object(k["__decorate"])([il.Action],nl.prototype,"flow_removeBlock",void 0),Object(k["__decorate"])([il.Action],nl.prototype,"flow_addBlankBlockByType",void 0),Object(k["__decorate"])([il.Action],nl.prototype,"flow_duplicateBlock",void 0),Object(k["__decorate"])([al.Getter],nl.prototype,"isEditable",void 0),Object(k["__decorate"])([al.Getter],nl.prototype,"hasFlowChanges",void 0),Object(k["__decorate"])([al.State],nl.prototype,"activeBlockId",void 0),Object(k["__decorate"])([al.State],nl.prototype,"isBlockEditorOpen",void 0),Object(k["__decorate"])([al.Getter],nl.prototype,"activeBlock",void 0),Object(k["__decorate"])([al.Getter],nl.prototype,"isBuilderCanvasEnabled",void 0),Object(k["__decorate"])([al.Getter],nl.prototype,"isResourceViewerCanvasEnabled",void 0),Object(k["__decorate"])([al.Mutation],nl.prototype,"activateBlock",void 0),Object(k["__decorate"])([al.Action],nl.prototype,"persistFlowAndHandleUiState",void 0),Object(k["__decorate"])([sl.Action],nl.prototype,"setSimulatorActive",void 0),Object(k["__decorate"])([rl.Action],nl.prototype,"remove_block_validation",void 0),nl=Object(k["__decorate"])([Object(x["b"])({components:{BModal:co["a"]}})],nl);var cl=nl,ll=cl,dl=(o("6a23"),Object(M["a"])(ll,zc,Gc,!1,null,null,null)),ul=(dl.exports,function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{ref:"block/"+e.block.uuid,staticClass:"block",attrs:{id:"block/"+e.block.uuid},on:{click:function(t){return t.stopPropagation(),e.selectBlock.apply(null,arguments)},mouseenter:function(t){return e.setIsMouseOnBlock(!0)},mouseleave:function(t){return e.setIsMouseOnBlock(!1)}}},[e.hasLayout?t("plain-draggable",{ref:"draggable",staticClass:"block-draggable",class:{"is-active":e.isBlockActivated,"source-block-having-active-connection":e.isAssociatedWithActiveConnectionAsSourceBlock,"target-block-having-active-connection":e.isAssociatedWithActiveConnectionAsTargetBlock,"target-block-waiting-for-connection":e.isWaitingForConnection,"has-toolbar":e.isBlockSelected||e.shouldShowBlockEditorForCurrentBlock,["has-exits"]:e.hasExitsShown,["has-multiple-exits"]:e.hasMultipleExitsShown,[`has-${e.numberOfExitsShown}-exits`]:!0,["category-"+e.blockClasses[e.block.type].category]:!0},attrs:{"start-x":e.x,"start-y":e.y,"is-editable":e.isEditable},on:{dragged:e.onMoved,dragEnded:e.handleDraggableEndedForBlock,destroyed:e.handleDraggableDestroyedForBlock},nativeOn:{mouseenter:function(t){e.isConnectionCreateActive&&e.activateBlockAsDropZone()},mouseleave:function(t){e.isConnectionCreateActive&&e.deactivateBlockAsDropZone()}}},[t("header",{staticClass:"block-target draggable-handle",class:{initial:!1,pending:e.isConnectionCreateActive,fulfilled:!1,rejected:!1,activated:e.isBlockActivated},attrs:{id:`block/${e.block.uuid}/handle`}},[t("block-toolbar",{attrs:{block:e.block,"is-activated-by-connection":e.isAssociatedWithActiveConnectionAsTargetBlock,"is-block-selected":e.isBlockSelected,"is-editor-visible":e.shouldShowBlockEditorForCurrentBlock,"is-waiting-for-connection":e.isWaitingForConnection},on:{showHideHasClicked:e.selectBlock}}),t("block-title",{attrs:{block:e.block}}),t("h3",{staticClass:"block-label",class:{empty:!e.block.label},style:{maxWidth:e.labelContainerMaxWidth+"px"}},[e._v(" "+e._s(e.block.label||e.trans("flow-builder.untitled-block"))+" ")]),e._t("after-label")],2),t("footer",{ref:`block/${e.block.uuid}/exits`,staticClass:"block-exits d-flex mt-1",class:{"pointer-events-none":!e.isEditable},attrs:{id:`block/${e.block.uuid}/exits`}},e._l(e.block.exits,(function(o){return t("block-exit",{key:o.uuid,attrs:{id:"exit/"+o.uuid,exit:o,block:e.block},on:{"connection-create-start":function(t){return e.setIsConnectionSource(!0)},"connection-create-end":function(t){return e.setIsConnectionSource(!1)}}})})),1)]):e._e()],1)}),bl=[];const pl=Object(se["e"])("flow"),hl=Object(se["e"])("builder"),fl=650,vl="BLOCK_RESET_CONNECTIONS";let _l=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"block",void 0),Object(m["a"])(this,"x",void 0),Object(m["a"])(this,"y",void 0),Object(m["a"])(this,"labelContainerMaxWidth",fl),Object(m["a"])(this,"blockWidth",0),Object(m["a"])(this,"isConnectionSource",!1),Object(m["a"])(this,"selectedBlocks",void 0),Object(m["a"])(this,"activeBlockId",void 0),Object(m["a"])(this,"operations",void 0),Object(m["a"])(this,"activeConnectionsContext",void 0),Object(m["a"])(this,"isBlockEditorOpen",void 0),Object(m["a"])(this,"draggableForExitsByUuid",void 0),Object(m["a"])(this,"isConnectionCreationInProgress",void 0),Object(m["a"])(this,"blockClasses",void 0),Object(m["a"])(this,"isEditable",void 0),Object(m["a"])(this,"activeFlow",void 0),Object(m["a"])(this,"isMouseOnBlock",!1),Object(m["a"])(this,"activateBlock",void 0),Object(m["a"])(this,"setBlockPositionTo",void 0),Object(m["a"])(this,"initDraggableForExitsByUuid",void 0),Object(m["a"])(this,"setIsBlockEditorOpen",void 0),Object(m["a"])(this,"deactivateConnectionFromExitUuid",void 0),Object(m["a"])(this,"setConnectionCreateTargetBlock",void 0),Object(m["a"])(this,"setConnectionCreateTargetBlockToNullFrom",void 0)}created(){this.initDraggableForExitsByUuid()}updated(){this.$refs.draggable&&(this.blockWidth=this.$refs.draggable.$el.clientWidth)}mounted(){this.$nextTick((function(){this.updateLabelContainerMaxWidth()})),window.addEventListener("message",e=>{e.data===vl&&this.activeConnectionsContext.forEach(e=>{this.deactivateConnectionFromExitUuid({exitUuid:e.exitId})})})}onBlockExitsLengthChanged(e,t){this.$nextTick(()=>{this.updateLabelContainerMaxWidth(e,e<t)})}get blockExitsLength(){return this.block.exits.length}get numberOfExitsShown(){const{exits:e}=this.block;return e.length}get hasExitsShown(){return this.numberOfExitsShown>0}get hasMultipleExitsShown(){return this.numberOfExitsShown>1}get hasLayout(){return Object(O["isNumber"])(this.x)&&Object(O["isNumber"])(this.y)}get isAssociatedWithActiveConnection(){const{block:e,activeConnectionsContext:t}=this;return!!Object(O["filter"])(t,t=>t.sourceId===e.uuid||t.targetId===e.uuid).length}get isAssociatedWithActiveConnectionAsSourceBlock(){const{block:e,activeConnectionsContext:t}=this;return!!Object(O["filter"])(t,t=>t.sourceId===e.uuid).length}get isAssociatedWithActiveConnectionAsTargetBlock(){const{block:e,activeConnectionsContext:t}=this;return!!Object(O["filter"])(t,t=>t.targetId===e.uuid).length}get isWaitingForConnection(){return!this.isConnectionSource&&this.isMouseOnBlock&&this.isConnectionCreationInProgress}get isBlockSelected(){return Object(O["includes"])(this.selectedBlocks,this.block.uuid)}get isConnectionCreateActive(){const{operations:e}=this;return!!e[ol["a"].CONNECTION_CREATE].data}get isBlockActivated(){const{activeBlockId:e,isAssociatedWithActiveConnection:t,block:o,operations:i}=this;if(e&&e===o.uuid||t)return!0;const{data:a}=i[ol["a"].CONNECTION_CREATE];return(null===a||void 0===a?void 0:a.targetId)===o.uuid}get shouldShowBlockEditorForCurrentBlock(){return this.isBlockEditorOpen&&this.activeBlockId===this.block.uuid}setIsMouseOnBlock(e){this.isMouseOnBlock=e}setIsConnectionSource(e){this.isConnectionSource=e}updateLabelContainerMaxWidth(e=this.blockExitsLength,t=!1){const o=document.querySelector(`#block\\/${this.block.uuid} .block-exit`);if(o){if(t){if(fl<(e-1)*o.offsetWidth)return void(this.labelContainerMaxWidth=(e-1)*o.offsetWidth)}else if(fl<e*o.clientWidth)return void(this.labelContainerMaxWidth=e*o.offsetWidth);this.labelContainerMaxWidth=fl}else console.debug("blockExitWidth","DOM not ready yet on",`#block\\/${this.block.uuid} .block-exit`)}isExitActivatedForCreate(e){var t;const{data:o}=this.operations[ol["a"].CONNECTION_CREATE];return(null===o||void 0===o||null===(t=o.source)||void 0===t?void 0:t.exitId)===e.uuid}activateBlockAsDropZone(){const{block:e}=this;this.setConnectionCreateTargetBlock({block:e})}deactivateBlockAsDropZone(){var e;const{block:t}=this;null!==(null===(e=this.operations[ol["a"].CONNECTION_CREATE].data)||void 0===e?void 0:e.targetId)&&this.setConnectionCreateTargetBlockToNullFrom({block:t})}onMoved({position:{left:e,top:t}}){const{block:o}=this;this.$nextTick(()=>{this.setBlockPositionTo({position:{x:e,y:t},block:o}),Object(O["forEach"])(this.draggableForExitsByUuid,(e,t)=>{try{e.position()}catch(o){console.warn("Block","onMoved","positioning draggable on",t,'can\'t access property "initElm", props is undefined')}}),console.debug("Block","onMoved","positioned all of",this.draggableForExitsByUuid)})}selectBlock(){let e,t;e=this.activeBlockId!==this.block.uuid||!this.isBlockEditorOpen,this.setIsBlockEditorOpen(e),this.isBlockEditorOpen?(t="block-selected-details",this.$emit("before-minimize")):(t="block-selected",this.$emit("before-expand")),this.$router.replace({name:t,params:{blockId:this.block.uuid}},void 0,e=>{null==e?console.warn("Unknown navigation error has occurred when selecting a block"):"NavigationDuplicated"!==e.name&&console.warn(e)})}handleDraggableEndedForBlock(){console.debug("Block","handleDraggableEndedForBlock"),Object(O["forEach"])(this.block.exits,e=>{delete this.draggableForExitsByUuid[e.uuid]})}handleDraggableDestroyedForBlock(){console.debug("Block","handleDraggableDestroyedForBlock"),Object(O["forEach"])(this.block.exits,e=>{delete this.draggableForExitsByUuid[e.uuid]})}};Object(k["__decorate"])([Object(E["b"])({type:Object,required:!0})],_l.prototype,"block",void 0),Object(k["__decorate"])([Object(E["b"])({type:Number,required:!0})],_l.prototype,"x",void 0),Object(k["__decorate"])([Object(E["b"])({type:Number,required:!0})],_l.prototype,"y",void 0),Object(k["__decorate"])([Object(E["d"])("blockExitsLength")],_l.prototype,"onBlockExitsLengthChanged",null),Object(k["__decorate"])([pl.State],_l.prototype,"selectedBlocks",void 0),Object(k["__decorate"])([hl.State],_l.prototype,"activeBlockId",void 0),Object(k["__decorate"])([hl.State],_l.prototype,"operations",void 0),Object(k["__decorate"])([hl.State],_l.prototype,"activeConnectionsContext",void 0),Object(k["__decorate"])([hl.State],_l.prototype,"isBlockEditorOpen",void 0),Object(k["__decorate"])([hl.State],_l.prototype,"draggableForExitsByUuid",void 0),Object(k["__decorate"])([hl.State],_l.prototype,"isConnectionCreationInProgress",void 0),Object(k["__decorate"])([Object(se["d"])(({trees:{ui:e}})=>e.blockClasses)],_l.prototype,"blockClasses",void 0),Object(k["__decorate"])([hl.Getter],_l.prototype,"isEditable",void 0),Object(k["__decorate"])([pl.Getter],_l.prototype,"activeFlow",void 0),Object(k["__decorate"])([hl.Mutation],_l.prototype,"activateBlock",void 0),Object(k["__decorate"])([hl.Mutation],_l.prototype,"setBlockPositionTo",void 0),Object(k["__decorate"])([hl.Mutation],_l.prototype,"initDraggableForExitsByUuid",void 0),Object(k["__decorate"])([hl.Mutation],_l.prototype,"setIsBlockEditorOpen",void 0),Object(k["__decorate"])([hl.Mutation],_l.prototype,"deactivateConnectionFromExitUuid",void 0),Object(k["__decorate"])([hl.Action],_l.prototype,"setConnectionCreateTargetBlock",void 0),Object(k["__decorate"])([hl.Action],_l.prototype,"setConnectionCreateTargetBlockToNullFrom",void 0),_l=Object(k["__decorate"])([Object(E["a"])({})],_l);var gl=_l,ml=gl,kl=(o("e569"),Object(M["a"])(ml,ul,bl,!1,null,null,null)),jl=(kl.exports,function(){var e=this,t=e._self._c,o=e._self._setupProxy;return t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:o.tooltip,expression:"tooltip",modifiers:{hover:!0,bottom:!0}}],key:o.componentKey,staticClass:"block-exit flex-grow-1",on:{mousemove:o.updateCursorPosition,click:function(t){e.exit.destination_block&&o.handleRemoveConnection()}}},[t("div",{staticClass:"block-exit-name badge badge-warning w-100",class:o.exitNameClass,on:{mouseenter:function(e){o.isHovered=!0},mouseleave:function(e){o.isHovered=!1}}},[o.isHovered||o.isExitActivatedForCreate?e._e():t("div",{staticClass:"d-flex flex-row justify-content-between align-items-center w-100 px-1"},[t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:e.exit.test,expression:"exit.test",modifiers:{hover:!0,bottom:!0}}],staticClass:"block-exit-name-text"},[e._v(" "+e._s(e.exit.name||"(untitled)")+" ")]),e._t("middle")],2),t("span",{staticClass:"align-self-center d-flex"},[null==e.exit.destination_block?[o.isHovered||o.isExitActivatedForCreate?t("plain-draggable",{key:`exit/${e.exit.uuid}/pseudo-block-handle`,staticClass:"btn btn-xs btn-flat p-0",attrs:{id:`exit/${e.exit.uuid}/pseudo-block-handle`,"drag-handle-id":"exit/"+e.exit.uuid,"is-editable":o.isEditable},on:{initialized:function(e){return o.handleDraggableInitializedFor(e)},dragStarted:function(e){return o.onCreateExitDragStarted(e)},dragged:function(e){return o.onCreateExitDragged(e)},dragEnded:function(e){return o.onCreateExitDragEnded(e)},destroyed:function(e){return o.handleDraggableDestroyedFor()}}},[t("i",{staticClass:"glyphicon glyphicon-move"})]):e._e(),o.isConnectionCreateActive&&o.isExitActivatedForCreate&&o.livePosition?[t("div",{staticClass:"btn btn-xs p-0 text-white",attrs:{id:`exit/${e.exit.uuid}/handle`}},[t("i",{staticClass:"glyphicon glyphicon-move"})]),t("connection",{key:`exit/${e.exit.uuid}/line-for-draft`,attrs:{color:o.connectionColorAtSourceDragged,"repaint-cache-key-generator":o.generateConnectionLayoutKeyFor,source:e.block,target:o.blocksById[e.exit.destination_block],exit:e.exit,position:o.livePosition}})]:e._e()]:e._e(),null!=e.exit.destination_block?[t("div",{key:`exit/${e.exit.uuid}/handle`,staticClass:"btn btn-xs btn-flat",attrs:{id:`exit/${e.exit.uuid}/handle`}},[o.isHovered?t("font-awesome-icon",{staticClass:"text-danger",attrs:{title:"Click to remove this connection",icon:["far","times-circle"]}}):e._e()],1),t("connection",{key:`exit/${e.exit.uuid}/line`,attrs:{color:o.connectionColorForKnowDestination,"repaint-cache-key-generator":o.generateConnectionLayoutKeyFor,source:o.livePosition?null:e.block,target:o.blocksById[e.exit.destination_block],exit:e.exit,position:o.livePosition},on:{lineMouseIn:function(e){return o.setIsLineHovered(!0)},lineMouseClickedIn:function(e){return o.setIsLineClicked(!0)},lineMouseClickedOut:function(e){return o.setIsLineClicked(!1)},lineMouseOut:function(e){return o.setIsLineHovered(!1)}}})]:e._e(),e._t("right")],2)])])}),Ol=[];function yl(){return Object(h["inject"])("store")}var wl=Object(h["defineComponent"])({__name:"BlockExit",props:{block:null,exit:null},emits:["connection-create-start","connection-create-end"],setup(e,{emit:t}){const o=e,i=yl(),a=Nt.CONNECTING,s=Nt.DEFAULT,r=10,n=Object(h["ref"])(!1),c=Object(h["ref"])(!1),l=Object(h["ref"])(!1),d=Object(h["ref"])(!1),u=Object(h["ref"])(null),b=Object(h["ref"])(null),p=Object(h["ref"])(0),f=Object(h["computed"])(()=>i.getters["builder/isEditable"]),v=Object(h["computed"])(()=>i.state.builder.operations),_=Object(h["computed"])(()=>null!==v.value[ol["a"].CONNECTION_CREATE].data),g=Object(h["computed"])(()=>{var e;const{data:t}=v.value[ol["a"].CONNECTION_CREATE];return(null===t||void 0===t||null===(e=t.source)||void 0===e?void 0:e.exitId)===o.exit.uuid}),m=Object(h["computed"])(()=>f.value?void 0!==o.exit.destination_block?B["b"].trans("flow-builder.tooltip-remove-connection"):B["b"].trans("flow-builder.tooltip-new-connection"):""),k=Object(h["computed"])(()=>({"is-initiating":null==o.exit.destination_block&&n.value,"is-connected":null!=o.exit.destination_block,"is-disconnected":null==o.exit.destination_block&&!n.value,"is-highlighted-from-connection":null!=o.exit.destination_block&&(l.value||d.value),"is-connected-and-on-hover":null!=o.exit.destination_block&&c.value})),j=Object(h["computed"])(()=>i.getters["builder/blocksById"]),O=Object(h["computed"])(()=>i.state.builder.draggableForExitsByUuid);function y(){p.value+=1}function w(e){b.value={x:e.clientX+window.scrollX,y:e.clientY+window.scrollY}}function C(){T(!1),i.commit("builder/deactivateConnectionFromExitUuid",{exitUuid:o.exit.uuid},{root:!0}),i.dispatch("builder/removeConnectionFrom",{block:o.block,exit:o.exit},{root:!0}),this.forceRender()}function x({draggable:e}){const t=o.exit.uuid;O.value[t]=e;const{left:i,top:a}=e;console.debug("Block","handleDraggableInitializedFor",{blockId:o.block.uuid,exitId:t,coords:{left:i,top:a}})}function E(){const e=o.exit.uuid;delete O.value[e]}function I(e){const t=b.value.x-e.left-r,o=b.value.y-e.top-r;e.left+=t,e.top+=o}function S({draggable:e}){i.commit("builder/setIsConnectionCreationInProgress",{value:!0},{root:!0}),window.postMessage(vl,"*"),n.value=!0,t("connection-create-start");const{left:a,top:s}=e;i.dispatch("builder/initializeConnectionCreateWith",{block:o.block,exit:o.exit,position:{x:a,y:s}},{root:!0}),I(e)}function P({position:{left:e,top:t}}){u.value={x:e,y:t}}function M({draggable:e}){i.commit("builder/setIsConnectionCreationInProgress",{value:!1},{root:!0}),n.value=!1,t("connection-create-end");const{x:o,y:a}=v.value[ol["a"].CONNECTION_CREATE].data.position;console.debug("Block","onCreateExitDragEnded","operation.data.position",{left:o,top:a}),console.debug("Block","onCreateExitDragEnded","reset",{left:e.left,top:e.top}),Object.assign(e,{left:o,top:a}),i.dispatch("builder/applyConnectionCreate",null,{root:!0}),u.value=null}function F(e){Object(h["nextTick"])(()=>{l.value=e})}function T(e){Object(h["nextTick"])(()=>{d.value=e})}return{__sfc:!0,store:i,connectionColorAtSourceDragged:a,connectionColorForKnowDestination:s,ICON_SIZE:r,props:o,emit:t,isDragged:n,isHovered:c,isLineHovered:l,isLinePermanentlyActive:d,livePosition:u,cursorPosition:b,componentKey:p,isEditable:f,operations:v,isConnectionCreateActive:_,isExitActivatedForCreate:g,tooltip:m,exitNameClass:k,blocksById:j,draggableForExitsByUuid:O,forceRender:y,updateCursorPosition:w,handleRemoveConnection:C,handleDraggableInitializedFor:x,handleDraggableDestroyedFor:E,adjustDraggablePosition:I,onCreateExitDragStarted:S,onCreateExitDragged:P,onCreateExitDragEnded:M,setIsLineHovered:F,setIsLineClicked:T,generateConnectionLayoutKeyFor:ol["d"]}}}),Cl=wl,xl=(o("1102"),Object(M["a"])(Cl,jl,Ol,!1,null,null,null)),El=xl.exports,Bl=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"block-toolbar d-flex justify-content-between"},[t("div",{staticClass:"header-actions-left"},[e.isEditable?[e.isBlockSelected?t("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.trans("flow-builder.deselect-block"),expression:"trans('flow-builder.deselect-block')",modifiers:{hover:!0}}],staticClass:"cursor-pointer text-info",attrs:{icon:["far","check-circle"]},on:{click:function(t){t.stopPropagation(),e.isEditable&&e.block_deselect({blockId:e.block.uuid})}}}):e._e(),e.isBlockSelected?e._e():t("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.trans("flow-builder.select-block"),expression:"trans('flow-builder.select-block')",modifiers:{hover:!0}}],staticClass:"cursor-pointer",attrs:{icon:["far","circle"]},on:{click:function(t){t.stopPropagation(),e.isEditable&&e.block_select({blockId:e.block.uuid})}}})]:e._e()],2),t("div",{staticClass:"header-actions-right d-flex"},[e._t("right"),e.isEditable?t("div",{staticClass:"mr-1 ml-2"},[e.isDeleting?t("div",[t("button",{staticClass:"btn btn-light btn-xs",on:{click:function(t){t.stopPropagation(),e.isDeleting=!1}}},[t("small",[e._v(e._s(e.trans("flow-builder.cancel")))])]),t("button",{staticClass:"btn btn-xs ml-1",class:{"btn-danger":!e.isWaitingForConnection&&!e.isActivatedByConnection,"btn-secondary":e.isWaitingForConnection||e.isActivatedByConnection},on:{click:function(t){return t.stopPropagation(),e.handleDeleteBlock.apply(null,arguments)}}},[t("small",[e._v(e._s(e.trans("flow-builder.delete-block")))])])]):e._e(),e.isDeleting?e._e():t("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.trans("flow-builder.tooltip-delete-block"),expression:"trans('flow-builder.tooltip-delete-block')",modifiers:{hover:!0}}],staticClass:"cursor-pointer",class:{"text-danger":!e.isWaitingForConnection&&!e.isActivatedByConnection},attrs:{icon:["far","trash-alt"]},on:{click:function(t){t.stopPropagation(),e.isDeleting=!0}}})],1):e._e(),t("div",{staticClass:"mr-1 ml-2"},[e.isEditable?t("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.trans("flow-builder.tooltip-duplicate-block"),expression:"trans('flow-builder.tooltip-duplicate-block')",modifiers:{hover:!0}}],staticClass:"cursor-pointer",attrs:{icon:["fac","copy"]},on:{click:function(t){return t.stopPropagation(),e.handleDuplicateBlock.apply(null,arguments)}}}):e._e()],1),t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.trans("flow-builder.toggle-block-editor-tooltip"),expression:"trans('flow-builder.toggle-block-editor-tooltip')",modifiers:{hover:!0}}],staticClass:"mr-1 ml-2 cursor-pointer icon-container",on:{click:function(t){return t.stopPropagation(),e.$emit("showHideHasClicked")}}},[t("span",{staticClass:"icon-text"},[e._v(" "+e._s(e.isEditorVisible?e.trans("flow-builder.hide"):e.trans("flow-builder.show"))+" ")]),t("font-awesome-icon",{attrs:{icon:e.isEditorVisible?["fac","minimize"]:["fac","expand"]}})],1)],2)])},Il=[];const Sl=Object(se["e"])("builder"),Pl=Object(se["e"])("flow");Object(se["e"])("validation");let Ml=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"block",void 0),Object(m["a"])(this,"isBlockSelected",void 0),Object(m["a"])(this,"isEditorVisible",void 0),Object(m["a"])(this,"isWaitingForConnection",void 0),Object(m["a"])(this,"isActivatedByConnection",void 0),Object(m["a"])(this,"isDeleting",!1),Object(m["a"])(this,"isEditable",void 0),Object(m["a"])(this,"block_select",void 0),Object(m["a"])(this,"block_deselect",void 0),Object(m["a"])(this,"flow_removeBlock",void 0),Object(m["a"])(this,"flow_duplicateBlock",void 0)}handleDeleteBlock(){this.block_deselect({blockId:this.block.uuid}),this.flow_removeBlock({blockId:this.block.uuid}),this.isDeleting=!1,this.$emit("after-delete")}handleDuplicateBlock(){this.flow_duplicateBlock({blockId:this.block.uuid}).then(e=>{this.$router.replace({name:"block-selected-details",params:{blockId:e.uuid}})}),this.$emit("after-duplicate")}};Object(k["__decorate"])([Object(E["b"])()],Ml.prototype,"block",void 0),Object(k["__decorate"])([Object(E["b"])()],Ml.prototype,"isBlockSelected",void 0),Object(k["__decorate"])([Object(E["b"])()],Ml.prototype,"isEditorVisible",void 0),Object(k["__decorate"])([Object(E["b"])()],Ml.prototype,"isWaitingForConnection",void 0),Object(k["__decorate"])([Object(E["b"])()],Ml.prototype,"isActivatedByConnection",void 0),Object(k["__decorate"])([Sl.Getter],Ml.prototype,"isEditable",void 0),Object(k["__decorate"])([Pl.Action],Ml.prototype,"block_select",void 0),Object(k["__decorate"])([Pl.Action],Ml.prototype,"block_deselect",void 0),Object(k["__decorate"])([Pl.Action],Ml.prototype,"flow_removeBlock",void 0),Object(k["__decorate"])([Pl.Action],Ml.prototype,"flow_duplicateBlock",void 0),Ml=Object(k["__decorate"])([Object(x["b"])({})],Ml);var Fl=Ml,Tl=Fl,Al=(o("9291"),Object(M["a"])(Tl,Bl,Il,!1,null,"aab69204",null)),Vl=(Al.exports,function(){var e=this,t=e._self._c,o=e._self._setupProxy;return t("div",{staticClass:"block-title d-flex justify-content-between"},[t("p",{staticClass:"block-type"},[e._v(" "+e._s(o.lang.trans("flow-builder."+e.block.type))+" ")]),t("div",{staticClass:"d-flex"},[e._t("right"),o.activeFlow.first_block_id===e.block.uuid?t("i",{staticClass:"glyphicon glyphicon-arrow-down"}):e._e()],2)])}),Rl=[],Ll=Object(h["defineComponent"])({__name:"BlockTitle",props:{block:null},setup(e){const t=e,o=yl(),i=Object(h["computed"])(()=>o.getters["flow/activeFlow"]);return{__sfc:!0,store:o,props:t,activeFlow:i,lang:B["b"]}}}),Dl=Ll,Nl=Object(M["a"])(Dl,Vl,Rl,!1,null,null,null),$l=Nl.exports,Ul=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"resource-editor-cell d-flex flex-column"},[e.contentType===e.SupportedContentType.TEXT?t("resource-variant-text-editor",{attrs:{index:e.index,mode:e.mode,"resource-id":e.resource.uuid,"resource-variant":e.resourceVariant},on:{afterResourceVariantChanged:function(t){return e.$emit("change")}}}):e._e(),e.contentType===e.SupportedContentType.AUDIO?t("div",[t("validation-message",{attrs:{"message-key":`resource/${e.resource.uuid}/values/${e.index}/value`},scopedSlots:e._u([{key:"input-control",fn:function({isValid:o}){return[t("audio-library-selector",{attrs:{"audio-files":e.availableAudioFiles,"lang-id":e.languageId,"resource-id":e.resource.uuid,"selected-audio-uri":e.resourceVariant.value},on:{change:function(t){return e.$emit("change")}}})]}}],null,!1,4105706637)}),e.can(["edit-content","send-call-to-records"],!0)&&!e.resourceVariant.value?t("phone-recorder",{attrs:{"recording-key":`${e.block.uuid}:${e.languageId}`},on:{finish:function(t){return e.$emit("change")}}}):e._e(),e.resourceVariant.value?e._e():[t("upload-monitor",{attrs:{"upload-key":`${e.block.uuid}:${e.languageId}`}}),t("div",{staticClass:"d-flex mt-2 mb-3"},[e.isEditable&&e.isFeatureAudioUploadEnabled?t("button",{directives:[{name:"flow-uploader",rawName:"v-flow-uploader",value:{target:e.route("trees.resumeableAudioUpload"),token:`${e.block.uuid}:${e.languageId}`,accept:"audio/*"},expression:"{\n            target: route('trees.resumeableAudioUpload'),\n            token: `${block.uuid}:${languageId}`,\n            accept: 'audio/*'}"}],staticClass:"btn btn-primary ivr-buttons",on:{fileError:function(t){return e.handleFileErrorFor(t)},fileSuccess:function(t){return e.handleFileSuccessFor(`${e.block.uuid}:${e.languageId}`,e.languageId,t)},filesSubmitted:function(t){return e.handleFilesSubmittedFor(`${e.block.uuid}:${e.languageId}`,t)}}},[t("font-awesome-icon",{staticClass:"fa-btn",attrs:{icon:["fac","upload"]}}),e._v(" "+e._s(e._f("trans")("flow-builder.upload-audio"))+" ")],1):e._e(),e.can(["edit-content","send-call-to-records"],!0)&&e.isFeatureAudioUploadEnabled?t("button",{staticClass:"btn btn-primary ivr-buttons ml-2",on:{click:function(t){return t.preventDefault(),e.triggerRecordViaPhoneFor(e.languageId)}}},[t("font-awesome-icon",{staticClass:"fa-btn",attrs:{icon:["fac","record-audio"]}}),e._v(" "+e._s(e._f("trans")("flow-builder.record-audio"))+" ")],1):e._e()])]],2):e._e()],1)},Hl=[],Wl=o("2930"),zl=o.n(Wl);const Gl=(e,t,o)=>{e.dispatchEvent(Object(O["extend"])(new Event(t,{bubbles:!0,cancelable:!0}),{data:o}))};let ql=class extends h["default"]{};ql=Object(k["__decorate"])([Object(x["b"])({directives:{"flow-uploader":{bind(e,t){const{accept:o,target:i,token:a}=t.value,s=new zl.a({target:i,singleFile:!0,chunkSize:524288,query:{upload_token:a}});s.support&&(Object(O["extend"])(e.style,{overflow:"hidden"}),s.assignBrowse([e]),Object(O["chain"])(e.children).find({tagName:"INPUT",type:"file"}).assign({accept:o}).value(),s.on("filesSubmitted",(t,o)=>Gl(e,"filesSubmitted",{files:t,uploader:s})),s.on("fileProgress",(t,o)=>Gl(e,"fileProgress",{file:t,uploader:s})),s.on("fileSuccess",(t,o)=>Gl(e,"fileSuccess",{file:t,uploader:s,json:o})),s.on("error",(t,o)=>Gl(e,"fileError",{file:o,uploader:s,message:t})))},unbind(e,t){}}}})],ql);var Kl=ql;const Zl=Object(se["e"])("flow"),Xl=Object(se["e"])("builder");let Jl=class extends(Object(x["c"])(Kl,Jc,pc["a"],B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"block",void 0),Object(m["a"])(this,"contentType",void 0),Object(m["a"])(this,"languageId",void 0),Object(m["a"])(this,"mode",void 0),Object(m["a"])(this,"SupportedContentType",X["SupportedContentType"]),Object(m["a"])(this,"availableAudioFiles",void 0),Object(m["a"])(this,"isFeatureAudioUploadEnabled",void 0),Object(m["a"])(this,"pushAudioIntoLibrary",void 0),Object(m["a"])(this,"resourcesByUuidOnActiveFlow",void 0),Object(m["a"])(this,"activeFlow",void 0),Object(m["a"])(this,"resource_setOrCreateValueModeSpecific",void 0),Object(m["a"])(this,"isEditable",void 0)}get resource(){return this.resourcesByUuidOnActiveFlow[this.block.config.prompt]}triggerRecordViaPhoneFor(e){this.$store.commit("setAudioRecordingConfigVisibilityForSelectedBlock",{langId:e,isVisible:!0})}handleFilesSubmittedFor(e,{data:t}){console.debug("call handleFilesSubmittedFor"),this.$store.dispatch("multimediaUpload/uploadFiles",{...t,key:e}),this.$emit("change")}handleFileSuccessFor(e,t,o){const{data:{json:i}}=o,{audio_file_id:a,audio_uuid:s,created_at:{date:r},description:n,duration_seconds:c,uri:l}=JSON.parse(i),d=n.split(".")[n.split(".").length-1],u={id:a,audio_uuid:s,description:n,language_id:t,duration_seconds:c,original_extension:d,created_at:r,uri:l};this.resource_setOrCreateValueModeSpecific({resourceId:this.resource.uuid,filter:{language_id:t,content_type:X["SupportedContentType"].AUDIO,modes:[X["SupportedMode"].IVR]},value:l}),o.target.blur(),this.pushAudioIntoLibrary(u),this.$emit("change")}handleFileErrorFor(e){const{data:{message:t}}=e;console.debug("handleFileErrorFor",t),this.$emit("change")}get resourceVariant(){return Object(io["e"])(this.resource,{language_id:this.languageId,content_type:this.contentType,modes:[this.mode]})}get index(){return Object(io["d"])(this.resource,{language_id:this.languageId,content_type:this.contentType,modes:[this.mode]})}};Object(k["__decorate"])([Object(E["b"])({required:!0})],Jl.prototype,"block",void 0),Object(k["__decorate"])([Object(E["b"])({required:!0})],Jl.prototype,"contentType",void 0),Object(k["__decorate"])([Object(E["b"])({required:!0})],Jl.prototype,"languageId",void 0),Object(k["__decorate"])([Object(E["b"])({required:!0})],Jl.prototype,"mode",void 0),Object(k["__decorate"])([se["b"]],Jl.prototype,"availableAudioFiles",void 0),Object(k["__decorate"])([se["b"]],Jl.prototype,"isFeatureAudioUploadEnabled",void 0),Object(k["__decorate"])([se["c"]],Jl.prototype,"pushAudioIntoLibrary",void 0),Object(k["__decorate"])([Zl.Getter],Jl.prototype,"resourcesByUuidOnActiveFlow",void 0),Object(k["__decorate"])([Zl.Getter],Jl.prototype,"activeFlow",void 0),Object(k["__decorate"])([Zl.Action],Jl.prototype,"resource_setOrCreateValueModeSpecific",void 0),Object(k["__decorate"])([Xl.Getter],Jl.prototype,"isEditable",void 0),Jl=Object(k["__decorate"])([Object(E["a"])({})],Jl);var Yl=Jl,Ql=Yl,ed=(o("33da"),Object(M["a"])(Ql,Ul,Hl,!1,null,"74b1a524",null)),td=ed.exports,od=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.resource?t("div",{staticClass:"per-language-resource-editor-row d-flex flex-column"},e._l(e.modes,(function(o){return t("div",{key:o,staticClass:"mbx-4"},[t("header",{staticClass:"d-flex mb-2"},[e.iconsMap.get(o)?t("font-awesome-icon",{class:{"custom-icons":"fac"===e.iconsMap.get(o)[0],"library-icons":"fac"!==e.iconsMap.get(o)[0]},attrs:{icon:e.iconsMap.get(o)}}):e._e(),t("h6",{staticClass:"ml-3 mb-0 align-self-center"},[e._v(" "+e._s(e._f("trans")(`flow-builder.${o.toLowerCase()}-content`))+" ")])],1),e._l(e.discoverContentTypesFor(o),(function(i){return t("resource-editor-cell",{key:i,attrs:{block:e.block,"content-type":i,"language-id":e.languageId,mode:o}})}))],2)})),0):e._e()},id=[];const ad=Object(se["e"])("flow");Object(se["e"])("builder");let sd=class extends(Object(x["c"])(Kl,Jc,pc["a"],B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"block",void 0),Object(m["a"])(this,"languageId",void 0),Object(m["a"])(this,"iconsMap",new Map([[X["SupportedMode"].SMS,["fac","message"]],[X["SupportedMode"].TEXT,["fac","text"]],[X["SupportedMode"].USSD,["fac","ussd"]],[X["SupportedMode"].IVR,["fac","audio"]],[X["SupportedMode"].RICH_MESSAGING,["far","comment-dots"]],[X["SupportedMode"].OFFLINE,["fas","mobile-alt"]]])),Object(m["a"])(this,"discoverContentTypesFor",io["b"]),Object(m["a"])(this,"resourcesByUuidOnActiveFlow",void 0),Object(m["a"])(this,"activeFlow",void 0)}get resource(){return this.resourcesByUuidOnActiveFlow[this.block.config.prompt]}get modes(){return Object(Jn["e"])(this.activeFlow.supported_modes)}};Object(k["__decorate"])([Object(E["b"])({required:!0})],sd.prototype,"block",void 0),Object(k["__decorate"])([Object(E["b"])({required:!0})],sd.prototype,"languageId",void 0),Object(k["__decorate"])([ad.Getter],sd.prototype,"resourcesByUuidOnActiveFlow",void 0),Object(k["__decorate"])([ad.Getter],sd.prototype,"activeFlow",void 0),sd=Object(k["__decorate"])([Object(E["a"])({})],sd);var rd=sd,nd=rd,cd=(o("ef1c"),Object(M["a"])(nd,od,id,!1,null,"31b1520d",null)),ld=cd.exports,dd=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.resource?t("div",{staticClass:"per-mode-resource-editor-row d-flex flex-wrap"},e._l(e.languages,(function({id:o,label:i}){return t("div",{key:o,staticClass:"col-3"},[t("header",{staticClass:"d-flex"},[t("div",{staticClass:"mr-auto"},[e._v(" "+e._s(i||e.trans("flow-builder.unknown-language"))+" ")])]),e._l(e.discoverContentTypesFor(e.mode),(function(i){return t("resource-editor-cell",{key:i,attrs:{block:e.block,"content-type":i,"language-id":o,mode:e.mode},on:{change:function(t){return e.$emit("change")}}})}))],2)})),0):e._e()},ud=[];const bd=Object(se["e"])("flow");Object(se["e"])("builder");let pd=class extends(Object(x["c"])(Kl,Jc,pc["a"],B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"block",void 0),Object(m["a"])(this,"mode",void 0),Object(m["a"])(this,"discoverContentTypesFor",io["b"]),Object(m["a"])(this,"resourcesByUuidOnActiveFlow",void 0),Object(m["a"])(this,"activeFlow",void 0)}get resource(){return this.resourcesByUuidOnActiveFlow[this.block.config.prompt]}get languages(){var e;return Object(Jn["d"])(null!==(e=this.activeFlow.languages)&&void 0!==e?e:[])}};Object(k["__decorate"])([Object(E["b"])({required:!0})],pd.prototype,"block",void 0),Object(k["__decorate"])([Object(E["b"])({required:!0})],pd.prototype,"mode",void 0),Object(k["__decorate"])([bd.Getter],pd.prototype,"resourcesByUuidOnActiveFlow",void 0),Object(k["__decorate"])([bd.Getter],pd.prototype,"activeFlow",void 0),pd=Object(k["__decorate"])([Object(E["a"])({})],pd);var hd=pd,fd=hd,vd=Object(M["a"])(fd,dd,ud,!1,null,null,null),_d=vd.exports,gd=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.languages.length>0?t("div",{staticClass:"per-language-resource-editor"},[t("div",[t("b-tabs",e._l(e.languages,(function({id:o,label:i}){return t("b-tab",{key:o,attrs:{title:e._f("trans")(i||"flow-builder.unknown-language")}},[t("per-language-resource-editor-row",{staticClass:"tab-content-style",attrs:{block:e.block,"language-id":o}})],1)})),1)],1)]):e._e()},md=[],kd=o("700c");h["default"].use(kd["a"]);const jd=Object(se["e"])("flow");let Od=class extends(Object(x["c"])(Kl,Jc,pc["a"],B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"block",void 0),Object(m["a"])(this,"activeFlow",void 0)}get languages(){var e;return Object(Jn["d"])(null!==(e=this.activeFlow.languages)&&void 0!==e?e:[])}};Object(k["__decorate"])([Object(E["b"])({required:!0})],Od.prototype,"block",void 0),Object(k["__decorate"])([jd.Getter],Od.prototype,"activeFlow",void 0),Od=Object(k["__decorate"])([Object(E["a"])({})],Od);var yd=Od,wd=yd,Cd=(o("5e2b"),Object(M["a"])(wd,gd,md,!1,null,"2c7ea92b",null)),xd=Cd.exports,Ed=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.modes.length>0?t("div",{staticClass:"per-mode-resource-editor"},[t("div",{staticClass:"d-flex flex-column"},e._l(e.modes,(function(o,i){return t("div",{key:o,staticClass:"resource-panel",class:{"radius-on-top":0===i,"radius-on-bottom":i===e.modes.length-1}},[t("div",{staticClass:"resource-panel-heading p-2 d-flex align-items-center",class:{"radius-on-top":0===i,"radius-on-bottom":i===e.modes.length-1},on:{click:function(t){return e.updateIsPanelExpanded(`${e.block.uuid}-${o}`)}}},[t("div",{staticClass:"mr-auto"},[t("header",{staticClass:"d-flex channel-name"},[e.iconsMap.get(o)?t("font-awesome-icon",{staticClass:"ml-3",class:{"custom-icons":"fac"===e.iconsMap.get(o)[0],"library-icons":"fac"!==e.iconsMap.get(o)[0]},attrs:{icon:e.iconsMap.get(o),size:"lg"}}):e._e(),t("h6",{staticClass:"ml-3 align-self-center mb-0"},[e._v(" "+e._s(e._f("trans")(`flow-builder.${o.toLowerCase()}-content`))+" ")])],1)]),t("div",{staticClass:"ml-auto"},[e._t("right",null,{mode:o}),t("font-awesome-icon",{staticClass:"cursor-pointer text-primary align-self-center",attrs:{icon:["fas",!0===e.isPanelExpanded[`${e.block.uuid}-${o}`]?"angle-up":"angle-down"]}})],2)]),t("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.isPanelExpanded[`${e.block.uuid}-${o}`],expression:"isPanelExpanded[`${block.uuid}-${mode}`] === true"}],staticClass:"resource-panel-body p-2 collapse multi-collapse show",attrs:{id:`collapse-lang-panel-${e.block.uuid}-${o}`}},[t("per-mode-resource-editor-row",{attrs:{block:e.block,mode:o},on:{change:function(t){return e.$emit("change")}}})],1)])})),0)]):e._e()},Bd=[];const Id=Object(se["e"])("flow");let Sd=class extends(Object(x["c"])(Kl,Jc,pc["a"],B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"block",void 0),Object(m["a"])(this,"openResources",void 0),Object(m["a"])(this,"activeFlow",void 0),Object(m["a"])(this,"iconsMap",new Map([[X["SupportedMode"].SMS,["fac","message"]],[X["SupportedMode"].TEXT,["fac","text"]],[X["SupportedMode"].USSD,["fac","ussd"]],[X["SupportedMode"].IVR,["fac","audio"]],[X["SupportedMode"].RICH_MESSAGING,["far","comment-dots"]],[X["SupportedMode"].OFFLINE,["fas","mobile-alt"]]])),Object(m["a"])(this,"expandedPanels",{}),Object(m["a"])(this,"expandedPanelsOverridden",{})}get modes(){return Object(Jn["e"])(this.activeFlow.supported_modes)}get hasOpenPanelsOverridden(){return void 0===this.openResources||this.openResources.length>0}overrideOpenResources(e){this.expandedPanelsOverridden=void 0!==e?e.reduce((e,t)=>({...e,[t]:!0}),{}):{}}get isPanelExpanded(){return this.hasOpenPanelsOverridden?this.expandedPanelsOverridden:this.expandedPanels}updateIsPanelExpanded(e){this.hasOpenPanelsOverridden?this.expandedPanelsOverridden={...this.expandedPanelsOverridden,[e]:!this.expandedPanelsOverridden[e]}:this.expandedPanels={...this.expandedPanels,[e]:!this.expandedPanels[e]}}};Object(k["__decorate"])([Object(E["b"])({required:!0})],Sd.prototype,"block",void 0),Object(k["__decorate"])([Object(E["b"])({})],Sd.prototype,"openResources",void 0),Object(k["__decorate"])([Id.Getter],Sd.prototype,"activeFlow",void 0),Object(k["__decorate"])([Object(E["d"])("openResources")],Sd.prototype,"overrideOpenResources",null),Sd=Object(k["__decorate"])([Object(E["a"])({})],Sd);var Pd=Sd,Md=Pd,Fd=(o("e034"),Object(M["a"])(Md,Ed,Bd,!1,null,"6f3509c8",null)),Td=Fd.exports,Ad=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("validation-message",{attrs:{"message-key":`resource/${e.resourceId}/values/${e.index}/value`},scopedSlots:e._u([{key:"input-control",fn:function({isValid:o}){return[t("div",{staticClass:"resource-variant-text-editor mb-0"},[t("expression-input",{ref:"input",staticClass:"mb-0",attrs:{label:e.label,"prepend-text":e.prependText,placeholder:e._f("trans")(e.placeholder||`flow-builder.enter-${e.resourceVariant.modes[0].replace("_","-").toLowerCase()}-content`),"current-expression":e.content,rows:e.rows,"valid-state":o,"disabled-auto-complete":e.disabledAutoComplete},on:{commitExpressionChange:e.commitExpressionChange}})],1)]}}])})},Vd=[];const Rd=Object(se["e"])("flow");let Ld=class extends(Object(x["c"])(B["a"])){constructor(...e){super(...e),Object(m["a"])(this,"index",void 0),Object(m["a"])(this,"resourceId",void 0),Object(m["a"])(this,"label",void 0),Object(m["a"])(this,"prependText",void 0),Object(m["a"])(this,"placeholder",void 0),Object(m["a"])(this,"resourceVariant",void 0),Object(m["a"])(this,"mode",void 0),Object(m["a"])(this,"rows",void 0),Object(m["a"])(this,"disabledAutoComplete",void 0),Object(m["a"])(this,"resource_setOrCreateValueModeSpecific",void 0)}get content(){return this.resourceVariant.value}commitExpressionChange(e){const{resourceId:t,mode:o,resourceVariant:i}=this,{language_id:a,content_type:s,mime_type:r}=i,n={language_id:a,content_type:s,modes:[o]};void 0!==r&&(n.mime_type=r),this.$emit("beforeResourceVariantChanged",{variant:i,resourceId:t,value:e}),this.resource_setOrCreateValueModeSpecific({resourceId:t,filter:n,value:e}),this.$emit("afterResourceVariantChanged",{variant:i,resourceId:t,value:e})}};Object(k["__decorate"])([Object(E["b"])({default:null})],Ld.prototype,"index",void 0),Object(k["__decorate"])([Object(E["b"])()],Ld.prototype,"resourceId",void 0),Object(k["__decorate"])([Object(E["b"])({default:""})],Ld.prototype,"label",void 0),Object(k["__decorate"])([Object(E["b"])({type:String,default:""})],Ld.prototype,"prependText",void 0),Object(k["__decorate"])([Object(E["b"])()],Ld.prototype,"placeholder",void 0),Object(k["__decorate"])([Object(E["b"])()],Ld.prototype,"resourceVariant",void 0),Object(k["__decorate"])([Object(E["b"])()],Ld.prototype,"mode",void 0),Object(k["__decorate"])([Object(E["b"])({default:2})],Ld.prototype,"rows",void 0),Object(k["__decorate"])([Object(E["b"])({type:Boolean,default:!1})],Ld.prototype,"disabledAutoComplete",void 0),Object(k["__decorate"])([Rd.Action],Ld.prototype,"resource_setOrCreateValueModeSpecific",void 0),Ld=Object(k["__decorate"])([Object(E["a"])({components:{ExpressionInput:xe}})],Ld);var Dd=Ld,Nd=Dd,$d=Object(M["a"])(Nd,Ad,Vd,!1,null,null,null),Ud=($d.exports,function(){var e=this,t=e._self._c;return t("div",{staticClass:"resource-viewer-block border p-2"},[t("div",{staticClass:"block-header-1 d-flex"},[t("div",{staticClass:"mr-auto text-primary"},[t("h5",[e._v(e._s(e.blockLabel))])]),t("div",{staticClass:"ml-auto"},[t("h6",[e._v(e._s(e.trans("flow-builder."+e.block.type).toUpperCase()))])])]),t("div",{staticClass:"block-content"},[t("fieldset",{attrs:{disabled:!e.isEditable}},[t("div",{staticClass:"d-flex flex-wrap"},[t("simplified-name-editor",{staticClass:"col-lg-3 col-sm-6 col-xs-12 p-0",attrs:{block:e.block},on:{change:function(t){return e.$emit("change")}}}),e.hasContent?e._e():t("div",{staticClass:"col-lg-3 col-sm-6 col-xs-12 pl-1 mb-3"},[t("div",{staticClass:"badge badge-info"},[e._v(e._s(e.trans("flow-builder.no-content-block-info")))])]),e._t("tags",null,{block:e.block})],2),e.hasContent?t("div",[t("per-mode-resource-editor",{attrs:{block:e.block},on:{change:function(t){return e.$emit("change")}}})],1):e._e()])])])}),Hd=[],Wd={name:"ResourceViewerBlock",props:{block:Object},mixins:[B["b"]],computed:{...Object(f["c"])("flow",["block_classesConfig"]),...Object(f["c"])("builder",["isEditable"]),blockLabel(){return this.block.label>""?this.block.label:B["b"].trans("flow-builder.untitled-block")},hasContent(){return!0===this.block_classesConfig[this.block.type].is_interactive}}},zd=Wd,Gd=(o("fef6"),Object(M["a"])(zd,Ud,Hd,!1,null,"35856325",null)),qd=Gd.exports;function Kd(e={}){const t={...i,...a,...r,...s,...n,...c,...l,...d,...u,...b,...p,...e};return Object.entries(t).forEach(([e,t])=>{h["default"].component(e,t)}),t}o("0402");var Zd=o("6c42"),Xd=o("ab8b"),Jd=o("8c4f");const Yd=[{path:"/",component:()=>o.e("chunk-builder").then(o.bind(null,"bb51"))},{path:"/flows/new",component:()=>o.e("chunk-builder").then(o.bind(null,"e0f6"))},{path:"/flows/import",component:()=>o.e("chunk-builder").then(o.bind(null,"7d8c"))},{path:"/flows/:uuid",props:e=>({uuid:e.params.uuid}),component:()=>o.e("chunk-builder").then(o.bind(null,"8cba"))},{path:"/flows/:id/:component/:mode",name:"flow-canvas",props:e=>({id:e.params.id,mode:e.params.mode,mainComponent:e.params.component}),component:()=>o.e("chunk-builder").then(o.bind(null,"e7f0")),children:[{path:"details",name:"flow-details",meta:{isFlowEditorShown:!0}},{path:"block/:blockId",name:"block-selected",props:e=>({blockId:e.params.blockId}),children:[{path:"details",name:"block-selected-details",meta:{isBlockEditorShown:!0}},{path:":field",name:"block-scroll-to-anchor",meta:{isBlockEditorShown:!0}}]}]},{path:"*",redirect:"/"}];var Qd=o("bc78");h["default"].use(Jd["a"]);const eu=[...Yd],tu=new Jd["a"]({mode:"history",base:"/",scrollBehavior:Qd["a"],routes:eu});var ou=tu,iu=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},au=[],su={},ru=Object(M["a"])(su,iu,au,!1,null,null,null),nu=ru.exports;o("da96");Kd(),h["default"].use(f["a"]);const cu={position:Xd["a"].TOP_RIGHT,draggable:!0,draggablePercent:.6,closeOnClick:!1,timeout:!1};h["default"].use(Zd["a"],cu),h["default"].config.productionTip=!1;const lu=new f["a"].Store({});async function du(){new h["default"]({router:ou,store:lu,provide:{store:lu},render:e=>e(h["default"].extend(nu))}).$mount("#app")}du()},cf2c:function(e,t,o){"use strict";o.r(t),o.d(t,"Core_CaseBlock",(function(){return k})),o.d(t,"install",(function(){return O}));var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"core-case-block"},[t("base-block",{attrs:{block:e.block,"show-semantic-label":!1,"uses-default-contact-props-editor":e.usesDefaultContactPropsEditor,"uses-default-branching-editor":e.usesDefaultBranchingEditor}},[e._t("description",null,{slot:"description"}),e._t("resource-editors",null,{slot:"resource-editors"}),e._t("extras",null,{slot:"extras"}),e._t("vendor-extras",null,{slot:"vendor-extras"}),e._t("branching",(function(){return[t("block-output-branching-config",{attrs:{block:e.block,"has-exit-per-choice":!1,"has-unified-exit":!1}})]}),{slot:"branching"}),e._t("contact-props",null,{slot:"contact-props"}),e._t("vendor",null,{slot:"vendor"})],2)],1)},a=[],s=o("2fe6"),r=o("9ab4"),n=o("4bb5"),c=o("1b40"),l=o("2ef0"),d=o("963c"),u=o("4004");const b="Core.Case",p={...u["a"],async createWith({getters:e,dispatch:t},{props:o}){return o.type=b,o.vendor_metadata={floip:{ui_metadata:{branching_type:d["a"].ADVANCED}}},u["a"].createWith({getters:e,dispatch:t},{props:o})}},h={...Object(l["cloneDeep"])(u["b"]),actions:p};var f=h,v=o("4a51"),_=o("af98"),g=o("2fe1");Object(n["e"])("flow/"+b);const m=Object(n["e"])("builder");let k=class extends(Object(g["c"])(v["a"])){constructor(...e){super(...e),Object(s["a"])(this,"block",void 0),Object(s["a"])(this,"usesDefaultBranchingEditor",void 0),Object(s["a"])(this,"usesDefaultContactPropsEditor",void 0),Object(s["a"])(this,"isEditable",void 0)}get exits(){return this.block.exits}};Object(r["__decorate"])([Object(c["b"])()],k.prototype,"block",void 0),Object(r["__decorate"])([Object(c["b"])({default:!0})],k.prototype,"usesDefaultBranchingEditor",void 0),Object(r["__decorate"])([Object(c["b"])({default:!1})],k.prototype,"usesDefaultContactPropsEditor",void 0),Object(r["__decorate"])([m.Getter],k.prototype,"isEditable",void 0),k=Object(r["__decorate"])([Object(c["a"])({})],k);var j=k;const O=Object(_["c"])(b,f);var y=j,w=o("2877"),C=Object(w["a"])(y,i,a,!1,null,null,null);t["default"]=C.exports},d14e:function(e,t,o){},d39e:function(e,t,o){"use strict";o.d(t,"b",(function(){return b}));var i=o("2fe6"),a=o("9ab4"),s=o("a026"),r=o("2ef0"),n=o("2fe1"),c=o("4bb5");const l=/(\/){(.*?)(\?)?}/g,d=e=>{throw new Error("InvalidContextError - Missing param: "+e)};function u(e,t){if(!t)return null;e=e||{};const{path:o,params:i}=t,a=Object(r["isEmpty"])(i);return a?o:o.replace(l,(t,o="",i,a)=>{const s=i.trim(),r=!(s in e);return r&&!a&&d(s),r&&a?"":`${o}${e[s]}`})}function b(e,t,o){return u(t,Object(r["get"])(o,e))}let p=class extends s["default"]{constructor(...e){super(...e),Object(i["a"])(this,"routes",void 0)}route(e,t){return b(e,t,this.routes)}};Object(a["__decorate"])([Object(c["d"])(e=>e.trees.ui.routes)],p.prototype,"routes",void 0),p=Object(a["__decorate"])([n["b"]],p),t["a"]=p},d3a4:function(e,t,o){"use strict";o.d(t,"b",(function(){return T})),o.d(t,"a",(function(){return E}));var i=o("a026"),a=o("9300"),s=o("2ef0"),r=(o("ad9d"),o("ebd9")),n=o.n(r),c=o("1401"),l=o.n(c),d=o("14d3"),u=o("4a51");const b=["additionalProperties","required"],p=new u["a"],h=new Map;function f(e,t=""){const o=new n.a({allErrors:!0});if(l()(o),o.addFormat("floip-expression",{type:"string",validate:e=>{try{Object(d["parse"])(e)}catch(t){return!1}return!0}}),""===t)return o.compile(e);let i=o.getSchema(t);if(i||(o.addSchema(e),i=o.getSchema(t)),!i)throw new Error(`Cannot find definition ${t} in schema ${e}`);return i}function v(e,t){null!=e?console.debug("store/validation:",t," | isValid:",e.isValid," | error dataPaths:",""+(Object.prototype.hasOwnProperty.call(e,"ajvErrors")&&e.ajvErrors?e.ajvErrors.map(e=>Object(s["get"])(e,"dataPath","undefined")).join(";"):"undefined")," | error messages:",""+(Object.prototype.hasOwnProperty.call(e,"ajvErrors")&&e.ajvErrors?e.ajvErrors.map(e=>Object(s["get"])(e,"message","undefined")).join(";"):"undefined")," | error details:",e):console.debug("store/validation:","the status in debugValidationStatus was undefined")}function _(e,t){var o;const[i]=e.split("/");let a;var s;void 0!==(null===(o=t.params)||void 0===o?void 0:o.missingProperty)?a=`${t.dataPath}-${null===(s=t.params)||void 0===s?void 0:s.missingProperty}`:a=t.dataPath;return a=a.replaceAll("/","-").replaceAll(/\d+/g,"x").replace(/^-/,""),`flow-builder-validation.${i}-${a}-${t.keyword}`}function g(e,t){var o;const i="format"===t.keyword,a="floip-expression"===(null===(o=t.params)||void 0===o?void 0:o.format);return i&&a?"flow-builder-validation.floip-format":_(e,t)}function m(e,t){const o="string"===typeof t.keyword,i="string"===typeof t.message&&t.message.length>0;if(!o){if(i)return t.message;throw new Error("Malformed AJV error object: no keyword or message; "+JSON.stringify(t))}const a=g(e,t),s=p.trans(a).replace(/({([^}]+)})/g,(e,o,i)=>t.params[i]||""),r=s!==a;var n;return r?s:(console.warn("Error message not localized: "+a,{dataPath:t.dataPath,keyword:t.keyword,message:t.message,params:t.params,schemaPath:t.schemaPath}),null!==(n=t.message)&&void 0!==n?n:"")}function k(e,t){return void 0===t||null===t?null:t.map(t=>({...t,message:m(e,t)}))}function j(e,t){return Array.isArray(t)?t.map(({message:e,dataPath:t})=>{const o={message:p.trans("flow-builder-validation."+e),keyword:"backend",dataPath:t,schemaPath:t,params:{}};return o}):(console.debug("getLocalizedBackendErrors","returning null as blockErrors is not an array",t),null)}function O({keyPrefix:e,errors:t,accumulator:o}){null===t||void 0===t||t.forEach(t=>{let i="",a="";b.includes(t.keyword)?(i=`${e}${t.schemaPath}`,a=`${t.message}, for params ${JSON.stringify(t.params)}`,console.warn("store/validation:",`Schema issue found on ${i}: ${a}`)):(i=`${e}${t.dataPath}`,a=t.message),o[i]=a})}function y(e){const t="flow";if(Object(s["isEmpty"])(h)||!h.has(t)){const i=o("34c1")(`./${e}/flowSpecJsonSchema.json`);i.definitions.IFlow.additionalProperties=!0,delete i.definitions.IFlow.properties.blocks,delete i.definitions.IFlow.properties.resources,h.set(t,f(i,"#/definitions/IFlow"))}return h.get(t)}function w(e){const t="container_import";if(Object(s["isEmpty"])(h)||!h.has(t)){const i=o("34c1")(`./${e}/flowSpecJsonSchema.json`);h.set(t,f(i,"#/definitions/IContainer"))}return h.get(t)}function C(e){const t="language";if(Object(s["isEmpty"])(h)||!h.has(t)){const i=o("34c1")(`./${e}/flowSpecJsonSchema.json`);h.set(t,f(i,"#/definitions/ILanguage"))}return h.get(t)}function x(e){const t="resource";if(Object(s["isEmpty"])(h)||!h.has(t)){const i=o("34c1")(`./${e}/flowSpecJsonSchema.json`);h.set(t,f(i,"#/definitions/IResource"))}return h.get(t)}function E({block:e,schemaVersion:t,customBlockJsonSchema:i}){let a=null;if(Object(s["isEmpty"])(h)||!h.has(e.type)){const s=e.type.split(".")[e.type.split(".").length-1];let n;try{null==i?(n=o("0de0")(`./${t}/I${s}Block.json`),a=f(n)):a=f(i)}catch(r){if("MODULE_NOT_FOUND"!==r.code)throw r;console.warn(`A Specific Validator for the ${s}Block could not be found. Falling back the generic Block validator for `+t),n=o("34c1")(`./${t}/flowSpecJsonSchema.json`),a=f(n,"#/definitions/IBlock")}h.set(e.type,a)}else a=h.get(e.type);return{isValid:a(e),ajvErrors:a.errors,type:e.type,label:e.label,context:{resourceUuid:Object(s["get"])(e,"config.prompt")}}}function B(e){var t,o;const i=null===(t=/^\/values\/(?<index>\d+)/.exec(e))||void 0===t||null===(o=t.groups)||void 0===o?void 0:o.index;if(void 0!==i)return Number(i)}function I(e){return void 0!==e}const S=()=>({validationStatuses:{}}),P={flattenErrorMessages(e){const t={};return Object(s["forIn"])(e.validationStatuses,(e,o)=>{var i,a;void 0!==(null===(i=e.context)||void 0===i?void 0:i.isOrphanResource)&&!0===(null===(a=e.context)||void 0===a?void 0:a.isOrphanResource)||O({keyPrefix:o,errors:e.ajvErrors,accumulator:t})}),t},choiceMimeType(){return"text/plain;choice=true"}},M={removeValidationStatusesFor(e,{key:t}){i["default"].delete(e.validationStatuses,t)},resetValidationStatuses(e,{key:t}){i["default"].set(e.validationStatuses,t,{ajvErrors:void 0}),i["default"].set(e.validationStatuses[t],"ajvErrors",[])},pushAjvErrorToValidationStatuses(e,{key:t,ajvError:o}){var a;null==(null===(a=e.validationStatuses[t])||void 0===a?void 0:a.ajvErrors)&&(i["default"].set(e.validationStatuses,t,{ajvErrors:void 0}),i["default"].set(e.validationStatuses[t],"ajvErrors",[])),e.validationStatuses[t].ajvErrors.push(o)}},F={async validate_block({state:e,commit:t,rootGetters:o,dispatch:a},{block:s}){const r=o["flow/activeFlowContainer"].specification_version,n=await a(`flow/${s.type}/validate`,{block:s,schemaVersion:r},{root:!0}),c="block/"+s.uuid;return i["default"].set(e.validationStatuses,c,{...n,ajvErrors:k(c,n.ajvErrors)}),null===n.ajvErrors&&t("removeValidationStatusesFor",{key:c}),a("cleanBackendAjvErrorsBasedOnFrontend",{type:"block",id:s.uuid,frontendAjvErrors:n.ajvErrors}),v(e.validationStatuses[c],"validation status for "+c),e.validationStatuses[c]},async validate_allBlocksFromBackend({dispatch:e}){await e("validate_fromBackend",{type:"block"}),await e("validate_fromBackend",{type:"resource"})},async validate_fromBackend({state:e,rootGetters:t,commit:o},{type:a}){var r,n,c,l;Object.keys(e.validationStatuses).forEach(e=>{e.startsWith("backend/"+a)&&o("removeValidationStatusesFor",{key:e})});const d=Object(s["get"])(null===(r=t["flow/activeFlow"])||void 0===r||null===(n=r.vendor_metadata)||void 0===n||null===(c=n.floip)||void 0===c||null===(l=c.ui_metadata)||void 0===l?void 0:l.validation_results,a+"s",{}),u=t["flow/orphanResourceUuidsOnActiveFlow"];Object.keys(d).forEach(t=>{const o=`backend/${a}/${t}`,r=`${a}/${t}`,n=d[t],c=Object(s["get"])(e.validationStatuses,r,{}),l=Object(s["map"])(null===c||void 0===c?void 0:c.ajvErrors,"dataPath"),b=Object(s["uniqBy"])(n,"dataPath").filter(({dataPath:e})=>!l.includes(e));i["default"].set(e.validationStatuses,o,{isValid:void 0===b||0===b.length,ajvErrors:j(o,b),context:{isOrphanResource:u.includes(t)}}),v(e.validationStatuses[o],a+" validation based on backend action")})},async cleanBackendAjvErrorsBasedOnFrontend({state:e,rootGetters:t,commit:o},{type:a,id:r,frontendAjvErrors:n}){var c;if(Object(s["isEmpty"])(n))return;const l=`backend/${a}/${r}`,d=Object(s["get"])(e.validationStatuses,l,{});if(Object(s["isEmpty"])(d)||Object(s["isEmpty"])(null===d||void 0===d?void 0:d.ajvErrors))return;const u=Object(s["map"])(n,"dataPath"),b={...d,ajvErrors:null===(c=d.ajvErrors)||void 0===c?void 0:c.filter(({dataPath:e})=>!u.includes(e))};i["default"].set(e.validationStatuses,l,b)},async validate_allBlocksWithinFlow({rootGetters:e,dispatch:t}){await Promise.all(e["flow/activeFlow"].blocks.map(async e=>{await t("validate_block",{block:e})}))},async validate_flow({state:e,rootGetters:t},{flow:o}){const a=y(t["flow/activeFlowContainer"].specification_version),s="flow/"+o.uuid;return i["default"].set(e.validationStatuses,s,{isValid:a(o),ajvErrors:k(s,a.errors),type:"flow"}),v(e.validationStatuses[s],"flow validation status"),e.validationStatuses[s]},async validate_containerImport({state:e,commit:t,dispatch:o,rootGetters:a},{flowContainer:s}){const r="container_import",n=w(a["flow/activeFlowContainer"].specification_version);return i["default"].set(e.validationStatuses,r,{isValid:n(s),ajvErrors:k(r,n.errors),type:"container_import"}),v(e.validationStatuses[r],"flow container validation status"),e.validationStatuses[r]},async validate_new_language({state:e,rootGetters:t},{language:o}){const a=C(t["flow/activeFlowContainer"].specification_version),s="language/new_language";return i["default"].set(e.validationStatuses,s,{isValid:a(o),ajvErrors:a.errors}),v(e.validationStatuses[s],"language validation status"),e.validationStatuses[s]},validation_removeNewLanguageValidation({state:e}){const t="language/new_language";i["default"].delete(e.validationStatuses,t)},async validate_resource({state:e,rootGetters:t,dispatch:o},{resource:a}){var s;const r=x(t["flow/activeFlowContainer"].specification_version),n="resource/"+a.uuid,c=r(a);null===(s=r.errors)||void 0===s||s.forEach(e=>{if("pattern"===e.keyword){const t=B(e.dataPath);if(void 0!==t){const{content_type:o}=a.values[t];"AUDIO"===o&&(e.keyword="pattern-ivr")}}});const l=t["flow/orphanResourceUuidsOnActiveFlow"];return i["default"].set(e.validationStatuses,n,{isValid:c,ajvErrors:k(n,r.errors),type:"resource",context:{isOrphanResource:l.includes(a.uuid)},invalidCounterBy:await o("computeInvalidResourcesBy",{errors:r.errors,resource:a})}),o("cleanBackendAjvErrorsBasedOnFrontend",{type:"resource",id:a.uuid,frontendAjvErrors:r.errors}),v(e.validationStatuses[n],"resource validation status"),e.validationStatuses[n]},async validate_resourcesOnSupportedValues({dispatch:e,getters:t},{resources:o,supportedModes:i,supportedLanguages:r}){if(!o)return;const n=Object(s["map"])(o,e=>{const o=Object(s["cloneDeep"])(e);return o.values=Object(s["filter"])(e.values,e=>{const o=Object(s["includes"])(Object(s["map"])(r,"id"),e.language_id),n=e.mime_type===t.choiceMimeType,c=!Object(s["isEmpty"])(Object(s["intersection"])(i,e.modes)),l=Object(s["includes"])([a["SupportedContentType"].TEXT,a["SupportedContentType"].AUDIO],e.content_type);return n||o&&c&&l}),o});await Promise.all(Object(s["each"])(n,async t=>{await e("validate_resource",{resource:t})}))},resetValidationStatuses({commit:e},{key:t}){e("resetValidationStatuses",{key:t})},async computeInvalidResourcesBy({getters:e,rootGetters:t},{errors:o,resource:i}){const a={},r={},n=t["flow/activeFlow"],c=n.languages.map(e=>e.id),l=n.supported_modes;return null===o||void 0===o||o.map(e=>B(e.dataPath)).filter(I).map(e=>i.values[e]).filter(t=>t.mime_type!==e.choiceMimeType).forEach(e=>{const t=e.language_id,o=e.modes[0];c.includes(t)&&l.includes(o)?(Object(s["update"])(a,o,e=>e?e+1:1),Object(s["update"])(r,t,e=>e?e+1:1)):console.warn("A resource variant exists that has unsupported mode or language:",e)}),{mode:a,languageId:r}}},T={namespaced:!0,state:S,getters:P,mutations:M,actions:F}},e034:function(e,t,o){"use strict";o("27d6")},e131:function(e,t,o){"use strict";o("a56a")},e569:function(e,t,o){"use strict";o("0b1e")},e955:function(e,t,o){},ecef:function(e,t,o){"use strict";o.d(t,"a",(function(){return u}));var i=o("9300"),a=o("31aa"),s=o("a026"),r=o("2ef0"),n=o("4004"),c=o("963c"),l=o("8562"),d=o("b85b");const u="MobilePrimitives.SelectOneResponse",b={...n["c"],...l["c"]},p={...n["d"],...l["d"]},h={...n["a"],...l["b"],addChoiceByResourceIdTo({rootGetters:e},{blockId:t,resourceId:o}){const a=Object(i["findBlockWith"])(t,e["flow/activeFlow"]),s=e["flow/resourcesByUuidOnActiveFlow"][o];if(null==s)throw new i["ValidationException"]("Unable to find resource for choice: "+o);const n=Object(r["find"])(a.config.choices,{prompt:s.uuid});if(void 0===n){const e=a.config.choices;e.push({prompt:s.uuid})}},deleteChoiceByResourceIdFrom({dispatch:e,rootGetters:t},{blockId:o,resourceId:a}){var n,c,l,d;const u=Object(i["findBlockWith"])(o,t["flow/activeFlow"]),b=Object(r["reject"])(u.config.choices,e=>e.prompt===a);s["default"].set(u.config,"choices",b),void 0!==(null===(n=u.vendor_metadata)||void 0===n||null===(c=n.floip)||void 0===c||null===(l=c.ui_metadata)||void 0===l||null===(d=l.set_contact_property)||void 0===d?void 0:d.property_value_mapping)&&s["default"].delete(u.vendor_metadata.floip.ui_metadata.set_contact_property.property_value_mapping,a),e("flow/block_updateContactPropertyAfterChoicesChange",{blockId:o},{root:!0})},async reflowExitsFromChoices({dispatch:e,rootGetters:t},{blockId:o}){const s=Object(i["findBlockWith"])(o,t["flow/activeFlow"]),{config:{choices:n},exits:c}=s;let l=c.slice(0,-1);await Promise.all(n.map(async(t,o)=>{if(null==l[o]){const t=await(new a["IdGeneratorUuidV4"]).generate(),o=await e("flow/block_createBlockExitWith",{props:{uuid:t}},{root:!0});l.push(o)}Object.assign(l[o],{name:t.name,test:`@block.value = '${Object(d["c"])(t.name)}'`})})),l=Object(r["reject"])(l,e=>{const t=void 0===Object(r["find"])(n,t=>t.name===e.name);return!0===t&&console.debug("removing exit named",e.name),t}),c.splice(0,c.length-1,...l)},block_setChoiceIvrExpressionOnIndex({commit:e,state:t,dispatch:o},{blockId:i,index:a,value:s}){e("flow/block_updateConfigByPath",{blockId:i,path:`choices.[${a}].ivr_test.test_expression`,value:s},{root:!0})},async createWith({getters:e,dispatch:t},{props:o}){o.type=u;const i=await t("flow/flow_addBlankResourceForEnabledModesAndLangs",null,{root:!0});return o.config={prompt:i.uuid,choices:[]},o.vendor_metadata={floip:{ui_metadata:{branching_type:c["a"].EXIT_PER_CHOICE,choices:{}}}},n["a"].createWith({getters:e,dispatch:t},{props:o})},async validateWithProgrammaticLogic(e,{block:t}){console.debug("floip/SelectOneResponse/validateWithProgrammaticLogic()",""+t.type);const o=[],i="/config/choices",a=t.config.choices.map(e=>{var t;return null===(t=e.ivr_test)||void 0===t?void 0:t.test_expression}),s=a.filter((e,t)=>void 0!==e&&a.indexOf(e)!==t);s.length>0&&o.push([i,"duplicate-ivr-test-test_expression"]);const r=t.config.choices.map(e=>e.name),n=r.filter((e,t)=>void 0!==e&&r.indexOf(e)!==t);return n.length>0&&o.push([i,"duplicate-choice-names"]),o}},f={...Object(r["cloneDeep"])(n["b"]),getters:b,mutations:p,actions:h};t["b"]=f},ef1c:function(e,t,o){"use strict";o("5ac5")},ef87:function(e,t,o){"use strict";o("bffb")},f4bd:function(e,t,o){"use strict";o("8e9c")},fef6:function(e,t,o){"use strict";o("5599")},ff9d:function(e,t,o){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"error-handler-v2"},[e.languagesMissing?t("import-matcher",{staticClass:"mt-2",attrs:{"existing-options-without-match":e.existingLanguagesWithoutMatch,"missing-matches":e.missingLanguages,"match-not-found-text":"flow-builder.match-for-languages-not-found",type:"language","type-id":"id","type-label":"label"},on:{reactToMatch:e.handleMatchLanguage}}):e._e(),e.propertiesMissing?t("import-matcher",{staticClass:"mt-2",attrs:{"existing-options-without-match":e.existingPropertiesWithoutMatch,"missing-matches":e.missingProperties,"match-not-found-text":"flow-builder.match-for-properties-not-found",type:"property","type-id":"name","type-label":"name"},on:{reactToMatch:e.handleMatchProperty}}):e._e(),e.groupsMissing?t("import-matcher",{staticClass:"mt-2",attrs:{"existing-options-without-match":e.existingGroupsWithoutMatch,"missing-matches":e.missingGroups,"match-not-found-text":"flow-builder.match-for-groups-not-found",type:"group","type-id":"id","type-label":"group_name"},on:{reactToMatch:e.handleMatchGroup}}):e._e()],1)},a=[],s=o("2f62"),r=o("4a51"),n=o("88df"),c={name:"FullImportMatcher",components:{ImportMatcher:n["b"]},mixins:[r["a"]],computed:{...Object(s["e"])("flow/import",["missingLanguages","missingProperties","missingGroups","existingLanguagesWithoutMatch","existingPropertiesWithoutMatch","existingGroupsWithoutMatch"]),...Object(s["c"])("flow/import",["languagesMissing","propertiesMissing","groupsMissing"])},methods:{...Object(s["b"])("flow/import",["matchLanguage","matchProperty","matchGroup"]),handleMatchLanguage(e,t){this.matchLanguage({oldLanguage:e,matchingNewLanguage:t})},handleMatchProperty(e,t){this.matchProperty({oldProperty:e,matchingNewProperty:t})},handleMatchGroup(e,t){this.matchGroup({oldGroup:e,matchingNewGroup:t})}}},l=c,d=o("2877"),u=Object(d["a"])(l,i,a,!1,null,"2bbce29e",null);t["a"]=u.exports}});
//# sourceMappingURL=app.6a2824d1.js.map