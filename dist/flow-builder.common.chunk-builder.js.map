{"version":3,"sources":["webpack://flow-builder/./src/components/interaction-designer/Block.vue?9f45","webpack://flow-builder/./src/components/interaction-designer/block-types lazy ^\\.\\/.*Block\\.vue$ namespace object","webpack://flow-builder/./src/store/trees/10-trees-model.js","webpack://flow-builder/./src/components/interaction-designer/flow-editors/FlowEditor.vue?e474","webpack://flow-builder/./src/components/interaction-designer/flow-editors/NameEditor.vue?dcb5","webpack://flow-builder/./src/components/interaction-designer/flow-editors/NameEditor.vue?9311","webpack://flow-builder/./src/components/interaction-designer/flow-editors/NameEditor.vue?4e0c","webpack://flow-builder/./src/components/interaction-designer/flow-editors/NameEditor.vue","webpack://flow-builder/./src/components/interaction-designer/flow-editors/LabelEditor.vue?34e8","webpack://flow-builder/./src/components/interaction-designer/flow-editors/LabelEditor.vue?85e9","webpack://flow-builder/./src/components/interaction-designer/flow-editors/LabelEditor.vue?b4d0","webpack://flow-builder/./src/components/interaction-designer/flow-editors/LabelEditor.vue","webpack://flow-builder/./src/components/interaction-designer/flow-editors/InteractionTimeoutEditor.vue?86c6","webpack://flow-builder/./src/components/interaction-designer/flow-editors/InteractionTimeoutEditor.vue?c75e","webpack://flow-builder/./src/components/interaction-designer/flow-editors/InteractionTimeoutEditor.vue?0fd3","webpack://flow-builder/./src/components/interaction-designer/flow-editors/InteractionTimeoutEditor.vue","webpack://flow-builder/./src/components/interaction-designer/flow-editors/LanguagesEditor.vue?d1e5","webpack://flow-builder/./src/components/interaction-designer/flow-editors/LanguagesEditor.vue?a587","webpack://flow-builder/./src/components/interaction-designer/flow-editors/LanguagesEditor.vue?d77a","webpack://flow-builder/./src/components/interaction-designer/flow-editors/LanguagesEditor.vue","webpack://flow-builder/./src/components/interaction-designer/flow-editors/ModesEditor.vue?db06","webpack://flow-builder/./src/components/interaction-designer/flow-editors/ModesEditor.vue?7550","webpack://flow-builder/./src/components/interaction-designer/flow-editors/ModesEditor.vue?21fa","webpack://flow-builder/./src/components/interaction-designer/flow-editors/ModesEditor.vue","webpack://flow-builder/./src/components/interaction-designer/flow-editors/FlowEditor.vue?7cea","webpack://flow-builder/./src/components/interaction-designer/flow-editors/FlowEditor.vue?f5c7","webpack://flow-builder/./src/components/interaction-designer/flow-editors/FlowEditor.vue","webpack://flow-builder/./src/components/common/NumericEditor.vue?9471","webpack://flow-builder/src/components/common/NumericEditor.vue","webpack://flow-builder/./src/components/common/NumericEditor.vue?b00e","webpack://flow-builder/./src/components/common/NumericEditor.vue","webpack://flow-builder/./src/views/InteractionDesigner.vue?7023","webpack://flow-builder/./src/store/flow/resource.ts","webpack://flow-builder/./src/lib/filters/lang.js","webpack://flow-builder/./src/components/interaction-designer/toolbar/TreeBuilderToolbar.vue?4db6","webpack://flow-builder/./node_modules/moment/locale sync ^\\.\\/.*$","webpack://flow-builder/./src/views/InteractionDesigner.vue?bf9d","webpack://flow-builder/./src/components/interaction-designer/toolbar/TreeBuilderToolbar.vue?4d95","webpack://flow-builder/./src/store/trees/index.js","webpack://flow-builder/./src/components/interaction-designer/Block.vue?1cb5","webpack://flow-builder/./src/components/interaction-designer/BuilderCanvas.vue?95a8","webpack://flow-builder/./src/components/interaction-designer/BuilderCanvas.vue?8c9e","webpack://flow-builder/src/views/InteractionDesigner.vue","webpack://flow-builder/./src/store/common/flight-monitor.js","webpack://flow-builder/./src/store/trees/trees.js","webpack://flow-builder/./src/store/flow/block.ts","webpack://flow-builder/./src/store/flow/flow.ts","webpack://flow-builder/./src/store/flow/index.ts","webpack://flow-builder/./src/store/trees/bootstrap-legacy-global-dependencies.js","webpack://flow-builder/./src/store/builder/index.ts","webpack://flow-builder/./src/store/flow/utils/listBuilder.ts","webpack://flow-builder/./src/components/interaction-designer/BuilderCanvas.vue?9828","webpack://flow-builder/./src/components/interaction-designer/Block.vue?a33c","webpack://flow-builder/./src/components/common/PlainDraggable.vue?f99a","webpack://flow-builder/src/components/common/PlainDraggable.vue","webpack://flow-builder/./src/components/common/PlainDraggable.vue?034f","webpack://flow-builder/./src/components/common/PlainDraggable.vue","webpack://flow-builder/./src/components/interaction-designer/Connection.vue?bbb6","webpack://flow-builder/src/components/interaction-designer/Connection.vue","webpack://flow-builder/./src/components/interaction-designer/Connection.vue?5856","webpack://flow-builder/./src/components/interaction-designer/Connection.vue","webpack://flow-builder/src/components/interaction-designer/Block.vue","webpack://flow-builder/./src/components/interaction-designer/Block.vue?ad58","webpack://flow-builder/./src/components/interaction-designer/Block.vue","webpack://flow-builder/./src/components/interaction-designer/BuilderCanvas.vue?f035","webpack://flow-builder/./src/components/interaction-designer/BuilderCanvas.vue?ce72","webpack://flow-builder/./src/components/interaction-designer/BuilderCanvas.vue","webpack://flow-builder/./src/store/trees/12-trees-helpers.js","webpack://flow-builder/./src/components/common/TextEditor.vue?8b4f","webpack://flow-builder/src/components/common/TextEditor.vue","webpack://flow-builder/./src/components/common/TextEditor.vue?241d","webpack://flow-builder/./src/components/common/TextEditor.vue","webpack://flow-builder/./src/lib/mixins/Routes.js","webpack://flow-builder/./src/views/InteractionDesigner.vue?29db","webpack://flow-builder/./src/views/InteractionDesigner.vue?7ce4","webpack://flow-builder/./src/views/InteractionDesigner.vue","webpack://flow-builder/./src/components/interaction-designer/toolbar/TreeBuilderToolbar.vue?be56","webpack://flow-builder/./src/lib/mixins/Permissions.js","webpack://flow-builder/./src/store/flow/utils/DataObjectPropertyNameCaseConverter.ts","webpack://flow-builder/./src/components/interaction-designer/toolbar/TreeBuilderToolbar.vue?988d","webpack://flow-builder/./src/components/interaction-designer/toolbar/TreeBuilderToolbar.vue?9b71","webpack://flow-builder/./src/components/interaction-designer/toolbar/TreeBuilderToolbar.vue"],"names":["window","app","Tree","attrs","attributes","prototype","get","attr","toJSON","options","_","clone","defaults","id","floipSyncedAt","details","title","description","enabledLanguages","syncedLanguage","startingBlockKey","exitBlockKey","hasVoice","hasSms","hasUssd","hasSocial","hasClipboard","floipPushUrl","floipPushApiKey","blocks","connections","_defaultReviewedState","upgrade","console","debug","time","fixArrayBlocks","defaultEnabledLanguages","defaultSyncedLanguage","inflateDefaultReviewedStateOnAll","inflateDefaultTagsOnAll","inflateDefaultLabelOnAll","upgradeLanguageSelectorBlocks","inflateDefaultSocialContentOnAll","inflateDefaultClipboardContentOnAll","upgradeSubscriberPropertyFieldSelections","upgradeMsmcqBranchingToFalse","upgradeSubscriberPropertyBlocks","upgradeSubscriberBranchBlocks","timeEnd","cacheDefaultReviewedState","getEnabledLanguages","zipObject","fill","Array","length","forEach","inflateDefaultReviewedStateOnto","bind","block","customData","reviewed","approved","tags","label","filter","type","languageSelectorBlock","addExitForNoResponse","socialContent","clipboardContent","propertyFieldId","property","ui","findSubscriberPropertyField","display_label","customDataCategory","branching","uiData","numChoices","numConnections","outputNames","push","action","propertyDateMethod","startDateMethod","propertyDateAbsoluteDate","startDateAbsoluteDate","propertyDateRelativeNumber","startDateRelativeNumber","propertyDateTimespanType","startDateTimespanType","propertyDateNumericBlockKey","startDateNumericBlockKey","propertyField","name","upgradedFromStartDate","builder","$set","startDateReference","neededFixing","fixedCount","each","index","arrayKeys","key","isArray","log","change","doesBlockLabelExist","comparatorKey","chain","find","jsKey","value","addBlock","blockData","makeUniqueId","setStartingBlock","getBlockByNumericIndex","blockKey","editBlockByNumericIndex","blockNumericIndex","arrayKey","blockArrayKey","extend","set","getBlock","findWhere","editBlock","thisBlock","setBlockPosition","positionData","getBlockPosition","getBlockNumConnections","filterBlockConnectionsAboveMax","maxConnections","where","startBlockKey","e","nodeNumber","outputKey","slice","tree","removeConnection","setBlockAudioFile","languageId","audioData","isPlainObject","removeBlockAudioFile","getBlockKeys","keys","getNextBlockKey","lastKey","parseInt","last","deleteBlock","without","clearStartingBlockIfIs","clearExitBlockIfIs","handleDeleteNumericQuestionBlockAssociations","selectedBlockKey","map","newBlock","Object","assign","_getAmendmentsForNumericBranchBlock","_getAmendmentsForIdValidationBlock","outputs","reduce","newOutputs","output","newConditions","condition","newCondition","conditions","prefix","now","random","getMcqChoiceName","choiceId","choices","getBlockTitle","generateBlockTitle","limit","isNumber","treeTitles","destinationTreeId","Lang","trans","treeSetTitles","destinationTreeSetId","groupNames","groupId","displayLabel","comparator","comparatorString","languageNames","languageValue","S","truncate","s","addConnection","endBlockKey","connection","difference","addEnabledLanguage","languageKey","newEnabledLanguages","toString","intersection","pluck","languages","removeEnabledLanguage","enableVoice","disableVoice","enableSms","disableSms","enableUssd","disableUssd","enableSocial","disableSocial","enableClipboard","disableClipboard","validateLanguageAndContentTypes","missingLanguageIdsAudioFiles","missingLanguageIdsSmsContent","missingLanguageIdsUssdContent","missingLanguageIdsSocialContent","missingLanguageIdsClipboardContent","blockClasses","hasContent","audioFiles","smsContent","ussdContent","validateContent","updateFloipAlert","$","html","val","getEndBlockPosition","topOrBottom","returnBlockKey","offset","tallestYPosition","tallestBlockKey","thisYPosition","getTallestBlockPosition","getShortestBlockPosition","getTallestBlockKey","getShortestBlockKey","_blockIdPrefixMatcher","_validateNonExistentBlockReferences","keysToVerifiedMap","keysToExistsMap","validateKey","contains","conn","i","extractedKey","exec","values","_mergeAndSanitizeImportedInto","treeJson","importJson","smsAutogenLangs","ussdAutogenLangs","socialAutogenLangs","clipboardAutogenLangs","importedEnabledLanguages","validLanguages","invalidLanguages","blockContentsToReview","contentPath","content","sanitizedContent","omit","orgContentBlockTypeKeys","has","validateTreeData","json","schema","Ajv","ValidationError","message","validate","coerceTypes","compile","errors","keyword","dataPath","createJsonSchemaFor","blockTypes","proxy","args","global","apply","createProxy","arguments","filters","choice","methods","translation","modules","trees","Statuses","PENDING","UNINITIALIZED","SUCCESS","FAILURE","FlightStatusToNameMap","namespaced","state","flights","mutations","create","promise","cancellation","Vue","status","progress","error","cancel","lodash","invoke","actions","commit","dispatch","previousFlight","flight","uniqueId","response","createCancellableXhr","config","CancelToken","source","token","axios","request","paramsSerializer","p","qs","stringify","arrayFormat","cancelToken","onUploadProgress","onDownloadProgress","headers","resetStatus","cancelAll","getters","hasPendingFlight","f","every","_every","convert","cap","validationResults","Error","bootstrapLegacyGlobalDependencies","audio","__AUDIO__","__TREES_UI__","library","recording","recorders","defaultsDeep","callCenterQueues","previousTreeJson","JSON","originalTreeJson","originalValidationResults","originalTreeJsonValidationResults","selectedBlock","designerWorkspaceHeight","currentZoom","batchMatchAudio","results","isFailure","isPending","isComplete","treeUpdateConflict","enabledFeatures","isFeatureCallCenterQueuesEnabled","feature","isFeatureCallToRecordEnabled","isFeatureMultimediaUploadEnabled","isFeatureTreesBatchLinkAudioEnabled","isFeatureAddSubscriberPropertyFieldEnabled","isFeatureFloipPushEnabled","isFeatureTreeSaveEnabled","isFeatureTreeSendEnabled","isFeatureTreeDuplicateEnabled","isFeatureTreeViewVersionsEnabled","isFeatureTreeDuplicateOfEnabled","isFeatureUpdateInteractionTotalsEnabled","isFeatureAudioUploadEnabled","isFeatureViewResultsEnabled","rootState","subscriberPropertyFields","interactiveBlockClasses","pickBy","is_interactive","interactiveBlocksInTree","b","includes","isEditable","hasChanges","hasIssues","validationResultsFromPageLoad","hasSavedSinceLoad","isEmpty","isTreeSaving","saveCurrentlyInProgress","isSelectedBlockSupportedForSummary","canSelectedBlockSetSubscriberProperty","languageSelectors","isBlockAvailableByBlockClass","mapValues","blockClass","contentTypesToEnabledStatus","flow","isEnabled","contentType","startCase","isTreeValid","jsonValidationResults","treeTitle","availableAudio","treeCreatedAt","createdAt","date","treeEditedAt","editedAt","treeUpdatedAt","updatedAt","setWorkingTree","treeData","setDesignerWorkspaceHeight","height","setSelectedBlock","deselectBlocks","updateTreeDetailsWith","updateBlockCustomDataFor","updateBlockCustomDataWithNestedKeyFor","nestedKey","cloneDeep","updateBlockUiDataFor","updateMaxNumericDigits","updateBlockContentFor","langId","updateBlockFileContentFor","fileUrl","fileId","fileType","mimeType","undefined","updateBlockFileContentForAllLanguages","initBlockAutoGenStateFor","updateBlockAutoGenStateFor","enable","indexOf","absent","splice","updateAudioFileFor","updateReviewedStateFor","data","setBatchMatchAudioResultsTo","matchesByLang","flatten","updateIsEditable","setContentTypeEnabled","upperFirst","addSubscriberPropertyField","setTreeUpdateConflictStatus","setInteractionTotals","interactionTotals","initializeTreeModel","isTreeImport","require","initializeTreeModelFromOriginalTreeJson","initializeTreeModelFromImport","importTreeJson","validation","attemptImportPersistence","hasImportValidationErrors","upgradeTreeModel","discoverTallestBlockForDesignerWorkspaceHeight","buffer","aboveTallest","initialHeight","minHeight","Math","max","uiChanged","context","msg","attemptSaveTree","info","dataControl","_setValidationResultsForUI","saveTree","send","validateTree","__TREE_FEATURES__","validateFloipFlow","setDefaultBlockRepeatValues","updateTextContent","disableAutoGen","setContentFromQuestionText","generatedText","isFirst","maxDigits","grammar","EN","starter","connector","separator","conclusion","numericStart","numericEndPlural","numericEndSingular","validationCode","setBlockNumConnections","newNumConnections","isFinite","lockConnections","range","handleDragStop","setMcqOutputNames","isOutputBranchingEnabled","langJs","isNoResponseExitEnabled","setMcqSidebarFieldLabels","isMCQBlock","isVoiceEnabled","isTextChannelEnabled","hasChoiceKeypresses","choiceKeypresses","fieldLabels","getChoiceKeyPressesFor","times","constant","batchMatchAudioTriggered","treeId","pattern","replaceExisting","post","routeFrom","routes","then","matches","catch","status_description","commitAllBatchMatchAudioFiles","byLang","commitBatchMatchAudioFile","audioFile","hasSelection","isMulti","match","unchanged","dataType","filteredChoices","c","payload","fetchInteractionTotals","startDate","endDate","url","params","keypresses","__APP__","__CONTEXT__","merge","ImportedLang","setMessages","setLocale","locale","defaultLocale","moment","ImportedMoment","getLocale","jQuery","ImportedJquery","exported","fn","datetimepicker","changes","saveTimer","removeClassPrefix","blockClassName","substr","textNotification","$store","noChange","changeLock","search","outputData","treeUpdatedConflict","audioChoice","setTopUpdatesBar","requestData","done","modal","show","backdrop","validation_results","fail","tree_id","responseJSON","always","finally","exportOptionsModal","initialize","exportOptionsTemplate","template","JST","append","handleInput","focus","select","pickTime","on","currentTarget","trigger","first","open","hide","buildUrl","isApiUrl","location","protocol","host","serialize","apiKey","shareableLinkModal","shareableLinkTemplate","sendRequest","switchView","publicId","setUrl","view","requestType","errorMessage","shareableLinkSetsModal","defaultLocales","orgEnabledLanguages","is","prop","initializeLinksList","shareableLinkListTemplate","switchToDeleteView","shareableLinkHash","switchAwayFromDeleteView","shareableLinkId","listElement","hasClass","addClass","children","removeClass","setLabelValues","startDateLabel","format","endDateLabel","channelLabel","labels","channel","blocksLabel","versionFiltersEnabled","noValidDateRange","text","versionsSelected","versionsTotal","public_hash","channelFilter","includedBlocks","excludedBlocks","blockKeys","hiddenDirectorySelectionFields","lockDateRange","resultsLocale","showKeyMetrics","showBlockType","shouldShowResultsFromIncompleteEngagements","shouldOnlyShowLatestResultPerSession","shouldUseSimpleDatePicker","shouldUseCustomBlockOrdering","enabledTabs","el","tagFilter","directorySelectionFieldFilter","blockChoiceFilter","filterDisplayThreshold","toArray","memo","versions","tree_version_set_id","shareableLinks","unshift","csvExportsModal","csvExportTemplate","sendCreateRequest","setToDefault","recipeHumanReadable","recipeMachineReadable","recipeUserCustomised","getUserOptionsRecipe","fhd","fcc","vcq","vms","click","eq","queueInProgress","sendStatusRequest","ajax","success","csvExports","order","formatHeadings","cellContents","messageBlockPercent","formatMCQResponses","treeVersionIds","mergeOption","useLocalTimezone","useExcelFormat","treeVersionSetId","thenAfter5s","add","delay","duration","diff","delayInMilliseconds","asMilliseconds","firstExportInProgress","upload_status","isFunction","sendStatusRequestDebounced","debounce","blockResultsLoader","load","nextBlockKeyToLoad","loadBlock","assignButtons","parentElement","targetType","continueLoading","shareableLink","pathname","htmlOutput","chartJsHelper","createCharts","blockResultsLoaderV2","loadKeyMetrics","filterSet","viamo","keymetrics","loadDonutChart","finishedDeliveryLogCount","deliveryLogCount","completedDeliveryLogCount","uniqueSubscriberCount","firstTimeSubscriberCount","completedQuestionCount","loadAvgCallDurations","parse","responseText","keymetricName","chartNumerator","chartTotal","chartDenominator","chartDataSets","datasets","backgroundColor","hoverBackgroundColor","borderColor","updateTreeDoughnutChart","formatLargeNumber","parent","durations","durationAvg","toPrecision","completedDurationAvg","css","loadBlocksInteractionsChart","barchartLabelsTruncated","barchartLabels","totalInteractionsBarchartData","completedInteractionsBarchartData","orderedCompletedInteractionsBarchartData","totalInteractionsOrderedBarchartData","colorIndexes","orderedColorIndexes","orderedBarchartLabelsTruncated","orderedBarchartLabels","resultsData","blockResult","truncatedBlockTitle","resultIndex","colorIndex","totalInteractions","completedInteractions","colorValue","blockTitle","substring","getChartChoiceColorsArray","acc","outputKeyTotals","sortedIndex","updateTreeBlocksInteractionsChart","fullLabels","borderWidth","hidden","$buttonClicked","barchartTarget","siblings","barchartDatasetTarget","listingChart","chartObjects","popularityChart","listingDatasets","popularityDatasets","isEnteredSelected","isCompletedSelected","update","tabTarget","tabLabel","closest","chartTarget","doNormalize","targetElement","combinedVersions","rightPosition","width","right","toggle","stopPropagation","remove","input","submit","PATH_PARAM_DISCOVERER","computed","mapState","route","routeKey","interpolateRouteWith","raiseFor","path","isPathComplete","replace","m","captured","isOptional","param","trim","can","userPermissions","permissionOrPermissions","requireAll","requestedPermission","permission","permissions"],"mappings":";;;;;AAAA,uC;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,qC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1FA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;;AAEA;AACAA,MAAM,CAACC,GAAP,GAAaD,MAAM,CAACC,GAAP,IAAc,EAA3B;AAEA;;AAAC,CAAC,YAAW;AAEZ;AACA;AAEAA,KAAG,CAACC,IAAJ,GAAW,UAAUC,KAAV,EAAiB;AAC3B,SAAKC,UAAL,GAAkBD,KAAlB;AACA,GAFD;;AAIAF,KAAG,CAACC,IAAJ,CAASG,SAAT,GAAqB;AACpBC,OADoB,eAChBC,IADgB,EACV;AACT,aAAO,KAAKH,UAAL,CAAgBG,IAAhB,CAAP;AACA,KAHmB;AAKpBC,UALoB,kBAKbC,OALa,EAKJ;AACf,aAAOC,CAAC,CAACC,KAAF,CAAQ,KAAKP,UAAb,CAAP;AACA,KAPmB;AASpB;AACA;AACAQ,YAAQ,EAAE;AACTC,QAAE,EAAE,CADK;AAETC,mBAAa,EAAE,EAFN;AAGTC,aAAO,EAAE;AACRC,aAAK,EAAE,EADC;AAERC,mBAAW,EAAE,EAFL;AAGRC,wBAAgB,EAAE,EAHV;AAIJC,sBAAc,EAAE,EAJZ;AAKRC,wBAAgB,EAAE,EALV;AAMJC,oBAAY,EAAE,EANV;AAORC,gBAAQ,EAAE,CAPF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A,WAAc,CAAA1M,IAAI;AAAA,SAAI,YAAY;AACtC,WAAOsM,KAAK,CAACtM,IAAD,EAAO2M,SAAP,CAAZ;AACD,GAFuB;AAAA,CAAxB;;AAIe;AACbC,SAAO,EAAE;AACP9G,SAAK,EAAE4G,WAAW,CAAC,OAAD,CADX;AAEPG,UAAM,EAAEH,WAAW,CAAC,QAAD;AAFZ,GADI;AAKbI,SAAO,EAAE;AACPhH,SADO,iBACDiH,WADC,EACY;AACjB,aAAOP,MAAM,CAAC3G,IAAP,CAAYC,KAAZ,CAAkBiH,WAAlB,CAAP;AACD;AAHM;AALI,CAAf,E;;;;;;;;;ACPA;AAAA;AAAA;AAAijB,CAAgB,6iBAAG,EAAC,C;;;;;;;ACArkB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2B;;;;;;;AC/RA,uC;;;;;;;ACAA,uC;;;;;;;;ACAA;AAAA;AACA;AACA;AAEe;AACbC,SAAO,EAAE;AACP;AACA;AACAC,SAAK,EAALA,sDAHO,CAGA;;AAHA;AADI,CAAf,E;;;;;;;;ACJA;AAAA;AAAA;AAA+gB,CAAgB,giBAAG,EAAC,C;;;;;;;ACAniB,uC;;;;;;;;ACAA;AAAA;AAAA;AAA8e,CAAgB,0gBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC8ClgB;AACA;AACA;CAEA;AACA;AAEA;AACA;;CAEA;;AACA;CAIA;AACA;AACA;AACA;;AACA;AACA;CAGA;;AAEA;AACA,uBADA;AAGA,6EAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA,wIANA;AAOA,wHAPA;AAQA,6HARA,CASA;;AATA,GALA;AAiBA,MAjBA,kBAiBA;AACA;AACA;AACA,mCADA,EAEA,q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","file":"flow-builder.common.chunk-builder.js","sourcesContent":["// extracted by mini-css-extract-plugin","var map = {\n\t\"./ConsoleIO_PrintBlock.vue\": [\n\t\t\"d81e\",\n\t\t1,\n\t\t0,\n\t\t12\n\t],\n\t\"./ConsoleIO_ReadBlock.vue\": [\n\t\t\"b6b9\",\n\t\t1,\n\t\t0,\n\t\t13\n\t],\n\t\"./Core_CaseBlock.vue\": [\n\t\t\"cf2c\",\n\t\t6\n\t],\n\t\"./Core_LogBlock.vue\": [\n\t\t\"41bd\",\n\t\t1,\n\t\t0,\n\t\t14\n\t],\n\t\"./Core_OutputBlock.vue\": [\n\t\t\"5dcb\",\n\t\t7\n\t],\n\t\"./Core_RunFlowBlock.vue\": [\n\t\t\"cab8\",\n\t\t8\n\t],\n\t\"./MobilePrimitives_MessageBlock.vue\": [\n\t\t\"c600\",\n\t\t1,\n\t\t0,\n\t\t15\n\t],\n\t\"./MobilePrimitives_NumericResponseBlock.vue\": [\n\t\t\"2d61\",\n\t\t1,\n\t\t0,\n\t\t16\n\t],\n\t\"./MobilePrimitives_OpenResponseBlock.vue\": [\n\t\t\"64bb\",\n\t\t1,\n\t\t0,\n\t\t17\n\t],\n\t\"./MobilePrimitives_SelectManyResponseBlock.vue\": [\n\t\t\"03d5\",\n\t\t1,\n\t\t0,\n\t\t10\n\t],\n\t\"./MobilePrimitives_SelectOneResponseBlock.vue\": [\n\t\t\"5c47\",\n\t\t1,\n\t\t0,\n\t\t11\n\t],\n\t\"./SmartDevices_LocationResponseBlock.vue\": [\n\t\t\"59c3\",\n\t\t1,\n\t\t0,\n\t\t18\n\t],\n\t\"./SmartDevices_PhotoResponseBlock.vue\": [\n\t\t\"2b44\",\n\t\t9\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = \"0e11\";\nmodule.exports = webpackAsyncContext;","// Backbone Model for Trees\n\n// Much thanks to\n// http://todomvc.com/architecture-examples/backbone/\n\n// Also helpful\n// http://adrianmejia.com/blog/2012/09/11/backbone-dot-js-for-absolute-beginners-getting-started/\n\n// For commentary!\n// http://www.reddit.com/r/javascript/comments/1npiet/backbonejs_is_opinionated_or_why_is_using_nested/\n\n// For relational links\n// http://backbonerelational.org/\n// (not used)\n\n// And for nested Backbone models! (in use!)\n// https://github.com/afeld/backbone-nested\n\n/*global Backbone */\nwindow.app = window.app || {};\n\n;(function() {\n\n\t// Tree Model\n\t// ----------\n\n\tapp.Tree = function (attrs) {\n\t\tthis.attributes = attrs;\n\t};\n\n\tapp.Tree.prototype = {\n\t\tget(attr) {\n\t\t\treturn this.attributes[attr]\n\t\t},\n\n\t\ttoJSON(options) {\n\t\t\treturn _.clone(this.attributes)\n\t\t},\n\n\t\t// Default attributes for the todo\n\t\t// and ensure that each todo created has `title` and `completed` keys.\n\t\tdefaults: {\n\t\t\tid: 0,\n\t\t\tfloipSyncedAt: '',\n\t\t\tdetails: {\n\t\t\t\ttitle: '',\n\t\t\t\tdescription: '',\n\t\t\t\tenabledLanguages: [],\n        syncedLanguage: '',\n\t\t\t\tstartingBlockKey: '',\n        exitBlockKey: '',\n\t\t\t\thasVoice: 0,\n\t\t\t\thasSms: 0,\n\t\t\t\thasUssd: 0,\n\t\t\t\thasSocial: 0,\n\t\t\t\thasClipboard: 0,\n\t\t\t\tfloipPushUrl: '',\n\t\t\t\tfloipPushApiKey: '',\n\t\t\t},\n\t\t\tblocks: [],\n\t\t\tconnections: []\n\t\t},\n\n\t\t_defaultReviewedState: {},\n\n    upgrade: function () {\n      // todo: port this to use something like `lodash.defaultsDeep()`\n      console.debug('Tree upgrade: started');\n      console.time('Tree upgrade');\n\n      // Temporary fix for blocks that have [] arrays instead of {} objects\n      // Likely caused by browser quirks (possibly old versions of IE)\n      // Added 2016-08-08 (Sean)\n      this.fixArrayBlocks()\n\n      this.defaultEnabledLanguages();\n      this.defaultSyncedLanguage();\n      // auto-inflate reviewed dictionaries based upon enabled languages\n      this.inflateDefaultReviewedStateOnAll();\n      this.inflateDefaultTagsOnAll();\n      this.inflateDefaultLabelOnAll();\n      this.upgradeLanguageSelectorBlocks();\n      this.inflateDefaultSocialContentOnAll();\n      this.inflateDefaultClipboardContentOnAll();\n      this.upgradeSubscriberPropertyFieldSelections();\n      this.upgradeMsmcqBranchingToFalse();\n      this.upgradeSubscriberPropertyBlocks();\n      this.upgradeSubscriberBranchBlocks();\n\n      console.timeEnd('Tree upgrade');\n    },\n\n\t\tcacheDefaultReviewedState: function () {\n\t\t\tvar enabledLanguages = this.getEnabledLanguages();\n\t\t\tthis._defaultReviewedState = _.zipObject(\n\t\t\t\t\tenabledLanguages,\n\t\t\t\t\t_.fill(new Array(enabledLanguages.length), false));\n\t\t},\n\n    defaultEnabledLanguages: function () {\n      var details = this.get('details')\n      details.enabledLanguages = details.enabledLanguages || []\n    },\n\n    defaultSyncedLanguage: function () {\n      var details = this.get('details')\n      details.syncedLanguage = details.syncedLanguage || ''\n    },\n\n\t\tinflateDefaultReviewedStateOnAll: function () {\n\t\t\tthis.cacheDefaultReviewedState();\n\t\t\tthis.get('blocks').forEach(this.inflateDefaultReviewedStateOnto.bind(this));\n\t\t},\n\n\t\tinflateDefaultReviewedStateOnto: function (block) {\n\t\t\tblock.customData.reviewed = block.customData.reviewed || block.customData.approved || {};\n\t\t\tdelete block.customData.approved; // todo: remove these two references to `approved` once deployed\n\t\t\t_.defaults(block.customData.reviewed, this._defaultReviewedState);\n\t\t},\n\n\t\tinflateDefaultTagsOnAll: function () {\n\t\t\tthis.get('blocks').forEach(function (block) {\n\t\t\t\t!block.customData.tags && (block.customData.tags = []);\n\t\t\t});\n\t\t},\n\n\t\tinflateDefaultLabelOnAll: function () {\n\t\t\tthis.get('blocks').forEach(function (block) {\n\t\t\t\t!block.customData.label && (block.customData.label = '');\n\t\t\t});\n\t\t},\n\n\t\tupgradeLanguageSelectorBlocks: function () {\n\t\t\tthis.get('blocks')\n\t\t\t\t\t.filter(function (block) {\n\t\t\t\t\t\treturn block.type === \"LanguageSelectorBlock\";\n\t\t\t\t\t})\n\t\t\t\t\t.forEach(function (languageSelectorBlock) {\n\t\t\t\t\t\tif (!languageSelectorBlock.customData.addExitForNoResponse) {\n\t\t\t\t\t\t\tlanguageSelectorBlock.customData.addExitForNoResponse = 0\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t},\n\n\t\tinflateDefaultSocialContentOnAll: function () {\n\t\t\tthis.get('blocks').forEach(function (block) {\n\t\t\t\t!block.socialContent && (block.socialContent = {})\n\t\t\t})\n\t\t},\n\n\t\tinflateDefaultClipboardContentOnAll: function () {\n\t\t\tthis.get('blocks').forEach(function (block) {\n\t\t\t\t!block.clipboardContent && (block.clipboardContent = {})\n\t\t\t})\n\t\t},\n\n\t\tupgradeSubscriberPropertyFieldSelections: function () {\n\t\t\tthis.get('blocks').forEach(function (block) {\n\t\t\t\tif (!block.customData.propertyFieldId) {\n\t\t\t\t\tvar property = app.ui.findSubscriberPropertyField({display_label: block.customData.customDataCategory})\n\t\t\t\t\tblock.customData.propertyFieldId = _.get(property, 'id', null)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n    upgradeMsmcqBranchingToFalse: function () {\n      this.get('blocks')\n          .filter(function (block) {return block.type === \"MultipleSelectMultipleChoiceQuestionBlock\"})\n          .filter(function (block) {return block.customData.branching === 1})\n          .forEach(function (block) {\n            var customData = block.customData;\n            var uiData = block.uiData;\n\n            customData.branching = false\n            customData.numChoices = 1\n            uiData.numChoices = 1\n            uiData.numConnections = 1\n            uiData.outputNames = [1]\n            if (customData.addExitForNoResponse) {\n              uiData.outputNames.push('trees.output-exit')\n            }\n          })\n    },\n\n\t\t/**\n\t\t * For existing blocks that have their action set to startDate, set the action to customData instead,\n\t\t * preserving all settings that calculate the date, and attempting to pre-select the \"start_date\" property for the\n\t\t * user.\n\t\t *\n\t\t * This is because we are removing the startDate action and rather switching to using subscriber properties\n\t\t */\n\t\tupgradeSubscriberPropertyBlocks: function () {\n\t\t\tthis.get('blocks')\n\t\t\t\t.filter(function (block) {return block.type === \"SubscriberPropertyBlock\"})\n\t\t\t\t.filter(function (block) {return block.customData.action === 'startDate'})\n\t\t\t\t.forEach(function (block) {\n\t\t\t\t\tvar customData = block.customData\n\t\t\t\t\tcustomData.action = 'customData'\n\t\t\t\t\tcustomData.propertyDateMethod = customData.startDateMethod\n\t\t\t\t\tcustomData.propertyDateAbsoluteDate = customData.startDateAbsoluteDate\n\t\t\t\t\tcustomData.propertyDateRelativeNumber = customData.startDateRelativeNumber\n\t\t\t\t\tcustomData.propertyDateTimespanType = customData.startDateTimespanType\n\t\t\t\t\tcustomData.propertyDateNumericBlockKey = customData.startDateNumericBlockKey\n\t\t\t\t\tvar propertyField = app.ui.findSubscriberPropertyField({name: 'start_date'})\n\t\t\t\t\tif (propertyField) {\n\t\t\t\t\t\tcustomData.propertyFieldId = propertyField.id\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcustomData.propertyFieldId = null\n\t\t\t\t\t}\n\t\t\t\t\tcustomData.upgradedFromStartDate = true\n\t\t\t\t})\n\t\t},\n\n\t\t/**\n\t\t * For existing blocks that have their criteria set to startDate, set the criteria to customData instead,\n\t\t * preserving all settings, and attempting to pre-select the \"start_date\" property for the\n\t\t * user.\n\t\t *\n\t\t * This is because we are removing the startDate action and rather switching to using subscriber properties\n\t\t */\n\t\tupgradeSubscriberBranchBlocks: function () {\n\t\t\tthis.get('blocks')\n\t\t\t\t\t.filter(function (block) {return block.type === 'SubscriberBranchBlock'})\n\t\t\t\t\t.filter(function (block) {return  block.customData.action === 'startDate'})\n\t\t\t\t\t.forEach(function (block) {\n\t\t\t\t\t\tbuilder.$set(block.customData, 'action', 'customData')\n\t\t\t\t\t\tbuilder.$set(block.customData, 'customDataMethod', block.customData.startDateMethod)\n\t\t\t\t\t\tbuilder.$set(block.customData, 'customDataValue', block.customData.startDateReference)\n\n\t\t\t\t\t\tvar propertyField = app.ui.findSubscriberPropertyField({name: 'start_date'})\n\n\t\t\t\t\t\t// $set won't work on something that is already a property\n\t\t\t\t\t\t// make sure it does not exist on the object before $set-ing it\n\t\t\t\t\t\tdelete block.customData.propertyFieldId\n\n\t\t\t\t\t\tif (propertyField) {\n\t\t\t\t\t\t\tbuilder.$set(block.customData, 'propertyFieldId', propertyField.id)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tbuilder.$set(block.customData, 'propertyFieldId', null)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbuilder.$set(block.customData, 'upgradedFromStartDate', true)\n\t\t\t\t\t})\n\t\t},\n\n    // This function loops through all of the blocks in a tree, and checks for blocks that have empty subkeys (eg. customData) that are in [] array format rather than {} object format.\n    // The array issue causes other crashes later, when trying to retrieve or update data. So far, the issue comes up sporadically which seems to indicate that it's a browser quirk (possibly with older versions of IE).\n    // This issue fixes the empty arrays (by replacing them with empty objects) when the function is called, and we've added it to trees-views' initializeAll() function to call it on initial page load.\n    // For trees without the issue, it marginally increases the load on the browser when the tree is first loaded, but otherwise causes no other changes.\n\t\t/** @moved from 12-trees-helpers.js */\n    fixArrayBlocks: function () {\n      var neededFixing = 0;\n      var fixedCount = 0;\n\n      _.each(this.get('blocks'), function (block, index) {\n        var arrayKeys = [\n          'customData',\n          'uiData',\n          'audioFiles',\n          'smsContent',\n          'ussdContent',\n          'socialContent',\n          'clipboardContent',];\n\n        _.each(arrayKeys, function (key) {\n          if (_.isArray(block[key])) {\n            neededFixing = 1;\n            fixedCount++;\n\n            // Repair the array by changing it to object syntax:\n            block[key] = {};\n\n            console.log('Fixing ' + block.type + '[' + index + '] ' + key);\n          }\n        });\n      });\n\n      if (neededFixing == 1) {\n        console.log('Fixed ' + fixedCount + ' blocks.');\n        app.ui.change('Array issue blocks fixed.');\n      }\n      // else {\n      // \tconsole.log('All blocks loaded without array issues.');\n      // }\n    },\n\n\t\t// Block-related functions\n\t\tdoesBlockLabelExist: function (label, comparatorKey) {\n\t\t\tif (!label) {return}\n\n\t\t\treturn !!_(this.get('blocks')).chain()\n\t\t\t\t\t.find(function (block) {\n\t\t\t\t\t\treturn block.jsKey !== comparatorKey && block.customData.label === label\n\t\t\t\t\t})\n\t\t\t\t\t.value()\n\t\t},\n\n\t\taddBlock: function(blockData) {\n\t\t\t// This doesn't seem to persist across deletes\n\t\t\t// Will make new, non-unique IDs.\n\t\t\t// blockData.jsKey = _.uniqueId('block_');\n\t\t\tblockData.jsKey = this.makeUniqueId('block_');\n\n\t\t\tthis.inflateDefaultReviewedStateOnto(blockData);\n\n\t\t\tthis.get('blocks').push(blockData);\n\n\t\t\tif (this.get('blocks').length == 1) {\n\t\t\t\t// Only one block, eg. the first one,\n\t\t\t\t// so set the tree's Starting Block ID to this\n\t\t\t\tthis.setStartingBlock(blockData.jsKey);\n\t\t\t}\n\n\t\t\t// Return the new key\n\t\t\treturn this.get('blocks').length - 1;\n\t\t},\n\n\t\tgetBlockByNumericIndex: function(blockKey) {\n\t\t\tvar blocks = this.get('blocks');\n\t\t\tif (blocks[blockKey]) {\n\t\t\t\treturn blocks[blockKey];\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t},\n\n\t\t// app.tree.editBlock(0, {type:'newType'})\n\t\teditBlockByNumericIndex: function(blockNumericIndex, blockData, arrayKey) {\n\t\t\tvar blocks = this.get('blocks');\n\t\t\tvar blockArrayKey;\n\t\t\t// Update that particular block in the array with new data.\n\t\t\tif (blocks[blockNumericIndex]) {\n\n\t\t\t\t// Can provide an array key value (eg. smsContent) to just update that array\n\t\t\t\tif (typeof arrayKey !== 'undefined') {\n\t\t\t\t\tblocks[blockNumericIndex][arrayKey] = blockData;\n\t\t\t\t}\n\n\t\t\t\telse {\n\t\t\t\t\t// Persist existing data (eg. jsKey and other unchanged arrays)\n\t\t\t\t\tblockData = _.extend(blocks[blockNumericIndex], blockData);\n\t\t\t\t\tblocks[blockNumericIndex] = blockData;\n\t\t\t\t}\n\n\n\n\t\t\t\tthis.set('blocks', blocks);\n\n\t\t\t\t// Return that block data just for fun\n\t\t\t\treturn blocks[blockNumericIndex];\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\n\t\tgetBlock: function(blockKey) {\n\t\t\t// Passes back the block *by reference* which allows for direct editing.\n\t\t\treturn _.findWhere(this.get('blocks'), {jsKey: blockKey});\n\t\t},\n\n\t\teditBlock: function(blockKey, blockData, arrayKey) {\n\n\t\t\tvar thisBlock = this.getBlock(blockKey);\n\t\t\t// thisBlock is returned by reference, so can be edited directly (i think)\n\n\t\t\tif (thisBlock) {\n\n\t\t\t\t// Can provide an array key value (eg. smsContent) to just update that array\n\t\t\t\tif (typeof arrayKey !== 'undefined') {\n\t\t\t\t\tthisBlock[arrayKey] = blockData;\n\t\t\t\t}\n\n\t\t\t\telse {\n\t\t\t\t\t// Persist existing data (eg. jsKey and other unchanged arrays)\n\t\t\t\t\tthisBlock = _.extend(thisBlock, blockData);\n\t\t\t\t\t// blocks[blockNumericIndex] = blockData;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t},\n\n\t\tsetBlockPosition: function(blockKey, positionData) {\n\t\t\tvar thisBlock = this.getBlock(blockKey);\n\n\t\t\tif (thisBlock) {\n\n\t\t\t\tthisBlock['uiData']['xPosition'] = positionData[0];\n\t\t\t\tthisBlock['uiData']['yPosition'] = positionData[1];\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\n\t\tgetBlockPosition: function(blockKey) {\n\t\t\tvar thisBlock = this.getBlock(blockKey);\n\n\t\t\tvar positionData = [];\n\n\t\t\tif (thisBlock) {\n\n\t\t\t\tpositionData[0] = thisBlock['uiData']['xPosition'];\n\t\t\t\tpositionData[1] = thisBlock['uiData']['yPosition'];\n\n\t\t\t\treturn positionData;\n\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\n\t\tgetBlockNumConnections: function(blockKey) {\n\t\t\tvar thisBlock = this.getBlock(blockKey);\n\n\t\t\treturn thisBlock['uiData']['numConnections'];\n\t\t},\n\n\t\tfilterBlockConnectionsAboveMax: function(blockKey) {\n\n\t\t\tvar thisBlock = this.getBlock(blockKey);\n\t\t\tvar connections = this.get('connections');\n\n\t\t\tvar maxConnections = thisBlock['uiData']['numConnections'];\n\n\t\t\t_.each(_.where(connections, {startBlockKey: blockKey}), function(e) {\n\n\t\t\t\tvar nodeNumber = e.outputKey.slice(-1);\n\n\t\t\t\tif (nodeNumber > maxConnections) {\n\t\t\t\t\tapp.tree.removeConnection(blockKey, e.outputKey);\n\t\t\t\t}\n\n\t\t\t});\n\n\n\t\t},\n\n\t\tsetBlockAudioFile: function(blockKey, languageId, audioData) {\n\t\t\tvar thisBlock = this.getBlock(blockKey);\n\n\t\t\t// audioData = {\n\t\t\t// \tid: 75,\n\t\t\t// \tfilename: '536105d15bbd94.30453403',\n\t\t\t// \tdescription: 'Uploaded file: survey-c.wav',\n\t\t\t// \tduration_seconds: 2.12,\n\t\t\t// \tcreated_at: '2013-04-12 16:32'\n\t\t\t// };\n\n\t\t\t// console.log('blockKey', blockKey);\n\t\t\t// console.log('languageId', languageId);\n\t\t\t// console.log('audioData', audioData);\n\n\t\t\tif (thisBlock) {\n\n\t\t\t\t// Special handling for any mystery cases\n\t\t\t\t// where the audioFiles object becomes an array\n\t\t\t\t// which could lead to really giant amounts of null values\n\t\t\t\tif (_.isPlainObject(thisBlock['audioFiles']) === false) {\n\t\t\t\t\tconsole.log('Alert - special handling for audioFiles as array taking place');\n\t\t\t\t\tthisBlock['audioFiles'] = {};\n\t\t\t\t}\n\n\t\t\t\tthisBlock['audioFiles'][languageId] = audioData;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\n\t\tremoveBlockAudioFile: function(blockKey, languageId) {\n\n\t\t\tvar thisBlock = this.getBlock(blockKey);\n\n\t\t\t// Works by reference.\n\t\t\tdelete thisBlock['audioFiles'][languageId];\n\n\t\t},\n\n\t\t// Existing block keys\n\t\tgetBlockKeys: function() {\n\t\t\treturn _.keys(app.tree.get('blocks'));\n\n\t\t},\n\n\t\t// Get next index\n\t\t// This isn't really useful since we aren't tracking by array key anymore.\n\t\tgetNextBlockKey: function() {\n\t\t\tvar lastKey = parseInt(_.last(app.tree.getBlockKeys()), 10);\n\t\t\treturn lastKey + 1;\n\n\t\t},\n\n\n\t\tdeleteBlock: function(blockKey) {\n\n\t\t\tvar blocks;\n\t\t\tblocks = this.get('blocks');\n\t\t\tblocks = _.without(blocks, _.findWhere(blocks, {jsKey: blockKey}));\n\n\t\t\tthis.set('blocks', blocks);\n\n\t\t\t// If the indicated block was also the tree's starting block,\n\t\t\t// Set it to blank.\n\t\t\tthis.clearStartingBlockIfIs(blockKey);\n      this.clearExitBlockIfIs(blockKey);\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\thandleDeleteNumericQuestionBlockAssociations: function(selectedBlockKey) {\n\t\t\t\tthis.set({\n\t\t\t\t\tblocks: this.get('blocks').map(function(block) {\n\t\t\t\t\t\tvar newBlock = block;\n\t\t\t\t\t\tif(block['type'] == 'NumericBranchBlock') {\n\t\t\t\t\t\t\tnewBlock = Object.assign({}, block, {customData: this._getAmendmentsForNumericBranchBlock(block['customData'], selectedBlockKey)});\n\t\t\t\t\t\t} else if(block['type'] == 'IdValidationBlock') {\n\t\t\t\t\t\t\tnewBlock = Object.assign({}, block, {customData: this._getAmendmentsForIdValidationBlock(block['customData'], selectedBlockKey)});\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn newBlock;\n\t\t\t\t\t}.bind(this)\n\t\t\t\t)});\n\t\t},\n\t\t//works but must save twice to trigger validation and disable send\n\t\t_getAmendmentsForNumericBranchBlock: function(customData, selectedBlockKey) {\n\t\t\treturn Object.assign({}, customData, {\n\t\t\t\toutputs: _.reduce(customData['outputs'], function(newOutputs, output) {\n\t\t\t\t\tvar newConditions = _.reduce(output['conditions'], function(newConditions, condition) {\n\t\t\t\t\t\tvar newCondition = Object.assign({}, condition);\n\t\t\t\t\t\tif(condition['jsKey'] == selectedBlockKey) {\n\t\t\t\t\t\t\tnewCondition['jsKey'] = '';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnewConditions.push(newCondition);\n\t\t\t\t\t\treturn newConditions;\n\t\t\t\t\t}.bind(this), []);\n\n\t\t\t\t\t//I think this will never be the case but just to be sure\n\t\t\t\t\tif(newConditions) {\n\t\t\t\t\t\tnewOutputs.push(Object.assign({}, output, {conditions: newConditions}));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn newOutputs;\n\t\t\t\t}.bind(this),\n\t\t\t\t[])\n\t\t\t});\n\t\t},\n\t\t_getAmendmentsForIdValidationBlock: function(customData, selectedBlockKey) {\n\n\t\t\tif(customData['numericQuestionBlockJsKey'] == selectedBlockKey) {\n\t\t\t\tcustomData = Object.assign({}, customData, {\n\t\t\t\t\t'numericQuestionBlockJsKey': ''\n\t\t\t\t})\n\t\t\t}\n\t\t\treturn customData;\n\t\t},\n\n\t\tmakeUniqueId: function(prefix) {\n\t\t\treturn prefix + _.now() + '_' + _.random(10, 99);\n\n\t\t},\n\n\t\tgetMcqChoiceName: function(blockKey, choiceId) {\n\n\t\t\tvar block = this.getBlock(blockKey);\n\t\t\tif (block && block.customData && block.customData.choices) {\n\t\t\t\treturn block.customData.choices[choiceId - 1];\n\t\t\t}\n\n\t\t},\n\n\t\tgetBlockTitle: function(blockKey) {\n\n\t\t\tvar block = this.getBlock(blockKey);\n\t\t\tif (block && block.customData && block.customData.title) {\n\t\t\t\treturn block.customData.title;\n\t\t\t}\n\n\t\t},\n\n\t\tgenerateBlockTitle: function(customData, type, limit) {\n\n\t\t\tvar output = '';\n\t\t\tif (_.isNumber(limit) == false) {\n\t\t\t\tlimit = 0;\n\t\t\t}\n\n\t\t\tif (type === 'RunTreeBlock') {\n\t\t\t\tif (_.get(customData, 'destinationTreeId')) {\n\t\t\t\t\toutput = _.get(app.ui.treeTitles, customData.destinationTreeId);\n\t\t\t\t}\n\t\t\t\telse if (_.get(customData, 'destinationTreeSetId')) {\n\t\t\t\t\toutput = Lang.trans('trees.most-recent-version-of') + ' ' + _.get(app.ui.treeSetTitles, customData.destinationTreeSetId);\n\t\t\t\t}\n\n\t\t\t}\n\t\t\telse if (type === 'GroupBranchBlock') {\n\t\t\t\tif (_.get(customData, 'groupId')) {\n\t\t\t\t\tif (_.parseInt(_.get(customData, 'in')) == 0) {\n\t\t\t\t\t\toutput = Lang.trans('trees.if-not-in') +' \"';\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\toutput = Lang.trans('trees.if-in')+' \"';\n\t\t\t\t\t}\n\t\t\t\t\toutput += _.get(app.ui.groupNames, customData.groupId) + '\"';\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (type === 'GroupSizeBranchBlock') {\n\t\t\t\tif (_.get(customData, 'groupId')) {\n\t\t\t\t\toutput = Lang.trans('trees.if')+' \"' + _.get(app.ui.groupNames, customData.groupId) + '\" '+ Lang.trans('trees.exceeds') + ' ' + _.get(customData, 'quotaThreshold', 100);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (type === 'SubscriberBranchBlock') {\n\t\t\t\t\tif (_.get(customData, 'action') == 'customData') {\n\t\t\t\t\t  var property = app.ui.findSubscriberPropertyField({id: _.get(customData, 'propertyFieldId')})\n\t\t\t\t\t\tvar displayLabel = _.get(property, 'display_label', '')\n\t\t\t\t\t\tvar comparator = _.get(customData, 'customDataMethod', 'Equal')\n\n\t\t\t\t\t\tvar comparatorString = ''\n\t\t\t\t\t\tif (comparator === 'NotEqual') {\n\t\t\t\t\t\t\tcomparatorString = Lang.trans('trees.not')\n\t\t\t\t\t\t} else if (comparator === 'LessThan') {\n\t\t\t\t\t\t\tcomparatorString = '<'\n\t\t\t\t\t\t} else if (comparator === 'GreaterThan') {\n\t\t\t\t\t\t\tcomparatorString = '>'\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\toutput = Lang.trans('trees.if-subscriber-custom-data') + ' \"' + displayLabel + '\" ' + Lang.trans('trees.is') + ' ' + comparatorString + ' \"' + _.get(customData, 'customDataValue', '') + '\"';\n\t\t\t\t\t}\n\t\t\t\t\telse if (_.get(customData, 'action') == 'language') {\n\t\t\t\t\t\tif (_.get(customData, 'languageValue') == '') {\n\t\t\t\t\t\t\toutput = Lang.trans('trees.if-subscriber-language-is-unknown')\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\toutput = Lang.trans('trees.if-subscriber-language-is')+ ' \"' + _.get(app.ui.languageNames, customData.languageValue) + '\"';\n\t\t\t\t\t        }\n\t\t\t\t\t}\n\t\t\t}\n\n\t\t\telse {\n\t\t\t\toutput = _.get(customData, 'title');\n\t\t\t}\n\n\t\t\tif (output && output.length > 0 && limit > 0) {\n\t\t\t\toutput = S(output).truncate(limit).s;\n\t\t\t}\n\t\t\treturn output;\n\t\t},\n\n\n\t\t// Connection-related functions\n\n\t\taddConnection: function(startBlockKey, outputKey, endBlockKey) {\n\n\t\t\tvar connections;\n\n\t\t\t// Need to remove any existing connections with the same startBlockKey and outputKey - since one output key on a block can only go to one other endBlock.\n\t\t\tthis.removeConnection(startBlockKey, outputKey);\n\n\t\t\t// Need to load this *after* the appropriate entries are removed first.\n\t\t\tconnections = this.get('connections');\n\n\t\t\t// If this works, it'll be so weird.\n\t\t\tvar connection = {\n\t\t\t\tstartBlockKey: startBlockKey,\n\t\t\t\toutputKey: outputKey,\n\t\t\t\tendBlockKey: endBlockKey\n\t\t\t};\n\n\t\t\tconnections.push(connection);\n\n\t\t\tthis.set('connections', connections);\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tremoveConnection: function(startBlockKey, outputKey) {\n\t\t\t// outputKey is optional\n\t\t\tvar connections = this.get('connections');\n\n\t\t\tif (startBlockKey && typeof outputKey !== 'undefined') {\n\n\t\t\t\t// Massive thanks to\n\t\t\t\t// http://stackoverflow.com/a/16994286\n\t\t\t\tconnections = _.without(connections, _.findWhere(connections, {startBlockKey: startBlockKey, outputKey: outputKey}));\n\n\t\t\t}\n\t\t\telse if (startBlockKey) {\n\n\t\t\t\t// Filter literally everything with that starting block key\n\t\t\t\tconnections = _.difference(connections, _.where(connections, {startBlockKey: startBlockKey}));\n\n\t\t\t}\n\n\n\n\t\t\tthis.set('connections', connections);\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\taddEnabledLanguage: function(languageKey) {\n\n\t\t\tvar enabledLanguages = app.tree.get('details')['enabledLanguages'];\n\n\t\t\tvar newEnabledLanguages = [];\n\n\t\t\tenabledLanguages.push(languageKey.toString());\n\n\t\t\t// Order according to the original app.ui.languages order\n\t\t\tnewEnabledLanguages = _.intersection(_.pluck(app.ui.languages, 'id'), app.tree.get('details')['enabledLanguages']);\n\n\t\t\tapp.tree.get('details').enabledLanguages = newEnabledLanguages;\n\n\t\t\tthis.inflateDefaultReviewedStateOnAll();\n\t\t},\n\n\t\tremoveEnabledLanguage: function(languageKey) {\n\n\t\t\tvar enabledLanguages = app.tree.get('details')['enabledLanguages'];\n\n\t\t\tlanguageKey = languageKey.toString();\n\n\t\t\t// This loses the pass-by-reference, so need to save it back to the model after.\n\t\t\tenabledLanguages = _.without(enabledLanguages, languageKey);\n\n      app.tree.get('details').enabledLanguages = enabledLanguages;\n\n\t\t\tthis.cacheDefaultReviewedState();\n\t\t},\n\n\t\tgetEnabledLanguages: function() {\n\t\t\treturn app.tree.get('details')['enabledLanguages'];\n\t\t},\n\n\t\tsetStartingBlock: function(startingBlockKey) {\n      app.tree.get('details').startingBlockKey = startingBlockKey;\n\t\t},\n\n\t\tclearStartingBlockIfIs: function(blockKey) {\n\t\t\tif (app.tree.get('details').startingBlockKey == blockKey) {\n        app.tree.get('details').startingBlockKey = '';\n\t\t\t}\n\n\t\t},\n\n    clearExitBlockIfIs: function(blockKey) {\n      if (app.tree.get('details').exitBlockKey == blockKey) {\n        app.tree.get('details').exitBlockKey = '';\n      }\n    },\n\n\n\n\t\tenableVoice: function() {\n\t\t\tapp.tree.get('details').hasVoice = 1;\n\t\t},\n\t\tdisableVoice: function() {\n      app.tree.get('details').hasVoice = 0;\n\t\t},\n\t\tenableSms: function() {\n      app.tree.get('details').hasSms = 1;\n\t\t},\n\t\tdisableSms: function() {\n      app.tree.get('details').hasSms = 0;\n\t\t},\n\t\tenableUssd: function() {\n      app.tree.get('details').hasUssd = 1;\n\t\t},\n\t\tdisableUssd: function() {\n      app.tree.get('details').hasUssd = 0;\n\t\t},\n\t\tenableSocial: function() {\n\t\t\tapp.tree.get('details').hasSocial = 1;\n\t\t},\n\t\tdisableSocial: function() {\n\t\t\tapp.tree.get('details').hasSocial = 0;\n\t\t},\n\t\tenableClipboard: function() {\n\t\t\tapp.tree.get('details').hasClipboard = 1;\n\t\t},\n\t\tdisableClipboard: function() {\n\t\t\tapp.tree.get('details').hasClipboard = 0;\n\t\t},\n\n\t\tvalidateLanguageAndContentTypes: function(tree, blocks) {\n\n\t\t\tvar missingLanguageIdsAudioFiles = [],\n\t\t\t\t\tmissingLanguageIdsSmsContent = [],\n\t\t\t\t\tmissingLanguageIdsUssdContent = [],\n\t\t\t\t\tmissingLanguageIdsSocialContent = [],\n\t\t\t\t\tmissingLanguageIdsClipboardContent = [],\n\t\t\t\t\tjsKey = {};\n\n\t\t\t_.forEach(blocks, function(block) {\n\n\t\t\t\tmissingLanguageIdsAudioFiles = [];\n\t\t\t\tmissingLanguageIdsSmsContent = [];\n\t\t\t\tmissingLanguageIdsUssdContent = [];\n\t\t\t\tmissingLanguageIdsSocialContent = [];\n\t\t\t\tmissingLanguageIdsClipboardContent = [];\n\n\t\t\t\tif(app.ui.blockClasses[block.type].hasContent == 1){\n\n\t\t\t\t\tif(app.tree.get('details').hasVoice && _.keys(block.audioFiles).length < tree.enabledLanguages.length) {\n\t\t\t\t\tmissingLanguageIdsAudioFiles = _.difference(tree.enabledLanguages, _.keys(block.audioFiles));\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif(app.tree.get('details').hasSms && _.keys(block.smsContent).length < tree.enabledLanguages.length) {\n\t\t\t\t\t\tif (block.type !== \"RandomOrderMultipleChoiceQuestionBlock\")\n\t\t\t\t\t\tmissingLanguageIdsSmsContent = _.difference(tree.enabledLanguages, _.keys(block.smsContent));\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif(app.tree.get('details').hasUssd && _.keys(block.ussdContent).length < tree.enabledLanguages.length) {\n\t\t\t\t\t\tif (block.type !== \"RandomOrderMultipleChoiceQuestionBlock\")\n\t\t\t\t\t\tmissingLanguageIdsUssdContent = _.difference(tree.enabledLanguages, _.keys(block.ussdContent));\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif(app.tree.get('details').hasSocial && _.keys(block.socialContent).length < tree.enabledLanguages.length) {\n\t\t\t\t\t\tif (block.type !== \"RandomOrderMultipleChoiceQuestionBlock\")\n\t\t\t\t\t\t\tmissingLanguageIdsSocialContent = _.difference(tree.enabledLanguages, _.keys(block.socialContent));\n\t\t\t\t\t}\n\n\t\t\t\t\tif(app.tree.get('details').hasClipboard && _.keys(block.clipboardContent).length < tree.enabledLanguages.length) {\n\t\t\t\t\t\tif (block.type !== \"RandomOrderMultipleChoiceQuestionBlock\")\n\t\t\t\t\t\t\tmissingLanguageIdsClipboardContent = _.difference(tree.enabledLanguages, _.keys(block.clipboardContent));\n\t\t\t\t\t}\n\n\t\t\t\t\tif(missingLanguageIdsAudioFiles.length || missingLanguageIdsSmsContent.length || missingLanguageIdsUssdContent.length || missingLanguageIdsSocialContent.length || missingLanguageIdsClipboardContent.length) {\n\t\t\t\t\t\tjsKey[block.jsKey] = {\n\t\t\t\t\t\t\t\t'sms': missingLanguageIdsSmsContent,\n\t\t\t\t\t\t\t\t'voice': missingLanguageIdsAudioFiles,\n\t\t\t\t\t\t\t\t'ussd' : missingLanguageIdsUssdContent,\n\t\t\t\t\t\t\t\t'social' : missingLanguageIdsSocialContent,\n\t\t\t\t\t\t\t\t'clipboard' : missingLanguageIdsClipboardContent,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t/*\n\t\t\t\t//if block is a multiple choice question, check if user has set multiple digit options\n\t\t\t\tif (block.type === \"MultipleChoiceQuestionBlock\"){\n\t\t\t\t\tvar choiceKeyPresses = block.customData.choiceKeypresses;\n\t\t\t\t\t//check if there are any duplicate in the choices\n\n\t\t\t\t\tif ((new Set(_.values(choiceKeyPresses))).size !== (_.values(choiceKeyPresses).length)){\n\t\t\t\t\t\tvar uniqN = [];\n\t\t\t\t\t\tvar duplicates = [];\n\t\t\t\t\t\t$.each(choiceKeyPresses, function(i, el){\n\t\t\t\t\t\t\tif (uniqN.lastIndexOf(el) === -1) {\n\t\t\t\t\t\t\t\tuniqN.push(el);\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tduplicates.push(el);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tjsKey[block.jsKey]['duplicateChoicePresses'] = duplicates;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tjsKey[block.jsKey]['duplicateChoicePresses'] = [];\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif (block.type === \"GroupBranchBlock\"){\n\t\t\t\t\t//check if this block has a group set\n\t\t\t\t\tif (!block.customData.hasOwnProperty('groupId') || (block.customData.groupId === \"\")) {\n\t\t\t\t\t\tjsKey[block.jsKey] = {'noGroup' : \"NoGroupSelected\"};\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (block.type === \"RunTreeBlock\"){\n\n\t\t\t\t\tif (!block.customData.hasOwnProperty('destinationTreeSetId') || (block.customData.destinationTreeSetId === \"\")) {\n\t\t\t\t\t\tjsKey[block.jsKey] = {'noRunTree':'NoTreeSelected'};\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (block.type === \"GroupSizeBranchBlock\") {\n\n\t\t\t\t\tif (!block.customData.hasOwnProperty('groupId') || (block.customData.groupId === \"\")){\n\t\t\t\t\t\tjsKey[block.jsKey] = {\n\t\t\t\t\t\t\t\t\t\t\t\t'noGroup':\"NoGroupSelected\"\n\t\t\t\t\t\t\t\t\t\t\t };\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif (block.type === \"LanguageSelectorBlock\"){\n\t\t\t\t\tif (!block.customData.hasOwnProperty('languageSelectorId') || (block.customData.languageSelectorId === \"\")){\n\t\t\t\t\t\tjsKey[block.jsKey] = {\n\t\t\t\t\t\t\t\t\t\t\t'noLanguageSelector' : 'NoLanguageSelectorSelected'\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t*/\n\n\n\t\t\t});\n\n\t\t\treturn jsKey;\n\n\t\t},\n\n\t\tvalidateContent: function() {\n\n\t\t\tvar tree = this.get('details'), blocks = this.get('blocks');\n\n\t\t\treturn this.validateLanguageAndContentTypes(tree, blocks);\n\t\t},\n\n\t\tupdateFloipAlert: function() {\n\t\t\tif (app.tree.floipSyncedAt) {\n\t\t\t\t$('.push-flow-package-alert-message').html('<div class=\"alert alert-success\">' + Lang.trans('trees.floip-sync-success') + '</div>');\n\t\t\t} else if ($('.floip-push-url-input').val()) {\n\t\t\t\t$('.push-flow-package-alert-message').html('<div class=\"alert alert-warning\">' + Lang.trans('trees.floip-sync-warning') + '</div>');\n\t\t\t}\n\t\t},\n\n    getEndBlockPosition: function(topOrBottom, returnBlockKey, offset) {\n      var tallestYPosition = 0;\n      var tallestBlockKey = '';\n\n      if (topOrBottom != 'bottom') {\n        // TODO:\n        if (app.tree.get('blocks')[0]) {\n          tallestYPosition = app.tree.get('blocks')[0]['uiData']['yPosition'];\n          tallestBlockKey = app.tree.get('blocks')[0]['jsKey'];\n          // Seed this initially, otherwise the \"0\" value will stay shortest.\n        }\n      }\n\n      _.each(app.tree.get('blocks'), function(block) {\n        var thisYPosition = block['uiData']['yPosition'];\n\n        if (topOrBottom == 'bottom') {\n          if (thisYPosition > tallestYPosition) {\n            tallestYPosition = thisYPosition;\n            tallestBlockKey = block['jsKey'];\n          }\n        }\n        else {\n          if (thisYPosition < tallestYPosition) {\n            tallestYPosition = thisYPosition;\n            tallestBlockKey = block['jsKey'];\n          }\n        }\n\n      }, this);\n\n      if (typeof offset !== 'undefined') {\n        if (topOrBottom == 'bottom') {\n          tallestYPosition += offset;\n        }\n        else {\n          tallestYPosition -= offset;\n        }\n\n      }\n\n      if (returnBlockKey == 1) {\n        return tallestBlockKey;\n      }\n      else {\n        return tallestYPosition;\n      }\n\n    },\n\n    getTallestBlockPosition: function(offset) {\n      return this.getEndBlockPosition('bottom', 0, offset);\n    },\n    getShortestBlockPosition: function(offset) {\n      return this.getEndBlockPosition('top', 0, offset);\n    },\n    getTallestBlockKey: function() {\n      return this.getEndBlockPosition('bottom', 1);\n    },\n    getShortestBlockKey: function() {\n      return this.getEndBlockPosition('top', 1);\n    },\n\n  };\n\n  app.Tree._blockIdPrefixMatcher = /^(block_\\d+_\\d+).*/; // eg. \"block_1492643090294_28_node_3\"\n  app.Tree._validateNonExistentBlockReferences = function (blocks, connections) {\n\t\t// todo: also validate .blocks.items.properties.customData.outputs.conditions.jsKey === \"block_1450273012962_38\"\n\t\t// todo: also validate .details.startingBlockKey === \"block_1450273012962_38\"\n\n    var keysToVerifiedMap = {},\n        keysToExistsMap = {},\n        keys = _.pluck(blocks, 'jsKey'),\n        validateKey = function (key) {\n          keysToVerifiedMap[key] = true\n          keysToExistsMap[key] = _.contains(keys, key)\n        };\n\n    _.forEach(connections, function (conn, i) {\n      validateKey(conn.endBlockKey);\n      validateKey(conn.startBlockKey);\n\n      var extractedKey = _.get(this._blockIdPrefixMatcher.exec(conn.outputKey), 1);\n      extractedKey && validateKey(extractedKey);\n    }, this);\n\n    return _.contains(_.values(keysToExistsMap), 0);\n  }\n\n\tapp.Tree._mergeAndSanitizeImportedInto = function (treeJson, importJson) {\n\t\tif (!importJson) {\n\t\t\treturn; // validator handles `null`ed json in a particular way\n\t\t}\n\n\t\t//1- Remove contents - based on selected channels\n\t\t_.forEach(_.get(importJson, 'blocks'), function (block, i) {\n\t\t\tif (!_.get(treeJson, 'details.hasVoice', false)){\n\t\t\t\tblock.audioFiles = {};\n\t\t\t}\n\t\t\tif (!_.get(treeJson, 'details.hasSms', false)){\n\t\t\t\tblock.smsContent = {};\n\t\t\t\tblock.smsAutogenLangs = [];\n\t\t\t}\n\t\t\tif (!_.get(treeJson, 'details.hasUssd', false)){\n\t\t\t\tblock.ussdContent = {};\n\t\t\t\tblock.ussdAutogenLangs = [];\n\t\t\t}\n\t\t\tif (!_.get(treeJson, 'details.hasSocial', false)){\n\t\t\t\tblock.socialContent = {};\n\t\t\t\tblock.socialAutogenLangs = [];\n\t\t\t}\n\t\t\tif (!_.get(treeJson, 'details.hasClipboard', false)){\n\t\t\t\tblock.clipboardContent = {};\n\t\t\t\tblock.clipboardAutogenLangs = [];\n\t\t\t}\n\t\t});\n\n\t\t//2- Remove contents - based on selected languages\n\t\tvar importedEnabledLanguages = _.get(importJson, 'details.enabledLanguages', []);\n\t\tvar validLanguages = _.get(treeJson, 'details.enabledLanguages', []);\n\t\tvar invalidLanguages = _.difference(importedEnabledLanguages, validLanguages);\n\n\t\tif (invalidLanguages.length > 0){\n\t\t\tvar blockContentsToReview = [\n\t\t\t\t'customData.reviewed',\n\t\t\t\t'audioFiles',\n\t\t\t\t'smsContent',\n\t\t\t\t'ussdContent',\n\t\t\t\t'socialContent',\n\t\t\t\t'clipboardContent',\n\t\t\t\t'smsAutogenLangs',\n\t\t\t\t'ussdAutogenLangs',\n\t\t\t\t'socialAutogenLangs',\n\t\t\t\t'clipboardAutogenLangs'\n\t\t\t];\n\n\t\t\t_.forEach(_.get(importJson, 'blocks'), function (block, i) {\n\t\t\t\t_.forEach(blockContentsToReview, function (contentPath, i) {\n\t\t\t\t\tvar content = _.get(block, contentPath, {});\n\t\t\t\t\tvar sanitizedContent = [];\n\t\t\t\t\tif (_.isArray(content)) {//AutogenLangs\n\t\t\t\t\t\tsanitizedContent = _.difference(content, invalidLanguages);//remove by value\n\t\t\t\t\t}else{//Contents & others\n\t\t\t\t\t\tsanitizedContent = _.omit(content, invalidLanguages);//remove by prop\n\t\t\t\t\t}\n\t\t\t\t\t_.set(block, contentPath, sanitizedContent);\n\t\t\t\t})\n\t\t\t});\n\t\t}\n\n\t\t// 3- Fix non object contents & Strip out customData from some block types\n\t\t// Block Type KeyValues to strip out\n\t\tvar orgContentBlockTypeKeys = {\n\t\t  \"SubscriberBranchBlock\": ['customDataCategory', 'customDataValue', 'propertyFieldId'],\n\t\t  \"GroupBranchBlock\": ['groupId'],\n\t\t  \"GroupSizeBranchBlock\": ['groupId'],\n\t\t  \"SubscriberPropertyBlock\": ['customDataCategory', 'customDataValue', 'newLanguage', 'propertyFieldId'],\n\t\t  \"GroupPropertyBlock\": ['groupId'],\n\t\t  \"BillSubscriberBlock\": ['apiUrlDestination', 'apiUsername', 'apiPassword', 'apiProductCode', 'apiStockCode', 'apiDeductionAmount', 'apiOperationId', 'apiOperationType' ],\n\t\t  \"TriggerOutgoingCallBlock\": ['recipientType', 'scheduleType', 'messageVersionSetId', 'messageId', 'surveyVersionSetId', 'surveyId', 'treeVersionSetId', 'treeId', 'languageSelectorId', 'subscribers'],\n\t\t  \"LanguageSelectorBlock\": ['languageSelectorId'],\n\t\t  \"CallHistoryBranchBlock\": ['mode', 'rangeDays', 'rangeStartDate', 'rangeEndDate'],\n\t\t\t\"DirectorySelectionBlock\": ['setSubscriberPropertyConfiguration'],\n\t\t\t\"OpenQuestionBlock\": ['setSubscriberPropertyConfiguration'],\n\t\t\t\"RandomOrderMultipleChoiceQuestionBlock\": ['setSubscriberPropertyConfiguration'],\n\t\t\t\"MultipleChoiceQuestionBlock\": ['setSubscriberPropertyConfiguration'],\n\t\t\t\"NumericQuestionBlock\": ['setSubscriberPropertyConfiguration'],\n\t\t\t\"CollaborativeFilteringRatingBlock\": ['candidateBlocks'],\n\t\t\t\"CollaborativeFilteringRatioBranchBlock\": ['candidateBlock'],\n\t\t}\n\n\t\t_.forEach(_.get(importJson, 'blocks'), function (block, i) {\n\t\t\tblock.audioFiles = Array.isArray(block.audioFiles) ? {} : block.audioFiles;\n\t\t\tblock.smsContent = Array.isArray(block.smsContent) ? {} : block.smsContent;\n\t\t\tblock.ussdContent = Array.isArray(block.ussdContent) ? {} : block.ussdContent;\n\t\t\tblock.socialContent = Array.isArray(block.socialContent) ? {} : block.socialContent;\n\t\t\tblock.clipboardContent = Array.isArray(block.clipboardContent) ? {} : block.clipboardContent;\n\t\t\tblock.customData = Array.isArray(block.customData) ? {} : block.customData;\n\n\t\t\tif(_.has(orgContentBlockTypeKeys, block.type)) {\n\t\t\t\t// For each key within the Block Type\n\t\t\t\t_.forEach(orgContentBlockTypeKeys[block.type], function (key, i) {\n\t\t\t\t\tdelete block.customData[key];\n\t\t\t\t})\n\t\t\t}\n\n\t\t});\n\n\t\treturn _.extend({}, treeJson, {\n\t\t\tdetails: _.assign({}, _.get(importJson, 'details'), treeJson.details),\n\t\t\tblocks: _.get(importJson, 'blocks', []),\n\t\t\tconnections: _.get(importJson, 'connections', [])\n\t\t});\n\t}\n\n  app.Tree.validateTreeData = function (json, schema) {\n    // Usage:\n    // schema = app.Tree.createJsonSchemaFor(\n    //    _.pluck(app.ui.languages, 'id'),\n    //    _.keys(app.ui.blockClasses))\n    // app.tree = app.Tree.validateAndCreateFrom(json, schema)\n\n    if (!json) { // json was invalid at some point along the way\n        throw _.extend(new Ajv.ValidationError([]), {message: 'Tree validation failed!'});\n    }\n\n    var validate = new Ajv({coerceTypes: true}).compile(schema);\n\n    if (!validate(json)) {\n      // validate.errors are a list like:\n      // [{\"keyword\":\"type\",\"dataPath\":\".details.title\",\"schemaPath\":\"#/properties/details/properties/title/type\",\"params\":{\"type\":\"string\"},\"message\":\"should be string\"}]\n      throw _.extend(\n          new Ajv.ValidationError(validate.errors),\n          {message: 'Tree validation failed!'});\n    }\n\n    if (this._validateNonExistentBlockReferences(json.blocks, json.connections)) {\n      throw _.extend(new Ajv.ValidationError([{\n        keyword: 'reference',\n        dataPath: '.connections.items.properties',\n        message: \"should reference existing jsKey properties\"\n      }]), {message: 'Tree validation failed!'});\n    }\n  }\n\n  app.Tree.createJsonSchemaFor = function (languages, blockTypes) {\n    // todo: fix enum for language\n    // todo: fix enum for block classes\n    // todo: add enum for `connection.startBlockKey` and `connection.endBlockKey`\n    // todo: add enum for `connection.endBlockKey`\n    // todo: add enum for `details.startingBlockKey`\n\n    // Reference: http://epoberezkin.github.io/ajv/keywords.html\n    return {\n      \"properties\": {\n        \"id\": {\"type\": \"integer\"},\n        \"details\": {\n          \"type\": \"object\",\n          \"properties\": {\n            \"title\": {\"type\": \"string\"},\n            \"description\": {\"type\": \"string\"},\n            \"hasVoice\": {\"type\": \"boolean\"},\n            \"enabledLanguages\": {\n              \"type\": \"array\",\n              \"items\": {\n                \"type\": \"string\",\n                \"enum\": languages\n              }\n            },\n            \"hasSms\": {\"type\": \"boolean\"},\n            \"hasUssd\": {\"type\": \"boolean\"},\n            \"hasSocial\": {\"type\": \"boolean\"},\n            \"startingBlockKey\": {\"type\": \"string\"}\n          }\n        },\n        \"blocks\": {\n          \"type\": \"array\",\n          \"items\": {\n            \"type\": \"object\",\n            \"properties\": {\n              \"type\": {\n                \"type\": \"string\",\n                \"enum\": blockTypes\n              },\n              \"customData\": {\n                \"type\": \"object\",\n                \"properties\": {\n                  \"title\": {\"type\": \"string\"},\n                  \"repeatKey\": {\"type\": \"integer\"},\n                  \"repeatMax\": {\"type\": \"integer\"},\n                  \"repeatDelay\": {\"type\": \"integer\"},\n                  \"repeat\": {\"type\": \"boolean\"}\n                }\n              },\n              \"uiData\": {\n                \"type\": \"object\",\n                \"properties\": {\n                  \"xPosition\": {\"type\": \"integer\"},\n                  \"yPosition\": {\"type\": \"integer\"},\n                  \"numConnections\": {\"type\": \"integer\"},\n                }\n              },\n              \"audioFiles\": {\"type\": \"object\"},\n              \"smsContent\": {\"type\": \"object\"},\n              \"ussdContent\": {\"type\": \"object\"},\n              \"socialContent\": {\"type\": \"object\"},\n              \"clipboardContent\": {\"type\": \"object\"},\n              \"smsAutogenLangs\": {\"type\": \"array\"},\n              \"ussdAutogenLangs\": {\"type\": \"array\"},\n              \"socialAutogenLangs\": {\"type\": \"array\"},\n              \"clipboardAutogenLangs\": {\"type\": \"array\"},\n              \"jsKey\": {\"type\": \"string\"}\n            }\n          }\n        },\n        \"connections\": {\n          \"type\": \"array\",\n          \"items\": {\n            \"type\": \"object\",\n            \"properties\": {\n              \"startBlockKey\": {\"type\": \"string\"},\n              \"outputKey\": {\"type\": \"string\"},\n              \"endBlockKey\": {\"type\": \"string\"}\n            }\n          }\n        }\n      }\n    }\n  }\n\n\n})();\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h3',{staticClass:\"no-room-above\"},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.edit-flow'))+\" \")]),_c('flow-name-editor',{attrs:{\"flow\":_vm.flow}}),_c('flow-label-editor',{attrs:{\"flow\":_vm.flow}}),_c('flow-interaction-timeout-editor',{attrs:{\"flow\":_vm.flow}}),_c('flow-languages-editor',{attrs:{\"flow\":_vm.flow},on:{\"commitFlowLanguagesChange\":_vm.updateFlowLanguages}}),_c('flow-modes-editor',{attrs:{\"flow\":_vm.flow},on:{\"commitFlowModesChange\":_vm.updateFlowModes}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"form-group flow-label\"},[_c('text-editor',{attrs:{\"is-editable\":_vm.isEditable,\"label\":_vm._f(\"trans\")('flow-builder.flow-name'),\"placeholder\":_vm._f(\"trans\")('flow-builder.enter-flow-name')},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport TextEditor from '@/components/common/TextEditor.vue'\nimport {Component, Prop} from 'vue-property-decorator'\nimport {IFlow} from '@floip/flow-runner'\nimport {namespace} from 'vuex-class'\nimport lang from '@/lib/filters/lang'\n\nconst flowVuexNamespace = namespace('flow')\n\n@Component<any>(\n  {\n    components: {\n      TextEditor,\n    },\n    mixins: [lang],\n  }\n)\nclass FlowNameEditor extends Vue {\n  @Prop({default: true}) readonly isEditable!: boolean\n  @Prop()readonly flow!: IFlow\n\n  get name(): string {\n    return this.flow.name || \"\"\n  }\n\n  set name(value: string) {\n    this.flow_setName({flowId:this.flow.uuid, value})\n  }\n\n  @flowVuexNamespace.Mutation flow_setName!: ({flowId, value}: {flowId: string, value: string}) => void\n}\n\nexport default FlowNameEditor\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NameEditor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NameEditor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./NameEditor.vue?vue&type=template&id=a9aa38fa&\"\nimport script from \"./NameEditor.vue?vue&type=script&lang=ts&\"\nexport * from \"./NameEditor.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"form-group flow-name\"},[_c('text-editor',{attrs:{\"is-editable\":_vm.isEditable,\"label\":_vm._f(\"trans\")('flow-builder.flow-label'),\"placeholder\":_vm._f(\"trans\")('flow-builder.enter-flow-label')},model:{value:(_vm.label),callback:function ($$v) {_vm.label=$$v},expression:\"label\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport TextEditor from '@/components/common/TextEditor.vue'\nimport {Component, Prop} from 'vue-property-decorator'\nimport {IFlow} from '@floip/flow-runner'\nimport {namespace} from 'vuex-class'\nimport lang from '@/lib/filters/lang'\n\nconst flowVuexNamespace = namespace('flow')\n@Component<any>(\n  {\n    components: {\n      TextEditor,\n    },\n    mixins: [lang],\n  }\n)\nclass FlowLabelEditor extends Vue {\n  @Prop({default: true}) readonly isEditable!: boolean\n  @Prop() readonly flow!: IFlow\n\n  get label(): string {\n    return this.flow.label || \"\"\n  }\n\n  set label(value: string) {\n    this.flow_setLabel({flowId:this.flow.uuid, value})\n  }\n\n  @flowVuexNamespace.Mutation flow_setLabel\n}\n\nexport default FlowLabelEditor\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LabelEditor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LabelEditor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./LabelEditor.vue?vue&type=template&id=63d28d50&\"\nimport script from \"./LabelEditor.vue?vue&type=script&lang=ts&\"\nexport * from \"./LabelEditor.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"form-group flow-interaction-timeout\"},[_c('numeric-editor',{attrs:{\"is-editable\":_vm.isEditable,\"label\":_vm._f(\"trans\")('flow-builder.Interaction-timeout'),\"placeholder\":_vm._f(\"trans\")('flow-builder.enter-value')},model:{value:(_vm.interactionTimeout),callback:function ($$v) {_vm.interactionTimeout=_vm._n($$v)},expression:\"interactionTimeout\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport {Component, Prop} from 'vue-property-decorator'\nimport {IFlow} from '@floip/flow-runner'\nimport NumericEditor from '@/components/common/NumericEditor.vue'\nimport {namespace} from 'vuex-class'\nimport lang from '@/lib/filters/lang'\n\nconst flowVuexNamespace = namespace('flow')\n\n@Component<any>({\n  components: {\n    NumericEditor,\n  },\n  mixins: [lang],\n})\nclass InteractionTimeoutEditor extends Vue {\n  @Prop({default: true}) readonly isEditable!: boolean\n  @Prop() readonly flow!: IFlow\n\n  get interactionTimeout(): number {\n    //30 comes from src/store/flow/flow.ts\n    return this.flow.interactionTimeout || 30 \n  }\n\n  set interactionTimeout(value: number) {\n    this.flow_setInteractionTimeout({flowId:this.flow.uuid, value})\n  }\n\n  @flowVuexNamespace.Mutation flow_setInteractionTimeout\n}\n\nexport default InteractionTimeoutEditor\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InteractionTimeoutEditor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InteractionTimeoutEditor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./InteractionTimeoutEditor.vue?vue&type=template&id=780f3a90&\"\nimport script from \"./InteractionTimeoutEditor.vue?vue&type=script&lang=ts&\"\nexport * from \"./InteractionTimeoutEditor.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"form-group flow-languages\"},[_c('label',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.languages')))]),_vm._l((_vm.languages),function(language){return _c('div',{key:language.id,staticClass:\"checkbox\"},[_c('label',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.flowSelectedLanguages),expression:\"flowSelectedLanguages\"}],staticClass:\"flow-language-toggle-checkbox\",attrs:{\"type\":\"checkbox\"},domProps:{\"value\":language,\"checked\":Array.isArray(_vm.flowSelectedLanguages)?_vm._i(_vm.flowSelectedLanguages,language)>-1:(_vm.flowSelectedLanguages)},on:{\"change\":function($event){var $$a=_vm.flowSelectedLanguages,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=language,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.flowSelectedLanguages=$$a.concat([$$v]))}else{$$i>-1&&(_vm.flowSelectedLanguages=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.flowSelectedLanguages=$$c}}}}),_vm._v(\" \"+_vm._s(language.name)+\" \")])])})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport {Component, Prop} from 'vue-property-decorator'\nimport {IFlow} from '@floip/flow-runner'\nimport NumericEditor from '@/components/common/NumericEditor.vue'\nimport ILanguage from '@floip/flow-runner/dist/flow-spec/ILanguage'\nimport lang from '@/lib/filters/lang'\n\n@Component<any>({\n  components: {\n    NumericEditor,\n  },\n  mixins: [lang],\n})\nclass LanguagesEditor extends Vue {\n  @Prop({default: true}) readonly isEditable!: boolean\n  @Prop() readonly flow!: IFlow\n\n  get languages(): ILanguage[] {\n    return this.$store.state.trees.ui.languages\n  }\n\n  get flowSelectedLanguages(): ILanguage[] {\n    return this.flow.languages || []\n  }\n\n  set flowSelectedLanguages(value: ILanguage[]) {\n    this.$emit('commitFlowLanguagesChange', value)\n  }\n}\n\nexport default LanguagesEditor\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LanguagesEditor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LanguagesEditor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./LanguagesEditor.vue?vue&type=template&id=5041fc1c&\"\nimport script from \"./LanguagesEditor.vue?vue&type=script&lang=ts&\"\nexport * from \"./LanguagesEditor.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"form-group flow-modes\"},[_c('label',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.modes')))]),_vm._l((_vm.availableModes),function(mode){return _c('div',{key:mode,staticClass:\"checkbox\"},[_c('label',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.flowSelectedModes),expression:\"flowSelectedModes\"}],staticClass:\"flow-mode-toggle-checkbox\",attrs:{\"type\":\"checkbox\"},domProps:{\"value\":mode,\"checked\":Array.isArray(_vm.flowSelectedModes)?_vm._i(_vm.flowSelectedModes,mode)>-1:(_vm.flowSelectedModes)},on:{\"change\":function($event){var $$a=_vm.flowSelectedModes,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=mode,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.flowSelectedModes=$$a.concat([$$v]))}else{$$i>-1&&(_vm.flowSelectedModes=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.flowSelectedModes=$$c}}}}),_vm._v(\" \"+_vm._s(mode)+\" \")])])})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport {Component, Prop} from 'vue-property-decorator'\nimport {IFlow} from '@floip/flow-runner'\nimport NumericEditor from '@/components/common/NumericEditor.vue'\nimport {SupportedMode} from '@floip/flow-runner'\nimport lang from '@/lib/filters/lang'\n\n@Component<any>({\n  components: {\n    NumericEditor,\n  },\n  mixins: [lang]\n})\nclass ModeEditor extends Vue {\n  @Prop({default: true}) readonly isEditable!: boolean\n  @Prop() readonly flow!: IFlow\n\n  private availableModes = Object.values(SupportedMode)\n\n  get flowSelectedModes(): SupportedMode[] {\n    return this.flow.supportedModes\n  }\n\n  set flowSelectedModes(value: SupportedMode[]) {\n    this.$emit('commitFlowModesChange', value)\n  }\n}\n\nexport default ModeEditor\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModesEditor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModesEditor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ModesEditor.vue?vue&type=template&id=eec9a104&\"\nimport script from \"./ModesEditor.vue?vue&type=script&lang=ts&\"\nexport * from \"./ModesEditor.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport {Component, Prop} from 'vue-property-decorator'\nimport {IFlow} from '@floip/flow-runner'\nimport FlowNameEditor from './NameEditor.vue'\nimport FlowLabelEditor from './LabelEditor.vue'\nimport FlowInteractionTimeoutEditor from './InteractionTimeoutEditor.vue'\nimport FlowLanguagesEditor from './LanguagesEditor.vue'\nimport FlowModesEditor from './ModesEditor.vue'\nimport {namespace} from 'vuex-class'\nimport lang from '@/lib/filters/lang'\n\nconst flowVuexNamespace = namespace('flow')\n\n@Component<any>({\n    components: {\n      FlowNameEditor,\n      FlowLabelEditor,\n      FlowInteractionTimeoutEditor,\n      FlowLanguagesEditor,\n      FlowModesEditor\n    },\n    mixins: [lang],\n  }\n)\nclass FlowEditor extends Vue {\n  @Prop() readonly flow!: IFlow\n\n  updateFlowLanguages(value) {\n    this.flow_setLanguages({flowId: this.flow.uuid, value})\n  }\n\n  updateFlowModes(value) {\n    this.flow_setSupportedMode({flowId: this.flow.uuid, value})\n  }\n\n  @flowVuexNamespace.Mutation flow_setLanguages\n  @flowVuexNamespace.Mutation flow_setSupportedMode\n}\n\nexport default FlowEditor\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FlowEditor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FlowEditor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./FlowEditor.vue?vue&type=template&id=427f7bb2&\"\nimport script from \"./FlowEditor.vue?vue&type=script&lang=ts&\"\nexport * from \"./FlowEditor.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"number-editor\"},[_c('label',[_vm._v(_vm._s(_vm.label))]),(_vm.isEditable)?_c('div',[_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"number\",\"min\":\"0\",\"placeholder\":_vm.placeholder},domProps:{\"value\":_vm.value},on:{\"keypress\":_vm.filterNumeric,\"keydown\":function($event){return _vm.$emit('keydown', $event)},\"input\":function($event){return _vm.$emit('input', $event.target.value)}}})]):_c('p',[_vm._v(\" \"+_vm._s(_vm.value)+\" \")]),_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"number-editor\">\n    <label>{{label}}</label>\n    <div v-if=\"isEditable\">\n      <input\n          type=\"number\"\n          min=\"0\"\n          class=\"form-control\"\n          :placeholder=\"placeholder\"\n          :value=\"value\"\n          @keypress=\"filterNumeric\"\n          @keydown=\"$emit('keydown', $event)\"\n          @input=\"$emit('input', $event.target.value)\"\n      />\n    </div>\n\n    <p v-else>\n      {{value}}\n    </p>\n    <slot/>\n  </div>\n</template>\n\n<script>\n  import { mapMutations } from 'vuex';\n\n  export default {\n    props: {\n      isEditable: {\n        default: true,\n        type: Boolean,\n      },\n      label: {\n        type: [String, Number],\n        required: true,\n      },\n      placeholder: {\n        type: String,\n        default: '',\n      },\n      value: {\n        type: [String, Number],\n        required: true,\n      },\n    },\n    methods: {\n      filterNumeric(e) {\n        if (!e.key.match(/[0-9\\-]/g)) {\n          e.preventDefault()\n        }\n      },\n    },\n  }\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NumericEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NumericEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NumericEditor.vue?vue&type=template&id=c30e135a&\"\nimport script from \"./NumericEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./NumericEditor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InteractionDesigner.vue?vue&type=style&index=2&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InteractionDesigner.vue?vue&type=style&index=2&lang=scss&\"","import {\n  IContext,\n  IResourceDefinition,\n  IResourceDefinitionContentTypeSpecific as IResourceDefinitionVariantOverModes,\n  SupportedContentType,\n  SupportedMode\n} from '@floip/flow-runner'\nimport ValidationException from '@floip/flow-runner/src/domain/exceptions/ValidationException'\nimport {cloneDeep, defaults, difference, find, first, findIndex, isEmpty, isEqual, keyBy, map, pick, without} from 'lodash'\nimport {ActionTree, GetterTree, MutationTree} from 'vuex'\nimport {IFlowsState} from '@/store/flow/index'\nimport {IRootState} from '@/store'\n\n\nexport const getters: GetterTree<IFlowsState, IRootState> = {\n  resourcesByUuid: ({resources}) => keyBy(resources, 'uuid')\n}\n\nexport const mutations: MutationTree<IFlowsState> = {\n  resource_add({resources}, {resource}: {resource: IResourceDefinition}) {\n    resources.push(resource)\n  },\n\n  //currently unused - see todo\n  resource_delete({resources}, {resourceId}: {resourceId: string}) {\n    //TODO - we need an action that can clean resources and then call this to actuall remove. We need logic to truly check resources are unused\n    const resourceIndex = findIndex(resources, (resource) => resource.uuid === resourceId)\n    resources.splice(resourceIndex, 1)\n  },\n\n  resource_createVariant(state, {resourceId, variant}: {resourceId: string, variant: IResourceDefinitionVariantOverModes}) {\n    // append to resource\n    findResourceWith(resourceId, state as unknown as IContext)\n        .values\n        .push(cloneDeep(variant))\n  },\n\n  resource_setValue(state, {resourceId, filter, value}: {resourceId: string, filter: IResourceDefinitionVariantOverModesFilter, value: string}) {\n    findResourceVariantOverModesWith(resourceId, filter, state as unknown as IContext)\n        .value = value || ''\n  },\n\n  // @note -- modes in this case does not tighten filter, but rather exists solely for update operation\n  resource_setModes(state,\n                     {resourceId, filter, modes}:\n                         {resourceId: string, filter: IResourceDefinitionVariantOverModesFilter} & {modes: SupportedMode[]}) {\n\n    if (isEmpty(modes)) {\n      // todo: create type that requires both resourceId & modes with (N>1) entries\n      throw new ValidationException('`mode` is required to assign mode on `IResourceDefinitionVariantOverModes`.')\n    }\n\n    // todo: this should likely validate whether or not we're intersecting with other variants with this operation\n    //       eg. variants: [{modes: [a, b]}, {modes: [c]}] => variants[0].modes = [c]\n\n    findResourceVariantOverModesWith(resourceId, filter, state as unknown as IContext)\n        .modes = modes\n  },\n}\n\nexport const actions: ActionTree<IFlowsState, IRootState> = {\n  async resource_createWith({dispatch}, {props}: {props: {uuid: string} & Partial<IResourceDefinition>}): Promise<IResourceDefinition> {\n    return {\n      ...defaults(\n        props,\n        {values: []}),\n    }\n  },\n\n  resource_setOrCreateValueModeSpecific(\n      {commit, dispatch, state},\n      {resourceId, filter, value}: {resourceId: string, filter: IResourceDefinitionVariantOverModes, value: string}) {\n\n    try {\n      // @note - `find()` raises when absent; this verifies its presence\n      findResourceVariantOverModesWith(resourceId, filter, state as unknown as IContext)\n      dispatch('resource_setValueModeSpecific', {resourceId, filter, value})\n    } catch (e) {\n      if (!(e instanceof ValidationException)) {\n        throw e\n      }\n\n      commit('resource_createVariant', {resourceId, variant: Object.assign(cloneDeep(filter), {value})})\n    }\n  },\n\n  resource_setValueModeSpecific(\n      {commit, dispatch, state},\n      {resourceId, filter, value}: {resourceId: string, filter: IResourceDefinitionVariantOverModes} & {value: string, mode: SupportedMode}) {\n\n    // find resource variant over modes\n    const\n        mode = first(filter.modes),\n        variant = findResourceVariantOverModesWith(resourceId, filter, state as unknown as IContext)\n\n    if (variant.modes.length > 1) { // need to disambiguate b/c value is spread over multiple modes\n      // remove mode from existing variant\n      commit('resource_setModes', {\n        resourceId,\n        filter: variant,\n        modes: without(variant.modes, mode)})\n\n      // // generate new variant-over-modes with single targeted mode\n      commit('resource_createVariant', {\n        resourceId,\n        variant: Object.assign(\n            cloneDeep(variant),\n            {modes: [mode], value})\n      })\n\n      return // specialized case, we're done here\n    }\n\n    commit('resource_setValue', {resourceId, filter: variant, value})\n  },\n}\n\nexport type IResourceDefinitionVariantOverModesFilter = Partial<IResourceDefinitionVariantOverModes>\nexport type IResourceDefinitionVariantOverModesFilterAsKey = Omit<IResourceDefinitionVariantOverModes, 'value'>\n\nexport type IResourceDefinitionVariantOverModesFilterWithResourceId =\n    Partial<IResourceDefinitionVariantOverModes> & {resourceId: string}\n\nexport function findResourceWith(uuid: string, {resources}: IContext): IResourceDefinition {\n  const resource = find(resources, {uuid})\n  if (resource == null) {\n    throw new ValidationException(`Unable to find resource on context: ${uuid} in ${map(resources, 'uuid')}`)\n  }\n\n  return resource\n}\n\nexport function findResourceVariantOverModesWith(\n    uuid: string,\n    filter: IResourceDefinitionVariantOverModesFilter,\n    {resources}: IContext): IResourceDefinitionVariantOverModes {\n\n  return findResourceVariantOverModesOn(\n      findResourceWith(uuid, {resources} as IContext),\n      filter)\n}\n\nexport function findResourceVariantOverModesOn(\n    resource: IResourceDefinition,\n    filter: IResourceDefinitionVariantOverModesFilter) {\n\n  const\n      keysForComparison = without(Object.keys(filter), 'modes'), // b/c we do explicit partial matching on modes\n      filterWithComparatorKeys = pick(filter, keysForComparison),\n      variant = find<IResourceDefinitionVariantOverModes>(\n          resource.values,\n          v => isEqual(filterWithComparatorKeys, pick(v, keysForComparison))\n              && difference(filter.modes, v.modes).length === 0)\n\n  if (variant == null) {\n    throw new ValidationException(`Unable to find resource variant (over modes) on context: (\n      ${resource.uuid},\n      ${JSON.stringify(filter)}) in\n        ${JSON.stringify(map(resource.values, v => pick(v, keysForComparison)))}`)\n  }\n\n  return variant\n}\n\n\nexport function findOrGenerateStubbedVariantFor(\n    resourceId: string,\n    filter: IResourceDefinitionVariantOverModesFilterAsKey,\n    {resources}: IContext): IResourceDefinitionVariantOverModes {\n\n  return findOrGenerateStubbedVariantOn(\n      findResourceWith(resourceId, {resources} as unknown as IContext),\n      filter)\n}\n\nexport function findOrGenerateStubbedVariantOn(\n    resource: IResourceDefinition,\n    filter: IResourceDefinitionVariantOverModesFilterAsKey): IResourceDefinitionVariantOverModes {\n\n  try {\n    return findResourceVariantOverModesOn(resource, filter)\n  } catch (e) {\n    if (!(e instanceof ValidationException)) {\n      throw e\n    }\n\n    return Object.assign(cloneDeep(filter), {value: ''})\n  }\n}\n\nexport function discoverContentTypesFor(mode: SupportedMode, resource?: IResourceDefinition): SupportedContentType[] {\n\n  const\n      TEXT = SupportedContentType.TEXT,\n      AUDIO = SupportedContentType.AUDIO,\n      IMAGE = SupportedContentType.IMAGE,\n      VIDEO = SupportedContentType.VIDEO\n\n  const defaultModeMappings = { // @note -- contentType order inadvertently determines render order on UI.\n    [SupportedMode.IVR]: [AUDIO], // voice\n    [SupportedMode.SMS]: [TEXT],\n    [SupportedMode.USSD]: [TEXT],\n    [SupportedMode.OFFLINE]: [TEXT, IMAGE, VIDEO], // clipboard\n    [SupportedMode.RICH_MESSAGING]: [TEXT, IMAGE, VIDEO], // social\n  }\n\n  if (!resource || !resource.values.length) {\n    return defaultModeMappings[mode]\n  }\n\n  let contentTypeOverrides: {[key in SupportedMode]?: string[]} = {}\n\n  //TODO - think harder about this - what happens when a mode has a non standard content type - e.g. ivr on a log block\n  //What happens in a future localised resource world on things like LogBlock? Do we need a log resource value for every language?\n  contentTypeOverrides = resource.values.reduce((contentTypeOverrides, value) => {\n    value.modes.reduce((contentTypeOverrides, resourceMode) => {\n      if (!contentTypeOverrides[resourceMode]) {\n        contentTypeOverrides[resourceMode] = []\n      }\n      contentTypeOverrides[resourceMode]!.push(value.contentType)\n      return contentTypeOverrides\n    }, contentTypeOverrides)\n    return contentTypeOverrides\n  }, contentTypeOverrides)\n\n  return Object.assign(defaultModeMappings, contentTypeOverrides)[mode]\n}\n","const proxy = (name, args) => global.Lang\n  ? global.Lang[name].apply(global.Lang, args)\n  : args[0]\nconst createProxy = name => function () {\n  return proxy(name, arguments)\n}\n\nexport default {\n  filters: {\n    trans: createProxy('trans'),\n    choice: createProxy('choice'),\n  },\n  methods: {\n    trans(translation) {\n      return global.Lang.trans(translation)\n    },\n  },\n}\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TreeBuilderToolbar.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TreeBuilderToolbar.vue?vue&type=style&index=0&lang=scss&\"","var map = {\n\t\"./af\": \"2bfb\",\n\t\"./af.js\": \"2bfb\",\n\t\"./ar\": \"8e73\",\n\t\"./ar-dz\": \"a356\",\n\t\"./ar-dz.js\": \"a356\",\n\t\"./ar-kw\": \"423e\",\n\t\"./ar-kw.js\": \"423e\",\n\t\"./ar-ly\": \"1cfd\",\n\t\"./ar-ly.js\": \"1cfd\",\n\t\"./ar-ma\": \"0a84\",\n\t\"./ar-ma.js\": \"0a84\",\n\t\"./ar-sa\": \"8230\",\n\t\"./ar-sa.js\": \"8230\",\n\t\"./ar-tn\": \"6d83\",\n\t\"./ar-tn.js\": \"6d83\",\n\t\"./ar.js\": \"8e73\",\n\t\"./az\": \"485c\",\n\t\"./az.js\": \"485c\",\n\t\"./be\": \"1fc1\",\n\t\"./be.js\": \"1fc1\",\n\t\"./bg\": \"84aa\",\n\t\"./bg.js\": \"84aa\",\n\t\"./bm\": \"a7fa\",\n\t\"./bm.js\": \"a7fa\",\n\t\"./bn\": \"9043\",\n\t\"./bn.js\": \"9043\",\n\t\"./bo\": \"d26a\",\n\t\"./bo.js\": \"d26a\",\n\t\"./br\": \"6887\",\n\t\"./br.js\": \"6887\",\n\t\"./bs\": \"2554\",\n\t\"./bs.js\": \"2554\",\n\t\"./ca\": \"d716\",\n\t\"./ca.js\": \"d716\",\n\t\"./cs\": \"3c0d\",\n\t\"./cs.js\": \"3c0d\",\n\t\"./cv\": \"03ec\",\n\t\"./cv.js\": \"03ec\",\n\t\"./cy\": \"9797\",\n\t\"./cy.js\": \"9797\",\n\t\"./da\": \"0f14\",\n\t\"./da.js\": \"0f14\",\n\t\"./de\": \"b469\",\n\t\"./de-at\": \"b3eb\",\n\t\"./de-at.js\": \"b3eb\",\n\t\"./de-ch\": \"bb71\",\n\t\"./de-ch.js\": \"bb71\",\n\t\"./de.js\": \"b469\",\n\t\"./dv\": \"598a\",\n\t\"./dv.js\": \"598a\",\n\t\"./el\": \"8d47\",\n\t\"./el.js\": \"8d47\",\n\t\"./en-au\": \"0e6b\",\n\t\"./en-au.js\": \"0e6b\",\n\t\"./en-ca\": \"3886\",\n\t\"./en-ca.js\": \"3886\",\n\t\"./en-gb\": \"39a6\",\n\t\"./en-gb.js\": \"39a6\",\n\t\"./en-ie\": \"e1d3\",\n\t\"./en-ie.js\": \"e1d3\",\n\t\"./en-il\": \"7333\",\n\t\"./en-il.js\": \"7333\",\n\t\"./en-in\": \"ec2e\",\n\t\"./en-in.js\": \"ec2e\",\n\t\"./en-nz\": \"6f50\",\n\t\"./en-nz.js\": \"6f50\",\n\t\"./en-sg\": \"b7e9\",\n\t\"./en-sg.js\": \"b7e9\",\n\t\"./eo\": \"65db\",\n\t\"./eo.js\": \"65db\",\n\t\"./es\": \"898b\",\n\t\"./es-do\": \"0a3c\",\n\t\"./es-do.js\": \"0a3c\",\n\t\"./es-us\": \"55c9\",\n\t\"./es-us.js\": \"55c9\",\n\t\"./es.js\": \"898b\",\n\t\"./et\": \"ec18\",\n\t\"./et.js\": \"ec18\",\n\t\"./eu\": \"0ff2\",\n\t\"./eu.js\": \"0ff2\",\n\t\"./fa\": \"8df4\",\n\t\"./fa.js\": \"8df4\",\n\t\"./fi\": \"81e9\",\n\t\"./fi.js\": \"81e9\",\n\t\"./fil\": \"d69a\",\n\t\"./fil.js\": \"d69a\",\n\t\"./fo\": \"0721\",\n\t\"./fo.js\": \"0721\",\n\t\"./fr\": \"9f26\",\n\t\"./fr-ca\": \"d9f8\",\n\t\"./fr-ca.js\": \"d9f8\",\n\t\"./fr-ch\": \"0e49\",\n\t\"./fr-ch.js\": \"0e49\",\n\t\"./fr.js\": \"9f26\",\n\t\"./fy\": \"7118\",\n\t\"./fy.js\": \"7118\",\n\t\"./ga\": \"5120\",\n\t\"./ga.js\": \"5120\",\n\t\"./gd\": \"f6b4\",\n\t\"./gd.js\": \"f6b4\",\n\t\"./gl\": \"8840\",\n\t\"./gl.js\": \"8840\",\n\t\"./gom-deva\": \"aaf2\",\n\t\"./gom-deva.js\": \"aaf2\",\n\t\"./gom-latn\": \"0caa\",\n\t\"./gom-latn.js\": \"0caa\",\n\t\"./gu\": \"e0c5\",\n\t\"./gu.js\": \"e0c5\",\n\t\"./he\": \"c7aa\",\n\t\"./he.js\": \"c7aa\",\n\t\"./hi\": \"dc4d\",\n\t\"./hi.js\": \"dc4d\",\n\t\"./hr\": \"4ba9\",\n\t\"./hr.js\": \"4ba9\",\n\t\"./hu\": \"5b14\",\n\t\"./hu.js\": \"5b14\",\n\t\"./hy-am\": \"d6b6\",\n\t\"./hy-am.js\": \"d6b6\",\n\t\"./id\": \"5038\",\n\t\"./id.js\": \"5038\",\n\t\"./is\": \"0558\",\n\t\"./is.js\": \"0558\",\n\t\"./it\": \"6e98\",\n\t\"./it-ch\": \"6f12\",\n\t\"./it-ch.js\": \"6f12\",\n\t\"./it.js\": \"6e98\",\n\t\"./ja\": \"079e\",\n\t\"./ja.js\": \"079e\",\n\t\"./jv\": \"b540\",\n\t\"./jv.js\": \"b540\",\n\t\"./ka\": \"201b\",\n\t\"./ka.js\": \"201b\",\n\t\"./kk\": \"6d79\",\n\t\"./kk.js\": \"6d79\",\n\t\"./km\": \"e81d\",\n\t\"./km.js\": \"e81d\",\n\t\"./kn\": \"3e92\",\n\t\"./kn.js\": \"3e92\",\n\t\"./ko\": \"22f8\",\n\t\"./ko.js\": \"22f8\",\n\t\"./ku\": \"2421\",\n\t\"./ku.js\": \"2421\",\n\t\"./ky\": \"9609\",\n\t\"./ky.js\": \"9609\",\n\t\"./lb\": \"440c\",\n\t\"./lb.js\": \"440c\",\n\t\"./lo\": \"b29d\",\n\t\"./lo.js\": \"b29d\",\n\t\"./lt\": \"26f9\",\n\t\"./lt.js\": \"26f9\",\n\t\"./lv\": \"b97c\",\n\t\"./lv.js\": \"b97c\",\n\t\"./me\": \"293c\",\n\t\"./me.js\": \"293c\",\n\t\"./mi\": \"688b\",\n\t\"./mi.js\": \"688b\",\n\t\"./mk\": \"6909\",\n\t\"./mk.js\": \"6909\",\n\t\"./ml\": \"02fb\",\n\t\"./ml.js\": \"02fb\",\n\t\"./mn\": \"958b\",\n\t\"./mn.js\": \"958b\",\n\t\"./mr\": \"39bd\",\n\t\"./mr.js\": \"39bd\",\n\t\"./ms\": \"ebe4\",\n\t\"./ms-my\": \"6403\",\n\t\"./ms-my.js\": \"6403\",\n\t\"./ms.js\": \"ebe4\",\n\t\"./mt\": \"1b45\",\n\t\"./mt.js\": \"1b45\",\n\t\"./my\": \"8689\",\n\t\"./my.js\": \"8689\",\n\t\"./nb\": \"6ce3\",\n\t\"./nb.js\": \"6ce3\",\n\t\"./ne\": \"3a39\",\n\t\"./ne.js\": \"3a39\",\n\t\"./nl\": \"facd\",\n\t\"./nl-be\": \"db29\",\n\t\"./nl-be.js\": \"db29\",\n\t\"./nl.js\": \"facd\",\n\t\"./nn\": \"b84c\",\n\t\"./nn.js\": \"b84c\",\n\t\"./oc-lnc\": \"167b\",\n\t\"./oc-lnc.js\": \"167b\",\n\t\"./pa-in\": \"f3ff\",\n\t\"./pa-in.js\": \"f3ff\",\n\t\"./pl\": \"8d57\",\n\t\"./pl.js\": \"8d57\",\n\t\"./pt\": \"f260\",\n\t\"./pt-br\": \"d2d4\",\n\t\"./pt-br.js\": \"d2d4\",\n\t\"./pt.js\": \"f260\",\n\t\"./ro\": \"972c\",\n\t\"./ro.js\": \"972c\",\n\t\"./ru\": \"957c\",\n\t\"./ru.js\": \"957c\",\n\t\"./sd\": \"6784\",\n\t\"./sd.js\": \"6784\",\n\t\"./se\": \"ffff\",\n\t\"./se.js\": \"ffff\",\n\t\"./si\": \"eda5\",\n\t\"./si.js\": \"eda5\",\n\t\"./sk\": \"7be6\",\n\t\"./sk.js\": \"7be6\",\n\t\"./sl\": \"8155\",\n\t\"./sl.js\": \"8155\",\n\t\"./sq\": \"c8f3\",\n\t\"./sq.js\": \"c8f3\",\n\t\"./sr\": \"cf1e\",\n\t\"./sr-cyrl\": \"13e9\",\n\t\"./sr-cyrl.js\": \"13e9\",\n\t\"./sr.js\": \"cf1e\",\n\t\"./ss\": \"52bd\",\n\t\"./ss.js\": \"52bd\",\n\t\"./sv\": \"5fbd\",\n\t\"./sv.js\": \"5fbd\",\n\t\"./sw\": \"74dc\",\n\t\"./sw.js\": \"74dc\",\n\t\"./ta\": \"3de5\",\n\t\"./ta.js\": \"3de5\",\n\t\"./te\": \"5cbb\",\n\t\"./te.js\": \"5cbb\",\n\t\"./tet\": \"576c\",\n\t\"./tet.js\": \"576c\",\n\t\"./tg\": \"3b1b\",\n\t\"./tg.js\": \"3b1b\",\n\t\"./th\": \"10e8\",\n\t\"./th.js\": \"10e8\",\n\t\"./tk\": \"5aff\",\n\t\"./tk.js\": \"5aff\",\n\t\"./tl-ph\": \"0f38\",\n\t\"./tl-ph.js\": \"0f38\",\n\t\"./tlh\": \"cf75\",\n\t\"./tlh.js\": \"cf75\",\n\t\"./tr\": \"0e81\",\n\t\"./tr.js\": \"0e81\",\n\t\"./tzl\": \"cf51\",\n\t\"./tzl.js\": \"cf51\",\n\t\"./tzm\": \"c109\",\n\t\"./tzm-latn\": \"b53d\",\n\t\"./tzm-latn.js\": \"b53d\",\n\t\"./tzm.js\": \"c109\",\n\t\"./ug-cn\": \"6117\",\n\t\"./ug-cn.js\": \"6117\",\n\t\"./uk\": \"ada2\",\n\t\"./uk.js\": \"ada2\",\n\t\"./ur\": \"5294\",\n\t\"./ur.js\": \"5294\",\n\t\"./uz\": \"2e8c\",\n\t\"./uz-latn\": \"010e\",\n\t\"./uz-latn.js\": \"010e\",\n\t\"./uz.js\": \"2e8c\",\n\t\"./vi\": \"2921\",\n\t\"./vi.js\": \"2921\",\n\t\"./x-pseudo\": \"fd7e\",\n\t\"./x-pseudo.js\": \"fd7e\",\n\t\"./yo\": \"7f33\",\n\t\"./yo.js\": \"7f33\",\n\t\"./zh-cn\": \"5c3a\",\n\t\"./zh-cn.js\": \"5c3a\",\n\t\"./zh-hk\": \"49ab\",\n\t\"./zh-hk.js\": \"49ab\",\n\t\"./zh-mo\": \"3a6c\",\n\t\"./zh-mo.js\": \"3a6c\",\n\t\"./zh-tw\": \"90ea\",\n\t\"./zh-tw.js\": \"90ea\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"4678\";","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// import audio from './audio'\n// import multimediaUpload from './multimediaUpload'\nimport trees from './trees'\n\nexport default {\n  modules: {\n    // audio,\n    // multimediaUpload,\n    trees, // actions isolated to vuej app\n  },\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Block.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Block.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BuilderCanvas.vue?vue&type=style&index=0&id=4cc35a95&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BuilderCanvas.vue?vue&type=style&index=0&id=4cc35a95&scoped=true&lang=css&\"","<template>\n  <div class=\"interaction-designer-contents\">\n    <tree-builder-toolbar/>\n\n    <div class=\"tree-sidebar-container\">\n      <div v-if=\"activeBlock\" class=\"tree-sidebar\"\n           :class=\"[`category-${blockClasses[activeBlock.type].category}`]\">\n        <div class=\"tree-sidebar-edit-block\"\n             :data-block-type=\"activeBlock && activeBlock.type\"\n             :data-for-block-id=\"activeBlock && activeBlock.uuid\">\n\n          <div v-if=\"activeBlock\"\n               :is=\"`Flow${activeBlock.type.replace(/\\\\/g, '')}`\"\n               :block=\"activeBlock\"\n               :flow=\"activeFlow\" />\n\n        </div>\n\n\n<!--        <tree-editor v-if=\"sidebarType === 'TreeEditor'\"-->\n<!--                     :jsonValidationResults=\"jsonValidationResults\"-->\n<!--                     :isTreeValid=\"isTreeValid\"/>-->\n\n<!--        <tree-viewer v-if=\"sidebarType === 'TreeViewer'\"/>-->\n\n<!--        <block-viewer-->\n<!--          :key=\"jsKey\"-->\n<!--          v-if=\"sidebarType === 'BlockViewer'\"-->\n<!--          :data-for-block-id=\"jsKey\" />-->\n\n      </div>\n      <div v-else class=\"tree-sidebar\">\n        <div class=\"tree-sidebar-edit-block\">\n          <flow-editor :flow=\"activeFlow\" />\n        </div>\n      </div>\n    </div>\n\n    <div class=\"tree-contents\"\n         :x-style=\"{'min-height': `${designerWorkspaceHeight}px`}\">\n      <builder-canvas @click.native=\"handleCanvasSelected\" />\n    </div>\n  </div>\n</template>\n\n<script>\n  import lang from '@/lib/filters/lang'\n  import lodash, {forEach, invoke} from 'lodash'\n  import Vue from 'vue'\n  import {mapActions, mapGetters, mapMutations, mapState} from 'vuex'\n  // import {affix as Affix} from 'vue-strap'\n  // import {SelectOneResponseBlock} from '../components/interaction-designer/block-types/MobilePrimitives_SelectOneResponseBlock.vue'\n\n  // import * as BlockTypes from './block-types'\n  // import JsPlumbBlock from './JsPlumbBlock'\n\n  import treesStore from '@/store/trees' // needs to be registered separately because it doesn't currently support namespacing\n  import flowStore from '@/store/flow'\n  import builderStore from '@/store/builder'\n\n\n  // import TreeEditor from './TreeEditor'\n  // import TreeViewer from './TreeViewer'\n  // import LegacyInteractionDesigner from './InteractionDesigner.legacy'\n  // import TreeUpdateConflictModal from './TreeUpdateConflictModal';\n  import TreeBuilderToolbar from '@/components/interaction-designer/toolbar/TreeBuilderToolbar.vue'\n  import FlowEditor from '@/components/interaction-designer/flow-editors/FlowEditor.vue'\n  import {BuilderCanvas} from '@/components/interaction-designer/BuilderCanvas'\n\n  // import '../TreeDiffLogger'\n\n  export default {\n    props: ['id', 'mode'],\n\n    mixins: [lang],\n\n    components: {\n      // ...BlockTypes,\n      // Affix,\n      // JsPlumbBlock,\n      // TreeEditor,\n      // TreeViewer,\n      TreeBuilderToolbar,\n      BuilderCanvas,\n      FlowEditor,\n      // TreeUpdateConflictModal,\n    },\n\n    data() {\n      return {\n        pureVuejsBlocks: [ // todo: move this to BlockClassDetails spec // an inversion can be \"legacy types\"\n          'CallBackWithCallCenterBlock',\n          'CollaborativeFilteringQuestionBlock',\n          'CollaborativeFilteringRatingBlock',\n          'CollaborativeFilteringRatioBranchBlock',\n          'CreateSubscriberBlock',\n          'CurrentTimeBranchBlock',\n          'DirectorySelectionBlock',\n          'EntitySelectionBlock',\n          'GenerateCodeBlock',\n          'GroupPropertyBlock',\n          'SubscriberPropertiesSnapshotBlock',\n          'SubscriberPropertyBlock',\n          'SummaryBlock',\n          'ValidateCodeBlock',\n          'WebhookBlock',\n          'WebhookContentBlock',\n          'RecordGroupMessageBlock',\n          'PlayGroupMessageBlock',\n        ]}\n    },\n\n    computed: {\n      ...mapGetters([\n        'selectedBlock',\n        'isEditable',\n        'hasChanges',\n        'hasIssues',\n        'isTreeSaving',\n        'isTreeValid',\n        'jsonValidationResults',\n        'validationResults',\n      ]),\n      ...mapState({\n\n        // todo: we'll need to do width as well and use margin-right:365 to allow for sidebar\n        designerWorkspaceHeight: ({trees: {tree, ui}}) => ui.designerWorkspaceHeight,\n\n\n\n        tree: ({trees: {tree, ui}}) => tree,\n        validationResultsEmptyTree: ({trees: {tree, ui}}) => !tree.blocks.length,\n        hasVoice: ({trees: {tree}}) => tree.details.hasVoice,\n        hasSms: ({trees: {tree}}) => tree.details.hasSms,\n        hasUssd: ({trees: {tree}}) => tree.details.hasUssd,\n        hasSocial: ({trees: {tree}}) => tree.details.hasSocial,\n        hasClipboard: ({trees: {tree}}) => tree.details.hasClipboard,\n        blockClasses:  ({trees: {ui}}) => ui.blockClasses,\n      }),\n\n      ...mapGetters('flow', ['activeFlow']),\n      ...mapGetters('builder', ['activeBlock']),\n\n      jsKey() {\n        return lodash.get(this.selectedBlock, 'jsKey')\n      },\n\n      isPureVueBlock() { // pure vuejs block types handle readonly mode on their own\n        return _.includes(this.pureVuejsBlocks, lodash.get(this.selectedBlock, 'type'))\n      },\n\n      sidebarType() {\n        const\n            blockType = lodash.get(this.selectedBlock, 'type'),\n            blockViewerType = blockType && (this.isPureVueBlock ? blockType : 'BlockViewer')\n\n        return this.isEditable\n            ? blockType || 'TreeEditor'\n            : blockViewerType || 'TreeViewer'\n      },\n    },\n\n    created() {\n      const {$store} = this\n      const modules = {\n        // `treesStore` was originally implemented globally, expecting it's state at root\n        ...treesStore.modules,\n        flow: flowStore,\n        builder: builderStore}\n\n      forEach(modules, (v, k) =>\n        !$store.hasModule(k) && $store.registerModule(k, v))\n\n      global.builder = this // initialize global reference for legacy + debugging\n\n      this.registerBlockTypes()\n\n      this.initializeTreeModel()\n      this.updateIsEditableFromParams(this.mode) // `this.mode` comes from captured param in js-routes\n    },\n\n    activated() {\n      this.deselectBlocks() // todo: remove once we have jsKey in our js-route\n    },\n\n    /** @note - mixin's mount() is called _before_ local mount() (eg. InteractionDesigner.legacy::mount() is 1st) */\n    mounted() {\n      this.hoistResourceViewerToPushState.bind(this, this.$route.hash)\n      this.deselectBlocks()\n      this.discoverTallestBlockForDesignerWorkspaceHeight({aboveTallest: true})\n\n      console.debug('Vuej tree interaction designer mounted!')\n\t\t},\n\n    methods: {\n        ...mapMutations(['deselectBlocks']),\n        ...mapMutations('builder', ['activateBlock']),\n\n        ...mapActions([\n          'attemptSaveTree',\n          'discoverTallestBlockForDesignerWorkspaceHeight',\n          'initializeTreeModel']),\n\n      async registerBlockTypes() {\n        const {blockClasses} = this\n\n        forEach(blockClasses, async ({type}) => {\n          const normalizedType = type.replace('\\\\', '_')\n          const typeWithoutSeparators = type.replace(/\\\\/g, '')\n          const exported = await import(\n            `../components/interaction-designer/block-types/${normalizedType}Block.vue`)\n\n          invoke(exported, 'install', this)\n          Vue.component(`Flow${typeWithoutSeparators}`, exported.default)\n        })\n      },\n\n      handleCanvasSelected({target}) {\n        if (!target.classList.contains('builder-canvas')) {\n          console.debug('InteractionDesigner', 'Non-canvas selection mitigated')\n          return\n        }\n\n        this.activateBlock({blockId: null})\n      },\n\n      updateIsEditableFromParams(mode) {\n        const isEditable = +this.discoverIsEditableFrom(mode, this.$route.hash, !!app.ui.isEditableLocked)\n        this.$store.commit('updateIsEditable', {value: isEditable})\n      },\n\n      /** --------------------------------| has-editable-locked | not-editable-locked |\n       | mode-is-absent+view-url-suffix   |        0            |     0               |\n       | mode-is-absent+edit-url-suffix   |        0 (r=>view)  |     1               |\n       | mode-is-absent+absent-url-suffix |        0 (r=>view)  |     0 (r=>view)     | <- Equivalent to /view\n       | mode-is-view                     |        0            |     0               |\n       | mode-is-view+edit-url-suffix     |        0            |     0               |\n       | mode-is-edit                     |        0 (r=>view)  |     1               |\n       | mode-is-edit+view-url-suffix     |        0 (r=>view)  |     1               |\n       ------------------------------------------------------------------------------ */\n      discoverIsEditableFrom(mode, hash, isEditableLocked) {\n        if (isEditableLocked) {\n          return false\n        }\n\n        return !isEditableLocked && mode === 'edit'|| !mode && lodash.endsWith(hash, '/edit')\n      },\n\n\t\t  hoistResourceViewerToPushState(hash) {\n        if (!_.endsWith(hash, '/resource-viewer')) {\n          return\n        }\n\n        this.$router.history.replace(`/trees/${this.id}/resource-viewer`)\n      },\n    },\n\t}\n</script>\n\n<style src=\"bootstrap/dist/css/bootstrap.css\"></style>\n<style src=\"bootstrap/dist/css/bootstrap-theme.css\"></style>\n<!--<style src=\"../css/voto3.css\"></style>-->\n<!--<style src=\"../css/InteractionDesigner.css\"></style>-->\n\n<style lang=\"scss\">\n  // Colors + dimensions\n  $dot-size: 1px;\n  $dot-space: 22px;\n  $dot-color: #333;\n  $bg-color: #fcfcfc;\n\n  $toolbar-height: 56px;\n  $sidebar-width: 365px;\n\n  body {\n    background:\n      linear-gradient(90deg, $bg-color ($dot-space - $dot-size), transparent 1%) center,\n      linear-gradient($bg-color ($dot-space - $dot-size), transparent 1%) center, $dot-color;\n    background-size: $dot-space $dot-space;\n  }\n\n  .tree-sidebar-container {\n    position: fixed;\n    right: 0;\n    top: 0;\n    z-index: 2*10;\n\n    height: 100vh;\n    width: $sidebar-width;\n    overflow-y: scroll;\n\n    padding: 1em;\n    padding-top: $toolbar-height;\n    transition: right 200ms ease-in-out;\n\n    .tree-sidebar {\n      background-color: #eee;\n      border: 1px solid lightgray;\n      border-radius: 0;\n      box-shadow: 0 3px 6px #CACACA;\n\n      padding: 1em;\n      margin-top: 1em;\n\n      transition:\n        200ms background-color ease-in-out,\n        200ms border-color ease-in-out,\n        200ms border-radius ease-in-out;\n    }\n\n    &.slide-out {\n      right: -$sidebar-width;\n    }\n  }\n\n  .tree-builder-toolbar {\n    position: fixed;\n    z-index: 3*10;\n    left: 0;\n    top: 0;\n\n    width: 100vw;\n\n    border-bottom: 1px solid darkgrey;\n    background: #eee;\n\n    box-shadow: 0 3px 6px #CACACA;\n  }\n\n\n  // color categorizations\n  $category-0-faint: #fbfdfb;\n  $category-0-light: #97BD8A;\n  $category-0-dark: #38542f;\n  $category-1-faint: #fdfdfe;\n  $category-1-light: #6897BB;\n  $category-1-dark: #30516a;\n  $category-2-faint: #fdfbf8;\n  $category-2-light: #C69557;\n  $category-2-dark: #6e4e25;\n\n  .tree-sidebar-container {\n    .tree-sidebar {\n      &.category-0 {\n        border-color: $category-0-light;\n        background-color: $category-0-faint;\n        border-radius: 0.3em;\n\n        h3 {\n          color: $category-0-dark;\n        }\n      }\n\n      &.category-1 {\n        border-color: $category-1-light;\n        background-color: $category-1-faint;\n        border-radius: 0.3em;\n\n        h3 {\n          color: $category-1-dark;\n        }\n      }\n\n      &.category-2 {\n        border-color: $category-2-light;\n        background-color: $category-2-faint;\n        border-radius: 0.3em;\n\n        h3 {\n          color: $category-2-dark;\n        }\n      }\n    }\n  }\n\n  .block {\n    @mixin block-category($i, $faint, $light, $dark) {\n      &.category-#{$i} {\n        border-color: $light;\n\n        .block-type {\n          color: $light;\n        }\n\n        .block-exits .block-exit {\n          .block-exit-tag {\n            background-color: $light;\n          }\n\n          &.activated {\n            border-color: $light;\n          }\n        }\n\n        .block-target:hover {\n          border: 1px dashed $light;\n        }\n\n        &.active {\n          background-color: $faint;\n        }\n      }\n    }\n\n    @include block-category(0, $category-0-faint, $category-0-light, $category-0-dark);\n    @include block-category(1, $category-1-faint, $category-1-light, $category-1-dark);\n    @include block-category(2, $category-2-faint, $category-2-light, $category-2-dark);\n  }\n\n  // @note - these styles have been extracted so the output can be reused between storybook and voto5\n  /*@import \"resources/assets/js/trees/components/InteractionDesigner.scss\";*/\n</style>\n","import axios, {CancelToken} from 'axios'\nimport lodash from 'lodash'\nimport qs from 'qs'\nimport Vue from 'vue'\n\n\nexport const Statuses = { // todo: are these values odd?\n  PENDING: -1,\n  UNINITIALIZED: 0,\n  SUCCESS: 1,\n  FAILURE: 2\n}\n\nexport const FlightStatusToNameMap = {\n  [Statuses.PENDING]: 'pending',\n  [Statuses.UNINITIALIZED]: 'uninitialized',\n  [Statuses.SUCCESS]: 'success',\n  [Statuses.FAILURE]: 'failure'\n}\n\nexport default {\n  namespaced: true,\n\n  state() {\n    return {flights: {}}\n  },\n\n  mutations: {\n    create({flights}, {key, promise, cancellation}) {\n      Vue.set(flights, key, {\n        status: Statuses.PENDING,\n        progress: 0,\n        error: null,\n        promise,\n        cancel: cancellation})\n    },\n\n    cancel({flights}, {key}) {\n      lodash.invoke(flights, `${key}.cancel`)\n    },\n  },\n\n  actions: {\n    async create({commit, dispatch, state: {flights}}, {key, promise, cancellation}) {\n      // todo: figure out queuing + streaming\n      // todo: convert to .push() + flights.invoke('cancel')\n\n      const previousFlight = flights[key]\n      if (previousFlight && cancellation) {\n        previousFlight.cancel()\n      }\n\n      commit('create', {key, promise, cancellation})\n      const flight = flights[key]\n      flight.id = `flight-${lodash.uniqueId()}`\n\n      try {\n        const response = await promise\n        Object.assign(flight, {status: Statuses.SUCCESS, progress: 100})\n\n        return response // surface response to next promises\n      } catch (e) { // failed request\n        flight.error = e\n        flight.status = Statuses.FAILURE\n        return null\n      }\n    },\n\n    createCancellableXhr({commit, dispatch, state}, config) {\n      const\n          {key} = config,\n          {token, cancel: cancellation} = CancelToken.source(),\n          promise = axios.request({\n            paramsSerializer: p => qs.stringify(p, {arrayFormat: 'bracket'}),\n            cancelToken: token,\n            onUploadProgress: null, // todo: migrate file upload to use this flights api\n            onDownloadProgress: null,\n            headers: {'X-Requested-With': 'XMLHttpRequest'},\n            ...config})\n\n      return dispatch('create', {key, promise, cancellation})\n    },\n\n    resetStatus({commit, dispatch, state: {flights}}, {key}) {\n      if (!flights[key]) {\n        return\n      }\n      flights[key].status = Statuses.UNINITIALIZED\n      commit('cancel', {key})\n\n\n      // should rather be a m reset mutation to reset other values as well as cancel()\n      // eg. (value, error, progress, status, cancel-token), the whole shebang!\n\n    },\n\n    cancelAll({commit, dispatch, state: {flights}}) {\n      for (const key of Object.keys(flights)) {\n       commit('cancel', {key})\n      }\n    },\n  },\n  getters: {\n    hasPendingFlight(state) {\n      return Object.values(state.flights).find(f => f.status === Statuses.PENDING)\n    },\n  },\n}\n","import axios from 'axios'\nimport lodash from 'lodash'\nimport {get, set} from 'lodash'\nimport Vue from 'vue'\n\nimport {routeFrom} from '@/lib/mixins/Routes'\nimport flights from 'store/common/flight-monitor'\n\nimport flow from 'lodash/fp/flow'\nimport pickBy from 'lodash/fp/pickBy'\nimport _every from 'lodash/fp/every'\nimport {bootstrapLegacyGlobalDependencies} from './bootstrap-legacy-global-dependencies'\n\nconst every = _every.convert({cap: false})\n\nclass ValidationError extends Error {\n  constructor(validationResults) {\n    super()\n    this.validationResults = validationResults\n  }\n}\n\nexport default {\n  modules: {flights},\n\n  state() {\n    const {\n      app,\n      __AUDIO__: audio,\n      __TREES_UI__: ui,\n    } = bootstrapLegacyGlobalDependencies()\n\n    // todo: audio recording feature is likely to be unavailable for standalone app - How do we want to isolate these?\n    set(app, 'audioChoice.audioLibrary', audio.library)\n    set(app, 'audioChoice.recorderList', audio.recording.recorders)\n\n    lodash.defaultsDeep(ui, {\n      audioFiles: audio.library,\n      callCenterQueues: null,\n      previousTreeJson: JSON.stringify(ui.originalTreeJson),\n      /** @note - `validationResults` has two states:\n       *            (1) `null` - indicating we have yet to save the tree since loading the page\n       *            (2) non-null or `[]` - indicating the tree has been saved and has gone through server-side validation */\n      validationResults: ui.originalValidationResults, // todo: this is an empty list on page load, and shouldn't be?\n      originalTreeJsonValidationResults: null,\n      selectedBlock: null,\n      designerWorkspaceHeight: 1400,\n      currentZoom: 1,\n      batchMatchAudio: {\n        results: null,\n        status: 0,\n        message: null,\n        isFailure: false,\n        isPending: false,\n        isComplete: false\n      },\n      treeUpdateConflict: null,\n      enabledFeatures: [\n          /** @see \\Voto5\\Http\\Controllers\\V3TreesController::get_editTree */\n      ],\n    })\n    return {\n      tree: null,\n      ui,\n    }\n  },\n\n  getters: {\n\n    isFeatureCallCenterQueuesEnabled: ({ui}) => lodash.find(ui.enabledFeatures, feature => feature === 'callCenterQueues'),\n    isFeatureCallToRecordEnabled: ({ui}) => lodash.find(ui.enabledFeatures, feature => feature === 'callToRecord'),\n    isFeatureMultimediaUploadEnabled: ({ui}) => lodash.find(ui.enabledFeatures, feature => feature === 'multimediaUpload'),\n    isFeatureTreesBatchLinkAudioEnabled: ({ui}) => lodash.find(ui.enabledFeatures, feature => feature === 'treesBatchLinkAudio'),\n    isFeatureAddSubscriberPropertyFieldEnabled: ({ui}) => lodash.find(ui.enabledFeatures, feature => feature === 'addSubscriberPropertyField'),\n    isFeatureFloipPushEnabled: ({ui}) => lodash.find(ui.enabledFeatures, feature => feature === 'floipPush'),\n    isFeatureTreeSaveEnabled: ({ui}) => lodash.find(ui.enabledFeatures, feature => feature === 'treeSave'),\n    isFeatureTreeSendEnabled: ({ui}) => lodash.find(ui.enabledFeatures, feature => feature === 'treeSend'),\n    isFeatureTreeDuplicateEnabled: ({ui}) => lodash.find(ui.enabledFeatures, feature => feature === 'treeDuplicate'),\n    isFeatureTreeViewVersionsEnabled: ({ui}) => lodash.find(ui.enabledFeatures, feature => feature === 'treeViewVersions'),\n    isFeatureTreeDuplicateOfEnabled: ({ui}) => lodash.find(ui.enabledFeatures, feature => feature === 'treeDuplicateOf'),\n    isFeatureUpdateInteractionTotalsEnabled: ({ui}) => lodash.find(ui.enabledFeatures, feature => feature === 'updateInteractionTotals'),\n    isFeatureAudioUploadEnabled: ({ui}) => lodash.find(ui.enabledFeatures, feature => feature === 'audioUpload'),\n    isFeatureViewResultsEnabled: ({ui}) => lodash.find(ui.enabledFeatures, feature => feature === 'viewResults'),\n\n\t\tselectedBlock: ({tree, ui}, getters, rootState) => lodash.find(get(tree, 'blocks', []), {jsKey: ui.selectedBlock}),\n\n    subscriberPropertyFields: ({ui}) => lodash.get(ui, \"subscriberPropertyFields\"),\n\n\t\tinteractiveBlockClasses: ({ui}, getters, rootState) => lodash.pickBy(ui.blockClasses, (value, key) => value.is_interactive),\n\n\t\tinteractiveBlocksInTree: ({tree}, {interactiveBlockClasses}, rootState) =>\n\t\t\t\tlodash.filter(tree.blocks, b =>\n\t\t\t\t\t\tlodash.includes(Object.keys(interactiveBlockClasses), b.type)\n\t\t\t\t),\n\n    isEditable: ({ui}) => !!ui.isEditable,\n\n    // todo: trip a debounced version of this (for larger trees)\n    // todo: which is faster lodash deep isEqual or JSON.stringify() ?\n    hasChanges: ({tree, ui}) => ui.previousTreeJson !== JSON.stringify(tree),\n\n    hasIssues({tree, ui}) {\n      const {\n        validationResults,\n        originalValidationResults: validationResultsFromPageLoad,\n        validationResults: hasSavedSinceLoad,\n      } = ui\n\n      return (hasSavedSinceLoad && !_.isEmpty(validationResults))\n          || (!hasSavedSinceLoad && !_.isEmpty(validationResultsFromPageLoad))\n          || !tree.blocks.length\n    },\n\n    isTreeSaving(state) {\n      return state.ui.saveCurrentlyInProgress\n    },\n\n    hasClipboard: ({tree}) => tree.details.hasClipboard,\n\n    isSelectedBlockSupportedForSummary({ui}, getters) {\n      if (!getters.selectedBlock) {\n        return false\n      }\n      return lodash.get(ui.blockClasses[getters.selectedBlock.type], 'isSummarizable', false)\n    },\n\n    canSelectedBlockSetSubscriberProperty({ui}, getters) {\n      if (!getters.selectedBlock) {\n        return false\n      }\n      return lodash.get(ui.blockClasses[getters.selectedBlock.type], 'canSetSubscriberProperty', false)\n    },\n\n    languageSelectors: ({ui}) => ui.languageSelectors,\n\n    isBlockAvailableByBlockClass(state) {\n      return lodash.mapValues(state.ui.blockClasses, (blockClass) => {\n        const contentTypesToEnabledStatus = lodash.get(blockClass, 'isEnabledForContentType', [])\n\n        return flow(\n            pickBy((isEnabled, contentType) => state.tree.details[`has${lodash.startCase(contentType)}`]),\n            every((isEnabled, contentType) => contentTypesToEnabledStatus[contentType]),\n        )(contentTypesToEnabledStatus)\n      })\n    },\n\n    // todo: is this an accurate inverse of trees::hasIssues from ResourceViewer ?\n    isTreeValid(state) {\n      return state.tree.blocks.length\n          && !state.ui.originalTreeJsonValidationResults\n          && lodash.isEmpty(state.ui.validationResults)\n    },\n\n    jsonValidationResults(state) {\n      return state.ui.originalTreeJsonValidationResults\n    },\n\n    // Duplicating \\Voto\\Core\\Trees\\Tree::getTitle\n    treeTitle: ({tree}) => tree.title || 'Untitled Tree',\n\n    languages: ({ui}) => ui.languages || [],\n    availableAudio: ({ui}) => ui.audioFiles || [],\n\n\n    validationResults: ({ui}) => ui.validationResults,\n\n    treeCreatedAt: ({tree}) => tree.createdAt.date,\n    treeEditedAt: ({tree}) => tree.editedAt.date,\n    treeUpdatedAt: ({tree}) => tree.updatedAt.date,\n  },\n\n  mutations: {\n    setWorkingTree(state, {tree: treeData}) {\n      const tree = new app.Tree(treeData)\n      /** @property app.tree\n       *  @deprecated We'll only need this until we've eradicated references in legacy. */\n      app.tree = tree\n      state.tree = tree.attributes\n    },\n\n    setDesignerWorkspaceHeight({tree, ui}, {height}) {\n      ui.designerWorkspaceHeight = height\n    },\n\n    setSelectedBlock({tree, ui}, {jsKey}) {\n      ui.selectedBlock = jsKey || ''\n    },\n\n    deselectBlocks({tree, ui}) {\n      ui.selectedBlock = ''\n    },\n\n    updateTreeDetailsWith({tree, ui}, {key, value}) {\n      tree.details[key] = value\n    },\n\n    updateBlockCustomDataFor({tree, ui}, {jsKey, key, value}) {\n      const block = lodash.find(tree.blocks, {jsKey})\n      Vue.set(block.customData, key, value)\n    },\n\n    updateBlockCustomDataWithNestedKeyFor({tree, ui}, {jsKey, nestedKey, value}) {\n      const block = lodash.find(tree.blocks, {jsKey})\n      let customData = lodash.cloneDeep(block.customData)\n      lodash.set(customData, nestedKey, value)\n      block.customData = customData\n    },\n\n\t\tupdateBlockUiDataFor({tree, ui}, {jsKey, key, value}) {\n      const block = lodash.find(tree.blocks, {jsKey})\n      Vue.set(block.uiData, key, value)\n    },\n\n\t\tupdateMaxNumericDigits({tree, ui}, {value}) {\n\t\t\tconst selectedBlock = lodash.find(tree.blocks, {jsKey: ui.selectedBlock})\n\t\t\tVue.set(selectedBlock, 'customData.maxNumericDigits', value)\n\t\t},\n\n\t\tupdateBlockContentFor({tree, ui}, {type, langId, jsKey, value}) {\n\t\t\tconst block = lodash.find(tree.blocks, {jsKey})\n\t\t\tif (type === 'social') { //social has nested text content\n\t\t\t\tif (!block.socialContent[langId]) {\n\t\t\t\t\tVue.set(block.socialContent, langId, {})\n\t\t\t\t}\n\t\t\t\tVue.set(block.socialContent[langId], 'text', value)\n\t\t\t} else {\n\t\t\t\tblock[`${type}Content`] = {\n\t\t\t\t\t...block[`${type}Content`],\n\t\t\t\t\t...{[langId]: value}}\n\t\t\t}\n\t\t},\n\n    updateBlockFileContentFor({tree, ui}, {langId, jsKey, fileUrl, fileId, fileType, mimeType, contentType}) {\n\t\t\tconst block = lodash.find(tree.blocks, {jsKey})\n\n\n      let content = lodash.get(block, contentType + 'Content')\n\t\t\tif (content[langId] === undefined) {\n\t\t\t\tVue.set(content, langId, {})\n\t\t\t}\n\t\t\tVue.set(content[langId], 'fileUrl', fileUrl)\n      Vue.set(content[langId], 'fileId', fileId)\n\t\t\tVue.set(content[langId], 'fileType', fileType)\n\t\t\tVue.set(content[langId], 'mimeType', mimeType)\n\t\t},\n\n\t\tupdateBlockFileContentForAllLanguages({tree, ui}, {jsKey, fileUrl, fileId, fileType, mimeType, contentType}) {\n\t\t\tconst block = lodash.find(tree.blocks, {jsKey})\n\n\n      let content = lodash.get(block, contentType + 'Content')\n\n      Vue.set(content, 'allLanguagesFileUrl', fileUrl)\n      Vue.set(content, 'allLanguagesFileId', fileId)\n\t\t\tVue.set(content, 'allLanguagesFileType', fileType)\n\t\t\tVue.set(content, 'allLanguagesMimeType', mimeType)\n\t\t},\n\n\t\tinitBlockAutoGenStateFor({tree, ui}, {type, jsKey}) {\n\t\t\tconst block = lodash.find(tree.blocks, {jsKey})\n\t\t\tVue.set(block, `${type}AutogenLangs`, [])\n\t\t},\n\n\t\tupdateBlockAutoGenStateFor({tree, ui}, {type, langId, jsKey, value: enable}) {\n\t\t\tconst block = lodash.find(tree.blocks, {jsKey}),\n\t\t\t\t\ti = block[`${type}AutogenLangs`].indexOf(+langId),\n\t\t\t\t\tabsent = i === -1\n\n\t\t\tif (enable) {\n\t\t\t\tabsent && block[`${type}AutogenLangs`].push(+langId)\n\t\t\t} else {\n\t\t\t\t!absent && block[`${type}AutogenLangs`].splice(i, 1)\n\t\t\t}\n\t\t},\n\n\t\tupdateAudioFileFor({tree, ui}, {langId, jsKey, value}) {\n\t\t\tconst block = lodash.find(tree.blocks, {jsKey})\n\n\t\t\tblock.audioFiles = { // schedules a redraw\n\t\t\t\t...block.audioFiles,\n\t\t\t\t...{[langId]: value}}\n\n\t\t\t// using delete because we depend on audioFile key presence in legacy\n\t\t\t!value && delete block.audioFiles[langId]\n\t\t},\n\n\t\tupdateReviewedStateFor({tree, ui}, {langId, jsKey, value}) {\n\t\t\tconst {customData: data} = lodash.find(tree.blocks, {jsKey})\n\t\t\tdata.reviewed[langId] = value\n\t\t},\n\n\t\tsetBatchMatchAudioResultsTo({tree, ui}, {value, status, message}) {\n\t\t\t// ui.batchMatchAudioStatus = value\n\t\t\tlodash.extend(ui.batchMatchAudio, {\n\t\t\t\tresults: value,\n\t\t\t\tstatus: status,\n\t\t\t\tmessage: message,\n\t\t\t\tisEmpty: lodash.chain(value) // isEmpty === {\"block_1504124559063_84\":{\"7\":null,\"8\":null,\"9\":null}\n\t\t\t\t\t\t.values()\n\t\t\t\t\t\t.map((matchesByLang) => lodash.values(matchesByLang))\n\t\t\t\t\t\t.flatten()\n\t\t\t\t\t\t.filter()\n\t\t\t\t\t\t.isEmpty()\n\t\t\t\t\t\t.value(),\n\t\t\t\tisFailure: status === 0,\n\t\t\t\tisPending: status === -1,\n\t\t\t\tisComplete: status === 1})\n\t\t},\n\n\t\tupdateIsEditable({ui}, {value}) {\n    \tui.isEditable = value\n\t\t},\n\n\t\tsetContentTypeEnabled({tree}, {contentType, isEnabled}) {\n\t\t\ttree[`has${lodash.upperFirst(contentType)}`] = +isEnabled\n    },\n\n    addSubscriberPropertyField({ui}, {property}) {\n      ui.subscriberPropertyFields.push(property)\n    },\n\n    setTreeUpdateConflictStatus(state, {treeUpdateConflict}) {\n      state.ui.treeUpdateConflict =  treeUpdateConflict;\n    },\n\n    setInteractionTotals(state, {interactionTotals}) {\n      Vue.set(state.ui, 'interactionTotals', interactionTotals)\n    },\n  },\n\n\tactions: {\n    initializeTreeModel({dispatch, state: {ui: {isTreeImport}}}) {\n      require('./10-trees-model')\n      // todo: this is also included via `../public/dist/js/legacy/trees` on tree-builder\n      //       but we don't include that beast in storybook b/c of global dependency hierarchy\n      //       global lodash is the only dependency, and they magically attach themselves onto\n      //       root self regardless of whether or not it's being managed by module loader.\n      //       Odd behaviour, but works out in this case.\n      require('./12-trees-helpers')\n\n      isTreeImport\n          ? dispatch('initializeTreeModelFromImport')\n          : dispatch('initializeTreeModelFromOriginalTreeJson')\n    },\n\n    // @note - these are the only actions that are outside the realm of an existing tree.\n    initializeTreeModelFromOriginalTreeJson({commit, dispatch, state: {ui}}) {\n      commit('setWorkingTree', {tree: ui.originalTreeJson})\n      dispatch('upgradeTreeModel') // => this kinda sucks, because now we're dispatching vuex notifications for all these upgrades\n    },\n\n    initializeTreeModelFromImport({commit, dispatch, state: {ui}}) {\n      const schema = app.Tree.createJsonSchemaFor(\n          _.pluck(ui.languages, 'id'),\n          _.keys(ui.blockClasses)),\n          tree = app.Tree._mergeAndSanitizeImportedInto(ui.originalTreeJson, ui.importTreeJson)\n\n      try {\n        app.Tree.validateTreeData(tree, schema)\n        console.debug('Tree validation succeeded!')\n\n        commit('setWorkingTree', {tree})\n        dispatch('upgradeTreeModel') // todo: this kinda sucks, because now we're dispatching vuex notifications for all these upgrades\n        dispatch('attemptImportPersistence')\n      } catch (validation) {\n        console.error('Tree validation failed!', validation)\n        ui.originalTreeJsonValidationResults = validation\n        // default initialization solely because a tree is prerequisite to continuation\n        dispatch('initializeTreeModelFromOriginalTreeJson')\n      }\n    },\n\n    async attemptImportPersistence({commit, dispatch, state: {tree, ui, ui: {\n      isTreeImport,\n      originalTreeJsonValidationResults\n    }}}) {\n      const hasImportValidationErrors = !!originalTreeJsonValidationResults\n      if (!isTreeImport || hasImportValidationErrors) {\n        return\n      }\n\n      // persist imported tree with valid json\n      const validationResults = await dispatch('attemptSaveTree')\n      console.debug('Tree import save validation results', validationResults)\n      // hook into validation rendering that happens once view is initialized\n      ui.originalValidationResults = validationResults\n    },\n\n    // Hoist data to adhere to latest expectations\n    upgradeTreeModel() {\n      app.tree.upgrade()\n    },\n\n    discoverTallestBlockForDesignerWorkspaceHeight({commit, dispatch, state}, {buffer=350, aboveTallest}) {\n      const\n          initialHeight = aboveTallest ? app.tree.getTallestBlockPosition() : 0,\n          minHeight = 1000,\n          height = Math.max(buffer + initialHeight, minHeight);\n\n      commit('setDesignerWorkspaceHeight', {height})\n    },\n\n    uiChanged(context, {msg}) {\n      console.log('app.ui.change [via vuex.trees.uiChanged]', msg)\n    },\n\n    async attemptSaveTree({dispatch, getters: {hasChanges, isFeatureTreeSaveEnabled}, state: {ui}}) {\n      if (!ui.isEditable || !hasChanges) {\n        console.info('trees', 'Decided against unnecessary tree save!')\n        return // non-promise response implies no in-flight request -- aka no-op.\n      }\n\n      if (!isFeatureTreeSaveEnabled) {\n        console.info('Feature `treeSave` is disabled')\n        return\n      }\n\n      /*\n       * todo: we can't double-chain our jQuery adapter, unless we put more time into it -- then-ing off jQuery adapted\n       *    results in another raw jQuery promise :P\n       * todo: debounce this?\n       */\n      const {app} = global\n\n      try {\n        await dispatch('validateTree')\n        dispatch('saveTree')\n      } catch (error) {\n        if (error instanceof ValidationError) {\n          app.dataControl._setValidationResultsForUI(error.validationResults)\n        } else {\n          throw error\n        }\n      }\n    },\n\n    async saveTree() {\n      // todo: we still need a timer for this on data change -- can this be done on a watcher rather than polling?\n      const {app} = global\n      await app.dataControl.send()\n    },\n\n    /**\n     * Calls the supplied/injected validation function from __TREE_FEATURES__.validation.validate(), and returns the\n     * array of validation results. This function is a pure function, and does not make changes to external data.\n     *\n     * @param dispatch\n     * @param tree\n     * @throws ValidationError If the validation fails, ValidationError will be thrown, which contains the\n     *            ValidationResults\n     * @returns {Promise<array>} a Promise that will return an array of the validation results.\n     */\n    async validateTree({dispatch, state: {tree}}) {\n      const validate = lodash.get(global.__TREE_FEATURES__, 'validation.validate')\n      if (validate) {\n        await validate(tree)\n      } else {\n        await dispatch('validateFloipFlow')\n      }\n    },\n\n    /**\n     * Default Floip validation. If you want Floip Core validation to be run, your\n     * __TREE_FEATURES__.validation.validate() function should call this one and add it's results to the value\n     * returned from __TREE_FEATURES__.validation.validate(). This function is a pure function, and does not make\n     * changes to external data.\n     *\n     * @throws ValidationError If the validation fails, ValidationError will be thrown, which contains the\n     *            ValidationResults\n     * @returns {Promise<array>} a Promise that will return an array of the validation results.\n     */\n    async validateFloipFlow() {\n      /* TODO: (https://viamoinc.atlassian.net/browse/VMO-685) Create default FLOIP CORE Flow validation here and\n       *   uncomment the below line after adding an implementation */\n      // throw new ValidationError([])\n    },\n\n    setDefaultBlockRepeatValues({commit, dispatch, state: {tree}}, {jsKey, values: defaults}) {\n      const block = lodash.find(tree.blocks, {jsKey})\n\n      for (let key in defaults) {\n        !(key in block.customData) && commit('updateBlockCustomDataFor', {jsKey, key, value: defaults[key]})\n      }\n    },\n\n    updateTextContent({commit}, {type, jsKey, langId, value, disableAutoGen}) {\n      commit('updateBlockContentFor', {type, jsKey, langId, value})\n      commit('updateBlockAutoGenStateFor', {type, jsKey, langId, value: !disableAutoGen})\n      commit('updateReviewedStateFor', {jsKey, langId, value: false})\n    },\n\n    setContentFromQuestionText({commit, dispatch, state: {tree}}, {jsKey}) {\n      const block = lodash.find(tree.blocks, {jsKey})\n\n      var generatedText = block.customData.title\n      var isFirst\n      var maxDigits\n\n      // todo: Let's not hand-roll pluralization  https://laravel.com/docs/5.4/localization#pluralization\n      var grammar = {\n        EN: {\n          starter: 'Reply ',\n          connector: ' for ',\n          separator: ', ',\n          conclusion: '.',\n          numericStart: 'Reply with up to ',\n          numericEndPlural: ' digits.',\n          numericEndSingular: ' digit.',\n          validationCode: 'Please reply with your unique code',\n        }\n      }\n\n      if (tree.details.hasSms || tree.details.hasUssd || tree.details.hasSocial || tree.details.hasClipboard) {\n\n\t\t\t\t// todo: push these customizations into custom handlers on particular block types\n        if (block.type == 'MultipleChoiceQuestionBlock' || block.type == 'CollaborativeFilteringRatingBlock') {\n\n          generatedText += ' ' + grammar.EN.starter\n          isFirst = 1\n\n          block.customData.choices.forEach(function(choice, index) { // choices values\n            if (isFirst != 1) {\n              generatedText += grammar.EN.separator\n            }\n            generatedText += _.parseInt(index + 1) + grammar.EN.connector + choice\n            isFirst = 0\n          })\n\n          generatedText += grammar.EN.conclusion\n\n        } else if (block.type == 'LocationBlock') {\n          generatedText += ' ' + grammar.EN.starter\n          isFirst = 1\n\n          block.customData.choices.forEach(function(choice, index) { // this is likely choice's name prop\n            // choiceResponse = $('#' + $(e).attr('id') + '_primaryoption').val()\n            if (isFirst != 1) {\n              generatedText += grammar.EN.separator\n            }\n\n            generatedText += _.parseInt(index + 1) + grammar.EN.connector + choice.name\n            isFirst = 0\n          })\n\n          generatedText += grammar.EN.conclusion\n\n        } else if (block.type == 'NumericQuestionBlock') {\n          maxDigits = lodash.get(block ,'customData.maxNumericDigits')\n          if (!maxDigits) {\n            maxDigits = 3\n          }\n\n          if (maxDigits == '1') {\n            generatedText += ' ' + grammar.EN.numericStart + maxDigits + grammar.EN.numericEndSingular\n          }\n          else {\n            generatedText += ' ' + grammar.EN.numericStart + maxDigits + grammar.EN.numericEndPlural\n          }\n        } else if (block.type == \"IdValidationBlock\") {\n          generatedText = grammar.EN.validationCode\n        }\n\n        lodash.forEach(['sms', 'ussd', 'social', 'clipboard'], contentType => {\n          if (tree.details[`has${lodash.upperFirst(contentType)}`] && block[`${contentType}AutogenLangs`].length) {\n            _.each(block[`${contentType}AutogenLangs`], function (languageId) {\n              dispatch('updateTextContent', {\n                type: contentType,\n                jsKey: block.jsKey,\n                langId: languageId,\n                value: generatedText,\n              })\n\n              dispatch('uiChanged', `Updated ${contentType} Content with auto-gen text: ${generatedText}`)\n            })\n          }\n        })\n      }\n    },\n\n    setBlockNumConnections({commit, dispatch, state}, {value: newNumConnections, jsKey}) {\n      console.debug('vuex.trees', 'setBlockNumConnections', newNumConnections, jsKey)\n\n      // Remove any connection elements connected to the block\n      // Remove the block from the UI\n      // Change the data number of connections\n      // Re-add the block to the UI\n      // Re-display the connections going to it\n\n      newNumConnections = _.parseInt(newNumConnections);\n\n      // Make sure the new number of connections is a number\n      if (!_.isFinite(newNumConnections)) {\n        newNumConnections = 1;\n      }\n      // Enforce appropriate limits on the number of connections:\n      if (newNumConnections < 1) {\n        newNumConnections = 1;\n      }\n\n\n\n      var selectedBlockKey = jsKey || app.ui.selectedBlock;\n      var selectedBlock = app.tree.getBlock(selectedBlockKey);\n\n      var numConnections = selectedBlock['uiData']['numConnections'];\n\n      if (newNumConnections == numConnections) {\n        // If there's no change, skip the intensive process of rebuilding all those connections\n        console.log('No change in the number of connections.');\n        return true;\n      }\n\n      // Otherwise: change the connections!\n\n      app.ui.lockConnections = 1;\n\n      // Remove the connections from each of the nodes at the bottom of the block\n      _.each(_.range(1, numConnections + 1), function(index) {\n        console.debug('Removing connections at', index, 'for', selectedBlockKey)\n        // app.jsPlumb.detachAllConnections(selectedBlockKey + '_node_' + index);\n\n      });\n\n      // Remove any connections connected to the \"target\" / top of the block\n      // Fortunately these call the jsPlumb binding for removing a connection\n      // which in turn is set to remove the entry from the app.tree.get('connections') array. Yay!\n      // app.jsPlumb.detachAllConnections(selectedBlockKey + '_target');\n\n      // Update the actual block data to use the new number:\n      selectedBlock['uiData']['numConnections'] = newNumConnections;\n\n      // Remove any connections that are higher in outputKey (node) number than the new maximum numConnections:\n      app.tree.filterBlockConnectionsAboveMax(selectedBlockKey);\n\n      // Re-add disappeared connections?\n\n      app.ui.lockConnections = 0;\n\n      // once in vuejs, can we'll be able to just do a [dis]connect via connections diff\n      const handleDragStop = dispatch.bind(null, 'discoverTallestBlockForDesignerWorkspaceHeight', {aboveTallest: true})\n      // app.jsPlumb.resetBindings(app.tree.get('connections'), true, selectedBlockKey, handleDragStop)\n\n      app.ui.change('Changed number of block connections.');\n    },\n\n    setMcqOutputNames({commit, dispatch, state: {tree}}, {jsKey}) {\n      console.debug('vuex.trees', 'setMcqOutputNames', jsKey)\n\n      const block = lodash.find(tree.blocks, {jsKey})\n      if (!block) {\n        console.log('AppView::generateMcqOutputNamesFor()', 'Unable to find specified block.')\n        return\n      }\n\n      let isOutputBranchingEnabled = !!block.customData.branching,\n          outputNames\n\n      if (isOutputBranchingEnabled) {\n        if (block.type === \"SummaryBlock\") {\n          outputNames = [langJs.trans(\"trees.confirm\"), langJs.trans(\"trees.reject\")]\n        } else {\n          outputNames = lodash.clone(lodash.get(block, 'customData.choices', lodash.range(1, block.customData.numChoices + 1)))\n        }\n      } else {\n        outputNames = [1]\n      }\n\n      commit('updateBlockCustomDataFor', {jsKey, key: 'numChoices', value: outputNames.length})\n\n      let isNoResponseExitEnabled = block.customData.addExitForNoResponse\n      isNoResponseExitEnabled && outputNames.push('trees.output-exit')\n\n      commit('updateBlockUiDataFor', {jsKey, key: 'outputNames', value: outputNames})\n      dispatch('setBlockNumConnections', {jsKey, value: outputNames.length})\n    },\n\n    setMcqSidebarFieldLabels({commit, dispatch, state: {tree}}, {jsKey}) {\n      const block = lodash.find(tree.blocks, {jsKey})\n\n      if (!block || !isMCQBlock(block)) {\n        console.log('AppView::generateMcqOutputNamesFor()', 'Wrong block type')\n        return\n      }\n\n      let isVoiceEnabled = tree.details.hasVoice,\n          isTextChannelEnabled = tree.details.hasSms || tree.details.hasUssd || tree.details.hasSocial || tree.details.hasClipboard,\n          hasChoiceKeypresses = !lodash.isEmpty(block.customData.choiceKeypresses),\n          fieldLabels\n\n      if (isVoiceEnabled && !isTextChannelEnabled && hasChoiceKeypresses) {\n        fieldLabels = getChoiceKeyPressesFor(block)\n      } else if (isVoiceEnabled && isTextChannelEnabled && hasChoiceKeypresses) {\n        fieldLabels = lodash.times(block.customData.numChoices, lodash.constant(''))\n      } else {\n        fieldLabels = lodash.range(1, block.customData.numChoices + 1)\n      }\n\n      commit('updateBlockUiDataFor', {jsKey, key: 'fieldLabels', value: fieldLabels})\n    },\n\n\t\tbatchMatchAudioTriggered({commit, dispatch, state}, {treeId, pattern, replaceExisting}) {\n\t\t\tcommit('setBatchMatchAudioResultsTo', {status: -1})\n\n\t\t\treturn axios.post(routeFrom('trees.treesBatchLinkAudio', {treeId}, state.ui.routes), {pattern})\n\t\t\t\t\t.then(({data: {matches: value}}) => {\n\t\t\t\t\t\tcommit('setBatchMatchAudioResultsTo', {status: 1, value})\n\t\t\t\t\t\tdispatch('commitAllBatchMatchAudioFiles', {replaceExisting})\n\t\t\t\t\t})\n\t\t\t\t\t.catch(({response: {data: {status_description: message}}}) => commit('setBatchMatchAudioResultsTo', {\n\t\t\t\t\t\tstatus: 0,\n\t\t\t\t\t\tmessage\n\t\t\t\t\t}))\n\t\t},\n\n\t\tcommitAllBatchMatchAudioFiles(\n\t\t\t\t{commit, dispatch, state: {\n\t\t\t\t\tui: {\n\t\t\t\t\t\tbatchMatchAudio: {\n\t\t\t\t\t\t\tisEmpty,\n\t\t\t\t\t\t\tresults}}}},\n\t\t\t\t{replaceExisting}) {\n\n\t\t\tif (isEmpty) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tlodash.forEach(results, (byLang, jsKey) => {\n\t\t\t\tlodash.forEach(byLang, (matches, langId) => {\n\t\t\t\t\tdispatch('commitBatchMatchAudioFile', {jsKey, langId, matches, replaceExisting})\n\t\t\t\t})\n\t\t\t})\n\n\t\t\tdispatch('attemptSaveTree')\n\t\t},\n\n\t\t/** ------------------ | has-selection | no-selection | unchanged |\n\t\t | null   + no-replace | 0             | 1            | 0         |\n\t\t | single + no-replace | 0             | 1            | 0         |\n\t\t | multi  + no-replace | 0             | 0            | 0         |\n\t\t | null   + replace    | 1             | 1            | 0         |\n\t\t | single + replace    | 1             | 1            | 0         |\n\t\t | multi  + replace    | 0             | 0            | 0         |\n\t\t ---------------------------------------------------------------- */\n\t\tcommitBatchMatchAudioFile(\n\t\t\t\t{commit, dispatch, state: {tree: {blocks}}},\n\t\t\t\t{jsKey, langId, matches, replaceExisting}) {\n\n\t\t\tconst {audioFiles: {[langId]: audioFile}} = lodash.find(blocks, {jsKey}),\n\t\t\t\t\thasSelection = !!audioFile,\n\t\t\t\t\tisMulti = lodash.get(matches, 'length', 0) > 1,\n\t\t\t\t\tmatch = lodash.get(matches, 0, null),\n\t\t\t\t\tunchanged = lodash.get(audioFile, 'id') === lodash.get(match, 'id')\n\n\t\t\tif (unchanged || isMulti || (hasSelection && !replaceExisting)) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tcommit('updateAudioFileFor', {jsKey, langId, value: match})\n\t\t\tcommit('updateReviewedStateFor', {jsKey, langId, value: false})\n\t\t},\n\n    addSubscriberPropertyField({commit, dispatch, state}, {displayLabel, dataType, choices}) {\n      return axios.post(routeFrom('trees.addSubscriberPropertyField', null, state.ui.routes), {displayLabel, dataType, choices})\n          .then(response => {\n            const filteredChoices = lodash.filter(choices, c => !!c.value)\n            commit('addSubscriberPropertyField', {property: response.data.data})\n            return response\n          })\n    },\n\n    setTreeUpdateConflictStatus({commit}, payload) {\n\t\t  commit('setTreeUpdateConflictStatus', payload);\n    },\n\n    async fetchInteractionTotals({state, commit, dispatch, getters}, {startDate, endDate}) {\n      if (!getters.isFeatureUpdateInteractionTotalsEnabled) {\n        console.info('Feature `updateInteractionTotals` is disabled')\n        return\n      }\n      const key = 'interaction-totals'\n      const url = routeFrom('trees.ajaxTotalInteractions', {treeId: state.tree.id}, state.ui.routes)\n      const params = {startDate, endDate}\n\n      const response = await dispatch('flights/createCancellableXhr', {key, url, params})\n      if (response) {\n        commit('setInteractionTotals', {interactionTotals: response.data})\n      }\n    },\n  },\n}\n\nconst getChoiceKeyPressesFor = (block) => {\n  const keypresses = block.customData.choiceKeypresses\n  return lodash.range(1, block.customData.numChoices + 1)\n      .map(i => keypresses[i] || i)\n}\n\nconst isMCQBlock = (block) => {\n  return block.type === 'MultipleChoiceQuestionBlock'\n      || block.type === 'CollaborativeFilteringRatingBlock'\n      || block.type === 'RandomOrderMultipleChoiceQuestionBlock'\n\n}\n","import {\n  IContext,\n  IBlock,\n  IBlockExit,\n  IResourceDefinition,\n  findBlockExitWith,\n  ValidationException,\n  findBlockOnActiveFlowWith,\n} from '@floip/flow-runner'\nimport {ActionTree, GetterTree, MutationTree} from 'vuex'\nimport {IFlowsState} from '.'\nimport {IRootState} from '@/store'\nimport {defaults, without} from 'lodash'\nimport IdGeneratorUuidV4 from '@floip/flow-runner/dist/domain/IdGeneratorUuidV4'\nimport {popFirstEmptyItem} from './utils/listBuilder'\n\nexport const getters: GetterTree<IFlowsState, IRootState> = {\n  // todo: do we do all bocks in all blocks, or all blocks in [!! active flow !!]  ?\n  //       the interesting bit is that resources are _all_ resources... so we could follow suit here? :shrug:\n  // blocksByUuid: ({flows}) => map(resources, 'uuid')\n}\n\nexport const mutations: MutationTree<IFlowsState> = {\n  block_popFirstExitWithoutTest(state, {blockId}: {blockId: string}) {\n    //TODO - this shouldn't be necessary\n    // @ts-ignore - TS2339: Property 'flow' does not exist on type\n    const block = findBlockOnActiveFlowWith(blockId, this.state.flow as unknown as IContext)\n    block.exits = popFirstEmptyItem(block.exits, \"test\")\n  },\n  block_popExitsByLabel(state, {blockId, exitLabel}: {blockId: string, exitLabel: string}) {\n    //TODO - this shouldn't be necessary\n    // @ts-ignore - TS2339: Property 'flow' does not exist on type\n    const block = findBlockOnActiveFlowWith(blockId, this.state.flow as unknown as IContext)\n    block.exits = block.exits.filter((item: IBlockExit) => {\n      return item.label !== exitLabel\n    })\n  },\n  block_setName(state, {blockId, value}) {\n    findBlockOnActiveFlowWith(blockId, state as unknown as IContext)\n      .name = value\n  },\n  block_setLabel(state, {blockId, value}) {\n    findBlockOnActiveFlowWith(blockId, state as unknown as IContext)\n      .label = value\n  },\n  block_setSemanticLabel(state, {blockId, value}) {\n    findBlockOnActiveFlowWith(blockId, state as unknown as IContext)\n      .semanticLabel = value\n  },\n  block_setExitTest(state, {exitId, blockId, value}: {exitId: string, blockId: string, value: string}) {\n    const exits = findBlockOnActiveFlowWith(blockId, state as unknown as IContext).exits\n    const exit = exits.find(exit => exit.uuid === exitId) || null;\n    if (exit) {\n      exit.test = value\n    }\n  },\n  block_pushNewExit(state, { blockId, newExit }: {blockId: string, newExit: IBlockExit}) {\n    const block = findBlockOnActiveFlowWith(blockId, state as unknown as IContext)\n    block.exits.push(newExit)\n  },\n  block_updateConfig(state, {blockId, newConfig}: {blockId: string, newConfig: object}) {\n    findBlockOnActiveFlowWith(blockId, state as unknown as IContext)\n      .config = newConfig\n  },\n  block_updateConfigByKey(state, {blockId, key, value}: {blockId: string, key: string, value: object}) { // note that the {key} could be undefined inside `config` at block creation (eg: optional config)\n    let currentConfig: {[key: string]: any} = findBlockOnActiveFlowWith(blockId, state as unknown as IContext).config\n    currentConfig[key] = value\n    findBlockOnActiveFlowWith(blockId, state as unknown as IContext).config = {...currentConfig}\n  },\n  block_setBlockExitDestinationBlockId(state, {blockId, exitId, destinationBlockId}) {\n    const block = findBlockOnActiveFlowWith(blockId, state as unknown as IContext)\n    findBlockExitWith(exitId, block)\n      .destinationBlock = destinationBlockId\n  },\n}\n\nexport const actions: ActionTree<IFlowsState, IRootState> = {\n  async block_createBlockDefaultExitWith({dispatch, commit, state}, {props}: {props: {uuid: string} & Partial<IBlockExit>}): Promise<IBlockExit> {\n    return await dispatch('block_createBlockExitWith', {\n      props: {\n        ...props,\n        default: true}})\n  },\n\n  async block_createBlockExitWith({dispatch, commit, state}, {props}: {props: {uuid: string} & Partial<IBlockExit>}): Promise<IBlockExit> {\n    const resource: IResourceDefinition = await dispatch('resource_createWith', {\n      props: {uuid: (new IdGeneratorUuidV4).generate()}})\n\n    commit('resource_add', {resource})\n\n    return {\n      ...defaults(props, {\n        label: resource.uuid,\n        tag: '',\n        config: {},\n      }),\n    }\n  },\n  async block_updateBlockExitWith({dispatch, commit, state}, {blockId, exitId, value}: {blockId: string, exitId: string, value: string}) {\n    //TODO - handle other props apart from test\n    commit('block_setExitTest', {blockId, exitId, value})\n  },\n\n  async block_swapBlockExitDestinationBlockIds(\n    {commit, state},\n    {first, second}: {first: IDeepBlockExitIdWithinFlow, second: IDeepBlockExitIdWithinFlow}) {\n\n    if (!first || !second) {\n      throw new ValidationException(`Unable to swap destinationBlockId on null: ${JSON.stringify({first, second})}`)\n    }\n\n    const firstBlock = findBlockOnActiveFlowWith(first.blockId, state as unknown as IContext)\n    const secondBlock = findBlockOnActiveFlowWith(second.blockId, state as unknown as IContext)\n\n    const {destinationBlock: firstDestinationBlockId} = findBlockExitWith(first.exitId, firstBlock)\n    const {destinationBlock: secondDestinationBlockId} = findBlockExitWith(second.exitId, secondBlock)\n\n\n\n\n    // todo: this works only when the exit we're targetting is empty\n    // todo: blah --- a repaint from HMR redraws it correctly -- why?!\n    // todo: blah --- a repaint from HMR also draws an additional exit :( Is there a cache break on connection key we need to leverage here?\n\n\n\n    commit('block_setBlockExitDestinationBlockId', {\n      blockId: second.blockId,\n      exitId: second.exitId,\n      destinationBlockId: firstDestinationBlockId})\n\n    commit('block_setBlockExitDestinationBlockId', {\n      blockId: first.blockId,\n      exitId: first.exitId,\n      destinationBlockId: secondDestinationBlockId})\n  },\n}\n\nexport interface IDeepBlockExitIdWithinFlow {\n  blockId: IBlock['uuid'],\n  exitId: IBlockExit['uuid'],\n}\n","import Vue from 'vue'\nimport {\n  findBlockWith,\n  findFlowWith,\n  getActiveFlowFrom,\n  SupportedMode,\n  SupportedContentType,\n  IBlock,\n  IContext,\n  IFlow,\n  IResourceDefinition,\n  ValidationException,\n} from '@floip/flow-runner'\nimport {IdGeneratorUuidV4} from '@floip/flow-runner/dist/domain/IdGeneratorUuidV4'\nimport moment from 'moment'\nimport {ActionTree, GetterTree, MutationTree} from 'vuex'\nimport {IFlowsState} from '.'\nimport {IRootState} from '@/store'\nimport {defaults, includes, forEach} from 'lodash'\nimport {discoverContentTypesFor} from '@/store/flow/resource'\n\nexport const getters: GetterTree<IFlowsState, IRootState> = {\n  activeFlow: state => state.flows.length && getActiveFlowFrom(state as unknown as IContext),\n\n  hasTextMode: (state, getters) => [SupportedMode.USSD, SupportedMode.SMS].some(mode => includes(getters.activeFlow.supportedModes || [], mode)),\n  hasVoiceMode: (state, getters) => includes(getters.activeFlow.supportedModes || [], SupportedMode.IVR)\n}\n\nexport const mutations: MutationTree<IFlowsState> = {\n  flow_addBlock(state, {flowId, block}: {flowId: string, block: IBlock}) {\n    if (block == null) {\n      throw new ValidationException('Unable to add null block to flow')\n    }\n\n    const flow = findFlowWith(flowId || state.firstFlowId || '', state as unknown as IContext)\n    const length = flow.blocks.push(block)\n\n    if (length === 1) {\n      flow.firstBlockId = block.uuid\n    }\n  },\n\n  flow_removeBlock(state, {flowId, blockId}: {flowId: string, blockId: IBlock['uuid']}) {\n    const flow = findFlowWith(flowId || state.firstFlowId || '', state as unknown as IContext)\n    const block: IBlock = findBlockWith(blockId, flow)  // @throws ValidationException when block absent\n\n    if (block == null) {\n      throw new ValidationException('Unable to delete block absent from flow')\n    }\n\n    const {blocks} = flow\n    blocks.splice(\n      blocks.indexOf(block),\n      1)\n\n    // clean up stale references\n    // 1. flow.firstBlockId\n    // 2. flow.exitBlockId\n    // 3. flow.blocks.*.exits.*.destinationBlock\n    // 4. activeBlockId (we should likely trail a ghost of previous selection and select that one next)\n\n    // todo: convert this whole operation to an ActionTree member\n    // todo: use mutations for these:\n    if (flow.firstBlockId === blockId) {\n      flow.firstBlockId = '' // todo: make this optional for builder\n    }\n\n    if (flow.exitBlockId === blockId) {\n      flow.exitBlockId = undefined\n    }\n\n\n    forEach(blocks, ({exits}) => {\n      const exitsTowardUs = exits.filter(e => e.destinationBlock === blockId)\n      forEach(exitsTowardUs, e => e.destinationBlock = undefined)\n    })\n\n    this.state.builder.activeBlockId = null\n  },\n\n  flow_setExitBlockId(state, {flowId, blockId}) {\n    const flow: IFlow = findFlowWith(flowId, state as unknown as IContext)\n    const block: IBlock = findBlockWith(blockId, flow)  // @throws ValidationException when block absent\n    flow.exitBlockId = block.uuid\n  },\n\n  flow_setFirstBlockId(state, {flowId, blockId}) {\n    const flow: IFlow = findFlowWith(flowId, state as unknown as IContext)\n    const block: IBlock = findBlockWith(blockId, flow)  // @throws ValidationException when block absent\n    Vue.set(flow, 'firstBlockId', block.uuid)\n  },\n  flow_setName(state, {flowId, value}) {\n    findFlowWith(flowId, state as unknown as IContext).name = value\n  },\n\n  flow_setLabel(state, {flowId, value}) {\n    findFlowWith(flowId, state as unknown as IContext).label = value\n  },\n\n  flow_setInteractionTimeout(state, {flowId, value}) {\n    findFlowWith(flowId, state as unknown as IContext).interactionTimeout = value\n  },\n\n  flow_setSupportedMode(state, {flowId, value}) {\n    const flow: IFlow = findFlowWith(flowId, state as unknown as IContext)\n    flow.supportedModes = Array.isArray(value) ? value : [value]\n  },\n\n  flow_setLanguages(state, {flowId, value}) {\n    const flow: IFlow = findFlowWith(flowId, state as unknown as IContext)\n    flow.languages = Array.isArray(value) ? value : [value]\n  },\n}\n\nexport const actions: ActionTree<IFlowsState, IRootState> = {\n  // todo: this `flow_` prefix doesn't follow suit\n  //       because it's actually a method on the root state // IContext-ish type\n  //       (same as mutation: `flow_activateBlock` and `flow_add`\n  async flow_addBlankFlow({dispatch, commit, state}): Promise<IFlow> {\n    const flow = await dispatch('flow_createWith', {\n      props: {uuid: (new IdGeneratorUuidV4).generate()}})\n\n    return await dispatch('flow_add', {flow})\n  },\n\n  async flow_add({state}, {flow}): Promise<IFlow> {\n    const length = state.flows.push(flow) // mutating here, because we need to define a root-level scope for this type of action\n    if (length === 1) {\n      state.firstFlowId = flow.uuid\n    }\n\n    return flow\n  },\n\n  async flow_addBlankBlockByType({commit, dispatch, state}, {type, ...props}: Partial<IBlock>): Promise<IBlock> {\n    // if (!state[type]) {\n      // todo: for some reason {snakeCase} from 'lodash' doesn't work?\n      // todo: for some reason dynamic imports aren't working w/ storybook build\n      // const modulePath = `./block-types/${type.replace('\\\\', '_')}BlockStore.ts`\n      // const store = await import(modulePath)\n\n      // this.registerModule(['flow', BLOCK_TYPE], store)\n    // }\n\n    const block = await dispatch(`flow/${type}/createWith`, { // standardize this for each block type\n      props: {\n        uuid: (new IdGeneratorUuidV4).generate(),\n        ...props,\n      }\n    }, {root: true})\n\n    defaults(block, { // a key is prerequisite for reactivity, even optional params\n      label: undefined,\n      semanticLabel: undefined})\n\n    commit('flow_addBlock', {block})\n\n    return block\n  },\n\n  async flow_addBlankResource({dispatch, commit}): Promise<IResourceDefinition> {\n    const resource = await dispatch('resource_createWith', {\n      props: {uuid: (new IdGeneratorUuidV4).generate()}})\n\n    commit('resource_add', {resource})\n\n    return resource\n  },\n  async flow_addBlankResourceForEnabledModesAndLangs({getters, dispatch, commit}, modeOverrides?: {[key in SupportedMode]: SupportedContentType}): Promise<IResourceDefinition> {\n    //TODO - figure out of there should only be one value here at first? How would the resource editor change this?\n    //TODO - is this right for setup of languages?\n    //TODO - How will we add more blank values as supported languages are changed in the flow? We should probably also do this for modes rather than doing all possible modes here.\n    const values = getters['activeFlow'].languages.reduce((memo: object[], language: {id: string, name: string}) => {\n      //Let's just create all the modes. We might need them but if they are switched off they just don't get used\n      Object.values(SupportedMode).forEach((mode: SupportedMode) => {\n        memo.push({\n          languageId: language.id,\n          value: '',\n          //We can't always get it from the Mode - LogBlock for example has text content for the IVR mode.\n          contentType: modeOverrides ? modeOverrides[mode] : discoverContentTypesFor(mode),\n          modes: [\n            mode\n          ],\n        })\n      })\n      return memo\n    }, [])\n    const blankResource = await dispatch('resource_createWith', {\n      props: {\n        uuid: (new IdGeneratorUuidV4()).generate(),\n        values: values,\n      },\n    })\n    commit('resource_add', {resource: blankResource})\n\n    return blankResource\n  },\n\n  async flow_createWith({dispatch, commit, state}, {props}: {props: {uuid: string} & Partial<IFlow>}): Promise<IFlow> {\n    return {\n      ...defaults(props, {\n        orgId: '', // awful default value, but we've typed it to string\n        name: '',\n        label: '', // TODO: Remove this optional attribute once the findFlowWith( ) is able to mutate state when setting non existing key.\n        lastModified: moment().format('c'),\n        interactionTimeout: 30,\n        platformMetadata: {},\n\n        supportedModes: DEFAULT_MODES,\n        languages: [],\n        blocks: [],\n\n        firstBlockId: '',\n      }),\n    }\n  }\n}\n\nexport const DEFAULT_MODES = [\n  SupportedMode.SMS,\n  SupportedMode.USSD,\n  SupportedMode.IVR]\n","import {IFlow, IResourceDefinition} from '@floip/flow-runner'\nimport {ActionTree, GetterTree, Module, MutationTree} from 'vuex'\nimport {IRootState} from '..' // todo: create factory with generics so that IRootState is DI'd\nimport {\n  getters as blockGetters,\n  mutations as blockMutations,\n  actions as blockActions} from './block'\nimport {\n  actions as flowActions,\n  getters as flowGetters,\n  mutations as flowMutations} from './flow'\nimport {\n  actions as resourceActions,\n  getters as resourceGetters,\n  mutations as resourceMutations} from './resource'\n\n\n// type IFlowsState = Pick<IContext, 'flows' | 'firstFlowId' | 'resources' | 'nestedFlowBlockInteractionIdStack'>\n\nexport interface IFlowsState {\n  flows: IFlow[],\n  resources: IResourceDefinition[],\n\n  firstFlowId: string | null,\n  // @note - for exciting future\n  nestedFlowBlockInteractionIdStack: string[],\n\n  // activeBlock: string | null, // this is actually a getter over IContext\n}\n\nexport const stateFactory = (): IFlowsState => ({\n  flows: [],\n  resources: [],\n\n  firstFlowId: null,\n  nestedFlowBlockInteractionIdStack: [], // todo: not quite right -- pulled from IContext\n\n  // activeBlock: null,\n})\n\nexport const getters: GetterTree<IFlowsState, IRootState> = {\n  ...flowGetters,\n  ...blockGetters,\n  ...resourceGetters,\n}\n\nexport const mutations: MutationTree<IFlowsState> = {\n  ...flowMutations,\n  ...blockMutations,\n  ...resourceMutations,\n}\n\nexport const actions: ActionTree<IFlowsState, IRootState> = {\n  ...flowActions,\n  ...blockActions,\n  ...resourceActions,\n}\n\nexport const store: Module<IFlowsState, IRootState> = {\n  namespaced: true,\n  state: stateFactory,\n  getters,\n  mutations,\n  actions,\n}\n\nexport default store\n","import ImportedLang from 'lang.js'\nimport ImportedMoment from 'moment'\nimport ImportedJquery from 'jquery'\nimport {merge} from 'lodash'\nimport source from '../../assets/messages.json';\n\nexport function bootstrapLegacyGlobalDependencies() {\n  // initialize configuration sources\n  const __APP__ = require('../../../app.config')\n  const __CONTEXT__ = require('../../../builder.config')\n\n  // todo: the remaining legacy code still expects the ability to mutate data directly on `app.ui.*` rather than using trees store\n  //      for now, we'll need to ensure app.ui === __TREES_UI__ */\n  const app = merge(global.app || {}, __CONTEXT__)\n  const __TREES_UI__ = app.ui\n  const __AUDIO__ = app.audio\n\n  // configure libraries\n  const Lang = new ImportedLang\n  Lang.setMessages(source)\n  Lang.setLocale(__APP__.locale)\n  Lang.defaultLocale = 'en'\n\n  const moment = ImportedMoment\n  moment.locale(Lang.getLocale())\n\n  const jQuery = ImportedJquery\n  const $ = ImportedJquery\n\n  // export as globals (overwrites pre-existing)\n  const exported = {\n    Lang,\n    moment,\n    $,\n    jQuery,\n\n    __APP__,\n    __CONTEXT__,\n    __TREES_UI__,\n    __AUDIO__,\n\n    app,\n  }\n  Object.assign(global, exported)\n\n  // required inline due to front-loading of imports and having jQuery dependency\n  require('bootstrap')\n  require('bootstrap-datetimepicker/src/js/bootstrap-datetimepicker')\n  $.fn.datetimepicker.defaults.locale = Lang.getLocale()\n\n  return exported\n}\n\nexport default bootstrapLegacyGlobalDependencies\n","import {flatMap, isEqual, keyBy, map, mapValues} from 'lodash'\nimport Vue from 'vue'\nimport {ActionTree, GetterTree, Module, MutationTree} from \"vuex\"\nimport {IRootState} from \"@/store\"\nimport {IBlock, SupportedMode, ValidationException} from \"@floip/flow-runner\"\nimport {IDeepBlockExitIdWithinFlow} from \"@/store/flow/block\"\n\n\nexport enum OperationKind { // todo migrate these to flight-monitor\n  CONNECTION_SOURCE_RELOCATE = 'CONNECTION_SOURCE_RELOCATE',\n  CONNECTION_CREATE = 'CONNECTION_CREATE',\n  BLOCK_RELOCATE = 'BLOCK_RELOCATE', // todo: we can now skip updating vuex on-the-fly and rather await a drop\n}\n\nexport interface IConnectionSourceRelocateOperation {\n  kind: OperationKind.CONNECTION_SOURCE_RELOCATE,\n  data: null | {\n    from: IDeepBlockExitIdWithinFlow,\n    position: IPosition, // todo: rename to startingPosition\n    to: IDeepBlockExitIdWithinFlow | null,\n  }\n}\n\nexport interface IConnectionCreateOperation {\n  kind: OperationKind.CONNECTION_CREATE,\n  data: null | {\n    source: IDeepBlockExitIdWithinFlow,\n    position: IPosition, // todo: rename to startingPosition\n    target: IBlock['uuid'] | null,\n  }\n}\n\nexport type SupportedOperation = IConnectionSourceRelocateOperation | IConnectionCreateOperation\n\ninterface IPosition {\n  x: number,\n  y: number,\n}\n\n\n\nexport interface IBuilderState {\n  activeBlockId: IBlock['uuid'] | null,\n\n  operations: {\n    [OperationKind.CONNECTION_SOURCE_RELOCATE]: IConnectionSourceRelocateOperation,\n    [OperationKind.CONNECTION_CREATE]: IConnectionCreateOperation,\n    [OperationKind.BLOCK_RELOCATE]: null,\n  }\n}\n\nexport const stateFactory = (): IBuilderState => ({\n  activeBlockId: null,\n\n  operations: {\n    [OperationKind.CONNECTION_SOURCE_RELOCATE]: {\n      kind: OperationKind.CONNECTION_SOURCE_RELOCATE,\n      data: null},\n    [OperationKind.CONNECTION_CREATE]: {\n      kind: OperationKind.CONNECTION_CREATE,\n      data: null},\n    [OperationKind.BLOCK_RELOCATE]: null,\n  }\n})\n\nexport const getters: GetterTree<IBuilderState, IRootState> = {\n  activeBlock: ({activeBlockId}, {blocksById}) => activeBlockId ? blocksById[activeBlockId] : null,\n\n  blocksById: (state, getters, rootState, rootGetters) => {\n    const {blocks} = rootGetters['flow/activeFlow']\n    return keyBy(blocks, 'uuid')\n  },\n\n  nodeLabelsById: (state, getters, {flow: {flows}}, rootGetters) =>\n      mapValues(keyBy(flows[0].blocks, 'uuid'), 'label'),\n\n  exitLabelsById: (state, getters, {flow: {flows}}, rootGetters) =>\n      mapValues(keyBy(flatMap(flows[0].blocks, 'exits'), 'uuid'), 'label'),\n}\n\nexport const mutations: MutationTree<IBuilderState> = {\n  activateBlock(state, {blockId}: {blockId: IBlock['uuid']}) {\n    state.activeBlockId = blockId\n\n    // simulate engaging with specified block\n    // FlowRunner.prototype.navigateTo(block, state as unknown as IContext)\n  },\n\n  setOperation({operations}, {operation}: {operation: SupportedOperation}) {\n    //TODO - type checking - remove this ignore and fix these errors - they seem to be quite serious but I'm not sure how to resolve them\n    //@ts-ignore\n    operations[operation.kind] = operation\n  },\n\n  setBlockPositionTo(state, {position: {x, y}, block}) {\n    // todo: ensure our platform_metadata.io_viamo is always instantiated with builder // uiData props\n    // if (!block.platform_metadata.io_viamo.uiData) {\n    //   defaultsDeep(block, {platform_metadata: {io_viamo: {uiData: {xPosition: 0, yPosition: 0}}}})\n    //   Vue.observable(block.platform_metadata.io_viamo.uiData)\n    // }\n\n    block.platform_metadata.io_viamo.uiData.xPosition = x\n    block.platform_metadata.io_viamo.uiData.yPosition = y\n  },\n}\n\nexport const actions: ActionTree<IBuilderState, IRootState> = {\n  removeConnectionFrom({commit}, {block: {uuid: blockId}, exit: {uuid: exitId}}) {\n    commit('flow/block_setBlockExitDestinationBlockId', {\n      blockId,\n      exitId,\n      destinationBlockId: undefined\n    }, {root: true})\n  },\n\n\n  // @note: multiple connections can lead to same node, so it doesn't make sense to do a swap here; we'll be \"appending\"\n  // when moving connection target: setExitDestination(exitId, destinationId)\n\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  // [OperationKind.CONNECTION_SOURCE_RELOCATE] //////////////////////////////////////////////////////////////\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  // todo: do operations warrant their own store? Maybe a generic store that handles a common behaviour\n\n  initializeConnectionSourceRelocateWith({commit}, {\n    block: {uuid: blockId},\n    exit: {uuid: exitId},\n    position}) {\n\n    // this would be a flight-monitor create(key)\n    const operation: IConnectionSourceRelocateOperation = {\n      kind: OperationKind.CONNECTION_SOURCE_RELOCATE,\n      data: {from: {blockId, exitId}, position, to: {blockId, exitId}}}\n    commit('setOperation', {operation})\n  },\n\n  setConnectionSourceRelocateValue({commit, state}, {block: {uuid: blockId}, exit: {uuid: exitId}}) {\n    const data = state.operations[OperationKind.CONNECTION_SOURCE_RELOCATE].data\n    if (!data) {\n      throw new ValidationException(`Unable to modify uninitialized operation: ${JSON.stringify(data)}`)\n    }\n\n    const {from, position} = data\n    const operation: IConnectionSourceRelocateOperation = {\n      kind: OperationKind.CONNECTION_SOURCE_RELOCATE,\n      data: {from, position, to: {blockId, exitId}}}\n    commit('setOperation', {operation})\n  },\n\n  setConnectionSourceRelocateValueToNullFrom({commit, state}, {block: {uuid: blockId}, exit: {uuid: exitId}}) {\n    const data = state.operations[OperationKind.CONNECTION_SOURCE_RELOCATE].data\n    if (!data) {\n      throw new ValidationException(`Unable to modify uninitialized operation: ${JSON.stringify(data)}`)\n    }\n\n    const {from, to, position} = data\n    if (!isEqual(to, {blockId, exitId})) {\n      throw new ValidationException('Unable to nullify exit relocation from different exit.')\n    }\n\n    const operation: IConnectionSourceRelocateOperation = {\n      kind: OperationKind.CONNECTION_SOURCE_RELOCATE,\n      data: {from, position, to: null}}\n    commit('setOperation', {operation})\n  },\n\n  applyConnectionSourceRelocate({dispatch, commit, state: {operations}}) {\n    const data = operations[OperationKind.CONNECTION_SOURCE_RELOCATE].data\n    if (!data) {\n      throw new ValidationException(`Unable to complete uninitialized operation: ${JSON.stringify(data)}`)\n    }\n\n    const {from: first, to: second} = data\n    dispatch('flow/block_swapBlockExitDestinationBlockIds', {first, second}, {root: true})\n\n    const operation: IConnectionSourceRelocateOperation = {\n      kind: OperationKind.CONNECTION_SOURCE_RELOCATE,\n      data: null}\n    commit('setOperation', {operation})\n  },\n\n  ///////////////////////////////////////////////////////////////////////////////////////////////////\n  // [OperationKind.CONNECTION_CREATE] //////////////////////////////////////////////////////////////\n  ///////////////////////////////////////////////////////////////////////////////////////////////////\n\n  initializeConnectionCreateWith({commit}, {\n    block: {uuid: blockId},\n    exit: {uuid: exitId},\n    position}) {\n\n    if (!blockId || !exitId) {\n      throw new ValidationException(`Unable to create connection without source: ${JSON.stringify({blockId, exitId})}`)\n    }\n\n    const operation: IConnectionCreateOperation = {\n      kind: OperationKind.CONNECTION_CREATE,\n      data: {source: {blockId, exitId}, position, target: null}}\n\n    commit('setOperation', {operation}) // this would be a flight-monitor create(key)\n  },\n\n  setConnectionCreateTargetBlock({commit, state}, {block}) {\n    const data = state.operations[OperationKind.CONNECTION_CREATE].data\n    if (!data) {\n      throw new ValidationException(`Unable to modify uninitialized operation: ${JSON.stringify(data)}`)\n    }\n\n    const {source, position} = data\n    const operation: IConnectionCreateOperation = {\n      kind: OperationKind.CONNECTION_CREATE,\n      data: {source, position, target: block.uuid}}\n\n    commit('setOperation', {operation})\n  },\n\n  setConnectionCreateTargetBlockToNullFrom({commit, state}, {block}) {\n    const data = state.operations[OperationKind.CONNECTION_CREATE].data\n    if (!data) {\n      throw new ValidationException(`Unable to modify uninitialized operation: ${JSON.stringify(data)}`)\n    }\n\n    const {source, target, position} = data\n    if (!isEqual(target, block.uuid)) {\n      throw new ValidationException('Unable to nullify exit relocation from different exit.')\n    }\n\n    const operation: IConnectionCreateOperation = {\n      kind: OperationKind.CONNECTION_CREATE,\n      data: {source, position, target: null}}\n\n    commit('setOperation', {operation})\n  },\n\n  applyConnectionCreate({dispatch, commit, state: {operations}}) {\n    const data = operations[OperationKind.CONNECTION_CREATE].data\n    if (!data) {\n      throw new ValidationException(`Unable to complete uninitialized operation: ${JSON.stringify(data)}`)\n    }\n\n    const {\n      source: {blockId, exitId},\n      target: destinationBlockId} = data\n\n    commit('flow/block_setBlockExitDestinationBlockId', {blockId, exitId, destinationBlockId}, {root: true})\n\n    const operation: IConnectionCreateOperation = {kind: OperationKind.CONNECTION_CREATE, data: null}\n    commit('setOperation', {operation})\n  },\n\n  /**\n   * Import Flows And Resources from importer tool\n   *\n   * The imported JSON should be compatible with IFlowsState\n   * {\n   *  flows: [\n   *    { uuid: 'xxxx', name: 'flow1', ...},\n   *    { uuid: 'yyyy', name: 'flow2', ...}]\n   *  ],\n   *  resources: [\n   *    { uuid: 'xxxx-flow1-resource1', values: [...]},\n   *    { uuid: 'xxxx-flow1-resource2', values: [...]},\n   *    { uuid: 'xxxx-flow2-resource1', values: [...]},\n   *    ...\n   *  ]\n   * }\n   * @param dispatch\n   * @param commit\n   * @param state\n   * @param rootState\n   * @param flows\n   */\n  async importFlowsAndResources({dispatch, commit, state, rootState}, {flows, resources}) {\n    console.debug('importing flows & resources ...')\n    console.log({flows, resources})\n    const {flow: flowState} = rootState\n    const defaultSupportedMode = [\n      SupportedMode.IVR,\n      SupportedMode.SMS,\n      SupportedMode.USSD,\n    ]\n\n    // add default activated modes if not set yet\n    for(let key in flows) {\n      if (!flows[key].hasOwnProperty('supportedModes') || !flows[key].supportedModes.length) {\n        flows[key].supportedModes = defaultSupportedMode\n      }\n    }\n\n    // Update flow state\n    flowState.flows.splice(0, Number.MAX_SAFE_INTEGER, ...flows)\n    flowState.firstFlowId = flows[0].uuid\n    flowState.resources.splice(0, Number.MAX_SAFE_INTEGER, ...resources)\n\n    // make sure we use the same languages ids on both UI & Flows\n    // TODO - type checking - remove this and resolve the error\n    //@ts-ignore\n    rootState.trees.ui.languages = flows[0].languages\n  },\n\n  async loadFlow({dispatch, commit, state}) {\n    console.debug('loading flow...')\n\n    // todo: we need something like: set context\n    const flowContext = require('./2019-10-10-shortcut-flow.json')\n    const flow = flowContext.flows[0]\n\n    flowContext.resources.map(resource => commit('flow/resource_add', {resource}, {root: true}))\n    await dispatch('flow/flow_add', {flow}, {root: true})\n  },\n}\n\nexport const store: Module<IBuilderState, IRootState> = {\n  namespaced: true,\n  state: stateFactory,\n  getters,\n  mutations,\n  actions,\n}\n\nexport default store\n\nexport function createDefaultBlockTypeInstallerFor(\n    blockType: IBlock['type'],\n    storeForBlockType: Module<any, IRootState>) {\n\n  return (builder: Vue) =>\n    builder.$store.hasModule(['flow', blockType])\n    || builder.$store.registerModule(['flow', blockType], storeForBlockType)\n}\n\nexport function generateConnectionLayoutKeyFor(source: IBlock, target: IBlock) {\n  console.debug('store/builder', 'generateConnectionLayoutKeyFor', source.uuid, target.uuid)\n  return [\n    // coords\n    // TODO - type checking - remove this and resolve the error\n    //@ts-ignore\n    [source.platform_metadata.io_viamo.uiData.xPosition, source.platform_metadata.io_viamo.uiData.yPosition],\n    // TODO - type checking - remove this and resolve the error\n    //@ts-ignore\n    [target.platform_metadata.io_viamo.uiData.xPosition, target.platform_metadata.io_viamo.uiData.yPosition],\n\n    // block titles\n    source.label,\n    target.label,\n\n    // other exit titles // todo: this needs to be a computed prop // possibly on store as getter by blockId ?\n    ...map(source.exits, 'tag'),\n    ...map(target.exits, 'tag'),\n  ]\n}\n","import {get, find, without} from 'lodash'\n\nexport const allItemsHaveValue = function (list: object[], key: string): boolean {\n  return list.every((item: object) => !!get(item, key))\n}\n\nexport const someItemsHaveValue = function (list: object[], key: string): boolean {\n  return list.some((item: object) => !!get(item, key))\n}\n\nexport const twoItemsBlank = function (list: object[], key: string): boolean {\n  let blankNumber = 0\n\n  return list.some((item: object) => {\n    if (!get(item, key)) {\n      blankNumber += 1\n    }\n\n    if (blankNumber > 1) {\n      return true\n    }\n\n    return false\n  })\n}\n\nexport const popFirstEmptyItem = function <T>(list: T[], key: string): T[] {\n    const exitToRemove = find(list, (item: T) => !get(item, key))\n    if (exitToRemove) {\n      list = without(list, exitToRemove)\n    }\n    return list\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.flows.length)?_c('div',{staticClass:\"builder-canvas no-select\"},_vm._l((_vm.flows[0].blocks),function(block){return _c('block',{key:block.uuid,attrs:{\"id\":(\"block/\" + (block.uuid)),\"block\":block,\"x\":block.platform_metadata.io_viamo.uiData.xPosition,\"y\":block.platform_metadata.io_viamo.uiData.yPosition}})}),1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {\nvar _obj;\nvar _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.hasLayout)?_c('plain-draggable',{staticClass:\"block\",class:( _obj = {\n      active: _vm.isBlockActivated\n    }, _obj[(\"category-\" + (_vm.blockClasses[_vm.block.type].category))] = true, _obj ),attrs:{\"startX\":_vm.x,\"startY\":_vm.y},on:{\"dragged\":_vm.onMoved,\"dragStarted\":_vm.selectBlock}},[_c('header',{staticClass:\"block-target draggable-handle\",class:{\n           'initial': false,\n           'pending': _vm.isConnectionCreateActive,\n           'fulfilled': false,\n           'rejected': false,\n           'activated': _vm.isBlockActivated,\n         },attrs:{\"id\":(\"block/\" + (_vm.block.uuid) + \"/handle\")},on:{\"mouseenter\":function($event){_vm.isConnectionCreateActive && _vm.activateBlockAsDropZone($event)},\"mouseleave\":function($event){_vm.isConnectionCreateActive && _vm.deactivateBlockAsDropZone($event)}}},[_c('p',{staticClass:\"block-type text-muted\"},[_vm._v(\" \"+_vm._s(_vm.trans((\"flow-builder.\" + (_vm.block.type))))+\" \")]),_c('h3',{staticClass:\"block-label\",class:{'empty': !_vm.block.label}},[_vm._v(\" \"+_vm._s(_vm.block.label || 'Untitled block')+\" \")])]),_c('div',{staticClass:\"block-exits\"},_vm._l((_vm.block.exits),function(exit){return _c('div',{key:exit.uuid,staticClass:\"block-exit\",class:{\n           'initial': false,\n           'pending': _vm.isConnectionSourceRelocateActive,\n           'fulfilled': false,\n           'rejected': false,\n           'activated': _vm.isExitActivatedForRelocate(exit),\n         },on:{\"mouseenter\":function($event){_vm.isConnectionSourceRelocateActive && _vm.activateExitAsDropZone($event, exit)},\"mouseleave\":function($event){_vm.isConnectionSourceRelocateActive && _vm.deactivateExitAsDropZone($event, exit)}}},[_c('div',{staticClass:\"total-label-container\"},[_c('span',{staticClass:\"label label-primary tree-block-item-label tree-block-item-output-subscribers-1\"})]),_c('h3',{staticClass:\"block-exit-tag label label-warning\"},[_vm._v(_vm._s(exit.tag))]),(exit.destinationBlock == null)?[_c('plain-draggable',{key:(\"exit/\" + (exit.uuid) + \"/pseudo-block-handle\"),staticClass:\"handle-create-link btn btn-default btn-xs btn-flat\",class:{\n                             'btn-info': exit.destinationBlock != null,\n                         },attrs:{\"id\":(\"exit/\" + (exit.uuid) + \"/pseudo-block-handle\")},on:{\"initialized\":function($event){return _vm.handleDraggableInitializedFor(exit, $event)},\"dragStarted\":function($event){return _vm.onCreateExitDragStarted($event, exit)},\"dragged\":function($event){return _vm.onCreateExitDragged($event)},\"dragEnded\":function($event){return _vm.onCreateExitDragEnded($event, exit)}}},[_c('i',{staticClass:\"glyphicon glyphicon-move\"})]),(_vm.isConnectionCreateActive && _vm.isExitActivatedForCreate(exit) && _vm.livePosition)?[_c('div',{staticClass:\"handle-move-link btn btn-default btn-xs\",class:{\n                             'btn-info': exit.destinationBlock != null,\n                         },attrs:{\"id\":(\"exit/\" + (exit.uuid) + \"/handle\")}},[_c('i',{staticClass:\"glyphicon glyphicon-move\"})]),_c('connection',{key:(\"exit/\" + (exit.uuid) + \"/line-for-draft\"),attrs:{\"repaint-cache-key-generator\":_vm.generateConnectionLayoutKeyFor,\"source\":_vm.block,\"target\":_vm.blocksById[exit.destinationBlock],\"exit\":exit,\"position\":_vm.livePosition,\"color-category\":_vm.blockClasses[_vm.block.type].category}})]:_vm._e()]:_vm._e(),(exit.destinationBlock != null)?[_c('plain-draggable',{key:(\"exit/\" + (exit.uuid) + \"/handle\"),staticClass:\"block-exit-move-handle handle-move-link btn btn-default btn-xs btn-flat\",class:{\n                             // 'btn-default': exit.destinationBlock != null,\n                         },attrs:{\"id\":(\"exit/\" + (exit.uuid) + \"/handle\")},on:{\"initialized\":function($event){return _vm.handleDraggableInitializedFor(exit, $event)},\"dragStarted\":function($event){return _vm.onMoveExitDragStarted($event, exit)},\"dragged\":function($event){return _vm.onMoveExitDragged($event)},\"dragEnded\":function($event){return _vm.onMoveExitDragEnded($event, exit)}}},[_c('i',{staticClass:\"glyphicon glyphicon-move\"})]),_c('div',{staticClass:\"block-exit-remove btn btn-danger btn-xs\",attrs:{\"title\":\"Click to remove this connection\"},on:{\"click\":function($event){return _vm.removeConnectionFrom(exit)}}},[_c('span',{staticClass:\"glyphicon glyphicon-remove\"})]),_c('connection',{key:(\"exit/\" + (exit.uuid) + \"/line\"),attrs:{\"repaint-cache-key-generator\":_vm.generateConnectionLayoutKeyFor,\"source\":_vm.livePosition ? null : _vm.block,\"target\":_vm.blocksById[exit.destinationBlock],\"exit\":exit,\"position\":_vm.livePosition,\"color-category\":_vm.blockClasses[_vm.block.type].category}})]:_vm._e()],2)}),0)]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div><slot></slot></div>\n</template>\n<script>\n  import PlainDraggable from 'plain-draggable'\n\n  export default {\n    data() {\n      return {\n        // draggable: null // no need to set up observers over these\n      }\n    },\n\n    props: {\n      startX: Number,\n      startY: Number,\n      handleDomId: String,\n    },\n\n    // todo: also set `handle` from props onPropsChanged()\n\n    methods: {\n      handleInitialized() {\n        const {draggable} = this\n        // `draggable` reference to reposition if changed externally like:\n        // https://www.npmjs.com/package/plain-draggable#position\n        this.$emit('initialized', {draggable})\n      },\n\n      handleDragged(position) {\n        // eslint-disable-next-line no-debugger\n        // debugger\n\n        const {draggable} = this\n        this.$emit('dragged', {draggable, position})\n      },\n\n      handleDragStarted(position) {\n        const {draggable} = this\n        this.$emit('dragStarted', {draggable, position})\n      },\n\n      handleDragEnded(position) {\n        const {draggable} = this\n        this.$emit('dragEnded', {draggable, position})\n      },\n\n      handleMoved(position) {\n        // eslint-disable-next-line no-debugger\n        // debugger\n\n        const {draggable} = this\n        this.$emit('moved', {draggable, position})\n      }\n    },\n\n    mounted() {\n      // todo: modify this to instantiate blank draggable onCreate, then set options when props change\n      console.debug('PlainDraggable.vue', 'mounted')\n\n      // this.$nextTick(() => {\n      const handle = this.$el.querySelectorAll('.draggable-handle')[0]\n\n      this.draggable = new PlainDraggable(this.$el, {\n        containment: document.querySelector('.builder-canvas'),\n        autoScroll: true,\n\n        // prevent css translate() animations for move\n        // they don't seem to be throttled enough for leaderline to follow tightly\n        leftTop: false,\n\n        onDrag: this.handleDragged,\n        onDragStart: this.handleDragStarted,\n        onDragEnd: this.handleDragEnded,\n        // onMove: this.handleMoved,\n\n        left: this.startX,\n        top: this.startY,\n\n        handle,\n      })\n\n      // draggable.rect.{left,top,x,y,...}\n\n\n      // this.draggable.snap = {x: 50, y: 50, width: 50, height: 50} // todo: why this doesn't work?\n      // this.draggable.snap = {step: 21}\n\n\n      this.handleInitialized()\n      // })\n    },\n\n    destroyed() {\n      this.draggable.remove()\n    }\n  }\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlainDraggable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlainDraggable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PlainDraggable.vue?vue&type=template&id=3b61d02a&\"\nimport script from \"./PlainDraggable.vue?vue&type=script&lang=js&\"\nexport * from \"./PlainDraggable.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"connection\",attrs:{\"reposition-hook\":_vm.repositionHook}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <span class=\"connection\"\n        :reposition-hook=\"repositionHook\" />\n</template>\n\n<script>\n  // import LeaderLine from 'leader-line'\n  const {LeaderLine} = window\n  import {set} from 'lodash'\n  import {mapGetters} from 'vuex'\n\n  export default {\n    props: {\n      exit: Object,\n\n      repaintCacheKeyGenerator: Function,\n      source: Object,\n      target: Object,\n      position: Object,\n\n      colorCategory: Number,\n    },\n\n    data() {\n      return {\n        // line: null, // no need to set up observers over this\n      }\n    },\n\n    computed: {\n      ...mapGetters('builder', ['blocksById']),\n\n      sourceId: ({exit}) => `exit/${exit.uuid}/handle`,\n      targetId: ({exit}) => exit.destinationBlock\n          ? `block/${exit.destinationBlock}/handle`\n          : `exit/${exit.uuid}/pseudo-block-handle`,\n\n      // todo: externalize as `positionCacheKey` + deprecate `position` prop\n      //       but rather include that in `positionCacheKey`'s domain definition\n      repositionHook() {\n        if (!this.repaintCacheKeyGenerator) {\n          return null\n        }\n\n        // @note - intentional side-effect; todo: move this into vuex responding to data changes\n        this.$nextTick(this.reposition) // todo: we only want this called if something changes.\n\n          // generate drafts while 'between exits' or 'source/destination unknown'\n        // todo: push these out into ?block?\n        const source = this.source || {\n          ...set({}, 'platform_metadata.io_viamo.uiData.xPosition', this.position.x),\n          ...set({}, 'platform_metadata.io_viamo.uiData.yPosition', this.position.y)}\n\n        const target = this.target || {\n          ...set({}, 'platform_metadata.io_viamo.uiData.xPosition', this.position.x),\n          ...set({}, 'platform_metadata.io_viamo.uiData.yPosition', this.position.y)}\n\n        return this.repaintCacheKeyGenerator(source, target)\n          .join('\\n')\n      },\n    },\n\n    methods: {\n      reposition() {\n        if (!this.line) {\n          return\n        }\n\n        const position = this.line.position()\n\n        console.debug('connection', 'repositioning', {\n          source: this.source?.uuid,\n          target: this.target?.uuid,\n          position,\n          x: this.line.top,\n          y: this.line.left,\n        })\n      }\n    },\n\n    beforeDestroy() {\n      this.line.remove()\n    },\n\n    mounted() {\n      // todo: add an invisible centered dot on a node header\n      // if (!this.datum.source || !this.datum.target) {\n      //   return\n      // }\n\n      // todo: I think we can do something like this instead; will this prevent all the hairy business if we use pointAnchors?\n      //       See: https://github.com/anseki/leader-line#element\n      //       What I'm thinking is that we can just leverage these x/y's? How do we then update them?\n      // new LeaderLine(element1, LeaderLine.pointAnchor(element3, {x: 10, y: 30}));\n\n      const categoryColorMappings = {\n        'category-0-faint': '#fbfdfb',\n        'category-0-light': '#97BD8A',\n        'category-0-dark': '#38542f',\n        'category-1-faint': '#fdfdfe',\n        'category-1-light': '#6897BB',\n        'category-1-dark': '#30516a',\n        'category-2-faint': '#fdfbf8',\n        'category-2-light': '#C69557',\n        'category-2-dark': '#6e4e25',\n      }\n\n\n\n      const options = {\n        startPlug: 'square',\n\n        startPlugColor: categoryColorMappings[`category-${this.colorCategory}-light`],\n        endPlugColor: categoryColorMappings[`category-${this.colorCategory}-dark`],\n        gradient: true,\n\n        startSocket: 'bottom',\n        endSocket: 'top',\n\n        size: 3,\n        outline: true,\n        outlineColor: '#ffffff',\n        // outlineSize: 0.08,\n\n        path: 'grid',\n        // path: 'fluid',\n        // path: 'arc',\n        // path: 'magnet',\n\n        middleLabel: LeaderLine.captionLabel(this.exit.tag, {\n          color: categoryColorMappings[`category-${this.colorCategory}-dark`],\n          fontSize: 12,\n          // lineOffset: 65,\n        }),\n\n      }\n\n      // const {sourcePosition, targetPosition} = this\n      // this.line = new LeaderLine(\n      //     LeaderLine.pointAnchor(document.body, sourcePosition),\n      //     LeaderLine.pointAnchor(document.body, targetPosition), options)\n\n\n      const blockPaddingOffset = {x: 34, y: -7}\n      const start = document.getElementById(this.sourceId);\n      const end = this.position\n        ? document.getElementById(this.targetId)\n        : LeaderLine.pointAnchor(document.getElementById(this.targetId), blockPaddingOffset)\n\n      this.line = new LeaderLine(start, end, options)\n\n      // stop listening to scroll and window resize hooks\n      // LeaderLine.positionByWindowResize = false\n      // this.line.positionByWindowResize = false\n    }\n  }\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Connection.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Connection.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Connection.vue?vue&type=template&id=a2fa48ca&\"\nimport script from \"./Connection.vue?vue&type=script&lang=js&\"\nexport * from \"./Connection.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <plain-draggable\n      v-if=\"hasLayout\"\n      class=\"block\"\n      :class=\"{\n        active: isBlockActivated,\n        [`category-${blockClasses[block.type].category}`]: true,\n      }\"\n      :startX=\"x\"\n      :startY=\"y\"\n      @dragged=\"onMoved\"\n      @dragStarted=\"selectBlock\">\n\n    <header\n        :id=\"`block/${block.uuid}/handle`\"\n        class=\"block-target draggable-handle\"\n        :class=\"{\n             'initial': false,\n             'pending': isConnectionCreateActive,\n             'fulfilled': false,\n             'rejected': false,\n             'activated': isBlockActivated,\n           }\"\n        @mouseenter=\"isConnectionCreateActive && activateBlockAsDropZone($event)\"\n        @mouseleave=\"isConnectionCreateActive && deactivateBlockAsDropZone($event)\">\n\n      <p class=\"block-type text-muted\">\n        {{trans(`flow-builder.${block.type}`)}}\n      </p>\n\n      <h3 class=\"block-label\"\n          :class=\"{'empty': !block.label}\">\n        {{block.label || 'Untitled block'}}\n      </h3>\n    </header>\n\n    <div class=\"block-exits\">\n      <div v-for=\"exit in block.exits\"\n           :key=\"exit.uuid\"\n           class=\"block-exit\"\n           :class=\"{\n             'initial': false,\n             'pending': isConnectionSourceRelocateActive,\n             'fulfilled': false,\n             'rejected': false,\n             'activated': isExitActivatedForRelocate(exit),\n           }\"\n           @mouseenter=\"isConnectionSourceRelocateActive && activateExitAsDropZone($event, exit)\"\n           @mouseleave=\"isConnectionSourceRelocateActive && deactivateExitAsDropZone($event, exit)\">\n\n        <div class=\"total-label-container\">\n          <span class=\"label label-primary tree-block-item-label tree-block-item-output-subscribers-1\"></span>\n        </div>\n\n        <h3 class=\"block-exit-tag label label-warning\">{{exit.tag}}</h3>\n\n        <template v-if=\"exit.destinationBlock == null\">\n          <plain-draggable class=\"handle-create-link btn btn-default btn-xs btn-flat\"\n                           :class=\"{\n                               'btn-info': exit.destinationBlock != null,\n                           }\"\n                           :id=\"`exit/${exit.uuid}/pseudo-block-handle`\"\n                           :key=\"`exit/${exit.uuid}/pseudo-block-handle`\"\n                           @initialized=\"handleDraggableInitializedFor(exit, $event)\"\n                           @dragStarted=\"onCreateExitDragStarted($event, exit)\"\n                           @dragged=\"onCreateExitDragged($event)\"\n                           @dragEnded=\"onCreateExitDragEnded($event, exit)\">\n            <i class=\"glyphicon glyphicon-move\"></i>\n          </plain-draggable>\n\n          <template v-if=\"isConnectionCreateActive && isExitActivatedForCreate(exit) && livePosition\">\n            <div class=\"handle-move-link btn btn-default btn-xs\"\n                 :class=\"{\n                               'btn-info': exit.destinationBlock != null,\n                           }\"\n                 :id=\"`exit/${exit.uuid}/handle`\">\n              <i class=\"glyphicon glyphicon-move\"></i>\n            </div>\n\n            <connection :key=\"`exit/${exit.uuid}/line-for-draft`\"\n                        :repaint-cache-key-generator=\"generateConnectionLayoutKeyFor\"\n                        :source=\"block\"\n                        :target=\"blocksById[exit.destinationBlock]\"\n                        :exit=\"exit\"\n                        :position=\"livePosition\"\n                        :color-category=\"blockClasses[block.type].category\" />\n          </template>\n        </template>\n\n        <template v-if=\"exit.destinationBlock != null\">\n          <plain-draggable class=\"block-exit-move-handle handle-move-link btn btn-default btn-xs btn-flat\"\n                           :class=\"{\n                               // 'btn-default': exit.destinationBlock != null,\n                           }\"\n                           :id=\"`exit/${exit.uuid}/handle`\"\n                           :key=\"`exit/${exit.uuid}/handle`\"\n                           @initialized=\"handleDraggableInitializedFor(exit, $event)\"\n                           @dragStarted=\"onMoveExitDragStarted($event, exit)\"\n                           @dragged=\"onMoveExitDragged($event)\"\n                           @dragEnded=\"onMoveExitDragEnded($event, exit)\">\n            <i class=\"glyphicon glyphicon-move\"></i>\n          </plain-draggable>\n\n          <div class=\"block-exit-remove btn btn-danger btn-xs\"\n               title=\"Click to remove this connection\"\n               @click=\"removeConnectionFrom(exit)\">\n            <span class=\"glyphicon glyphicon-remove\"></span>\n          </div>\n\n          <connection :key=\"`exit/${exit.uuid}/line`\"\n                      :repaint-cache-key-generator=\"generateConnectionLayoutKeyFor\"\n                      :source=\"livePosition ? null : block\"\n                      :target=\"blocksById[exit.destinationBlock]\"\n                      :exit=\"exit\"\n                      :position=\"livePosition\"\n                      :color-category=\"blockClasses[block.type].category\" />\n        </template>\n\n      </div>\n    </div>\n  </plain-draggable>\n</template>\n\n<script>\n  import {isNumber, forEach} from 'lodash'\n  import {mapActions, mapGetters, mapMutations, mapState} from 'vuex'\n  import PlainDraggable from '@/components/common/PlainDraggable.vue'\n  import {ResourceResolver, SupportedMode} from '@floip/flow-runner'\n  import {OperationKind, generateConnectionLayoutKeyFor} from '@/store/builder'\n  import Connection from '@/components/interaction-designer/Connection.vue'\n  import lang from '@/lib/filters/lang'\n\n  export default {\n    props: ['block', 'x', 'y'],\n    mixins: [lang],\n    components: {\n      Connection,\n      PlainDraggable,\n    },\n\n    created() {\n      this.draggablesByExitId = {} // todo: these need to be (better) lifecycle-managed (eg. mcq add/remove exit).\n    },\n\n    data() {\n      return {\n        livePosition: null,\n        // draggablesByExitId: {}, // no need to vuejs-observe these\n      }\n    },\n\n    computed: {\n      ...mapState('flow', ['resources']),\n      ...mapState('builder', ['activeBlockId', 'operations']),\n      ...mapState({\n        blockClasses: ({trees: {ui}}) => ui.blockClasses,\n      }),\n\n      ...mapGetters('builder', ['blocksById']),\n\n      hasLayout() {\n        return isNumber(this.x) && isNumber(this.y)\n      },\n\n      // todo: does this component know too much, what out of the above mapped state can be mapped?\n      // todo: We should likely also proxy our resource resolving so that as to mitigate the need to see all resources and generate a context\n\n      isConnectionSourceRelocateActive: ({operations}) => !!operations[OperationKind.CONNECTION_SOURCE_RELOCATE].data,\n      isConnectionCreateActive: ({operations}) => !!operations[OperationKind.CONNECTION_CREATE].data,\n      isBlockActivated: ({activeBlockId, block, operations}) => {\n        if (activeBlockId && activeBlockId === block.uuid) {\n          return true\n        }\n\n        const data = operations[OperationKind.CONNECTION_CREATE].data\n        return data && data.target === block.uuid\n      },\n    },\n\n    methods: {\n      // todo: how do we decide whether or not this should be an action or a vanilla domain function?\n      ...{\n        generateConnectionLayoutKeyFor,\n      },\n\n      ...mapMutations('builder', ['setBlockPositionTo']),\n\n      ...mapActions('builder', {\n        _removeConnectionFrom: 'removeConnectionFrom'\n      }),\n\n      ...mapActions('builder', [\n        // ConnectionSourceRelocate\n        'initializeConnectionSourceRelocateWith',\n        'setConnectionSourceRelocateValue',\n        'setConnectionSourceRelocateValueToNullFrom',\n        'applyConnectionSourceRelocate',\n\n        // ConnectionCreate\n        'initializeConnectionCreateWith',\n        'setConnectionCreateTargetBlock',\n        'setConnectionCreateTargetBlockToNullFrom',\n        'applyConnectionCreate',\n      ]),\n\n      ...mapMutations('builder', ['activateBlock']),\n\n      resolveTextResource(uuid) {\n        const {resources} = this\n        const context = {\n          resources,\n          languageId: '22',\n          mode: SupportedMode.SMS}\n        const resource = new ResourceResolver(context)// as IContext) // this isn't ts\n            .resolve(uuid);\n\n        return resource.hasText()\n            ? resource.getText()\n            : uuid\n      },\n\n      // todo: push NodeExit into it's own vue component\n      isExitActivatedForRelocate(exit) {\n        const data = this.operations[OperationKind.CONNECTION_SOURCE_RELOCATE].data\n        return data\n            && data.to\n            && data.to.exitId === exit.uuid\n      },\n\n      isExitActivatedForCreate(exit) {\n        const data = this.operations[OperationKind.CONNECTION_CREATE].data\n        return data\n            && data.source\n            && data.source.exitId === exit.uuid\n      },\n\n      activateExitAsDropZone(e, exit) {\n        const {block} = this\n        this.setConnectionSourceRelocateValue({block, exit})\n      },\n\n      deactivateExitAsDropZone(e, exit) {\n        const {block} = this\n        this.setConnectionSourceRelocateValueToNullFrom({block, exit})\n      },\n\n      // eslint-disable-next-line no-unused-vars\n      activateBlockAsDropZone(e) {\n        const {block} = this\n        this.setConnectionCreateTargetBlock({block})\n      },\n\n      // eslint-disable-next-line no-unused-vars\n      deactivateBlockAsDropZone(e) {\n        const {block} = this\n        this.setConnectionCreateTargetBlockToNullFrom({block})\n      },\n\n      onMoved({position: {left: x, top: y}}) {\n        // todo: try this the vuejs way where we push the change into state, then return false + modify draggable w/in store ?\n\n        const {block} = this\n        this.$nextTick(() => {\n          this.setBlockPositionTo({position: {x, y}, block})\n\n          forEach(this.draggablesByExitId, draggable =>\n            draggable.position())\n\n          console.debug('Block', 'onMoved', 'positioned all of', this.draggablesByExitId)\n        })\n      },\n\n      removeConnectionFrom(exit) {\n        const {block} = this\n        this._removeConnectionFrom({block, exit})\n      },\n\n      handleDraggableInitializedFor({uuid}, {draggable}) {\n        this.draggablesByExitId[uuid] = draggable\n\n        const {left, top} = draggable\n        const {uuid: blockId} = this.block\n\n\n        console.debug('Block', 'handleDraggableInitializedFor', {blockId, exitId: uuid, coords: {left, top}})\n      },\n\n      onCreateExitDragStarted({draggable}, exit) {\n        const {block} = this\n        const {left: x, top: y} = draggable\n\n        this.initializeConnectionCreateWith({\n          block,\n          exit,\n          position: {x, y}})\n\n        // since mouseenter + mouseleave will not occur when draggable is below cursor\n        // we simply snap the draggable out from under the cursor during this operation\n        draggable.left += 30\n        draggable.top += 25\n      },\n\n      onCreateExitDragged({position: {left: x, top: y}}) {\n        this.livePosition = {x, y}\n      },\n\n      onCreateExitDragEnded({draggable}) {\n        const {x: left, y: top} = this.operations[OperationKind.CONNECTION_CREATE].data.position\n\n        console.debug('Block', 'onCreateExitDragEnded', 'operation.data.position', {left, top})\n        console.debug('Block', 'onCreateExitDragEnded', 'reset', {left: draggable.left, top: draggable.top})\n\n        Object.assign(draggable, {left, top})\n\n        this.applyConnectionCreate()\n\n        this.livePosition = null\n      },\n\n      onMoveExitDragStarted({draggable}, exit) {\n        const {block} = this\n        const {left: x, top: y} = draggable\n\n        this.initializeConnectionSourceRelocateWith({\n          block,\n          exit,\n          position: {x, y}})\n\n        // since mouseenter + mouseleave will not occur when draggable is below cursor\n        // we simply snap the draggable out from under the cursor during this operation\n        draggable.left += 30\n        draggable.top += 25\n\n      },\n\n      onMoveExitDragged({position: {left: x, top: y}}) {\n        this.livePosition = {x, y}\n      },\n\n      // todo: store the leaderlines in vuex and manip there --- aka the leaderline itself would simply _produce_ the\n      //       domain object which we thenceforth manip in vuex ?\n\n      onMoveExitDragEnded({draggable}) {\n        const {x: left, y: top} = this.operations[OperationKind.CONNECTION_SOURCE_RELOCATE].data.position\n\n        console.debug('Block', 'onMoveExitDragEnded', 'operation.data.position', {left, top})\n        console.debug('Block', 'onMoveExitDragEnded', 'reset', {left: draggable.left, top: draggable.top})\n\n        Object.assign(draggable, {left, top})\n\n        this.applyConnectionSourceRelocate()\n        this.livePosition = null\n      },\n\n      selectBlock() {\n        const {block: {uuid: blockId}} = this\n        this.activateBlock({blockId})\n      },\n    },\n  }\n</script>\n\n<style lang=\"scss\">\n  .btn-default.btn-flat {\n    @extend .btn-default;\n    background: transparent;\n  }\n\n  .block {\n    position: absolute;\n    left: 0;\n    top: 0;\n    z-index: 1*10;\n\n    min-width: 122px;\n    padding: 0.4em;\n    padding-bottom: 0.25em;\n    scroll-margin: 35px;\n    scroll-margin-top: 100px;\n\n    background-color: white;\n    color: #575757;\n    border: 1px solid #5b5b5b;\n\n    border-radius: 0.3em;\n    box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n    opacity: 0.9;\n\n    transition:\n      opacity 200ms ease-in-out,\n      background-color 200ms ease-in-out;\n\n    .block-label {\n      font-size: 14px;\n      font-weight: normal;\n\n      &.empty {\n        color: #aaa;\n      }\n    }\n\n    .block-type {\n      font-size: 11px;\n      font-weight: bolder;\n      margin-right: 1em;\n      margin-bottom: 0.4em;\n    }\n\n    .block-target {\n      min-height: 6em;\n      border: 1px dashed transparent;\n      border-bottom: 1px solid #eee;\n      padding: 0.1em;\n\n      transition: border-radius 200ms ease-in-out;\n\n      &:hover {\n        border-radius: 0.3em;\n        border-color: #5b5b5b;\n      }\n    }\n\n    .block-exits {\n      display: flex;\n      white-space: nowrap;\n      position: relative;\n      top: 0em;\n      margin-top: 0.25em;\n\n      .block-exit {\n        display: inline-block;\n        border: 1px dashed transparent;\n        transition: border-radius 200ms ease-in-out;\n\n        /*flex: auto;*/\n        min-width: 6em;\n        max-width: 140px;\n\n        padding: 0.25em 1em;\n        text-align: center;\n\n        .block-exit-tag  {\n          display: block;\n\n          min-width: 6em;\n          max-width: 140px;\n\n          margin: 0 0 0.5em 0;\n          padding: 0.4em;\n\n          background-color: #5b5b5b;\n          border: none;\n\n          font-weight: normal;\n          font-size: 12px;\n\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          overflow: hidden;\n        }\n\n        .block-exit-move-handle {\n          margin-right: 0.5em;\n        }\n\n        .block-exit-remove {\n          background-image: none;\n          opacity: 0;\n          transition: opacity 200ms ease-in-out;\n        }\n\n        &.activated {\n          border-radius: 0.3em;\n          border-color: #333333;\n        }\n      }\n\n    }\n\n    // state mutations\n\n    &.active {\n      border-width: 2px;\n      box-shadow: 0 3px 6px #CACACA;\n    }\n\n    &:hover {\n      opacity: 1;\n    }\n\n    &.active,\n    &:hover {\n      .block-exit .block-exit-remove {\n        opacity: 1;\n      }\n    }\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Block.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Block.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Block.vue?vue&type=template&id=2d7b1c6e&\"\nimport script from \"./Block.vue?vue&type=script&lang=js&\"\nexport * from \"./Block.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Block.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {mapState} from 'vuex'\nimport {Component, Vue} from 'vue-property-decorator'\nimport Block from \"@/components/interaction-designer/Block.vue\"\n\n@Component({\n  components: {\n    Block,\n  },\n\n  computed: {\n    ...mapState('flow', ['flows']),\n  },\n\n  mounted() {\n    this.$store.dispatch('builder/loadFlow')\n  },\n})\nexport default class BuilderCanvas extends Vue {\n}\n\nexport {BuilderCanvas}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BuilderCanvas.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BuilderCanvas.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./BuilderCanvas.vue?vue&type=template&id=4cc35a95&scoped=true&\"\nimport script from \"./BuilderCanvas.vue?vue&type=script&lang=ts&\"\nexport * from \"./BuilderCanvas.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./BuilderCanvas.vue?vue&type=style&index=0&id=4cc35a95&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4cc35a95\",\n  null\n  \n)\n\nexport default component.exports","\n/*global Backbone */\nwindow.app = window.app || {};\n\n\n(function($) {\n\n\tapp.ui = app.ui || {};\n\tapp.ui.changes = 0;\n\n\tapp.ui.saveTimer = app.ui.saveTimer || 60;\n\tapp.ui.saveCurrentlyInProgress = 0;\n\n\tapp.ui.removeClassPrefix = function(blockClassName) {\n\n\t\treturn blockClassName.substr(11);\n\n\t};\n\n\tapp.ui.change = function(textNotification) {\n    console.log('app.ui.change', textNotification);\n\n    var selectedBlock = builder.$store.getters.selectedBlock\n\n    if (!selectedBlock) {return}\n\n    // Temporary legacy fix for when some customData properties are not reactive by default\n    // because they don't yet exist in `15-trees-block-defaults.js`\n    selectedBlock.customData = _.extend({}, selectedBlock.customData)\n  };\n\n\tapp.ui.noChange = function() {\n    console.log('app.ui.nochange');\n  };\n\n\tapp.ui.changeLock = function() {\n\t\tapp.ui.changes = -1;\n\t};\n\n\tapp.ui.findSubscriberPropertyField = function(search) {\n\t\treturn _.find(app.ui.subscriberPropertyFields, search) || null\n\t};\n\n\tapp.dataControl = {};\n\tapp.dataControl.send = function () {\n    if (!builder.$store.getters.isFeatureTreeSaveEnabled) {\n      console.info('Feature `treeSave` is disabled')\n      return\n    }\n\n    var outputData = JSON.stringify(app.tree);\n\n\t\tvar treeId = app.tree.get('id');\n\t\tif (app.ui.saveCurrentlyInProgress == 1) {\n\t\t\tconsole.log('Save currently in progress');\n\t\t\treturn;\n\t\t}\n\n\t\tvar treeUpdatedConflict = builder.$store.state.trees.ui.treeUpdateConflict;\n\t\tapp.ui.saveCurrentlyInProgress = 1;\n\n\t\tapp.audioChoice.setTopUpdatesBar(Lang.trans('trees.saving-tree'));\n\t\tapp.dataControl._setValidationResultsForUI([]);\n\n    var requestData = {\n    \tdata: outputData,\n\t\t};\n    if (treeUpdatedConflict !== null) {\n\t\t\tconsole.log('Update not currently possible');\n\t\t\treturn false;\n\t\t}\n\n\t\tvar promise = $.post('/ajax/trees/save/' + treeId, requestData)\n\t\t\t.done(function (response) {\n        app.audioChoice.setTopUpdatesBar(Lang.trans('trees.tree-saved'), 1);\n        //the person has been logged out\n        if (typeof (response) != \"object\") {\n          //spawn the modal\n          $(\"#myModal\").modal({show: true, backdrop: 'static'});\n        }\n\n        app.ui.saveCurrentlyInProgress = 0;\n\t\t\t\tapp.dataControl._setValidationResultsForUI(response.validation_results);\n\n        app.ui.previousTreeJson = outputData; // used to detect changes in vuejs\n        app.ui.noChange();\n\n        app.tree.updateFloipAlert();\n      })\n\t\t\t.fail(function (response) {\n\t\t\t\tif (response.status === 409) {\n\t\t\t\t\t// Dispatch an action to prevent further tree update until page is refreshed\n\t\t\t\t\tvar payload = {\n\t\t\t\t\t\ttreeUpdateConflict: {\n\t\t\t\t\t\t\ttree_id: treeId,\n\t\t\t\t\t\t\tmessage: response.responseJSON.message,\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tbuilder.$store.dispatch('setTreeUpdateConflictStatus', payload);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error(response)\n\t\t\t\t\tapp.audioChoice.setTopUpdatesBar(Lang.trans('trees.error-while-saving-tree'), 1);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.always(function () {\n\t\t\t\tapp.ui.saveCurrentlyInProgress = 0;\n\t\t\t});\n\n\t\t// Create Adapter from jQuery-promise-api to ES6-promise-api\n\t\t// so that it can be chained into vuex actions\n\t\treturn _.defaults(promise, {\n\t\t\tthen: promise.done,\n\t\t\tcatch: promise.fail,\n\t\t\tfinally: promise.always,\n\t\t})\n\t};\n\n\tapp.dataControl._setValidationResultsForUI = function(validationResults) {\n    app.ui.validationResults = validationResults || [];\n  };\n\n  app.exportOptionsModal = {}\n  app.exportOptionsModal.initialize = function () {\n    var exportOptionsTemplate = _.template(JST[\"legacy/templates/export-options-template.html\"])\n\n    $('body').append(exportOptionsTemplate())\n\n    $('.tree-export-options-input').change(function (e) {\n      app.exportOptionsModal.handleInput(e)\n    })\n\n    // Select the URL box text if clicked\n    $('.tree-export-options-download-api-url').focus(function () {\n      this.select()\n    })\n\n    // Add datepickers for the time boxes\n    $('.tree-export-options-input-datepicker').datetimepicker({\n      pickTime: false\n    })\n    $('.tree-export-options-input-datepicker').on('dp.change', function (e) {\n      $(e.currentTarget).trigger('change')\n    })\n\n    // Kickoff the process to build the link URL!\n    $('.tree-export-options-input').first().trigger('change')\n  }\n\n  app.exportOptionsModal.open = function () {\n    if ($('#export-options-modal').length == 0) {\n      app.exportOptionsModal.initialize()\n    }\n\n    // Show the modal.\n    $('#export-options-modal').modal()\n  }\n\n  app.exportOptionsModal.handleInput = function (e) {\n    var value = $(e.currentTarget).val()\n    var key = $(e.currentTarget).attr('data-export-options-key')\n\n    if (key == 'dateFilter') {\n      if (value == '1') {\n        $('.export-options-date-filter-container').show()\n      } else {\n        $('.export-options-date-filter-container').hide()\n\n        // Reset the values so they don't get serialized if hidden\n        $('.tree-export-options-input[data-export-options-key=callsAfter]').val('')\n        $('.tree-export-options-input[data-export-options-key=callsBefore]').val('')\n      }\n    }\n\n    $('.tree-export-options-download-link').attr('href', app.exportOptionsModal.buildUrl())\n    $('.tree-export-options-download-api-url').val(app.exportOptionsModal.buildUrl(1))\n  }\n\n  app.exportOptionsModal.buildUrl = function (isApiUrl) {\n    var url = \"/trees/\" + app.ui.treeId + \"/exportcsv?\";\n\n    if (isApiUrl) {\n      url = window.location.protocol + \"//\" + window.location.host + \"/api/v1/trees/\" + app.ui.treeId + \"/csvexport/direct?\";\n    }\n\n    url += $('.tree-export-options-input').serialize()\n\n    if (isApiUrl) {\n      url += \"&api_key=\" + app.ui.apiKey;\n    }\n\n    return url\n  }\n\n  // Initial version of the shareable link modal,\n  // for a specific single tree:\n  app.shareableLinkModal = {}\n  app.shareableLinkModal.initialize = function () {\n    var shareableLinkTemplate = _.template(JST[\"legacy/templates/shareable-link-template.html\"])\n\n    $('body').append(shareableLinkTemplate())\n\n    // Select the URL box text if clicked\n    $('.tree-shareable-link-url').focus(function () {\n      this.select()\n    })\n\n    // Assign button clicks\n    $('.tree-shareable-link-generate-button').on('click', function (e) {\n      app.shareableLinkModal.sendRequest('create')\n    })\n    $('.tree-shareable-link-delete-button').on('click', function (e) {\n      app.shareableLinkModal.switchView('delete')\n    })\n    $('.tree-shareable-link-delete-confirm-button').on('click', function (e) {\n      app.shareableLinkModal.sendRequest('delete')\n    })\n    $('.tree-shareable-link-delete-cancel-button').on('click', function (e) {\n      app.shareableLinkModal.switchView('edit')\n    })\n\n    if (app.ui.publicId) {\n      // If there's already a public ID, then show the \"edit\" view\n      app.shareableLinkModal.setUrl()\n      app.shareableLinkModal.switchView('edit')\n    } else {\n      app.shareableLinkModal.switchView('new')\n    }\n  }\n\n  app.shareableLinkModal.switchView = function (view) {\n    $('.shareable-link-delete').hide()\n    $('.shareable-link-edit').hide()\n    $('.shareable-link-new').hide()\n    $(\".shareable-link-\" + view).show()\n  }\n\n  app.shareableLinkModal.open = function (e) {\n    if ($('#shareable-link-modal').length == 0) {\n      app.shareableLinkModal.initialize()\n    }\n\n    // Show the modal.\n    $('#shareable-link-modal').modal()\n  }\n\n  app.shareableLinkModal.buildUrl = function () {\n    var url = ''\n    if (app.ui.publicId) {\n      url = window.location.protocol + \"//\" + window.location.host + \"/share/a/trees/\" + app.ui.publicId;\n    }\n    return url\n  }\n\n  app.shareableLinkModal.setUrl = function () {\n    var url = app.shareableLinkModal.buildUrl()\n    $('.tree-shareable-link-url').val(url)\n    $('.tree-shareable-link-url-link').attr('href', url)\n  }\n\n  app.shareableLinkModal.sendRequest = function (requestType) {\n    $.post(\"/ajax/trees/updateshareablelink/\" + app.ui.treeId, {type: requestType})\n        .done(function (response) {\n          if (response) {\n            // New one!\n            app.ui.publicId = response\n\n            app.shareableLinkModal.setUrl()\n            app.shareableLinkModal.switchView('edit')\n          } else {\n            app.ui.publicId = ''\n            app.shareableLinkModal.switchView('new')\n          }\n\n          return true\n        })\n        .fail(function (response) {\n          var errorMessage = response.responseJSON || 'Error while updating shareable link...'\n          app.audioChoice.setTopUpdatesBar(errorMessage, 1)\n        })\n  }\n\n  // Updated version of the shareable link modal,\n  // for tree sets rather than specific trees!\n\n  app.shareableLinkSetsModal = {}\n  app.shareableLinkSetsModal.initialize = function () {\n    var shareableLinkTemplate = _.template(JST[\"legacy/templates/shareable-link-sets-template.html\"])\n\n    $('body').append(shareableLinkTemplate({\n      defaultLocales: builder.$store.state.defaultLocales,\n      orgEnabledLanguages: builder.$store.state.orgEnabledLanguages,\n    }))\n\n    // Assign button clicks\n    $('.tree-shareable-link-sets-generate-button').on('click', function (e) {\n      app.shareableLinkSetsModal.sendRequest('create')\n    })\n\n    $('input[name=shouldUseCustomBlockOrdering]').on('click', function () {\n      if ($(this).is(':checked')) {\n        $('.block-ordinal').prop('disabled', false)\n      } else {\n        $('.block-ordinal').prop('disabled', true)\n      }\n    })\n\n    $(\"select[name='lockDateRange']\").on('change', function () {\n      if (this.value === '1') {\n        $(\".hide-on-lockDateRange\").hide()\n      } else {\n        $(\".hide-on-lockDateRange\").show()\n      }\n    })\n\n    // Initialize the second half with the list of existing links:\n    app.shareableLinkSetsModal.initializeLinksList()\n  }\n\n  app.shareableLinkSetsModal.initializeLinksList = function () {\n    var shareableLinkListTemplate = _.template(JST[\"legacy/templates/shareable-link-sets-list-template.html\"])\n    $('.shareable-link-sets-list-container').html(shareableLinkListTemplate)\n\n    $('.tree-shareable-link-sets-delete-button').on('click', function (e) {\n      app.shareableLinkSetsModal.switchToDeleteView(e)\n    })\n    $('.tree-shareable-link-sets-delete-confirm-button').on('click', function (e) {\n      var shareableLinkHash = $(e.currentTarget).attr('data-link-hash')\n      app.shareableLinkSetsModal.sendRequest('delete', shareableLinkHash)\n    })\n    $('.tree-shareable-link-sets-delete-cancel-button').on('click', function (e) {\n      app.shareableLinkSetsModal.switchAwayFromDeleteView(e)\n    })\n  }\n\n  app.shareableLinkSetsModal.switchToDeleteView = function (e) {\n    var shareableLinkId = $(e.currentTarget).attr('data-link-id')\n    var listElement = $(\".shareable-link-item-div[data-link-id=\" + shareableLinkId + \"]\")\n\n    if ($(listElement).hasClass('list-group-item-danger')) {\n      app.shareableLinkSetsModal.switchAwayFromDeleteView(e)\n    } else {\n      $(listElement).addClass('list-group-item-danger')\n      $(listElement).children('.shareable-link-item-div-delete').show()\n    }\n\n  }\n\n  app.shareableLinkSetsModal.switchAwayFromDeleteView = function (e) {\n    var shareableLinkId = $(e.currentTarget).attr('data-link-id')\n    var listElement = $(\".shareable-link-item-div[data-link-id=\" + shareableLinkId + \"]\")\n\n    $(listElement).removeClass('list-group-item-danger')\n    $(listElement).children('.shareable-link-item-div-delete').hide()\n  }\n\n  app.shareableLinkSetsModal.open = function (e) {\n    if ($('#shareable-link-sets-modal').length == 0) {\n      app.shareableLinkSetsModal.initialize()\n    }\n\n    // Re-set the labels\n    app.shareableLinkSetsModal.setLabelValues()\n\n    // Show the modal.\n    $('#shareable-link-sets-modal').modal()\n  }\n\n  app.shareableLinkSetsModal.setLabelValues = function () {\n    // TODO - use another mini-template for these guys rather than updating text values with jQuery.\n    var startDateLabel = app.startDate.format('MMMM D, YYYY')\n    var endDateLabel = app.endDate.format('MMMM D, YYYY')\n    var channelLabel = app.labels.channel\n    var blocksLabel = app.labels.blocks\n\n    if (app.params.versionFiltersEnabled) {\n      $('.shareable-link-sets-versions-label').show()\n    } else {\n      $('.shareable-link-sets-versions-label').hide()\n    }\n\n    if (app.params.noValidDateRange) {\n      $('.shareable-link-sets-date-range-labels').hide()\n      $('.shareable-link-sets-date-range-all-time-label').show()\n    } else {\n      $('span.sl-label-start-date').text(startDateLabel)\n      $('span.sl-label-end-date').text(endDateLabel)\n    }\n\n    $('span.sl-label-channel').text(channelLabel)\n    $('span.sl-label-blocks').text(blocksLabel)\n\n    $('span.sl-label-versions').text(app.labels.versionsSelected + \" of \" + app.labels.versionsTotal)\n  }\n\n  app.shareableLinkSetsModal.buildUrl = function (public_hash) {\n    var url = ''\n    if (public_hash) {\n      url = window.location.protocol + \"//\" + window.location.host + \"/share/a/trees/\" + public_hash;\n    }\n    return url\n  }\n\n  app.shareableLinkSetsModal.sendRequest = function (requestType, shareableLinkHash) {\n    if (requestType == 'delete') {\n      var sendRequest = {\n        requestType: requestType,\n        shareableLinkHash: shareableLinkHash\n      }\n    } else {\n      var sendRequest = {\n        requestType: requestType,\n        channelFilter: app.params.channelFilter,\n        includedBlocks: app.params.includedBlocks,\n        excludedBlocks: app.params.excludedBlocks,\n        blockKeys: app.blockKeys,\n        hiddenDirectorySelectionFields: app.params.hiddenDirectorySelectionFields,\n        lockDateRange: _.parseInt($('.shareable-link-sets-input[name=lockDateRange]').val()),\n        resultsLocale: $('.shareable-link-sets-input[name=resultsLocale]').val(),\n        showKeyMetrics: $('.shareable-link-sets-input[name=showKeyMetrics]').is(':checked') ? '1' : '0',\n        showBlockType: $('.shareable-link-sets-input[name=showBlockType]').is(':checked') ? '1' : '0',\n\t\t\t\tshouldShowResultsFromIncompleteEngagements: $('.shareable-link-sets-input[name=shouldShowResultsFromIncompleteEngagements]').is(':checked') ? '1' : '0',\n\t\t\t\tshouldOnlyShowLatestResultPerSession: $('.shareable-link-sets-input[name=shouldOnlyShowLatestResultPerSession]').is(':checked') ? '1' : '0',\n\t\t\t\tshouldUseSimpleDatePicker: $('.shareable-link-sets-input[name=shouldUseSimpleDatePicker]').is(':checked') ? '1' : '0',\n\t\t\t\tshouldUseCustomBlockOrdering: $('.shareable-link-sets-input[name=shouldUseCustomBlockOrdering]').is(':checked') ? '1' : '0',\n        enabledTabs: $('input[name=enabledTabs]:checked')\n            .map(function (i, el) {\n              return $(el).val()\n            })\n            .get(),\n        tagFilter: $('input[name=tagFilter]:checked')\n            .map(function (i, el) {\n              return $(el).val()\n            })\n            .get(),\n        directorySelectionFieldFilter: $('input[name=directorySelectionFieldFilter]:checked')\n            .map(function (i, el) {\n              return $(el).val()\n            })\n            .get(),\n        blockChoiceFilter: $('input[name=blockChoiceFilter]:checked')\n            .map(function (i, el) {\n              return $(el).val()\n            })\n            .get(),\n        filterDisplayThreshold: $('input[name=filterDisplayThreshold]').val(),\n      }\n\n      if ($('.shareable-link-sets-input[name=shouldUseCustomBlockOrdering]').is(':checked')) {\n        sendRequest['customBlockOrder'] = _.reduce($('.block-ordinal').toArray(),\n            function (memo, el) {\n              memo[$(el).data('js-key')] = $(el).val()\n              return memo\n            },\n            {})\n      }\n\n      if (app.params.noValidDateRange == false) {\n        sendRequest.startDate = app.startDate.format('YYYY-MM-DD')\n        sendRequest.endDate = app.endDate.format('YYYY-MM-DD')\n      }\n\n      if (app.params.versionFiltersEnabled) {\n        sendRequest.versions = app.params.versions\n      }\n    }\n\n    $.post(\"/ajax/treeversionsets/updateshareablelink/\" + app.tree_version_set_id, {data: sendRequest})\n        .done(function (response) {\n          if (requestType == 'delete') {\n            if (response == 1) {\n              // Remove the entry with that hash from the local JS list\n              app.shareableLinks = _.without(app.shareableLinks,\n                  _.findWhere(app.shareableLinks, {public_hash: shareableLinkHash}))\n              // Initialize the second half with the list of existing links:\n              app.shareableLinkSetsModal.initializeLinksList()\n            }\n          } else {\n\n            // Add the new response to the start of the shareable links array:\n            app.shareableLinks.unshift(response)\n\n            // Initialize the second half with the list of existing links:\n            app.shareableLinkSetsModal.initializeLinksList()\n          }\n          return true\n        })\n        .fail(function (response) {\n          var errorMessage = response.responseJSON || 'Error while updating shareable link...'\n          app.audioChoice.setTopUpdatesBar(errorMessage, 1)\n        })\n  }\n\n  // csvExports modal helper functions\n  app.csvExportsModal = {}\n  app.csvExportsModal.initialize = function () {\n    var csvExportTemplate = _.template(JST[\"legacy/templates/combined-csv-export-template.html\"])\n\n    $('body').append(csvExportTemplate())\n\n    // Assign button clicks\n    $('.tree-csv-exports-generate-button').on('click', function (e) {\n      app.csvExportsModal.sendCreateRequest()\n    })\n\n    // var to check when default\n    var setToDefault = true\n    // set recipes a string of values of customisable fields\n    // headings-cells-mcq-messages\n    var recipeHumanReadable = '0000'\n    var recipeMachineReadable = '1112'\n    var recipeUserCustomised = null\n\n    // get selected options for export from users\n    function getUserOptionsRecipe() {\n      var fhd = ($(\".csv-exports-option-format-headings\").val()) ? $(\".csv-exports-option-format-headings\").val() : '0'\n      var fcc = ($(\".csv-exports-option-format-cells\").val()) ? $(\".csv-exports-option-format-cells\").val() : '0'\n      var vcq = ($(\".csv-exports-option-values-mcq\").val()) ? $(\".csv-exports-option-values-mcq\").val() : '0'\n      var vms = ($(\".csv-exports-option-values-messages\").val()) ? $(\".csv-exports-option-values-messages\").val() : '0'\n\n      return fhd + fcc + vcq + vms\n    }\n\n    // remove active class from all\n    $(\"[class*=csv-exports-btn-format-]\").click(function () {\n      $(\"[class*=csv-exports-btn-format-]\").removeClass('btn-primary active').addClass('btn-default')\n    })\n\n    // when human-readable is selected\n    $(\".csv-exports-btn-format-human\").click(function () {\n      setToDefault = false\n      $(this).addClass('btn-primary active').removeClass('btn-default')\n      $(\".csv-exports-option-format-headings option\").eq('0').prop('selected', 'selected')\n      $(\".csv-exports-option-format-cells option\").eq('0').prop('selected', 'selected')\n      $(\".csv-exports-option-values-mcq option\").eq('0').prop('selected', 'selected')\n      $(\".csv-exports-option-values-messages option\").eq('0').prop('selected', 'selected')\n    })\n\n    // when machine-readable is selected\n    $(\".csv-exports-btn-format-machine\").click(function () {\n      setToDefault = false\n      $(this).addClass('btn-primary active').removeClass('btn-default')\n      $(\".csv-exports-option-format-headings option\").eq('1').prop('selected', 'selected')\n      $(\".csv-exports-option-format-cells option\").eq('1').prop('selected', 'selected')\n      $(\".csv-exports-option-values-mcq option\").eq('1').prop('selected', 'selected')\n      $(\".csv-exports-option-values-messages option\").eq('2').prop('selected', 'selected')\n    })\n\n    // when custom is selected\n    $(\".csv-exports-btn-format-custom\").click(function () {\n      setToDefault = false\n      $(this).addClass('btn-primary active').removeClass('btn-default')\n    })\n\n    // when we are to use default use human-readable\n    if (setToDefault) {\n      $(\".csv-exports-btn-format-human\").trigger('click')\n    }\n\n    // on change check what options have been selected\n    $(\"[class*=csv-exports-option-]\").change(function () {\n      setToDefault = false\n      recipeUserCustomised = getUserOptionsRecipe()\n\n      // if customRecipe is neither machine-readable NOR human-readable then it is custom\n      if (recipeUserCustomised) {\n        if (recipeUserCustomised == recipeHumanReadable) {\n          $(\".csv-exports-btn-format-human\").trigger('click')\n        } else if (recipeUserCustomised == recipeMachineReadable) {\n          $(\".csv-exports-btn-format-machine\").trigger('click')\n        } else {\n          setToDefault = false\n          $(\"[class*=csv-exports-btn-format-]\").removeClass('btn-primary active').addClass('btn-default')\n          $(\".csv-exports-btn-format-custom\").addClass('btn-primary active').removeClass('btn-default')\n        }\n      }\n    })\n\n    // Initialize the second half with the list of existing links:\n    app.csvExportsModal.initializeLinksList()\n  }\n\n  app.csvExportsModal.initializeLinksList = function () {\n    if (typeof app.csvExportsModal.shareableLinkListTemplate == 'undefined') {\n      app.csvExportsModal.shareableLinkListTemplate = _.template(JST[\"legacy/templates/combined-csv-export-list-template.html\"])\n    }\n    $('.csv-exports-list-container').html(app.csvExportsModal.shareableLinkListTemplate())\n    app.csvExportsModal.queueInProgress()\n  }\n\n  app.csvExportsModal.open = function (e) {\n    if ($('#combined-csv-export-modal').length == 0) {\n      app.csvExportsModal.initialize()\n    }\n\n    app.csvExportsModal.setLabelValues()\n    $('#combined-csv-export-modal').modal()\n  }\n\n  app.csvExportsModal.setLabelValues = function () {\n    // TODO - use another mini-template for these guys, rather than updating text values with jQuery.\n    var startDateLabel = app.startDate.format('MMMM D, YYYY')\n    var endDateLabel = app.endDate.format('MMMM D, YYYY')\n    var channelLabel = app.labels.channel\n    var blocksLabel = app.labels.blocks\n\n    if (app.params.versionFiltersEnabled) {\n      $('.export-version-sets-versions-label').show()\n    } else {\n      $('.export-version-sets-versions-label').hide()\n    }\n\n    if (app.params.noValidDateRange) {\n      $('.csv-exports-date-range-labels').hide()\n      $('.csv-exports-date-range-all-time-label').show()\n    } else {\n      $('span.sl-label-start-date').text(startDateLabel)\n      $('span.sl-label-end-date').text(endDateLabel)\n    }\n\n    $('span.sl-label-channel').text(channelLabel)\n    $('span.sl-label-blocks').text(blocksLabel)\n\n    $('span.sl-label-versions').text(app.labels.versionsSelected + \" of \" + app.labels.versionsTotal)\n  }\n\n  app.csvExportsModal.sendStatusRequest = function () {\n    $.ajax({\n      url: \"/ajax/treeversionsets/csvexportstatus/\" + app.tree_version_set_id,\n      type: 'GET',\n      dataType: 'json',\n      success: function (response) {\n        app.csvExports = response\n        app.csvExportsModal.initializeLinksList()\n      }\n    })\n  }\n\n  app.csvExportsModal.sendCreateRequest = function () {\n    var sendRequest = {\n      channelFilter: app.params.channelFilter,\n      includedBlocks: app.params.includedBlocks,\n      excludedBlocks: app.params.excludedBlocks,\n      blockKeys: app.blockKeys,\n      order: $('.csv-exports-input[name=order]').val(),\n      formatHeadings: $('.csv-exports-input[name=formatHeadings]').val(),\n      cellContents: $('.csv-exports-input[name=cellContents]').val(),\n      messageBlockPercent: $('.csv-exports-input[name=messageBlockPercent]').val(),\n      formatMCQResponses: $('.csv-exports-input[name=formatMCQResponses]').val(),\n      treeVersionIds: app.params.versions,\n      mergeOption: $('.csv-exports-input[name=mergeOption]').val(),\n      useLocalTimezone: $('.csv-exports-input[name=useLocalTimezone]').val(),\n      useExcelFormat: $('.csv-exports-input[name=useExcelFormat]').val()\n    }\n\n    if (app.params.noValidDateRange == false) {\n      sendRequest.startDate = app.startDate.format('YYYY-MM-DD')\n      sendRequest.endDate = app.endDate.format('YYYY-MM-DD')\n    }\n\n    var treeVersionSetId = app.tree_version_set_id\n\n    var then = moment(); // time of export click\n    var thenAfter5s = then.clone().add(5, 'seconds') // Re-enable time will be after 5s\n    $('.tree-csv-exports-generate-button').prop( \"disabled\", true)\n    $.post(\"/ajax/treeversionsets/csvexportstart/\" + treeVersionSetId, {data: sendRequest})\n        .done(function (response) {\n          app.csvExports = response\n          app.csvExportsModal.initializeLinksList()\n          return true\n        })\n        .fail(function (response) {\n          console.error(response)\n          app.audioChoice.setTopUpdatesBar('Error while sending CSV request...', 1)\n        })\n        .always(function (response) {\n          // Re-enable the export button\n          // Estimate the right delay in case the request has been processed in less than 5s\n          var delay = moment.duration(thenAfter5s.diff(moment()))\n          var delayInMilliseconds = delay > 0 ? delay.asMilliseconds() : 0\n          _.delay(function() {\n            $('.tree-csv-exports-generate-button').prop( \"disabled\", false)\n          }, delayInMilliseconds);\n        })\n  }\n\n  app.csvExportsModal.queueInProgress = function () {\n    var firstExportInProgress = _.find(app.csvExports, {upload_status: 0})\n\n    // If necessary, create a de-bounced version of the Ajax status check function\n    if (_.isFunction(app.csvExportsModal.sendStatusRequestDebounced) == false) {\n      app.csvExportsModal.sendStatusRequestDebounced = _.debounce(app.csvExportsModal.sendStatusRequest, 1000)\n    }\n\n    if (firstExportInProgress) {\n      _.delay(app.csvExportsModal.sendStatusRequestDebounced, 0.5 * 1000)\n    }\n  }\n\n  app.blockResultsLoader = {}\n  app.blockResultsLoader.load = function () {\n    var nextBlockKeyToLoad = $('.tree-results-block-container[data-is-loaded=0]').first().attr('id')\n\n    $('.tree-results-loading-indicators').show()\n\n    if (nextBlockKeyToLoad) {\n      app.blockResultsLoader.loadBlock(nextBlockKeyToLoad, 1)\n    } else {\n      $('.tree-results-loading-indicators').hide()\n    }\n  }\n\n  app.blockResultsLoader.assignButtons = function (parentElement) {\n    $(parentElement).find('.result-view-control-tab').on('click', function (e) {\n      var targetType = $(e.currentTarget).attr('data-tab-option')\n      $(parentElement).find('.tree-results-item-tabs').hide()\n      $(parentElement).find(\".tree-results-item-\" + targetType).show()\n    })\n    $(parentElement).find('.result-view-control-tab').first().trigger('click')\n  }\n\n  app.blockResultsLoader.loadBlock = function (blockKey, continueLoading) {\n    var url\n    if (app.shareableLink) {\n      url = window.location.pathname\n\n      // Check if there's already a query string\n      if (window.location.search) {\n        url += window.location.search + '&blockKey=' + blockKey\n      } else {\n        url += '?blockKey=' + blockKey\n      }\n    } else {\n      url = '/ajax/trees/set/' + app.tree_version_set_id + '/results/' + blockKey + window.location.search\n    }\n\n    $.ajax({\n      url: url,\n      type: 'GET',\n      dataType: 'json',\n      success: function (data) {\n        if (data.htmlOutput) {\n          // Place the HTML output into the container DIV\n          // TODO - this should actually use client-side templates, once the item results template is converted back.\n          _.each(data.htmlOutput, function (value, key) {\n            $('#' + key).attr('data-is-loaded', 1).html(value)\n\n            // Assign buttons for tab switching:\n            app.blockResultsLoader.assignButtons($('#' + key))\n          })\n\n          // Generate Chart.js-based charts:\n          app.chartJsHelper.createCharts()\n\n          if (continueLoading) {\n            // Check if there are more blocks to load!\n            app.blockResultsLoader.load()\n          }\n        }\n      }\n    })\n  }\n\n  app.blockResultsLoaderV2 = {}\n  app.blockResultsLoaderV2.loadKeyMetrics = function () {\n    var url\n\n    if (app.shareableLink) {\n      // Check if there's already a query string\n      url = window.location.search\n          ? window.location.pathname + window.location.search + \"&keymetrics=1\"\n          : window.location.pathname + '?keymetrics=1'\n    } else {\n      url = '/ajax/trees/set/' + app.tree_version_set_id + '/results/keymetrics' + window.location.search\n    }\n\n    $.post(url, {filterSet: _.get(viamo, '$store.state.publicApp.filterSet', [])})\n        .done(function (keymetrics) {\n          if (keymetrics) {\n\n            app.blockResultsLoaderV2.loadDonutChart('connected',\n                keymetrics.finishedDeliveryLogCount,\n                keymetrics.deliveryLogCount)\n            $(\"#print-connected-values\").html(keymetrics.finishedDeliveryLogCount + \" Connected of \" + keymetrics.deliveryLogCount + \" Calls\")\n\n            app.blockResultsLoaderV2.loadDonutChart('completed',\n                keymetrics.completedDeliveryLogCount,\n                keymetrics.deliveryLogCount)\n            $(\"#print-completed-values\").html(keymetrics.completedDeliveryLogCount + \" Completed of \" + keymetrics.deliveryLogCount + \" Calls\")\n\n            app.blockResultsLoaderV2.loadDonutChart('unique',\n                keymetrics.uniqueSubscriberCount,\n                keymetrics.deliveryLogCount)\n            $(\"#print-unique-value\").html(keymetrics.uniqueSubscriberCount + \" Unique Subscribers\")\n\n            app.blockResultsLoaderV2.loadDonutChart('firsttime',\n                keymetrics.firstTimeSubscriberCount,\n                keymetrics.uniqueSubscriberCount)\n            $(\"#print-firsttime-value\").html(keymetrics.firstTimeSubscriberCount + \" First Time Subscribers\")\n\n            app.blockResultsLoaderV2.loadDonutChart('answered', keymetrics.completedQuestionCount, 0)\n            $(\"#print-answered-value\").html(keymetrics.completedQuestionCount + \" Question Responses\")\n\n            if ($('#tree-results-keymetrics-durations').length > 0) {\n              app.blockResultsLoaderV2.loadAvgCallDurations(keymetrics)\n            }\n          }\n        })\n        .fail(function (response) {\n          console.error(response)\n          $(\".doughnut-charts-row\").html('<h4 class=\"text-danger text-center\">' + JSON.parse(response.responseText) + '</h4>')\n        })\n  }\n\n  app.blockResultsLoaderV2.loadDonutChart = function (keymetricName, chartNumerator, chartTotal) {\n    var chartDenominator = (chartTotal === 0) ? 0 : chartTotal - chartNumerator\n\n    var chartDataSets = {\n      labels: [\n        \"\",\n        \"\"\n      ],\n      datasets: [\n        {\n          data: [\n            chartNumerator,\n            chartDenominator\n          ],\n          backgroundColor: [\n            \"#333\",\n            \"#999\"\n          ],\n          hoverBackgroundColor: [\n            \"#333\",\n            \"#999\"\n          ],\n          borderColor: [\n            \"#333\",\n            \"#999\"\n          ],\n        }\n      ]\n    }\n\n    $('#tree-results-loading-indicator-doughnut-' + keymetricName).hide()\n\n    app.chartJsHelper.updateTreeDoughnutChart('v-chart-tree-doughnut-' + keymetricName, chartDataSets)\n\n    // Set Chart's dynamic label as visible and set its span html with the value\n    if (chartTotal >= 0) {\n      $('#tree-doughnut-total-' + keymetricName).html(formatLargeNumber(chartTotal)).parent().removeClass('hidden')\n    }\n  }\n\n  app.blockResultsLoaderV2.loadAvgCallDurations = function (durations) {\n    if (durations) {\n      // TODO what iv durationAvg or completedDurationAvg = 0 or don't exist?\n      $('#tree-results-duration-all').html((durations.durationAvg / 60).toPrecision(2) + \" minutes\")\n      $('#tree-results-duration-completed').html((durations.completedDurationAvg / 60).toPrecision(2) + ' minutes')\n      $('#tree-results-keymetrics-duration').show()\n    }\n\n    $('#tree-results-loading-indicator-durations').hide()\n    $('.tree-results-duration-item').css('visibility', 'visible')\n  }\n\n  app.blockResultsLoaderV2.loadBlocksInteractionsChart = function () {\n    var barchartLabelsTruncated = [],\n        barchartLabels = [],\n        totalInteractionsBarchartData = [],\n        completedInteractionsBarchartData = [],\n        orderedCompletedInteractionsBarchartData = [],\n        totalInteractionsOrderedBarchartData = [],\n        colorIndexes = [],\n        orderedColorIndexes = []\n    var orderedBarchartLabelsTruncated = [],\n        orderedBarchartLabels = [],\n        totalInteractionsOrderedBarchartData = []\n\n    _.each(app.resultsData, function (blockResult, key) {\n      var truncatedBlockTitle, resultIndex, colorIndex, totalInteractions, completedInteractions, colorValue\n      var blockTitle = _.get(blockResult, 'details.title') || _.get(blockResult, 'classDetails.name') || ''\n\n      truncatedBlockTitle = blockTitle.length < 9 ? blockTitle : blockTitle.substring(0, 9) + \"...\"\n      colorIndex = blockResult[\"colorIndex\"]\n      colorValue = app.chartJsHelper.getChartChoiceColorsArray(colorIndex)[0]\n      totalInteractions = blockResult[\"totalInteractions\"]\n\n      // outputKeys is either an empty array, or has one or more objects.\n      completedInteractions = blockResult[\"outputKeys\"].reduce(function (acc, val) {\n        return acc + val.outputKeyTotals\n      }, 0)\n\n      // Listing-ordered arrays\n      barchartLabels.push(blockTitle)\n      barchartLabelsTruncated.push(truncatedBlockTitle)\n      colorIndexes.push(colorValue)\n      totalInteractionsBarchartData.push(totalInteractions)\n      completedInteractionsBarchartData.push(completedInteractions)\n\n      // Popularity-ordered arrays. Callback fn applies descending order.\n      resultIndex = _.sortedIndex(orderedCompletedInteractionsBarchartData, completedInteractions, function (i) {\n        return -i\n      })\n      orderedBarchartLabels.splice(resultIndex, 0, blockTitle)\n      orderedBarchartLabelsTruncated.splice(resultIndex, 0, truncatedBlockTitle)\n      orderedColorIndexes.splice(resultIndex, 0, colorValue)\n      orderedCompletedInteractionsBarchartData.splice(resultIndex, 0, completedInteractions)\n      totalInteractionsOrderedBarchartData.splice(resultIndex, 0, totalInteractions)\n\n    })\n\n    app.chartJsHelper.updateTreeBlocksInteractionsChart('v-chart-tree-blocks-popularity', {\n      labels: orderedBarchartLabelsTruncated,\n      fullLabels: orderedBarchartLabels,\n      datasets: [\n        {\n          data: orderedCompletedInteractionsBarchartData,\n          backgroundColor: orderedColorIndexes,\n          borderColor: orderedColorIndexes,\n          borderWidth: 1,\n        },\n        {\n          hidden: true,\n          data: totalInteractionsOrderedBarchartData,\n          backgroundColor: orderedColorIndexes,\n          borderColor: orderedColorIndexes,\n          borderWidth: 1,\n        }\n      ]\n    })\n\n    app.chartJsHelper.updateTreeBlocksInteractionsChart('v-chart-tree-blocks-listing', {\n      labels: barchartLabelsTruncated,\n      fullLabels: barchartLabels,\n      datasets: [\n        {\n          data: completedInteractionsBarchartData,\n          backgroundColor: colorIndexes,\n          borderColor: colorIndexes,\n          borderWidth: 1,\n        },\n        {\n          hidden: true,\n          data: totalInteractionsBarchartData,\n          backgroundColor: colorIndexes,\n          borderColor: colorIndexes,\n          borderWidth: 1,\n        }\n      ]\n    })\n\n    app.blockResultsLoaderV2.assignButtons($('#tree-summary-container'))\n  }\n\n  app.blockResultsLoaderV2.assignButtons = function (parentElement) {\n    $(parentElement).find('.tree-interactions-barcharts-toggle-button').on('click', function (e) {\n      var $buttonClicked = $(e.currentTarget)\n      var barchartTarget = $buttonClicked.attr('data-section-option')\n\n      if ($buttonClicked.hasClass('active')) {\n        return\n      }\n\n      $buttonClicked.siblings().removeClass('active')\n      $buttonClicked.addClass('active')\n\n      // Hide and show the relevant Bar Chart\n      $(\"canvas[id^='v-chart-tree-blocks-']\").hide()\n      $(\"#v-chart-tree-blocks-\" + barchartTarget).show()\n\n      $('#order-by-active-label-print').html('Order By: ' + $buttonClicked.attr('aria-label'))\n\n      // Render any charts that haven't been rendered yet. Checks if data-generated==0 attribute.\n      app.chartJsHelper.createCharts()\n      $('#v-chart-tree-blocks-listing').removeClass('hidden')\n    })\n\n    $(parentElement).find('input[name=\"barchart-dataset-toggle\"]').on('click', function (e) {\n      var barchartDatasetTarget = $(e.currentTarget).attr('value')\n\n      // Note that the barchart-dataset-toggle Buttons are not specific to one Chart\n      var listingChart = app.chartJsHelper.chartObjects['v-chart-tree-blocks-listing']\n      var popularityChart = app.chartJsHelper.chartObjects['v-chart-tree-blocks-popularity']\n\n      var listingDatasets = listingChart.config.data.datasets\n      var popularityDatasets = popularityChart.config.data.datasets\n      var isEnteredSelected = barchartDatasetTarget == 'entered',\n          isCompletedSelected = barchartDatasetTarget == 'completed'\n\n      if (isCompletedSelected) {\n        $('#tree-summary-barchart-title').html('Completed Interactions per Block')\n      } else {\n        $('#tree-summary-barchart-title').html('Entered Interactions per Block')\n      }\n\n      listingDatasets[0].hidden = isEnteredSelected\n      listingDatasets[1].hidden = isCompletedSelected\n      popularityDatasets[0].hidden = isEnteredSelected\n      popularityDatasets[1].hidden = isCompletedSelected\n\n      listingChart.update()\n      popularityChart.update()\n    })\n    $(parentElement).find('.result-view-section-button').on('click', function (e) {\n      var tabTarget = $(e.currentTarget).attr('data-section-option')\n      var tabLabel = $(e.currentTarget).text()\n\n      $(e.currentTarget).closest(\".result-view-section-control-container\").find(\".sub-report-type-title\").html(tabLabel == \"\"\n          ? \"Timeline: Total Interactions\"\n          : \"Timeline: \" + tabLabel)\n\n      if ($(e.currentTarget).hasClass('active')) {\n        console.log(\"Already on the \" + tabLabel + \" section\")\n        return\n      }\n      $(e.currentTarget).siblings().removeClass('active')\n      $(e.currentTarget).addClass('active')\n\n      // Hide and show the relevant section\n      $(parentElement).find('.tree-results-item-tab-section').hide()\n      $(parentElement).find('.tree-results-item-tab-section[data-section-id=' + tabTarget + ']').show()\n\n      // Render any charts that haven't been rendered yet\n      app.chartJsHelper.createCharts()\n    })\n\n    $(parentElement).find('.result-normalize-cb').on('click', function (e) {\n\n      var chartTarget = $(e.currentTarget).attr('data-chart-type')\n      var doNormalize = 0\n      var targetElement\n\n      if ($(e.currentTarget).is(':checked')) {\n        doNormalize = 1\n      }\n\n      // Hide and show the relevant section\n      targetElement = $(parentElement).find('canvas[data-chart-type=' + chartTarget + ']')\n\n      // Set normalize to the new value, and set is-generated to 0, to queue up a re-rendering of the chart:\n      $(targetElement).attr('data-normalize', doNormalize).attr('data-generated', 0)\n\n      // Render any charts that haven't been rendered yet\n      app.chartJsHelper.createCharts()\n    })\n  }\n\n\tapp.combinedVersions = {};\n\tapp.combinedVersions.assignButtons = function() {\n\n\t\t$('.tree-results-versions-select-button').on('click', function(e) {\n\n\t\t\t// Make sure the element lines up underneath the \"Versions\" button\n\t\t\t// This is a bit awkward, since we're right aligned and not in\n\t\t\t// a position:absolute setting, so we'll actually add in the\n\t\t\t// width of the (variable) daterangepicker to a fixed value:\n\t\t\tvar rightPosition = _.parseInt($('#reportrange').width() + $('.tree-results-gear-menu').width() - $('.tree-results-versions-select-button').width() / 2) - 4;\n\t\t\t$('.tree-results-versions-selector').css({right: rightPosition});\n\n\t\t\t$('.tree-results-versions-selector').toggle();\n\n\t\t\t// Prevent clicks on the body element that would re-hide it.\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\t$('.tree-results-versions-selector').on('click', function(e) {\n\t\t\t// Prevent clicks on the body element that would re-hide it.\n\t\t\t// This also protects clicks on the other elements within the dropdown.\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\t$('.tree-results-versions-select-all-link').on('click', function(e) {\n\t\t\t// $('.tree-results-versions-selector').toggle();\n\t\t\t$('.tree-results-versions-selector input[type=checkbox]').prop('checked', true).trigger('change');\n\t\t});\n\t\t$('.tree-results-versions-select-none-link').on('click', function(e) {\n\t\t\t// $('.tree-results-versions-selector').toggle();\n\t\t\t$('.tree-results-versions-selector input[type=checkbox]').prop('checked', false).trigger('change');\n\t\t});\n\n\t\t$('.tree-results-versions-selector input[type=checkbox]').on('change', function(e) {\n\t\t\t$('.tree-results-versions-apply-button').prop('disabled', false);\n\t\t});\n\n\t\t$('.tree-results-versions-apply-button').on('click', function(e) {\n\n\t\t\t// Delete any existing version entries in the filter form, before adding the selected ones:\n\t\t\t$('#filter-form input[name^=versions]').remove();\n\n\t\t\t// With thanks to\n\t\t\t// http://stackoverflow.com/questions/2530635/jquery-add-additional-parameters-on-submit-not-ajax#comment22923873_2531379\n\t\t\t$('.tree-results-versions-selector input[type=checkbox]:checked').each(function() {\n\t\t\t\t// return $(this).val()\n\t\t\t\tvar input = $('<input>', {\n\t\t\t\t\ttype: 'hidden',\n\t\t\t\t\tname: 'versions[]',\n\t\t\t\t\tvalue: $(this).val()\n\t\t\t\t});\n\t\t\t\t$('#filter-form').append($(input));\n\t\t\t});\n\n\t\t\t$('#filter-form').submit();\n\n\t\t});\n\n\t\t// If the selector is open, hide it by clicking on the open space,\n\t\t// just like for dropdown menus.\n\t\t$('body').on('click', function(e) {\n\t\t\t$('.tree-results-versions-selector').hide();\n\t\t});\n\n    $('.tree-results-versions-selector').hide();\n\t};\n\n \tapp.combinedVersions = _.assign({}, app.combinedVersions, window.combinedVersions);\n\n})(window.jQuery);\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"form-group\"},[_c('label',[_vm._v(_vm._s(_vm.label))]),(_vm.isEditable)?_c('textarea',{staticClass:\"form-control\",attrs:{\"placeholder\":_vm.placeholder},domProps:{\"value\":_vm.value},on:{\"keydown\":function($event){return _vm.$emit('keydown', $event)},\"input\":function($event){return _vm.$emit('input', $event.target.value)}}}):_c('p',[_vm._v(\" \"+_vm._s(_vm.value)+\" \")]),_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"form-group\">\n    <label>{{label}}</label>\n    <textarea v-if=\"isEditable\"\n        class=\"form-control\"\n        :placeholder=\"placeholder\"\n        :value=\"value\"\n        @keydown=\"$emit('keydown', $event)\"\n        @input=\"$emit('input', $event.target.value)\"/>\n\n    <p v-else>\n      {{value}}\n    </p>\n    <slot/>\n  </div>\n</template>\n\n<script>\n  export default {\n    props: {\n      isEditable: {\n        default: true,\n        type: Boolean,\n      },\n      label: {\n        type: [String, Number],\n        required: true,\n      },\n      placeholder: {\n        type: String,\n        required: true,\n      },\n      value: {\n        type: String,\n        required: true,\n      },\n    },\n  }\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TextEditor.vue?vue&type=template&id=4ab294e6&\"\nimport script from \"./TextEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./TextEditor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import {get, isEmpty} from 'lodash'\nimport {mapState} from 'vuex'\n\nconst PATH_PARAM_DISCOVERER = /(\\/){(.*?)(\\?)?}/g\n\n// todo: we'll want route() to also be importable/accessible anywhere!\nexport default {\n  computed: {\n    ...mapState({\n      routes: s => s.trees.ui.routes,\n    }),\n  },\n\n  methods: {\n    route(routeKey, context) {\n      return routeFrom(routeKey, context, this.routes)\n    }\n  }\n}\n\nexport function routeFrom(routeKey, context, routes) {\n  return interpolateRouteWith(context, get(routes, routeKey))\n}\n\nconst raiseFor = p => {throw new Error(`InvalidContextError - Missing param: ${p}`)}\n\nexport function interpolateRouteWith(context, route) {\n  if (!route) {\n    return null\n  }\n\n  context = context || {}\n\n  const {id, path, params, methods} = route\n  const isPathComplete = isEmpty(params)\n\n  if (isPathComplete) {\n    return path\n  }\n\n  return path.replace(PATH_PARAM_DISCOVERER, (m, prefix='', captured, isOptional) => {\n    const param = captured.trim()\n    const absent = !(param in context)\n\n    if (absent && !isOptional) {\n      raiseFor(param)\n    }\n\n    if (absent && isOptional) {\n      return ''\n    }\n\n    return `${prefix}${context[param]}`\n  })\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"interaction-designer-contents\"},[_c('tree-builder-toolbar'),_c('div',{staticClass:\"tree-sidebar-container\"},[(_vm.activeBlock)?_c('div',{staticClass:\"tree-sidebar\",class:[(\"category-\" + (_vm.blockClasses[_vm.activeBlock.type].category))]},[_c('div',{staticClass:\"tree-sidebar-edit-block\",attrs:{\"data-block-type\":_vm.activeBlock && _vm.activeBlock.type,\"data-for-block-id\":_vm.activeBlock && _vm.activeBlock.uuid}},[(_vm.activeBlock)?_c((\"Flow\" + (_vm.activeBlock.type.replace(/\\\\/g, ''))),{tag:\"div\",attrs:{\"block\":_vm.activeBlock,\"flow\":_vm.activeFlow}}):_vm._e()],1)]):_c('div',{staticClass:\"tree-sidebar\"},[_c('div',{staticClass:\"tree-sidebar-edit-block\"},[_c('flow-editor',{attrs:{\"flow\":_vm.activeFlow}})],1)])]),_c('div',{staticClass:\"tree-contents\",attrs:{\"x-style\":{'min-height': (_vm.designerWorkspaceHeight + \"px\")}}},[_c('builder-canvas',{nativeOn:{\"click\":function($event){return _vm.handleCanvasSelected($event)}}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InteractionDesigner.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InteractionDesigner.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./InteractionDesigner.vue?vue&type=template&id=8e85b462&\"\nimport script from \"./InteractionDesigner.vue?vue&type=script&lang=js&\"\nexport * from \"./InteractionDesigner.vue?vue&type=script&lang=js&\"\nimport style0 from \"bootstrap/dist/css/bootstrap.css?vue&type=style&index=0&lang=css&\"\nimport style1 from \"bootstrap/dist/css/bootstrap-theme.css?vue&type=style&index=1&lang=css&\"\nimport style2 from \"./InteractionDesigner.vue?vue&type=style&index=2&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tree-builder-toolbar\"},[(_vm.isImporterVisible)?_c('div',{staticClass:\"flows-importer alert alert-info\"},[_c('h3',[_vm._v(_vm._s(_vm.trans('flow-builder.flow-importer')))]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.flow),expression:\"flow\"}],staticClass:\"flow-importer\",attrs:{\"rows\":\"15\"},domProps:{\"value\":(_vm.flow)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.flow=$event.target.value}}})]):_vm._e(),_c('div',{staticClass:\"tree-workspace-panel-heading panel-heading\"},[_c('div',{staticClass:\"tree-workspace-panel-heading-contents\"},[_c('div',{staticClass:\"btn-toolbar\"},[_c('button',{staticClass:\"btn btn-default\",class:{active: _vm.isImporterVisible},on:{\"click\":_vm.toggleImportExport}},[_c('i',{staticClass:\"glyphicon glyphicon-chevron-up\"}),_vm._v(\" \"+_vm._s(_vm.trans('flow-builder.import-export'))+\" \")]),(_vm.isResourceEditorEnabled)?_c('div',{staticClass:\"btn-group\"},[_c('router-link',{staticClass:\"btn btn-default active\",attrs:{\"to\":_vm.treeViewUrl}},[_vm._v(\" \"+_vm._s(_vm.trans('flow-builder.flow-view'))+\" \")]),_c('router-link',{staticClass:\"btn btn-default\",attrs:{\"to\":_vm.resourceViewUrl},nativeOn:{\"click\":function($event){return _vm.handleResourceViewerSelected($event)}}},[_vm._v(\" \"+_vm._s(_vm.trans('flow-builder.resource-view'))+\" \")])],1):_vm._e(),(_vm.ui.isEditableLocked)?[(_vm.isFeatureViewResultsEnabled)?_c('a',{staticClass:\"btn btn-default\",attrs:{\"href\":_vm.viewResultsUrl,\"title\":_vm.trans('flow-builder.view-results')}},[_c('span',{staticClass:\"glyphicon glyphicon-signal\"})]):_vm._e()]:_c('a',{staticClass:\"btn btn-default\",class:{active: _vm.ui.isEditable},attrs:{\"href\":_vm.editOrViewTreeJsUrl,\"title\":_vm.trans('flow-builder.click-to-toggle-editing')},on:{\"click\":_vm.attemptSaveTree}},[_vm._v(\" \"+_vm._s(_vm.trans('flow-builder.edit-flow'))+\" \")]),(!_vm.ui.isEditable && _vm.isFeatureTreeDuplicateEnabled)?_c('a',{staticClass:\"btn btn-default\",attrs:{\"href\":_vm.duplicateTreeLink,\"title\":_vm.trans('flow-builder.duplicate-entire-flow')}},[_c('span',{staticClass:\"glyphicon glyphicon-tags\"})]):_vm._e(),(_vm.ui.isEditable)?_c('div',{staticClass:\"btn-group\"},[_c('button',{staticClass:\"btn btn-default dropdown-toggle\",attrs:{\"type\":\"button\",\"data-toggle\":\"dropdown\"}},[_vm._v(\" \"+_vm._s(_vm.trans('flow-builder.add-block'))+\" \"),_c('span',{staticClass:\"caret\"})]),_c('ul',{staticClass:\"dropdown-menu\",attrs:{\"role\":\"menu\"}},[_vm._l((_vm.rootBlockClassesToDisplay),function(classDetails,className){return [(_vm.shouldDisplayDividerBefore(_vm.rootBlockClassesToDisplay, className))?_c('li',{key:className + 'divider',staticClass:\"divider\"}):_vm._e(),_c('li',{key:className + 'item'},[(_vm.isBlockAvailableByBlockClass[className])?_c('a',{staticClass:\"tree-add-block\",attrs:{\"href\":\"#\",\"data-block-type\":className,\"data-default-num-connections\":classDetails['defaultConnections']},on:{\"click\":function($event){$event.preventDefault();return _vm.handleAddBlockByTypeSelected(classDetails)}}},[_vm._v(\" \"+_vm._s(_vm.translateTreeClassName(className))+\" \")]):_vm._e()])]}),(!_vm.isEmpty(_vm.rootDropdownClassesToDisplay))?[_c('li',{staticClass:\"divider\"}),_c('li',{staticClass:\"menu-item dropdown dropdown-submenu\"},[_c('a',{staticClass:\"dropdown-toggle\",attrs:{\"href\":\"#\",\"data-toggle\":\"dropdown\"}},[_vm._v(\" \"+_vm._s(_vm.trans('flow-builder.branching'))+\" \")]),_c('ul',{staticClass:\"dropdown-menu\"},[_vm._l((_vm.rootDropdownClassesToDisplay),function(classDetails,className){return [(_vm.shouldDisplayDividerBefore(_vm.rootDropdownClassesToDisplay, className))?_c('li',{key:className + 'divider',staticClass:\"divider\"}):_vm._e(),_c('li',{key:className + 'item'},[(_vm.isBlockAvailableByBlockClass[className])?_c('a',{staticClass:\"tree-add-block\",attrs:{\"href\":\"#\",\"data-block-type\":className,\"data-default-num-connections\":classDetails['defaultConnections']}},[_vm._v(\" \"+_vm._s(_vm.translateTreeClassName(className))+\" \")]):_vm._e()])]})],2)])]:_vm._e(),(!_vm.isEmpty(_vm.advancedDropdownClassesToDisplay))?[_c('li',{staticClass:\"divider\"}),_c('li',{staticClass:\"menu-item dropdown dropdown-submenu\"},[_c('a',{staticClass:\"dropdown-toggle\",attrs:{\"href\":\"#\",\"data-toggle\":\"dropdown\"}},[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.advanced'))+\" \")]),_c('ul',{staticClass:\"dropdown-menu\"},[_vm._l((_vm.advancedDropdownClassesToDisplay),function(classDetails,className){return [(_vm.shouldDisplayDividerBefore(_vm.advancedDropdownClassesToDisplay, className))?_c('li',{key:className + 'divider',staticClass:\"divider\"}):_vm._e(),_c('li',{key:className + 'item'},[(_vm.isBlockAvailableByBlockClass[className])?_c('a',{staticClass:\"tree-add-block\",attrs:{\"href\":\"#\",\"data-block-type\":className,\"data-default-num-connections\":classDetails['defaultConnections']}},[_vm._v(\" \"+_vm._s(_vm.translateTreeClassName(className))+\" \")]):_vm._e()])]})],2)])]:_vm._e()],2)]):_vm._e(),(_vm.ui.isEditable)?_c('button',{staticClass:\"btn btn-default tree-delete-block\",attrs:{\"type\":\"button\",\"disabled\":!_vm.activeBlockId},on:{\"click\":function($event){$event.preventDefault();return _vm.handleRemoveActivatedBlockTriggered($event)}}},[_vm._v(\" \"+_vm._s(_vm.trans('flow-builder.delete'))+\" \")]):_vm._e(),_c('div',{staticClass:\"btn-group pull-right\"},[(_vm.ui.isEditable && _vm.isFeatureTreeSaveEnabled)?_c('button',{staticClass:\"btn btn-primary tree-save-tree\",attrs:{\"type\":\"button\",\"title\":_vm.trans('flow-builder.save-changes-to-the-flow'),\"disabled\":_vm.isTreeSaving || !_vm.hasChanges},on:{\"click\":_vm.attemptSaveTree}},[_vm._v(\" \"+_vm._s(_vm.saveButtonText)+\" \")]):_vm._e(),(_vm.isFeatureTreeSendEnabled)?[(_vm.can('edit-content'))?_c('a',{staticClass:\"btn btn-success\",attrs:{\"href\":_vm.publishVersionUrl,\"disabled\":_vm.isTreeSaving || !_vm.isTreeValid,\"title\":_vm._f(\"trans\")(_vm.isTreeValid ? 'flow-builder.publish-this-version-of-the-flow' : 'flow-builder.fix-validation-errors-before-publishing')}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.publish'))+\" \")]):_vm._e(),(_vm.can('send-outgoing-call'))?_c('a',{staticClass:\"btn btn-success tree-send-tree-call\",attrs:{\"href\":_vm.sendOutgoingCallUrl,\"disabled\":_vm.isTreeSaving || !_vm.isTreeValid,\"title\":_vm.trans('flow-builder.schedule-and-send-an-outgoing-call')}},[_vm._v(\" \"+_vm._s(_vm.trans('flow-builder.send'))+\" \")]):_vm._e()]:_vm._e()],2)],2)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import {mapState} from 'vuex'\nimport lodash from 'lodash'\n\n\nexport function can(userPermissions, permissionOrPermissions, requireAll = false) {\n  if (lodash.isArray(permissionOrPermissions)) {\n    if (requireAll) {\n      return lodash.every(permissionOrPermissions, requestedPermission => userPermissions[requestedPermission])\n    } else {\n      return lodash.find(permissionOrPermissions, requestedPermission => userPermissions[requestedPermission])\n    }\n  } else {\n    return userPermissions[permissionOrPermissions]\n  }\n}\n\nexport default {\n  computed: {\n    ...mapState(['permissions'])\n  },\n\n  methods: {\n    /**\n     * @note This method can not be relied on for any real security measures, but solely provides the\n     * ability to hide and curb navigation to prohibited parts of the app. Authorization still needs to be handled\n     * on all endpoints and actions where necessitated. <3\n     *\n     * Implementation ported from:\n     *  https://github.com/Zizaco/entrust/blob/master/src/Entrust/Traits/EntrustUserTrait.php#L144\n     *\n     * @param permission\n     * @param requireAll\n     * @returns {boolean}  */\n    can(permission, requireAll = false) {\n      return can(this.permissions, permission, requireAll)\n    },\n  },\n}\n","// TODO:\n//  move this file into @floip to replace the convertKeysToCamelCase under '@floip/flow-runner/src/flow-spec/DataObjectPopertyNameCamelCaseConverter'\n//  and update convertKeysToCamelCase usage in @floip (tests, etc) to convertKeysCase\nimport {camelCase, snakeCase, includes, isArray, isObject, reduce} from 'lodash'\n\nexport const EXCLUDED_DATA_HIERARCHIES_BY_KEY = ['choices', 'platformMetadata', 'platform_metadata']\n\nexport default function convertKeysCase(x: any, caseType: string = 'CAMEL', exclusions = EXCLUDED_DATA_HIERARCHIES_BY_KEY): any {\n  if (isArray(x)) {\n    return x.map(_ => convertKeysCase(_, caseType, exclusions))\n  }\n\n  if (!isObject(x)) {\n    return x\n  }\n\n  return reduce(x, (memo: any, value: any, key: string) => {\n    let currentKey = caseType === 'CAMEL' ? camelCase(key) : snakeCase(key)\n    memo[includes(exclusions, key) ? key : currentKey] =\n        convertKeysCase(value, caseType, exclusions)\n\n    return memo\n  }, {})\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport lang from '@/lib/filters/lang'\nimport Permissions from '@/lib/mixins/Permissions'\nimport Routes from '@/lib/mixins/Routes'\nimport {mapActions, mapGetters, mapMutations, mapState} from 'vuex'\nimport lodash, {isEmpty} from 'lodash'\nimport flow from 'lodash/fp/flow'\nimport pickBy from 'lodash/fp/pickBy'\n// import {affix as Affix} from 'vue-strap'\n// import TreeUpdateConflictModal from '../TreeUpdateConflictModal'\n// import InteractionTotalsDateRangeConfiguration from './InteractionTotalsDateRangeConfiguration'\nimport convertKeysCase from '@/store/flow/utils/DataObjectPropertyNameCaseConverter'\n\nexport default {\n  components: {\n    // Affix,\n    // TreeUpdateConflictModal,\n    // InteractionTotalsDateRangeConfiguration\n  },\n  mixins: [\n    lang,\n    Permissions,\n    Routes,\n  ],\n  data() {\n    return {\n      isImporterVisible: false,\n    }\n  },\n  computed: {\n    ...mapState({\n      tree: ({trees: {tree}}) => tree,\n      ui: ({trees: {ui}}) => ui,\n    }),\n\n    ...mapGetters('flow', ['activeFlow']),\n    ...mapState('flow', ['flows', 'resources']),\n    ...mapState('builder', ['activeBlockId']),\n\n    ...mapGetters([\n      'isEditable',\n      'isTreeSaving',\n      'isBlockAvailableByBlockClass',\n      'hasChanges',\n      'isTreeValid',\n      'selectedBlock',\n      'isFeatureTreeSaveEnabled',\n      'isFeatureTreeSendEnabled',\n      'isFeatureTreeDuplicateEnabled',\n      'isFeatureViewResultsEnabled',\n      'isFeatureUpdateInteractionTotalsEnabled',\n    ]),\n\n    flow: {\n      get() {\n        const {flows, resources} = this\n          return JSON.stringify(\n              convertKeysCase({flows, resources},\n              'SNAKE',\n              ['platformMetadata', 'ioViamo']),\n              null,\n              2)\n      },\n\n      set(value) {\n          this.importFlowsAndResources(convertKeysCase(\n              JSON.parse(value),\n              'CAMEL',\n              ['platform_metadata', 'io_viamo']\n          ))\n      }\n    },\n\n    isResourceEditorEnabled() {\n      return false\n    },\n\n    jsKey() { // deprecate\n      return lodash.get(this.selectedBlock, 'jsKey')\n    },\n    editTreeUrl() {\n      return this.editTreeRoute()\n    },\n    treeViewUrl() {\n      return this.editTreeRoute({\n        component: 'interaction-designer',\n      })\n    },\n    resourceViewUrl() {\n      return this.editTreeRoute({\n        component: 'resource-viewer',\n      })\n    },\n    viewResultsUrl() {\n      return this.isFeatureViewResultsEnabled ? this.editTreeRoute({component: 'results'}) : ''\n    },\n    viewResultsSetUrl() {\n      return this.isFeatureViewResultsEnabled\n          ? this.route('trees.viewTreeSetResults', {treeSetId: this.tree.treeSetId})\n          : ''\n    },\n    downloadAudioUrl() {\n      return this.editTreeRoute({\n        component: 'downloadaudio',\n      })\n    },\n    sendOutgoingCallUrl() {\n      return this.isTreeValid ? `/outgoing/new?tree=${this.tree.id}` : ''\n    },\n    publishVersionUrl() {\n      return this.isTreeValid ? `/trees/${this.tree.id}/publishversion` : ''\n    },\n    editOrViewTreeJsUrl() {\n      if (this.ui.isEditable) {\n        return this.editTreeRoute({\n          component: 'interaction-designer',\n          mode: 'view',\n        })\n      } else {\n        return this.editTreeRoute({\n          component: 'interaction-designer',\n          mode: 'edit',\n        })\n      }\n    },\n    duplicateTreeLink() {\n      return this.isFeatureTreeDuplicateEnabled\n          ? this.route('trees.duplicateTreeAndContinue', {treeId: this.tree.id})\n          : ''\n    },\n\n    saveButtonText() {\n      if (this.hasChanges) {\n        return this.trans('flow-builder.save')\n      } else {\n        return this.trans('flow-builder.saved')\n      }\n    },\n\n    rootBlockClassesToDisplay() {\n      return flow(\n          pickBy(classDetails => !this.hasClassDetail(classDetails, 'hiddenInMenu')),\n          pickBy(classDetails => !this.hasClassDetail(classDetails, 'advancedMenu')),\n          pickBy(classDetails => !this.hasClassDetail(classDetails, 'branchingMenu')),\n      )(this.ui.blockClasses)\n    },\n\n    rootDropdownClassesToDisplay() {\n      return flow(\n          pickBy(classDetails => !this.hasClassDetail(classDetails, 'hiddenInMenu')),\n          pickBy(classDetails => this.hasClassDetail(classDetails, 'branchingMenu')),\n      )(this.ui.blockClasses)\n    },\n\n    advancedDropdownClassesToDisplay() {\n      return flow(\n          pickBy(classDetails => !this.hasClassDetail(classDetails, 'hiddenInMenu')),\n          pickBy(classDetails => this.hasClassDetail(classDetails, 'advancedMenu')),\n      )(this.ui.blockClasses)\n    },\n    canViewResultsTotals() {\n      return (this.can('view-result-totals') && this.isFeatureViewResultsEnabled)\n    },\n  },\n  methods: {\n    isEmpty,\n\n    ...mapActions(['attemptSaveTree']),\n    ...mapMutations('flow', ['flow_removeBlock']),\n    ...mapActions('flow', ['flow_addBlankBlockByType']),\n    ...mapActions('builder', ['importFlowsAndResources']),\n\n    handleAddBlockByTypeSelected({type}) {\n      const {uuid: blockId} = this.flow_addBlankBlockByType({type, platform_metadata: {\n          io_viamo: {\n            uiData: {xPosition: 150, yPosition: 255}, // todo: selected block + (80,80)\n          }}}) // todo push out to intx-designer\n      // activateBlock({blockId})\n    },\n\n    handleRemoveActivatedBlockTriggered() {\n      const {activeBlockId: blockId} = this\n      this.flow_removeBlock({blockId})\n    },\n\n    toggleImportExport() {\n      this.isImporterVisible = !this.isImporterVisible\n    },\n\n    editTreeRoute({component = null, mode = null} = {}) {\n      const context = this.removeNilValues({\n        treeId: this.tree.id,\n        component,\n        mode,\n      })\n      return this.route('trees.editTree', context)\n    },\n    hasClassDetail(classDetails, attribute) {\n      return !lodash.isNil(classDetails[attribute]) && classDetails[attribute]\n    },\n    translateTreeClassName(className) {\n      return this.trans(`flow-builder.${className}`)\n    },\n    shouldDisplayDividerBefore(blockClasses, className) {\n      const shouldShowDividerBeforeBlock = lodash.pickBy(\n          blockClasses,\n          classDetails => this.hasClassDetail(classDetails, 'dividerBefore'),\n      )[className]\n      return shouldShowDividerBeforeBlock && this.isBlockAvailableByBlockClass[className]\n    },\n    handleResourceViewerSelected() {\n      this.$el.scrollIntoView(true)\n    },\n\n    // This could be extracted to a helper mixin of some sort so it can be used in other places\n    removeNilValues(obj) {\n      return lodash.pickBy(obj, lodash.identity)\n    },\n  },\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TreeBuilderToolbar.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TreeBuilderToolbar.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TreeBuilderToolbar.vue?vue&type=template&id=28699d40&\"\nimport script from \"./TreeBuilderToolbar.vue?vue&type=script&lang=ts&\"\nexport * from \"./TreeBuilderToolbar.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./TreeBuilderToolbar.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}