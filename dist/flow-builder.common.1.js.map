{"version":3,"sources":["webpack://flow-builder/./src/components/interaction-designer/resource-editors/ResourceVariantTextEditor.vue?4c02","webpack://flow-builder/./src/components/interaction-designer/block-editors/PhoneRecordingRecorderSelector.vue?d532","webpack://flow-builder/./src/components/interaction-designer/resource-editors/ResourceEditor.vue?fbdb","webpack://flow-builder/./src/components/interaction-designer/resource-editors/ResourceEditor.vue?7d6d","webpack://flow-builder/./src/lib/mixins/FlowUploader.ts","webpack://flow-builder/./src/components/common/AudioLibrarySelector.vue?3ce0","webpack://flow-builder/./src/components/common/AudioLibrarySearchField.vue?ea62","webpack://flow-builder/src/components/common/AudioLibrarySearchField.vue","webpack://flow-builder/./src/components/common/AudioLibrarySearchField.vue?ee7b","webpack://flow-builder/./src/components/common/AudioLibrarySearchField.vue","webpack://flow-builder/./src/components/common/AudioLibrarySelection.vue?88ff","webpack://flow-builder/./src/lib/filters/moment.js","webpack://flow-builder/src/components/common/AudioLibrarySelection.vue","webpack://flow-builder/./src/components/common/AudioLibrarySelection.vue?6f6d","webpack://flow-builder/./src/components/common/AudioLibrarySelection.vue","webpack://flow-builder/src/components/common/AudioLibrarySelector.vue","webpack://flow-builder/./src/components/common/AudioLibrarySelector.vue?7c7e","webpack://flow-builder/./src/components/common/AudioLibrarySelector.vue","webpack://flow-builder/./src/components/interaction-designer/block-editors/PhoneRecorder.vue?db1e","webpack://flow-builder/./src/components/interaction-designer/block-editors/PhoneRecordingRecorderSelector.vue?ac4d","webpack://flow-builder/src/components/interaction-designer/block-editors/PhoneRecordingRecorderSelector.vue","webpack://flow-builder/./src/components/interaction-designer/block-editors/PhoneRecordingRecorderSelector.vue?cb6f","webpack://flow-builder/./src/components/interaction-designer/block-editors/PhoneRecordingRecorderSelector.vue","webpack://flow-builder/src/components/interaction-designer/block-editors/PhoneRecorder.vue","webpack://flow-builder/./src/components/interaction-designer/block-editors/PhoneRecorder.vue?f192","webpack://flow-builder/./src/components/interaction-designer/block-editors/PhoneRecorder.vue","webpack://flow-builder/./src/components/interaction-designer/block-editors/UploadMonitor.vue?2a40","webpack://flow-builder/./src/store/trees/multimediaUpload.js","webpack://flow-builder/src/components/interaction-designer/block-editors/UploadMonitor.vue","webpack://flow-builder/./src/components/interaction-designer/block-editors/UploadMonitor.vue?3e85","webpack://flow-builder/./src/components/interaction-designer/block-editors/UploadMonitor.vue","webpack://flow-builder/./src/components/interaction-designer/resource-editors/ResourceEditor.vue?e48e","webpack://flow-builder/./src/components/interaction-designer/resource-editors/ResourceEditor.vue?d175","webpack://flow-builder/./src/components/interaction-designer/resource-editors/ResourceEditor.vue","webpack://flow-builder/./src/components/common/AudioLibrarySearchField.vue?b152","webpack://flow-builder/./src/components/common/AudioLibrarySelection.vue?3d62","webpack://flow-builder/./src/components/interaction-designer/block-editors/UploadMonitor.vue?7728","webpack://flow-builder/./src/components/interaction-designer/block-editors/UploadMonitor.vue?3bfb","webpack://flow-builder/./src/components/interaction-designer/block-editors/GenericContactPropertyEditor.vue?c85a","webpack://flow-builder/./src/components/interaction-designer/block-editors/GenericContactPropertyEditor.vue?1af7","webpack://flow-builder/./src/components/interaction-designer/block-editors/GenericContactPropertyEditor.vue?e20a","webpack://flow-builder/./src/components/interaction-designer/block-editors/GenericContactPropertyEditor.vue","webpack://flow-builder/./src/components/interaction-designer/resource-editors/ResourceVariantTextEditor.vue?1d15","webpack://flow-builder/src/components/interaction-designer/resource-editors/ResourceVariantTextEditor.vue","webpack://flow-builder/./src/components/interaction-designer/resource-editors/ResourceVariantTextEditor.vue?10f7","webpack://flow-builder/./src/components/interaction-designer/resource-editors/ResourceVariantTextEditor.vue","webpack://flow-builder/./src/components/interaction-designer/resource-editors/ResourceVariantTextEditor.vue?9025","webpack://flow-builder/./src/components/interaction-designer/resource-editors/ResourceEditor.vue?77d6","webpack://flow-builder/./src/components/interaction-designer/block-editors/PhoneRecordingRecorderSelector.vue?cae2","webpack://flow-builder/./src/components/common/AudioLibrarySelection.vue?4edb","webpack://flow-builder/./src/components/common/AudioLibrarySearchField.vue?e971"],"names":["filters","formatDate","date","format","moment","utc","fromNow","withoutSuffix","formatDuration","duration","unit","withSuffix","currentLocale","locale","result","humanize","formatDurationLocalized","Statuses","UPLOADING","UNINITIALIZED","SUCCESS","FAILURE","UploadStatusToStateMap","namespaced","state","uploadProgressByKey","errorMessageByKey","uploadsById","uploadIdsByKey","mutations","setErrorMessage","key","errorMessage","Vue","set","setUploadProgress","uploadProgress","setUploadStatusFor","fileWithRefs","file","status","progress","message","cancel","lodash","pick","uniqueIdentifier","actions","uploadFile","commit","uploadUrl","formDataFields","onSuccess","onError","Error","formData","FormData","forEach","value","name","config","onUploadProgress","progressEvent","Math","floor","loaded","total","axios","post","then","response","catch","error","uploadFiles","dispatch","files","uploader","_","on","e","console","debug","parseInt","json","JSON","parse","status_description","upload"],"mappings":"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","file":"flow-builder.common.1.js","sourcesContent":["import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceVariantTextEditor.vue?vue&type=style&index=0&id=0ce279b0&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceVariantTextEditor.vue?vue&type=style&index=0&id=0ce279b0&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.flow.languages.length > 0)?_c('div',{staticClass:\"resource-editor\"},[_c('hr'),(_vm.label)?_c('h4',[_vm._v(\" \"+_vm._s(_vm.label)+\" \")]):_vm._e(),_c('div',[_c('b-tabs',_vm._l((_vm.flow.languages),function(ref){\nvar languageId = ref.id;\nvar language = ref.label;\nreturn _c('b-tab',{key:languageId,attrs:{\"title\":_vm._f(\"trans\")(language || 'flow-builder.unknown-language')}},_vm._l((_vm.flow.supported_modes),function(mode,i){return _c('div',{key:i,staticClass:\"tab-content-style\"},[_c('header',{staticClass:\"d-flex\"},[(_vm.iconsMap.get(mode))?_c('font-awesome-icon',{class:{'custom-icons': _vm.iconsMap.get(mode)[0] === 'fac', 'library-icons': _vm.iconsMap.get(mode)[0] !== 'fac'},attrs:{\"icon\":_vm.iconsMap.get(mode)}}):_vm._e(),_c('h6',{staticClass:\"ml-1\"},[_vm._v(_vm._s(_vm._f(\"trans\")((\"flow-builder.\" + (mode.toLowerCase()) + \"-content\"))))])],1),_vm._l((_vm.discoverContentTypesFor(mode)),function(contentType){return [(contentType === _vm.SupportedContentType.TEXT)?_c('resource-variant-text-editor',{attrs:{\"resource-id\":_vm.resource.uuid,\"resource-variant\":_vm.findOrGenerateStubbedVariantOn(\n                _vm.resource,\n                {language_id: languageId, content_type: contentType, modes: [mode]}),\"mode\":mode,\"enable-autogen-button\":true || _vm.enableAutogenButton}}):_vm._e(),(contentType === _vm.SupportedContentType.AUDIO)?_c('div',[_c('audio-library-selector',{attrs:{\"audio-files\":_vm.availableAudio,\"lang-id\":languageId,\"resource-id\":_vm.resource.uuid,\"selected-audio-file\":_vm.findOrGenerateStubbedVariantOn(\n                  _vm.resource,\n                  {language_id: languageId, content_type: contentType, modes: [mode]}).value}}),(_vm.can(['edit-content', 'send-call-to-records'], true) && !_vm.findOrGenerateStubbedVariantOn(_vm.resource,{language_id: languageId, content_type: contentType, modes: [mode]}).value)?_c('phone-recorder',{attrs:{\"recording-key\":((_vm.block.uuid) + \":\" + languageId)}}):_vm._e(),(!_vm.findAudioResourceVariantFor(_vm.resource, {language_id: languageId, content_type: contentType, modes: [mode]}))?[_c('upload-monitor',{attrs:{\"upload-key\":((_vm.block.uuid) + \":\" + languageId)}}),_c('div',{staticClass:\"d-flex mt-2\"},[(_vm.isEditable && _vm.isFeatureAudioUploadEnabled)?_c('button',{directives:[{name:\"flow-uploader\",rawName:\"v-flow-uploader\",value:({\n                      target: _vm.route('trees.resumeableAudioUpload'),\n                      token: (\"\" + (_vm.block.uuid) + languageId),\n                      accept: 'audio/*'}),expression:\"{\\n                      target: route('trees.resumeableAudioUpload'),\\n                      token: `${block.uuid}${languageId}`,\\n                      accept: 'audio/*'}\"}],staticClass:\"btn btn-primary ivr-buttons\",on:{\"filesSubmitted\":function($event){return _vm.handleFilesSubmittedFor(((_vm.block.uuid) + \":\" + languageId), $event)},\"fileSuccess\":function($event){return _vm.handleFileSuccessFor(((_vm.block.uuid) + \":\" + languageId), languageId, $event)}}},[_c('font-awesome-icon',{staticClass:\"fa-btn\",attrs:{\"icon\":['fac', 'upload']}}),_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.upload-audio'))+\" \")],1):_vm._e(),(_vm.can(['edit-content', 'send-call-to-records'], true) && _vm.isFeatureAudioUploadEnabled)?_c('button',{staticClass:\"btn btn-primary ivr-buttons ml-2\",on:{\"click\":function($event){$event.preventDefault();return _vm.triggerRecordViaPhoneFor(languageId)}}},[_c('font-awesome-icon',{staticClass:\"fa-btn\",attrs:{\"icon\":['fac', 'record-audio']}}),_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.record-audio'))+\" \")],1):_vm._e()])]:_vm._e()],2):_vm._e()]})],2)}),0)}),1)],1)]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Vue from 'vue'\nimport Flow from '@flowjs/flow.js'\nimport lodash from 'lodash'\nimport Component from 'vue-class-component'\n\nconst dispatch = (el: any, name: string, data: any) => {\n  el.dispatchEvent(lodash.extend(new Event(name, {\n    bubbles: true,\n    cancelable: true,\n  }), {data}))\n}\n\n@Component({\n  directives: {\n    'flow-uploader': {\n      /**\n       * This binding provides a bridge between Flow and vuejs such that we can continue using our resumable backend\n       */\n      bind(el, binding) {\n        const {\n          accept,\n          target,\n          token: upload_token,\n        } = binding.value\n        const uploader = new Flow({\n          target,\n          singleFile: true,\n          // kbytes, chunked?  ¯\\_(ツ)_/¯\n          chunkSize: 1024 * 512,\n          query: {upload_token},\n        })\n\n        if (!uploader.support) {\n          // Your browser doesn't support HTML5 uploads; please try Firefox or Chrome.\n          return\n        }\n\n        lodash.extend(el.style, {overflow: 'hidden'})\n        uploader.assignBrowse(el)\n\n        lodash.chain(el.children)\n          .find({\n            tagName: 'INPUT',\n            type: 'file',\n          } as any)\n          .assign({accept})\n          .value()\n\n        // todo: migrate to proxied catch-all handler (voto5 legacy todo)\n        // uploader.on('catchAll', (name, file/*or files*/, e) => console.debug(name))\n\n        // todo: when do we call upload on a multiselect-upload and file-added triggered multiple times? (voto5 legacy todo)\n        // uploader.upload()\n        // uploader.on('fileAdded', (file, e) => dispatch(el, 'filesSubmitted', {file, uploader}))\n        // @ts-ignore\n        uploader.on('filesSubmitted', (files: any, e: any) => dispatch(el, 'filesSubmitted', {\n          files,\n          uploader,\n          // uploader.upload()\n        }))\n        // @ts-ignore\n        uploader.on('fileProgress', (file: any, e: any) => dispatch(el, 'fileProgress', {\n          file,\n          uploader,\n        }))\n        uploader.on('fileSuccess', (file: any, json: any) => dispatch(el, 'fileSuccess', {\n          file,\n          uploader,\n          json,\n          // uploader.cancel()\n        }))\n        uploader.on('error', (message: string, file: any) => dispatch(el, 'fileSuccess', {\n          file,\n          uploader,\n          message,\n          // uploader.cancel()\n        }))\n      },\n\n      // @ts-ignore\n      unbind(el, binding) {\n      },\n    },\n  },\n})\nexport default class FlowUploader extends Vue {\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"audio-library-selector\"},[(_vm.selectedAudioFile)?_c('audio-library-selection',{attrs:{\"audio-file\":_vm.selectedAudioFile,\"lang-id\":_vm.langId},on:{\"clear\":_vm.clearSelection}}):[_c('audio-library-search-field',{attrs:{\"lang-id\":_vm.langId,\"audio-files\":_vm.audioFiles},on:{\"select\":_vm.selectAudioFile}})]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"audio-library-search-field dropdown\"},[_c('div',{staticClass:\"input-group\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.rawQuery),expression:\"rawQuery\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":_vm._f(\"trans\")('flow-builder.search-audio-library'),\"disabled\":_vm.isEntireLibraryModeEnabled},domProps:{\"value\":(_vm.rawQuery)},on:{\"focus\":_vm.activate,\"blur\":_vm.deactivate,\"input\":[function($event){if($event.target.composing){ return; }_vm.rawQuery=$event.target.value},_vm.resetPagination]}}),_c('span',{staticClass:\"input-group-append\"},[_c('button',{staticClass:\"btn btn-primary dropdown-toggle\",class:{active: _vm.isEntireLibraryModeEnabled},on:{\"click\":function($event){$event.preventDefault();return _vm.toggleAudioLibrary.apply(null, arguments)}}},[_c('i',{staticClass:\"glyphicon glyphicon-search\"})])])]),(_vm.query || _vm.isAudioLibraryEmpty || _vm.isEntireLibraryModeEnabled)?_c('div',{staticClass:\"dropdown-menu\"},[(_vm.isEntireLibraryModeEnabled)?[_c('a',{staticClass:\"disabled dropdown-item\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();}}},[_c('button',{staticClass:\"close active\",on:{\"click\":_vm.toggleAudioLibrary}},[_vm._v(\"x \")]),_c('i',{staticClass:\"glyphicon glyphicon-info-sign\"}),_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.showing-entire-audio-library'))+\"… \")]),_c('div',{staticClass:\"dropdown-divider\",attrs:{\"role\":\"separator\"}})]:_vm._e(),(!_vm.isAudioLibraryEmpty)?[_vm._l((_vm.search(_vm.query).slice(_vm.offset * _vm.limit, (_vm.offset + 1) * _vm.limit)),function(audio){return _c('a',{staticClass:\"dropdown-item\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.select(audio)}}},[_vm._v(\" \"+_vm._s(audio.description)+\" \")])}),(_vm.query.length >= 3 && !_vm.search(_vm.query).length)?_c('a',{staticClass:\"disabled dropdown-item\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();}}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.no-audio-files-found-for-X'))+\" \\\"\"),_c('em',[_vm._v(_vm._s(_vm.query))]),_vm._v(\"\\\". \")]):_vm._e(),(_vm.query && _vm.query.length < 3)?_c('a',{staticClass:\"disabled dropdown-item\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();}}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.enter-at-least-three-chars'))+\" \")]):_vm._e(),(_vm.hasPrevious || _vm.hasNext)?[_c('div',{staticClass:\"dropdown-divider\",attrs:{\"role\":\"separator\"}}),_c('div',{staticClass:\"pagers dropdown-item\"},[_c('a',{staticClass:\"col-md-6\",class:{disabled: !_vm.hasPrevious},attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.decrementPage.apply(null, arguments)}}},[_c('i',{staticClass:\"glyphicon glyphicon-chevron-left\"}),_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.previous'))+\" \")]),_c('a',{staticClass:\"col-md-6 text-right\",class:{disabled: !_vm.hasNext},attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.incrementPage.apply(null, arguments)}}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.next'))+\" \"),_c('i',{staticClass:\"glyphicon glyphicon-chevron-right\"})])])]:_vm._e()]:_vm._e(),(_vm.isAudioLibraryEmpty)?_c('a',{staticClass:\"disabled dropdown-item\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();}}},[_c('i',{staticClass:\"glyphicon glyphicon-warning-sign\"}),_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.audio-lib-empty-for-this-org'))+\" \")]):_vm._e()],2):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"audio-library-search-field dropdown\">\n    <div class=\"input-group\">\n      <input\n        v-model=\"rawQuery\"\n        type=\"text\"\n        :placeholder=\"'flow-builder.search-audio-library' | trans\"\n        :disabled=\"isEntireLibraryModeEnabled\"\n        class=\"form-control\"\n        @focus=\"activate\"\n        @blur=\"deactivate\"\n        @input=\"resetPagination\">\n\n      <span class=\"input-group-append\">\n        <button\n          :class=\"{active: isEntireLibraryModeEnabled}\"\n          class=\"btn btn-primary dropdown-toggle\"\n          @click.prevent=\"toggleAudioLibrary\">\n          <i class=\"glyphicon glyphicon-search\" />\n        </button>\n      </span>\n    </div>\n\n    <div\n      v-if=\"query || isAudioLibraryEmpty || isEntireLibraryModeEnabled\"\n      class=\"dropdown-menu\">\n      <template v-if=\"isEntireLibraryModeEnabled\">\n        <a\n          href=\"#\"\n          class=\"disabled dropdown-item\"\n          @click.prevent=\"\">\n          <button\n            class=\"close active\"\n            @click=\"toggleAudioLibrary\">x\n          </button>\n\n          <i class=\"glyphicon glyphicon-info-sign\" />\n          {{ 'flow-builder.showing-entire-audio-library'|trans }}&hellip;\n        </a>\n        <div\n          role=\"separator\"\n          class=\"dropdown-divider\" />\n      </template>\n\n      <template v-if=\"!isAudioLibraryEmpty\">\n        <a\n          v-for=\"audio in search(query).slice(offset * limit, (offset + 1) * limit)\"\n          class=\"dropdown-item\"\n          href=\"#\"\n          @click.prevent=\"select(audio)\">\n          {{ audio.description }}\n        </a>\n        <a\n          v-if=\"query.length >= 3 && !search(query).length\"\n          class=\"disabled dropdown-item\"\n          href=\"#\"\n          @click.prevent=\"\">\n          {{ 'flow-builder.no-audio-files-found-for-X' | trans }} \"<em>{{ query }}</em>\".\n        </a>\n        <a\n          v-if=\"query && query.length < 3\"\n          class=\"disabled dropdown-item\"\n          href=\"#\"\n          @click.prevent=\"\">\n          {{ 'flow-builder.enter-at-least-three-chars' | trans }}\n        </a>\n\n        <template v-if=\"hasPrevious || hasNext\">\n          <div\n            role=\"separator\"\n            class=\"dropdown-divider\" />\n\n          <div class=\"pagers dropdown-item\">\n            <a\n              href=\"#\"\n              :class=\"{disabled: !hasPrevious}\"\n              class=\"col-md-6\"\n              @click.prevent=\"decrementPage\">\n              <i class=\"glyphicon glyphicon-chevron-left\" />\n              {{ 'flow-builder.previous' | trans }}\n            </a>\n\n            <a\n              href=\"#\"\n              :class=\"{disabled: !hasNext}\"\n              class=\"col-md-6 text-right\"\n              @click.prevent=\"incrementPage\">\n              {{ 'flow-builder.next' | trans }}\n              <i class=\"glyphicon glyphicon-chevron-right\" />\n            </a>\n          </div>\n        </template>\n      </template>\n\n      <a\n        v-if=\"isAudioLibraryEmpty\"\n        class=\"disabled dropdown-item\"\n        href=\"#\"\n        @click.prevent=\"\">\n        <i class=\"glyphicon glyphicon-warning-sign\" />\n        {{ 'flow-builder.audio-lib-empty-for-this-org' | trans }}\n      </a>\n    </div>\n  </div>\n</template>\n\n<script lang=\"js\">\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types,@typescript-eslint/strict-boolean-expressions */\nimport fuse from 'fuse.js'\nimport {trim} from 'lodash'\nimport VueFocus from 'vue-focus'\nimport {lang} from '@/lib/filters/lang'\n\nexport default {\n  mixins: [VueFocus.mixin, lang],\n  props: ['langId', 'audioFiles'],\n\n  data() {\n    return {\n      isActive: false,\n\n      // querying\n      rawQuery: '',\n      cache: {},\n      isEntireLibraryModeEnabled: false,\n\n      // pagination\n      offset: 0,\n      limit: 10,\n    }\n  },\n\n  computed: {\n    query() {\n      return trim(this.rawQuery)\n    },\n\n    isAudioLibraryEmpty() {\n      return this.isActive && !this.audioFiles.length\n    },\n\n    hasNext() {\n      return (this.search(this.query).length / (this.offset + 1)) > this.limit\n    },\n\n    hasPrevious() {\n      return this.offset > 0\n    },\n  },\n\n  methods: {\n    search(query) {\n      if (this.isEntireLibraryModeEnabled) {\n        return this.audioFiles\n      }\n\n      if (query.length < 3) {\n        return []\n      }\n\n      console.debug('flow-builder.ResourceViewer.AudioLibrarySearchField', 'searching', query)\n\n      if (query in this.cache) {\n        console.debug('flow-builder.ResourceViewer.AudioLibrarySearchField', 'cache hit', query)\n        return this.cache[query]\n      }\n\n      console.debug('flow-builder.ResourceViewer.AudioLibrarySearchField', 'cache miss', query)\n\n      const keys = ['filename', 'description']\n      this.cache[query] = new fuse(this.audioFiles, {keys}).search(query)\n      return this.cache[query]\n    },\n\n    // todo: push pagination into isolated component\n    incrementPage() {\n      if (this.hasNext) {\n        this.offset += 1\n      }\n    },\n\n    decrementPage() {\n      if (this.hasPrevious) {\n        (this.offset -= 1)\n      }\n    },\n\n    resetPagination() {\n      this.offset = 0\n    },\n\n    toggleAudioLibrary() {\n      this.isEntireLibraryModeEnabled = !this.isEntireLibraryModeEnabled\n      this.resetPagination()\n    },\n\n    select(audio) {\n      this.$emit('select', {value: audio, langId: this.langId})\n    },\n\n    activate() {\n      this.isActive = true\n    },\n\n    deactivate() {\n      this.isActive = false\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.audio-library-search-field {\n  &.dropdown {\n    .dropdown-menu {\n      display: block;\n      min-width: 100%;\n\n      > li.pagers > a {\n        clear: none;\n        margin-top: 0;\n        margin-bottom: 0;\n        padding-top: 0.5em;\n        padding-bottom: 0.5em;\n\n        &.disabled {\n          text-decoration: none;\n          background-color: transparent;\n          background-image: none;\n          filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);\n          cursor: not-allowed;\n          color: #777777;\n        }\n      }\n    }\n  }\n}\n\n.close {\n  pointer-events: auto;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioLibrarySearchField.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioLibrarySearchField.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AudioLibrarySearchField.vue?vue&type=template&id=22499358&scoped=true&\"\nimport script from \"./AudioLibrarySearchField.vue?vue&type=script&lang=js&\"\nexport * from \"./AudioLibrarySearchField.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AudioLibrarySearchField.vue?vue&type=style&index=0&id=22499358&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"22499358\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"well well-sm audio-library-selection\",class:{\n    'tree-audio-control-text-container-selectable': _vm.selectable,\n    'tree-audio-control-text-container-selected': !_vm.selectable},attrs:{\"data-audio-file-container-language\":_vm.langId}},[_c('button',{staticClass:\"audio-library-selection-clear-selection btn-ghost pull-right\",on:{\"click\":function($event){$event.preventDefault();return _vm.clear.apply(null, arguments)}}},[_c('i',{staticClass:\"glyphicon glyphicon-remove\"})]),_c('div',{staticClass:\"btn-group audio-library-selection-download-dropdown\"},[_vm._m(0),_c('ul',{staticClass:\"dropdown-menu dropdown-menu-right\"},[_c('li',[_c('a',{staticClass:\"tree-block-audio-files-download-original\",attrs:{\"href\":_vm.audioFileUrl,\"target\":\"_blank\"}},[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.original-file')))])])])]),_c('p',{staticClass:\"audio-file-description\",attrs:{\"title\":_vm.audioFileUrl}},[_vm._v(\" \"+_vm._s(_vm.audioFileUrl)+\" \")]),_c('div',{staticClass:\"btn-toolbar\"},[(_vm.selectable)?_c('button',{staticClass:\"btn btn-secondary btn-xs\",on:{\"click\":function($event){$event.preventDefault();return _vm.select.apply(null, arguments)}}},[_c('i',{staticClass:\"glyphicon glyphicon-ok\"})]):_vm._e()])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"btn btn-ghost dropdown-toggle\",attrs:{\"type\":\"button\",\"data-toggle\":\"dropdown\"}},[_c('span',{staticClass:\"glyphicon glyphicon-download-alt\",attrs:{\"aria-hidden\":\"true\"}}),_c('span',{staticClass:\"caret\"})])}]\n\nexport { render, staticRenderFns }","import moment from 'moment'\n\nexport default {\n  filters: {\n    formatDate(date, format = 'llll') {\n      if (!date) {\n        return ''\n      }\n      return moment.utc(date)\n        .format(format)\n    },\n\n    fromNow(date, withoutSuffix) {\n      return moment.utc(date)\n        .fromNow(withoutSuffix)\n    },\n\n    formatDuration(duration, unit = 'seconds', withSuffix) {\n      const currentLocale = moment.locale()\n      // this function only gets used in english.\n      moment.locale('en')\n      const result = moment.duration(duration, unit)\n        .humanize(withSuffix)\n      moment.locale(currentLocale)\n      return result\n    },\n\n    formatDurationLocalized(duration, locale, unit = 'seconds', withSuffix) {\n      const currentLocale = moment.locale()\n      moment.locale(locale)\n      const result = moment.duration(duration, unit)\n        .humanize(withSuffix)\n      moment.locale(currentLocale)\n      return result\n    },\n  },\n}\n","<template>\n  <div\n    class=\"well well-sm audio-library-selection\"\n    :data-audio-file-container-language=\"langId\"\n    :class=\"{\n      'tree-audio-control-text-container-selectable': selectable,\n      'tree-audio-control-text-container-selected': !selectable}\">\n    <button\n      class=\"audio-library-selection-clear-selection btn-ghost pull-right\"\n      @click.prevent=\"clear\">\n      <i class=\"glyphicon glyphicon-remove\" />\n    </button>\n\n    <div class=\"btn-group audio-library-selection-download-dropdown\">\n      <button\n        type=\"button\"\n        class=\"btn btn-ghost dropdown-toggle\"\n        data-toggle=\"dropdown\">\n        <span\n          class=\"glyphicon glyphicon-download-alt\"\n          aria-hidden=\"true\" />\n        <span class=\"caret\" />\n      </button>\n\n      <ul class=\"dropdown-menu dropdown-menu-right\">\n        <li>\n          <a\n            :href=\"audioFileUrl\"\n            target=\"_blank\"\n            class=\"tree-block-audio-files-download-original\">{{ 'flow-builder.original-file'|trans }}</a>\n        </li>\n\n        <!-- <li><a :href=\"`/audiofiles/download/${audioFile.filename}/ogg`\" target=\"_blank\" class=\"tree-block-audio-files-download-ogg\">{{'flow-builder.download-X-format'|trans({kind: '.ogg'})}}</a></li>\n        <li><a :href=\"`/audiofiles/download/${audioFile.filename}/ul`\" target=\"_blank\" class=\"tree-block-audio-files-download-ul\">{{'flow-builder.download-X-format'|trans({kind: '.ul'})}}</a></li> -->\n      </ul>\n    </div>\n\n    <p\n      class=\"audio-file-description\"\n      :title=\"audioFileUrl\">\n      {{ audioFileUrl }}\n    </p>\n\n    <div class=\"btn-toolbar\">\n      <!--      <vue-audio :file=\"audioFileUrl\"></vue-audio>-->\n\n      <button\n        v-if=\"selectable\"\n        class=\"btn btn-secondary btn-xs\"\n        @click.prevent=\"select\">\n        <i class=\"glyphicon glyphicon-ok\" />\n      </button>\n    </div>\n  </div>\n</template>\n\n<script lang=\"js\">\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types,@typescript-eslint/strict-boolean-expressions */\nimport {lang} from '@/lib/filters/lang'\nimport momentFilters from '@/lib/filters/moment'\n\nexport default {\n\n  mixins: [lang, momentFilters],\n  props: ['audioFile', 'selected', 'selectable', 'langId'],\n\n  computed: {\n    audioFileUrl() {\n      return this.audioFile\n    },\n  },\n\n  methods: {\n    select() {\n      this.$emit('select')\n    },\n\n    clear() {\n      this.$emit('clear')\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\">\n.btn-ghost {\n  background: transparent;\n  border: none;\n}\n\n.audio-library-selection {\n  position: relative;\n  background-color: transparent !important;\n  background-image: none !important;\n  border-color: #cccccc !important;\n\n  .audio-library-selection-download-dropdown {\n    position: absolute;\n    right: 1.6em;\n    top: 50%;\n    margin-top: -8px;\n    color: #888888;\n\n    svg {\n      vertical-align: middle;\n    }\n  }\n\n  .audio-library-selection-clear-selection {\n    margin-right: -7px;\n  }\n\n  .audio-file-description {\n    text-overflow: ellipsis;\n    overflow: hidden;\n    margin-bottom: 3px;\n  }\n\n  .vue-sound-wrapper {\n    margin-bottom: 8px;\n    margin-left: 1em;\n\n    .vue-sound__player {\n      .icon-play3, .icon-pause2 {\n        font-size: 130%;\n        color: #888888;\n      }\n\n      .icon-play3:hover, .icon-pause2:hover {\n        color: black;\n        text-decoration: none;\n      }\n\n      .icon-stop2, .icon-download, .icon-volume-high, .volume-toggle {\n        display: none !important;\n      }\n\n      .vue-sound__playback-time-current, .vue-sound__playback-time-total, .vue-sound__playback-time-separator {\n        font-size: 80%;\n        color: #888888;\n      }\n\n      .vue-sound__playback-time-wrapper {\n        text-align: center;\n        width: 71% !important;\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioLibrarySelection.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioLibrarySelection.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AudioLibrarySelection.vue?vue&type=template&id=3c1ce0a2&\"\nimport script from \"./AudioLibrarySelection.vue?vue&type=script&lang=js&\"\nexport * from \"./AudioLibrarySelection.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AudioLibrarySelection.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"audio-library-selector\">\n    <audio-library-selection\n      v-if=\"selectedAudioFile\"\n      :audio-file=\"selectedAudioFile\"\n      :lang-id=\"langId\"\n      @clear=\"clearSelection\" />\n\n    <template v-else>\n      <!-- todo: refactor audio-library-selection to use v-model's @input + :value -->\n      <!-- <audio-library-selection\n          v-for=\"audioFile in alternateSelections\"\n          :key=\"audioFile && audioFile.id\"\n          :audioFile=\"audioFile\"\n          :selectable=\"selectable\"\n          @select=\"selectAudioFile({value: audioFile, langId})\" /> -->\n\n      <!-- todo: refactor audio-library-search-field to use v-model's @input + :value -->\n      <audio-library-search-field\n        :lang-id=\"langId\"\n        :audio-files=\"audioFiles\"\n        @select=\"selectAudioFile\" />\n    </template>\n  </div>\n</template>\n\n<script lang=\"js\">\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types,@typescript-eslint/strict-boolean-expressions */\nimport {isEmpty} from 'lodash'\nimport {mapActions} from 'vuex'\nimport {SupportedContentType, SupportedMode} from '@floip/flow-runner'\nimport AudioLibrarySearchField from './AudioLibrarySearchField'\nimport AudioLibrarySelection from './AudioLibrarySelection'\n\nexport default {\n\n  components: {\n    AudioLibrarySearchField,\n    AudioLibrarySelection,\n  },\n  props: [\n    'alternateSelections',\n    'selectedAudioFile',\n    'langId',\n    'audioFiles',\n    'isPlaying',\n    'audioPlayerUrl',\n    'resourceId',\n  ],\n\n  computed: {\n    selectable() {\n      return !isEmpty(this.alternateSelections)\n    },\n  },\n\n  methods: {\n    ...mapActions('flow', ['resource_setOrCreateValueModeSpecific']),\n    clearSelection() {\n      this.resource_setOrCreateValueModeSpecific({\n        resourceId: this.resourceId,\n        filter: {language_id: this.langId, content_type: SupportedContentType.AUDIO, modes: [SupportedMode.IVR]},\n        value: '',\n      })\n    },\n    selectAudioFile({value, langId}) {\n      this.resource_setOrCreateValueModeSpecific({\n        resourceId: this.resourceId,\n        filter: {language_id: langId, content_type: SupportedContentType.AUDIO, modes: [SupportedMode.IVR]},\n        value: value.description,\n      })\n    },\n  },\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioLibrarySelector.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioLibrarySelector.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AudioLibrarySelector.vue?vue&type=template&id=75ccf3c2&\"\nimport script from \"./AudioLibrarySelector.vue?vue&type=script&lang=js&\"\nexport * from \"./AudioLibrarySelector.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.isFeatureCallToRecordEnabled)?_c('div',{staticClass:\"phone-recorder\"},[_c('phone-recording-recorder-selector',{attrs:{\"is-modal-visible\":_vm.isRecorderSelectorVisible},on:{\"input\":_vm.handleRecorderSelectionChanged},model:{value:(_vm.callConfig),callback:function ($$v) {_vm.callConfig=$$v},expression:\"callConfig\"}})],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-modal',{staticClass:\"phone-recording-recorder-selector\",attrs:{\"size\":\"lg\",\"no-close-on-backdrop\":\"\",\"no-close-on-esc\":\"\",\"title\":_vm._f(\"trans\")('flow-builder.select-a-caller-from-the-list-below'),\"visible\":_vm.isModalVisible,\"ok-title\":_vm._f(\"trans\")('flow-builder.call-this-phone-number'),\"cancel-title\":_vm._f(\"trans\")('flow-builder.close')},on:{\"ok\":_vm.handleModalClosed,\"cancel\":_vm.handleModalCancelled,\"close\":_vm.handleModalCancelled}},[_c('div',{staticClass:\"call-to-record-modal-table-container\"},[_c('table',{staticClass:\"table table-striped\"},[_c('thead',[_c('tr',[_c('th',{staticClass:\"recorder-selector-field\"}),_c('th',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.name')))]),_c('th',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.phone-number')))])])]),_c('tbody',{attrs:{\"id\":\"call-to-record-modal-list\"}},_vm._l((_vm.recorders),function(recorder){return _c('tr',{staticClass:\"call-to-record-item\"},[_c('td',{staticClass:\"recorder-selector-field\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedRecorder),expression:\"selectedRecorder\"}],attrs:{\"id\":(\"call-to-record-caller-\" + (recorder.id)),\"type\":\"radio\",\"x-name\":\"calltorecord_caller_select\"},domProps:{\"value\":recorder,\"checked\":_vm._q(_vm.selectedRecorder,recorder)},on:{\"change\":function($event){_vm.selectedRecorder=recorder}}})]),_c('td',[_c('label',{attrs:{\"for\":(\"call-to-record-caller-\" + (recorder.id))},on:{\"click\":function($event){return _vm.setSelectedRecorder(recorder)}}},[_vm._v(_vm._s(recorder.name))])]),_c('td',[_c('label',{attrs:{\"for\":(\"call-to-record-caller-\" + (recorder.id))},on:{\"click\":function($event){return _vm.setSelectedRecorder(recorder)}}},[_vm._v(_vm._s(recorder.phone))])])])}),0)]),_c('h4',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.add-a-description-to-this-recording')))]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.description),expression:\"description\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"rows\":\"2\",\"placeholder\":_vm._f(\"trans\")('flow-builder.optional-description')},domProps:{\"value\":(_vm.description)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.description=$event.target.value}}}),_c('h4',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.add-a-new-recorder')))]),_c('table',{staticClass:\"table\"},[_c('tbody',[_c('tr',[_c('td',{staticClass:\"recorder-selector-field\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedRecorder),expression:\"selectedRecorder\"}],attrs:{\"id\":\"new_recorder_radio\",\"type\":\"radio\",\"name\":\"calltorecord_caller_select\"},domProps:{\"value\":_vm.draft,\"checked\":_vm._q(_vm.selectedRecorder,_vm.draft)},on:{\"change\":function($event){_vm.selectedRecorder=_vm.draft}}})]),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.draft.name),expression:\"draft.name\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":_vm._f(\"trans\")('flow-builder.name')},domProps:{\"value\":(_vm.draft.name)},on:{\"click\":_vm.selectNewRecorder,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.draft, \"name\", $event.target.value)}}})]),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.draft.phone),expression:\"draft.phone\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":_vm._f(\"trans\")('flow-builder.phone-number')},domProps:{\"value\":(_vm.draft.phone)},on:{\"click\":_vm.selectNewRecorder,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.draft, \"phone\", $event.target.value)}}})])])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-modal\n    size=\"lg\"\n    class=\"phone-recording-recorder-selector\"\n    no-close-on-backdrop\n    no-close-on-esc\n    :title=\"'flow-builder.select-a-caller-from-the-list-below'|trans\"\n    :visible=\"isModalVisible\"\n    :ok-title=\"'flow-builder.call-this-phone-number'|trans\"\n    :cancel-title=\"'flow-builder.close'|trans\"\n    @ok=\"handleModalClosed\"\n    @cancel=\"handleModalCancelled\"\n    @close=\"handleModalCancelled\">\n    <div class=\"call-to-record-modal-table-container\">\n      <table class=\"table table-striped\">\n        <thead>\n          <tr>\n            <th class=\"recorder-selector-field\" />\n            <th>{{ 'flow-builder.name'|trans }}</th>\n            <th>{{ 'flow-builder.phone-number'|trans }}</th>\n          </tr>\n        </thead>\n        <tbody id=\"call-to-record-modal-list\">\n          <tr\n            v-for=\"recorder in recorders\"\n            class=\"call-to-record-item\">\n            <td class=\"recorder-selector-field\">\n              <input\n                :id=\"`call-to-record-caller-${recorder.id}`\"\n                v-model=\"selectedRecorder\"\n                type=\"radio\"\n                x-name=\"calltorecord_caller_select\"\n                :value=\"recorder\">\n            </td>\n            <td>\n              <label\n                :for=\"`call-to-record-caller-${recorder.id}`\"\n                @click=\"setSelectedRecorder(recorder)\">{{ recorder.name }}</label>\n            </td>\n            <td>\n              <label\n                :for=\"`call-to-record-caller-${recorder.id}`\"\n                @click=\"setSelectedRecorder(recorder)\">{{ recorder.phone }}</label>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n\n      <h4>{{ 'flow-builder.add-a-description-to-this-recording'|trans }}</h4>\n      <input\n        v-model=\"description\"\n        type=\"text\"\n        class=\"form-control\"\n        rows=\"2\"\n        :placeholder=\"'flow-builder.optional-description'|trans\">\n\n      <h4>{{ 'flow-builder.add-a-new-recorder'|trans }}</h4>\n      <table class=\"table\">\n        <tbody>\n          <tr>\n            <td class=\"recorder-selector-field\">\n              <input\n                id=\"new_recorder_radio\"\n                v-model=\"selectedRecorder\"\n                type=\"radio\"\n                name=\"calltorecord_caller_select\"\n                :value=\"draft\">\n            </td>\n            <td>\n              <input\n                v-model=\"draft.name\"\n                type=\"text\"\n                :placeholder=\"'flow-builder.name'|trans\"\n                class=\"form-control\"\n                @click=\"selectNewRecorder\">\n            </td>\n            <td>\n              <input\n                v-model=\"draft.phone\"\n                type=\"text\"\n                :placeholder=\"'flow-builder.phone-number'|trans\"\n                class=\"form-control\"\n                @click=\"selectNewRecorder\">\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </b-modal>\n</template>\n\n<script lang=\"js\">\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types,@typescript-eslint/strict-boolean-expressions */\nimport {lang} from '@/lib/filters/lang'\nimport {clone} from 'lodash'\nimport {mapState} from 'vuex'\nimport {BModal} from 'bootstrap-vue'\n\nexport default {\n  components: {\n    BModal,\n  },\n\n  mixins: [lang],\n\n  props: {\n    isModalVisible: Boolean,\n  },\n\n  data() {\n    return {\n      selectedRecorder: null,\n      description: null,\n      draft: null,\n    }\n  },\n\n  created() {\n    this.reset()\n  },\n\n  computed: {\n    ...mapState({\n      recorders: ({audio: {recording: {recorders}}}) => recorders,\n    }),\n  },\n\n  methods: {\n    selectNewRecorder() {\n      this.draft.isNew = true\n      this.selectedRecorder = this.draft\n    },\n    setSelectedRecorder(recorder) {\n      this.selectedRecorder = recorder\n    },\n    reset() {\n      this.draft = {\n        name: null,\n        phone: null,\n        isNew: true,\n      }\n      this.description = null\n      this.selectedRecorder = null\n    },\n\n    handleModalClosed() {\n      const\n        {description} = this\n      const value = clone(this.selectedRecorder)\n\n      this.reset()\n      this.$emit('input', {\n        value,\n        recorder: value,\n        description,\n      })\n    },\n\n    handleModalCancelled() {\n      this.reset()\n\n      const\n        {description} = this\n      const value = clone(this.selectedRecorder)\n\n      this.$emit('input', {\n        value,\n        recorder: value,\n        description,\n      })\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.phone-recording-recorder-selector {\n  padding-top: 3em;\n\n  .modal-body {\n    h4, .h4 {\n      margin-top: 2em;\n    }\n  }\n\n  .table {\n    .recorder-selector-field {\n      width: 3em;\n      text-align: center;\n      vertical-align: middle;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PhoneRecordingRecorderSelector.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PhoneRecordingRecorderSelector.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PhoneRecordingRecorderSelector.vue?vue&type=template&id=41756c06&scoped=true&\"\nimport script from \"./PhoneRecordingRecorderSelector.vue?vue&type=script&lang=js&\"\nexport * from \"./PhoneRecordingRecorderSelector.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PhoneRecordingRecorderSelector.vue?vue&type=style&index=0&id=41756c06&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"41756c06\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div\n    v-if=\"isFeatureCallToRecordEnabled\"\n    class=\"phone-recorder\">\n    <phone-recording-recorder-selector\n      v-model=\"callConfig\"\n      :is-modal-visible=\"isRecorderSelectorVisible\"\n      @input=\"handleRecorderSelectionChanged\" />\n  </div>\n</template>\n\n<script lang=\"js\">\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types,@typescript-eslint/strict-boolean-expressions */\nimport {mapGetters, mapState} from 'vuex'\nimport PhoneRecordingRecorderSelector from './PhoneRecordingRecorderSelector'\n\nexport default {\n  components: {\n    PhoneRecordingRecorderSelector,\n  },\n\n  props: ['recordingKey'],\n\n  data() {\n    return {\n      // this is set by hooking into the v-model property of <phone-recording-recorder-selector v-model=\"callConfig\">\n      // which $emits a new value that results in setting this variable by reference.\n      callConfig: null,\n    }\n  },\n\n  computed: {\n    ...mapState({\n      // todo: deprecate (this + setAudioRecordingConfigVisibilityForSelectedBlock) in favor of modal + local state\n      isRecorderSelectorVisible: ({audio: {recording: {isRecorderSelectorVisible}}}) => isRecorderSelectorVisible,\n    }),\n\n    ...mapGetters(['isFeatureCallToRecordEnabled']),\n  },\n\n  methods: {\n    handleRecorderSelectionChanged() {\n      this.$store.commit('setAudioRecordingConfigVisibilityForSelectedBlock', {isVisible: false})\n\n      if (!this.callConfig.recorder) {\n        return\n      }\n\n      const callConfig = {\n        key: this.recordingKey,\n        description: this.callConfig.description,\n        ...this.callConfig.recorder,\n      }\n\n      this.$store.dispatch('startAudioRecordingFor', callConfig)\n    },\n  },\n}\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PhoneRecorder.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PhoneRecorder.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PhoneRecorder.vue?vue&type=template&id=79dcd652&\"\nimport script from \"./PhoneRecorder.vue?vue&type=script&lang=js&\"\nexport * from \"./PhoneRecorder.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"upload-monitor\"},[(_vm.hasProgress)?_c('div',{staticClass:\"upload-monitor-progress\"},[_c('h6',[_vm._v(_vm._s(_vm._f(\"trans\")('trees.uploading'))+\"… \"+_vm._s(_vm.upload.file.name))]),_c('div',{staticClass:\"progress\"},[_c('b-progress',{staticClass:\"mb-3\",attrs:{\"value\":_vm.progress * 1,\"show-value\":\"\",\"animated\":\"\"}})],1)]):_vm._e(),(_vm.isFailure)?_c('p',{staticClass:\"text-danger small\"},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('trees.error-uploading-file-try-again'))+\" \"),(_vm.upload.message)?_c('span',{staticClass:\"details\"},[_vm._v(\"(\"+_vm._s(_vm.upload.message)+\")\")]):_vm._e()]):_vm._e(),(!_vm.hasProgress)?_vm._t(\"default\"):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import axios from 'axios'\nimport lodash from 'lodash'\nimport Vue from 'vue'\n\nexport const Statuses = {\n  UPLOADING: -1,\n  UNINITIALIZED: 0,\n  SUCCESS: 1,\n  FAILURE: 2,\n}\n\nexport const UploadStatusToStateMap = {\n  [Statuses.UPLOADING]: 'uploading',\n  [Statuses.UNINITIALIZED]: 'uninitialized',\n  [Statuses.SUCCESS]: 'success',\n  [Statuses.FAILURE]: 'failure',\n}\n\nexport default {\n  namespaced: true,\n\n  state: {\n    uploadProgressByKey: {},\n    errorMessageByKey: {},\n\n    uploadsById: {},\n    uploadIdsByKey: {},\n  },\n\n  mutations: {\n    setErrorMessage({errorMessageByKey}, {key, errorMessage}) {\n      Vue.set(errorMessageByKey, key, errorMessage)\n    },\n\n    setUploadProgress({uploadProgressByKey}, {key, uploadProgress}) {\n      Vue.set(uploadProgressByKey, key, uploadProgress)\n    },\n\n    setUploadStatusFor({uploadsById, uploadIdsByKey}, {\n      file: fileWithRefs, key, status, progress, message, cancel,\n    }) {\n      const file = lodash.pick(\n        fileWithRefs,\n        ['averageSpeed', 'currentSpeed', 'error', 'name', 'paused', 'relativePath', 'size', 'uniqueIdentifier'],\n      )\n      Vue.set(uploadsById, file.uniqueIdentifier, {\n        key, status, progress, message, cancel, file,\n      })\n      Vue.set(uploadIdsByKey, key, file.uniqueIdentifier)\n    },\n  },\n\n  actions: {\n    uploadFile({commit}, {\n      key,\n      uploadUrl,\n      formDataFields,\n      onSuccess,\n      onError,\n    }) {\n      if (!uploadUrl) {\n        commit('setUploadProgress', {key, uploadProgress: null})\n        onError(new Error(`url was ${uploadUrl}`))\n        return\n      }\n\n      const formData = new FormData()\n      lodash.forEach(formDataFields, (value, name) => {\n        formData.set(name, value)\n      })\n\n      const config = {\n        onUploadProgress: (progressEvent) => {\n          commit('setUploadProgress', {\n            key,\n            uploadProgress: Math.floor((progressEvent.loaded * 100) / progressEvent.total),\n          })\n        },\n      }\n\n      axios.post(uploadUrl, formData, config)\n        .then((response) => {\n          commit('setUploadProgress', {key, uploadProgress: null})\n          onSuccess(response)\n        })\n        .catch((error) => {\n          commit('setUploadProgress', {key, uploadProgress: null})\n          onError(error)\n        })\n    },\n\n    // todo: this is slightly different, because it implements chunked+resumable uploads; generify\n    // todo: upgrade backend to use more recent composer package that's compatible w/ npm flow.js\n    // https://github.com/flowjs/flow-php-server\n    // todo: handle multi-file-per-key\n    uploadFiles({commit, dispatch, state}, {key, files, uploader}) {\n      const cancel = (_) => uploader.cancel()\n\n      files.forEach((file) => commit('setUploadStatusFor', {\n        file, key, progress: 0, status: Statuses.UNINITIALIZED, message: null, cancel,\n      }))\n\n      uploader.on('fileProgress', (file, e) => {\n        // TODO: enable showAppMessageFor and use it as follow\n        // dispatch('showAppMessageFor', {message: `Upload in progress... ${_.parseInt(file.progress() * 100)}%`}, {root: true})\n        console.debug(`Upload in progress... ${_.parseInt(file.progress() * 100)}%`)\n        commit('setUploadStatusFor', {\n          file,\n          key,\n          progress: file.progress(),\n          status: Statuses.UPLOADING,\n          message: null,\n          cancel,\n        })\n      })\n\n      uploader.on('fileSuccess', (file, json) => {\n        // TODO: enable showAppMessageFor and use it as follow\n        // dispatch('showAppMessageFor', {message: 'Upload successful!', isComplete: true}, {root: true})\n        console.debug('Upload successful!')\n        commit('setUploadStatusFor', {\n          file,\n          key,\n          progress: 1,\n          status: Statuses.SUCCESS,\n          message: null,\n          cancel,\n        })\n        // clear for next batch\n        // uploader.cancel()\n      })\n\n      uploader.on('error', (json, file) => {\n        const {status_description} = JSON.parse(json) || {}\n        // TODO: enable showAppMessageFor and use it as follow\n        // dispatch('showAppMessageFor', {message: status_description, isComplete: true}, {root: true})\n        console.debug(`Upload has error ${status_description}`)\n        commit('setUploadStatusFor', {\n          file,\n          key,\n          status: Statuses.FAILURE,\n          message: status_description,\n          cancel,\n        })\n        // clear for retry\n        // uploader.cancel()\n      })\n\n      uploader.upload()\n      // TODO: enable showAppMessageFor and use it as follow\n      // dispatch('showAppMessageFor', {message: 'Upload in progress...'}, {root: true})\n      console.debug('Upload in progress...')\n    },\n  },\n}\n","<template>\n  <div class=\"upload-monitor\">\n    <div\n      v-if=\"hasProgress\"\n      class=\"upload-monitor-progress\">\n      <h6>{{ 'trees.uploading' | trans }}&hellip; {{ upload.file.name }}</h6>\n\n      <div class=\"progress\">\n        <b-progress\n          :value=\"progress * 1\"\n          show-value\n          animated\n          class=\"mb-3\" />\n      </div>\n    </div>\n\n    <p\n      v-if=\"isFailure\"\n      class=\"text-danger small\">\n      {{ 'trees.error-uploading-file-try-again'|trans }}\n      <span\n        v-if=\"upload.message\"\n        class=\"details\">({{ upload.message }})</span>\n    </p>\n\n    <slot v-if=\"!hasProgress\" />\n  </div>\n</template>\n\n<script lang=\"js\">\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types,@typescript-eslint/strict-boolean-expressions,@typescript-eslint/unbound-method */\nimport {lang} from '@/lib/filters/lang'\nimport {forEach, get} from 'lodash'\n\nimport {mapState} from 'vuex'\nimport {BProgress} from 'bootstrap-vue'\nimport multimediaUpload, {Statuses as UploadStatuses} from '@/store/trees/multimediaUpload'\n\nexport default {\n\n  components: {BProgress},\n\n  mixins: [lang],\n  props: ['uploadKey'],\n\n  computed: {\n    ...mapState('multimediaUpload', ['uploadsById', 'uploadIdsByKey']),\n\n    upload() {\n      return this.uploadsById[this.uploadIdsByKey[this.uploadKey]]\n    },\n\n    hasProgress() {\n      return this.upload\n        && this.upload.status !== UploadStatuses.SUCCESS\n        && this.upload.status !== UploadStatuses.FAILURE\n    },\n\n    isFailure() {\n      return this.upload && this.upload.status === UploadStatuses.FAILURE\n    },\n\n    progress() {\n      return get(this.upload, 'progress', 0) * 100\n    },\n  },\n\n  created() {\n    const {$store} = this\n    const modules = {\n      multimediaUpload,\n    }\n\n    forEach(modules, (v, k) => !$store.hasModule(k) && $store.registerModule(k, v))\n  },\n}\n</script>\n\n<style lang=\"scss\">\n.progress {\n  margin-bottom: 0.5em;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadMonitor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadMonitor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UploadMonitor.vue?vue&type=template&id=44a05fb5&\"\nimport script from \"./UploadMonitor.vue?vue&type=script&lang=js&\"\nexport * from \"./UploadMonitor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UploadMonitor.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport {Getter, Mutation, namespace} from 'vuex-class'\nimport {\n  IBlock,\n  IFlow,\n  IResource,\n  IResourceValue as IResourceDefinitionVariantOverModes,\n  SupportedContentType,\n  SupportedMode,\n} from '@floip/flow-runner'\nimport Lang from '@/lib/filters/lang'\nimport Permissions from '@/lib/mixins/Permissions'\nimport Routes from '@/lib/mixins/Routes'\nimport FlowUploader from '@/lib/mixins/FlowUploader'\nimport {Component, Prop} from 'vue-property-decorator'\nimport {\n  discoverContentTypesFor,\n  findOrGenerateStubbedVariantOn,\n  findResourceVariantOverModesOn,\n  IResourceDefinitionVariantOverModesFilter,\n} from '@/store/flow/resource'\nimport ResourceVariantTextEditor from '@/components/interaction-designer/resource-editors/ResourceVariantTextEditor.vue'\nimport AudioLibrarySelector from '@/components/common/AudioLibrarySelector.vue'\nimport {ValidationException} from '@floip/flow-runner/src/domain/exceptions/ValidationException'\nimport PhoneRecorder from '@/components/interaction-designer/block-editors/PhoneRecorder.vue'\nimport {ILanguage} from '@floip/flow-runner/dist/flow-spec/ILanguage'\nimport {mixins} from 'vue-class-component'\nimport {TabsPlugin} from 'bootstrap-vue'\nimport UploadMonitor from '../block-editors/UploadMonitor.vue'\n\nVue.use(TabsPlugin)\n\nconst flowVuexNamespace = namespace('flow')\nconst builderVuexNamespace = namespace('builder')\n\ninterface IAudioFile {\n  id: string,\n  filename: string,\n  description: string,\n  language_id: string,\n  duration_seconds: string,\n  original_extension: string,\n  created_at: string,\n}\n\ninterface IResourceDefinitionVariantOverModesWithOptionalValue extends Partial<IResourceDefinitionVariantOverModes> {\n  value?: IResourceDefinitionVariantOverModes['value'],\n}\n\n@Component({\n  components: {\n    AudioLibrarySelector,\n    ResourceVariantTextEditor,\n    UploadMonitor,\n    PhoneRecorder,\n  },\n})\nexport class ResourceEditor extends mixins(FlowUploader, Permissions, Routes, Lang) {\n  @Prop({required: true}) block!: IBlock\n\n  @Prop({required: true}) flow!: IFlow\n\n  @Prop() resource!: IResource\n\n  @Prop() label?: string | number\n\n  discoverContentTypesFor = discoverContentTypesFor\n\n  findOrGenerateStubbedVariantOn = findOrGenerateStubbedVariantOn\n\n  findResourceVariantOverModesOn = findResourceVariantOverModesOn\n\n  SupportedMode = SupportedMode\n\n  SupportedContentType = SupportedContentType\n\n  iconsMap = new Map<string, object>([\n    [SupportedMode.SMS, ['far', 'envelope']],\n    [SupportedMode.TEXT, ['fac', 'text']],\n    [SupportedMode.USSD, ['fac', 'ussd']],\n    [SupportedMode.IVR, ['fac', 'audio']],\n    [SupportedMode.RICH_MESSAGING, ['far', 'comment-dots']],\n    [SupportedMode.OFFLINE, ['fas', 'mobile-alt']],\n  ])\n\n  triggerRecordViaPhoneFor(langId: ILanguage['id']): void {\n    this.$store.commit('setAudioRecordingConfigVisibilityForSelectedBlock', {langId, isVisible: true})\n  }\n\n  handleFilesSubmittedFor(key: string, {data}: { data: any }): void {\n    console.debug('call handleFilesSubmittedFor')\n    this.$store.dispatch('multimediaUpload/uploadFiles', {...data, key})\n  }\n\n  handleFileSuccessFor(key: string, langId: ILanguage['id'], event: any): void {\n    const {data: {json}} = event\n    const {\n      audio_file_id: id,\n      audio_uuid: filename,\n      created_at: {date: created_at},\n      description,\n      duration_seconds,\n    } = JSON.parse(json)\n    const extension = description.split('.')[description.split('.').length - 1]\n    const uploadedAudio: IAudioFile = {\n      id,\n      filename,\n      description,\n      language_id: langId,\n      duration_seconds,\n      original_extension: extension,\n      created_at,\n    }\n\n    this.resource_setOrCreateValueModeSpecific({\n      resourceId: this.resource.uuid,\n      filter: {language_id: langId, content_type: SupportedContentType.AUDIO, modes: [SupportedMode.IVR]},\n      value: description,\n    })\n    // remove the focus from the `upload` Tab\n    event.target.blur()\n    this.pushAudioIntoLibrary(uploadedAudio)\n  }\n\n  findAudioResourceVariantFor(resource: IResource, filter: IResourceDefinitionVariantOverModesFilter): string | null {\n    try {\n      return findResourceVariantOverModesOn(resource, filter).value\n    } catch (e) {\n      if (!(e instanceof ValidationException)) {\n        throw e\n      }\n\n      return null\n    }\n  }\n\n  @Getter availableAudio!: IAudioFile[]\n\n  @Getter isFeatureAudioUploadEnabled!: boolean\n\n  @Mutation pushAudioIntoLibrary!: (audio: IAudioFile) => void\n\n  @flowVuexNamespace.Action resource_setOrCreateValueModeSpecific!: ({\n    resourceId,\n    filter,\n    value,\n  }: { resourceId: IResource['uuid'], filter: IResourceDefinitionVariantOverModesWithOptionalValue, value: string }) => void\n\n  @builderVuexNamespace.Getter isEditable !: boolean\n}\n\nexport default ResourceEditor\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceEditor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceEditor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ResourceEditor.vue?vue&type=template&id=60c13a2a&scoped=true&\"\nimport script from \"./ResourceEditor.vue?vue&type=script&lang=ts&\"\nexport * from \"./ResourceEditor.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ResourceEditor.vue?vue&type=style&index=0&id=60c13a2a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"60c13a2a\",\n  null\n  \n)\n\nexport default component.exports","// extracted by mini-css-extract-plugin","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioLibrarySelection.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioLibrarySelection.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadMonitor.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadMonitor.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"generic-contact-property-editor\"},[_c('hr'),_c('label',{staticClass:\"text-primary\"},[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.contact-properties')))]),_c('div',{staticClass:\"custom-control custom-checkbox\"},[_c('input',{staticClass:\"custom-control-input\",attrs:{\"id\":\"setContactProperty\",\"type\":\"checkbox\",\"name\":\"setContactProperty\"},domProps:{\"value\":_vm.shouldSetContactProperty,\"checked\":_vm.shouldSetContactProperty},on:{\"change\":_vm.toggleSetContactProperty}}),_c('label',{staticClass:\"custom-control-label font-weight-normal\",attrs:{\"for\":\"setContactProperty\"}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.set-contact-property-with-response'))+\" \")])]),(_vm.shouldSetContactProperty)?_c('div',{staticClass:\"form-group\"},[_c('validation-message',{attrs:{\"message-key\":(\"block/\" + (_vm.block.uuid) + \"/config/set_contact_property/property_key\")},scopedSlots:_vm._u([{key:\"input-control\",fn:function(ref){\nvar isValid = ref.isValid;\nreturn [_c('div',{staticClass:\"block-contact-property-key\"},[_c('text-editor',{attrs:{\"value\":_vm.propertyKey,\"label\":_vm._f(\"trans\")('flow-builder.property'),\"label-class\":'',\"placeholder\":_vm._f(\"trans\")('flow-builder.enter-contact-property-label'),\"valid-state\":isValid},on:{\"input\":_vm.updatePropertyKey}})],1)]}}],null,false,477660232)}),_c('label',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.value')))]),(_vm.isBlockInteractive(_vm.block))?_c('div',{staticClass:\"form-group\"},[_c('div',{staticClass:\"custom-control custom-radio\"},[_c('input',{staticClass:\"custom-control-input\",attrs:{\"id\":\"setProp\",\"type\":\"radio\",\"name\":\"contactPropAction\"},domProps:{\"checked\":_vm.propertyValueAction === _vm.PROPERTY_VALUE_ACTION.FROM_CURRENT_BLOCK_RESPONSE,\"value\":_vm.PROPERTY_VALUE_ACTION.FROM_CURRENT_BLOCK_RESPONSE},on:{\"change\":_vm.updatePropertyValueAction}}),_c('label',{staticClass:\"custom-control-label font-weight-normal\",attrs:{\"for\":\"setProp\"}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.entry-from-this-block'))+\" \")])]),_c('div',{staticClass:\"custom-control custom-radio\"},[_c('input',{staticClass:\"custom-control-input\",attrs:{\"id\":\"clearProp\",\"type\":\"radio\",\"name\":\"contactPropAction\"},domProps:{\"checked\":_vm.propertyValueAction === _vm.PROPERTY_VALUE_ACTION.OPEN_EXPRESSION,\"value\":_vm.PROPERTY_VALUE_ACTION.OPEN_EXPRESSION},on:{\"change\":_vm.updatePropertyValueAction}}),_c('label',{staticClass:\"custom-control-label font-weight-normal\",attrs:{\"for\":\"clearProp\"}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.expression'))+\" \")])])]):_vm._e(),(_vm.shouldUseOpenExpression)?_c('validation-message',{attrs:{\"message-key\":(\"block/\" + (_vm.block.uuid) + \"/config/set_contact_property/property_value\")},scopedSlots:_vm._u([{key:\"input-control\",fn:function(ref){\nvar isValid = ref.isValid;\nreturn [_c('expression-input',{attrs:{\"label\":'',\"placeholder\":_vm._f(\"trans\")('flow-builder.enter-expression'),\"current-expression\":_vm.propertyValue,\"valid-state\":isValid},on:{\"commitExpressionChange\":_vm.updatePropertyValue}})]}}],null,false,3441631689)}):_vm._e()],1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {IBlock, IBlockConfig} from '@floip/flow-runner'\nimport {Component, Prop} from 'vue-property-decorator'\nimport {namespace} from 'vuex-class'\nimport Lang from '@/lib/filters/lang'\nimport {get, has} from 'lodash'\nimport {mixins} from 'vue-class-component'\nimport ValidationMessage from '@/components/common/ValidationMessage.vue'\nimport ExpressionInput from '@/components/common/ExpressionInput.vue'\nimport TextEditor from '@/components/common/TextEditor.vue'\nimport {isBlockInteractive} from '@/store/flow/block.ts'\n\nconst flowVuexNamespace = namespace('flow')\n\nconst EMPTY_STRING_EXPRESSION = ''\nconst BLOCK_RESPONSE_EXPRESSION = '@block.value'\n\n@Component({\n  components: {\n    TextEditor,\n    ExpressionInput,\n    ValidationMessage,\n  },\n})\nclass GenericContactPropertyEditor extends mixins(Lang) {\n  @Prop() readonly block!: IBlock\n\n  shouldSetContactProperty = false\n  PROPERTY_VALUE_ACTION = {\n    OPEN_EXPRESSION: 'openExpression',\n    FROM_CURRENT_BLOCK_RESPONSE: 'fromCurrentBlockResponse',\n  }\n  propertyValueAction = ''\n  propertyKey = ''\n  propertyValue: string | null = ''\n\n  created(): void {\n    this.shouldSetContactProperty = has(this.block.config, 'set_contact_property')\n    this.propertyKey = get(this.block.config.set_contact_property, 'property_key', '')\n    this.propertyValue = get(this.block.config.set_contact_property, 'property_value', null)\n    if (this.propertyValue === null) {\n      // default setting\n      if (this.isBlockInteractive(this.block)) {\n        // interactive blocks will have `Entry from this block` option by default\n        this.propertyValue = BLOCK_RESPONSE_EXPRESSION\n      } else {\n        // non interactive blocks will have `Expression` option by default\n        this.propertyValue = EMPTY_STRING_EXPRESSION\n      }\n    }\n    this.initPropertyValueAction()\n  }\n\n  isBlockInteractive(block: IBlock): boolean {\n    return isBlockInteractive(block)\n  }\n\n  // for checkbox ######################\n  toggleSetContactProperty(): void {\n    this.shouldSetContactProperty = !this.shouldSetContactProperty\n    if (!this.shouldSetContactProperty) {\n      this.block_removeConfigByKey({blockId: this.block.uuid, key: 'set_contact_property'})\n    } else {\n      this.block_updateConfigByPath({\n        blockId: this.block.uuid,\n        path: 'set_contact_property',\n        value: {\n          property_key: this.propertyKey,\n          property_value: this.shouldUseOpenExpression ? EMPTY_STRING_EXPRESSION : this.propertyValue,\n        } as IBlockConfig,\n      })\n    }\n  }\n\n  // for radio buttons ######################\n  initPropertyValueAction(): void {\n    if (this.propertyValue === BLOCK_RESPONSE_EXPRESSION) {\n      this.propertyValueAction = this.PROPERTY_VALUE_ACTION.FROM_CURRENT_BLOCK_RESPONSE\n    } else {\n      this.propertyValueAction = this.PROPERTY_VALUE_ACTION.OPEN_EXPRESSION\n    }\n  }\n\n  updatePropertyValueAction({target: {value}}: {target: {value: string}}): void {\n    this.propertyValueAction = value\n    if (value === this.PROPERTY_VALUE_ACTION.FROM_CURRENT_BLOCK_RESPONSE) {\n      this.updatePropertyValue(BLOCK_RESPONSE_EXPRESSION)\n    } else {\n      this.updatePropertyValue(EMPTY_STRING_EXPRESSION)\n    }\n  }\n\n  get shouldUseOpenExpression(): boolean {\n    return this.propertyValueAction === this.PROPERTY_VALUE_ACTION.OPEN_EXPRESSION\n  }\n\n  // for input fields ######################\n  updatePropertyKey(value: string): void {\n    this.propertyKey = value\n    this.block_updateConfigByPath({\n      blockId: this.block.uuid,\n      path: 'set_contact_property.property_key',\n      value,\n    })\n  }\n\n  updatePropertyValue(value: string): void {\n    this.propertyValue = value\n    this.block_updateConfigByPath({\n      blockId: this.block.uuid,\n      path: 'set_contact_property.property_value',\n      value,\n    })\n  }\n\n  @flowVuexNamespace.Mutation block_updateConfigByPath!: (\n    {blockId, path, value}: { blockId: string, path: string, value: string | object }\n  ) => void\n  @flowVuexNamespace.Mutation block_updateVendorMetadataByPath!: (\n    {blockId, path, value}: { blockId: string, path: string, value: string }\n  ) => void\n  @flowVuexNamespace.Mutation block_removeConfigByKey!: ({blockId, key}: { blockId: string, key: string}) => void\n}\n\nexport default GenericContactPropertyEditor\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GenericContactPropertyEditor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GenericContactPropertyEditor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./GenericContactPropertyEditor.vue?vue&type=template&id=bb893178&\"\nimport script from \"./GenericContactPropertyEditor.vue?vue&type=script&lang=ts&\"\nexport * from \"./GenericContactPropertyEditor.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"resource-variant-text-editor\"},[_c('div',{staticClass:\"content-editor\",class:{'content-editor-selected': !!_vm.content}},[_c('div',{staticClass:\"input-group\"},[(_vm.label)?_c('div',{staticClass:\"input-group-prepend\"},[_c('span',{staticClass:\"input-group-text\"},[_vm._v(_vm._s(_vm.label))])]):_vm._e(),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.content),expression:\"content\"},{name:\"focus\",rawName:\"v-focus\",value:(_vm.isSelected),expression:\"isSelected\"}],ref:\"input\",staticClass:\"form-control\",attrs:{\"placeholder\":_vm._f(\"trans\")(_vm.placeholder || (\"flow-builder.enter-\" + (_vm.resourceVariant.content_type.toString().toLowerCase()) + \"-content\")),\"rows\":_vm.rows},domProps:{\"value\":(_vm.content)},on:{\"focus\":_vm.select,\"blur\":_vm.deselect,\"input\":function($event){if($event.target.composing){ return; }_vm.content=$event.target.value}}})])]),_c('div',{staticClass:\"content-toolbar\"},[(_vm.isEditable)?_c('span',{staticClass:\"text-muted transition-all\",class:{invisible: !_vm.characterCounter.count}},[_vm._v(\" \"+_vm._s(_vm.characterCounter.count)+\" characters \"),(_vm.mode === 'sms' && _vm.characterCounter.pages > 1)?[_vm._v(\" (\"+_vm._s(_vm.characterCounter.pages)+\" \"+_vm._s(_vm.characterCounter.hasUnicode ? 'unicode pages' : 'pages')+\") \")]:_vm._e()],2):_vm._e(),(_vm.doesContentContainExpression)?_c('a',{directives:[{name:\"b-tooltip\",rawName:\"v-b-tooltip.hover.top.html\",value:((\"<p>\" + (_vm.trans('flow-builder.youre-using-floip-expressions')) + \"</p>\\n                     <p>\\n                       <strong>\" + (_vm.trans('flow-builder.pro-tip')) + \":</strong>\\n                       \" + (_vm.trans('flow-builder.floip-expressions-escape-with-double-at-symbol')) + \"\\n                     </p>\")),expression:\"`<p>${trans('flow-builder.youre-using-floip-expressions')}</p>\\n                     <p>\\n                       <strong>${trans('flow-builder.pro-tip')}:</strong>\\n                       ${trans('flow-builder.floip-expressions-escape-with-double-at-symbol')}\\n                     </p>`\",modifiers:{\"hover\":true,\"top\":true,\"html\":true}}],attrs:{\"href\":\"https://floip.gitbooks.io/flow-specification/content/fundamentals/expressions.html\",\"target\":\"_blank\"}},[_c('kbd',{staticStyle:{\"margin-left\":\"1em\"}},[_c('i',{staticClass:\"glyphicon glyphicon-console\"}),(_vm.doesContentContainExpressionError)?_c('i',{staticClass:\"glyphicon glyphicon glyphicon-remove-sign text-danger\"}):_c('i',{staticClass:\"glyphicon glyphicon-ok-sign text-success\"})])]):_vm._e(),(_vm.doesContentContainExpressionError)?_c('div',{staticClass:\"alert alert-danger\",staticStyle:{\"margin-top\":\"0.5em\"}},[_c('p',[_c('i',{staticClass:\"glyphicon glyphicon-remove-sign\"}),_c('strong',[_c('a',{attrs:{\"href\":\"https://floip.gitbooks.io/flow-specification/content/fundamentals/expressions.html\",\"target\":\"_blank\"}},[_vm._v(\"FLOIP Expression\")]),_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.error-found'))+\" \")])]),_c('p',[_c('em',[_vm._v(\" \"+_vm._s(_vm.contentExpressionAST.message)+\" (\"),(_vm.contentExpressionAST.location.start.line !== 1)?_c('span',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.on-line'))+\" \"+_vm._s(_vm.contentExpressionAST.location.start.line)+\", \")]):_vm._e(),_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.at-character'))+\" \"+_vm._s(_vm.contentExpressionAST.location.start.column)+\") \")])])]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"resource-variant-text-editor\">\n    <div\n      class=\"content-editor\"\n      :class=\"{'content-editor-selected': !!content}\">\n\n      <div class=\"input-group\">\n        <div v-if=\"label\" class=\"input-group-prepend\">\n          <span class=\"input-group-text\">{{label}}</span>\n        </div>\n\n        <textarea\n          ref=\"input\"\n          v-model=\"content\"\n          v-focus=\"isSelected\"\n          :placeholder=\"placeholder || `flow-builder.enter-${resourceVariant.content_type.toString().toLowerCase()}-content` | trans\"\n          class=\"form-control\"\n          :rows=\"rows\"\n          @focus=\"select\"\n          @blur=\"deselect\" />\n      </div>\n\n      <!-- <button @click=\"select\"\n              class=\"btn btn-xs btn-secondary\">\n        <i class=\"glyphicon glyphicon-pencil\"></i>\n      </button> -->\n    </div>\n\n    <div class=\"content-toolbar\">\n      <!--      <block-content-autogen-button-->\n      <!--          v-if=\"enableAutogenButton\"-->\n      <!--          :isEditable=\"isEditable\"-->\n      <!--          :langId=\"langId\"-->\n      <!--          :type=\"type\"-->\n      <!--          :block=\"block\"-->\n      <!--          class=\"pull-right\" />-->\n\n      <span\n        v-if=\"isEditable\"\n        class=\"text-muted transition-all\"\n        :class=\"{invisible: !characterCounter.count}\">\n        {{ characterCounter.count }} characters\n\n        <template v-if=\"mode === 'sms' && characterCounter.pages > 1\">\n          ({{ characterCounter.pages }} {{ characterCounter.hasUnicode ? 'unicode pages' : 'pages' }})\n        </template>\n      </span>\n\n      <a\n        v-if=\"doesContentContainExpression\"\n        v-b-tooltip.hover.top.html=\"`<p>${trans('flow-builder.youre-using-floip-expressions')}</p>\n                     <p>\n                       <strong>${trans('flow-builder.pro-tip')}:</strong>\n                       ${trans('flow-builder.floip-expressions-escape-with-double-at-symbol')}\n                     </p>`\"\n        href=\"https://floip.gitbooks.io/flow-specification/content/fundamentals/expressions.html\"\n        target=\"_blank\">\n\n        <kbd style=\"margin-left: 1em\">\n          <i class=\"glyphicon glyphicon-console\" />\n          <i\n            v-if=\"doesContentContainExpressionError\"\n            class=\"glyphicon glyphicon glyphicon-remove-sign text-danger\" />\n          <i\n            v-else\n            class=\"glyphicon glyphicon-ok-sign text-success\" />\n        </kbd>\n      </a>\n\n      <div\n        v-if=\"doesContentContainExpressionError\"\n        class=\"alert alert-danger\"\n        style=\"\n  margin-top: 0.5em;\n\">\n        <p>\n          <i class=\"glyphicon glyphicon-remove-sign\" />\n          <strong>\n            <a\n              href=\"https://floip.gitbooks.io/flow-specification/content/fundamentals/expressions.html\"\n              target=\"_blank\">FLOIP Expression</a>\n            {{ 'flow-builder.error-found' | trans }}\n          </strong>\n        </p>\n\n        <p>\n          <!-- NOTE: Funky source formatting to mitigate spaces between parens -->\n          <em>\n            {{ contentExpressionAST.message }}\n            (<span v-if=\"contentExpressionAST.location.start.line !== 1\">{{ 'flow-builder.on-line' | trans }}\n              {{ contentExpressionAST.location.start.line }},\n            </span>{{ 'flow-builder.at-character' | trans }} {{ contentExpressionAST.location.start.column }})\n          </em>\n        </p>\n      </div>\n    </div>\n\n    <!--    <template v-if=\"!isEditable\">-->\n    <!--      <p v-if=\"content\">{{content}}</p>-->\n    <!--      <p>-->\n    <!--        <em class=\"text-muted\">{{'flow-builder.no-sms-content-yet' | trans}}</em>-->\n    <!--      </p>-->\n    <!--    </template>-->\n  </div>\n</template>\n\n<script lang=\"js\">\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types,@typescript-eslint/strict-boolean-expressions */\nimport Vue from 'vue'\nimport {lang} from '@/lib/filters/lang'\nimport {parse as floipExpressionParser} from '@floip/expression-parser'\nimport {isObject, some} from 'lodash'\nimport VueFocus from 'vue-focus'\nimport {mapActions} from 'vuex'\nimport {BTooltip} from 'bootstrap-vue'\n\n// import BlockContentAutogenButton from './BlockContentAutogenButton'\n\nVue.component('BTooltip', BTooltip)\n\nexport default {\n  components: {\n    // BlockContentAutogenButton,\n  },\n  mixins: [lang, VueFocus.mixin],\n\n  props: {\n    isEditable: Boolean,\n\n    label: {\n      type: String,\n      default: null,\n    },\n\n    placeholder: {\n      type: String,\n      default: null,\n    },\n\n    resourceId: {\n      type: String,\n      default: null,\n    },\n    resourceVariant: {\n      // as () => IResourceValue\n      type: Object,\n      default: null,\n    },\n    mode: {\n      type: String,\n      default: null,\n    },\n\n    enableAutogenButton: {\n      type: Boolean,\n      default: true,\n    },\n\n    rows: {\n      type: Number,\n      default: 2,\n    },\n\n    // maybe!?\n\n    // block: Object,\n    // langId: [String, Number],\n    // type: String,\n    // pathToTextContent: String,\n  },\n\n  data: () => ({isSelected: false}),\n\n  computed: {\n    content: {\n      get() {\n        return this.resourceVariant.value\n      },\n\n      set(value) {\n        const {resourceId, mode} = this\n        const {language_id: languageId, content_type: contentType} = this.resourceVariant\n\n        this.$emit('beforeResourceVariantChanged', {variant: this.resourceVariant, resourceId})\n        this.resource_setOrCreateValueModeSpecific({\n          resourceId,\n          filter: {language_id: languageId, content_type: contentType, modes: [mode]},\n          value,\n        })\n        this.$emit('afterResourceVariantChanged', {variant: this.resourceVariant, resourceId})\n      },\n    },\n\n    contentExpressionAST() {\n      let ast = []\n\n      try {\n        ast = floipExpressionParser(this.content)\n      } catch (e) {\n        if (e instanceof SyntaxError || e.name === 'SyntaxError') {\n          return e\n        }\n      }\n\n      const hasMembers = some(ast, isObject)\n      return hasMembers\n        ? ast\n        : null\n    },\n\n    doesContentContainExpression() {\n      return !!this.contentExpressionAST\n    },\n\n    doesContentContainExpressionError() {\n      return !!(this.contentExpressionAST instanceof Error)\n    },\n\n    characterCounter() {\n      const\n        hasUnicode = !/^[\\x00-\\x7F]*$/.test(this.content)\n      const count = this.content.length\n\n      console.debug('BlockTextContentEditorForLangAndType', 'characterCounter', {hasUnicode, count})\n\n      return {\n        hasUnicode,\n        count,\n        pages: hasUnicode ? Math.ceil(count / 70) : Math.ceil(count / 160),\n      }\n    },\n  },\n\n  methods: {\n    ...mapActions('flow', ['resource_setOrCreateValueModeSpecific']),\n\n    select() {\n      this.isSelected = true\n    },\n    deselect() {\n      this.isSelected = false\n    },\n\n    // debouncedSaveTree: debounce(function () {\n    //   this.$store.dispatch('attemptSaveTree')\n    // }, 500),\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.resource-variant-text-editor {\n  margin-bottom: 10px;\n}\n\n.block-text-content-editor-for-lang-and-type {\n  margin-bottom: 0.5em;\n\n  .content-editor {\n    position: relative;\n\n    textarea {\n      height: 56px;\n    }\n\n    textarea, input[type=\"text\"] {\n      &:not(:focus) {\n        + button {\n          opacity: 1;\n        }\n      }\n\n      + button {\n        position: absolute;\n        bottom: 7px;\n        // 15px padding => parent, 8px padding => textarea\n        right: 10px; //15px + 7px;\n\n        transition: opacity 200ms ease-in-out;\n        opacity: 0;\n      }\n    }\n\n    &-selected {\n      textarea, input[type=\"text\"] {\n        background-color: #F8F8F8;\n        //border-color: #DDDDDD;\n      }\n    }\n  }\n\n  .content-toolbar {\n    margin-top: 1px;\n  }\n}\n\n.invisible {\n  opacity: 0;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceVariantTextEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceVariantTextEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ResourceVariantTextEditor.vue?vue&type=template&id=0ce279b0&scoped=true&\"\nimport script from \"./ResourceVariantTextEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./ResourceVariantTextEditor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ResourceVariantTextEditor.vue?vue&type=style&index=0&id=0ce279b0&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0ce279b0\",\n  null\n  \n)\n\nexport default component.exports","// extracted by mini-css-extract-plugin","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceEditor.vue?vue&type=style&index=0&id=60c13a2a&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceEditor.vue?vue&type=style&index=0&id=60c13a2a&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PhoneRecordingRecorderSelector.vue?vue&type=style&index=0&id=41756c06&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PhoneRecordingRecorderSelector.vue?vue&type=style&index=0&id=41756c06&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioLibrarySearchField.vue?vue&type=style&index=0&id=22499358&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioLibrarySearchField.vue?vue&type=style&index=0&id=22499358&lang=scss&scoped=true&\""],"sourceRoot":""}