{"version":3,"sources":["webpack://flow-builder/./src/components/interaction-designer/resource-editors/ResourceVariantTextEditor.vue?2a4f","webpack://flow-builder/./src/components/interaction-designer/resource-editors/ResourceEditor.vue?a9b4","webpack://flow-builder/./src/components/interaction-designer/resource-editors/ResourceEditor.vue?b1ac","webpack://flow-builder/./src/lib/mixins/FlowUploader.ts","webpack://flow-builder/./src/components/common/AudioLibrarySelector.vue?962f","webpack://flow-builder/./src/components/common/AudioLibrarySearchField.vue?1c60","webpack://flow-builder/src/components/common/AudioLibrarySearchField.vue","webpack://flow-builder/./src/components/common/AudioLibrarySearchField.vue?ee7b","webpack://flow-builder/./src/components/common/AudioLibrarySearchField.vue","webpack://flow-builder/./src/components/common/AudioLibrarySelection.vue?fb3e","webpack://flow-builder/./src/lib/filters/moment.js","webpack://flow-builder/src/components/common/AudioLibrarySelection.vue","webpack://flow-builder/./src/components/common/AudioLibrarySelection.vue?6f6d","webpack://flow-builder/./src/components/common/AudioLibrarySelection.vue","webpack://flow-builder/src/components/common/AudioLibrarySelector.vue","webpack://flow-builder/./src/components/common/AudioLibrarySelector.vue?7c7e","webpack://flow-builder/./src/components/common/AudioLibrarySelector.vue","webpack://flow-builder/./src/components/interaction-designer/block-editors/PhoneRecorder.vue?2308","webpack://flow-builder/./src/components/interaction-designer/block-editors/PhoneRecordingRecorderSelector.vue?be84","webpack://flow-builder/src/components/interaction-designer/block-editors/PhoneRecordingRecorderSelector.vue","webpack://flow-builder/./src/components/interaction-designer/block-editors/PhoneRecordingRecorderSelector.vue?cb6f","webpack://flow-builder/./src/components/interaction-designer/block-editors/PhoneRecordingRecorderSelector.vue","webpack://flow-builder/src/components/interaction-designer/block-editors/PhoneRecorder.vue","webpack://flow-builder/./src/components/interaction-designer/block-editors/PhoneRecorder.vue?f192","webpack://flow-builder/./src/components/interaction-designer/block-editors/PhoneRecorder.vue","webpack://flow-builder/./src/components/interaction-designer/block-editors/UploadMonitor.vue?de9e","webpack://flow-builder/./src/store/trees/multimediaUpload.js","webpack://flow-builder/src/components/interaction-designer/block-editors/UploadMonitor.vue","webpack://flow-builder/./src/components/interaction-designer/block-editors/UploadMonitor.vue?3e85","webpack://flow-builder/./src/components/interaction-designer/block-editors/UploadMonitor.vue","webpack://flow-builder/./src/components/interaction-designer/resource-editors/ResourceEditor.vue?e48e","webpack://flow-builder/./src/components/interaction-designer/resource-editors/ResourceEditor.vue?d175","webpack://flow-builder/./src/components/interaction-designer/resource-editors/ResourceEditor.vue","webpack://flow-builder/./src/components/common/AudioLibrarySelection.vue?e1be","webpack://flow-builder/./src/components/common/AudioLibrarySelection.vue?3262","webpack://flow-builder/./src/components/interaction-designer/block-editors/PhoneRecordingRecorderSelector.vue?b272","webpack://flow-builder/./src/components/interaction-designer/block-editors/UploadMonitor.vue?4e06","webpack://flow-builder/./src/components/common/AudioLibrarySearchField.vue?2231","webpack://flow-builder/./src/components/interaction-designer/block-editors/UploadMonitor.vue?01cb","webpack://flow-builder/./src/components/interaction-designer/resource-editors/ResourceVariantTextEditor.vue?5a72","webpack://flow-builder/./src/components/interaction-designer/block-editors/GenericContactPropertyEditor.vue?6a25","webpack://flow-builder/./src/components/interaction-designer/block-editors/GenericContactPropertyEditor.vue?1af7","webpack://flow-builder/./src/components/interaction-designer/block-editors/GenericContactPropertyEditor.vue?e20a","webpack://flow-builder/./src/components/interaction-designer/block-editors/GenericContactPropertyEditor.vue","webpack://flow-builder/./src/components/interaction-designer/resource-editors/ResourceEditor.vue?b8e4","webpack://flow-builder/./src/components/interaction-designer/block-editors/UploadMonitor.vue?533d","webpack://flow-builder/./src/components/interaction-designer/resource-editors/ResourceVariantTextEditor.vue?a1b1","webpack://flow-builder/src/components/interaction-designer/resource-editors/ResourceVariantTextEditor.vue","webpack://flow-builder/./src/components/interaction-designer/resource-editors/ResourceVariantTextEditor.vue?10f7","webpack://flow-builder/./src/components/interaction-designer/resource-editors/ResourceVariantTextEditor.vue","webpack://flow-builder/./src/components/common/AudioLibrarySelection.vue?a41f","webpack://flow-builder/./src/components/interaction-designer/block-editors/PhoneRecordingRecorderSelector.vue?c6bf","webpack://flow-builder/./src/components/interaction-designer/resource-editors/ResourceVariantTextEditor.vue?2c3c","webpack://flow-builder/./src/components/interaction-designer/resource-editors/ResourceEditor.vue?942e","webpack://flow-builder/./src/components/common/AudioLibrarySearchField.vue?183a","webpack://flow-builder/./src/components/common/AudioLibrarySearchField.vue?ac95","webpack://flow-builder/./src/components/interaction-designer/block-editors/PhoneRecordingRecorderSelector.vue?a50c"],"names":["___CSS_LOADER_API_IMPORT___","exports","push","module","i","render","_vm","this","_h","$createElement","_c","_self","flow","languages","length","staticClass","_v","_s","label","_e","_l","ref","languageId","id","language","key","attrs","_f","mode","iconsMap","get","class","toLowerCase","discoverContentTypesFor","contentType","SupportedContentType","TEXT","resource","uuid","findOrGenerateStubbedVariantOn","language_id","content_type","modes","AUDIO","availableAudio","value","can","block","findAudioResourceVariantFor","isEditable","isFeatureAudioUploadEnabled","directives","name","rawName","target","route","token","accept","expression","on","$event","handleFilesSubmittedFor","handleFileSuccessFor","preventDefault","triggerRecordViaPhoneFor","staticRenderFns","el","data","dispatchEvent","extend","Event","bubbles","cancelable","bind","binding","upload_token","uploader","singleFile","chunkSize","query","support","style","overflow","assignBrowse","chain","children","find","tagName","type","assign","files","e","file","json","message","unbind","selectedAudioFile","langId","clearSelection","audioFiles","selectAudioFile","isEntireLibraryModeEnabled","domProps","activate","deactivate","composing","rawQuery","resetPagination","active","toggleAudioLibrary","apply","arguments","isAudioLibraryEmpty","search","slice","offset","limit","audio","select","description","hasPrevious","hasNext","disabled","decrementPage","incrementPage","mixins","props","isActive","cache","computed","methods","console","debug","$emit","component","selectable","clear","_m","audioFileUrl","filters","formatDate","date","format","moment","utc","fromNow","withoutSuffix","formatDuration","duration","unit","withSuffix","currentLocale","locale","result","humanize","formatDurationLocalized","lang","audioFile","components","AudioLibrarySearchField","AudioLibrarySelection","resource_setOrCreateValueModeSpecific","resourceId","filter","isRecorderSelectorVisible","handleRecorderSelectionChanged","model","callback","$$v","callConfig","isModalVisible","handleModalClosed","handleModalCancelled","recorder","_q","selectedRecorder","setSelectedRecorder","phone","draft","selectNewRecorder","$set","BModal","Boolean","created","reset","isNew","PhoneRecordingRecorderSelector","$store","commit","recordingKey","dispatch","upload","progress","hasProgress","_t","Statuses","UPLOADING","UNINITIALIZED","SUCCESS","FAILURE","namespaced","state","uploadProgressByKey","errorMessageByKey","uploadsById","uploadIdsByKey","mutations","setErrorMessage","errorMessage","Vue","set","setUploadProgress","uploadProgress","setUploadStatusFor","fileWithRefs","status","cancel","lodash","pick","uniqueIdentifier","actions","uploadFile","uploadUrl","formDataFields","onSuccess","onError","Error","formData","FormData","forEach","config","onUploadProgress","progressEvent","Math","floor","loaded","total","axios","post","then","response","catch","error","uploadFiles","_","parseInt","JSON","parse","status_description","uploadKey","isFailure","multimediaUpload","use","flowVuexNamespace","builderVuexNamespace","Map","SMS","USSD","IVR","RICH_MESSAGING","OFFLINE","isVisible","event","audio_file_id","filename","audio_uuid","created_at","duration_seconds","extension","split","uploadedAudio","original_extension","blur","pushAudioIntoLibrary","ValidationException","Permissions","Routes","required","Action","Getter","AudioLibrarySelector","ResourceVariantTextEditor","UploadMonitor","PhoneRecorder","content","locals","add","default","shouldSetContactProperty","toggleSetContactProperty","scopedSlots","_u","fn","isValid","propertyKey","updatePropertyKey","isBlockInteractive","propertyValueAction","PROPERTY_VALUE_ACTION","FROM_CURRENT_BLOCK_RESPONSE","updatePropertyValueAction","OPEN_EXPRESSION","propertyValue","updatePropertyValue","EMPTY_STRING_EXPRESSION","BLOCK_RESPONSE_EXPRESSION","set_contact_property","initPropertyValueAction","block_updateConfigByPath","blockId","path","property_key","property_value","shouldUseOpenExpression","block_removeConfigByKey","Mutation","TextEditor","ExpressionInput","ValidationMessage","placeholder","resourceVariant","toString","rows","deselect","invisible","characterCounter","count","pages","hasUnicode","trans","modifiers","staticStyle","contentExpressionAST","location","start","line","column","String","Object","enableAutogenButton","Number","ast","SyntaxError","hasMembers","doesContentContainExpression","doesContentContainExpressionError","ceil","isSelected"],"mappings":"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","file":"flow-builder.umd.min.2.js","sourcesContent":["import mod from \"-!../../../../node_modules/vue-style-loader/index.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceVariantTextEditor.vue?vue&type=style&index=0&id=0ce279b0&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceVariantTextEditor.vue?vue&type=style&index=0&id=0ce279b0&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".tab-content-style[data-v-dd0260a8]{background:#f4f4f4;padding:10px}.ivr-buttons[data-v-dd0260a8]{font-size:small;flex-grow:1}.custom-icons[data-v-dd0260a8]{height:1.25em;width:1.25em}.library-icons[data-v-dd0260a8]{margin-top:2px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.flow.languages.length > 0)?_c('div',{staticClass:\"resource-editor\"},[_c('hr'),(_vm.label)?_c('h4',[_vm._v(\" \"+_vm._s(_vm.label)+\" \")]):_vm._e(),_c('div',[_c('b-tabs',_vm._l((_vm.flow.languages),function(ref){\nvar languageId = ref.id;\nvar language = ref.label;\nreturn _c('b-tab',{key:languageId,attrs:{\"title\":_vm._f(\"trans\")(language || 'flow-builder.unknown-language'),\"active\":\"\"}},_vm._l((_vm.flow.supported_modes),function(mode,i){return _c('div',{key:i,staticClass:\"tab-content-style\"},[_c('header',{staticClass:\"d-flex\"},[(_vm.iconsMap.get(mode))?_c('font-awesome-icon',{class:{'custom-icons': _vm.iconsMap.get(mode)[0] === 'fac', 'library-icons': _vm.iconsMap.get(mode)[0] !== 'fac'},attrs:{\"icon\":_vm.iconsMap.get(mode)}}):_vm._e(),_c('h6',{staticClass:\"ml-1\"},[_vm._v(_vm._s(_vm._f(\"trans\")((\"flow-builder.\" + (mode.toLowerCase()) + \"-content\"))))])],1),_vm._l((_vm.discoverContentTypesFor(mode)),function(contentType){return [(contentType === _vm.SupportedContentType.TEXT)?_c('resource-variant-text-editor',{attrs:{\"resource-id\":_vm.resource.uuid,\"resource-variant\":_vm.findOrGenerateStubbedVariantOn(\n                _vm.resource,\n                {language_id: languageId, content_type: contentType, modes: [mode]}),\"mode\":mode,\"enable-autogen-button\":true || _vm.enableAutogenButton}}):_vm._e(),(contentType === _vm.SupportedContentType.AUDIO)?_c('div',[_c('audio-library-selector',{attrs:{\"audio-files\":_vm.availableAudio,\"lang-id\":languageId,\"resource-id\":_vm.resource.uuid,\"selected-audio-file\":_vm.findOrGenerateStubbedVariantOn(\n                  _vm.resource,\n                  {language_id: languageId, content_type: contentType, modes: [mode]}).value}}),(_vm.can(['edit-content', 'send-call-to-records'], true) && !_vm.findOrGenerateStubbedVariantOn(_vm.resource,{language_id: languageId, content_type: contentType, modes: [mode]}).value)?_c('phone-recorder',{attrs:{\"recording-key\":((_vm.block.uuid) + \":\" + languageId)}}):_vm._e(),(!_vm.findAudioResourceVariantFor(_vm.resource, {language_id: languageId, content_type: contentType, modes: [mode]}))?[_c('upload-monitor',{attrs:{\"upload-key\":((_vm.block.uuid) + \":\" + languageId)}}),_c('div',{staticClass:\"d-flex mt-2\"},[(_vm.isEditable && _vm.isFeatureAudioUploadEnabled)?_c('button',{directives:[{name:\"flow-uploader\",rawName:\"v-flow-uploader\",value:({\n                      target: _vm.route('trees.resumeableAudioUpload'),\n                      token: (\"\" + (_vm.block.uuid) + languageId),\n                      accept: 'audio/*'}),expression:\"{\\n                      target: route('trees.resumeableAudioUpload'),\\n                      token: `${block.uuid}${languageId}`,\\n                      accept: 'audio/*'}\"}],staticClass:\"btn btn-primary ivr-buttons\",on:{\"filesSubmitted\":function($event){return _vm.handleFilesSubmittedFor(((_vm.block.uuid) + \":\" + languageId), $event)},\"fileSuccess\":function($event){return _vm.handleFileSuccessFor(((_vm.block.uuid) + \":\" + languageId), languageId, $event)}}},[_c('font-awesome-icon',{staticClass:\"fa-btn\",attrs:{\"icon\":['fac', 'upload']}}),_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.upload-audio'))+\" \")],1):_vm._e(),(_vm.can(['edit-content', 'send-call-to-records'], true) && _vm.isFeatureAudioUploadEnabled)?_c('button',{staticClass:\"btn btn-primary ivr-buttons ml-2\",on:{\"click\":function($event){$event.preventDefault();return _vm.triggerRecordViaPhoneFor(languageId)}}},[_c('font-awesome-icon',{staticClass:\"fa-btn\",attrs:{\"icon\":['fac', 'record-audio']}}),_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.record-audio'))+\" \")],1):_vm._e()])]:_vm._e()],2):_vm._e()]})],2)}),0)}),1)],1)]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Vue from 'vue'\nimport Flow from '@flowjs/flow.js'\nimport lodash from 'lodash'\nimport Component from 'vue-class-component'\n\nconst dispatch = (el: any, name: string, data: any) => {\n  el.dispatchEvent(lodash.extend(new Event(name, {\n    bubbles: true,\n    cancelable: true,\n  }), {data}))\n}\n\n@Component({\n  directives: {\n    'flow-uploader': {\n      /**\n       * This binding provides a bridge between Flow and vuejs such that we can continue using our resumable backend\n       */\n      bind(el, binding) {\n        const {\n          accept,\n          target,\n          token: upload_token,\n        } = binding.value\n        const uploader = new Flow({\n          target,\n          singleFile: true,\n          // kbytes, chunked?  ¯\\_(ツ)_/¯\n          chunkSize: 1024 * 512,\n          query: {upload_token},\n        })\n\n        if (!uploader.support) {\n          // Your browser doesn't support HTML5 uploads; please try Firefox or Chrome.\n          return\n        }\n\n        lodash.extend(el.style, {overflow: 'hidden'})\n        uploader.assignBrowse(el)\n\n        lodash.chain(el.children)\n          .find({\n            tagName: 'INPUT',\n            type: 'file',\n          } as any)\n          .assign({accept})\n          .value()\n\n        // todo: migrate to proxied catch-all handler (voto5 legacy todo)\n        // uploader.on('catchAll', (name, file/*or files*/, e) => console.debug(name))\n\n        // todo: when do we call upload on a multiselect-upload and file-added triggered multiple times? (voto5 legacy todo)\n        // uploader.upload()\n        // uploader.on('fileAdded', (file, e) => dispatch(el, 'filesSubmitted', {file, uploader}))\n        // @ts-ignore\n        uploader.on('filesSubmitted', (files: any, e: any) => dispatch(el, 'filesSubmitted', {\n          files,\n          uploader,\n          // uploader.upload()\n        }))\n        // @ts-ignore\n        uploader.on('fileProgress', (file: any, e: any) => dispatch(el, 'fileProgress', {\n          file,\n          uploader,\n        }))\n        uploader.on('fileSuccess', (file: any, json: any) => dispatch(el, 'fileSuccess', {\n          file,\n          uploader,\n          json,\n          // uploader.cancel()\n        }))\n        uploader.on('error', (message: string, file: any) => dispatch(el, 'fileSuccess', {\n          file,\n          uploader,\n          message,\n          // uploader.cancel()\n        }))\n      },\n\n      // @ts-ignore\n      unbind(el, binding) {\n      },\n    },\n  },\n})\nexport default class FlowUploader extends Vue {\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"audio-library-selector\"},[(_vm.selectedAudioFile)?_c('audio-library-selection',{attrs:{\"audio-file\":_vm.selectedAudioFile,\"lang-id\":_vm.langId},on:{\"clear\":_vm.clearSelection}}):[_c('audio-library-search-field',{attrs:{\"lang-id\":_vm.langId,\"audio-files\":_vm.audioFiles},on:{\"select\":_vm.selectAudioFile}})]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"audio-library-search-field dropdown\"},[_c('div',{staticClass:\"input-group\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.rawQuery),expression:\"rawQuery\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":_vm._f(\"trans\")('flow-builder.search-audio-library'),\"disabled\":_vm.isEntireLibraryModeEnabled},domProps:{\"value\":(_vm.rawQuery)},on:{\"focus\":_vm.activate,\"blur\":_vm.deactivate,\"input\":[function($event){if($event.target.composing){ return; }_vm.rawQuery=$event.target.value},_vm.resetPagination]}}),_c('span',{staticClass:\"input-group-append\"},[_c('button',{staticClass:\"btn btn-primary dropdown-toggle\",class:{active: _vm.isEntireLibraryModeEnabled},on:{\"click\":function($event){$event.preventDefault();return _vm.toggleAudioLibrary.apply(null, arguments)}}},[_c('i',{staticClass:\"glyphicon glyphicon-search\"})])])]),(_vm.query || _vm.isAudioLibraryEmpty || _vm.isEntireLibraryModeEnabled)?_c('div',{staticClass:\"dropdown-menu\"},[(_vm.isEntireLibraryModeEnabled)?[_c('a',{staticClass:\"disabled dropdown-item\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();}}},[_c('button',{staticClass:\"close active\",on:{\"click\":_vm.toggleAudioLibrary}},[_vm._v(\"x \")]),_c('i',{staticClass:\"glyphicon glyphicon-info-sign\"}),_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.showing-entire-audio-library'))+\"… \")]),_c('div',{staticClass:\"dropdown-divider\",attrs:{\"role\":\"separator\"}})]:_vm._e(),(!_vm.isAudioLibraryEmpty)?[_vm._l((_vm.search(_vm.query).slice(_vm.offset * _vm.limit, (_vm.offset + 1) * _vm.limit)),function(audio){return _c('a',{staticClass:\"dropdown-item\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.select(audio)}}},[_vm._v(\" \"+_vm._s(audio.description)+\" \")])}),(_vm.query.length >= 3 && !_vm.search(_vm.query).length)?_c('a',{staticClass:\"disabled dropdown-item\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();}}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.no-audio-files-found-for-X'))+\" \\\"\"),_c('em',[_vm._v(_vm._s(_vm.query))]),_vm._v(\"\\\". \")]):_vm._e(),(_vm.query && _vm.query.length < 3)?_c('a',{staticClass:\"disabled dropdown-item\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();}}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.enter-at-least-three-chars'))+\" \")]):_vm._e(),(_vm.hasPrevious || _vm.hasNext)?[_c('div',{staticClass:\"dropdown-divider\",attrs:{\"role\":\"separator\"}}),_c('div',{staticClass:\"pagers dropdown-item\"},[_c('a',{staticClass:\"col-md-6\",class:{disabled: !_vm.hasPrevious},attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.decrementPage.apply(null, arguments)}}},[_c('i',{staticClass:\"glyphicon glyphicon-chevron-left\"}),_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.previous'))+\" \")]),_c('a',{staticClass:\"col-md-6 text-right\",class:{disabled: !_vm.hasNext},attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.incrementPage.apply(null, arguments)}}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.next'))+\" \"),_c('i',{staticClass:\"glyphicon glyphicon-chevron-right\"})])])]:_vm._e()]:_vm._e(),(_vm.isAudioLibraryEmpty)?_c('a',{staticClass:\"disabled dropdown-item\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();}}},[_c('i',{staticClass:\"glyphicon glyphicon-warning-sign\"}),_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.audio-lib-empty-for-this-org'))+\" \")]):_vm._e()],2):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"audio-library-search-field dropdown\">\n    <div class=\"input-group\">\n      <input\n        v-model=\"rawQuery\"\n        type=\"text\"\n        :placeholder=\"'flow-builder.search-audio-library' | trans\"\n        :disabled=\"isEntireLibraryModeEnabled\"\n        class=\"form-control\"\n        @focus=\"activate\"\n        @blur=\"deactivate\"\n        @input=\"resetPagination\">\n\n      <span class=\"input-group-append\">\n        <button\n          :class=\"{active: isEntireLibraryModeEnabled}\"\n          class=\"btn btn-primary dropdown-toggle\"\n          @click.prevent=\"toggleAudioLibrary\">\n          <i class=\"glyphicon glyphicon-search\" />\n        </button>\n      </span>\n    </div>\n\n    <div\n      v-if=\"query || isAudioLibraryEmpty || isEntireLibraryModeEnabled\"\n      class=\"dropdown-menu\">\n      <template v-if=\"isEntireLibraryModeEnabled\">\n        <a\n          href=\"#\"\n          class=\"disabled dropdown-item\"\n          @click.prevent=\"\">\n          <button\n            class=\"close active\"\n            @click=\"toggleAudioLibrary\">x\n          </button>\n\n          <i class=\"glyphicon glyphicon-info-sign\" />\n          {{ 'flow-builder.showing-entire-audio-library'|trans }}&hellip;\n        </a>\n        <div\n          role=\"separator\"\n          class=\"dropdown-divider\" />\n      </template>\n\n      <template v-if=\"!isAudioLibraryEmpty\">\n        <a\n          v-for=\"audio in search(query).slice(offset * limit, (offset + 1) * limit)\"\n          class=\"dropdown-item\"\n          href=\"#\"\n          @click.prevent=\"select(audio)\">\n          {{ audio.description }}\n        </a>\n        <a\n          v-if=\"query.length >= 3 && !search(query).length\"\n          class=\"disabled dropdown-item\"\n          href=\"#\"\n          @click.prevent=\"\">\n          {{ 'flow-builder.no-audio-files-found-for-X' | trans }} \"<em>{{ query }}</em>\".\n        </a>\n        <a\n          v-if=\"query && query.length < 3\"\n          class=\"disabled dropdown-item\"\n          href=\"#\"\n          @click.prevent=\"\">\n          {{ 'flow-builder.enter-at-least-three-chars' | trans }}\n        </a>\n\n        <template v-if=\"hasPrevious || hasNext\">\n          <div\n            role=\"separator\"\n            class=\"dropdown-divider\" />\n\n          <div class=\"pagers dropdown-item\">\n            <a\n              href=\"#\"\n              :class=\"{disabled: !hasPrevious}\"\n              class=\"col-md-6\"\n              @click.prevent=\"decrementPage\">\n              <i class=\"glyphicon glyphicon-chevron-left\" />\n              {{ 'flow-builder.previous' | trans }}\n            </a>\n\n            <a\n              href=\"#\"\n              :class=\"{disabled: !hasNext}\"\n              class=\"col-md-6 text-right\"\n              @click.prevent=\"incrementPage\">\n              {{ 'flow-builder.next' | trans }}\n              <i class=\"glyphicon glyphicon-chevron-right\" />\n            </a>\n          </div>\n        </template>\n      </template>\n\n      <a\n        v-if=\"isAudioLibraryEmpty\"\n        class=\"disabled dropdown-item\"\n        href=\"#\"\n        @click.prevent=\"\">\n        <i class=\"glyphicon glyphicon-warning-sign\" />\n        {{ 'flow-builder.audio-lib-empty-for-this-org' | trans }}\n      </a>\n    </div>\n  </div>\n</template>\n\n<script lang=\"js\">\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types,@typescript-eslint/strict-boolean-expressions */\nimport fuse from 'fuse.js'\nimport {trim} from 'lodash'\nimport VueFocus from 'vue-focus'\nimport {lang} from '@/lib/filters/lang'\n\nexport default {\n  mixins: [VueFocus.mixin, lang],\n  props: ['langId', 'audioFiles'],\n\n  data() {\n    return {\n      isActive: false,\n\n      // querying\n      rawQuery: '',\n      cache: {},\n      isEntireLibraryModeEnabled: false,\n\n      // pagination\n      offset: 0,\n      limit: 10,\n    }\n  },\n\n  computed: {\n    query() {\n      return trim(this.rawQuery)\n    },\n\n    isAudioLibraryEmpty() {\n      return this.isActive && !this.audioFiles.length\n    },\n\n    hasNext() {\n      return (this.search(this.query).length / (this.offset + 1)) > this.limit\n    },\n\n    hasPrevious() {\n      return this.offset > 0\n    },\n  },\n\n  methods: {\n    search(query) {\n      if (this.isEntireLibraryModeEnabled) {\n        return this.audioFiles\n      }\n\n      if (query.length < 3) {\n        return []\n      }\n\n      console.debug('flow-builder.ResourceViewer.AudioLibrarySearchField', 'searching', query)\n\n      if (query in this.cache) {\n        console.debug('flow-builder.ResourceViewer.AudioLibrarySearchField', 'cache hit', query)\n        return this.cache[query]\n      }\n\n      console.debug('flow-builder.ResourceViewer.AudioLibrarySearchField', 'cache miss', query)\n\n      const keys = ['filename', 'description']\n      this.cache[query] = new fuse(this.audioFiles, {keys}).search(query)\n      return this.cache[query]\n    },\n\n    // todo: push pagination into isolated component\n    incrementPage() {\n      if (this.hasNext) {\n        this.offset += 1\n      }\n    },\n\n    decrementPage() {\n      if (this.hasPrevious) {\n        (this.offset -= 1)\n      }\n    },\n\n    resetPagination() {\n      this.offset = 0\n    },\n\n    toggleAudioLibrary() {\n      this.isEntireLibraryModeEnabled = !this.isEntireLibraryModeEnabled\n      this.resetPagination()\n    },\n\n    select(audio) {\n      this.$emit('select', {value: audio, langId: this.langId})\n    },\n\n    activate() {\n      this.isActive = true\n    },\n\n    deactivate() {\n      this.isActive = false\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.audio-library-search-field {\n  &.dropdown {\n    .dropdown-menu {\n      display: block;\n      min-width: 100%;\n\n      > li.pagers > a {\n        clear: none;\n        margin-top: 0;\n        margin-bottom: 0;\n        padding-top: 0.5em;\n        padding-bottom: 0.5em;\n\n        &.disabled {\n          text-decoration: none;\n          background-color: transparent;\n          background-image: none;\n          filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);\n          cursor: not-allowed;\n          color: #777777;\n        }\n      }\n    }\n  }\n}\n\n.close {\n  pointer-events: auto;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioLibrarySearchField.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioLibrarySearchField.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AudioLibrarySearchField.vue?vue&type=template&id=22499358&scoped=true&\"\nimport script from \"./AudioLibrarySearchField.vue?vue&type=script&lang=js&\"\nexport * from \"./AudioLibrarySearchField.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AudioLibrarySearchField.vue?vue&type=style&index=0&id=22499358&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"22499358\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"well well-sm audio-library-selection\",class:{\n    'tree-audio-control-text-container-selectable': _vm.selectable,\n    'tree-audio-control-text-container-selected': !_vm.selectable},attrs:{\"data-audio-file-container-language\":_vm.langId}},[_c('button',{staticClass:\"audio-library-selection-clear-selection btn-ghost pull-right\",on:{\"click\":function($event){$event.preventDefault();return _vm.clear.apply(null, arguments)}}},[_c('i',{staticClass:\"glyphicon glyphicon-remove\"})]),_c('div',{staticClass:\"btn-group audio-library-selection-download-dropdown\"},[_vm._m(0),_c('ul',{staticClass:\"dropdown-menu dropdown-menu-right\"},[_c('li',[_c('a',{staticClass:\"tree-block-audio-files-download-original\",attrs:{\"href\":_vm.audioFileUrl,\"target\":\"_blank\"}},[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.original-file')))])])])]),_c('p',{staticClass:\"audio-file-description\",attrs:{\"title\":_vm.audioFileUrl}},[_vm._v(\" \"+_vm._s(_vm.audioFileUrl)+\" \")]),_c('div',{staticClass:\"btn-toolbar\"},[(_vm.selectable)?_c('button',{staticClass:\"btn btn-secondary btn-xs\",on:{\"click\":function($event){$event.preventDefault();return _vm.select.apply(null, arguments)}}},[_c('i',{staticClass:\"glyphicon glyphicon-ok\"})]):_vm._e()])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"btn btn-ghost dropdown-toggle\",attrs:{\"type\":\"button\",\"data-toggle\":\"dropdown\"}},[_c('span',{staticClass:\"glyphicon glyphicon-download-alt\",attrs:{\"aria-hidden\":\"true\"}}),_c('span',{staticClass:\"caret\"})])}]\n\nexport { render, staticRenderFns }","import moment from 'moment'\n\nexport default {\n  filters: {\n    formatDate(date, format = 'llll') {\n      if (!date) {\n        return ''\n      }\n      return moment.utc(date)\n        .format(format)\n    },\n\n    fromNow(date, withoutSuffix) {\n      return moment.utc(date)\n        .fromNow(withoutSuffix)\n    },\n\n    formatDuration(duration, unit = 'seconds', withSuffix) {\n      const currentLocale = moment.locale()\n      // this function only gets used in english.\n      moment.locale('en')\n      const result = moment.duration(duration, unit)\n        .humanize(withSuffix)\n      moment.locale(currentLocale)\n      return result\n    },\n\n    formatDurationLocalized(duration, locale, unit = 'seconds', withSuffix) {\n      const currentLocale = moment.locale()\n      moment.locale(locale)\n      const result = moment.duration(duration, unit)\n        .humanize(withSuffix)\n      moment.locale(currentLocale)\n      return result\n    },\n  },\n}\n","<template>\n  <div\n    class=\"well well-sm audio-library-selection\"\n    :data-audio-file-container-language=\"langId\"\n    :class=\"{\n      'tree-audio-control-text-container-selectable': selectable,\n      'tree-audio-control-text-container-selected': !selectable}\">\n    <button\n      class=\"audio-library-selection-clear-selection btn-ghost pull-right\"\n      @click.prevent=\"clear\">\n      <i class=\"glyphicon glyphicon-remove\" />\n    </button>\n\n    <div class=\"btn-group audio-library-selection-download-dropdown\">\n      <button\n        type=\"button\"\n        class=\"btn btn-ghost dropdown-toggle\"\n        data-toggle=\"dropdown\">\n        <span\n          class=\"glyphicon glyphicon-download-alt\"\n          aria-hidden=\"true\" />\n        <span class=\"caret\" />\n      </button>\n\n      <ul class=\"dropdown-menu dropdown-menu-right\">\n        <li>\n          <a\n            :href=\"audioFileUrl\"\n            target=\"_blank\"\n            class=\"tree-block-audio-files-download-original\">{{ 'flow-builder.original-file'|trans }}</a>\n        </li>\n\n        <!-- <li><a :href=\"`/audiofiles/download/${audioFile.filename}/ogg`\" target=\"_blank\" class=\"tree-block-audio-files-download-ogg\">{{'flow-builder.download-X-format'|trans({kind: '.ogg'})}}</a></li>\n        <li><a :href=\"`/audiofiles/download/${audioFile.filename}/ul`\" target=\"_blank\" class=\"tree-block-audio-files-download-ul\">{{'flow-builder.download-X-format'|trans({kind: '.ul'})}}</a></li> -->\n      </ul>\n    </div>\n\n    <p\n      class=\"audio-file-description\"\n      :title=\"audioFileUrl\">\n      {{ audioFileUrl }}\n    </p>\n\n    <div class=\"btn-toolbar\">\n      <!--      <vue-audio :file=\"audioFileUrl\"></vue-audio>-->\n\n      <button\n        v-if=\"selectable\"\n        class=\"btn btn-secondary btn-xs\"\n        @click.prevent=\"select\">\n        <i class=\"glyphicon glyphicon-ok\" />\n      </button>\n    </div>\n  </div>\n</template>\n\n<script lang=\"js\">\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types,@typescript-eslint/strict-boolean-expressions */\nimport {lang} from '@/lib/filters/lang'\nimport momentFilters from '@/lib/filters/moment'\n\nexport default {\n\n  mixins: [lang, momentFilters],\n  props: ['audioFile', 'selected', 'selectable', 'langId'],\n\n  computed: {\n    audioFileUrl() {\n      return this.audioFile\n    },\n  },\n\n  methods: {\n    select() {\n      this.$emit('select')\n    },\n\n    clear() {\n      this.$emit('clear')\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\">\n.btn-ghost {\n  background: transparent;\n  border: none;\n}\n\n.audio-library-selection {\n  position: relative;\n  background-color: transparent !important;\n  background-image: none !important;\n  border-color: #cccccc !important;\n\n  .audio-library-selection-download-dropdown {\n    position: absolute;\n    right: 1.6em;\n    top: 50%;\n    margin-top: -8px;\n    color: #888888;\n\n    svg {\n      vertical-align: middle;\n    }\n  }\n\n  .audio-library-selection-clear-selection {\n    margin-right: -7px;\n  }\n\n  .audio-file-description {\n    text-overflow: ellipsis;\n    overflow: hidden;\n    margin-bottom: 3px;\n  }\n\n  .vue-sound-wrapper {\n    margin-bottom: 8px;\n    margin-left: 1em;\n\n    .vue-sound__player {\n      .icon-play3, .icon-pause2 {\n        font-size: 130%;\n        color: #888888;\n      }\n\n      .icon-play3:hover, .icon-pause2:hover {\n        color: black;\n        text-decoration: none;\n      }\n\n      .icon-stop2, .icon-download, .icon-volume-high, .volume-toggle {\n        display: none !important;\n      }\n\n      .vue-sound__playback-time-current, .vue-sound__playback-time-total, .vue-sound__playback-time-separator {\n        font-size: 80%;\n        color: #888888;\n      }\n\n      .vue-sound__playback-time-wrapper {\n        text-align: center;\n        width: 71% !important;\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioLibrarySelection.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioLibrarySelection.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AudioLibrarySelection.vue?vue&type=template&id=3c1ce0a2&\"\nimport script from \"./AudioLibrarySelection.vue?vue&type=script&lang=js&\"\nexport * from \"./AudioLibrarySelection.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AudioLibrarySelection.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"audio-library-selector\">\n    <audio-library-selection\n      v-if=\"selectedAudioFile\"\n      :audio-file=\"selectedAudioFile\"\n      :lang-id=\"langId\"\n      @clear=\"clearSelection\" />\n\n    <template v-else>\n      <!-- todo: refactor audio-library-selection to use v-model's @input + :value -->\n      <!-- <audio-library-selection\n          v-for=\"audioFile in alternateSelections\"\n          :key=\"audioFile && audioFile.id\"\n          :audioFile=\"audioFile\"\n          :selectable=\"selectable\"\n          @select=\"selectAudioFile({value: audioFile, langId})\" /> -->\n\n      <!-- todo: refactor audio-library-search-field to use v-model's @input + :value -->\n      <audio-library-search-field\n        :lang-id=\"langId\"\n        :audio-files=\"audioFiles\"\n        @select=\"selectAudioFile\" />\n    </template>\n  </div>\n</template>\n\n<script lang=\"js\">\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types,@typescript-eslint/strict-boolean-expressions */\nimport {isEmpty} from 'lodash'\nimport {mapActions} from 'vuex'\nimport {SupportedContentType, SupportedMode} from '@floip/flow-runner'\nimport AudioLibrarySearchField from './AudioLibrarySearchField'\nimport AudioLibrarySelection from './AudioLibrarySelection'\n\nexport default {\n\n  components: {\n    AudioLibrarySearchField,\n    AudioLibrarySelection,\n  },\n  props: [\n    'alternateSelections',\n    'selectedAudioFile',\n    'langId',\n    'audioFiles',\n    'isPlaying',\n    'audioPlayerUrl',\n    'resourceId',\n  ],\n\n  computed: {\n    selectable() {\n      return !isEmpty(this.alternateSelections)\n    },\n  },\n\n  methods: {\n    ...mapActions('flow', ['resource_setOrCreateValueModeSpecific']),\n    clearSelection() {\n      this.resource_setOrCreateValueModeSpecific({\n        resourceId: this.resourceId,\n        filter: {language_id: this.langId, content_type: SupportedContentType.AUDIO, modes: [SupportedMode.IVR]},\n        value: '',\n      })\n    },\n    selectAudioFile({value, langId}) {\n      this.resource_setOrCreateValueModeSpecific({\n        resourceId: this.resourceId,\n        filter: {language_id: langId, content_type: SupportedContentType.AUDIO, modes: [SupportedMode.IVR]},\n        value: value.description,\n      })\n    },\n  },\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioLibrarySelector.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioLibrarySelector.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AudioLibrarySelector.vue?vue&type=template&id=75ccf3c2&\"\nimport script from \"./AudioLibrarySelector.vue?vue&type=script&lang=js&\"\nexport * from \"./AudioLibrarySelector.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.isFeatureCallToRecordEnabled)?_c('div',{staticClass:\"phone-recorder\"},[_c('phone-recording-recorder-selector',{attrs:{\"is-modal-visible\":_vm.isRecorderSelectorVisible},on:{\"input\":_vm.handleRecorderSelectionChanged},model:{value:(_vm.callConfig),callback:function ($$v) {_vm.callConfig=$$v},expression:\"callConfig\"}})],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-modal',{staticClass:\"phone-recording-recorder-selector\",attrs:{\"size\":\"lg\",\"no-close-on-backdrop\":\"\",\"no-close-on-esc\":\"\",\"title\":_vm._f(\"trans\")('flow-builder.select-a-caller-from-the-list-below'),\"visible\":_vm.isModalVisible,\"ok-title\":_vm._f(\"trans\")('flow-builder.call-this-phone-number'),\"cancel-title\":_vm._f(\"trans\")('flow-builder.close')},on:{\"ok\":_vm.handleModalClosed,\"cancel\":_vm.handleModalCancelled,\"close\":_vm.handleModalCancelled}},[_c('div',{staticClass:\"call-to-record-modal-table-container\"},[_c('table',{staticClass:\"table table-striped\"},[_c('thead',[_c('tr',[_c('th',{staticClass:\"recorder-selector-field\"}),_c('th',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.name')))]),_c('th',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.phone-number')))])])]),_c('tbody',{attrs:{\"id\":\"call-to-record-modal-list\"}},_vm._l((_vm.recorders),function(recorder){return _c('tr',{staticClass:\"call-to-record-item\"},[_c('td',{staticClass:\"recorder-selector-field\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedRecorder),expression:\"selectedRecorder\"}],attrs:{\"id\":(\"call-to-record-caller-\" + (recorder.id)),\"type\":\"radio\",\"x-name\":\"calltorecord_caller_select\"},domProps:{\"value\":recorder,\"checked\":_vm._q(_vm.selectedRecorder,recorder)},on:{\"change\":function($event){_vm.selectedRecorder=recorder}}})]),_c('td',[_c('label',{attrs:{\"for\":(\"call-to-record-caller-\" + (recorder.id))},on:{\"click\":function($event){return _vm.setSelectedRecorder(recorder)}}},[_vm._v(_vm._s(recorder.name))])]),_c('td',[_c('label',{attrs:{\"for\":(\"call-to-record-caller-\" + (recorder.id))},on:{\"click\":function($event){return _vm.setSelectedRecorder(recorder)}}},[_vm._v(_vm._s(recorder.phone))])])])}),0)]),_c('h4',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.add-a-description-to-this-recording')))]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.description),expression:\"description\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"rows\":\"2\",\"placeholder\":_vm._f(\"trans\")('flow-builder.optional-description')},domProps:{\"value\":(_vm.description)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.description=$event.target.value}}}),_c('h4',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.add-a-new-recorder')))]),_c('table',{staticClass:\"table\"},[_c('tbody',[_c('tr',[_c('td',{staticClass:\"recorder-selector-field\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedRecorder),expression:\"selectedRecorder\"}],attrs:{\"id\":\"new_recorder_radio\",\"type\":\"radio\",\"name\":\"calltorecord_caller_select\"},domProps:{\"value\":_vm.draft,\"checked\":_vm._q(_vm.selectedRecorder,_vm.draft)},on:{\"change\":function($event){_vm.selectedRecorder=_vm.draft}}})]),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.draft.name),expression:\"draft.name\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":_vm._f(\"trans\")('flow-builder.name')},domProps:{\"value\":(_vm.draft.name)},on:{\"click\":_vm.selectNewRecorder,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.draft, \"name\", $event.target.value)}}})]),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.draft.phone),expression:\"draft.phone\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":_vm._f(\"trans\")('flow-builder.phone-number')},domProps:{\"value\":(_vm.draft.phone)},on:{\"click\":_vm.selectNewRecorder,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.draft, \"phone\", $event.target.value)}}})])])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-modal\n    size=\"lg\"\n    class=\"phone-recording-recorder-selector\"\n    no-close-on-backdrop\n    no-close-on-esc\n    :title=\"'flow-builder.select-a-caller-from-the-list-below'|trans\"\n    :visible=\"isModalVisible\"\n    :ok-title=\"'flow-builder.call-this-phone-number'|trans\"\n    :cancel-title=\"'flow-builder.close'|trans\"\n    @ok=\"handleModalClosed\"\n    @cancel=\"handleModalCancelled\"\n    @close=\"handleModalCancelled\">\n    <div class=\"call-to-record-modal-table-container\">\n      <table class=\"table table-striped\">\n        <thead>\n          <tr>\n            <th class=\"recorder-selector-field\" />\n            <th>{{ 'flow-builder.name'|trans }}</th>\n            <th>{{ 'flow-builder.phone-number'|trans }}</th>\n          </tr>\n        </thead>\n        <tbody id=\"call-to-record-modal-list\">\n          <tr\n            v-for=\"recorder in recorders\"\n            class=\"call-to-record-item\">\n            <td class=\"recorder-selector-field\">\n              <input\n                :id=\"`call-to-record-caller-${recorder.id}`\"\n                v-model=\"selectedRecorder\"\n                type=\"radio\"\n                x-name=\"calltorecord_caller_select\"\n                :value=\"recorder\">\n            </td>\n            <td>\n              <label\n                :for=\"`call-to-record-caller-${recorder.id}`\"\n                @click=\"setSelectedRecorder(recorder)\">{{ recorder.name }}</label>\n            </td>\n            <td>\n              <label\n                :for=\"`call-to-record-caller-${recorder.id}`\"\n                @click=\"setSelectedRecorder(recorder)\">{{ recorder.phone }}</label>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n\n      <h4>{{ 'flow-builder.add-a-description-to-this-recording'|trans }}</h4>\n      <input\n        v-model=\"description\"\n        type=\"text\"\n        class=\"form-control\"\n        rows=\"2\"\n        :placeholder=\"'flow-builder.optional-description'|trans\">\n\n      <h4>{{ 'flow-builder.add-a-new-recorder'|trans }}</h4>\n      <table class=\"table\">\n        <tbody>\n          <tr>\n            <td class=\"recorder-selector-field\">\n              <input\n                id=\"new_recorder_radio\"\n                v-model=\"selectedRecorder\"\n                type=\"radio\"\n                name=\"calltorecord_caller_select\"\n                :value=\"draft\">\n            </td>\n            <td>\n              <input\n                v-model=\"draft.name\"\n                type=\"text\"\n                :placeholder=\"'flow-builder.name'|trans\"\n                class=\"form-control\"\n                @click=\"selectNewRecorder\">\n            </td>\n            <td>\n              <input\n                v-model=\"draft.phone\"\n                type=\"text\"\n                :placeholder=\"'flow-builder.phone-number'|trans\"\n                class=\"form-control\"\n                @click=\"selectNewRecorder\">\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </b-modal>\n</template>\n\n<script lang=\"js\">\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types,@typescript-eslint/strict-boolean-expressions */\nimport {lang} from '@/lib/filters/lang'\nimport {clone} from 'lodash'\nimport {mapState} from 'vuex'\nimport {BModal} from 'bootstrap-vue'\n\nexport default {\n  components: {\n    BModal,\n  },\n\n  mixins: [lang],\n\n  props: {\n    isModalVisible: Boolean,\n  },\n\n  data() {\n    return {\n      selectedRecorder: null,\n      description: null,\n      draft: null,\n    }\n  },\n\n  created() {\n    this.reset()\n  },\n\n  computed: {\n    ...mapState({\n      recorders: ({audio: {recording: {recorders}}}) => recorders,\n    }),\n  },\n\n  methods: {\n    selectNewRecorder() {\n      this.draft.isNew = true\n      this.selectedRecorder = this.draft\n    },\n    setSelectedRecorder(recorder) {\n      this.selectedRecorder = recorder\n    },\n    reset() {\n      this.draft = {\n        name: null,\n        phone: null,\n        isNew: true,\n      }\n      this.description = null\n      this.selectedRecorder = null\n    },\n\n    handleModalClosed() {\n      const\n        {description} = this\n      const value = clone(this.selectedRecorder)\n\n      this.reset()\n      this.$emit('input', {\n        value,\n        recorder: value,\n        description,\n      })\n    },\n\n    handleModalCancelled() {\n      this.reset()\n\n      const\n        {description} = this\n      const value = clone(this.selectedRecorder)\n\n      this.$emit('input', {\n        value,\n        recorder: value,\n        description,\n      })\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.phone-recording-recorder-selector {\n  padding-top: 3em;\n\n  .modal-body {\n    h4, .h4 {\n      margin-top: 2em;\n    }\n  }\n\n  .table {\n    .recorder-selector-field {\n      width: 3em;\n      text-align: center;\n      vertical-align: middle;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PhoneRecordingRecorderSelector.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PhoneRecordingRecorderSelector.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PhoneRecordingRecorderSelector.vue?vue&type=template&id=41756c06&scoped=true&\"\nimport script from \"./PhoneRecordingRecorderSelector.vue?vue&type=script&lang=js&\"\nexport * from \"./PhoneRecordingRecorderSelector.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PhoneRecordingRecorderSelector.vue?vue&type=style&index=0&id=41756c06&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"41756c06\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div\n    v-if=\"isFeatureCallToRecordEnabled\"\n    class=\"phone-recorder\">\n    <phone-recording-recorder-selector\n      v-model=\"callConfig\"\n      :is-modal-visible=\"isRecorderSelectorVisible\"\n      @input=\"handleRecorderSelectionChanged\" />\n  </div>\n</template>\n\n<script lang=\"js\">\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types,@typescript-eslint/strict-boolean-expressions */\nimport {mapGetters, mapState} from 'vuex'\nimport PhoneRecordingRecorderSelector from './PhoneRecordingRecorderSelector'\n\nexport default {\n  components: {\n    PhoneRecordingRecorderSelector,\n  },\n\n  props: ['recordingKey'],\n\n  data() {\n    return {\n      // this is set by hooking into the v-model property of <phone-recording-recorder-selector v-model=\"callConfig\">\n      // which $emits a new value that results in setting this variable by reference.\n      callConfig: null,\n    }\n  },\n\n  computed: {\n    ...mapState({\n      // todo: deprecate (this + setAudioRecordingConfigVisibilityForSelectedBlock) in favor of modal + local state\n      isRecorderSelectorVisible: ({audio: {recording: {isRecorderSelectorVisible}}}) => isRecorderSelectorVisible,\n    }),\n\n    ...mapGetters(['isFeatureCallToRecordEnabled']),\n  },\n\n  methods: {\n    handleRecorderSelectionChanged() {\n      this.$store.commit('setAudioRecordingConfigVisibilityForSelectedBlock', {isVisible: false})\n\n      if (!this.callConfig.recorder) {\n        return\n      }\n\n      const callConfig = {\n        key: this.recordingKey,\n        description: this.callConfig.description,\n        ...this.callConfig.recorder,\n      }\n\n      this.$store.dispatch('startAudioRecordingFor', callConfig)\n    },\n  },\n}\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PhoneRecorder.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PhoneRecorder.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PhoneRecorder.vue?vue&type=template&id=79dcd652&\"\nimport script from \"./PhoneRecorder.vue?vue&type=script&lang=js&\"\nexport * from \"./PhoneRecorder.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"upload-monitor\"},[(_vm.hasProgress)?_c('div',{staticClass:\"upload-monitor-progress\"},[_c('h6',[_vm._v(_vm._s(_vm._f(\"trans\")('trees.uploading'))+\"… \"+_vm._s(_vm.upload.file.name))]),_c('div',{staticClass:\"progress\"},[_c('b-progress',{staticClass:\"mb-3\",attrs:{\"value\":_vm.progress * 1,\"show-value\":\"\",\"animated\":\"\"}})],1)]):_vm._e(),(_vm.isFailure)?_c('p',{staticClass:\"text-danger small\"},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('trees.error-uploading-file-try-again'))+\" \"),(_vm.upload.message)?_c('span',{staticClass:\"details\"},[_vm._v(\"(\"+_vm._s(_vm.upload.message)+\")\")]):_vm._e()]):_vm._e(),(!_vm.hasProgress)?_vm._t(\"default\"):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import axios from 'axios'\nimport lodash from 'lodash'\nimport Vue from 'vue'\n\nexport const Statuses = {\n  UPLOADING: -1,\n  UNINITIALIZED: 0,\n  SUCCESS: 1,\n  FAILURE: 2,\n}\n\nexport const UploadStatusToStateMap = {\n  [Statuses.UPLOADING]: 'uploading',\n  [Statuses.UNINITIALIZED]: 'uninitialized',\n  [Statuses.SUCCESS]: 'success',\n  [Statuses.FAILURE]: 'failure',\n}\n\nexport default {\n  namespaced: true,\n\n  state: {\n    uploadProgressByKey: {},\n    errorMessageByKey: {},\n\n    uploadsById: {},\n    uploadIdsByKey: {},\n  },\n\n  mutations: {\n    setErrorMessage({errorMessageByKey}, {key, errorMessage}) {\n      Vue.set(errorMessageByKey, key, errorMessage)\n    },\n\n    setUploadProgress({uploadProgressByKey}, {key, uploadProgress}) {\n      Vue.set(uploadProgressByKey, key, uploadProgress)\n    },\n\n    setUploadStatusFor({uploadsById, uploadIdsByKey}, {\n      file: fileWithRefs, key, status, progress, message, cancel,\n    }) {\n      const file = lodash.pick(\n        fileWithRefs,\n        ['averageSpeed', 'currentSpeed', 'error', 'name', 'paused', 'relativePath', 'size', 'uniqueIdentifier'],\n      )\n      Vue.set(uploadsById, file.uniqueIdentifier, {\n        key, status, progress, message, cancel, file,\n      })\n      Vue.set(uploadIdsByKey, key, file.uniqueIdentifier)\n    },\n  },\n\n  actions: {\n    uploadFile({commit}, {\n      key,\n      uploadUrl,\n      formDataFields,\n      onSuccess,\n      onError,\n    }) {\n      if (!uploadUrl) {\n        commit('setUploadProgress', {key, uploadProgress: null})\n        onError(new Error(`url was ${uploadUrl}`))\n        return\n      }\n\n      const formData = new FormData()\n      lodash.forEach(formDataFields, (value, name) => {\n        formData.set(name, value)\n      })\n\n      const config = {\n        onUploadProgress: (progressEvent) => {\n          commit('setUploadProgress', {\n            key,\n            uploadProgress: Math.floor((progressEvent.loaded * 100) / progressEvent.total),\n          })\n        },\n      }\n\n      axios.post(uploadUrl, formData, config)\n        .then((response) => {\n          commit('setUploadProgress', {key, uploadProgress: null})\n          onSuccess(response)\n        })\n        .catch((error) => {\n          commit('setUploadProgress', {key, uploadProgress: null})\n          onError(error)\n        })\n    },\n\n    // todo: this is slightly different, because it implements chunked+resumable uploads; generify\n    // todo: upgrade backend to use more recent composer package that's compatible w/ npm flow.js\n    // https://github.com/flowjs/flow-php-server\n    // todo: handle multi-file-per-key\n    uploadFiles({commit, dispatch, state}, {key, files, uploader}) {\n      const cancel = (_) => uploader.cancel()\n\n      files.forEach((file) => commit('setUploadStatusFor', {\n        file, key, progress: 0, status: Statuses.UNINITIALIZED, message: null, cancel,\n      }))\n\n      uploader.on('fileProgress', (file, e) => {\n        // TODO: enable showAppMessageFor and use it as follow\n        // dispatch('showAppMessageFor', {message: `Upload in progress... ${_.parseInt(file.progress() * 100)}%`}, {root: true})\n        console.debug(`Upload in progress... ${_.parseInt(file.progress() * 100)}%`)\n        commit('setUploadStatusFor', {\n          file,\n          key,\n          progress: file.progress(),\n          status: Statuses.UPLOADING,\n          message: null,\n          cancel,\n        })\n      })\n\n      uploader.on('fileSuccess', (file, json) => {\n        // TODO: enable showAppMessageFor and use it as follow\n        // dispatch('showAppMessageFor', {message: 'Upload successful!', isComplete: true}, {root: true})\n        console.debug('Upload successful!')\n        commit('setUploadStatusFor', {\n          file,\n          key,\n          progress: 1,\n          status: Statuses.SUCCESS,\n          message: null,\n          cancel,\n        })\n        // clear for next batch\n        // uploader.cancel()\n      })\n\n      uploader.on('error', (json, file) => {\n        const {status_description} = JSON.parse(json) || {}\n        // TODO: enable showAppMessageFor and use it as follow\n        // dispatch('showAppMessageFor', {message: status_description, isComplete: true}, {root: true})\n        console.debug(`Upload has error ${status_description}`)\n        commit('setUploadStatusFor', {\n          file,\n          key,\n          status: Statuses.FAILURE,\n          message: status_description,\n          cancel,\n        })\n        // clear for retry\n        // uploader.cancel()\n      })\n\n      uploader.upload()\n      // TODO: enable showAppMessageFor and use it as follow\n      // dispatch('showAppMessageFor', {message: 'Upload in progress...'}, {root: true})\n      console.debug('Upload in progress...')\n    },\n  },\n}\n","<template>\n  <div class=\"upload-monitor\">\n    <div\n      v-if=\"hasProgress\"\n      class=\"upload-monitor-progress\">\n      <h6>{{ 'trees.uploading' | trans }}&hellip; {{ upload.file.name }}</h6>\n\n      <div class=\"progress\">\n        <b-progress\n          :value=\"progress * 1\"\n          show-value\n          animated\n          class=\"mb-3\" />\n      </div>\n    </div>\n\n    <p\n      v-if=\"isFailure\"\n      class=\"text-danger small\">\n      {{ 'trees.error-uploading-file-try-again'|trans }}\n      <span\n        v-if=\"upload.message\"\n        class=\"details\">({{ upload.message }})</span>\n    </p>\n\n    <slot v-if=\"!hasProgress\" />\n  </div>\n</template>\n\n<script lang=\"js\">\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types,@typescript-eslint/strict-boolean-expressions,@typescript-eslint/unbound-method */\nimport {lang} from '@/lib/filters/lang'\nimport {forEach, get} from 'lodash'\n\nimport {mapState} from 'vuex'\nimport {BProgress} from 'bootstrap-vue'\nimport multimediaUpload, {Statuses as UploadStatuses} from '@/store/trees/multimediaUpload'\n\nexport default {\n\n  components: {BProgress},\n\n  mixins: [lang],\n  props: ['uploadKey'],\n\n  computed: {\n    ...mapState('multimediaUpload', ['uploadsById', 'uploadIdsByKey']),\n\n    upload() {\n      return this.uploadsById[this.uploadIdsByKey[this.uploadKey]]\n    },\n\n    hasProgress() {\n      return this.upload\n        && this.upload.status !== UploadStatuses.SUCCESS\n        && this.upload.status !== UploadStatuses.FAILURE\n    },\n\n    isFailure() {\n      return this.upload && this.upload.status === UploadStatuses.FAILURE\n    },\n\n    progress() {\n      return get(this.upload, 'progress', 0) * 100\n    },\n  },\n\n  created() {\n    const {$store} = this\n    const modules = {\n      multimediaUpload,\n    }\n\n    forEach(modules, (v, k) => !$store.hasModule(k) && $store.registerModule(k, v))\n  },\n}\n</script>\n\n<style lang=\"scss\">\n.progress {\n  margin-bottom: 0.5em;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadMonitor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadMonitor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UploadMonitor.vue?vue&type=template&id=44a05fb5&\"\nimport script from \"./UploadMonitor.vue?vue&type=script&lang=js&\"\nexport * from \"./UploadMonitor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UploadMonitor.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport {Getter, Mutation, namespace} from 'vuex-class'\nimport {\n  IBlock,\n  IFlow,\n  IResource,\n  IResourceValue as IResourceDefinitionVariantOverModes,\n  SupportedContentType,\n  SupportedMode,\n} from '@floip/flow-runner'\nimport Lang from '@/lib/filters/lang'\nimport Permissions from '@/lib/mixins/Permissions'\nimport Routes from '@/lib/mixins/Routes'\nimport FlowUploader from '@/lib/mixins/FlowUploader'\nimport {Component, Prop} from 'vue-property-decorator'\nimport {\n  discoverContentTypesFor,\n  findOrGenerateStubbedVariantOn,\n  findResourceVariantOverModesOn,\n  IResourceDefinitionVariantOverModesFilter,\n} from '@/store/flow/resource'\nimport AudioLibrarySelector from '@/components/common/AudioLibrarySelector.vue'\nimport {ValidationException} from '@floip/flow-runner/src/domain/exceptions/ValidationException'\nimport PhoneRecorder from '@/components/interaction-designer/block-editors/PhoneRecorder.vue'\nimport {ILanguage} from '@floip/flow-runner/dist/flow-spec/ILanguage'\nimport {mixins} from 'vue-class-component'\nimport {TabsPlugin} from 'bootstrap-vue'\nimport UploadMonitor from '../block-editors/UploadMonitor.vue'\nimport ResourceVariantTextEditor from './ResourceVariantTextEditor.vue'\n\nVue.use(TabsPlugin)\n\nconst flowVuexNamespace = namespace('flow')\nconst builderVuexNamespace = namespace('builder')\n\ninterface IAudioFile {\n  id: string,\n  filename: string,\n  description: string,\n  language_id: string,\n  duration_seconds: string,\n  original_extension: string,\n  created_at: string,\n}\n\ninterface IResourceDefinitionVariantOverModesWithOptionalValue extends Partial<IResourceDefinitionVariantOverModes> {\n  value?: IResourceDefinitionVariantOverModes['value'],\n}\n\n@Component({\n  components: {\n    AudioLibrarySelector,\n    ResourceVariantTextEditor,\n    UploadMonitor,\n    PhoneRecorder,\n  },\n})\nexport class ResourceEditor extends mixins(FlowUploader, Permissions, Routes, Lang) {\n  @Prop({required: true}) block!: IBlock\n\n  @Prop({required: true}) flow!: IFlow\n\n  @Prop() resource!: IResource\n\n  @Prop() label?: string | number\n\n  discoverContentTypesFor = discoverContentTypesFor\n\n  findOrGenerateStubbedVariantOn = findOrGenerateStubbedVariantOn\n\n  findResourceVariantOverModesOn = findResourceVariantOverModesOn\n\n  SupportedMode = SupportedMode\n\n  SupportedContentType = SupportedContentType\n\n  iconsMap = new Map<string, object>([\n    [SupportedMode.SMS, ['far', 'envelope']],\n    [SupportedMode.USSD, ['fac', 'ussd']],\n    [SupportedMode.IVR, ['fac', 'audio']],\n    [SupportedMode.RICH_MESSAGING, ['far', 'comment-dots']],\n    [SupportedMode.OFFLINE, ['fas', 'mobile-alt']],\n  ])\n\n  triggerRecordViaPhoneFor(langId: ILanguage['id']): void {\n    this.$store.commit('setAudioRecordingConfigVisibilityForSelectedBlock', {langId, isVisible: true})\n  }\n\n  handleFilesSubmittedFor(key: string, {data}: { data: any }): void {\n    console.debug('call handleFilesSubmittedFor')\n    this.$store.dispatch('multimediaUpload/uploadFiles', {...data, key})\n  }\n\n  handleFileSuccessFor(key: string, langId: ILanguage['id'], event: any): void {\n    const {data: {json}} = event\n    const {\n      audio_file_id: id,\n      audio_uuid: filename,\n      created_at: {date: created_at},\n      description,\n      duration_seconds,\n    } = JSON.parse(json)\n    const extension = description.split('.')[description.split('.').length - 1]\n    const uploadedAudio: IAudioFile = {\n      id,\n      filename,\n      description,\n      language_id: langId,\n      duration_seconds,\n      original_extension: extension,\n      created_at,\n    }\n\n    this.resource_setOrCreateValueModeSpecific({\n      resourceId: this.resource.uuid,\n      filter: {language_id: langId, content_type: SupportedContentType.AUDIO, modes: [SupportedMode.IVR]},\n      value: description,\n    })\n    // remove the focus from the `upload` Tab\n    event.target.blur()\n    this.pushAudioIntoLibrary(uploadedAudio)\n  }\n\n  findAudioResourceVariantFor(resource: IResource, filter: IResourceDefinitionVariantOverModesFilter): string | null {\n    try {\n      return findResourceVariantOverModesOn(resource, filter).value\n    } catch (e) {\n      if (!(e instanceof ValidationException)) {\n        throw e\n      }\n\n      return null\n    }\n  }\n\n  @Getter availableAudio!: IAudioFile[]\n\n  @Getter isFeatureAudioUploadEnabled!: boolean\n\n  @Mutation pushAudioIntoLibrary!: (audio: IAudioFile) => void\n\n  @flowVuexNamespace.Action resource_setOrCreateValueModeSpecific!: ({\n    resourceId,\n    filter,\n    value,\n  }: { resourceId: IResource['uuid'], filter: IResourceDefinitionVariantOverModesWithOptionalValue, value: string }) => void\n\n  @builderVuexNamespace.Getter isEditable !: boolean\n}\n\nexport default ResourceEditor\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceEditor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceEditor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ResourceEditor.vue?vue&type=template&id=dd0260a8&scoped=true&\"\nimport script from \"./ResourceEditor.vue?vue&type=script&lang=ts&\"\nexport * from \"./ResourceEditor.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ResourceEditor.vue?vue&type=style&index=0&id=dd0260a8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dd0260a8\",\n  null\n  \n)\n\nexport default component.exports","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".btn-ghost{background:transparent;border:none}.audio-library-selection{position:relative;background-color:transparent!important;background-image:none!important;border-color:#ccc!important}.audio-library-selection .audio-library-selection-download-dropdown{position:absolute;right:1.6em;top:50%;margin-top:-8px;color:#888}.audio-library-selection .audio-library-selection-download-dropdown svg{vertical-align:middle}.audio-library-selection .audio-library-selection-clear-selection{margin-right:-7px}.audio-library-selection .audio-file-description{text-overflow:ellipsis;overflow:hidden;margin-bottom:3px}.audio-library-selection .vue-sound-wrapper{margin-bottom:8px;margin-left:1em}.audio-library-selection .vue-sound-wrapper .vue-sound__player .icon-pause2,.audio-library-selection .vue-sound-wrapper .vue-sound__player .icon-play3{font-size:130%;color:#888}.audio-library-selection .vue-sound-wrapper .vue-sound__player .icon-pause2:hover,.audio-library-selection .vue-sound-wrapper .vue-sound__player .icon-play3:hover{color:#000;text-decoration:none}.audio-library-selection .vue-sound-wrapper .vue-sound__player .icon-download,.audio-library-selection .vue-sound-wrapper .vue-sound__player .icon-stop2,.audio-library-selection .vue-sound-wrapper .vue-sound__player .icon-volume-high,.audio-library-selection .vue-sound-wrapper .vue-sound__player .volume-toggle{display:none!important}.audio-library-selection .vue-sound-wrapper .vue-sound__player .vue-sound__playback-time-current,.audio-library-selection .vue-sound-wrapper .vue-sound__player .vue-sound__playback-time-separator,.audio-library-selection .vue-sound-wrapper .vue-sound__player .vue-sound__playback-time-total{font-size:80%;color:#888}.audio-library-selection .vue-sound-wrapper .vue-sound__player .vue-sound__playback-time-wrapper{text-align:center;width:71%!important}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import mod from \"-!../../../node_modules/vue-style-loader/index.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioLibrarySelection.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/vue-style-loader/index.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioLibrarySelection.vue?vue&type=style&index=0&lang=scss&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".phone-recording-recorder-selector[data-v-41756c06]{padding-top:3em}.phone-recording-recorder-selector .modal-body .h4[data-v-41756c06],.phone-recording-recorder-selector .modal-body h4[data-v-41756c06]{margin-top:2em}.phone-recording-recorder-selector .table .recorder-selector-field[data-v-41756c06]{width:3em;text-align:center;vertical-align:middle}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadMonitor.vue?vue&type=style&index=0&lang=scss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"001dc3d2\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".audio-library-search-field.dropdown .dropdown-menu[data-v-22499358]{display:block;min-width:100%}.audio-library-search-field.dropdown .dropdown-menu>li.pagers>a[data-v-22499358]{clear:none;margin-top:0;margin-bottom:0;padding-top:.5em;padding-bottom:.5em}.audio-library-search-field.dropdown .dropdown-menu>li.pagers>a.disabled[data-v-22499358]{text-decoration:none;background-color:transparent;background-image:none;filter:progid:DXImageTransform.Microsoft.gradient(enabled = false);cursor:not-allowed;color:#777}.close[data-v-22499358]{pointer-events:auto}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import mod from \"-!../../../../node_modules/vue-style-loader/index.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadMonitor.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadMonitor.vue?vue&type=style&index=0&lang=scss&\"","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceVariantTextEditor.vue?vue&type=style&index=0&id=0ce279b0&lang=scss&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"0a55e500\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"generic-contact-property-editor\"},[_c('hr'),_c('label',{staticClass:\"text-primary\"},[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.contact-properties')))]),_c('div',{staticClass:\"custom-control custom-checkbox\"},[_c('input',{staticClass:\"custom-control-input\",attrs:{\"id\":\"setContactProperty\",\"type\":\"checkbox\",\"name\":\"setContactProperty\"},domProps:{\"value\":_vm.shouldSetContactProperty,\"checked\":_vm.shouldSetContactProperty},on:{\"change\":_vm.toggleSetContactProperty}}),_c('label',{staticClass:\"custom-control-label font-weight-normal\",attrs:{\"for\":\"setContactProperty\"}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.set-contact-property-with-response'))+\" \")])]),(_vm.shouldSetContactProperty)?_c('div',{staticClass:\"form-group\"},[_c('validation-message',{attrs:{\"message-key\":(\"block/\" + (_vm.block.uuid) + \"/config/set_contact_property/property_key\")},scopedSlots:_vm._u([{key:\"input-control\",fn:function(ref){\nvar isValid = ref.isValid;\nreturn [_c('div',{staticClass:\"block-contact-property-key\"},[_c('text-editor',{attrs:{\"value\":_vm.propertyKey,\"label\":_vm._f(\"trans\")('flow-builder.property'),\"placeholder\":_vm._f(\"trans\")('flow-builder.enter-contact-property-label'),\"valid-state\":isValid},on:{\"input\":_vm.updatePropertyKey}})],1)]}}],null,false,1545571803)}),_c('h6',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.value')))]),(_vm.isBlockInteractive(_vm.block))?_c('div',{staticClass:\"form-group\"},[_c('div',{staticClass:\"custom-control custom-radio\"},[_c('input',{staticClass:\"custom-control-input\",attrs:{\"id\":\"setProp\",\"type\":\"radio\",\"name\":\"contactPropAction\"},domProps:{\"checked\":_vm.propertyValueAction === _vm.PROPERTY_VALUE_ACTION.FROM_CURRENT_BLOCK_RESPONSE,\"value\":_vm.PROPERTY_VALUE_ACTION.FROM_CURRENT_BLOCK_RESPONSE},on:{\"change\":_vm.updatePropertyValueAction}}),_c('label',{staticClass:\"custom-control-label font-weight-normal\",attrs:{\"for\":\"setProp\"}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.entry-from-this-block'))+\" \")])]),_c('div',{staticClass:\"custom-control custom-radio\"},[_c('input',{staticClass:\"custom-control-input\",attrs:{\"id\":\"clearProp\",\"type\":\"radio\",\"name\":\"contactPropAction\"},domProps:{\"checked\":_vm.propertyValueAction === _vm.PROPERTY_VALUE_ACTION.OPEN_EXPRESSION,\"value\":_vm.PROPERTY_VALUE_ACTION.OPEN_EXPRESSION},on:{\"change\":_vm.updatePropertyValueAction}}),_c('label',{staticClass:\"custom-control-label font-weight-normal\",attrs:{\"for\":\"clearProp\"}},[_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.expression'))+\" \")])])]):_vm._e(),(_vm.shouldUseOpenExpression)?_c('validation-message',{attrs:{\"message-key\":(\"block/\" + (_vm.block.uuid) + \"/config/set_contact_property/property_value\")},scopedSlots:_vm._u([{key:\"input-control\",fn:function(ref){\nvar isValid = ref.isValid;\nreturn [_c('expression-input',{attrs:{\"label\":'',\"placeholder\":_vm._f(\"trans\")('flow-builder.enter-expression'),\"current-expression\":_vm.propertyValue,\"valid-state\":isValid},on:{\"commitExpressionChange\":_vm.updatePropertyValue}})]}}],null,false,3441631689)}):_vm._e()],1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {IBlock, IBlockConfig} from '@floip/flow-runner'\nimport {Component, Prop} from 'vue-property-decorator'\nimport {namespace} from 'vuex-class'\nimport Lang from '@/lib/filters/lang'\nimport {get, has} from 'lodash'\nimport {mixins} from 'vue-class-component'\nimport ValidationMessage from '@/components/common/ValidationMessage.vue'\nimport ExpressionInput from '@/components/common/ExpressionInput.vue'\nimport TextEditor from '@/components/common/TextEditor.vue'\nimport {isBlockInteractive} from '@/store/flow/block.ts'\n\nconst flowVuexNamespace = namespace('flow')\n\nconst EMPTY_STRING_EXPRESSION = ''\nconst BLOCK_RESPONSE_EXPRESSION = '@block.value'\n\n@Component({\n  components: {\n    TextEditor,\n    ExpressionInput,\n    ValidationMessage,\n  },\n})\nclass GenericContactPropertyEditor extends mixins(Lang) {\n  @Prop() readonly block!: IBlock\n\n  shouldSetContactProperty = false\n  PROPERTY_VALUE_ACTION = {\n    OPEN_EXPRESSION: 'openExpression',\n    FROM_CURRENT_BLOCK_RESPONSE: 'fromCurrentBlockResponse',\n  }\n  propertyValueAction = ''\n  propertyKey = ''\n  propertyValue: string | null = ''\n\n  created(): void {\n    this.shouldSetContactProperty = has(this.block.config, 'set_contact_property')\n    this.propertyKey = get(this.block.config.set_contact_property, 'property_key', '')\n    this.propertyValue = get(this.block.config.set_contact_property, 'property_value', null)\n    if (this.propertyValue === null) {\n      this.updatePropertyValue(BLOCK_RESPONSE_EXPRESSION)\n    }\n    this.initPropertyValueAction()\n  }\n\n  isBlockInteractive(block: IBlock): boolean {\n    return isBlockInteractive(block)\n  }\n\n  // for checkbox ######################\n  toggleSetContactProperty(): void {\n    this.shouldSetContactProperty = !this.shouldSetContactProperty\n    if (!this.shouldSetContactProperty) {\n      this.block_removeConfigByKey({blockId: this.block.uuid, key: 'set_contact_property'})\n    } else {\n      this.block_updateConfigByPath({\n        blockId: this.block.uuid,\n        path: 'set_contact_property',\n        value: {\n          property_key: '',\n          property_value: this.shouldUseOpenExpression ? EMPTY_STRING_EXPRESSION : BLOCK_RESPONSE_EXPRESSION,\n        } as IBlockConfig,\n      })\n    }\n  }\n\n  // for radio buttons ######################\n  initPropertyValueAction(): void {\n    if (this.propertyValue === BLOCK_RESPONSE_EXPRESSION) {\n      this.propertyValueAction = this.PROPERTY_VALUE_ACTION.FROM_CURRENT_BLOCK_RESPONSE\n    } else {\n      this.propertyValueAction = this.PROPERTY_VALUE_ACTION.OPEN_EXPRESSION\n    }\n  }\n\n  updatePropertyValueAction({target: {value}}: {target: {value: string}}): void {\n    this.propertyValueAction = value\n    if (value === this.PROPERTY_VALUE_ACTION.FROM_CURRENT_BLOCK_RESPONSE) {\n      this.updatePropertyValue(BLOCK_RESPONSE_EXPRESSION)\n    } else {\n      this.updatePropertyValue(EMPTY_STRING_EXPRESSION)\n    }\n  }\n\n  get shouldUseOpenExpression(): boolean {\n    return this.propertyValueAction === this.PROPERTY_VALUE_ACTION.OPEN_EXPRESSION\n  }\n\n  // for input fields ######################\n  updatePropertyKey(value: string): void {\n    this.propertyKey = value\n    this.block_updateConfigByPath({\n      blockId: this.block.uuid,\n      path: 'set_contact_property.property_key',\n      value,\n    })\n  }\n\n  updatePropertyValue(value: string): void {\n    this.propertyValue = value\n    this.block_updateConfigByPath({\n      blockId: this.block.uuid,\n      path: 'set_contact_property.property_value',\n      value,\n    })\n  }\n\n  @flowVuexNamespace.Mutation block_updateConfigByPath!: (\n    {blockId, path, value}: { blockId: string, path: string, value: string | object }\n  ) => void\n  @flowVuexNamespace.Mutation block_updateVendorMetadataByPath!: (\n    {blockId, path, value}: { blockId: string, path: string, value: string }\n  ) => void\n  @flowVuexNamespace.Mutation block_removeConfigByKey!: ({blockId, key}: { blockId: string, key: string}) => void\n}\n\nexport default GenericContactPropertyEditor\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GenericContactPropertyEditor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GenericContactPropertyEditor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./GenericContactPropertyEditor.vue?vue&type=template&id=5c48dc8f&\"\nimport script from \"./GenericContactPropertyEditor.vue?vue&type=script&lang=ts&\"\nexport * from \"./GenericContactPropertyEditor.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/vue-style-loader/index.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceEditor.vue?vue&type=style&index=0&id=dd0260a8&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceEditor.vue?vue&type=style&index=0&id=dd0260a8&scoped=true&lang=css&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".progress{margin-bottom:.5em}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"resource-variant-text-editor\"},[_c('div',{staticClass:\"content-editor\",class:{'content-editor-selected': !!_vm.content}},[_c('div',{staticClass:\"input-group\"},[(_vm.label)?_c('div',{staticClass:\"input-group-prepend\"},[_c('span',{staticClass:\"input-group-text\"},[_vm._v(_vm._s(_vm.label))])]):_vm._e(),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.content),expression:\"content\"},{name:\"focus\",rawName:\"v-focus\",value:(_vm.isSelected),expression:\"isSelected\"}],ref:\"input\",staticClass:\"form-control\",attrs:{\"placeholder\":_vm._f(\"trans\")(_vm.placeholder || (\"flow-builder.enter-\" + (_vm.resourceVariant.content_type.toString().toLowerCase()) + \"-content\")),\"rows\":_vm.rows},domProps:{\"value\":(_vm.content)},on:{\"focus\":_vm.select,\"blur\":_vm.deselect,\"input\":function($event){if($event.target.composing){ return; }_vm.content=$event.target.value}}})])]),_c('div',{staticClass:\"content-toolbar\"},[(_vm.isEditable)?_c('span',{staticClass:\"text-muted transition-all\",class:{invisible: !_vm.characterCounter.count}},[_vm._v(\" \"+_vm._s(_vm.characterCounter.count)+\" characters \"),(_vm.mode === 'sms' && _vm.characterCounter.pages > 1)?[_vm._v(\" (\"+_vm._s(_vm.characterCounter.pages)+\" \"+_vm._s(_vm.characterCounter.hasUnicode ? 'unicode pages' : 'pages')+\") \")]:_vm._e()],2):_vm._e(),(_vm.doesContentContainExpression)?_c('a',{directives:[{name:\"b-tooltip\",rawName:\"v-b-tooltip.hover.top.html\",value:((\"<p>\" + (_vm.trans('flow-builder.youre-using-floip-expressions')) + \"</p>\\n                     <p>\\n                       <strong>\" + (_vm.trans('flow-builder.pro-tip')) + \":</strong>\\n                       \" + (_vm.trans('flow-builder.floip-expressions-escape-with-double-at-symbol')) + \"\\n                     </p>\")),expression:\"`<p>${trans('flow-builder.youre-using-floip-expressions')}</p>\\n                     <p>\\n                       <strong>${trans('flow-builder.pro-tip')}:</strong>\\n                       ${trans('flow-builder.floip-expressions-escape-with-double-at-symbol')}\\n                     </p>`\",modifiers:{\"hover\":true,\"top\":true,\"html\":true}}],attrs:{\"href\":\"https://floip.gitbooks.io/flow-specification/content/fundamentals/expressions.html\",\"target\":\"_blank\"}},[_c('kbd',{staticStyle:{\"margin-left\":\"1em\"}},[_c('i',{staticClass:\"glyphicon glyphicon-console\"}),(_vm.doesContentContainExpressionError)?_c('i',{staticClass:\"glyphicon glyphicon glyphicon-remove-sign text-danger\"}):_c('i',{staticClass:\"glyphicon glyphicon-ok-sign text-success\"})])]):_vm._e(),(_vm.doesContentContainExpressionError)?_c('div',{staticClass:\"alert alert-danger\",staticStyle:{\"margin-top\":\"0.5em\"}},[_c('p',[_c('i',{staticClass:\"glyphicon glyphicon-remove-sign\"}),_c('strong',[_c('a',{attrs:{\"href\":\"https://floip.gitbooks.io/flow-specification/content/fundamentals/expressions.html\",\"target\":\"_blank\"}},[_vm._v(\"FLOIP Expression\")]),_vm._v(\" \"+_vm._s(_vm._f(\"trans\")('flow-builder.error-found'))+\" \")])]),_c('p',[_c('em',[_vm._v(\" \"+_vm._s(_vm.contentExpressionAST.message)+\" (\"),(_vm.contentExpressionAST.location.start.line !== 1)?_c('span',[_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.on-line'))+\" \"+_vm._s(_vm.contentExpressionAST.location.start.line)+\", \")]):_vm._e(),_vm._v(_vm._s(_vm._f(\"trans\")('flow-builder.at-character'))+\" \"+_vm._s(_vm.contentExpressionAST.location.start.column)+\") \")])])]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"resource-variant-text-editor\">\n    <div\n      class=\"content-editor\"\n      :class=\"{'content-editor-selected': !!content}\">\n\n      <div class=\"input-group\">\n        <div v-if=\"label\" class=\"input-group-prepend\">\n          <span class=\"input-group-text\">{{label}}</span>\n        </div>\n\n        <textarea\n          ref=\"input\"\n          v-model=\"content\"\n          v-focus=\"isSelected\"\n          :placeholder=\"placeholder || `flow-builder.enter-${resourceVariant.content_type.toString().toLowerCase()}-content` | trans\"\n          class=\"form-control\"\n          :rows=\"rows\"\n          @focus=\"select\"\n          @blur=\"deselect\" />\n      </div>\n\n      <!-- <button @click=\"select\"\n              class=\"btn btn-xs btn-secondary\">\n        <i class=\"glyphicon glyphicon-pencil\"></i>\n      </button> -->\n    </div>\n\n    <div class=\"content-toolbar\">\n      <!--      <block-content-autogen-button-->\n      <!--          v-if=\"enableAutogenButton\"-->\n      <!--          :isEditable=\"isEditable\"-->\n      <!--          :langId=\"langId\"-->\n      <!--          :type=\"type\"-->\n      <!--          :block=\"block\"-->\n      <!--          class=\"pull-right\" />-->\n\n      <span\n        v-if=\"isEditable\"\n        class=\"text-muted transition-all\"\n        :class=\"{invisible: !characterCounter.count}\">\n        {{ characterCounter.count }} characters\n\n        <template v-if=\"mode === 'sms' && characterCounter.pages > 1\">\n          ({{ characterCounter.pages }} {{ characterCounter.hasUnicode ? 'unicode pages' : 'pages' }})\n        </template>\n      </span>\n\n      <a\n        v-if=\"doesContentContainExpression\"\n        v-b-tooltip.hover.top.html=\"`<p>${trans('flow-builder.youre-using-floip-expressions')}</p>\n                     <p>\n                       <strong>${trans('flow-builder.pro-tip')}:</strong>\n                       ${trans('flow-builder.floip-expressions-escape-with-double-at-symbol')}\n                     </p>`\"\n        href=\"https://floip.gitbooks.io/flow-specification/content/fundamentals/expressions.html\"\n        target=\"_blank\">\n\n        <kbd style=\"margin-left: 1em\">\n          <i class=\"glyphicon glyphicon-console\" />\n          <i\n            v-if=\"doesContentContainExpressionError\"\n            class=\"glyphicon glyphicon glyphicon-remove-sign text-danger\" />\n          <i\n            v-else\n            class=\"glyphicon glyphicon-ok-sign text-success\" />\n        </kbd>\n      </a>\n\n      <div\n        v-if=\"doesContentContainExpressionError\"\n        class=\"alert alert-danger\"\n        style=\"\n  margin-top: 0.5em;\n\">\n        <p>\n          <i class=\"glyphicon glyphicon-remove-sign\" />\n          <strong>\n            <a\n              href=\"https://floip.gitbooks.io/flow-specification/content/fundamentals/expressions.html\"\n              target=\"_blank\">FLOIP Expression</a>\n            {{ 'flow-builder.error-found' | trans }}\n          </strong>\n        </p>\n\n        <p>\n          <!-- NOTE: Funky source formatting to mitigate spaces between parens -->\n          <em>\n            {{ contentExpressionAST.message }}\n            (<span v-if=\"contentExpressionAST.location.start.line !== 1\">{{ 'flow-builder.on-line' | trans }}\n              {{ contentExpressionAST.location.start.line }},\n            </span>{{ 'flow-builder.at-character' | trans }} {{ contentExpressionAST.location.start.column }})\n          </em>\n        </p>\n      </div>\n    </div>\n\n    <!--    <template v-if=\"!isEditable\">-->\n    <!--      <p v-if=\"content\">{{content}}</p>-->\n    <!--      <p>-->\n    <!--        <em class=\"text-muted\">{{'flow-builder.no-sms-content-yet' | trans}}</em>-->\n    <!--      </p>-->\n    <!--    </template>-->\n  </div>\n</template>\n\n<script lang=\"js\">\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types,@typescript-eslint/strict-boolean-expressions */\nimport Vue from 'vue'\nimport {lang} from '@/lib/filters/lang'\nimport {parse as floipExpressionParser} from '@floip/expression-parser'\nimport {isObject, some} from 'lodash'\nimport VueFocus from 'vue-focus'\nimport {mapActions} from 'vuex'\nimport {BTooltip} from 'bootstrap-vue'\n\n// import BlockContentAutogenButton from './BlockContentAutogenButton'\n\nVue.component('BTooltip', BTooltip)\n\nexport default {\n  components: {\n    // BlockContentAutogenButton,\n  },\n  mixins: [lang, VueFocus.mixin],\n\n  props: {\n    isEditable: Boolean,\n\n    label: {\n      type: String,\n      default: null,\n    },\n\n    placeholder: {\n      type: String,\n      default: null,\n    },\n\n    resourceId: {\n      type: String,\n      default: null,\n    },\n    resourceVariant: {\n      // as () => IResourceValue\n      type: Object,\n      default: null,\n    },\n    mode: {\n      type: String,\n      default: null,\n    },\n\n    enableAutogenButton: {\n      type: Boolean,\n      default: true,\n    },\n\n    rows: {\n      type: Number,\n      default: 2,\n    },\n\n    // maybe!?\n\n    // block: Object,\n    // langId: [String, Number],\n    // type: String,\n    // pathToTextContent: String,\n  },\n\n  data: () => ({isSelected: false}),\n\n  computed: {\n    content: {\n      get() {\n        return this.resourceVariant.value\n      },\n\n      set(value) {\n        const {resourceId, mode} = this\n        const {language_id: languageId, content_type: contentType} = this.resourceVariant\n\n        this.$emit('beforeResourceVariantChanged', {variant: this.resourceVariant, resourceId})\n        this.resource_setOrCreateValueModeSpecific({\n          resourceId,\n          filter: {language_id: languageId, content_type: contentType, modes: [mode]},\n          value,\n        })\n        this.$emit('afterResourceVariantChanged', {variant: this.resourceVariant, resourceId})\n      },\n    },\n\n    contentExpressionAST() {\n      let ast = []\n\n      try {\n        ast = floipExpressionParser(this.content)\n      } catch (e) {\n        if (e instanceof SyntaxError || e.name === 'SyntaxError') {\n          return e\n        }\n      }\n\n      const hasMembers = some(ast, isObject)\n      return hasMembers\n        ? ast\n        : null\n    },\n\n    doesContentContainExpression() {\n      return !!this.contentExpressionAST\n    },\n\n    doesContentContainExpressionError() {\n      return !!(this.contentExpressionAST instanceof Error)\n    },\n\n    characterCounter() {\n      const\n        hasUnicode = !/^[\\x00-\\x7F]*$/.test(this.content)\n      const count = this.content.length\n\n      console.debug('BlockTextContentEditorForLangAndType', 'characterCounter', {hasUnicode, count})\n\n      return {\n        hasUnicode,\n        count,\n        pages: hasUnicode ? Math.ceil(count / 70) : Math.ceil(count / 160),\n      }\n    },\n  },\n\n  methods: {\n    ...mapActions('flow', ['resource_setOrCreateValueModeSpecific']),\n\n    select() {\n      this.isSelected = true\n    },\n    deselect() {\n      this.isSelected = false\n    },\n\n    // debouncedSaveTree: debounce(function () {\n    //   this.$store.dispatch('attemptSaveTree')\n    // }, 500),\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.resource-variant-text-editor {\n  margin-bottom: 10px;\n}\n\n.block-text-content-editor-for-lang-and-type {\n  margin-bottom: 0.5em;\n\n  .content-editor {\n    position: relative;\n\n    textarea {\n      height: 56px;\n    }\n\n    textarea, input[type=\"text\"] {\n      &:not(:focus) {\n        + button {\n          opacity: 1;\n        }\n      }\n\n      + button {\n        position: absolute;\n        bottom: 7px;\n        // 15px padding => parent, 8px padding => textarea\n        right: 10px; //15px + 7px;\n\n        transition: opacity 200ms ease-in-out;\n        opacity: 0;\n      }\n    }\n\n    &-selected {\n      textarea, input[type=\"text\"] {\n        background-color: #F8F8F8;\n        //border-color: #DDDDDD;\n      }\n    }\n  }\n\n  .content-toolbar {\n    margin-top: 1px;\n  }\n}\n\n.invisible {\n  opacity: 0;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceVariantTextEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceVariantTextEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ResourceVariantTextEditor.vue?vue&type=template&id=0ce279b0&scoped=true&\"\nimport script from \"./ResourceVariantTextEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./ResourceVariantTextEditor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ResourceVariantTextEditor.vue?vue&type=style&index=0&id=0ce279b0&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0ce279b0\",\n  null\n  \n)\n\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioLibrarySelection.vue?vue&type=style&index=0&lang=scss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"f82b14ce\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","import mod from \"-!../../../../node_modules/vue-style-loader/index.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PhoneRecordingRecorderSelector.vue?vue&type=style&index=0&id=41756c06&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PhoneRecordingRecorderSelector.vue?vue&type=style&index=0&id=41756c06&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".resource-variant-text-editor[data-v-0ce279b0]{margin-bottom:10px}.block-text-content-editor-for-lang-and-type[data-v-0ce279b0]{margin-bottom:.5em}.block-text-content-editor-for-lang-and-type .content-editor[data-v-0ce279b0]{position:relative}.block-text-content-editor-for-lang-and-type .content-editor textarea[data-v-0ce279b0]{height:56px}.block-text-content-editor-for-lang-and-type .content-editor input[type=text]:not(:focus)+button[data-v-0ce279b0],.block-text-content-editor-for-lang-and-type .content-editor textarea:not(:focus)+button[data-v-0ce279b0]{opacity:1}.block-text-content-editor-for-lang-and-type .content-editor input[type=text]+button[data-v-0ce279b0],.block-text-content-editor-for-lang-and-type .content-editor textarea+button[data-v-0ce279b0]{position:absolute;bottom:7px;right:10px;transition:opacity .2s ease-in-out;opacity:0}.block-text-content-editor-for-lang-and-type .content-editor-selected input[type=text][data-v-0ce279b0],.block-text-content-editor-for-lang-and-type .content-editor-selected textarea[data-v-0ce279b0]{background-color:#f8f8f8}.block-text-content-editor-for-lang-and-type .content-toolbar[data-v-0ce279b0]{margin-top:1px}.invisible[data-v-0ce279b0]{opacity:0}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceEditor.vue?vue&type=style&index=0&id=dd0260a8&scoped=true&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"01b640c1\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","import mod from \"-!../../../node_modules/vue-style-loader/index.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioLibrarySearchField.vue?vue&type=style&index=0&id=22499358&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/vue-style-loader/index.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioLibrarySearchField.vue?vue&type=style&index=0&id=22499358&lang=scss&scoped=true&\"","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioLibrarySearchField.vue?vue&type=style&index=0&id=22499358&lang=scss&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"8d873f5c\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PhoneRecordingRecorderSelector.vue?vue&type=style&index=0&id=41756c06&lang=scss&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"63295499\", content, true, {\"sourceMap\":false,\"shadowMode\":false});"],"sourceRoot":""}