(("undefined"!==typeof self?self:this)["webpackJsonpflow_builder"]=("undefined"!==typeof self?self:this)["webpackJsonpflow_builder"]||[]).push([[3],{"3dbb":function(t,e,o){"use strict";var r=o("e8ee"),n=o.n(r);n.a},"7d8c":function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"new-contents"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-sm-8 offset-sm-2"},[o("div",{staticClass:"card"},[o("div",{staticClass:"card-body"},[o("div",[o("h2",[t._v(" "+t._s(t._f("trans")("flow-builder.import-flow"))+" ")]),o("p",[t._v(t._s(t._f("trans")("flow-builder.create-flow-from-json")))]),o("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v(" "+t._s(t._f("trans")("flow-builder.import-note"))+" ")])]),o("div",[o("label",{staticClass:"mt-2 no-weight"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.uploadOrPaste,expression:"uploadOrPaste"}],attrs:{type:"radio",value:"upload"},domProps:{checked:t._q(t.uploadOrPaste,"upload")},on:{change:function(e){t.uploadOrPaste="upload"}}}),t._v(" "+t._s(t._f("trans")("flow-builder.import-json-file"))+" ")]),"upload"===t.uploadOrPaste?o("div",{staticClass:"ml-3 mr-3"},[o("div",{staticClass:"form-inline mb-2"},[o("span",{staticClass:"one-line"},[o("a",{staticClass:"btn btn-outline-secondary",on:{click:t.chooseFile}},[t._v(" "+t._s(t._f("trans")("flow-builder.import-file"))+" ")]),o("input",{ref:"file",attrs:{id:"flowUpload",type:"file",hidden:""},on:{change:t.handleFileUpload}}),t.fileName?o("strong",{staticClass:"ml-1"},[t._v(t._s(t._f("trans")("flow-builder.uploaded-file")))]):t._e(),t._v(" "+t._s(t.fileName)+" ")])]),t.flowJsonText?o("text-editor",{staticClass:"tall-text",attrs:{value:t.flowJson,label:"",placeholder:t._f("trans")("flow-builder.edit-flow-json")},on:{input:t.setUpdatingAndHandleFlowJsonTextChange}}):t._e(),o("error-handler")],1):t._e()]),o("div",{staticClass:"mt-2"},[o("label",{staticClass:"mt-2 no-weight"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.uploadOrPaste,expression:"uploadOrPaste"}],attrs:{type:"radio",value:"paste"},domProps:{checked:t._q(t.uploadOrPaste,"paste")},on:{change:function(e){t.uploadOrPaste="paste"}}}),t._v(" "+t._s(t._f("trans")("flow-builder.paste-json-directly"))+" ")]),"paste"===t.uploadOrPaste?o("div",{staticClass:"ml-3 mr-3"},[o("text-editor",{staticClass:"tall-text",attrs:{value:t.flowJson,label:"",placeholder:t._f("trans")("flow-builder.paste-flow-json")},on:{input:t.setUpdatingAndHandleFlowJsonTextChange}}),o("error-handler")],1):t._e()]),o("div",{staticClass:"float-right mt-3"},[o("router-link",{staticClass:"btn btn-outline-secondary mr-2",attrs:{to:t.route("flows.cancelImport")}},[t._v(" "+t._s(t.trans("flow-builder.cancel"))+" ")]),o("a",{staticClass:"btn btn-primary",class:{disabled:t.disableContinue},attrs:{href:t.route("trees.editTree",{treeId:t.flowUUID,component:"interaction-designer",mode:"edit"})},on:{click:function(e){e.preventDefault(),t.handleImportFlow(t.route("trees.editTree",{treeId:t.flowUUID,component:"interaction-designer",mode:"edit"}))}}},[t._v(" "+t._s(t._f("trans")("flow-builder.create-flow"))+" ")])],1)])])])])])},n=[],s=(o("b0c0"),o("d3b7"),o("25f0"),o("96cf"),o("1da1")),i=o("d4ec"),a=o("bee2"),c=o("262e"),l=o("2caf"),u=o("9ab4"),p=o("4a51"),d=o("d39e"),f=o("60a3"),g=o("8bbf"),h=o.n(g),b=o("4bb5"),m=o("2ef0"),w=o("0613"),v=o("d883"),_=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[t.updating?o("div",[o("br"),o("div",{staticClass:"spinner-border",attrs:{role:"status"}},[o("span",{staticClass:"sr-only"},[t._v(t._s(t._f("trans")("flow-builder.loading")))])])]):t._e(),t.flowError?o("div",{staticClass:"alert alert-danger mt-3",attrs:{role:"alert"}},[t._v(" "+t._s(t._f("trans")(t.flowError,t.flowErrorInterpolations))+" ")]):t._e(),t.hasUnsupportedBlockClasses?o("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v(" "+t._s(t.trans("flow-builder.unsupported-blocks-detected")+": "+t.unsupportedBlockClassesList)+" ")]):t._e(),t.languagesMissing?o("import-matcher",{staticClass:"mt-2",attrs:{"missing-matches":t.missingLanguages,"type-id":"id","type-label":"label","existing-options-without-match":t.existingLanguagesWithoutMatch,"match-not-found-text":"flow-builder.match-for-languages-not-found"},on:{reactToMatch:t.handleMatchLanguage}}):t._e(),t.propertiesMissing?o("import-matcher",{staticClass:"mt-2",attrs:{"missing-matches":t.missingProperties,"type-id":"name","type-label":"name","existing-options-without-match":t.existingPropertiesWithoutMatch,"match-not-found-text":"flow-builder.match-for-properties-not-found"},on:{reactToMatch:t.handleMatchProperty}}):t._e(),t.groupsMissing?o("import-matcher",{staticClass:"mt-2",attrs:{"missing-matches":t.missingGroups,"type-id":"id","type-label":"group_name","existing-options-without-match":t.existingGroupsWithoutMatch,"match-not-found-text":"flow-builder.match-for-groups-not-found"},on:{reactToMatch:t.handleMatchGroup}}):t._e()],1)},O=[],j=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("label",[t._v(t._s(t._f("trans")(t.matchNotFoundText)))]),t._l(t.missingMatches,(function(e){return o("div",{key:t.getIdentifier(e)+"-missing"},[o("div",{staticClass:"form-check form-check-inline full-width"},[o("div",{staticClass:"row full-width ml-1"},[o("div",{staticClass:"col-xl-2 col-md-3"},[o("label",{staticClass:"form-check-label full-width mt-2 mb-2"},[t._v(t._s(t.getLabel(e)))])]),o("div",{staticClass:"col-xl-8 col-md-6"},[o("select",{staticClass:"form-control full-width",on:{change:function(o){return t.updateMappings(e,o)}}},[o("option",{key:"default",attrs:{value:""},domProps:{selected:t.mappingsEmpty}},[t._v(" "+t._s(t._f("trans")("flow-builder.none-selected"))+" ")]),t._l(t.existingOptionsWithoutMatch,(function(e){return o("option",{key:t.getIdentifier(e)+"-option",domProps:{value:JSON.stringify(e)}},[t._v(" "+t._s(e)+" ")])}))],2)]),o("div",{staticClass:"col-xl-2 col-md-3"},[o("button",{staticClass:"btn btn-primary full-width",on:{click:function(o){return t.handleMatch(e)}}},[t._v(" "+t._s(t._f("trans")("flow-builder.update"))+" ")])])])])])}))],2)},y=[],k=function(t){Object(c["a"])(o,t);var e=Object(l["a"])(o);function o(){var t;return Object(i["a"])(this,o),t=e.apply(this,arguments),t.mappings={},t}return Object(a["a"])(o,[{key:"getLabel",value:function(t){return Object(m["get"])(t,this.typeLabel,"")}},{key:"getIdentifier",value:function(t){return Object(m["get"])(t,this.typeId,"")}},{key:"updateMappings",value:function(t,e){this.mappings[this.getIdentifier(t)]=e.target.value}},{key:"handleMatch",value:function(t){var e=Object(m["get"])(this.mappings,this.getIdentifier(t));if(e){var o=JSON.parse(e);this.$emit("reactToMatch",t,o),this.mappings=Object(m["omit"])(this.mappings,this.getIdentifier(t))}}},{key:"mappingsEmpty",get:function(){return Object(m["isEmpty"])(this.mappings)}}]),o}(h.a);Object(u["__decorate"])([Object(f["b"])({default:""})],k.prototype,"matchNotFoundText",void 0),Object(u["__decorate"])([Object(f["b"])({required:!0})],k.prototype,"typeId",void 0),Object(u["__decorate"])([Object(f["b"])({required:!0})],k.prototype,"typeLabel",void 0),Object(u["__decorate"])([Object(f["b"])({required:!0})],k.prototype,"missingMatches",void 0),Object(u["__decorate"])([Object(f["b"])({required:!0})],k.prototype,"existingOptionsWithoutMatch",void 0),k=Object(u["__decorate"])([Object(f["a"])({mixins:[p["a"]]})],k);var M=k,C=M,x=(o("3dbb"),o("2877")),P=Object(x["a"])(C,j,y,!1,null,null,null),G=P.exports,E=Object(b["e"])("flow/import"),L=function(t){Object(c["a"])(o,t);var e=Object(l["a"])(o);function o(){return Object(i["a"])(this,o),e.apply(this,arguments)}return Object(a["a"])(o,[{key:"handleMatchLanguage",value:function(t,e){this.matchLanguage({oldLanguage:t,matchingNewLanguage:e})}},{key:"handleMatchProperty",value:function(t,e){this.matchProperty({oldProperty:t,matchingNewProperty:e})}},{key:"handleMatchGroup",value:function(t,e){this.matchGroup({oldGroup:t,matchingNewGroup:e})}}]),o}(h.a);Object(u["__decorate"])([b["b"]],L.prototype,"blockClasses",void 0),Object(u["__decorate"])([E.Action],L.prototype,"matchLanguage",void 0),Object(u["__decorate"])([E.Action],L.prototype,"matchProperty",void 0),Object(u["__decorate"])([E.Action],L.prototype,"matchGroup",void 0),Object(u["__decorate"])([E.Getter],L.prototype,"hasUnsupportedBlockClasses",void 0),Object(u["__decorate"])([E.Getter],L.prototype,"unsupportedBlockClassesList",void 0),Object(u["__decorate"])([E.Getter],L.prototype,"languagesMissing",void 0),Object(u["__decorate"])([E.Getter],L.prototype,"groupsMissing",void 0),Object(u["__decorate"])([E.Getter],L.prototype,"propertiesMissing",void 0),Object(u["__decorate"])([E.State],L.prototype,"flowError",void 0),Object(u["__decorate"])([E.State],L.prototype,"flowErrorInterpolations",void 0),Object(u["__decorate"])([E.State],L.prototype,"flowContainer",void 0),Object(u["__decorate"])([E.State],L.prototype,"missingLanguages",void 0),Object(u["__decorate"])([E.State],L.prototype,"existingLanguagesWithoutMatch",void 0),Object(u["__decorate"])([E.State],L.prototype,"missingProperties",void 0),Object(u["__decorate"])([E.State],L.prototype,"existingPropertiesWithoutMatch",void 0),Object(u["__decorate"])([E.State],L.prototype,"missingGroups",void 0),Object(u["__decorate"])([E.State],L.prototype,"existingGroupsWithoutMatch",void 0),Object(u["__decorate"])([E.State],L.prototype,"updating",void 0),L=Object(u["__decorate"])([Object(f["a"])({components:{ImportMatcher:G},mixins:[p["a"]]})],L);var F=L,B=F,J=Object(x["a"])(B,_,O,!1,null,null,null),I=J.exports,T=(o("4160"),o("d81d"),o("13d5"),o("159b"),o("5530")),W=o("90d2"),S={languagesMissing:function(t){return!Object(m["isEmpty"])(t.missingLanguages)},propertiesMissing:function(t){return!Object(m["isEmpty"])(t.missingProperties)},groupsMissing:function(t){return!Object(m["isEmpty"])(t.missingGroups)},hasUnsupportedBlockClasses:function(t,e){return!Object(m["isEmpty"])(e.unsupportedBlockClasses)},unsupportedBlockClasses:function(t,e,o,r){return Object(m["difference"])(e.uploadedBlockTypes,r.blockClasses)},unsupportedBlockClassesList:function(t,e){return Object(m["join"])(e.unsupportedBlockClasses,", ")},uploadedBlockTypes:function(t){return Object(m["uniq"])(Object(m["get"])(t.flowContainer,"flows[0].blocks",[]).map((function(t){return t.type})))}},U={setUpdating:function(t,e){t.updating=e},baseReset:function(t){t.flowContainer=null,t.flowJsonText="",t.flowError="",t.propertyBlocks=[],t.groupBlocks=[]},resetLanguageMatching:function(t){t.matchingLanguages=[],t.missingLanguages=[],t.existingLanguagesWithoutMatch=[]},resetPropertyMatching:function(t){t.matchingLanguages=[],t.blocksMissingProperties={},t.missingProperties=[],t.existingPropertiesWithoutMatch=[]},resetGroupMatching:function(t){t.matchingGroups=[],t.blocksMissingGroups={},t.missingGroups=[],t.existingGroupsWithoutMatch=[]},addMissingLanguage:function(t,e){t.missingLanguages.push(e)},setMissingLanguages:function(t,e){t.missingLanguages=e},setMatchingLanguages:function(t,e){t.matchingLanguages=e},setExistingLanguagesWithoutMatch:function(t,e){t.existingLanguagesWithoutMatch=e},setFlowLanguages:function(t,e){if(!t.flowContainer)throw new Error("flowContainer is not set");t.flowContainer.flows[0].languages=e},setFlowResources:function(t,e){if(!t.flowContainer)throw new Error("flowContainer is not set");t.flowContainer.resources=e},addFlowLanguage:function(t,e){if(!t.flowContainer)throw new Error("flowContainer is not set");t.flowContainer.flows[0].languages.push(e)},setFlowJsonText:function(t,e){t.flowJsonText=e},setFlowContainer:function(t,e){t.flowContainer=e},setFlowContainerBlocks:function(t,e){t.flowContainer&&Object(m["set"])(t.flowContainer,"flows[0].blocks",e)},setFlowErrorWithInterpolations:function(t,e){var o=e.text,r=e.interpolations;t.flowError=o,t.flowErrorInterpolations=r},setFlowError:function(t,e){t.flowError=e,t.flowErrorInterpolations=null},setGroupBlocks:function(t,e){t.groupBlocks=e},setPropertyBlocks:function(t,e){t.propertyBlocks=e},setBlocksMissingProperties:function(t,e){t.blocksMissingProperties=e},setMissingProperties:function(t,e){t.missingProperties=e},setMatchingProperties:function(t,e){t.matchingProperties=e},setExistingPropertiesWithoutMatch:function(t,e){t.existingPropertiesWithoutMatch=e},setBlocksMissingGroups:function(t,e){t.blocksMissingGroups=e},setMissingGroups:function(t,e){t.missingGroups=e},setMatchingGroups:function(t,e){t.matchingGroups=e},setExistingGroupsWithoutMatch:function(t,e){t.existingGroupsWithoutMatch=e}},R={setFlowJson:function(t,e){return Object(s["a"])(regeneratorRuntime.mark((function o(){var r,n,s,i,a,c,l,u,p;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:r=t.commit,n=t.state,s=t.dispatch,r("setFlowError",""),r("setFlowJsonText",e),o.prev=3,i=JSON.parse(n.flowJsonText),o.next=14;break;case 7:return o.prev=7,o.t0=o["catch"](3),r("resetLanguageMatching"),r("resetPropertyMatching"),r("resetGroupMatching"),r("setFlowError","flow-builder.invalid-json-provided"),o.abrupt("return");case 14:if(Object(W["a"])(i)){o.next=17;break}return r("setFlowError","flow-builder.importer-currently-supports-single-flow-only"),o.abrupt("return");case 17:return o.next=19,s("validation/validate_flowContainer",{flowContainer:i},{root:!0});case 19:if(a=o.sent,a.isValid){o.next=23;break}return r("setFlowErrorWithInterpolations",{text:"flow-builder.flow-invalid",interpolations:{version:i.specification_version}}),o.abrupt("return");case 23:if(c=Object(m["cloneDeep"])(n.flowContainer),l=Object(m["cloneDeep"])(i),r("setFlowContainer",i),!Object(W["c"])({flowContainer:l,oldFlowContainer:c})){o.next=29;break}return o.next=29,s("validateLanguages",n.flowContainer);case 29:if(u=Object(W["f"])(i),!Object(W["d"])({newPropertyBlocks:u,oldPropertyBlocks:n.propertyBlocks})){o.next=34;break}return r("setPropertyBlocks",u),o.next=34,s("validateProperties",n.propertyBlocks);case 34:if(p=Object(W["e"])(i),!Object(W["b"])({newGroupBlocks:p,oldGroupBlocks:n.groupBlocks})){o.next=39;break}return r("setGroupBlocks",p),o.next=39,s("validateGroups",n.groupBlocks);case 39:r("setFlowJsonText",JSON.stringify(n.flowContainer,null,2));case 40:case"end":return o.stop()}}),o,null,[[3,7]])})))()},validateLanguages:function(t,e){return Object(s["a"])(regeneratorRuntime.mark((function o(){var r,n,s,i,a;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:r=t.state,n=t.commit,s=t.rootGetters,i=Object(m["get"])(e,"flows[0].languages",[]),a=[],i&&(i.forEach((function(t){var e=Object(m["find"])(s.languages,(function(e){return Object(m["isEqual"])(e,t)}));e?a.push(t):n("addMissingLanguage",t)})),n("setMatchingLanguages",a),n("setFlowLanguages",r.matchingLanguages),n("setExistingLanguagesWithoutMatch",Object(m["differenceWith"])(s.languages,r.matchingLanguages,m["isEqual"])));case 4:case"end":return o.stop()}}),o)})))()},validateProperties:function(t,e){return Object(s["a"])(regeneratorRuntime.mark((function o(){var r,n,s,i,a;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:r=t.rootGetters,n=t.state,s=t.commit,i=[],a=Object(m["cloneDeep"])(n.blocksMissingProperties),e.forEach((function(t){var e=Object(m["get"])(t,"config.set_contact_property.property_key");if(e){var o=Object(m["find"])(r.subscriberPropertyFields,(function(t){return Object(m["isEqual"])(t.name,e)}));o?i.push(o):(Object(m["get"])(a,e)||(a[e]=[]),a[e].push(t.uuid))}})),s("setBlocksMissingProperties",a),s("setMissingProperties",Object(m["keys"])(n.blocksMissingProperties).map((function(t){return{name:t,blockIds:n.blocksMissingProperties[t]}}))),s("setMatchingProperties",i),s("setExistingPropertiesWithoutMatch",Object(m["differenceWith"])(r.subscriberPropertyFields,n.matchingProperties,m["isEqual"]));case 8:case"end":return o.stop()}}),o)})))()},validateGroups:function(t,e){return Object(s["a"])(regeneratorRuntime.mark((function o(){var r,n,s,i,a;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:r=t.rootGetters,n=t.state,s=t.commit,i=[],a=Object(m["cloneDeep"])(n.blocksMissingGroups),e.forEach((function(t){var e=Object(m["get"])(t,"config.group_key"),o=Object(m["get"])(t,"config.group_name");if(e){var n=Object(m["find"])(r.groups,(function(t){return Object(m["isEqual"])(t.id,e)&&Object(m["isEqual"])(t.name,o)}));n?i.push(n):(Object(m["get"])(a,e)||(a[e]={group_name:o,blockIds:[]}),a[e].blockIds.push(t.uuid))}})),s("setBlocksMissingGroups",a),s("setMissingGroups",Object(m["keys"])(n.blocksMissingGroups).map((function(t){return Object(T["a"])({id:t},n.blocksMissingGroups[t])}))),s("setMatchingGroups",i),s("setExistingGroupsWithoutMatch",Object(m["differenceWith"])(r.groups,n.matchingGroups,m["isEqual"]));case 8:case"end":return o.stop()}}),o)})))()},matchLanguage:function(t,e){var o=t.commit,r=t.state,n=t.dispatch,s=e.oldLanguage,i=e.matchingNewLanguage;o("addFlowLanguage",i),o("setFlowResources",Object(W["h"])(Object(m["get"])(r.flowContainer,"resources",[]),s.id,i.id)),o("setFlowJsonText",JSON.stringify(r.flowContainer,null,2)),o("setMissingLanguages",Object(m["reject"])(r.missingLanguages,(function(t){return Object(m["isEqual"])(t,s)}))),n("validateLanguages",r.flowContainer)},matchProperty:function(t,e){var o=t.commit,r=t.state,n=t.dispatch,s=e.oldProperty,i=e.matchingNewProperty,a=Object(m["cloneDeep"])(Object(m["get"])(r.flowContainer,"flows[0].blocks"));if(a){s.blockIds.forEach((function(t){var e=Object(m["findIndex"])(a,(function(e){return e.uuid===t}));e<0||Object(m["set"])(a,"".concat(e,".config.set_contact_property.property_key"),i.name)})),o("setFlowContainerBlocks",a),o("setFlowJsonText",JSON.stringify(r.flowContainer,null,2));var c={};o("setBlocksMissingProperties",Object(m["keys"])(r.blocksMissingProperties).reduce((function(t,e){return s.name!==e&&(t[e]=r.blocksMissingProperties[e]),t}),c)),o("setPropertyBlocks",Object(W["f"])(r.flowContainer)),n("validateProperties",r.propertyBlocks)}},matchGroup:function(t,e){var o=t.commit,r=t.state,n=t.dispatch,s=e.oldGroup,i=e.matchingNewGroup,a=Object(m["cloneDeep"])(Object(m["get"])(r.flowContainer,"flows[0].blocks"));if(a){s.blockIds.forEach((function(t){var e=Object(m["findIndex"])(a,(function(e){return e.uuid===t}));e<0||(Object(m["set"])(a,"".concat(e,".config.group_key"),i.id),Object(m["set"])(a,"".concat(e,".config.group_name"),i.name))})),o("setFlowContainerBlocks",a),o("setFlowJsonText",JSON.stringify(r.flowContainer,null,2));var c={};o("setBlocksMissingGroups",Object(m["keys"])(r.blocksMissingGroups).reduce((function(t,e){return s.id!==e&&(t[e]=r.blocksMissingGroups[e]),t}),c)),o("setGroupBlocks",Object(W["e"])(r.flowContainer)),n("validateGroups",r.groupBlocks)}}},N=function(){return{matchingLanguages:[],missingLanguages:[],existingLanguagesWithoutMatch:[],blocksMissingProperties:{},missingProperties:[],matchingProperties:[],existingPropertiesWithoutMatch:[],blocksMissingGroups:{},missingGroups:[],matchingGroups:[],existingGroupsWithoutMatch:[],flowContainer:null,flowJsonText:"",flowError:"",flowErrorInterpolations:null,propertyBlocks:[],groupBlocks:[],updating:!1}},q={namespaced:!0,state:N,getters:S,mutations:U,actions:R},D=Object(b["e"])("flow"),A=Object(b["e"])("flow/import"),$=function(t){Object(c["a"])(o,t);var e=Object(l["a"])(o);function o(){var t;return Object(i["a"])(this,o),t=e.apply(this,arguments),t.uploadOrPasteSetting="upload",t.fileName="",t.debounceHandleFlowJsonTextChange=Object(m["debounce"])(t.handleFlowJsonTextChange,2e3),t}return Object(a["a"])(o,[{key:"created",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=this.$store,Object(m["forEach"])(w["a"].modules,(function(t,o){return!e.hasModule(o)&&e.registerModule(o,t)})),e.hasModule(["flow","import"])||e.registerModule(["flow","import"],q),(Object(m["isEmpty"])(this.appConfig)||Object(m["isEmpty"])(this.builderConfig))&&this.isConfigured||this.configure({appConfig:this.appConfig,builderConfig:this.builderConfig});case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"reset",value:function(){this.fileName="",this.baseReset(),this.resetLanguageMatching(),this.resetPropertyMatching(),this.resetGroupMatching()}},{key:"setUpdatingAndHandleFlowJsonTextChange",value:function(t){this.setUpdating(!0),this.debounceHandleFlowJsonTextChange(t)}},{key:"handleFlowJsonTextChange",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.flowJson=e,this.setUpdating(!1);case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"chooseFile",value:function(){var t=this.$refs.file;t.click()}},{key:"handleFileUpload",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var o,r,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.reset(),o=e.target.files[0],this.fileName=o.name,e.target.value="",r=new FileReader,r.onload=function(t){n.flowJson=t.target.result.toString()},r.readAsText(o,"UTF-8");case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"handleImportFlow",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.flow_import({persistRoute:this.route("flows.persistFlow",{flowId:this.flowContainer.uuid}),flowContainer:this.flowContainer});case 2:o=t.sent,o?(this.reset(),this.$router.push(e)):this.setFlowError("flow-builder.problem-importing-flow");case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"uploadOrPaste",get:function(){return this.uploadOrPasteSetting},set:function(t){t!==this.uploadOrPasteSetting&&this.reset(),this.uploadOrPasteSetting=t}},{key:"flowJson",get:function(){return this.flowJsonText},set:function(t){this.setFlowJson(t)}},{key:"disableContinue",get:function(){return!this.flowUUID||this.flowError||this.languagesMissing||this.propertiesMissing||this.groupsMissing||this.hasUnsupportedBlockClasses}},{key:"flowUUID",get:function(){return Object(m["get"])(this.flowContainer,"flows[0].uuid")}}]),o}(h.a);Object(u["__decorate"])([Object(f["b"])({default:function(){return{}}})],$.prototype,"appConfig",void 0),Object(u["__decorate"])([Object(f["b"])({default:function(){return{}}})],$.prototype,"builderConfig",void 0),Object(u["__decorate"])([D.Action],$.prototype,"flow_import",void 0),Object(u["__decorate"])([b["c"]],$.prototype,"configure",void 0),Object(u["__decorate"])([b["b"]],$.prototype,"isConfigured",void 0),Object(u["__decorate"])([A.Getter],$.prototype,"hasUnsupportedBlockClasses",void 0),Object(u["__decorate"])([A.Getter],$.prototype,"languagesMissing",void 0),Object(u["__decorate"])([A.Getter],$.prototype,"groupsMissing",void 0),Object(u["__decorate"])([A.Getter],$.prototype,"propertiesMissing",void 0),Object(u["__decorate"])([A.Action],$.prototype,"setFlowJson",void 0),Object(u["__decorate"])([A.Mutation],$.prototype,"baseReset",void 0),Object(u["__decorate"])([A.Mutation],$.prototype,"resetLanguageMatching",void 0),Object(u["__decorate"])([A.Mutation],$.prototype,"resetGroupMatching",void 0),Object(u["__decorate"])([A.Mutation],$.prototype,"resetPropertyMatching",void 0),Object(u["__decorate"])([A.Mutation],$.prototype,"setFlowError",void 0),Object(u["__decorate"])([A.Mutation],$.prototype,"setUpdating",void 0),Object(u["__decorate"])([A.State],$.prototype,"flowError",void 0),Object(u["__decorate"])([A.State],$.prototype,"flowJsonText",void 0),Object(u["__decorate"])([A.State],$.prototype,"flowContainer",void 0),$=Object(u["__decorate"])([Object(f["a"])({components:{TextEditor:v["a"],ErrorHandler:I},mixins:[p["a"],d["a"]]})],$);var H=$,V=H,z=(o("872f"),Object(x["a"])(V,r,n,!1,null,null,null));e["default"]=z.exports},"872f":function(t,e,o){"use strict";var r=o("8d25"),n=o.n(r);n.a},"8c98":function(t,e,o){var r=o("24fb");e=r(!1),e.push([t.i,".tall-text textarea{min-height:200px}.one-line{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}",""]),t.exports=e},"8d25":function(t,e,o){var r=o("8c98");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var n=o("499e").default;n("4affecbc",r,!0,{sourceMap:!1,shadowMode:!1})},aaec:function(t,e,o){var r=o("24fb");e=r(!1),e.push([t.i,".full-width{width:100%}",""]),t.exports=e},e8ee:function(t,e,o){var r=o("aaec");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var n=o("499e").default;n("000fd584",r,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=flow-builder.umd.min.chunk-builder.js.map