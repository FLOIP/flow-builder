(("undefined"!==typeof self?self:this)["webpackJsonpflow_builder"]=("undefined"!==typeof self?self:this)["webpackJsonpflow_builder"]||[]).push([[1],{"0be7":function(e,t,a){var o=a("24fb");t=o(!1),t.push([e.i,".block-text-content-editor-for-lang-and-type{margin-bottom:.5em}.block-text-content-editor-for-lang-and-type .content-editor{position:relative}.block-text-content-editor-for-lang-and-type .content-editor textarea{height:56px}.block-text-content-editor-for-lang-and-type .content-editor input[type=text]:not(:focus)+button,.block-text-content-editor-for-lang-and-type .content-editor textarea:not(:focus)+button{opacity:1}.block-text-content-editor-for-lang-and-type .content-editor input[type=text]+button,.block-text-content-editor-for-lang-and-type .content-editor textarea+button{position:absolute;bottom:7px;right:10px;transition:opacity .2s ease-in-out;opacity:0}.block-text-content-editor-for-lang-and-type .content-editor-selected input[type=text],.block-text-content-editor-for-lang-and-type .content-editor-selected textarea{background-color:#f8f8f8}.block-text-content-editor-for-lang-and-type .content-toolbar{margin-top:1px}.invisible{opacity:0}",""]),e.exports=t},"192b":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"starting-block-button"},[[a("h4",[e._v(e._s(e._f("trans")("flow-builder.options")))]),a("div",{staticClass:"form-group"},[a("button",{staticClass:"btn btn-secondary btn-sm",attrs:{type:"button",disabled:e.isStartBlock},on:{click:function(t){return e.setStartBlock(t)}}},[e.isStartBlock?[e._v(" "+e._s(e._f("trans")("flow-builder.currently-set-as-starting-block"))+" ")]:[e._v(" "+e._s(e._f("trans")("flow-builder.set-as-starting-block"))+" ")]],2)])]],2)},r=[],n=a("d4ec"),i=a("bee2"),s=a("262e"),l=a("2caf"),c=a("9ab4"),u=a("8bbf"),d=a.n(u),p=a("60a3"),f=a("3a37"),b=a("4bb5"),g=Object(b["c"])("flow"),h=function(e){Object(s["a"])(a,e);var t=Object(l["a"])(a);function a(){return Object(n["a"])(this,a),t.apply(this,arguments)}return Object(i["a"])(a,[{key:"isStartBlock",get:function(){return this.blockId===this.flow.firstBlockId}},{key:"setStartBlock",value:function(e){var t=this.flow.uuid,a=this.blockId;this.flow_setFirstBlockId({flowId:t,blockId:a})}}]),a}(d.a);Object(c["__decorate"])([Object(p["b"])({default:!0})],h.prototype,"isEditable",void 0),Object(c["__decorate"])([Object(p["b"])()],h.prototype,"blockId",void 0),Object(c["__decorate"])([Object(p["b"])()],h.prototype,"flow",void 0),Object(c["__decorate"])([g.Mutation],h.prototype,"flow_setFirstBlockId",void 0),h=Object(c["__decorate"])([Object(p["a"])({mixins:[f["a"]]})],h);var v=h,m=v,y=a("2877"),_=Object(y["a"])(m,o,r,!1,null,null,null);t["a"]=_.exports},"1b4e":function(e,t,a){"use strict";var o,r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("text-editor",{attrs:{"is-editable":e.isEditable,label:e._f("trans")("flow-builder.block-semantic-label"),placeholder:e._f("trans")("flow-builder.enter-block-semantic-label")},model:{value:e.semanticLabel,callback:function(t){e.semanticLabel=t},expression:"semanticLabel"}})],1)},n=[],i=a("ade3"),s=a("5530"),l=a("2f62"),c=a("d883"),u=a("3a37"),d=(o={components:{TextEditor:c["a"]},mixins:[u["a"]],props:{isEditable:{default:!0,type:Boolean},block:{type:Object,required:!0}}},Object(i["a"])(o,"mixins",[u["a"]]),Object(i["a"])(o,"computed",{semanticLabel:{get:function(){return this.block.semanticLabel},set:function(e){this.block_setSemanticLabel({blockId:this.block.uuid,value:e})}}}),Object(i["a"])(o,"methods",Object(s["a"])({},Object(l["c"])("flow",["block_setSemanticLabel"]))),o),p=d,f=a("2877"),b=Object(f["a"])(p,r,n,!1,null,null,null);t["a"]=b.exports},3411:function(e,t,a){"use strict";var o,r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("text-editor",{attrs:{"is-editable":e.isEditable,label:e._f("trans")("flow-builder.block-label"),placeholder:e._f("trans")("flow-builder.enter-block-label")},model:{value:e.label,callback:function(t){e.label=t},expression:"label"}})],1)},n=[],i=a("ade3"),s=a("5530"),l=a("2f62"),c=a("d883"),u=a("3a37"),d=(o={components:{TextEditor:c["a"]},mixins:[u["a"]],props:{isEditable:{default:!0,type:Boolean},block:{type:Object,required:!0}}},Object(i["a"])(o,"mixins",[u["a"]]),Object(i["a"])(o,"computed",{label:{get:function(){return this.block.label},set:function(e){this.block_setLabel({blockId:this.block.uuid,value:e})}}}),Object(i["a"])(o,"methods",Object(s["a"])({},Object(l["c"])("flow",["block_setLabel"]))),o),p=d,f=a("2877"),b=Object(f["a"])(p,r,n,!1,null,null,null);t["a"]=b.exports},"510a":function(e,t,a){"use strict";var o,r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"resource-editor"},[a("hr"),e.label?a("h4",[e._v(e._s(e.label))]):e._e(),e._l(e.flow.languages,(function(t){var o=t.id,r=t.name;return[a("div",{staticClass:"block-content-editor-lang"},[a("h5",{staticClass:"badge badge-info"},[e._v(e._s(e._f("trans")(r||"flow-builder.unknown-language")))])]),e._l(e.flow.supportedModes,(function(t){return[a("h6",[e._v(e._s(e._f("trans")("flow-builder."+t+"-content")))]),e._l(e.discoverContentTypesFor(t),(function(r){return[r===e.SupportedContentType.TEXT?a("resource-variant-text-editor",{attrs:{"resource-id":e.resource.uuid,"resource-variant":e.findOrGenerateStubbedVariantOn(e.resource,{languageId:o,contentType:r,modes:[t]}),mode:t,"is-editable":!0,"enable-autogen-button":!0}}):e._e(),r===e.SupportedContentType.AUDIO?a("div",[e.findAudioResourceVariantFor(e.resource,{languageId:o,contentType:r,modes:[t]})?e._e():[a("upload-monitor",{attrs:{uploadKey:e.block.uuid+":"+o}}),a("ul",{staticClass:"nav nav-tabs"},[a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link active",attrs:{href:"#"},on:{click:function(e){e.preventDefault()}}},[e._v(e._s(e._f("trans")("flow-builder.library")))])]),a("li",{staticClass:"nav-item"},[e.isFeatureAudioUploadEnabled?a("a",{directives:[{name:"flow-uploader",rawName:"v-flow-uploader",value:{target:e.route("trees.resumeableAudioUpload"),token:""+e.block.uuid+o,accept:"audio/*"},expression:"{\n                    target: route('trees.resumeableAudioUpload'),\n                    token: `${block.uuid}${languageId}`,\n                    accept: 'audio/*'}"}],staticClass:"nav-link",attrs:{href:"#"},on:{filesSubmitted:function(t){return e.handleFilesSubmittedFor(e.block.uuid+":"+o,t)},fileSuccess:function(t){return e.handleFileSuccessFor(e.block.uuid+":"+o,o,t)}}},[e._v(" "+e._s(e._f("trans")("flow-builder.upload"))+" ")]):e._e()])])],a("audio-library-selector",{attrs:{audioFiles:e.availableAudio,langId:o,resourceId:e.resource.uuid,selectedAudioFile:e.findOrGenerateStubbedVariantOn(e.resource,{languageId:o,contentType:r,modes:[t]}).value}})],2):e._e()]}))]}))]}))],2)},n=[],i=(a("a4d3"),a("e01a"),a("a9e3"),a("ac1f"),a("1276"),a("5530")),s=a("d4ec"),l=a("bee2"),c=a("262e"),u=a("2caf"),d=a("9ab4"),p=a("4bb5"),f=a("9300"),b=a("3a37"),g=a("ea05"),h=a("e5fd"),v=(a("7db0"),a("ade3")),m=a("ebc7"),y=a.n(m),w=a("2ef0"),k=a.n(w),x={directives:Object(v["a"])({},"flow-uploader",{bind:function(e,t){var a=t.value,o=a.accept,r=a.target,n=a.token,i=new y.a({target:r,singleFile:!0,chunkSize:524288,query:{upload_token:n}});i.support&&(k.a.extend(e.style,{overflow:"hidden"}),i.assignBrowse(e),k.a.chain(e.children).find({tagName:"INPUT",type:"file"}).assign({accept:o}).value(),i.on("filesSubmitted",(function(t,a){return O(e,"filesSubmitted",{files:t,uploader:i})})),i.on("fileProgress",(function(t,a){return O(e,"fileProgress",{file:t,uploader:i})})),i.on("fileSuccess",(function(t,a){return O(e,"fileSuccess",{file:t,uploader:i,json:a})})),i.on("error",(function(t,a){return O(e,"fileSuccess",{file:a,uploader:i,message:t})})))},unbind:function(e,t){}})},O=function(e,t,a){e.dispatchEvent(k.a.extend(new Event(t,{bubbles:!0,cancelable:!0}),{data:a}))},C=a("60a3"),S=a("8bbf"),E=a.n(S),I=a("bb40"),j=a("393e"),F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"audio-library-selector"},[e.selectedAudioFile?a("audio-library-selection",{attrs:{audioFile:e.selectedAudioFile,langId:e.langId},on:{clear:e.clearSelection}}):[a("audio-library-search-field",{attrs:{langId:e.langId,audioFiles:e.audioFiles},on:{select:e.selectAudioFile}})]],2)},A=[],U=a("2f62"),L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"audio-library-search-field dropdown"},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-prepend"},[a("button",{staticClass:"btn btn-outline-secondary dropdown-toggle",class:{active:e.isEntireLibraryModeEnabled},on:{click:function(t){return t.preventDefault(),e.toggleAudioLibrary(t)}}},[a("i",{staticClass:"glyphicon glyphicon-search"})])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.rawQuery,expression:"rawQuery"}],staticClass:"form-control",attrs:{type:"text",placeholder:e._f("trans")("flow-builder.search-audio-library"),disabled:e.isEntireLibraryModeEnabled},domProps:{value:e.rawQuery},on:{focus:e.activate,blur:e.deactivate,input:[function(t){t.target.composing||(e.rawQuery=t.target.value)},e.resetPagination]}})]),e.query||e.isAudioLibraryEmpty||e.isEntireLibraryModeEnabled?a("div",{staticClass:"dropdown-menu"},[e.isEntireLibraryModeEnabled?[a("a",{staticClass:"disabled dropdown-item",attrs:{href:"#"},on:{click:function(e){e.preventDefault()}}},[a("button",{staticClass:"close active",on:{click:e.toggleAudioLibrary}},[e._v("x")]),a("i",{staticClass:"glyphicon glyphicon-info-sign"}),e._v(" "+e._s(e._f("trans")("flow-builder.showing-entire-audio-library"))+"â€¦ ")]),a("div",{staticClass:"dropdown-divider",attrs:{role:"separator"}})]:e._e(),e.isAudioLibraryEmpty?e._e():[e._l(e.search(e.query).slice(e.offset*e.limit,(e.offset+1)*e.limit),(function(t){return a("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),e.select(t)}}},[e._v(" "+e._s(t.description)+" ")])})),e.query.length>=3&&!e.search(e.query).length?a("a",{staticClass:"disabled dropdown-item",attrs:{href:"#"},on:{click:function(e){e.preventDefault()}}},[e._v(" "+e._s(e._f("trans")("flow-builder.no-audio-files-found-for-X"))+' "'),a("em",[e._v(e._s(e.query))]),e._v('". ')]):e._e(),e.query&&e.query.length<3?a("a",{staticClass:"disabled dropdown-item",attrs:{href:"#"},on:{click:function(e){e.preventDefault()}}},[e._v(" "+e._s(e._f("trans")("flow-builder.enter-at-least-three-chars"))+" ")]):e._e(),e.hasPrevious||e.hasNext?[a("div",{staticClass:"dropdown-divider",attrs:{role:"separator"}}),a("div",{staticClass:"pagers dropdown-item"},[a("a",{staticClass:"col-md-6",class:{disabled:!e.hasPrevious},attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.decrementPage(t)}}},[a("i",{staticClass:"glyphicon glyphicon-chevron-left"}),e._v(" "+e._s(e._f("trans")("flow-builder.previous"))+" ")]),a("a",{staticClass:"col-md-6 text-right",class:{disabled:!e.hasNext},attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.incrementPage(t)}}},[e._v(" "+e._s(e._f("trans")("flow-builder.next"))+" "),a("i",{staticClass:"glyphicon glyphicon-chevron-right"})])])]:e._e()],e.isAudioLibraryEmpty?a("a",{staticClass:"disabled dropdown-item",attrs:{href:"#"},on:{click:function(e){e.preventDefault()}}},[a("i",{staticClass:"glyphicon glyphicon-warning-sign"}),e._v(" "+e._s(e._f("trans")("flow-builder.audio-lib-empty-for-this-org"))+" ")]):e._e()],2):e._e()])},M=[],P=(a("841c"),a("498a"),a("ffe7")),T=a.n(P),B=a("f837"),N=a.n(B),D={props:["langId","audioFiles"],mixins:[N.a.mixin,b["a"]],data:function(){return{isActive:!1,rawQuery:"",cache:{},isEntireLibraryModeEnabled:!1,offset:0,limit:10}},computed:{query:function(){return k.a.trim(this.rawQuery)},isAudioLibraryEmpty:function(){return this.isActive&&!this.audioFiles.length},hasNext:function(){return this.search(this.query).length/(this.offset+1)>this.limit},hasPrevious:function(){return this.offset>0}},methods:{search:function(e){if(this.isEntireLibraryModeEnabled)return this.audioFiles;if(e.length<3)return[];if(console.debug("flow-builder.ResourceViewer.AudioLibrarySearchField","searching",e),e in this.cache)return console.debug("flow-builder.ResourceViewer.AudioLibrarySearchField","cache hit",e),this.cache[e];console.debug("flow-builder.ResourceViewer.AudioLibrarySearchField","cache miss",e);var t=["filename","description"];return this.cache[e]=new T.a(this.audioFiles,{keys:t}).search(e)},incrementPage:function(){this.hasNext&&(this.offset+=1)},decrementPage:function(){this.hasPrevious&&(this.offset-=1)},resetPagination:function(){this.offset=0},toggleAudioLibrary:function(){this.isEntireLibraryModeEnabled=!this.isEntireLibraryModeEnabled,this.resetPagination()},select:function(e){this.$emit("select",{value:e,langId:this.langId})},activate:function(){this.isActive=!0},deactivate:function(){this.isActive=!1}}},V=D,$=(a("7c15"),a("2877")),q=Object($["a"])(V,L,M,!1,null,"1df01a30",null),R=q.exports,K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"well well-sm audio-library-selection",class:{"tree-audio-control-text-container-selectable":e.selectable,"tree-audio-control-text-container-selected":!e.selectable},attrs:{"data-audio-file-container-language":e.langId}},[a("button",{staticClass:"audio-library-selection-clear-selection btn-ghost pull-right",on:{click:function(t){return t.preventDefault(),e.clear(t)}}},[a("i",{staticClass:"glyphicon glyphicon-remove"})]),a("div",{staticClass:"btn-group audio-library-selection-download-dropdown"},[e._m(0),a("ul",{staticClass:"dropdown-menu dropdown-menu-right"},[a("li",[a("a",{staticClass:"tree-block-audio-files-download-original",attrs:{href:e.audioFileUrl,target:"_blank"}},[e._v(e._s(e._f("trans")("flow-builder.original-file")))])])])]),a("p",{staticClass:"audio-file-description",attrs:{title:e.audioFileUrl}},[e._v(" "+e._s(e.audioFileUrl)+" ")]),a("div",{staticClass:"btn-toolbar"},[e.selectable?a("button",{staticClass:"btn btn-secondary btn-xs",on:{click:function(t){return t.preventDefault(),e.select(t)}}},[a("i",{staticClass:"glyphicon glyphicon-ok"})]):e._e()])])},z=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"btn btn-ghost dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown"}},[a("span",{staticClass:"glyphicon glyphicon-download-alt",attrs:{"aria-hidden":"true"}}),a("span",{staticClass:"caret"})])}],G=a("c1df"),Q=a.n(G),J={filters:{formatDate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"llll";return e?Q.a.utc(e).format(t):""},fromNow:function(e,t){return Q.a.utc(e).fromNow(t)},formatDuration:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"seconds",a=arguments.length>2?arguments[2]:void 0,o=Q.a.locale();Q.a.locale("en");var r=Q.a.duration(e,t).humanize(a);return Q.a.locale(o),r},formatDurationLocalized:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"seconds",o=arguments.length>3?arguments[3]:void 0,r=Q.a.locale();Q.a.locale(t);var n=Q.a.duration(e,a).humanize(o);return Q.a.locale(r),n}}},X={props:["audioFile","selected","selectable","langId"],mixins:[b["a"],J],computed:{audioFileUrl:function(){return this.audioFile}},methods:{select:function(){this.$emit("select")},clear:function(){this.$emit("clear")}}},Z=X,W=(a("79f2"),Object($["a"])(Z,K,z,!1,null,null,null)),H=W.exports,Y={props:["alternateSelections","selectedAudioFile","langId","audioFiles","isPlaying","audioPlayerUrl","resourceId"],components:{AudioLibrarySearchField:R,AudioLibrarySelection:H},computed:{selectable:function(){return!k.a.isEmpty(this.alternateSelections)}},methods:Object(i["a"])(Object(i["a"])({},Object(U["a"])("flow",["resource_setOrCreateValueModeSpecific"])),{},{clearSelection:function(){this.resource_setOrCreateValueModeSpecific({resourceId:this.resourceId,filter:{languageId:this.langId,contentType:f["SupportedContentType"].AUDIO,modes:[f["SupportedMode"].IVR]},value:""})},selectAudioFile:function(e){var t=e.value,a=e.langId;this.resource_setOrCreateValueModeSpecific({resourceId:this.resourceId,filter:{languageId:a,contentType:f["SupportedContentType"].AUDIO,modes:[f["SupportedMode"].IVR]},value:t.description})}})},ee=Y,te=Object($["a"])(ee,F,A,!1,null,null,null),ae=te.exports,oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"upload-monitor"},[e.hasProgress?a("div",{staticClass:"upload-monitor-progress"},[a("h6",[e._v(e._s(e._f("trans")("trees.uploading"))+"â€¦ "+e._s(e.upload.file.name))]),a("div",{staticClass:"progress"},[a("b-progress",{staticClass:"mb-3",attrs:{value:1*e.progress,"show-value":"",animated:""}})],1)]):e._e(),e.isFailure?a("p",{staticClass:"text-danger small"},[e._v(" "+e._s(e._f("trans")("trees.error-uploading-file-try-again"))+" "),e.upload.message?a("span",{staticClass:"details"},[e._v("("+e._s(e.upload.message)+")")]):e._e()]):e._e(),e.hasProgress?e._e():e._t("default")],2)},re=[],ne=a("49f5"),ie=(a("4160"),a("159b"),a("bc3a")),se=a.n(ie),le={UPLOADING:-1,UNINITIALIZED:0,SUCCESS:1,FAILURE:2},ce=(o={},Object(v["a"])(o,le.UPLOADING,"uploading"),Object(v["a"])(o,le.UNINITIALIZED,"uninitialized"),Object(v["a"])(o,le.SUCCESS,"success"),Object(v["a"])(o,le.FAILURE,"failure"),{namespaced:!0,state:{uploadProgressByKey:{},errorMessageByKey:{},uploadsById:{},uploadIdsByKey:{}},mutations:{setErrorMessage:function(e,t){var a=e.errorMessageByKey,o=t.key,r=t.errorMessage;E.a.set(a,o,r)},setUploadProgress:function(e,t){var a=e.uploadProgressByKey,o=t.key,r=t.uploadProgress;E.a.set(a,o,r)},setUploadStatusFor:function(e,t){var a=e.uploadsById,o=e.uploadIdsByKey,r=t.file,n=t.key,i=t.status,s=t.progress,l=t.message,c=t.cancel,u=k.a.pick(r,["averageSpeed","currentSpeed","error","name","paused","relativePath","size","uniqueIdentifier"]);E.a.set(a,u.uniqueIdentifier,{key:n,status:i,progress:s,message:l,cancel:c,file:u}),E.a.set(o,n,u.uniqueIdentifier)}},actions:{uploadFile:function(e,t){var a=e.commit,o=t.key,r=t.uploadUrl,n=t.formDataFields,i=t.onSuccess,s=t.onError;if(!r)return a("setUploadProgress",{key:o,uploadProgress:null}),void s(new Error("url was ".concat(r)));var l=new FormData;k.a.forEach(n,(function(e,t){l.set(t,e)}));var c={onUploadProgress:function(e){a("setUploadProgress",{key:o,uploadProgress:Math.floor(100*e.loaded/e.total)})}};se.a.post(r,l,c).then((function(e){a("setUploadProgress",{key:o,uploadProgress:null}),i(e)})).catch((function(e){a("setUploadProgress",{key:o,uploadProgress:null}),s(e)}))},uploadFiles:function(e,t){var a=e.commit,o=(e.dispatch,e.state,t.key),r=t.files,n=t.uploader,i=function(e){return n.cancel()};r.forEach((function(e){return a("setUploadStatusFor",{file:e,key:o,progress:0,status:le.UNINITIALIZED,message:null,cancel:i})})),n.on("fileProgress",(function(e,t){console.debug("Upload in progress... ".concat(_.parseInt(100*e.progress()),"%")),a("setUploadStatusFor",{file:e,key:o,progress:e.progress(),status:le.UPLOADING,message:null,cancel:i})})),n.on("fileSuccess",(function(e,t){console.debug("Upload successful!"),a("setUploadStatusFor",{file:e,key:o,progress:1,status:le.SUCCESS,message:null,cancel:i})})),n.on("error",(function(e,t){var r=JSON.parse(e)||{},n=r.status_description;console.debug("Upload has error ".concat(n)),a("setUploadStatusFor",{file:t,key:o,status:le.FAILURE,message:n,cancel:i})})),n.upload(),console.debug("Upload in progress...")}}}),ue={props:["uploadKey"],mixins:[b["a"]],components:{BProgress:ne["a"]},computed:Object(i["a"])(Object(i["a"])({},Object(U["d"])("multimediaUpload",["uploadsById","uploadIdsByKey"])),{},{upload:function(){return this.uploadsById[this.uploadIdsByKey[this.uploadKey]]},hasProgress:function(){return this.upload&&this.upload.status!==le.SUCCESS&&this.upload.status!==le.FAILURE},isFailure:function(){return this.upload&&this.upload.status===le.FAILURE},progress:function(){return 100*k.a.get(this.upload,"progress",0)}}),created:function(){var e=this.$store,t={multimediaUpload:ce};Object(w["forEach"])(t,(function(t,a){return!e.hasModule(a)&&e.registerModule(a,t)}))}},de=ue,pe=(a("9ea4"),Object($["a"])(de,oe,re,!1,null,null,null)),fe=pe.exports,be=a("44e8"),ge=Object(p["c"])("flow"),he=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.discoverContentTypesFor=j["b"],e.findOrGenerateStubbedVariantOn=j["c"],e.findResourceVariantOverModesOn=j["d"],e.SupportedMode=f["SupportedMode"],e.SupportedContentType=f["SupportedContentType"],e}return Object(l["a"])(a,[{key:"handleFilesSubmittedFor",value:function(e,t){var a=t.data;console.debug("call handleFilesSubmittedFor"),this.$store.dispatch("multimediaUpload/uploadFiles",Object(i["a"])(Object(i["a"])({},a),{},{key:e}))}},{key:"handleFileSuccessFor",value:function(e,t,a){var o=a.data,r=(o.file,o.json),n=(this.block.uuid,JSON.parse(r)),i=n.audio_file_id,s=n.audio_uuid,l=n.created_at.date,c=n.description,u=n.duration_seconds,d=c.split(".")[c.split(".").length-1],p={id:i,filename:s,description:c,language_id:t,duration_seconds:u,original_extension:d,created_at:l};this.resource_setOrCreateValueModeSpecific({resourceId:this.resource.uuid,filter:{languageId:t,contentType:f["SupportedContentType"].AUDIO,modes:[f["SupportedMode"].IVR]},value:c}),a.target.blur(),this.pushAudioIntoLibrary(p)}},{key:"findAudioResourceVariantFor",value:function(e,t){try{return Object(j["d"])(e,t).value}catch(a){if(!(a instanceof be["a"]))throw a;return null}}}]),a}(E.a);Object(d["__decorate"])([p["a"]],he.prototype,"availableAudio",void 0),Object(d["__decorate"])([p["a"]],he.prototype,"isFeatureAudioUploadEnabled",void 0),Object(d["__decorate"])([p["b"]],he.prototype,"pushAudioIntoLibrary",void 0),Object(d["__decorate"])([ge.Action],he.prototype,"resource_setOrCreateValueModeSpecific",void 0),he=Object(d["__decorate"])([Object(C["a"])({props:{block:{type:Object,required:!0},flow:{type:Object,default:null},label:{type:[String,Number]},resource:{type:Object,default:null}},mixins:[b["a"],x,g["a"],h["a"]],components:{AudioLibrarySelector:ae,ResourceVariantTextEditor:I["a"],UploadMonitor:fe}})],he);var ve=he,me=ve,ye=Object($["a"])(me,r,n,!1,null,null,null);t["a"]=ye.exports},"704a":function(e,t,a){"use strict";var o=a("793b"),r=a.n(o);t["default"]=r.a},7928:function(e,t,a){var o=a("24fb");t=o(!1),t.push([e.i,".btn-ghost{background:transparent;border:none}.audio-library-selection{position:relative;background-color:transparent!important;background-image:none!important;border-color:#ccc!important}.audio-library-selection .audio-library-selection-download-dropdown{position:absolute;right:1.6em;top:50%;margin-top:-8px;color:#888}.audio-library-selection .audio-library-selection-download-dropdown svg{vertical-align:middle}.audio-library-selection .audio-library-selection-clear-selection{margin-right:-7px}.audio-library-selection .audio-file-description{text-overflow:ellipsis;overflow:hidden;margin-bottom:3px}.audio-library-selection .vue-sound-wrapper{margin-bottom:8px;margin-left:1em}.audio-library-selection .vue-sound-wrapper .vue-sound__player .icon-pause2,.audio-library-selection .vue-sound-wrapper .vue-sound__player .icon-play3{font-size:130%;color:#888}.audio-library-selection .vue-sound-wrapper .vue-sound__player .icon-pause2:hover,.audio-library-selection .vue-sound-wrapper .vue-sound__player .icon-play3:hover{color:#000;text-decoration:none}.audio-library-selection .vue-sound-wrapper .vue-sound__player .icon-download,.audio-library-selection .vue-sound-wrapper .vue-sound__player .icon-stop2,.audio-library-selection .vue-sound-wrapper .vue-sound__player .icon-volume-high,.audio-library-selection .vue-sound-wrapper .vue-sound__player .volume-toggle{display:none!important}.audio-library-selection .vue-sound-wrapper .vue-sound__player .vue-sound__playback-time-current,.audio-library-selection .vue-sound-wrapper .vue-sound__player .vue-sound__playback-time-separator,.audio-library-selection .vue-sound-wrapper .vue-sound__player .vue-sound__playback-time-total{font-size:80%;color:#888}.audio-library-selection .vue-sound-wrapper .vue-sound__player .vue-sound__playback-time-wrapper{text-align:center;width:71%!important}",""]),e.exports=t},"792f":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-right"},[a("small",{staticClass:"text-muted"},[e._v(e._s(e._f("trans")("flow-builder.block-id"))+": "),a("em",[e._v(e._s(e.blockId))])])])},r=[],n=a("d4ec"),i=a("bee2"),s=a("262e"),l=a("2caf"),c=a("9ab4"),u=a("8bbf"),d=a.n(u),p=a("60a3"),f=a("3a37"),b=function(e){Object(s["a"])(a,e);var t=Object(l["a"])(a);function a(){return Object(n["a"])(this,a),t.apply(this,arguments)}return Object(i["a"])(a,[{key:"blockId",get:function(){return this.block.uuid||""}}]),a}(d.a);Object(c["__decorate"])([Object(p["b"])()],b.prototype,"block",void 0),b=Object(c["__decorate"])([Object(p["a"])({mixins:[f["a"]]})],b);var g=b,h=g,v=a("2877"),m=Object(v["a"])(h,o,r,!1,null,null,null);t["a"]=m.exports},"793b":function(e,t,a){var o=a("0be7");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var r=a("499e").default;r("98e06cea",o,!0,{sourceMap:!1,shadowMode:!1})},"79f2":function(e,t,a){"use strict";var o=a("bc39"),r=a.n(o);r.a},"7c15":function(e,t,a){"use strict";var o=a("ac23"),r=a.n(o);r.a},"820c":function(e,t,a){var o=a("b986");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var r=a("499e").default;r("001dc3d2",o,!0,{sourceMap:!1,shadowMode:!1})},"9ea4":function(e,t,a){"use strict";var o=a("820c"),r=a.n(o);r.a},ac23:function(e,t,a){var o=a("c620");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var r=a("499e").default;r("804866ec",o,!0,{sourceMap:!1,shadowMode:!1})},b986:function(e,t,a){var o=a("24fb");t=o(!1),t.push([e.i,".progress{margin-bottom:.5em}",""]),e.exports=t},bb40:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"resource-variant-text-editor"},[e.isEditable?a("div",{staticClass:"content-editor",class:{"content-editor-selected":!!e.content}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"},{name:"focus",rawName:"v-focus",value:e.isSelected,expression:"isSelected"}],staticClass:"form-control",attrs:{placeholder:e._f("trans")("flow-builder.enter-"+e.resourceVariant.contentType+"-content")},domProps:{value:e.content},on:{focus:e.select,blur:e.deselect,input:function(t){t.target.composing||(e.content=t.target.value)}}})]):e._e(),a("div",{staticClass:"content-toolbar"},[e.isEditable?a("span",{staticClass:"text-muted transition-all",class:{invisible:!e.characterCounter.count}},[e._v(" "+e._s(e.characterCounter.count)+" characters "),"sms"===e.mode&&e.characterCounter.pages>1?[e._v(" ("+e._s(e.characterCounter.pages)+" "+e._s(e.characterCounter.hasUnicode?"unicode pages":"pages")+") ")]:e._e()],2):e._e(),e.doesContentContainExpression?a("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top.html",value:"<p>"+e.trans("flow-builder.youre-using-floip-expressions")+"</p>\n                     <p>\n                       <strong>"+e.trans("flow-builder.pro-tip")+":</strong>\n                       "+e.trans("flow-builder.floip-expressions-escape-with-double-at-symbol")+"\n                     </p>",expression:"`<p>${trans('flow-builder.youre-using-floip-expressions')}</p>\n                     <p>\n                       <strong>${trans('flow-builder.pro-tip')}:</strong>\n                       ${trans('flow-builder.floip-expressions-escape-with-double-at-symbol')}\n                     </p>`",modifiers:{hover:!0,top:!0,html:!0}}],attrs:{href:"https://floip.gitbooks.io/flow-specification/content/fundamentals/expressions.html",target:"_blank"}},[a("kbd",{staticStyle:{"margin-left":"1em"}},[a("i",{staticClass:"glyphicon glyphicon-console"}),e.doesContentContainExpressionError?a("i",{staticClass:"glyphicon glyphicon glyphicon-remove-sign text-danger"}):a("i",{staticClass:"glyphicon glyphicon-ok-sign text-success"})])]):e._e(),e.doesContentContainExpressionError?a("div",{staticClass:"alert alert-danger",staticStyle:{"margin-top":"0.5em"}},[a("p",[a("i",{staticClass:"glyphicon glyphicon-remove-sign"}),a("strong",[a("a",{attrs:{href:"https://floip.gitbooks.io/flow-specification/content/fundamentals/expressions.html",target:"_blank"}},[e._v("FLOIP Expression")]),e._v(" "+e._s(e._f("trans")("flow-builder.error-found"))+" ")])]),a("p",[a("em",[e._v(" "+e._s(e.contentExpressionAST.message)+" ("),1!==e.contentExpressionAST.location.start.line?a("span",[e._v(e._s(e._f("trans")("flow-builder.on-line"))+" "+e._s(e.contentExpressionAST.location.start.line)+", ")]):e._e(),e._v(e._s(e._f("trans")("flow-builder.at-character"))+" "+e._s(e.contentExpressionAST.location.start.column)+") ")])])]):e._e()]),e.isEditable?e._e():[e.content?a("p",[e._v(e._s(e.content))]):a("p",[a("em",{staticClass:"text-muted"},[e._v(e._s(e._f("trans")("flow-builder.no-sms-content-yet")))])])]],2)},r=[],n=(a("b0c0"),a("5530")),i=a("8bbf"),s=a.n(i),l=a("3a37"),c=a("14d3"),u=a("2ef0"),d=a("f837"),p=a.n(d),f=a("2f62"),b=a("b458");s.a.use(b["a"]);var g={components:{},mixins:[l["a"],p.a.mixin],props:{isEditable:Boolean,resourceId:{type:String,default:null},resourceVariant:{type:Object,default:null},mode:{type:String,default:null},enableAutogenButton:{type:Boolean,default:!0}},data:function(){return{isSelected:!1}},computed:{content:{get:function(){return this.resourceVariant.value},set:function(e){var t=this.resourceId,a=this.mode,o=this.resourceVariant,r=o.languageId,n=o.contentType;this.resource_setOrCreateValueModeSpecific({resourceId:t,filter:{languageId:r,contentType:n,modes:[a]},value:e})}},contentExpressionAST:function(){var e=[];try{e=Object(c["parse"])(this.content)}catch(a){if(a instanceof SyntaxError||"SyntaxError"===a.name)return a}var t=Object(u["some"])(e,u["isObject"]);return t?e:null},doesContentContainExpression:function(){return!!this.contentExpressionAST},doesContentContainExpressionError:function(){return!!(this.contentExpressionAST instanceof Error)},characterCounter:function(){var e=!/^[\x00-\x7F]*$/.test(this.content),t=this.content.length;return console.debug("BlockTextContentEditorForLangAndType","characterCounter",{hasUnicode:e,count:t}),{hasUnicode:e,count:t,pages:e?Math.ceil(t/70):Math.ceil(t/160)}}},methods:Object(n["a"])(Object(n["a"])({},Object(f["a"])("flow",["resource_setOrCreateValueModeSpecific"])),{},{select:function(){this.isSelected=!0},deselect:function(){this.isSelected=!1}})},h=g,v=a("2877"),m=a("704a"),y=Object(v["a"])(h,o,r,!1,null,null,null);"function"===typeof m["default"]&&Object(m["default"])(y);t["a"]=y.exports},bc39:function(e,t,a){var o=a("7928");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var r=a("499e").default;r("f82b14ce",o,!0,{sourceMap:!1,shadowMode:!1})},c620:function(e,t,a){var o=a("24fb");t=o(!1),t.push([e.i,".audio-library-search-field.dropdown .dropdown-menu[data-v-1df01a30]{display:block;min-width:100%}.audio-library-search-field.dropdown .dropdown-menu>li.pagers>a[data-v-1df01a30]{clear:none;margin-top:0;margin-bottom:0;padding-top:.5em;padding-bottom:.5em}.audio-library-search-field.dropdown .dropdown-menu>li.pagers>a.disabled[data-v-1df01a30]{text-decoration:none;background-color:transparent;background-image:none;filter:progid:DXImageTransform.Microsoft.gradient(enabled = false);cursor:not-allowed;color:#777}.close[data-v-1df01a30]{pointer-events:auto}",""]),e.exports=t},f04e:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("text-editor",{attrs:{"is-editable":e.isEditable,label:e._f("trans")("flow-builder.block-name"),placeholder:e._f("trans")("flow-builder.enter-block-name")},on:{keydown:e.filterName},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[a("small",{staticClass:"text-muted"},[e._v(" "+e._s(e._f("trans")("flow-builder.only-accepts-word-characters"))+" ")])])],1)},r=[],n=(a("b0c0"),a("ac1f"),a("466d"),a("5530")),i=a("2f62"),s=a("d883"),l=a("3a37"),c={components:{TextEditor:s["a"]},mixins:[l["a"]],props:{isEditable:{default:!0,type:Boolean},block:{type:Object,required:!0}},computed:{name:{get:function(){return this.block.name},set:function(e){this.block_setName({blockId:this.block.uuid,value:e})}}},methods:Object(n["a"])(Object(n["a"])({},Object(i["c"])("flow",["block_setName"])),{},{filterName:function(e){e.key.match(/\W+|Enter/g)&&e.preventDefault()}})},u=c,d=a("2877"),p=Object(d["a"])(u,o,r,!1,null,null,null);t["a"]=p.exports}}]);
//# sourceMappingURL=flow-builder.umd.min.1.js.map